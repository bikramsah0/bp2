<div class="section-light-box lightbox-width">
    <h1>De-Assignment</h1>
    <div *ngIf="isTopCardVisible">
        <div fxLayout="row"
             fxLayoutGap="2%"
             fxLayoutAlign="start stretch">
            <div fxLayout="column"
                 fxLayoutAlign="center center"
                 fxFlex="4%">
                <mat-icon class="icon-padding title-icon">warning</mat-icon>
            </div>
            <div fxLayout="column"
                 fxLayoutAlign="center start"
                 fxFlex="60%">
                <h2 class="no-margin warning-title"> Some contracts can't be de-assigned </h2>
            </div>
        </div>
        <div class="full-invoiced-contract-list">
            <p *ngFor="let assigned of fullyInvoiceContract">
                {{assigned.contractLabel}} : {{assigned.reasonForDeassignment}}
            </p>
        </div>
        <mat-divider></mat-divider>
    </div>

    <div *ngIf="isBottomCardVisible">
        <p>
            The following contracts will be de-assigned. Unselect the ones for which you want to keep traffic
            details.
        </p>
        <mat-chip-list multiple>
            <mat-chip *ngFor="let assigned of model.assignedSections"
                      [selected]="assigned.removeSectionTrafficInfo"
                      (click)="onSelectedContractClicked(assigned)">
                <mat-icon>{{ assigned.removeSectionTrafficInfo ? 'check_circle' : 'panorama_fish_eye'}}</mat-icon>
                {{assigned.contractLabel}}
            </mat-chip>
        </mat-chip-list>
    </div>
    <div fxLayout="row"
         fxLayoutAlign="space-between end">
        <button mat-button
                (click)="onDiscardButtonClicked()">discard</button>
        <button mat-button
                (click)="onDeassignButtonClicked()"
                *ngIf="isBottomCardVisible">deassign contracts</button>
    </div>
</div>
