(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["execution-execution-module"],{

/***/ "./Client/app/execution/document/contract-advice-generation/contract-advice-generation.component.html":
/*!************************************************************************************************************!*\
  !*** ./Client/app/execution/document/contract-advice-generation/contract-advice-generation.component.html ***!
  \************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"main-container\">\r\n    <div *ngIf=\"isLoading\">\r\n        <mat-expansion-panel expanded=\"true\">\r\n            <mat-expansion-panel-header>\r\n                <mat-panel-title>\r\n                    <h2>Loading</h2>\r\n                    <div class=\"custom-line-title\"></div>\r\n                </mat-panel-title>\r\n            </mat-expansion-panel-header>\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"center center\"\r\n                 fxLayoutWrap\r\n                 fxLayoutGap=\"20px\">\r\n                <mat-spinner color=\"accent\"></mat-spinner>\r\n            </div>\r\n        </mat-expansion-panel>\r\n    </div>\r\n    <div fxLayout=\"column\"\r\n         fxLayoutAlign=\"none\"\r\n         [ngClass]=\"{'hidden-during-loading':isLoading}\">\r\n\r\n        <atlas-contract-advice-generation-selection-form #SelectionForm>\r\n        </atlas-contract-advice-generation-selection-form>\r\n        <atlas-document-list-card #DocumentList></atlas-document-list-card>\r\n        <div class=\"btn-container\">\r\n            <div fxFlex=\"50\"\r\n                 fxLayout=\"row\"\r\n                 fxAlignLayout=\"start start\">\r\n                <button mat-button\r\n                        type=\"button\"\r\n                        (click)=\"onCancelButtonClicked()\">\r\n                    cancel\r\n                </button>\r\n            </div>\r\n            <div fxLayout=\"column \"\r\n                 fxFlex=\"50\"\r\n                 fxLayoutAlign=\"start end \">\r\n                <mat-slide-toggle *ngIf=\"this.selectionForm.documentTemplateCtrl.value &&\r\n                this.selectionForm.documentTemplateCtrl.value.length > 0\"\r\n                                  [formControl]=\"previewDocumentCtrl\">Preview Document </mat-slide-toggle>\r\n                <button mat-raised-button\r\n                        type=\"submit\"\r\n                        (click)=\"onGenerateDocumentClicked()\">\r\n                    Generate\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/document/contract-advice-generation/contract-advice-generation.component.scss":
/*!************************************************************************************************************!*\
  !*** ./Client/app/execution/document/contract-advice-generation/contract-advice-generation.component.scss ***!
  \************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/document/contract-advice-generation/contract-advice-generation.component.ts":
/*!**********************************************************************************************************!*\
  !*** ./Client/app/execution/document/contract-advice-generation/contract-advice-generation.component.ts ***!
  \**********************************************************************************************************/
/*! exports provided: ContractAdviceGenerationComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContractAdviceGenerationComponent", function() { return ContractAdviceGenerationComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/entities/window-injection-token */ "./Client/app/shared/entities/window-injection-token.ts");
/* harmony import */ var _shared_services_document_popup_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../shared/services/document-popup.service */ "./Client/app/shared/services/document-popup.service.ts");
/* harmony import */ var _shared_services_security_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/services/security.service */ "./Client/app/shared/services/security.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./../../../shared/enums/document-type.enum */ "./Client/app/shared/enums/document-type.enum.ts");
/* harmony import */ var _shared_enums_generate_document_action_enum__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./../../../shared/enums/generate-document-action.enum */ "./Client/app/shared/enums/generate-document-action.enum.ts");
/* harmony import */ var _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./../../../shared/services/http-services/document.service */ "./Client/app/shared/services/http-services/document.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _list_card_document_list_card_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./../list/card/document-list-card.component */ "./Client/app/execution/document/list/card/document-list-card.component.ts");
/* harmony import */ var _form_components_selection_form_selection_form_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./form-components/selection-form/selection-form.component */ "./Client/app/execution/document/contract-advice-generation/form-components/selection-form/selection-form.component.ts");
/* harmony import */ var _shared_enums_document_entity_type_enum__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../shared/enums/document-entity-type.enum */ "./Client/app/shared/enums/document-entity-type.enum.ts");
/* harmony import */ var _shared_entities_document_popup_button_settings_entity__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../shared/entities/document-popup-button-settings.entity */ "./Client/app/shared/entities/document-popup-button-settings.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};


















var ContractAdviceGenerationComponent = /** @class */ (function () {
    function ContractAdviceGenerationComponent(securityService, route, documentService, snackbarService, window, dialog, utilService, documentPopupService, router) {
        this.securityService = securityService;
        this.route = route;
        this.documentService = documentService;
        this.snackbarService = snackbarService;
        this.window = window;
        this.dialog = dialog;
        this.utilService = utilService;
        this.documentPopupService = documentPopupService;
        this.router = router;
        this.isLoading = true;
        this.destroy$ = new rxjs__WEBPACK_IMPORTED_MODULE_3__["Subject"]();
    }
    ContractAdviceGenerationComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.securityService.isSecurityReady().subscribe(function () {
            _this.initView();
            _this.isLoading = false;
        });
        this.previewDocumentCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_9__["AtlasFormControl"]('previewDocumentCtrl', true);
        this.sectionId = Number(this.route.snapshot.paramMap.get('recordId'));
    };
    ContractAdviceGenerationComponent.prototype.ngOnDestroy = function () {
        this.destroy$.next();
        this.destroy$.complete();
    };
    ContractAdviceGenerationComponent.prototype.initView = function () {
        this.company = this.route.snapshot.paramMap.get('company');
        this.recordId = Number(this.route.snapshot.paramMap.get('recordId'));
    };
    ContractAdviceGenerationComponent.prototype.downloadDocument = function (response) {
        var newBlob = new Blob([response.body], { type: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' });
        var data = this.window.URL.createObjectURL(newBlob);
        var link = document.createElement('a');
        link.href = data;
        link.download = this.utilService.getFileNameFromContentDisposition(response);
        link.click();
    };
    ContractAdviceGenerationComponent.prototype.onGenerateDocumentClicked = function () {
        var templateCtrl = this.selectionForm.documentTemplateCtrl.value;
        if (!templateCtrl || (templateCtrl && templateCtrl.length === 0)) {
            this.snackbarService.throwErrorSnackBar('Please select a template');
            return;
        }
        this.generateNextDocument(0);
    };
    ContractAdviceGenerationComponent.prototype.generateNextDocument = function (index) {
        if (this.selectionForm.documentTemplateCtrl.value.length > index) {
            if (this.previewDocumentCtrl.value) {
                this.generateAndOpenDocument(index, true);
            }
            else {
                this.generateAndOpenDocument(index);
            }
        }
    };
    ContractAdviceGenerationComponent.prototype.generateAndOpenDocument = function (index, isPreview) {
        var _this = this;
        if (isPreview === void 0) { isPreview = false; }
        var template = this.selectionForm.documentTemplateCtrl.value[index];
        this.isLoading = true;
        this.snackbarService.informationSnackBar('Generating ' + (isPreview ? 'preview' : 'final') + ' document. Please wait...');
        this.documentService.generateContractAdvice(this.recordId, template.path, isPreview)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["finalize"])(function () {
            _this.isLoading = false;
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["takeUntil"])(this.destroy$))
            .subscribe(function (documentReference) {
            if (!documentReference.physicalDocumentId) {
                _this.snackbarService.informationSnackBar('Error generating the document');
                return;
            }
            _this.snackbarService.informationSnackBar('Document generated successfully');
            _this.documentService.getGeneratedDocumentContent(documentReference.physicalDocumentId, isPreview)
                .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["takeUntil"])(_this.destroy$))
                .subscribe(function (response) {
                _this.downloadDocument(response);
                if (isPreview) {
                    _this.previewDocument(index);
                }
                else {
                    _this.generateNextDocument(index + 1);
                }
            });
        });
    };
    ContractAdviceGenerationComponent.prototype.previewDocument = function (index) {
        var _this = this;
        var template = this.selectionForm.documentTemplateCtrl.value[index];
        var dialog = this.documentPopupService.showDocumentGenerationPopup('Contract [' + template.name + ']', 'contract advice', new _shared_entities_document_popup_button_settings_entity__WEBPACK_IMPORTED_MODULE_17__["DocumentPopupButtonSettings"](), this.previewDocumentCtrl.value, false);
        dialog.componentInstance.documentSelected
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["takeUntil"])(this.destroy$))
            .subscribe(function (file) {
            _this.onFileSelected(dialog, template.path, file);
        });
        dialog.afterClosed()
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["takeUntil"])(this.destroy$))
            .subscribe(function (answer) {
            _this.onDialogClosed(answer, index);
        });
    };
    ContractAdviceGenerationComponent.prototype.onFileSelected = function (dialog, templatePath, file) {
        var _this = this;
        this.documentPopupService.startDialogWork(dialog, 'Uploading document...');
        this.documentService.uploadDocument(this.recordId, _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_10__["DocumentTypes"].ContractAdvice, templatePath, true, file)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["mergeMap"])(function (document) {
            dialog.componentInstance.processMessage = 'Generating final document...';
            return _this.documentService.assignContractAdviceToSection(_this.recordId, document.physicalDocumentId, templatePath);
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["mergeMap"])(function (document) {
            dialog.componentInstance.processMessage = 'Downloading final document...';
            return _this.documentService.getGeneratedDocumentContent(document.physicalDocumentId);
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["finalize"])(function () {
            _this.documentPopupService.finishDialogWork(dialog);
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["takeUntil"])(this.destroy$))
            .subscribe(function (response) {
            if (typeof response === 'string') {
                dialog.componentInstance.errorMessage = response;
            }
            else {
                _this.downloadDocument(response);
                dialog.close();
            }
        }, function (error) {
            dialog.componentInstance.errorMessage = _this.documentPopupService.getErrorMessage(error, _shared_enums_document_entity_type_enum__WEBPACK_IMPORTED_MODULE_16__["DocumentEntityTypes"].Contract);
        });
    };
    ContractAdviceGenerationComponent.prototype.onCancelButtonClicked = function () {
        if (this.sectionId) {
            this.router.navigate(['/' + this.company + '/trades/display/', this.sectionId]);
        }
    };
    ContractAdviceGenerationComponent.prototype.onDialogClosed = function (dialogAnswer, index) {
        if (dialogAnswer && dialogAnswer['buttonClicked']) {
            if (dialogAnswer['buttonClicked'] === _shared_enums_generate_document_action_enum__WEBPACK_IMPORTED_MODULE_11__["GenerateDocumentActions"].ConfirmDocumentGeneration) {
                this.generateAndOpenDocument(index);
            }
        }
        else {
            this.generateNextDocument(index + 1);
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('SelectionForm'),
        __metadata("design:type", _form_components_selection_form_selection_form_component__WEBPACK_IMPORTED_MODULE_15__["ContractAdviceGenerationSelectionFormComponent"])
    ], ContractAdviceGenerationComponent.prototype, "selectionForm", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('DocumentList'),
        __metadata("design:type", _list_card_document_list_card_component__WEBPACK_IMPORTED_MODULE_14__["DocumentListCardComponent"])
    ], ContractAdviceGenerationComponent.prototype, "documentList", void 0);
    ContractAdviceGenerationComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-contract-advice-generation',
            template: __webpack_require__(/*! ./contract-advice-generation.component.html */ "./Client/app/execution/document/contract-advice-generation/contract-advice-generation.component.html"),
            styles: [__webpack_require__(/*! ./contract-advice-generation.component.scss */ "./Client/app/execution/document/contract-advice-generation/contract-advice-generation.component.scss")],
        }),
        __param(4, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_5__["WINDOW"])),
        __metadata("design:paramtypes", [_shared_services_security_service__WEBPACK_IMPORTED_MODULE_7__["SecurityService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_12__["DocumentService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_13__["SnackbarService"],
            Window,
            _angular_material__WEBPACK_IMPORTED_MODULE_1__["MatDialog"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_8__["UtilService"],
            _shared_services_document_popup_service__WEBPACK_IMPORTED_MODULE_6__["DocumentPopupService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"]])
    ], ContractAdviceGenerationComponent);
    return ContractAdviceGenerationComponent;
}());



/***/ }),

/***/ "./Client/app/execution/document/contract-advice-generation/form-components/selection-form/selection-form.component.html":
/*!*******************************************************************************************************************************!*\
  !*** ./Client/app/execution/document/contract-advice-generation/form-components/selection-form/selection-form.component.html ***!
  \*******************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n\t<mat-card-header>\r\n\t\t<mat-card-title>\r\n\t\t\t<h2>Select the template</h2>\r\n\t\t</mat-card-title>\r\n\t</mat-card-header>\r\n\t<mat-card-content *ngIf=\"isLoading\">\r\n\t\t<div fxLayout=\"row\"\r\n\t\t     fxLayoutAlign=\"center center\"\r\n\t\t     fxLayoutWrap\r\n\t\t     fxLayoutGap=\"20px\">\r\n\t\t\t<mat-spinner color=\"accent\"></mat-spinner>\r\n\t\t</div>\r\n\t</mat-card-content>\r\n\t<mat-card-content [ngClass]=\"{'hidden-during-loading':isLoading}\">\r\n\t\t<div fxLayout=\"row\"\r\n\t\t     fxLayoutAlign=\"space-between start\"\r\n\t\t     fxLayoutGap=\"5%\">\r\n\t\t\t<div fxFlex=\"60%\">\r\n\t\t\t\t<atlas-select-multiple-autocomplete #selectTemplate\r\n\t\t\t\t                                    [objects]=\"documentTemplates\"\r\n\t\t\t\t                                    displayProperty=\"name\"\r\n\t\t\t\t                                    placeholder=\"Document template\"\r\n\t\t\t\t                                    [controller]=\"documentTemplateCtrl\"></atlas-select-multiple-autocomplete>\r\n\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/document/contract-advice-generation/form-components/selection-form/selection-form.component.scss":
/*!*******************************************************************************************************************************!*\
  !*** ./Client/app/execution/document/contract-advice-generation/form-components/selection-form/selection-form.component.scss ***!
  \*******************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/document/contract-advice-generation/form-components/selection-form/selection-form.component.ts":
/*!*****************************************************************************************************************************!*\
  !*** ./Client/app/execution/document/contract-advice-generation/form-components/selection-form/selection-form.component.ts ***!
  \*****************************************************************************************************************************/
/*! exports provided: ContractAdviceGenerationSelectionFormComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContractAdviceGenerationSelectionFormComponent", function() { return ContractAdviceGenerationSelectionFormComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/enums/document-type.enum */ "./Client/app/shared/enums/document-type.enum.ts");
/* harmony import */ var _shared_components_select_multiple_autocomplete_select_multiple_autocomplete_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./../../../../../shared/components/select-multiple-autocomplete/select-multiple-autocomplete.component */ "./Client/app/shared/components/select-multiple-autocomplete/select-multiple-autocomplete.component.ts");
/* harmony import */ var _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./../../../../../shared/services/http-services/document.service */ "./Client/app/shared/services/http-services/document.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var ContractAdviceGenerationSelectionFormComponent = /** @class */ (function () {
    function ContractAdviceGenerationSelectionFormComponent(route, documentService) {
        this.route = route;
        this.documentService = documentService;
        this.documentTemplateCtrl = new _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormControl"]();
        this.documentTemplates = [];
        this.isLoading = true;
        this.subscription = [];
    }
    ContractAdviceGenerationSelectionFormComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.subscription.push(this.documentService.getTemplates(_shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_3__["DocumentTypes"].ContractAdvice)
            .subscribe(function (template) {
            _this.documentTemplates = template.value;
            _this.initForm();
            _this.isLoading = false;
        }));
    };
    ContractAdviceGenerationSelectionFormComponent.prototype.ngOnDestroy = function () {
        this.subscription.forEach(function (sub) {
            if (sub) {
                sub.unsubscribe();
            }
        });
    };
    ContractAdviceGenerationSelectionFormComponent.prototype.initForm = function () {
        this.documentTemplateCtrl.patchValue(undefined);
        this.selectTemplateComponent.initSelected();
        this.selectTemplateComponent.setValue();
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('selectTemplate'),
        __metadata("design:type", _shared_components_select_multiple_autocomplete_select_multiple_autocomplete_component__WEBPACK_IMPORTED_MODULE_4__["SelectMultipleAutocompleteComponent"])
    ], ContractAdviceGenerationSelectionFormComponent.prototype, "selectTemplateComponent", void 0);
    ContractAdviceGenerationSelectionFormComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-contract-advice-generation-selection-form',
            template: __webpack_require__(/*! ./selection-form.component.html */ "./Client/app/execution/document/contract-advice-generation/form-components/selection-form/selection-form.component.html"),
            styles: [__webpack_require__(/*! ./selection-form.component.scss */ "./Client/app/execution/document/contract-advice-generation/form-components/selection-form/selection-form.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_5__["DocumentService"]])
    ], ContractAdviceGenerationSelectionFormComponent);
    return ContractAdviceGenerationSelectionFormComponent;
}());



/***/ }),

/***/ "./Client/app/execution/document/dialog-boxes/document-upload-dialog-box/document-upload-dialog-box.component.html":
/*!*************************************************************************************************************************!*\
  !*** ./Client/app/execution/document/dialog-boxes/document-upload-dialog-box/document-upload-dialog-box.component.html ***!
  \*************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<h1 mat-dialog-title>{{ dialogData.title }}</h1>\r\n<mat-dialog-content class=\"mat-dialog-content\">\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"center center\"\r\n         fxLayoutWrap\r\n         fxLayoutGap=\"6px\"\r\n         *ngIf=\"!isWorkInProgress\">\r\n        <div fxLayout=\"column\">\r\n            <p>{{dialogText}}</p>\r\n            <p class=\"error-message\">{{errorMessage}}</p>\r\n        </div>\r\n    </div>\r\n    <div fxLayout=\"column\"\r\n         fxLayoutAlign=\"center center\"\r\n         fxLayoutWrap\r\n         fxLayoutGap=\"6px\"\r\n         *ngIf=\"isWorkInProgress\">\r\n        <div fxLayout=\"column\">\r\n            <mat-spinner color=\"accent\"></mat-spinner>\r\n            <p>{{processMessage}}</p>\r\n        </div>\r\n    </div>\r\n</mat-dialog-content>\r\n<div fxLayout=\"column\">\r\n    <div>\r\n        <input class=\"hidden-during-loading\"\r\n               type=\"file\"\r\n               accept=\".docx\"\r\n               (change)=\"onFileSelected($event)\"\r\n               #fileUpload>\r\n    </div>\r\n    <!-- <mat-divider></mat-divider> commenting as per Bug 24332 -->\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"space-between end\">\r\n        <button mat-button\r\n                (click)=\"onDiscardButtonClicked()\">Discard\r\n        </button>\r\n        <button mat-button\r\n                (click)=\"fileUpload.click()\"\r\n                [disabled]=\"isWorkInProgress\">Upload Document\r\n        </button>\r\n    </div>\r\n</div>\r\n"

/***/ }),

/***/ "./Client/app/execution/document/dialog-boxes/document-upload-dialog-box/document-upload-dialog-box.component.scss":
/*!*************************************************************************************************************************!*\
  !*** ./Client/app/execution/document/dialog-boxes/document-upload-dialog-box/document-upload-dialog-box.component.scss ***!
  \*************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".mat-dialog-content {\n  width: 500px; }\n\n.printing-input-container {\n  margin-top: 2%; }\n\n.error-message {\n  color: #df5a4d;\n  font-size: 0.8em; }\n"

/***/ }),

/***/ "./Client/app/execution/document/dialog-boxes/document-upload-dialog-box/document-upload-dialog-box.component.ts":
/*!***********************************************************************************************************************!*\
  !*** ./Client/app/execution/document/dialog-boxes/document-upload-dialog-box/document-upload-dialog-box.component.ts ***!
  \***********************************************************************************************************************/
/*! exports provided: DocumentUploadDialogBoxComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DocumentUploadDialogBoxComponent", function() { return DocumentUploadDialogBoxComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};





var DocumentUploadDialogBoxComponent = /** @class */ (function () {
    function DocumentUploadDialogBoxComponent(thisDialogRef, data, snackbarService, formConfigurationProvider, uiService) {
        this.thisDialogRef = thisDialogRef;
        this.data = data;
        this.snackbarService = snackbarService;
        this.formConfigurationProvider = formConfigurationProvider;
        this.uiService = uiService;
        this.documentSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.dialogText = '';
        this.errorMessage = '';
        this.processMessage = '';
        this.isWorkInProgress = false;
        this.dialogData = data;
        this.dialogText = 'Please upload your new document.';
        thisDialogRef.disableClose = true;
    }
    DocumentUploadDialogBoxComponent.prototype.ngOnInit = function () {
    };
    DocumentUploadDialogBoxComponent.prototype.onFileSelected = function (event) {
        if (event.target.files.length === 0) {
            return;
        }
        var file = event.target.files[0];
        this.documentSelected.emit(file);
        event.stopPropagation();
    };
    DocumentUploadDialogBoxComponent.prototype.onDiscardButtonClicked = function () {
        this.thisDialogRef.close(false);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], DocumentUploadDialogBoxComponent.prototype, "documentSelected", void 0);
    DocumentUploadDialogBoxComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-document-upload-dialog-box',
            template: __webpack_require__(/*! ./document-upload-dialog-box.component.html */ "./Client/app/execution/document/dialog-boxes/document-upload-dialog-box/document-upload-dialog-box.component.html"),
            styles: [__webpack_require__(/*! ./document-upload-dialog-box.component.scss */ "./Client/app/execution/document/dialog-boxes/document-upload-dialog-box/document-upload-dialog-box.component.scss")],
        }),
        __param(1, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_angular_material__WEBPACK_IMPORTED_MODULE_1__["MAT_DIALOG_DATA"])),
        __metadata("design:paramtypes", [_angular_material__WEBPACK_IMPORTED_MODULE_1__["MatDialogRef"], Object, _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_3__["SnackbarService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_2__["FormConfigurationProviderService"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_4__["UiService"]])
    ], DocumentUploadDialogBoxComponent);
    return DocumentUploadDialogBoxComponent;
}());



/***/ }),

/***/ "./Client/app/execution/document/list/card/document-list-card.component.html":
/*!***********************************************************************************!*\
  !*** ./Client/app/execution/document/list/card/document-list-card.component.html ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<atlas-list-and-search [gridCode]=\"gridCode\"\r\n                       [company]=\"company\"\r\n                       [dataLoader]=\"dataLoader\"\r\n                       #listAndSearchComponent>\r\n</atlas-list-and-search>"

/***/ }),

/***/ "./Client/app/execution/document/list/card/document-list-card.component.scss":
/*!***********************************************************************************!*\
  !*** ./Client/app/execution/document/list/card/document-list-card.component.scss ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/document/list/card/document-list-card.component.ts":
/*!*********************************************************************************!*\
  !*** ./Client/app/execution/document/list/card/document-list-card.component.ts ***!
  \*********************************************************************************/
/*! exports provided: DocumentListCardComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DocumentListCardComponent", function() { return DocumentListCardComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../shared/entities/window-injection-token */ "./Client/app/shared/entities/window-injection-token.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./../../../../shared/services/http-services/document.service */ "./Client/app/shared/services/http-services/document.service.ts");
/* harmony import */ var _shared_services_security_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./../../../../shared/services/security.service */ "./Client/app/shared/services/security.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
/* harmony import */ var _shared_components_list_and_search_list_and_search_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./../../../../shared/components/list-and-search/list-and-search.component */ "./Client/app/shared/components/list-and-search/list-and-search.component.ts");
/* harmony import */ var _shared_services_list_and_search_trade_document_data_loader__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./../../../../shared/services/list-and-search/trade-document-data-loader */ "./Client/app/shared/services/list-and-search/trade-document-data-loader.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};









var DocumentListCardComponent = /** @class */ (function () {
    function DocumentListCardComponent(securityService, documentService, route, uiService, utilService, dataLoader, window) {
        this.securityService = securityService;
        this.documentService = documentService;
        this.route = route;
        this.uiService = uiService;
        this.utilService = utilService;
        this.dataLoader = dataLoader;
        this.window = window;
        this.documentMenuActions = {
            downloadDocument: 'download',
        };
        this.documentsCreated = [];
        this.gridCode = 'physicalDocumentList';
        this.additionalFilters = [];
        this.documentGridOptions = {};
        this.documentGridRows = [];
        this.subscription = [];
    }
    DocumentListCardComponent.prototype.ngOnInit = function () {
        this.company = this.route.snapshot.paramMap.get('company');
    };
    DocumentListCardComponent.prototype.ngOnDestroy = function () {
        this.subscription.forEach(function (sub) {
            if (sub) {
                sub.unsubscribe();
            }
        });
    };
    DocumentListCardComponent.prototype.init = function () {
        this.documentGridContextualMenuActions = [
            {
                icon: '',
                text: 'Download',
                action: this.documentMenuActions.downloadDocument,
            },
        ];
    };
    DocumentListCardComponent.prototype.handleAction = function (action, document) {
        var _this = this;
        switch (action) {
            case this.documentMenuActions.downloadDocument:
                this.subscription.push(this.documentService.getGeneratedDocumentContent(document.physicalDocumentId)
                    .subscribe(function (response) {
                    _this.openGeneratedDocument(response);
                }));
                break;
            default: // throw Action not recognized exception
                break;
        }
    };
    DocumentListCardComponent.prototype.openGeneratedDocument = function (response) {
        var newBlob = new Blob([response.body], { type: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' });
        var data = this.window.URL.createObjectURL(newBlob);
        var link = document.createElement('a');
        link.href = data;
        link.download = this.utilService.getFileNameFromContentDisposition(response);
        link.click();
    };
    DocumentListCardComponent.prototype.cancel = function () {
        this.documentGridRows.forEach(function (d) { return d.isSelected = false; });
    };
    DocumentListCardComponent.prototype.versionNumberFormatter = function (param) {
        return param.value.toString().padStart(3, '0');
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('listAndSearchComponent'),
        __metadata("design:type", _shared_components_list_and_search_list_and_search_component__WEBPACK_IMPORTED_MODULE_7__["ListAndSearchComponent"])
    ], DocumentListCardComponent.prototype, "listAndSearchComponent", void 0);
    DocumentListCardComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-document-list-card',
            template: __webpack_require__(/*! ./document-list-card.component.html */ "./Client/app/execution/document/list/card/document-list-card.component.html"),
            styles: [__webpack_require__(/*! ./document-list-card.component.scss */ "./Client/app/execution/document/list/card/document-list-card.component.scss")],
            providers: [_shared_services_list_and_search_trade_document_data_loader__WEBPACK_IMPORTED_MODULE_8__["TradeDocumentDataLoader"]],
        }),
        __param(6, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_2__["WINDOW"])),
        __metadata("design:paramtypes", [_shared_services_security_service__WEBPACK_IMPORTED_MODULE_5__["SecurityService"],
            _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_4__["DocumentService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_6__["UiService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_3__["UtilService"],
            _shared_services_list_and_search_trade_document_data_loader__WEBPACK_IMPORTED_MODULE_8__["TradeDocumentDataLoader"],
            Window])
    ], DocumentListCardComponent);
    return DocumentListCardComponent;
}());



/***/ }),

/***/ "./Client/app/execution/document/list/document-list.component.html":
/*!*************************************************************************!*\
  !*** ./Client/app/execution/document/list/document-list.component.html ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"main-container\">\r\n    <atlas-list-and-search class=\"default-height\"\r\n                           [gridCode]=\"gridCode\"\r\n                           gridTitle=\"Generated documents\"\r\n                           [company]=\"company\"\r\n                           [dataLoader]=\"dataLoader\"\r\n                           [gridContextualMenuActions]=\"gridContextualMenuActions\"\r\n                           (menuActionClicked)=\"onMenuActionClicked($event)\"\r\n                           [additionalFilters]=\"additionalFilters\"\r\n                           waitBeforeLoadingData=true\r\n                           (configurationLoaded)=\"initAdditionnalFilters()\"\r\n                           #listAndSearchComponent>\r\n    </atlas-list-and-search>\r\n</div>\r\n"

/***/ }),

/***/ "./Client/app/execution/document/list/document-list.component.scss":
/*!*************************************************************************!*\
  !*** ./Client/app/execution/document/list/document-list.component.scss ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/document/list/document-list.component.ts":
/*!***********************************************************************!*\
  !*** ./Client/app/execution/document/list/document-list.component.ts ***!
  \***********************************************************************/
/*! exports provided: DocumentListComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DocumentListComponent", function() { return DocumentListComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/entities/window-injection-token */ "./Client/app/shared/entities/window-injection-token.ts");
/* harmony import */ var _shared_enums_document_entity_type_enum__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../shared/enums/document-entity-type.enum */ "./Client/app/shared/enums/document-entity-type.enum.ts");
/* harmony import */ var _shared_enums_pricing_method_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/enums/pricing-method.enum */ "./Client/app/shared/enums/pricing-method.enum.ts");
/* harmony import */ var _shared_services_document_popup_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/services/document-popup.service */ "./Client/app/shared/services/document-popup.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _dialog_boxes_document_upload_dialog_box_document_upload_dialog_box_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../dialog-boxes/document-upload-dialog-box/document-upload-dialog-box.component */ "./Client/app/execution/document/dialog-boxes/document-upload-dialog-box/document-upload-dialog-box.component.ts");
/* harmony import */ var _shared_components_list_and_search_list_and_search_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./../../../shared/components/list-and-search/list-and-search.component */ "./Client/app/shared/components/list-and-search/list-and-search.component.ts");
/* harmony import */ var _shared_entities_list_and_search_list_and_search_filter_entity__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./../../../shared/entities/list-and-search/list-and-search-filter.entity */ "./Client/app/shared/entities/list-and-search/list-and-search-filter.entity.ts");
/* harmony import */ var _shared_enums_list_and_search_filter_type_enum__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./../../../shared/enums/list-and-search-filter-type.enum */ "./Client/app/shared/enums/list-and-search-filter-type.enum.ts");
/* harmony import */ var _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./../../../shared/services/http-services/document.service */ "./Client/app/shared/services/http-services/document.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_trading_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./../../../shared/services/http-services/trading.service */ "./Client/app/shared/services/http-services/trading.service.ts");
/* harmony import */ var _shared_services_list_and_search_document_data_loader__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./../../../shared/services/list-and-search/document-data-loader */ "./Client/app/shared/services/list-and-search/document-data-loader.ts");
/* harmony import */ var _shared_services_security_service__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./../../../shared/services/security.service */ "./Client/app/shared/services/security.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_title_service__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./../../../shared/services/title.service */ "./Client/app/shared/services/title.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};





















var DocumentListComponent = /** @class */ (function () {
    function DocumentListComponent(securityService, snackbarService, documentService, route, dialog, dataLoader, window, utilService, tradingService, executionService, documentPopupService, titleService) {
        this.securityService = securityService;
        this.snackbarService = snackbarService;
        this.documentService = documentService;
        this.route = route;
        this.dialog = dialog;
        this.dataLoader = dataLoader;
        this.window = window;
        this.utilService = utilService;
        this.tradingService = tradingService;
        this.executionService = executionService;
        this.documentPopupService = documentPopupService;
        this.titleService = titleService;
        this.gridCode = 'DocumentListAndSearchGrid';
        this.isLoading = true;
        this.destroy$ = new rxjs__WEBPACK_IMPORTED_MODULE_3__["Subject"]();
        this.menuActions = {
            download: 'download',
            edit: 'edit',
        };
        this.additionalFilters = [];
    }
    DocumentListComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.company = this.route.snapshot.paramMap.get('company');
        this.titleService.setTitle(this.route.snapshot.data.title);
        this.securityService.isSecurityReady().subscribe(function () {
            _this.init();
        });
    };
    DocumentListComponent.prototype.ngOnDestroy = function () {
        this.destroy$.next();
        this.destroy$.complete();
    };
    DocumentListComponent.prototype.init = function () {
        this.initMenuAction();
    };
    DocumentListComponent.prototype.initMenuAction = function () {
        this.gridContextualMenuActions = [
            {
                icon: 'arrow_downward',
                text: 'Download',
                action: this.menuActions.download,
            },
            {
                icon: 'edit',
                text: 'Edit',
                action: this.menuActions.edit,
            },
        ];
        if (this.listAndSearchComponent) {
            this.listAndSearchComponent.gridContextualMenuActions = this.gridContextualMenuActions;
            this.listAndSearchComponent.addMenuAction();
        }
    };
    DocumentListComponent.prototype.initAdditionnalFilters = function () {
        var _this = this;
        var entity = this.route.snapshot.paramMap.get('entity');
        var recordId = this.route.snapshot.paramMap.get('recordId');
        var getRecord;
        if (!entity || !recordId) {
            this.listAndSearchComponent.waitBeforeLoadingData = false;
            this.listAndSearchComponent.loadData();
            return;
        }
        var field;
        switch (entity) {
            case 'section':
                field = this.listAndSearchComponent.columnConfiguration
                    .find(function (column) { return column.fieldName === 'Contract'; });
                getRecord = this.tradingService.getSection(Number(recordId), _shared_enums_pricing_method_enum__WEBPACK_IMPORTED_MODULE_7__["PricingMethods"].Priced).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["takeUntil"])(this.destroy$), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(function (section) {
                    return section.contractLabel;
                }));
                break;
            case 'charter':
                field = this.listAndSearchComponent.columnConfiguration
                    .find(function (column) { return column.fieldName === 'Charter'; });
                getRecord = this.executionService.getCharterById(Number(recordId)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["takeUntil"])(this.destroy$), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(function (charter) {
                    return charter.charterCode;
                }));
                break;
            default:
                break;
        }
        if (!field || !this.listAndSearchComponent) {
            this.listAndSearchComponent.waitBeforeLoadingData = false;
            this.listAndSearchComponent.loadData();
            return;
        }
        getRecord.subscribe(function (record) {
            if (!record) {
                _this.listAndSearchComponent.waitBeforeLoadingData = false;
                _this.listAndSearchComponent.loadData();
                return;
            }
            var filter = new _shared_entities_list_and_search_list_and_search_filter_entity__WEBPACK_IMPORTED_MODULE_12__["ListAndSearchFilter"]();
            filter.fieldId = field.fieldId;
            filter.fieldName = field.fieldName;
            filter.predicate = {
                filterType: _shared_enums_list_and_search_filter_type_enum__WEBPACK_IMPORTED_MODULE_13__["ListAndSearchFilterType"].Text,
                operator: 'eq',
                value1: record,
            };
            filter.isActive = true;
            _this.additionalFilters = [filter];
            _this.listAndSearchComponent.waitBeforeLoadingData = false;
            _this.listAndSearchComponent.additionalFilters = _this.additionalFilters;
            _this.listAndSearchComponent.loadData(true);
        });
    };
    DocumentListComponent.prototype.onMenuActionClicked = function (data) {
        var _this = this;
        var action = data.action;
        var document = data.rowData;
        switch (action) {
            case this.menuActions.download:
                this.documentService.getGeneratedDocumentContent(document.physicalDocumentId)
                    .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["takeUntil"])(this.destroy$))
                    .subscribe(function (response) {
                    _this.downloadDocument(response);
                });
                break;
            case this.menuActions.edit:
                this.editDocument(document);
                break;
            default: // throw Action not recognized exception
                break;
        }
    };
    DocumentListComponent.prototype.downloadDocument = function (response) {
        var newBlob = new Blob([response.body], { type: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' });
        var data = this.window.URL.createObjectURL(newBlob);
        var link = document.createElement('a');
        link.href = data;
        link.download = this.utilService.getFileNameFromContentDisposition(response);
        link.click();
    };
    DocumentListComponent.prototype.editDocument = function (document) {
        var _this = this;
        var dialog = this.dialog.open(_dialog_boxes_document_upload_dialog_box_document_upload_dialog_box_component__WEBPACK_IMPORTED_MODULE_10__["DocumentUploadDialogBoxComponent"], {
            data: {
                title: 'Edit Document',
            },
        });
        dialog.componentInstance.isWorkInProgress = true;
        dialog.componentInstance.processMessage = 'Downloading document...';
        this.documentService.getGeneratedDocumentContent(document.physicalDocumentId)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["finalize"])(function () {
            dialog.componentInstance.processMessage = '';
            dialog.componentInstance.isWorkInProgress = false;
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["takeUntil"])(this.destroy$))
            .subscribe(function (response) {
            _this.downloadDocument(response);
        });
        dialog.componentInstance.documentSelected
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["takeUntil"])(this.destroy$))
            .subscribe(function (file) {
            _this.onFileSelected(dialog, document, file);
        });
        dialog.afterClosed()
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["takeUntil"])(this.destroy$))
            .subscribe(function (answer) {
        });
    };
    DocumentListComponent.prototype.onFileSelected = function (dialog, originalDocument, file) {
        var _this = this;
        dialog.componentInstance.isWorkInProgress = true;
        dialog.componentInstance.processMessage = 'Uploading document...';
        this.documentService.uploadDocument(originalDocument.recordId, originalDocument.physicalDocumentType, originalDocument.documentTemplate, true, file)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["mergeMap"])(function (documentReference) {
            dialog.componentInstance.processMessage = 'Updating document...';
            return _this.documentService.updateDocument(originalDocument, documentReference.physicalDocumentId);
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["finalize"])(function () {
            dialog.componentInstance.processMessage = '';
            dialog.componentInstance.isWorkInProgress = false;
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["takeUntil"])(this.destroy$))
            .subscribe(function (documentReference) {
            dialog.close();
            _this.snackbarService.informationSnackBar('Document has been successfully updated.');
            _this.listAndSearchComponent.loadData();
        }, function (error) {
            dialog.componentInstance.errorMessage = _this.documentPopupService.getErrorMessage(error, _shared_enums_document_entity_type_enum__WEBPACK_IMPORTED_MODULE_6__["DocumentEntityTypes"].Unknown);
        });
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('listAndSearchComponent'),
        __metadata("design:type", _shared_components_list_and_search_list_and_search_component__WEBPACK_IMPORTED_MODULE_11__["ListAndSearchComponent"])
    ], DocumentListComponent.prototype, "listAndSearchComponent", void 0);
    DocumentListComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-document-generation-document-list',
            template: __webpack_require__(/*! ./document-list.component.html */ "./Client/app/execution/document/list/document-list.component.html"),
            styles: [__webpack_require__(/*! ./document-list.component.scss */ "./Client/app/execution/document/list/document-list.component.scss")],
            providers: [_shared_services_list_and_search_document_data_loader__WEBPACK_IMPORTED_MODULE_17__["DocumentDataLoader"]],
        }),
        __param(6, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_5__["WINDOW"])),
        __metadata("design:paramtypes", [_shared_services_security_service__WEBPACK_IMPORTED_MODULE_18__["SecurityService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_19__["SnackbarService"],
            _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_14__["DocumentService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _angular_material__WEBPACK_IMPORTED_MODULE_1__["MatDialog"],
            _shared_services_list_and_search_document_data_loader__WEBPACK_IMPORTED_MODULE_17__["DocumentDataLoader"],
            Window,
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_9__["UtilService"],
            _shared_services_http_services_trading_service__WEBPACK_IMPORTED_MODULE_16__["TradingService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_15__["ExecutionService"],
            _shared_services_document_popup_service__WEBPACK_IMPORTED_MODULE_8__["DocumentPopupService"],
            _shared_services_title_service__WEBPACK_IMPORTED_MODULE_20__["TitleService"]])
    ], DocumentListComponent);
    return DocumentListComponent;
}());



/***/ }),

/***/ "./Client/app/execution/execution-allocation/execution-allocation.component.css":
/*!**************************************************************************************!*\
  !*** ./Client/app/execution/execution-allocation/execution-allocation.component.css ***!
  \**************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".mat-button-toggle {\r\n\ttext-align: center;\r\n\tmin-width: 88px;\r\n}\r\n\r\n.highlight {\r\n\tbackground: #A7C5E2;\r\n}\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-allocation/execution-allocation.component.html":
/*!***************************************************************************************!*\
  !*** ./Client/app/execution/execution-allocation/execution-allocation.component.html ***!
  \***************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"main-container\">\r\n    <mat-expansion-panel expanded=\"true\">\r\n        <mat-expansion-panel-header>\r\n            <mat-panel-title>\r\n                <h2>Search contract</h2>\r\n                <div class=\"custom-line-title\"></div>\r\n            </mat-panel-title>\r\n        </mat-expansion-panel-header>\r\n        <form ng-submit=\"onSearchTrade()\"\r\n              fxLayout=\"row\"\r\n              fxLayoutAlign=\"space-between center\"\r\n              fxLayoutWrap>\r\n            <div fxFlex=\"100%\"\r\n                 fxLayout=\"row\"\r\n                 fxLayout.xs=\"column\"\r\n                 fxLayoutAlign=\"none left\"\r\n                 fxLayoutGap=\"20px\">\r\n                <div fxFlex=\"20%\"\r\n                     fxFlex.xs=\"100%\"\r\n                     fxFlex.sm=\"100%\">\r\n                    <mat-form-field>\r\n                        <input [(ngModel)]=\"model.searchContractReference\"\r\n                               required\r\n                               matInput\r\n                               placeholder=\"Search contract to allocate\"\r\n                               [formControl]=\"searchContractReferenceCtrl\">\r\n                        <mat-error *ngIf=\"searchContractReferenceCtrl.hasError('required')\">\r\n                            Contract is <strong>required</strong>\r\n                        </mat-error>\r\n                    </mat-form-field>\r\n                </div>\r\n                <div fxFlex=\"25%\"\r\n                     fxFlex.xs=\"100%\"\r\n                     fxFlex.sm=\"100%\">\r\n                    <button mat-icon-button\r\n                            (click)=\"onSearchTrade()\">\r\n                        <mat-icon aria-label=\"Search\">search</mat-icon>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </form>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"space-between center\"\r\n             fxLayoutWrap>\r\n            <!-- Contract date -->\r\n            <div fxFlex=\"100%\"\r\n                 fxFlex.xs=\"100%\"\r\n                 fxFlex.sm=\"100%\">\r\n                <mat-table #table\r\n                           [dataSource]=\"dataSource\"\r\n                           matSort>\r\n\r\n                    <ng-container matColumnDef=\"contractLabel\">\r\n                        <mat-header-cell *matHeaderCellDef\r\n                                         mat-sort-header> Reference </mat-header-cell>\r\n                        <mat-cell *matCellDef=\"let row\"> {{row.contractLabel}} </mat-cell>\r\n                    </ng-container>\r\n\r\n                    <ng-container matColumnDef=\"type\">\r\n                        <mat-header-cell *matHeaderCellDef\r\n                                         mat-sort-header> Type </mat-header-cell>\r\n                        <mat-cell *matCellDef=\"let row\"> {{row.type}} </mat-cell>\r\n                    </ng-container>\r\n\r\n                    <ng-container matColumnDef=\"status\">\r\n                        <mat-header-cell *matHeaderCellDef\r\n                                         mat-sort-header\r\n                                         fxFlex\r\n                                         fxShow=\"false\"\r\n                                         fxShow.gt-sm> Status </mat-header-cell>\r\n                        <mat-cell *matCellDef=\"let row\"\r\n                                  [style.color]=\"row.color\"\r\n                                  fxFlex\r\n                                  fxShow=\"false\"\r\n                                  fxShow.gt-sm> {{row.status}} </mat-cell>\r\n                    </ng-container>\r\n\r\n                    <ng-container matColumnDef=\"commodityCode\">\r\n                        <mat-header-cell *matHeaderCellDef\r\n                                         mat-sort-header\r\n                                         fxFlex\r\n                                         fxShow=\"false\"\r\n                                         fxShow.gt-sm> Commodity Code </mat-header-cell>\r\n                        <mat-cell *matCellDef=\"let row\"\r\n                                  [style.color]=\"row.color\"\r\n                                  fxFlex\r\n                                  fxShow=\"false\"\r\n                                  fxShow.gt-sm> {{row.commodityCode}} </mat-cell>\r\n                    </ng-container>\r\n\r\n                    <ng-container matColumnDef=\"quantity\">\r\n                        <mat-header-cell *matHeaderCellDef\r\n                                         mat-sort-header\r\n                                         fxFlex\r\n                                         fxShow=\"false\"\r\n                                         fxShow.gt-sm> Quantity </mat-header-cell>\r\n                        <mat-cell *matCellDef=\"let row\"\r\n                                  [style.color]=\"row.color\"\r\n                                  fxFlex\r\n                                  fxShow=\"false\"\r\n                                  fxShow.gt-sm> {{row.quantity}} {{row.quantityUnit}}</mat-cell>\r\n                    </ng-container>\r\n\r\n                    <ng-container matColumnDef=\"lastModifiedDate\">\r\n                        <mat-header-cell *matHeaderCellDef\r\n                                         mat-sort-header> Last amendment Date </mat-header-cell>\r\n                        <mat-cell *matCellDef=\"let row\"\r\n                                  [style.color]=\"row.color\">\r\n                            <atr-date-label [date]=\"row.lastModifiedDate\"></atr-date-label>\r\n                        </mat-cell>\r\n                    </ng-container>\r\n                    <ng-container matColumnDef=\"lastModifiedBy\">\r\n                        <mat-header-cell *matHeaderCellDef\r\n                                         mat-sort-header> Last amendment User </mat-header-cell>\r\n                        <mat-cell *matCellDef=\"let row\"\r\n                                  [style.color]=\"row.color\"> {{row.lastModifiedBy}} </mat-cell>\r\n                    </ng-container>\r\n                    <ng-container matColumnDef=\"selection\">\r\n                        <mat-header-cell *matHeaderCellDef\r\n                                         mat-sort-header\r\n                                         fxFlex=\"4%\"></mat-header-cell>\r\n                        <mat-cell *matCellDef=\"let row\"\r\n                                  fxFlex=\"4%\">\r\n                            <mat-checkbox (click)=\"doNothing()\"\r\n                                          [checked]=\"selectionManager.isSelected(row)\"></mat-checkbox>\r\n                        </mat-cell>\r\n                    </ng-container>\r\n\r\n                    <mat-header-row *matHeaderRowDef=\"displayedColumns\"></mat-header-row>\r\n                    <mat-row (click)=\"onRowClicked(row)\"\r\n                             *matRowDef=\"let row; columns: displayedColumns;\"></mat-row>\r\n                </mat-table>\r\n                <mat-paginator #paginator\r\n                               [pageIndex]=\"0\"\r\n                               [pageSize]=\"10\"\r\n                               [pageSizeOptions]=\"[5, 10, 25, 100]\">\r\n                </mat-paginator>\r\n            </div>\r\n\r\n        </div>\r\n        <div>\r\n            <div class=\"custom-line-footer\"></div>\r\n\r\n        </div>\r\n    </mat-expansion-panel>\r\n</div>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-allocation/execution-allocation.component.ts":
/*!*************************************************************************************!*\
  !*** ./Client/app/execution/execution-allocation/execution-allocation.component.ts ***!
  \*************************************************************************************/
/*! exports provided: ExecutionAllocationComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExecutionAllocationComponent", function() { return ExecutionAllocationComponent; });
/* harmony import */ var _angular_cdk_collections__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/cdk/collections */ "./node_modules/@angular/cdk/esm5/collections.es5.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _shared_enums_pricing_method_enum__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../shared/enums/pricing-method.enum */ "./Client/app/shared/enums/pricing-method.enum.ts");
/* harmony import */ var _shared_models_trade_partial_display_view__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../shared/models/trade-partial-display-view */ "./Client/app/shared/models/trade-partial-display-view.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_trading_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../shared/services/http-services/trading.service */ "./Client/app/shared/services/http-services/trading.service.ts");
/* harmony import */ var _shared_services_security_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../shared/services/security.service */ "./Client/app/shared/services/security.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};












var ExecutionAllocationComponent = /** @class */ (function () {
    function ExecutionAllocationComponent(securityService, executionService, tradingService, route, router, snackbarService) {
        this.securityService = securityService;
        this.executionService = executionService;
        this.tradingService = tradingService;
        this.route = route;
        this.router = router;
        this.snackbarService = snackbarService;
        this.model = {};
        this.displayedColumns = ['contractLabel', 'type', 'status', 'commodityCode', 'quantity', 'lastModifiedDate', 'lastModifiedBy', 'selection'];
        this.selectionManager = new _angular_cdk_collections__WEBPACK_IMPORTED_MODULE_0__["SelectionModel"](true, []);
        this.searchContractReferenceCtrl = new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]({ value: '' }, [_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].required]);
        this.originalsectionId = Number(this.route.snapshot.paramMap.get('sectionId'));
        this.pricingMethod = _shared_enums_pricing_method_enum__WEBPACK_IMPORTED_MODULE_6__["PricingMethods"][this.route.snapshot.paramMap.get('pricingMethod')];
    }
    ExecutionAllocationComponent.prototype.onSearchTrade = function () {
        var _this = this;
        this.executionService.findContractToAllocate(this.originalsectionId, this.model.searchContractReference, this.pricingMethod).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["map"])(function (data) {
            _this.tradeRecords = data.value.map(function (trade) {
                return new _shared_models_trade_partial_display_view__WEBPACK_IMPORTED_MODULE_7__["TradePartialDisplayView"](trade);
            });
            _this.dataSource = new _angular_material__WEBPACK_IMPORTED_MODULE_3__["MatTableDataSource"](_this.tradeRecords);
            _this.dataSource.paginator = _this.paginator;
            _this.dataSource.sort = _this.sort;
            if (_this.tradeRecords == null || _this.tradeRecords.length === 0) {
                _this.snackbarService.informationSnackBar('No matching contracts found');
            }
        }))
            .subscribe();
    };
    ExecutionAllocationComponent.prototype.onRowClicked = function (row) {
        if (this.selectionManager.isSelected(row)) {
            this.selectedRowReference = null;
            this.allocatedTo = null;
        }
        else {
            this.selectionManager.clear();
            this.selectedRowReference = row.sectionId;
            this.allocatedTo = row.contractLabel;
        }
        this.selectionManager.toggle(row);
    };
    ExecutionAllocationComponent.prototype.doNothing = function () {
        return false;
    };
    ExecutionAllocationComponent.prototype.getTrade = function (tradeId) {
        var _this = this;
        this.tradingService.getSection(tradeId, this.pricingMethod).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["map"])(function (trade) {
            _this.trade = trade;
        }))
            .subscribe();
    };
    ExecutionAllocationComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.securityService.isSecurityReady().subscribe(function () {
            _this.route.params.subscribe(function (params) {
                _this.getTrade(Number(params['sectionId']));
                _this.company = _this.route.snapshot.paramMap.get('company');
            });
        });
        this.model.searchContractReference = '';
    };
    ExecutionAllocationComponent.prototype.unloadNotification = function ($event) {
        if (this.searchContractReferenceCtrl.dirty) {
            $event.returnValue = true;
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])(_angular_material__WEBPACK_IMPORTED_MODULE_3__["MatPaginator"]),
        __metadata("design:type", _angular_material__WEBPACK_IMPORTED_MODULE_3__["MatPaginator"])
    ], ExecutionAllocationComponent.prototype, "paginator", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])(_angular_material__WEBPACK_IMPORTED_MODULE_3__["MatSort"]),
        __metadata("design:type", _angular_material__WEBPACK_IMPORTED_MODULE_3__["MatSort"])
    ], ExecutionAllocationComponent.prototype, "sort", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["HostListener"])('window:beforeunload', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], ExecutionAllocationComponent.prototype, "unloadNotification", null);
    ExecutionAllocationComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: 'atr-execution-allocation',
            template: __webpack_require__(/*! ./execution-allocation.component.html */ "./Client/app/execution/execution-allocation/execution-allocation.component.html"),
            styles: [__webpack_require__(/*! ./execution-allocation.component.css */ "./Client/app/execution/execution-allocation/execution-allocation.component.css")],
        }),
        __metadata("design:paramtypes", [_shared_services_security_service__WEBPACK_IMPORTED_MODULE_10__["SecurityService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_8__["ExecutionService"],
            _shared_services_http_services_trading_service__WEBPACK_IMPORTED_MODULE_9__["TradingService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_4__["ActivatedRoute"],
            _angular_router__WEBPACK_IMPORTED_MODULE_4__["Router"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_11__["SnackbarService"]])
    ], ExecutionAllocationComponent);
    return ExecutionAllocationComponent;
}());



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-costs/additional-cost-list-display-view.ts":
/*!**************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-costs/additional-cost-list-display-view.ts ***!
  \**************************************************************************************************************************************/
/*! exports provided: AdditionalCostListDisplayView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AdditionalCostListDisplayView", function() { return AdditionalCostListDisplayView; });
/* harmony import */ var _shared_entities_additional_cost_entity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../shared/entities/additional-cost.entity */ "./Client/app/shared/entities/additional-cost.entity.ts");

var AdditionalCostListDisplayView = /** @class */ (function () {
    function AdditionalCostListDisplayView(additionalCost, masterdata, costDirections) {
        if (additionalCost) {
            this.cashAdditionalCostId = additionalCost.cashAdditionalCostId;
            this.costDirection = this.getCostDirectionCodeFromId(additionalCost.costDirectionId, costDirections);
            this.costTypeCode = additionalCost.costTypeCode;
            this.accountCode = additionalCost.accountCode;
            this.nominalAccountNumber = additionalCost.accountCode;
            this.accountLineType = additionalCost.accountLineType;
            this.currencyCode = additionalCost.currencyCode;
            this.amount = additionalCost.amount;
            this.narrative = additionalCost.narrative;
            this.accountLineType = additionalCost.accountLineType;
            this.counterpartyCode = this.getCounterpartyDetail(additionalCost.clientAccount, masterdata.counterparties, true);
            this.customerVendor = this.getCustomerVendorFromNominalAccountDetail(additionalCost.accountCode, masterdata);
            this.clientAccountMandatory = this.getclientAccountMandatoryFromNominalAccountDetail(additionalCost.accountCode, masterdata);
        }
    }
    AdditionalCostListDisplayView.prototype.getCostDirectionCodeFromId = function (id, costDirections) {
        var costDirectionCode = costDirections.filter(function (e) { return e.costDirectionId === id; })[0].costDirection;
        return costDirectionCode;
    };
    AdditionalCostListDisplayView.prototype.getAdditionalCost = function (masterdata, costDirections) {
        var additionalCost = new _shared_entities_additional_cost_entity__WEBPACK_IMPORTED_MODULE_0__["AdditionalCost"]();
        additionalCost.cashAdditionalCostId = this.cashAdditionalCostId;
        additionalCost.costDirectionId = this.getCostDirectionIdFromCode(this.costDirection, costDirections);
        additionalCost.costTypeCode = this.costTypeCode;
        additionalCost.accountLineType = this.accountLineType;
        additionalCost.currencyCode = this.currencyCode;
        additionalCost.amount = this.amount;
        additionalCost.narrative = this.narrative;
        additionalCost.accountId =
            this.getNominalOrClientAccountIdFromCode(this.accountCode, masterdata.nominalAccounts, masterdata.counterparties);
        additionalCost.accountCode = this.accountCode;
        additionalCost.clientAccount = this.getCounterpartyDetail(this.counterpartyCode, masterdata.counterparties, false);
        additionalCost.customerVendor = this.customerVendor;
        additionalCost.clientAccountMandatory = this.clientAccountMandatory;
        return additionalCost;
    };
    AdditionalCostListDisplayView.prototype.getCostDirectionIdFromCode = function (code, costDirections) {
        var costDirectionId = costDirections.filter(function (e) { return e.costDirection === code; })[0].costDirectionId;
        return costDirectionId;
    };
    AdditionalCostListDisplayView.prototype.getNominalOrClientAccountIdFromCode = function (code, nominalAccounts, counterparties) {
        var nominalOrClientAccountId = 0;
        var filteredNominalAccount = nominalAccounts.filter(function (e) { return e.accountNumber === code; });
        var filteredCounterParty = counterparties.filter(function (e) { return e.counterpartyCode === code; });
        if (filteredNominalAccount.length > 0) {
            nominalOrClientAccountId = filteredNominalAccount[0].nominalAccountId;
        }
        else if (filteredCounterParty.length > 0) {
            nominalOrClientAccountId = filteredCounterParty[0].counterpartyID;
        }
        return nominalOrClientAccountId;
    };
    AdditionalCostListDisplayView.prototype.getCounterpartyDetail = function (value, counterparties, getCodeFromId) {
        var filteredCounterParty = counterparties.filter(function (e) { return getCodeFromId === true ? e.counterpartyID === value : e.counterpartyCode === value; });
        if (filteredCounterParty.length > 0) {
            return getCodeFromId === true ? filteredCounterParty[0].counterpartyCode : filteredCounterParty[0].counterpartyID;
        }
    };
    AdditionalCostListDisplayView.prototype.getCustomerVendorFromNominalAccountDetail = function (nominalCode, masterdata) {
        var nominalAccount = masterdata.nominalAccounts.find(function (item) { return item.accountNumber === nominalCode; });
        return nominalAccount ? nominalAccount.customerVendor : '';
    };
    AdditionalCostListDisplayView.prototype.getclientAccountMandatoryFromNominalAccountDetail = function (nominalCode, masterdata) {
        var nominalAccount = masterdata.nominalAccounts.find(function (item) { return item.accountNumber === nominalCode; });
        return (nominalAccount && nominalAccount.clientAccountMandatory === 1) ? true : false;
    };
    return AdditionalCostListDisplayView;
}());



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-costs/additional-costs.component.html":
/*!*********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-costs/additional-costs.component.html ***!
  \*********************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-accordion *ngIf=\"showGrid\"\r\n               class=\"cash-accordion\">\r\n    <mat-expansion-panel [expanded]=\"isPanelExpanded\">\r\n        <mat-expansion-panel-header [collapsedHeight]=\"'35px'\"\r\n                                    [expandedHeight]=\"'35px'\"\r\n                                    class=\"expansion-header\">\r\n            <mat-panel-title>\r\n                Additional Costs\r\n            </mat-panel-title>\r\n        </mat-expansion-panel-header>\r\n\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"space-between center\"\r\n             class=\"add-line-container\">\r\n            <div>\r\n                <div *ngIf=\"isAddorEdit\"\r\n                     fxLayout=\"row\"\r\n                     fxLayoutAlign=\"start center\"\r\n                     fxLayoutGap=\"10px\">\r\n                    <div fxLayout=\"column\"\r\n                         fxLayoutAlign=\"start start\">\r\n                        <h6 class=\"no-margin\">Add new lines:</h6>\r\n                    </div>\r\n                    <div fxLayout=\"column\"\r\n                         fxLayoutAlign=\"start start\"\r\n                         fxFlex=\"4\">\r\n                        <mat-form-field>\r\n                            <input matInput\r\n                                   [formControl]=\"addNewLineCtrl\">\r\n                        </mat-form-field>\r\n                    </div>\r\n                    <div fxLayout=\"column\"\r\n                         fxLayoutAlign=\"start start\">\r\n                        <button mat-button\r\n                                (click)=\"onProceedButtonClicked()\">PROCEED</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"end start\">\r\n                <atlas-ag-grid-user-preferences *ngIf=\"additionalCostsGridOptions && additionalCostsGridOptions.columnDefs\"\r\n                                                [gridOptions]=\"additionalCostsGridOptions\"\r\n                                                [company]=\"company\"\r\n                                                [gridId]=\"gridCode\"\r\n                                                [sharingEnabled]=\"false\"\r\n                                                [savingEnabled]=\"false\"\r\n                                                [hasColumnHandling]=\"false\"\r\n                                                #userPreferences>\r\n                </atlas-ag-grid-user-preferences>\r\n                <atlas-grid-enlargement *ngIf=\"additionalCostsGridOptions && additionalCostsGridOptions.columnDefs\"\r\n                                        [gridOptions]=\"additionalCostsGridOptions \"\r\n                                        [userPreferencesParameters]=\"gridPreferencesParameters\"\r\n                                        (cellValueChanged)=\"onCellValueChanged($event)\"\r\n                                        #gridZoom>\r\n                </atlas-grid-enlargement>\r\n            </div>\r\n\r\n        </div>\r\n        <div ag-grid=\"additionalCostsGridOptions\"\r\n             class=\"ag-theme-material pointer-cursor\"\r\n             style=\"width: 100%; height: 100%\">\r\n            <ag-grid-angular style=\" height: 100%;\"\r\n                             class=\"ag-theme-material\"\r\n                             [rowData]=\"additionalCostsGridRows\"\r\n                             [columnDefs]=\"additionalCostsGridCols\"\r\n                             [enableColResize]=\"true\"\r\n                             [pagination]=\"true\"\r\n                             [paginationPageSize]=\"10\"\r\n                             [enableSorting]=\"true\"\r\n                             domLayout=autoHeight\r\n                             (gridReady)=\"onGridReady($event)\"\r\n                             (cellValueChanged)=\"onCellValueChanged($event)\"\r\n                             [frameworkComponents]=\"gridComponents\"\r\n                             enableFilter\r\n                             [singleClickEdit]=true\r\n                             [gridOptions]=\"additionalCostsGridOptions\"\r\n                             [rowHeight]=\"atlasAgGridParam.rowHeight\">\r\n            </ag-grid-angular>\r\n        </div>\r\n\r\n\r\n    </mat-expansion-panel>\r\n</mat-accordion>"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-costs/additional-costs.component.scss":
/*!*********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-costs/additional-costs.component.scss ***!
  \*********************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".expansion-header {\n  padding: 10px; }\n\n.additional-cost-float-right {\n  float: right; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-costs/additional-costs.component.ts":
/*!*******************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-costs/additional-costs.component.ts ***!
  \*******************************************************************************************************************************/
/*! exports provided: AdditionalCostsFormComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AdditionalCostsFormComponent", function() { return AdditionalCostsFormComponent; });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../core/services/authorization.service */ "./Client/app/core/services/authorization.service.ts");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_ag_contextual_menu_ag_contextual_menu_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/components/ag-contextual-menu/ag-contextual-menu.component */ "./Client/app/shared/components/ag-contextual-menu/ag-contextual-menu.component.ts");
/* harmony import */ var _shared_components_ag_grid_checkbox_ag_grid_checkbox_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/components/ag-grid-checkbox/ag-grid-checkbox.component */ "./Client/app/shared/components/ag-grid-checkbox/ag-grid-checkbox.component.ts");
/* harmony import */ var _shared_components_ag_grid_autocomplete_ag_grid_autocomplete_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/components/ag-grid/autocomplete/ag-grid-autocomplete.component */ "./Client/app/shared/components/ag-grid/autocomplete/ag-grid-autocomplete.component.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_components_cell_editor_numeric_cell_editor_numeric_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../shared/components/cell-editor-numeric/cell-editor-numeric.component */ "./Client/app/shared/components/cell-editor-numeric/cell-editor-numeric.component.ts");
/* harmony import */ var _shared_components_cell_editor_select_cell_editor_select_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../shared/components/cell-editor-select/cell-editor-select.component */ "./Client/app/shared/components/cell-editor-select/cell-editor-select.component.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../shared/enums/cash-selection-type */ "./Client/app/shared/enums/cash-selection-type.ts");
/* harmony import */ var _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../shared/enums/cash-type.enum */ "./Client/app/shared/enums/cash-type.enum.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_numberMask__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../../shared/numberMask */ "./Client/app/shared/numberMask.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
/* harmony import */ var _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../../services/execution-cash-common-methods */ "./Client/app/execution/services/execution-cash-common-methods.ts");
/* harmony import */ var _additional_cost_list_display_view__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./additional-cost-list-display-view */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-costs/additional-cost-list-display-view.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

























var AdditionalCostsFormComponent = /** @class */ (function (_super) {
    __extends(AdditionalCostsFormComponent, _super);
    function AdditionalCostsFormComponent(formConfigurationProvider, formBuilder, masterdataService, uiService, dialog, route, datePipe, authorizationService, companyManager, gridService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.formBuilder = formBuilder;
        _this.masterdataService = masterdataService;
        _this.uiService = uiService;
        _this.dialog = dialog;
        _this.route = route;
        _this.datePipe = datePipe;
        _this.authorizationService = authorizationService;
        _this.companyManager = companyManager;
        _this.gridService = gridService;
        _this.proceedClickedCashReceipt = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        _this.calculateBalanceOnCostAmountEnter = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        _this.calculateCashAmountWithoutCost = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        _this.addNewLineCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_14__["AtlasFormControl"]('');
        _this.additionalCostsGridOptions = {};
        _this.additionalCostsGridRows = [];
        _this.costListAfterDeletion = new Array();
        _this.additionalCostsOrg = new Array();
        _this.nominalAccClientAcc = new Array();
        _this.mask = Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_18__["CustomNumberMask"])(12, 10, false);
        _this.gridComponents = {
            atlasSelect: _shared_components_cell_editor_select_cell_editor_select_component__WEBPACK_IMPORTED_MODULE_12__["CellEditorSelectComponent"],
            atlasNumeric: _shared_components_cell_editor_numeric_cell_editor_numeric_component__WEBPACK_IMPORTED_MODULE_11__["CellEditorNumericComponent"],
            atlasCheckbox: _shared_components_ag_grid_checkbox_ag_grid_checkbox_component__WEBPACK_IMPORTED_MODULE_8__["AgGridCheckboxComponent"],
        };
        _this.isAddorEdit = true;
        _this.gridContext = {
            gridEditable: true,
        };
        _this.isPanelExpanded = false;
        _this.showGrid = true;
        _this.counterpartyList = new Array();
        _this.additionalCostsGridRowsInEditMode = [];
        _this.gridCode = 'additionalCosts';
        _this.additionalCostsMenuActions = {
            deleteUser: 'delete',
        };
        _this.cashTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('cashTypeId')));
        _this.userActiveDirectoryName = _this.authorizationService.getCurrentUser().samAccountName;
        _this.company = _this.companyManager.getCurrentCompanyId();
        return _this;
    }
    AdditionalCostsFormComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.atlasAgGridParam = this.gridService.getAgGridParam();
        this.init();
        this.masterdata = this.route.snapshot.data.masterdata;
        this.nominalAccountList = this.masterdata.nominalAccounts;
        this.costDirections = [
            {
                costDirectionId: _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_17__["CostDirections"].Payable,
                costDirection: _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_17__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_17__["CostDirections"].Payable],
            },
            {
                costDirectionId: _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_17__["CostDirections"].Receivable,
                costDirection: _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_17__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_17__["CostDirections"].Receivable],
            },
        ];
        this.masterdata.nominalAccounts.forEach(function (element) {
            _this.nominalAccClientAcc.push(element.accountNumber);
        });
        this.masterdata.counterparties.forEach(function (element) {
            _this.counterpartyList.push(element.counterpartyCode);
        });
        this.initAdditionalCostsGridColumns();
        this.isClientAccountRequired = false;
        this.isCounterpartyRequired = false;
    };
    AdditionalCostsFormComponent.prototype.init = function () {
        this.additionalCostsGridContextualMenuActions = [
            {
                icon: 'delete',
                text: 'Delete',
                action: this.additionalCostsMenuActions.deleteCost,
                disabled: this.isDeleteDisabledWithPrivileges,
            },
        ];
        this.gridPreferencesParameters = {
            company: this.company,
            gridId: this.gridCode,
            gridOptions: null,
            savingEnabled: false,
            sharingEnabled: false,
            showExport: true,
            hasColumnHandling: false,
        };
    };
    AdditionalCostsFormComponent.prototype.unloadNotification = function ($event) {
        if (this.addNewLineCtrl.dirty) {
            $event.returnValue = true;
        }
    };
    AdditionalCostsFormComponent.prototype.isDeleteDisabledWithPrivileges = function (params) {
        var deleteDisable = true;
        if (params.context.actionContext.gridEditable) {
            deleteDisable = false;
        }
        return deleteDisable;
    };
    AdditionalCostsFormComponent.prototype.currencySelected = function (currency) {
        this.cashCurrency = currency;
    };
    AdditionalCostsFormComponent.prototype.onGridReady = function (params) {
        this.additionalCostsGridOptions.columnDefs = this.additionalCostsGridCols;
        this.gridApi = this.additionalCostsGridOptions.api;
        this.gridColumnApi = this.additionalCostsGridOptions.columnApi;
        this.gridService.sizeColumns(this.additionalCostsGridOptions);
        // bind the additonal cost rows while editing.
        if (this.additionalCostsGridRowsInEditMode && this.additionalCostsGridRowsInEditMode.length > 0
            && this.isEditMode && this.gridApi) {
            this.gridApi.setRowData([]);
            this.gridApi.updateRowData({ add: this.additionalCostsGridRowsInEditMode });
        }
    };
    AdditionalCostsFormComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({});
        return _super.prototype.getFormGroup.call(this);
    };
    AdditionalCostsFormComponent.prototype.onProceedButtonClicked = function () {
        var lines = this.addNewLineCtrl.value;
        if (this.cashTypeId === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_16__["CashType"].CashReceipt && !lines &&
            (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_15__["CashSelectionType"].ReceiptFullPartialTransaction
                || this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_15__["CashSelectionType"].ReceiptDifferentCurrency)) {
            this.proceedClickedCashReceipt.emit();
        }
        else {
            for (var count = 1; count <= lines; count++) {
                var newItem = this.createNewRowData();
                var res = this.gridApi.updateRowData({ add: [newItem] });
            }
            this.addNewLineCtrl.setValue('');
        }
    };
    AdditionalCostsFormComponent.prototype.createNewRowData = function () {
        var newCostRow = new _additional_cost_list_display_view__WEBPACK_IMPORTED_MODULE_24__["AdditionalCostListDisplayView"]();
        newCostRow.isDirty = true;
        newCostRow.costDirection = 'Payable';
        newCostRow.currencyCode = this.cashCurrency;
        return newCostRow;
    };
    AdditionalCostsFormComponent.prototype.initAdditionalCostsGridColumns = function () {
        var _this = this;
        this.additionalCostsGridOptions = {
            context: this.gridContext,
            stopEditingWhenGridLosesFocus: true,
        };
        this.additionalCostsGridCols = [
            {
                colId: 'costDirection',
                headerName: 'Pay/rec*',
                field: 'costDirection',
                editable: this.isGridEditable,
                cellRenderer: this.requiredCell,
                cellEditor: 'agRichSelectCellEditor',
                cellEditorParams: {
                    values: this.costDirections.map(function (costDirection) { return costDirection.costDirection; }),
                    displayPropertyName: 'costDirection',
                    valuePropertyName: 'costDirection',
                    displayFormat: 'costDirection',
                },
                onCellValueChanged: function (params) {
                    if (params.node.data['amount']) {
                        _this.updateBalance();
                    }
                },
            },
            {
                headerName: 'Cost Type*',
                field: 'costTypeCode',
                colId: 'costTypeCode',
                cellRendererFramework: _shared_components_ag_grid_autocomplete_ag_grid_autocomplete_component__WEBPACK_IMPORTED_MODULE_9__["AgGridAutocompleteComponent"],
                cellRendererParams: {
                    context: {
                        componentParent: this,
                    },
                    options: this.masterdata.costTypes,
                    valueProperty: 'costTypeCode',
                    codeProperty: 'costTypeCode',
                    displayProperty: 'name',
                    isRequired: true,
                },
                onCellValueChanged: function (params) {
                    var filteredCostType = _this.masterdata.costTypes.find(function (e) { return e.costTypeCode === params.data.costTypeCode; });
                    if (filteredCostType) {
                        var nominalAccount = filteredCostType.nominalAccountCode;
                        params.node.setDataValue('accountCode', nominalAccount);
                        params.node.setDataValue('nominalAccountNumber', nominalAccount);
                    }
                },
            },
            {
                headerName: 'Nom. Account*',
                field: 'nominalAccountNumber',
                colId: 'nominalAccountNumber',
                type: 'numericColumn',
                cellRendererFramework: _shared_components_ag_grid_autocomplete_ag_grid_autocomplete_component__WEBPACK_IMPORTED_MODULE_9__["AgGridAutocompleteComponent"],
                cellRendererParams: function (params) {
                    return {
                        context: {
                            componentParent: _this,
                        },
                        options: _this.nominalAccountList = (params.data.costTypeCode && !params.data.nominalAccountNumber) ? _this.masterdata.nominalAccounts.filter(function (e) { return e.accountType !== 'P'; }) : _this.masterdata.nominalAccounts,
                        valueProperty: 'accountNumber',
                        codeProperty: 'accountNumber',
                        displayProperty: 'detailedDescription',
                        isRequired: true,
                    };
                },
                onCellValueChanged: function (params) {
                    var filteredNominalAccount = _this.nominalAccountList.find(function (e) { return e.accountNumber === params.data.nominalAccountNumber; });
                    if (filteredNominalAccount) {
                        _this.isBankAccount = filteredNominalAccount.bankAccount;
                        params.node.setDataValue('customerVendor', filteredNominalAccount.customerVendor);
                        params.node.setDataValue('accountCode', filteredNominalAccount.accountNumber);
                        params.node.setDataValue('accountLineType', 'L');
                        _this.isCounterpartyRequired = (filteredNominalAccount.clientAccountMandatory === 1) ? true : false;
                        params.node.setDataValue('clientAccountMandatory', _this.isCounterpartyRequired);
                        if (_this.isCounterpartyRequired) {
                            params.node.setDataValue('accountLineType', null);
                        }
                        if (_this.isBankAccount) {
                            params.node.setDataValue('accountLineType', 'B');
                        }
                    }
                    if (_this.gridApi && filteredNominalAccount) {
                        _this.gridApi.refreshCells({
                            rowNodes: [params.node],
                            force: true,
                        });
                    }
                },
            },
            {
                headerName: 'Client Account*',
                field: 'counterpartyCode',
                colId: 'counterpartyCode',
                cellRendererFramework: _shared_components_ag_grid_autocomplete_ag_grid_autocomplete_component__WEBPACK_IMPORTED_MODULE_9__["AgGridAutocompleteComponent"],
                cellRendererParams: {
                    context: {
                        componentParent: this,
                    },
                    options: this.masterdata.counterparties,
                    valueProperty: 'counterpartyCode',
                    codeProperty: 'counterpartyCode',
                    displayProperty: 'description',
                    isRequired: function (params) {
                        return _this.isCounterpartyRequired ? true : false;
                    },
                },
                onCellValueChanged: function (params) {
                },
            },
            {
                colId: 'accountLineType',
                headerName: 'Account Line Type*',
                field: 'accountLineType',
                editable: true,
                cellRenderer: this.requiredCell,
                cellEditor: 'agRichSelectCellEditor',
                cellEditorParams: function (params) {
                    var filteredNominalAccount = _this.masterdata.nominalAccounts.filter(function (e) { return e.accountNumber === params.data.nominalAccountNumber; });
                    var accountLineTypeList = [];
                    if (filteredNominalAccount.length > 0 && filteredNominalAccount[0].bankAccount) {
                        accountLineTypeList = ['B'];
                    }
                    else if (filteredNominalAccount.length > 0) {
                        accountLineTypeList = !filteredNominalAccount[0].clientAccountMandatory ? ['L']
                            : ['C', 'V'];
                    }
                    return {
                        values: accountLineTypeList,
                    };
                },
            },
            {
                headerName: 'Currency*',
                field: 'currencyCode',
                colId: 'currencyCode',
                cellRendererFramework: _shared_components_ag_grid_autocomplete_ag_grid_autocomplete_component__WEBPACK_IMPORTED_MODULE_9__["AgGridAutocompleteComponent"],
                cellRendererParams: function (params) {
                    return {
                        context: {
                            componentParent: _this,
                        },
                        options: _this.masterdata.currencies,
                        valueProperty: 'currencyCode',
                        codeProperty: 'currencyCode',
                        displayProperty: 'description',
                        isRequired: true,
                        filterContextualSearchFunction: _this.filterCurrency.bind(_this),
                    };
                },
                onCellValueChanged: function (params) {
                },
            },
            {
                colId: 'amount',
                headerName: 'Amount*',
                type: 'numericColumn',
                field: 'amount',
                editable: this.isGridEditable,
                cellRenderer: this.requiredCell,
                cellEditor: 'atlasNumeric',
                valueFormatter: this.amountFormatter.bind(this),
                cellEditorParams: {
                    displayMask: Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_18__["CustomNumberMask"])(12, 10, false),
                    isRightAligned: true,
                },
                onCellValueChanged: function (params) {
                    if (params.newValue !== 0) {
                        _this.updateBalance();
                    }
                    else {
                        params.node.setDataValue('amount', '');
                    }
                },
            },
            {
                colId: 'narrative',
                headerName: 'Narrative',
                field: 'narrative',
                editable: this.isGridEditable,
            },
            {
                headerName: 'CustomerVendor',
                field: 'customerVendor',
                colId: 'customerVendor',
                hide: true,
            },
            {
                headerName: 'clientAccountMandatory',
                field: 'clientAccountMandatory',
                colId: 'clientAccountMandatory',
                hide: true,
            },
            {
                colId: 'contextualMenu',
                headerName: '',
                cellRendererFramework: _shared_components_ag_contextual_menu_ag_contextual_menu_component__WEBPACK_IMPORTED_MODULE_7__["AgContextualMenuComponent"],
                cellRendererParams: {
                    context: {
                        componentParent: this,
                        actionContext: this.gridContext,
                    },
                    menuActions: this.additionalCostsGridContextualMenuActions,
                },
                cellClass: 'ag-contextual-menu',
                maxWidth: 80,
            },
        ];
    };
    AdditionalCostsFormComponent.prototype.updateBalance = function () {
        this.calculateBalanceOnCostAmountEnter.emit();
    };
    AdditionalCostsFormComponent.prototype.onCostTypeSelect = function (params) {
        var filteredCostType = params.colDef.cellEditorParams.context.costTypes.filter(function (e) { return e.costTypeCode === params.data.costType; });
        if (filteredCostType.length > 0) {
            var nominalAccount = filteredCostType[0].nominalAccountCode;
            params.node.setDataValue('accountCode', nominalAccount);
        }
    };
    AdditionalCostsFormComponent.prototype.onAccountSelect = function (params) {
        var filteredNominalAccount = params.colDef.cellEditorParams.context.nominalAccounts.filter(function (e) { return e.accountNumber === params.data.accountCode; });
        this.isNominalAccount = filteredNominalAccount.length > 0;
        this.isBankAccount = filteredNominalAccount.length > 0 && filteredNominalAccount[0].bankAccount;
        if (filteredNominalAccount.length > 0) {
            params.node.setDataValue('customerVendor', filteredNominalAccount[0].customerVendor);
        }
        if (this.isNominalAccount) {
            params.node.setDataValue('accountLineType', 'L');
        }
        else if (this.isBankAccount) {
            params.node.setDataValue('accountLineType', 'B');
        }
    };
    AdditionalCostsFormComponent.prototype.requiredCell = function (params) {
        if (params.colDef.headerName === 'Pay/rec') {
            if (params.data.costDirectionId === 1 && !(params.value)) {
                params.value = 'Payable';
            }
            else if (params.data.costDirectionId === 2 && !(params.value)) {
                params.value = 'Receivable';
            }
        }
        if (!params.value || params.value === '') {
            return '<div class=\'cost-cell-value-required\'>Required*</div>';
        }
        if (params.colDef.headerName === 'Amount*') {
            if (params.value) {
                params.value = params.valueFormatted;
            }
        }
        return params.value;
    };
    AdditionalCostsFormComponent.prototype.isClientRequiredCell = function (params) {
        return (params.data.customerVendor === 'V' || params.data.customerVendor === 'C') ? true : false;
    };
    AdditionalCostsFormComponent.prototype.populateEntity = function (entity) {
        var cashRecord = entity;
        cashRecord.additionalCostDetails = this.getGridData();
        return cashRecord;
    };
    AdditionalCostsFormComponent.prototype.isAdditionalCostValid = function () {
        var _this = this;
        var isValid = true;
        this.isClientAccountRequired = false;
        if (this.gridColumnApi) {
            var isAccountLineTypeVisible_1 = this.gridColumnApi.getColumn('accountLineType').isVisible();
            this.gridApi.forEachNode(function (rowData) {
                if (rowData.data.isDirty) {
                    rowData.data.accountCode = rowData.data.nominalAccountNumber;
                    var hasCustomerVendorValueForNominalAccount = (rowData.data.customerVendor
                        && (rowData.data.customerVendor === 'V' || rowData.data.customerVendor === 'C')) ? true : false;
                    var clientAccountMandatory = rowData.data.clientAccountMandatory;
                    if (clientAccountMandatory) {
                        if (!(rowData.data.costDirection && rowData.data.costTypeCode && rowData.data.accountCode
                            && rowData.data.counterpartyCode && (isAccountLineTypeVisible_1 ? rowData.data.accountLineType : true)
                            && rowData.data.currencyCode && rowData.data.amount)) {
                            _this.isClientAccountRequired = true;
                            isValid = false;
                        }
                    }
                    else {
                        if (!(rowData.data.costDirection && rowData.data.costTypeCode && rowData.data.accountCode
                            && (isAccountLineTypeVisible_1 ? rowData.data.accountLineType : true)
                            && rowData.data.currencyCode && rowData.data.amount)) {
                            isValid = false;
                        }
                    }
                    if (rowData.data.currencyCode !== _this.cashCurrency) {
                        isValid = false;
                        rowData.data.currencyCode = null;
                        _this.gridApi.updateRowData({ update: [rowData.data] });
                    }
                }
            });
        }
        return isValid;
    };
    AdditionalCostsFormComponent.prototype.getGridData = function () {
        var costs = new Array();
        var masterdata = this.masterdata;
        var costDirections = this.costDirections;
        if (this.gridApi) {
            this.gridApi.forEachNode(function (rowData) {
                costs.push(rowData.data.getAdditionalCost(masterdata, costDirections));
            });
        }
        return costs;
    };
    AdditionalCostsFormComponent.prototype.handleAction = function (action, cost) {
        var _this = this;
        switch (action) {
            case this.additionalCostsMenuActions.deleteCost:
                var confirmDialog = this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_13__["ConfirmationDialogComponent"], {
                    data: {
                        title: 'Cost Deletion',
                        text: 'Are you sure you want to delete this cost?',
                        okButton: 'Delete anyway',
                        cancelButton: 'Cancel',
                    },
                });
                var confirmationSubscription = confirmDialog.afterClosed().subscribe(function (answer) {
                    if (answer) {
                        _this.gridApi.updateRowData({ remove: [cost] });
                        _this.calculateBalanceOnCostAmountEnter.emit();
                    }
                });
                this.subscriptions.push(confirmationSubscription);
                break;
            default: this.assertUnreachable(action);
        }
    };
    AdditionalCostsFormComponent.prototype.assertUnreachable = function (x) {
        throw new Error('Unknown action');
    };
    AdditionalCostsFormComponent.prototype.onCellValueChanged = function (params) {
        if (params.column.colId === 'amount' && params.value === 0) {
            params.value = '';
        }
        if (params.oldValue !== params.newValue) {
            params.node.data.isDirty = true;
        }
    };
    AdditionalCostsFormComponent.prototype.initForm = function (entity, isEdit) {
        var _this = this;
        if (entity.additionalCostDetails && entity.additionalCostDetails.length > 0) {
            this.selectionValue = entity.cashTypeId;
            this.gridContext.gridEditable = isEdit ? true : false;
            if (!isEdit) {
                this.isAddorEdit = isEdit;
            }
            entity.additionalCostDetails.forEach(function (element) {
                if (element.accountId && !element.accountCode && _this.masterdata.nominalAccounts) {
                    var nominalAccountObject = _this.masterdata.nominalAccounts.find(function (account) { return account.nominalAccountId === element.accountId; });
                    if (nominalAccountObject) {
                        element.accountCode = nominalAccountObject.accountNumber;
                    }
                }
                var displayCostRow = new _additional_cost_list_display_view__WEBPACK_IMPORTED_MODULE_24__["AdditionalCostListDisplayView"](element, _this.masterdata, _this.costDirections);
                _this.additionalCostsGridRowsInEditMode.push(displayCostRow);
                if (_this.gridApi) {
                    _this.gridApi.updateRowData({ add: [displayCostRow] });
                }
            });
            if (entity.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_15__["CashSelectionType"].SimpleCashReceipt ||
                entity.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_15__["CashSelectionType"].SimpleCashPayment) {
                this.calculateCashAmountWithoutCost.emit();
            }
        }
        else {
            this.showGrid = isEdit ? true : false;
        }
        // bind curency value to cashCurrency property.
        this.cashCurrency = entity.currencyCode;
        this.isPanelExpanded = isEdit ? true : false;
        this.isEditMode = isEdit;
        return entity;
    };
    AdditionalCostsFormComponent.prototype.isGridEditable = function (params) {
        return params.context.gridEditable;
    };
    AdditionalCostsFormComponent.prototype.bindSelectedTransactionValue = function (value) {
        this.cashTransactionId = value;
        return value;
    };
    AdditionalCostsFormComponent.prototype.clearAdditonalCostGrid = function () {
        if (this.gridApi) {
            this.gridApi.setRowData([]);
            this.addNewLineCtrl.reset();
        }
    };
    AdditionalCostsFormComponent.prototype.amountFormatter = function (param) {
        if (param && param.value) {
            var commonMethods = new _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_23__["CommonMethods"]();
            return commonMethods.getFormattedNumberValue(param.value);
        }
    };
    AdditionalCostsFormComponent.prototype.filterCurrency = function (value, options, rowData) {
        var _this = this;
        var currencyList = [];
        currencyList = options;
        if (this.cashCurrency) {
            currencyList = this.masterdata.currencies.filter(function (currency) {
                return currency.currencyCode === _this.cashCurrency;
            });
        }
        options = currencyList;
        return options;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])(),
        __metadata("design:type", Object)
    ], AdditionalCostsFormComponent.prototype, "proceedClickedCashReceipt", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])(),
        __metadata("design:type", Object)
    ], AdditionalCostsFormComponent.prototype, "calculateBalanceOnCostAmountEnter", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])(),
        __metadata("design:type", Object)
    ], AdditionalCostsFormComponent.prototype, "calculateCashAmountWithoutCost", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["HostListener"])('window:beforeunload', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], AdditionalCostsFormComponent.prototype, "unloadNotification", null);
    AdditionalCostsFormComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: 'atlas-additional-costs',
            template: __webpack_require__(/*! ./additional-costs.component.html */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-costs/additional-costs.component.html"),
            styles: [__webpack_require__(/*! ./additional-costs.component.scss */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-costs/additional-costs.component.scss")],
            providers: [_angular_common__WEBPACK_IMPORTED_MODULE_0__["DatePipe"]],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_20__["FormConfigurationProviderService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormBuilder"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_21__["MasterdataService"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_22__["UiService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_3__["MatDialog"],
            _angular_router__WEBPACK_IMPORTED_MODULE_4__["ActivatedRoute"],
            _angular_common__WEBPACK_IMPORTED_MODULE_0__["DatePipe"],
            _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_5__["AuthorizationService"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_6__["CompanyManagerService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_19__["AgGridService"]])
    ], AdditionalCostsFormComponent);
    return AdditionalCostsFormComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_10__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-details/additional-details.component.html":
/*!*************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-details/additional-details.component.html ***!
  \*************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-accordion class=\"cash-accordion\">\r\n    <mat-expansion-panel [expanded]=\"isPanelExpanded\">\r\n        <mat-expansion-panel-header [collapsedHeight]=\"'35px'\"\r\n                                    [expandedHeight]=\"'35px'\">\r\n            <mat-panel-title>\r\n                Additional Details\r\n            </mat-panel-title>\r\n        </mat-expansion-panel-header>\r\n        <atlas-form-input [isEditable]=\"narrativeCtrl.enabled\"\r\n                          [fieldControl]=\"narrativeCtrl\"\r\n                          label=\"Narrative\"\r\n                          [errorMap]=\"narrativeErrorMap\">\r\n        </atlas-form-input>\r\n    </mat-expansion-panel>\r\n</mat-accordion>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-details/additional-details.component.scss":
/*!*************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-details/additional-details.component.scss ***!
  \*************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-details/additional-details.component.ts":
/*!***********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-details/additional-details.component.ts ***!
  \***********************************************************************************************************************************/
/*! exports provided: AdditionalDetailsFormComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AdditionalDetailsFormComponent", function() { return AdditionalDetailsFormComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/enums/cash-type.enum */ "./Client/app/shared/enums/cash-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var AdditionalDetailsFormComponent = /** @class */ (function (_super) {
    __extends(AdditionalDetailsFormComponent, _super);
    function AdditionalDetailsFormComponent(formConfigurationProvider, formBuilder, route) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.formBuilder = formBuilder;
        _this.route = route;
        _this.narrativeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('Narrative');
        _this.isPanelExpanded = true;
        _this.narrativeErrorMap = new Map();
        _this.narrativeErrorMap
            .set('required', 'Required *')
            .set('maxlength', '  Additional Details should be at most 130 Characters long');
        return _this;
    }
    AdditionalDetailsFormComponent.prototype.ngOnInit = function () {
        this.cashTypeId = Number(decodeURIComponent(this.route.snapshot.paramMap.get('cashTypeId')));
        this.isCashTypeIsPayment = this.cashTypeId === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_5__["CashType"].CashPayment ? true : false;
        this.setValidators();
        this.bindConfiguration();
    };
    AdditionalDetailsFormComponent.prototype.setValidators = function () {
        if (this.isCashTypeIsPayment) {
            this.narrativeCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].maxLength(130), _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]));
        }
        else {
            this.narrativeCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].maxLength(130)]));
        }
    };
    AdditionalDetailsFormComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            narrativeCtrl: this.narrativeCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    AdditionalDetailsFormComponent.prototype.populateEntity = function (entity) {
        var additionalDetails = entity;
        additionalDetails.narrative = this.narrativeCtrl.value;
        return additionalDetails;
    };
    AdditionalDetailsFormComponent.prototype.initForm = function (entity, isEdit) {
        this.narrativeCtrl.setValue(entity.narrative);
        if (!isEdit) {
            this.formGroup.disable();
        }
        this.isPanelExpanded = isEdit ? true : false;
        return entity;
    };
    AdditionalDetailsFormComponent.prototype.setNarrative = function (narrative) {
        this.narrativeCtrl.setValue(narrative);
    };
    AdditionalDetailsFormComponent.prototype.bindSelectedTransactionValue = function (value) {
        this.cashTransactionId = value;
        return value;
    };
    AdditionalDetailsFormComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-additional-details',
            template: __webpack_require__(/*! ./additional-details.component.html */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-details/additional-details.component.html"),
            styles: [__webpack_require__(/*! ./additional-details.component.scss */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-details/additional-details.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__["FormConfigurationProviderService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"]])
    ], AdditionalDetailsFormComponent);
    return AdditionalDetailsFormComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/bank-information/bank-information.component.html":
/*!*********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/bank-information/bank-information.component.html ***!
  \*********************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-accordion class=\"price-accordion\">\r\n        <mat-expansion-panel [expanded]=\"true\">\r\n            <mat-expansion-panel-header [collapsedHeight]=\"'25px'\"\r\n                                        [expandedHeight]=\"'25px'\">\r\n                <mat-panel-title>Client Bank Account Details</mat-panel-title>\r\n            </mat-expansion-panel-header>\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"left start\"\r\n                 fxLayoutGap=\"5%\">\r\n                <div fxFlex=\"30%\">\r\n                    <mat-form-field>\r\n                        <input matInput\r\n                               placeholder=\"Bank Country\"\r\n                               [formControl]=\"bankCountryCtrl\"\r\n                               [matTooltip]=\"'Quantity Codes'\">\r\n                    </mat-form-field>\r\n                </div>\r\n                <div fxFlex=\"30%\">\r\n                    <mat-form-field>\r\n                        <input matInput\r\n                               placeholder=\"Bank City\"\r\n                               [formControl]=\"bankCityCtrl\"\r\n                               [matTooltip]=\"'Bank City'\">\r\n                    </mat-form-field>\r\n                </div>\r\n                <div fxFlex=\"30%\">\r\n                    <mat-form-field>\r\n                        <input matInput\r\n                               placeholder=\"Bank Swift Code\"\r\n                               [formControl]=\"bankSwiftCodeCtrl\"\r\n                               [matTooltip]=\"'Bank Swift Code'\">\r\n                    </mat-form-field>\r\n                </div>\r\n            </div>\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"left start\"\r\n                 fxLayoutGap=\"5%\">\r\n                <div fxFlex=\"30%\">\r\n                    <mat-form-field>\r\n                        <input matInput\r\n                               placeholder=\"NCC\"\r\n                               [formControl]=\"nccCtrl\"\r\n                               [matTooltip]=\"'NCC'\">\r\n                    </mat-form-field>\r\n                </div>\r\n                <div fxFlex=\"30%\">\r\n                    <mat-form-field>\r\n                        <input matInput\r\n                               placeholder=\"NCS\"\r\n                               [formControl]=\"ncsCtrl\"\r\n                               [matTooltip]=\"'NCS'\">\r\n                    </mat-form-field>\r\n                </div>\r\n                <div fxFlex=\"30%\">\r\n                    <mat-form-field>\r\n                        <input matInput\r\n                               placeholder=\"Bank Branch\"\r\n                               [formControl]=\"bankBranchCtrl\"\r\n                               [matTooltip]=\"'Bank Branch'\">\r\n                    </mat-form-field>\r\n                </div>\r\n            </div>\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"left start\"\r\n                 fxLayoutGap=\"5%\">\r\n                <div fxFlex=\"30%\">\r\n                    <mat-form-field>\r\n                        <input matInput\r\n                               placeholder=\"Bank ZIP Code\"\r\n                               [formControl]=\"bankZIPCodeCtrl\"\r\n                               [matTooltip]=\"'Bank ZIP Code'\">\r\n                    </mat-form-field>\r\n                </div>\r\n                <div fxFlex=\"30%\">\r\n                    <mat-form-field>\r\n                        <input matInput\r\n                               placeholder=\"Bank Account Description\"\r\n                               [formControl]=\"bankAccountDescriptionCtrl\"\r\n                               [matTooltip]=\"'Bank Account Description'\">\r\n                    </mat-form-field>\r\n                </div>\r\n                <div fxFlex=\"30%\">\r\n                    <mat-form-field>\r\n                        <input matInput\r\n                               placeholder=\"Account No\"\r\n                               [formControl]=\"accountNoCtrl\"\r\n                               [matTooltip]=\"'Account No'\">\r\n                    </mat-form-field>\r\n                </div>\r\n            </div>\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"left start\"\r\n                 fxLayoutGap=\"5%\">\r\n                <div fxFlex=\"30%\">\r\n                    <mat-form-field>\r\n                        <input matInput\r\n                               placeholder=\"Account Currency\"\r\n                               [formControl]=\"accountCurrencyCtrl\"\r\n                               [matTooltip]=\"'Account Currency'\">\r\n                    </mat-form-field>\r\n                </div>\r\n                <div fxFlex=\"30%\">\r\n                    <mat-form-field>\r\n                        <input matInput\r\n                               placeholder=\"External Reference\"\r\n                               [formControl]=\"externalReferenceCtrl\"\r\n                               [matTooltip]=\"'External Reference'\">\r\n                    </mat-form-field>\r\n                </div>\r\n                <div fxFlex=\"30%\">\r\n                    <mat-form-field>\r\n                        <input matInput\r\n                               placeholder=\"Bank Type\"\r\n                               [formControl]=\"bankTypeCtrl\"\r\n                               [matTooltip]=\"'Bank Type'\">\r\n                    </mat-form-field>\r\n                </div>\r\n            </div>\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"left start\"\r\n                 fxLayoutGap=\"5%\">\r\n                <div fxFlex=\"30%\">\r\n                    <mat-form-field>\r\n                        <input matInput\r\n                               placeholder=\"Bank Account Status\"\r\n                               [formControl]=\"bankAccountStatusCtrl\"\r\n                               [matTooltip]=\"'Bank Account Status'\">\r\n                    </mat-form-field>\r\n                </div>\r\n            </div>\r\n        </mat-expansion-panel>\r\n    </mat-accordion>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/bank-information/bank-information.component.scss":
/*!*********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/bank-information/bank-information.component.scss ***!
  \*********************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/bank-information/bank-information.component.ts":
/*!*******************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/bank-information/bank-information.component.ts ***!
  \*******************************************************************************************************************************/
/*! exports provided: BankInformationComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BankInformationComponent", function() { return BankInformationComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var BankInformationComponent = /** @class */ (function (_super) {
    __extends(BankInformationComponent, _super);
    function BankInformationComponent(formConfigurationProvider, route, masterdataService, formBuilder) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.route = route;
        _this.masterdataService = masterdataService;
        _this.formBuilder = formBuilder;
        _this.bankCountryCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('BankAccount');
        _this.bankCityCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('BankCity');
        _this.bankSwiftCodeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('BankSwiftCode');
        _this.nccCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('NCC');
        _this.ncsCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('NCS');
        _this.bankBranchCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('BankBranch');
        _this.bankZIPCodeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('BankZIPCode');
        _this.bankAccountDescriptionCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('BankAccountDescription');
        _this.accountNoCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('AccountNo');
        _this.accountCurrencyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('AccountCurrency');
        _this.externalReferenceCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('ExternalReference');
        _this.bankTypeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('BankType');
        _this.bankAccountStatusCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('BankAccount');
        return _this;
    }
    BankInformationComponent.prototype.ngOnInit = function () {
        this.masterData = this.route.snapshot.data.masterdata;
        this.formGroup = this.formBuilder.group({
            bankCountryCtrl: this.bankCountryCtrl,
            bankCityCtrl: this.bankCityCtrl,
            bankSwiftCodeCtrl: this.bankSwiftCodeCtrl,
            nccCtrl: this.nccCtrl,
            ncsCtrl: this.ncsCtrl,
            bankBranchCtrl: this.bankBranchCtrl,
            bankZIPCodeCtrl: this.bankZIPCodeCtrl,
            bankAccountDescriptionCtrl: this.bankAccountDescriptionCtrl,
            accountNoCtrl: this.accountNoCtrl,
            accountCurrencyCtrl: this.accountCurrencyCtrl,
            externalReferenceCtrl: this.externalReferenceCtrl,
            bankTypeCtrl: this.bankTypeCtrl,
            bankAccountStatusCtrl: this.bankAccountStatusCtrl,
        });
    };
    BankInformationComponent.prototype.setClientBankInformation = function (clientBankId, counterpartyId, currencyCode) {
        var _this = this;
        if (counterpartyId && currencyCode) {
            this.resetClientBankInformation();
            this.masterdataService.getCounterPartyBankAccounts(counterpartyId, currencyCode)
                .subscribe(function (data) {
                if (data.value && data.value.length > 0) {
                    var bankDetails_1 = data.value.find(function (e) { return e.bankAccountId === Number(clientBankId); });
                    if (bankDetails_1) {
                        var bankCountry = _this.masterData.countries.find(function (e) { return e.countryId === bankDetails_1.bankCountryKey; });
                        var bankType = _this.masterData.bankTypes.find(function (e) { return e.enumEntityId === bankDetails_1.bankTypeID; });
                        var bankAccountStatus = _this.masterData.bankAccountStatuses.find(function (e) { return e.enumEntityId === bankDetails_1.bankAccountStatusID; });
                        _this.bankCountryCtrl.patchValue(bankCountry && bankCountry.description);
                        _this.bankCityCtrl.patchValue(bankDetails_1.bankCity);
                        _this.bankSwiftCodeCtrl.patchValue(bankDetails_1.bankSwiftCode);
                        _this.nccCtrl.patchValue(bankDetails_1.nCC);
                        _this.bankBranchCtrl.patchValue(bankDetails_1.bankBranch);
                        _this.bankZIPCodeCtrl.patchValue(bankDetails_1.bankZIPCode);
                        _this.bankAccountDescriptionCtrl.patchValue(bankDetails_1.bankAccountDesc);
                        _this.accountNoCtrl.patchValue(bankDetails_1.accountNo);
                        _this.accountCurrencyCtrl.patchValue(bankDetails_1.accountCCY);
                        _this.externalReferenceCtrl.patchValue(bankDetails_1.externalReference);
                        _this.bankTypeCtrl.patchValue(bankType && bankType.enumEntityValue);
                        _this.bankAccountStatusCtrl.patchValue(bankAccountStatus && bankAccountStatus.enumEntityValue);
                        _this.formGroup.disable();
                    }
                }
            });
        }
    };
    BankInformationComponent.prototype.resetClientBankInformation = function () {
        this.formGroup.reset();
    };
    BankInformationComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-bank-information',
            template: __webpack_require__(/*! ./bank-information.component.html */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/bank-information/bank-information.component.html"),
            styles: [__webpack_require__(/*! ./bank-information.component.scss */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/bank-information/bank-information.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_5__["FormConfigurationProviderService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_6__["MasterdataService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"]])
    ], BankInformationComponent);
    return BankInformationComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/cash-details.component.html":
/*!************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/cash-details.component.html ***!
  \************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div fxLayout=\"row\"\r\n     fxLayout.md=\"column\"\r\n     fxLayoutAlign=\"space-between stretch\">\r\n    <div fxLayout=\"column\"\r\n         fxLayoutAlign=\"space-between stretch\"\r\n         fxFlex=\"49\">\r\n        <atlas-document-information #documentInformationFormComponent\r\n                                    (currencySelected)=\"currencySelected($event)\"\r\n                                    (currencySearchValue)=\"onCurrencySearchValuesEntered($event)\"\r\n                                    (currencyChangeValue)=\"onCurrencyChange($event)\"\r\n                                    (departmentSearchValue)=\"onDepartmentSearchvalueEntered($event)\"\r\n                                    (amountSearchValue)=\"onAmountSearchValueEntered($event)\">\r\n        </atlas-document-information>\r\n        <atlas-payment-order-template-selection-card *ngIf=\"!isEdit\"\r\n                                                     (templateSelected)=\"onTemplateSelected($event)\"\r\n                                                     #templateSelectionComponent\r\n                                                     fxFlex>\r\n        </atlas-payment-order-template-selection-card>\r\n    </div>\r\n    <div fxLayout=\"column\"\r\n         fxLayoutAlign=\"start stretch\"\r\n         fxFlex=\"49\">\r\n        <atlas-counterparty-card [ngClass]=\"{'counterparty-card':!isDifferentCurrencyOptionSelected() && cashTypeId !== CashType.CashPayment}\"\r\n                                 #counterpartyFormComponent\r\n                                 (counterpartySearchValues)=\"onCounterpartySearchValuesEntered($event)\"\r\n                                 (setClientBankInformation)=\"onSetClientBankInformation()\">\r\n        </atlas-counterparty-card>\r\n\r\n        <atlas-bank-information #bankInformationComponent\r\n                                *ngIf=\"cashTypeId==CashType.CashPayment\">\r\n        </atlas-bank-information>\r\n\r\n        <atlas-currency-information-card [ngClass]=\"{'hidden-during-loading':!isDifferentCurrencyOptionSelected()}\"\r\n                                         #currencyFormComponent\r\n                                         (roeTypeSelected)=\"onRoeTypeChanged($event)\"\r\n                                         (fxRateEntered)=\"onFxRateValueChanged($event)\"\r\n                                         (bankCurrencySelected)=\"onBankCurrencyEntered($event)\"\r\n                                         (amountSearchValue)=\"onAmountSearchValueEntered($event)\">\r\n        </atlas-currency-information-card>\r\n    </div>\r\n</div>\r\n<atlas-lock-interval [resourcesInformation]=\"resourcesInformation\">\r\n</atlas-lock-interval>\r\n\r\n<div fxLayout=\"column\"\r\n     fxLayoutAlign=\"start left\">\r\n    <atlas-additional-details #additionalDetailsFormComponent></atlas-additional-details>\r\n</div>\r\n\r\n<div fxLayout=\"column\"\r\n     fxLayoutAlign=\"start left\"\r\n     class=\"cost-style\">\r\n    <atlas-additional-costs (currencySelected)=\"currencySelected($event)\"\r\n                            (calculateCashAmountWithoutCost)=\"onEditCalculateCashAmountWithoutCost()\"\r\n                            (calculateBalanceOnCostAmountEnter)=\"calculateBalanceOnCostAmountEnter()\"\r\n                            #additionalCostsFormComponent></atlas-additional-costs>\r\n</div>\r\n<div fxLayout=\"row\"\r\n     fxLayoutAlign=\"space-between\">\r\n    <div fxLayout=\"column\"\r\n         fxLayoutAlign=\"start\">\r\n        <mat-slide-toggle [formControl]=\"urgentPaymentCtrl\"\r\n                          *ngIf=\"cashTypeId === CashType.CashPayment\">Urgent Payment</mat-slide-toggle>\r\n        <mat-slide-toggle [formControl]=\"authorizePostingCtrl\"\r\n                          [checked]=\"isAuthorizePosting\"\r\n                          (change)=\"onAuthorizePostingChanged($event)\">\r\n            Authorize for posting\r\n        </mat-slide-toggle>\r\n    </div>\r\n\r\n\r\n    <div fxLayout=\"column\"\r\n         fxLayoutAlign=\"start\">\r\n        <mat-slide-toggle [ngClass]=\"{'hidden-during-loading':hideTransmitTreasury}\"\r\n                          [disabled]=\"cashTypeId==CashType.CashReceipt\"\r\n                          [formControl]=\"transmitTreasuryCtrl\"\r\n                          [checked]=\"isTransmitTreasury\"\r\n                          (change)=\"onTransmitTreasuryChanged($event)\">\r\n            Transmit to treasury System\r\n            <mat-hint *ngIf=\"warning\">\r\n                Unable to post\r\n            </mat-hint>\r\n            <mat-hint *ngIf=\"message\">\r\n                Cash will be autoposted\r\n            </mat-hint>\r\n        </mat-slide-toggle>\r\n        <mat-slide-toggle *ngIf=\"hasTemplate && !isEdit\"\r\n                          [formControl]=\"previewDocumentCtrl\"\r\n                          (change)=\"onPreviewToggleSelected()\">Preview Document</mat-slide-toggle>\r\n    </div>\r\n</div>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/cash-details.component.scss":
/*!************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/cash-details.component.scss ***!
  \************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".cost-style {\n  padding: 10px 0px; }\n\n.hidden-during-loading {\n  display: none; }\n\n:host ::ng-deep .counterparty-card {\n  height: 74% !important; }\n\n:host ::ng-deep .counterparty-card .mat-card {\n    height: inherit; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/cash-details.component.ts":
/*!**********************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/cash-details.component.ts ***!
  \**********************************************************************************************************/
/*! exports provided: CashDetailsFormComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CashDetailsFormComponent", function() { return CashDetailsFormComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _shared_directives_number_validators_directive__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../shared/directives/number-validators.directive */ "./Client/app/shared/directives/number-validators.directive.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../shared/entities/lock-functional-context.entity */ "./Client/app/shared/entities/lock-functional-context.entity.ts");
/* harmony import */ var _shared_entities_lock_resource_information_entity__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../shared/entities/lock-resource-information.entity */ "./Client/app/shared/entities/lock-resource-information.entity.ts");
/* harmony import */ var _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../shared/enums/cash-selection-type */ "./Client/app/shared/enums/cash-selection-type.ts");
/* harmony import */ var _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../shared/enums/cash-type.enum */ "./Client/app/shared/enums/cash-type.enum.ts");
/* harmony import */ var _shared_enums_interface_type_enum__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../shared/enums/interface-type.enum */ "./Client/app/shared/enums/interface-type.enum.ts");
/* harmony import */ var _shared_services_execution_dtos_cash_setup__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../shared/services/execution/dtos/cash-setup */ "./Client/app/shared/services/execution/dtos/cash-setup.ts");
/* harmony import */ var _shared_services_execution_dtos_invoice_for_cash__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../shared/services/execution/dtos/invoice-for-cash */ "./Client/app/shared/services/execution/dtos/invoice-for-cash.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../../shared/services/http-services/lock.service */ "./Client/app/shared/services/http-services/lock.service.ts");
/* harmony import */ var _additional_costs_additional_costs_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./additional-costs/additional-costs.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-costs/additional-costs.component.ts");
/* harmony import */ var _additional_details_additional_details_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./additional-details/additional-details.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-details/additional-details.component.ts");
/* harmony import */ var _counterparty_card_counterparty_card_component__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./counterparty-card/counterparty-card.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/counterparty-card/counterparty-card.component.ts");
/* harmony import */ var _currency_information_card_currency_information_card_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./currency-information-card/currency-information-card.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/currency-information-card/currency-information-card.component.ts");
/* harmony import */ var _document_information_document_information_component__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./document-information/document-information.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/document-information/document-information.component.ts");
/* harmony import */ var _template_selection_card_payment_order_template_selection_card_component__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./template-selection-card/payment-order-template-selection-card.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/template-selection-card/payment-order-template-selection-card.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



























var CashDetailsFormComponent = /** @class */ (function (_super) {
    __extends(CashDetailsFormComponent, _super);
    function CashDetailsFormComponent(formConfigurationProvider, formBuilder, route, executionService, lockService, dialog, router, companyManager) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.formBuilder = formBuilder;
        _this.route = route;
        _this.executionService = executionService;
        _this.lockService = lockService;
        _this.dialog = dialog;
        _this.router = router;
        _this.companyManager = companyManager;
        _this.counterpartySearchValues = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.departmentSearchValue = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.currencySearchValue = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.amountSearchValue = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.currencyCardInitialValues = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.currencyCardFinalRowType = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.fxRateValueCalculated = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.previewToggleSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.templateSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.calculateTotalBalanceOnCostAmountEnter = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.calculateCashAmountWithoutCost = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.formComponents = [];
        _this.CashType = _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_14__["CashType"];
        _this.urgentPaymentCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_10__["AtlasFormControl"]('UrgentPayment');
        _this.authorizePostingCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_10__["AtlasFormControl"]('AuthorizeForPosting');
        _this.transmitTreasuryCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_10__["AtlasFormControl"]('TransmitToTreasury');
        _this.previewDocumentCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_10__["AtlasFormControl"]('PreviewDocumentCtrl');
        _this.cashSetupModel = new _shared_services_execution_dtos_cash_setup__WEBPACK_IMPORTED_MODULE_16__["CashSetup"]();
        _this.hasTemplate = false;
        _this.isSave = false;
        _this.destroy$ = new rxjs__WEBPACK_IMPORTED_MODULE_4__["Subject"]();
        _this.resourcesInformation = new Array();
        _this.hideTransmitTreasury = false;
        _this.cashTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('cashTypeId')));
        return _this;
    }
    Object.defineProperty(CashDetailsFormComponent.prototype, "templateSelectionCard", {
        set: function (templateSelectionCard) {
            this.templateSelectionComponent = templateSelectionCard;
            if (this.formComponents.indexOf(templateSelectionCard) === -1) {
                this.formComponents.push(this.templateSelectionComponent);
            }
        },
        enumerable: true,
        configurable: true
    });
    CashDetailsFormComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.masterData = this.route.snapshot.data.masterdata;
        this.createCashFormGroup = this.formBuilder.group({
            counterpartyFormComponent: this.counterpartyFormComponent.getFormGroup(),
            additionalDetailsFormComponent: this.additionalDetailsFormComponent.getFormGroup(),
            documentInformationFormComponent: this.documentInformationFormComponent.getFormGroup(),
        });
        this.createCashCurrencyFormGroup = this.formBuilder.group({
            currencyFormComponent: this.currencyFormComponent.getFormGroup(),
        });
        this.formComponents.push(this.documentInformationFormComponent, this.counterpartyFormComponent, this.additionalDetailsFormComponent, this.additionalCostsFormComponent, this.currencyFormComponent);
        if (this.route.snapshot.url.length > 0 && this.route.snapshot.url[1].path.toString() === 'new') {
            this.subscriptions.push(this.executionService.getInterfaceSetupDetails(_shared_enums_interface_type_enum__WEBPACK_IMPORTED_MODULE_15__["InterfaceType"].PaymentRequestInterface)
                .subscribe(function (data) {
                if (data) {
                    _this.isTraxInterfaceEnabled = data.isActive;
                    if (data.isActive) {
                        _this.isTransmitTreasury = true;
                        if (_this.cashTypeId === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_14__["CashType"].CashReceipt) {
                            _this.isTransmitTreasury = false;
                            _this.transmitTreasuryCtrl.setValue(_this.isTransmitTreasury);
                            _this.counterpartyFormComponent.clientBankCtrl.clearValidators();
                            _this.counterpartyFormComponent.showHintForClientBank = false;
                            _this.isAuthorizePosting = true;
                        }
                        else {
                            _this.transmitTreasuryCtrl.setValue(_this.isTransmitTreasury);
                            _this.counterpartyFormComponent.clientBankCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]));
                            _this.counterpartyFormComponent.showHintForClientBank = true;
                            _this.isAuthorizePosting = false;
                        }
                        _this.authorizePostingCtrl.setValue(_this.isAuthorizePosting);
                    }
                    else {
                        _this.isAuthorizePosting = true;
                        _this.authorizePostingCtrl.setValue(_this.isAuthorizePosting);
                        _this.transmitTreasuryCtrl.disable();
                        _this.counterpartyFormComponent.clientBankCtrl.clearValidators();
                        _this.counterpartyFormComponent.clientBankCtrl.setValidators(null);
                    }
                    _this.counterpartyFormComponent.clientBankCtrl.updateValueAndValidity();
                }
                // hide TransmitTreasury when cash type is CI;
                _this.hideTransmitTreasury = _this.cashTypeId === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_14__["CashType"].CashReceipt ? true : !_this.isTraxInterfaceEnabled;
            }));
        }
        this.getValueToControl();
        this.urgentPaymentCtrl.setValue(false);
    };
    CashDetailsFormComponent.prototype.ngOnDestroy = function () {
        var _this = this;
        if (this.cashDetailsDefaultSubscription) {
            this.cashDetailsDefaultSubscription.unsubscribe();
        }
        this.stopLockRefresh();
        this.lockService.cleanSessionLocks().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["takeUntil"])(this.destroy$)).subscribe(function () {
            _this.destroy$.next();
            _this.destroy$.complete();
        });
    };
    CashDetailsFormComponent.prototype.getValueToControl = function () {
        if (this.cashTypeId === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_14__["CashType"].CashPayment) {
            if (this.authorizePostingCtrl.value === 0 && this.transmitTreasuryCtrl.value === 0) {
                this.warning = true;
            }
        }
    };
    CashDetailsFormComponent.prototype.onCounterpartySearchValuesEntered = function (model) {
        this.counterpartyValue = model.counterparty;
        this.clientNameValue = model.clientName;
        this.counterpartySearchValues.emit({
            counterparty: this.counterpartyValue,
            clientName: this.clientNameValue,
        });
    };
    CashDetailsFormComponent.prototype.calculateBalanceOnCostAmountEnter = function () {
        this.calculateTotalBalanceOnCostAmountEnter.emit();
    };
    CashDetailsFormComponent.prototype.onCurrencySearchValuesEntered = function (model) {
        if (model) {
            this.currencyvalue = model.currency;
            this.counterpartyFormComponent.cashCurrency = model.currency;
            this.currencyFormComponent.currencyValue = this.currencyvalue;
            this.currencyRoeType = model.currencyRoeType;
            this.currencyFormComponent.currencyRoeType = this.currencyRoeType;
            this.currencySearchValue.emit({ currency: this.currencyvalue });
            this.counterpartyFormComponent.currencyValue = this.currencyvalue;
        }
    };
    CashDetailsFormComponent.prototype.onCurrencyChange = function (model) {
        this.currencyChangeStatus = model.currencyStatus;
        this.currencyFormComponent.currencyChangeStatus = this.currencyChangeStatus;
        this.currencyFormComponent.bankCurrencyCtrl.reset();
        this.currencyFormComponent.fxRateCtrl.reset();
        this.counterpartyFormComponent.clientBankCtrl.patchValue(null);
        if (this.counterpartyFormComponent.bankInformationComponent) {
            this.counterpartyFormComponent.bankInformationComponent.resetClientBankInformation();
        }
        var currency = (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_13__["CashSelectionType"].PaymentDifferentCurrency ||
            this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_13__["CashSelectionType"].ReceiptDifferentCurrency)
            ? model.paymentCurrency : model.currency;
        this.getClientBankDetails(currency);
    };
    CashDetailsFormComponent.prototype.onDepartmentSearchvalueEntered = function (model) {
        this.departmentValue = model.department;
        this.departmentSearchValue.emit({ department: this.departmentValue });
    };
    CashDetailsFormComponent.prototype.onAmountSearchValueEntered = function (model) {
        this.amountValue = model.amount;
        this.amountSearchValue.emit({ amount: this.amountValue });
        this.calculateDocAmountForCashReceiptDiffCurrency();
    };
    CashDetailsFormComponent.prototype.calculateDocAmountForCashReceiptDiffCurrency = function () {
        if (this.cashTypeId === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_14__["CashType"].CashReceipt
            && (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_13__["CashSelectionType"].PaymentDifferentCurrency ||
                this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_13__["CashSelectionType"].ReceiptDifferentCurrency)) {
            if (this.amountValue && this.currencyFormComponent.fxRateCtrl.value
                && this.currencyFormComponent.fxRateCtrl.value !== 0
                && this.currencyFormComponent.divideMultiplyCtrl.value) {
                if (this.currencyFormComponent.divideMultiplyCtrl.value === 'D') {
                    this.documentInformationFormComponent.setDocAmountForCashReceiptDiffCurrency(this.amountValue * this.currencyFormComponent.fxRateCtrl.value);
                }
                else if (this.currencyFormComponent.divideMultiplyCtrl.value === 'M') {
                    this.documentInformationFormComponent.setDocAmountForCashReceiptDiffCurrency(this.amountValue / this.currencyFormComponent.fxRateCtrl.value);
                }
            }
            else {
                this.documentInformationFormComponent.setDocAmountForCashReceiptDiffCurrency(0);
            }
        }
    };
    CashDetailsFormComponent.prototype.onBankCurrencyEntered = function (model) {
        this.initialFxRateValue = model.initialFxRate;
        this.bankCurrencyValue = model.bankCurrency;
        this.initialRoeTypeValue = model.initialRoeType;
        this.currencyCardInitialValues.emit({
            bankCurrency: this.bankCurrencyValue,
            initialFxRate: this.initialFxRateValue,
            initialRoeType: this.initialRoeTypeValue,
        });
        this.getClientBankDetails(this.bankCurrencyValue);
        this.calculateDocAmountForCashReceiptDiffCurrency();
    };
    CashDetailsFormComponent.prototype.onRoeTypeChanged = function (model) {
        this.finalRoeTypeValue = model.finalRoeType;
        this.currencyCardFinalRowType.emit({
            finalRoeType: this.finalRoeTypeValue,
        });
    };
    CashDetailsFormComponent.prototype.onFxRateValueChanged = function (model) {
        this.finalFxRateValue = model.finalFxRate;
        this.fxRateValueCalculated.emit({ finalFxRate: this.finalFxRateValue });
    };
    CashDetailsFormComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            authorizePostingCtrl: this.authorizePostingCtrl,
            transmitTreasuryCtrl: this.transmitTreasuryCtrl,
            urgentPaymentCtrl: this.urgentPaymentCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    CashDetailsFormComponent.prototype.populateEntity = function (model) {
        this.formComponents.forEach(function (comp) {
            if (comp) {
                comp.populateEntity(model);
            }
        });
        model.authorizedForPosting = this.authorizePostingCtrl.value === '' ? false : this.authorizePostingCtrl.value;
        model.toTransmitToTreasury = this.transmitTreasuryCtrl.value === '' ? false : this.transmitTreasuryCtrl.value;
        model.urgentPayment = this.urgentPaymentCtrl.value;
        return model;
    };
    CashDetailsFormComponent.prototype.currencySelected = function (currency) {
        this.additionalCostsFormComponent.cashCurrency = currency;
        this.currencySearchValue.emit({ currencyvalue: currency });
    };
    CashDetailsFormComponent.prototype.initForm = function (entity, isEdit) {
        var _this = this;
        this.isEdit = isEdit;
        if (isEdit) {
            this.lockService.lockCashDocument(entity.cashId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_11__["LockFunctionalContext"].CashDocumentEdition).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["takeUntil"])(this.destroy$)).subscribe(function (lockData) {
                _this.startLockRefresh(entity.cashId, entity.documentReference);
            }, function (err) {
                _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_8__["ConfirmationDialogComponent"], {
                    data: {
                        title: 'Lock',
                        text: err.error.detail,
                        okButton: 'Got it',
                    },
                });
                _this.router.navigate(['/' + _this.companyManager.getCurrentCompanyId() + '/execution/cash']);
            });
            this.formComponents.forEach(function (comp) {
                if (comp) {
                    comp.initForm(entity, isEdit);
                }
            });
            this.authorizePostingCtrl.setValue(entity.authorizedForPosting);
            this.transmitTreasuryCtrl.setValue(entity.toTransmitToTreasury);
            this.isAuthorizePosting = entity.authorizedForPosting;
            this.isTransmitTreasury = entity.toTransmitToTreasury;
            this.urgentPaymentCtrl.setValue(entity.urgentPayment);
        }
        if (entity.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_13__["CashSelectionType"].SimpleCashPayment ||
            entity.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_13__["CashSelectionType"].SimpleCashReceipt) {
            if (this.additionalCostsFormComponent.gridColumnApi) {
                this.additionalCostsFormComponent.gridColumnApi.setColumnVisible('accountLineType', false);
            }
            this.additionalCostsFormComponent.showGrid = true;
        }
        else {
            this.additionalCostsFormComponent.showGrid = false;
        }
        this.selectionValue = entity.cashTypeId;
    };
    CashDetailsFormComponent.prototype.setNarrative = function (narrative) {
        this.additionalDetailsFormComponent.setNarrative(narrative);
    };
    CashDetailsFormComponent.prototype.isPickTransaction = function () {
        if (this.selectionValue === 1 || this.selectionValue === 5) {
            this.additionalCostsFormComponent.showGrid = true;
            return false;
        }
        else {
            return true;
        }
    };
    CashDetailsFormComponent.prototype.isDifferentCurrencyOptionSelected = function () {
        if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_13__["CashSelectionType"].PaymentDifferentCurrency ||
            this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_13__["CashSelectionType"].ReceiptDifferentCurrency) {
            return true;
        }
        return false;
    };
    CashDetailsFormComponent.prototype.bindSelectedValue = function (value) {
        if (value !== 0) {
            this.selectionValue = value;
            this.documentInformationFormComponent.cashTransactionId = value;
            this.counterpartyFormComponent.cashTransactionId = value;
            this.currencyFormComponent.cashTransactionId = value;
            if (this.templateSelectionComponent) {
                this.templateSelectionComponent.SetCashType(this.selectionValue);
            }
        }
    };
    CashDetailsFormComponent.prototype.onAuthorizePostingChanged = function (value) {
        if (this.cashTypeId === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_14__["CashType"].CashPayment) {
            this.isAuthorizePosting = value.checked;
        }
    };
    CashDetailsFormComponent.prototype.onTransmitTreasuryChanged = function (value) {
        this.isTransmitTreasury = value.checked;
        if (this.isTransmitTreasury) {
            this.counterpartyFormComponent.clientBankCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]));
            this.counterpartyFormComponent.showHintForClientBank = true;
        }
        else {
            this.counterpartyFormComponent.clientBankCtrl.clearValidators();
            this.counterpartyFormComponent.showHintForClientBank = false;
        }
        this.counterpartyFormComponent.clientBankCtrl.updateValueAndValidity();
    };
    CashDetailsFormComponent.prototype.onTemplateSelected = function (hasTemplate) {
        this.hasTemplate = hasTemplate;
        this.previewDocumentCtrl.setValue(this.hasTemplate);
        this.templateSelected.emit(hasTemplate);
        this.onPreviewToggleSelected();
    };
    CashDetailsFormComponent.prototype.onPreviewToggleSelected = function () {
        this.previewToggleSelected.emit(this.previewDocumentCtrl.value);
    };
    // update validator for controls based on value
    CashDetailsFormComponent.prototype.updateValidatorForAmount = function () {
        if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_13__["CashSelectionType"].ReceiptDifferentCurrency) {
            this.createCashFormGroup.controls.
                documentInformationFormComponent.get('amountCtrl').clearValidators();
        }
        else {
            this.createCashFormGroup.controls.
                documentInformationFormComponent.get('amountCtrl').setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([Object(_shared_directives_number_validators_directive__WEBPACK_IMPORTED_MODULE_9__["isPositive"])(), _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required, Object(_shared_directives_number_validators_directive__WEBPACK_IMPORTED_MODULE_9__["isGreatherThanZero"])()]));
        }
        this.createCashFormGroup.controls.
            documentInformationFormComponent.get('amountCtrl').updateValueAndValidity();
    };
    CashDetailsFormComponent.prototype.startLockRefresh = function (cashId, documentReference) {
        this.resourcesInformation = new Array();
        var resourceInformation = new _shared_entities_lock_resource_information_entity__WEBPACK_IMPORTED_MODULE_12__["LockResourceInformation"]();
        resourceInformation.resourceType = 'Cash Document';
        resourceInformation.resourceId = cashId;
        resourceInformation.resourceCode = documentReference;
        resourceInformation.needRefresh = true;
        this.resourcesInformation.push(resourceInformation);
    };
    CashDetailsFormComponent.prototype.stopLockRefresh = function () {
        this.resourcesInformation = new Array();
    };
    CashDetailsFormComponent.prototype.onSetClientBankInformation = function () {
        var counterpartyId = this.counterpartyFormComponent.counterpartyId;
        var currency = this.documentInformationFormComponent.currencyCtrl.value.currencyCode;
        if (this.counterpartyFormComponent.bankInformationComponent) {
            this.counterpartyFormComponent.bankInformationComponent.setClientBankInformation(null, counterpartyId, currency);
        }
    };
    CashDetailsFormComponent.prototype.onEditCalculateCashAmountWithoutCost = function () {
        this.calculateCashAmountWithoutCost.emit();
    };
    CashDetailsFormComponent.prototype.getClientBankDetails = function (currency) {
        if (this.counterpartyFormComponent.bankInformationComponent) {
            this.counterpartyFormComponent.bankInformationComponent.resetClientBankInformation();
        }
        this.counterpartyFormComponent.filteredCounterPartyBankAccounts = [];
        var counterpartyDetail = this.counterpartyFormComponent.counterpartyCtrl.value;
        var counterparty = this.counterpartyFormComponent.masterData.counterparties.filter(function (item) { return item.counterpartyCode === counterpartyDetail.counterpartyCode; });
        if (counterparty.length > 0) {
            var counterpartyId = counterparty[0].counterpartyID;
            this.counterpartyFormComponent.getCounterpartyBankAccounts(counterpartyId, currency, null, false);
        }
    };
    CashDetailsFormComponent.prototype.getInvoiceSearchValues = function () {
        var searchValues = new _shared_services_execution_dtos_invoice_for_cash__WEBPACK_IMPORTED_MODULE_17__["InvoiceForCashMatching"]();
        searchValues.currency = this.documentInformationFormComponent.currencyCtrl.value.currencyCode;
        searchValues.departmentCode = this.documentInformationFormComponent.departmentCodeCtrl.value.departmentCode;
        searchValues.amount = this.documentInformationFormComponent.amountCtrl.value;
        searchValues.counterpartyreference = this.counterpartyFormComponent.counterpartyCtrl.value.counterpartyCode;
        return searchValues;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CashDetailsFormComponent.prototype, "counterpartySearchValues", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CashDetailsFormComponent.prototype, "departmentSearchValue", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CashDetailsFormComponent.prototype, "currencySearchValue", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CashDetailsFormComponent.prototype, "amountSearchValue", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CashDetailsFormComponent.prototype, "currencyCardInitialValues", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CashDetailsFormComponent.prototype, "currencyCardFinalRowType", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CashDetailsFormComponent.prototype, "fxRateValueCalculated", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CashDetailsFormComponent.prototype, "previewToggleSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CashDetailsFormComponent.prototype, "templateSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CashDetailsFormComponent.prototype, "calculateTotalBalanceOnCostAmountEnter", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CashDetailsFormComponent.prototype, "calculateCashAmountWithoutCost", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('counterpartyFormComponent'),
        __metadata("design:type", _counterparty_card_counterparty_card_component__WEBPACK_IMPORTED_MODULE_23__["CounterpartyFormComponent"])
    ], CashDetailsFormComponent.prototype, "counterpartyFormComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('additionalDetailsFormComponent'),
        __metadata("design:type", _additional_details_additional_details_component__WEBPACK_IMPORTED_MODULE_22__["AdditionalDetailsFormComponent"])
    ], CashDetailsFormComponent.prototype, "additionalDetailsFormComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('documentInformationFormComponent'),
        __metadata("design:type", _document_information_document_information_component__WEBPACK_IMPORTED_MODULE_25__["DocumentInformationFormComponent"])
    ], CashDetailsFormComponent.prototype, "documentInformationFormComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('additionalCostsFormComponent'),
        __metadata("design:type", _additional_costs_additional_costs_component__WEBPACK_IMPORTED_MODULE_21__["AdditionalCostsFormComponent"])
    ], CashDetailsFormComponent.prototype, "additionalCostsFormComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('currencyFormComponent'),
        __metadata("design:type", _currency_information_card_currency_information_card_component__WEBPACK_IMPORTED_MODULE_24__["CurrencyInformationCardComponent"])
    ], CashDetailsFormComponent.prototype, "currencyFormComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('templateSelectionComponent'),
        __metadata("design:type", _template_selection_card_payment_order_template_selection_card_component__WEBPACK_IMPORTED_MODULE_26__["PaymentOrderTemplateSelectionCardComponent"]),
        __metadata("design:paramtypes", [_template_selection_card_payment_order_template_selection_card_component__WEBPACK_IMPORTED_MODULE_26__["PaymentOrderTemplateSelectionCardComponent"]])
    ], CashDetailsFormComponent.prototype, "templateSelectionCard", null);
    CashDetailsFormComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-cash-details-form-component',
            template: __webpack_require__(/*! ./cash-details.component.html */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/cash-details.component.html"),
            styles: [__webpack_require__(/*! ./cash-details.component.scss */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/cash-details.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_18__["FormConfigurationProviderService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_19__["ExecutionService"],
            _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_20__["LockService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_6__["CompanyManagerService"]])
    ], CashDetailsFormComponent);
    return CashDetailsFormComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_7__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/counterparty-card/counterparty-card.component.html":
/*!***********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/counterparty-card/counterparty-card.component.html ***!
  \***********************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-header>\r\n        <mat-card-title>\r\n            Counterparty Information\r\n        </mat-card-title>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n        <div fxLayout=\"column\">\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"start start\"\r\n                 fxLayoutGap=\"16px\">\r\n                <atlas-masterdata-user-preferences-input fxFlex=\"40%\"\r\n                                                         isEditable=\"true\"\r\n                                                         [fieldControl]=\"counterpartyCtrl\"\r\n                                                         [options]=\"filteredCounterPartyList\"\r\n                                                         label=\"Counterparty\"\r\n                                                         displayProperty=\"counterpartyCode\"\r\n                                                         [selectProperties]=\"['counterpartyCode', 'description']\"\r\n                                                         [errorMap]=\"counterpartyErrorMap\"\r\n                                                         lightBoxTitle=\"Results for Counterparty\"\r\n                                                         gridId=\"counterpartiesGrid\"\r\n                                                         (optionSelected)=\"onCounterpartyIdSelected($event)\">\r\n                </atlas-masterdata-user-preferences-input>\r\n                <div class=\"custom-form\"\r\n                     fxFlex=\"100%\"\r\n                     [class.isEmpty]=\"!payerCtrl.value\"\r\n                     [class.required-field]=\"payerCtrl.isRequired\">\r\n                    <mat-form-field *ngIf=\"cashTypeId==CashType.CashPayment\">\r\n                        <input matInput\r\n                               placeholder=\"Payee\"\r\n                               [formControl]=\"payeeCtrl\"\r\n                               label=\"Payee\"\r\n                               matTooltip=\"Payee\"\r\n                               [required]=\"payeeCtrl.isRequired\"\r\n                               autocomplete=\"off\">\r\n                        <mat-error *ngIf=\"payeeCtrl.hasError('required')\">\r\n                            Required *\r\n                        </mat-error>\r\n                        <mat-hint *ngIf=\"payeeCtrl.isRequired\">\r\n                            Required *\r\n                        </mat-hint>\r\n                    </mat-form-field>\r\n\r\n                    <mat-form-field fxFlex=\"100%\"\r\n                                    *ngIf=\"cashTypeId==CashType.CashReceipt\">\r\n                        <input matInput\r\n                               placeholder=\"Payer\"\r\n                               [formControl]=\"payerCtrl\"\r\n                               label=\"payer\"\r\n                               matTooltip=\"payer\"\r\n                               [required]=\"payerCtrl.isRequired\"\r\n                               autocomplete=\"off\">\r\n                        <mat-error *ngIf=\"payerCtrl.hasError('required')\">\r\n                            Required *\r\n                        </mat-error>\r\n                        <mat-hint *ngIf=\"payerCtrl.isRequired\">\r\n                            Required *\r\n                        </mat-hint>\r\n                    </mat-form-field>\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <div class=\"custom-form\"\r\n                     [class.isEmpty]=\"!clientBankCtrl.value\"\r\n                     [class.required-field]=\"clientBankCtrl.isRequired\">\r\n                    <mat-form-field>\r\n                        <!--The Bank Account is hardcoded as per the suggestion given by sergio due to\r\n    dependency with counterparty and currency a new PBI will be there to handle this.-->\r\n\r\n                        <input matInput\r\n                               placeholder=\"Client Bank\"\r\n                               [matAutocomplete]=\"clientBank\"\r\n                               [formControl]=\"clientBankCtrl\"\r\n                               matTooltip=\"Client Bank\"\r\n                               [required]=\"clientBankCtrl.isRequired\"\r\n                               (blur)=\"onClientBankRemoval()\">\r\n                        <mat-autocomplete #clientBank=\"matAutocomplete\"\r\n                                          [panelWidth]=\"panelSize\"\r\n                                          (optionSelected)=\"onclientBankSelected($event.option.value)\">\r\n                            <mat-option *ngFor=\"let clientBanks of filteredCounterPartyBankAccounts\"\r\n                                        [value]=\"clientBanks.bankAccountId\">\r\n                                {{clientBanks.accountNo}} |\r\n                                {{clientBanks.bankName}}\r\n                            </mat-option>\r\n                        </mat-autocomplete>\r\n                        <mat-error *ngIf=\"showHintForClientBank && cashTypeId==CashType.CashPayment\">\r\n                            Client Bank Account is required\r\n                        </mat-error>\r\n                        <mat-error *ngIf=\"clientBankCtrl.hasError('inDropdownList')\">\r\n                            Value not in list\r\n                        </mat-error>\r\n                        <mat-hint *ngIf=\"showHintForClientBank && !showHintForNoClientBankAccount\">\r\n                            Required *\r\n                        </mat-hint>\r\n                        <mat-hint *ngIf=\"showHintForNoClientBankAccount\"\r\n                                  class=\"warning-message\">\r\n                            No Client Bank for selected conterparty & currency OR Client Bank is deactivated\r\n                        </mat-hint>\r\n\r\n                    </mat-form-field>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/counterparty-card/counterparty-card.component.scss":
/*!***********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/counterparty-card/counterparty-card.component.scss ***!
  \***********************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".warning-message {\n  color: #df5a4d !important; }\n\n.mat-form-field {\n  margin-bottom: 16px; }\n\n:host ::ng-deep div.mat-expansion-panel-body label {\n  font-weight: 400; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/counterparty-card/counterparty-card.component.ts":
/*!*********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/counterparty-card/counterparty-card.component.ts ***!
  \*********************************************************************************************************************************/
/*! exports provided: CounterpartyFormComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CounterpartyFormComponent", function() { return CounterpartyFormComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/directives/autocomplete-dropdown.directive */ "./Client/app/shared/directives/autocomplete-dropdown.directive.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/entities/masterdata-props.entity */ "./Client/app/shared/entities/masterdata-props.entity.ts");
/* harmony import */ var _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/enums/cash-selection-type */ "./Client/app/shared/enums/cash-selection-type.ts");
/* harmony import */ var _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/enums/cash-type.enum */ "./Client/app/shared/enums/cash-type.enum.ts");
/* harmony import */ var _shared_services_execution_dtos_cash_setup__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/services/execution/dtos/cash-setup */ "./Client/app/shared/services/execution/dtos/cash-setup.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../services/execution-cash-common-methods */ "./Client/app/execution/services/execution-cash-common-methods.ts");
/* harmony import */ var _bank_information_bank_information_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../bank-information/bank-information.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/bank-information/bank-information.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

















var CounterpartyFormComponent = /** @class */ (function (_super) {
    __extends(CounterpartyFormComponent, _super);
    function CounterpartyFormComponent(formConfigurationProvider, formBuilder, masterdataService, utilService, route, router, executionService, snackbarService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.formBuilder = formBuilder;
        _this.masterdataService = masterdataService;
        _this.utilService = utilService;
        _this.route = route;
        _this.router = router;
        _this.executionService = executionService;
        _this.snackbarService = snackbarService;
        _this.counterpartySearchValues = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.setClientBankInformation = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.counterpartyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__["AtlasFormControl"]('Counterparty');
        _this.payerCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__["AtlasFormControl"]('Payer');
        _this.clientBankCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__["AtlasFormControl"]('clientAccount');
        _this.payeeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__["AtlasFormControl"]('Payee');
        _this.masterdataList = [
            _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_6__["MasterDataProps"].Counterparties,
            _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_6__["MasterDataProps"].NominalAccounts,
        ];
        _this.CashType = _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_8__["CashType"];
        _this.cashSetupModel = new _shared_services_execution_dtos_cash_setup__WEBPACK_IMPORTED_MODULE_9__["CashSetup"]();
        _this.counterpartyErrorMap = new Map()
            .set('required', 'Required *')
            .set('inDropdownList', 'Invalid entry. Client not in the list.');
        _this.isEditable = false;
        _this.cashTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('cashTypeId')));
        return _this;
    }
    CounterpartyFormComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.company = this.route.snapshot.paramMap.get('company');
        this.masterData = this.route.snapshot.data.masterdata;
        this.filterCounterparties();
        this.setValidators();
        this.bindConfiguration();
        this.showHintForNoClientBankAccount = false;
        this.counterPartyBankAccountsList = [];
        this.clientBankCtrl.valueChanges.subscribe(function (input) {
            _this.filteredCounterPartyBankAccounts = _this.utilService.filterListforAutocomplete(input, _this.counterPartyBankAccountsList, ['accountNo', 'bankName'], 'bankAccountId');
        });
    };
    CounterpartyFormComponent.prototype.ngOnDestroy = function () {
        if (this.nominalAccountDefaultSubscription) {
            this.nominalAccountDefaultSubscription.unsubscribe();
        }
    };
    CounterpartyFormComponent.prototype.setValidators = function () {
        this.counterpartyCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
            Object(_shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_4__["inDropdownListValidator"])(this.masterData.counterparties, Object(_shared_services_util_service__WEBPACK_IMPORTED_MODULE_14__["nameof"])('counterpartyCode')), _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required,
        ]));
        this.payerCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]));
        this.payeeCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]));
        this.clientBankCtrl.setValidators([
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]),
        ]);
    };
    CounterpartyFormComponent.prototype.setBankAccountValidator = function () {
        this.clientBankCtrl.clearValidators();
        this.clientBankCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
            Object(_shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_4__["inDropdownListValidator"])(this.counterPartyBankAccountsList, Object(_shared_services_util_service__WEBPACK_IMPORTED_MODULE_14__["nameof"])('bankAccountId')),
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required,
        ]));
    };
    CounterpartyFormComponent.prototype.bindCounterpartyValues = function () {
        var _this = this;
        // check if transaction selected is for diff counterparty(diff client)
        if (this.cashTransactionId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_7__["CashSelectionType"].PaymentDifferentClient) {
            // filter the counterparty except selected in last step.
            this.filterCounterparties();
        }
        else {
            if (this.counterpartyValue) {
                var counterparty = this.masterData.counterparties.filter(function (item) { return item.counterpartyCode === _this.counterpartyValue; });
                if (counterparty.length > 0) {
                    this.counterpartyCtrl.patchValue(counterparty[0]);
                }
            }
            this.formGroup.patchValue({ payeeCtrl: this.clientNameValue });
            this.counterpartyCtrl.disable();
            this.payeeCtrl.disable();
        }
    };
    CounterpartyFormComponent.prototype.onCounterpartyIdSelected = function (value) {
        this.clientBankCtrl.patchValue(null);
        if (this.bankInformationComponent) {
            this.bankInformationComponent.resetClientBankInformation();
        }
        var counterparty = this.masterData.counterparties.find(function (item) { return item.counterpartyCode === value.counterpartyCode; });
        if (counterparty) {
            this.counterpartyId = counterparty.counterpartyID;
            this.payeeCtrl.patchValue(counterparty.description);
            this.payerCtrl.patchValue(counterparty.description);
        }
        this.counterpartyValue = this.counterpartyCtrl.value;
        this.clientNameValue = this.payerCtrl.value;
        this.counterpartySearchValues.emit({
            counterparty: this.counterpartyValue,
            clientName: this.clientNameValue,
        });
        // in cash by Diff ccy , client bank details need to be fetch based on counterparty
        // and payment currency code
        // else on cash currency code.
        var nominalBankAccountCode = null;
        if (this.model && this.model.nominalBankAccountCode) {
            nominalBankAccountCode = this.model.nominalBankAccountCode;
        }
        if (this.cashTransactionId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_7__["CashSelectionType"].ReceiptDifferentCurrency) {
            if (this.paymentCurrency) {
                this.getCounterpartyBankAccounts(this.counterpartyId, this.paymentCurrency, nominalBankAccountCode, false);
            }
        }
        else {
            this.getCounterpartyBankAccounts(this.counterpartyId, this.currencyValue, nominalBankAccountCode, false);
        }
    };
    CounterpartyFormComponent.prototype.onNominalAccountSelected = function (accountNumber) {
        var selectedNominalAccount = this.masterData.nominalAccounts.filter(function (nominalAccounts) { return nominalAccounts.accountNumber === accountNumber; });
        if (selectedNominalAccount.length > 0) {
            this.payerCtrl.patchValue(selectedNominalAccount[0].shortDescription);
        }
    };
    CounterpartyFormComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            counterpartyCtrl: this.counterpartyCtrl,
            payerCtrl: this.payerCtrl,
            clientBankCtrl: this.clientBankCtrl,
            payeeCtrl: this.payeeCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    CounterpartyFormComponent.prototype.populateEntity = function (entity) {
        var cash = entity;
        if (this.cashTransactionId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_7__["CashSelectionType"].PaymentDifferentClient) {
            var commonMethod = new _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_15__["CommonMethods"]();
            cash.counterpartyCode = this.searchedCounterpartyCode;
            if (this.counterpartyCtrl.value) {
                cash.paymentCounterPartyCode = this.counterpartyCtrl.value.counterpartyCode;
            }
            cash.matchingCounterpartyId =
                commonMethod.getCounterpartyIdBasedOnCodeFromMasterData(this.searchedCounterpartyCode, this.masterData);
            cash.paymentCounterPartyId =
                commonMethod.getCounterpartyIdBasedOnCodeFromMasterData(cash.paymentCounterPartyCode, this.masterData);
        }
        else {
            if (this.counterpartyCtrl.value) {
                cash.counterpartyCode = this.counterpartyCtrl.value.counterpartyCode;
            }
        }
        cash.payer = this.payerCtrl.value;
        if (this.clientBankCtrl.value) {
            cash.nominalBankAccountCode = this.clientBankCtrl.value;
        }
        cash.payee = this.payeeCtrl.value;
        return cash;
    };
    CounterpartyFormComponent.prototype.getCounterpartyCode = function () {
        if (this.counterpartyCtrl.value) {
            var value = this.counterpartyCtrl.value;
            return value.counterpartyCode;
        }
    };
    CounterpartyFormComponent.prototype.initForm = function (entity, isEdit) {
        var _this = this;
        this.model = entity;
        this.cashTransactionId = this.model.cashTypeId;
        var counterpartyCode = this.model.counterpartyCode;
        if (this.model.paymentCounterPartyCode != null) {
            // If the payment counterparty code is set, then this is the one to use for payment selection
            // This situation occures only in "diff client" (otherwise, paymentCounterpartyCode is null)
            counterpartyCode = this.model.paymentCounterPartyCode;
        }
        if (counterpartyCode != null) {
            this.paymentCounterpartyCode = counterpartyCode;
            var counterparty = this.masterData.counterparties.filter(function (item) { return item.counterpartyCode === counterpartyCode; });
            if (counterparty.length > 0) {
                this.counterpartyCtrl.patchValue(counterparty[0]);
                this.counterpartyId = counterparty[0].counterpartyID;
                this.onCounterpartyIdSelected(counterparty[0]);
            }
            this.payeeCtrl.patchValue(this.model.ownerName);
        }
        if (this.model) {
            if (this.model.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_7__["CashSelectionType"].PaymentDifferentCurrency ||
                this.model.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_7__["CashSelectionType"].ReceiptDifferentCurrency) {
                this.currencyValue = this.model.matchingCurrency;
                this.paymentCurrency = this.model.currencyCode;
            }
            else {
                this.currencyValue = this.model.currencyCode;
            }
        }
        if (this.model.nominalAccountCode) {
            var nominalAccount = this.masterData.nominalAccounts.filter(function (item) { return item.accountNumber === _this.model.nominalAccountCode; });
            // bind nominal bank account code depending
            if (this.model.nominalBankAccountCode) {
                this.getCounterpartyBankAccounts(this.counterpartyId, this.model.currencyCode, this.model.nominalBankAccountCode, true);
            }
            this.payerCtrl.patchValue(this.model.ownerName);
        }
        if (this.model.nominalBankAccountCode) {
            this.clientBankCtrl.patchValue(this.model.nominalBankAccountCode);
            this.onClientBankEntered(this.model.nominalBankAccountCode, this.counterpartyId, this.model.currencyCode);
        }
        if (!isEdit) {
            this.formGroup.disable();
        }
        this.isEditable = isEdit;
        return entity;
    };
    // this method is to bind counterparty list to dropdown ,
    // 1. bind all counterparty for all kind of transaction except "for picking by tr diff client".
    // 2. bind all counterparty except the counterparty selected in "pick transaction" step for "for picking by tr diff client".
    CounterpartyFormComponent.prototype.filterCounterparties = function () {
        var _this = this;
        this.searchedCounterpartyCode = this.counterpartyValue;
        var counterpartyList = [];
        if (this.cashTransactionId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_7__["CashSelectionType"].PaymentDifferentClient) {
            this.filteredCounterPartyList = this.masterData.counterparties.filter(function (item) { return item.counterpartyCode !== _this.counterpartyValue; });
        }
        else {
            this.filteredCounterPartyList = this.masterData.counterparties;
        }
        counterpartyList = this.filteredCounterPartyList;
        this.counterpartyCtrl.valueChanges.subscribe(function (input) {
            _this.filteredCounterPartyList = _this.utilService.filterListforAutocomplete(input, counterpartyList, ['counterpartyCode', 'description']);
            if (_this.counterpartyCtrl.valid) {
                _this.onCounterpartyIdSelected(_this.counterpartyCtrl.value);
            }
        });
        // in Edit mode , bind the payable counterparty details
        if (this.isEditable) {
            var counterparty = counterpartyList.find(function (e) {
                return e.counterpartyCode === _this.paymentCounterpartyCode;
            });
            if (counterparty) {
                this.onCounterpartyIdSelected(counterparty);
            }
        }
    };
    CounterpartyFormComponent.prototype.getCounterpartyBankAccounts = function (counterpartyId, currencyCode, nominalAccountId, isViewEdit) {
        var _this = this;
        if (counterpartyId && currencyCode) {
            this.masterdataService.getCounterPartyBankAccounts(counterpartyId, currencyCode)
                .subscribe(function (data) {
                if (data.value.length > 0) {
                    _this.counterPartyBankAccountsList = data.value;
                    _this.setBankAccountValidator();
                    _this.filteredCounterPartyBankAccounts =
                        data.value.sort(function (a, b) { return (a.bankName > b.bankName) ? 1 : -1; });
                    _this.savedCounterPartyBankAccounts = _this.filteredCounterPartyBankAccounts;
                    // bind values in view/edit mode
                    if (_this.model && _this.model.nominalAccountCode) {
                        var clientBankAccount = _this.filteredCounterPartyBankAccounts
                            .find(function (item) { return item.bankAccountId === Number(nominalAccountId); });
                        if (clientBankAccount) {
                            _this.clientBankCtrl.patchValue(clientBankAccount.bankAccountId);
                        }
                        _this.onClientBankEntered(nominalAccountId, counterpartyId, currencyCode);
                    }
                    else if (_this.filteredCounterPartyBankAccounts && _this.filteredCounterPartyBankAccounts.length > 0) {
                        var defaultBankAccount_1;
                        _this.filteredCounterPartyBankAccounts.forEach(function (bankAccount) {
                            if (!defaultBankAccount_1 && bankAccount.isBankAccountDefault) {
                                defaultBankAccount_1 = bankAccount;
                            }
                        });
                        if (defaultBankAccount_1) {
                            _this.clientBankCtrl.patchValue(defaultBankAccount_1.bankAccountId);
                        }
                        if (data.value && data.value.length > 0 && defaultBankAccount_1) {
                            _this.onClientBankEntered(data.value[0].bankAccountId, counterpartyId, currencyCode);
                        }
                    }
                    _this.showHintForNoClientBankAccount = false;
                }
                else {
                    _this.clientBankCtrl.patchValue(null);
                    if (_this.bankInformationComponent) {
                        _this.bankInformationComponent.resetClientBankInformation();
                    }
                    _this.filteredCounterPartyBankAccounts = [];
                    _this.savedCounterPartyBankAccounts = [];
                    _this.showHintForNoClientBankAccount = true;
                }
            });
        }
    };
    CounterpartyFormComponent.prototype.onclientBankSelected = function (value) {
        if (this.savedCounterPartyBankAccounts) {
            var clientBank = this.savedCounterPartyBankAccounts.find(function (a) {
                return a.bankAccountId === value;
            });
            if (clientBank) {
                this.onClientBankEntered(value, this.counterpartyId, this.currencyValue);
            }
        }
    };
    CounterpartyFormComponent.prototype.displayClientBank = function (value) {
        if (this.savedCounterPartyBankAccounts && value) {
            var clientBank = void 0;
            if (typeof value === 'number') {
                clientBank = this.savedCounterPartyBankAccounts.find(function (a) {
                    return a.bankAccountId === value;
                });
            }
            else if (typeof value === 'string') {
                if (value.indexOf('|') >= 0) {
                    value = value.split('|')[0].trim();
                    clientBank = this.savedCounterPartyBankAccounts.find(function (a) {
                        return a.accountNo === value;
                    });
                }
            }
            if (clientBank) {
                return (clientBank.accountNo + ' | ' + clientBank.bankName);
            }
        }
        return '';
    };
    CounterpartyFormComponent.prototype.onClientBankEntered = function (clientBankId, counterpartyId, currencyCode) {
        if (!counterpartyId && !currencyCode) {
            this.setClientBankInformation.emit();
        }
        else {
            if (this.bankInformationComponent) {
                this.bankInformationComponent.setClientBankInformation(clientBankId, counterpartyId, currencyCode);
            }
        }
    };
    CounterpartyFormComponent.prototype.onClientBankRemoval = function () {
        if (!this.clientBankCtrl.value) {
            if (this.bankInformationComponent) {
                this.bankInformationComponent.resetClientBankInformation();
            }
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CounterpartyFormComponent.prototype, "counterpartySearchValues", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CounterpartyFormComponent.prototype, "setClientBankInformation", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('bankInformationComponent'),
        __metadata("design:type", _bank_information_bank_information_component__WEBPACK_IMPORTED_MODULE_16__["BankInformationComponent"])
    ], CounterpartyFormComponent.prototype, "bankInformationComponent", void 0);
    CounterpartyFormComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-counterparty-card',
            template: __webpack_require__(/*! ./counterparty-card.component.html */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/counterparty-card/counterparty-card.component.html"),
            styles: [__webpack_require__(/*! ./counterparty-card.component.scss */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/counterparty-card/counterparty-card.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_10__["FormConfigurationProviderService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_12__["MasterdataService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_14__["UtilService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_11__["ExecutionService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_13__["SnackbarService"]])
    ], CounterpartyFormComponent);
    return CounterpartyFormComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/currency-information-card/currency-information-card.component.html":
/*!***************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/currency-information-card/currency-information-card.component.html ***!
  \***************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-header>\r\n        <mat-card-title>\r\n            <h2>Currency Information</h2>\r\n        </mat-card-title>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n\r\n            <atlas-dropdown-select fxFlex=\"30%\"\r\n                                   label=\"Bank Currency\"\r\n                                   [isEditable]=\"bankCurrencyCtrl.enabled\"\r\n                                   [fieldControl]=\"bankCurrencyCtrl\"\r\n                                   [options]=\"filteredCurrencyList\"\r\n                                   displayProperty=\"currencyCode\"\r\n                                   [selectProperties]=\"['currencyCode', 'description']\"\r\n                                   [errorMap]=\"bankCurrencyErrorMap\"\r\n                                   (optionSelected)=\"onBankCurrencyEntered($event)\"\r\n                                   isAutocompleteActivated=\"true\">\r\n            </atlas-dropdown-select>\r\n\r\n\r\n            <atlas-form-input fxFlex=\"30%\"\r\n                              label=\"FX Rate\"\r\n                              [fieldControl]=\"fxRateCtrl\"\r\n                              [isEditable]=\"fxRateCtrl.enabled\"\r\n                              (blur)=\"onFxRateEntered($event)\"\r\n                              [errorMap]=\"fxRateErrorMap\">\r\n            </atlas-form-input>\r\n\r\n            <atlas-form-input fxFlex=\"30%\"\r\n                              label=\"Amount\"\r\n                              [fieldControl]=\"amountCtrl\"\r\n                              [isEditable]=\"amountCtrl.enabled\"\r\n                              [textMask]=\"{mask:mask}\"\r\n                              (input)=\"onAmountValueEntered($event)\"\r\n                              [errorMap]=\"amountErrorMap\">\r\n            </atlas-form-input>\r\n\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <mat-radio-group [formControl]=\"divideMultiplyCtrl\"\r\n                             (change)=\"onDivideMultiplyToggleChanges($event)\"\r\n                             [disabled]=\"true\">\r\n                <mat-radio-button value=\"D\"\r\n                                  [checked]=\"onDivideOptionSelected()\">Divide</mat-radio-button>\r\n                <mat-radio-button value=\"M\"\r\n                                  [checked]=\"onMultiplyOptionSelected()\">Multiply</mat-radio-button>\r\n            </mat-radio-group>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/currency-information-card/currency-information-card.component.scss":
/*!***************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/currency-information-card/currency-information-card.component.scss ***!
  \***************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/currency-information-card/currency-information-card.component.ts":
/*!*************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/currency-information-card/currency-information-card.component.ts ***!
  \*************************************************************************************************************************************************/
/*! exports provided: CurrencyInformationCardComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CurrencyInformationCardComponent", function() { return CurrencyInformationCardComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/directives/autocomplete-dropdown.directive */ "./Client/app/shared/directives/autocomplete-dropdown.directive.ts");
/* harmony import */ var _shared_directives_number_validators_directive__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/directives/number-validators.directive */ "./Client/app/shared/directives/number-validators.directive.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/enums/cash-selection-type */ "./Client/app/shared/enums/cash-selection-type.ts");
/* harmony import */ var _shared_numberMask__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/numberMask */ "./Client/app/shared/numberMask.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../services/execution-cash-common-methods */ "./Client/app/execution/services/execution-cash-common-methods.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};















var CurrencyInformationCardComponent = /** @class */ (function (_super) {
    __extends(CurrencyInformationCardComponent, _super);
    function CurrencyInformationCardComponent(formConfigurationProvider, formBuilder, masterdataService, utilService, snackbarService, executionService, route) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.formBuilder = formBuilder;
        _this.masterdataService = masterdataService;
        _this.utilService = utilService;
        _this.snackbarService = snackbarService;
        _this.executionService = executionService;
        _this.route = route;
        _this.roeTypeSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.fxRateEntered = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.bankCurrencySelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.amountSearchValue = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.bankCurrencyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('Currency');
        _this.fxRateCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('FXRate');
        _this.divideMultiplyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('Divide');
        _this.multiplyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('Multiply');
        _this.amountCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('Amount');
        _this.isFxRateValid = false;
        _this.mask = Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_8__["CustomNumberMask"])(12, 10, false);
        _this.bankCurrencyErrorMap = new Map();
        _this.fxRateErrorMap = new Map();
        _this.amountErrorMap = new Map();
        _this.cashTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('cashTypeId')));
        _this.bankCurrencyErrorMap.set('required', ' Required *');
        _this.fxRateErrorMap.set('required', ' Required *');
        _this.amountErrorMap.set('required', ' Required *')
            .set('isPositiveError', 'Amount must be positive')
            .set('isGreatherThanZeroError', 'Amount must be greater than zero');
        return _this;
    }
    CurrencyInformationCardComponent.prototype.ngOnInit = function () {
        this.company = this.route.snapshot.paramMap.get('company');
        this.masterData = this.route.snapshot.data.masterdata;
        this.setValidators();
        this.bindConfiguration();
        this.filterBankCurrencies();
        this.isEditable = false;
        this.commonMethods = new _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_14__["CommonMethods"]();
    };
    CurrencyInformationCardComponent.prototype.filterBankCurrencies = function () {
        var _this = this;
        var bankCurrencyList = [];
        if (this.currencyValue) {
            this.filteredCurrencyList = this.masterData.currencies.filter(function (item) { return item.currencyCode !== _this.currencyValue; });
        }
        else {
            this.filteredCurrencyList = this.masterData.currencies;
        }
        bankCurrencyList = this.filteredCurrencyList;
        this.bankCurrencyCtrl.valueChanges.subscribe(function (input) {
            _this.filteredCurrencyList = _this.utilService.filterListforAutocomplete(input, bankCurrencyList, ['currencyCode', 'description']);
            if (_this.bankCurrencyCtrl.valid) {
                _this.onBankCurrencyEntered(_this.bankCurrencyCtrl.value);
            }
        });
    };
    CurrencyInformationCardComponent.prototype.onBankCurrencyEntered = function (bankCurrency) {
        var _this = this;
        this.bankCurrencyValue = bankCurrency.currencyCode;
        if (this.currencyValue === bankCurrency.currencyCode) {
            this.snackbarService.throwErrorSnackBar('Both the currencies cannot be USD');
            this.bankCurrencyCtrl.reset();
            this.fxRateCtrl.reset();
        }
        else if (this.currencyValue !== 'USD' && bankCurrency.currencyCode !== 'USD') {
            this.snackbarService.throwErrorSnackBar('One of the currency Must be USD');
            this.bankCurrencyCtrl.reset();
        }
        else {
            this.currencyFrom = this.currencyValue;
            this.currencyTo = this.bankCurrencyCtrl.value.currencyCode;
            if (!this.isEditable) {
                this.executionService.getForeignExchangeRateByCurrency(this.currencyFrom, this.currencyTo).subscribe(function (data) {
                    if (data) {
                        _this.cashSelectionModel = data;
                        _this.fxRateCtrl.setValue(_this.cashSelectionModel.rate);
                        _this.divideMultiplyCtrl.patchValue(_this.cashSelectionModel.roeType);
                        _this.roeType = _this.cashSelectionModel.roeType;
                        _this.actualFxrateValue = Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_8__["ConvertToNumber"])(_this.fxRateCtrl.value);
                        _this.tolarence = _this.fxRateCtrl.value * 0.1;
                        _this.bankCurrencySelected.emit({
                            bankCurrency: _this.bankCurrencyValue,
                            initialFxRate: _this.actualFxrateValue,
                            initialRoeType: _this.roeType,
                        });
                        _this.isFxRateValid = Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_8__["ConvertToNumber"])(_this.amountCtrl.value) > 0 ? true : false;
                    }
                    else {
                        _this.fxRateCtrl.reset();
                        _this.divideMultiplyCtrl.reset();
                        _this.amountCtrl.reset();
                        _this.snackbarService.throwErrorSnackBar('FX Rate details not available for these currencies.');
                    }
                });
            }
            // in edit mode, once all model data is binde to controls , than user can select different currency
            // this can be done by changing flag value to false; which enable new service call for different ccy to select.
            this.isEditable = false;
        }
    };
    CurrencyInformationCardComponent.prototype.onDivideMultiplyToggleChanges = function (type) {
        if (this.roeType === 'D') {
            this.roeType = 'M';
            this.roeTypeSelected.emit({ finalRoeType: this.roeType });
        }
        else if (this.roeType === 'M') {
            this.roeType = 'D';
            this.roeTypeSelected.emit({ finalRoeType: this.roeType });
        }
    };
    CurrencyInformationCardComponent.prototype.setValidators = function () {
        this.bankCurrencyCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
            Object(_shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_4__["inDropdownListValidator"])(this.masterData.currencies, Object(_shared_services_util_service__WEBPACK_IMPORTED_MODULE_13__["nameof"])('currencyCode')),
        ]));
        this.fxRateCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]));
        this.amountCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([Object(_shared_directives_number_validators_directive__WEBPACK_IMPORTED_MODULE_5__["isPositive"])(), _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required, Object(_shared_directives_number_validators_directive__WEBPACK_IMPORTED_MODULE_5__["isGreatherThanZero"])()]));
    };
    CurrencyInformationCardComponent.prototype.bindCurrencyValues = function () {
        var _this = this;
        var currency = this.masterData.currencies.filter(function (item) { return item.currencyCode === _this.bankCurrencyValue; });
        this.formGroup.patchValue({
            bankCurrencyCtrl: currency[0],
            fxRateCtrl: this.fxRateValue,
            amountCtrl: this.commonMethods.getFormattedNumberValue(this.amount),
        });
        this.bankCurrencyCtrl.disable();
        this.fxRateCtrl.disable();
        this.divideMultiplyCtrl.disable();
        this.amountCtrl.disable();
    };
    CurrencyInformationCardComponent.prototype.onDivideOptionSelected = function () {
        if (this.roeType === 'D') {
            return true;
        }
        else {
            return false;
        }
    };
    CurrencyInformationCardComponent.prototype.onMultiplyOptionSelected = function () {
        if (this.roeType === 'M') {
            return true;
        }
        else {
            return false;
        }
    };
    CurrencyInformationCardComponent.prototype.onFxRateEntered = function (event) {
        var tolerance = (this.actualFxrateValue * 0.1);
        var minFxRate = this.actualFxrateValue - tolerance;
        var maxFxRate = this.actualFxrateValue + tolerance;
        var updatedFxRate = this.fxRateCtrl.value;
        this.isFxRateValid = (this.fxRateCtrl.value !== '' && this.fxRateCtrl.value > 0)
            ? true : false;
        if ((updatedFxRate > maxFxRate) || (updatedFxRate < minFxRate)) {
            this.isFxRateValid = false;
            this.snackbarService.throwErrorSnackBar('FX Rate difference should be within 10% threshold.');
        }
        else {
            this.isFxRateValid = true;
        }
        this.finalFxRate = this.fxRateCtrl.value;
        this.fxRateEntered.emit({ finalFxRate: this.finalFxRate });
    };
    CurrencyInformationCardComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            bankCurrencyCtrl: this.bankCurrencyCtrl,
            fxRateCtrl: this.fxRateCtrl,
            divideMultiplyCtrl: this.divideMultiplyCtrl,
            amountCtrl: this.amountCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    CurrencyInformationCardComponent.prototype.populateEntity = function (entity) {
        if (entity.childCashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_7__["CashSelectionType"].ReceiptDifferentCurrency
            || entity.childCashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_7__["CashSelectionType"].PaymentDifferentCurrency) {
            entity.currencyCode = this.bankCurrencyCtrl.value.currencyCode;
            entity.matchingRate = this.fxRateCtrl.value;
            entity.matchingRateType = this.divideMultiplyCtrl.value;
            entity.amount = this.amountCtrl.value;
        }
        return entity;
    };
    CurrencyInformationCardComponent.prototype.initForm = function (entity, isEdit) {
        if (entity.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_7__["CashSelectionType"].PaymentDifferentCurrency ||
            entity.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_7__["CashSelectionType"].ReceiptDifferentCurrency) {
            this.currencyValue = entity.matchingCurrency;
            this.filterBankCurrencies();
            this.bankCurrencyCtrl.patchValue(entity.currencyCode);
            this.fxRateCtrl.patchValue(entity.matchingRate);
            this.divideMultiplyCtrl.patchValue(entity.matchingRateType);
            this.amountCtrl.patchValue(this.commonMethods.getFormattedNumberValue(entity.amount));
            this.bankCurrencySelected.emit({
                bankCurrency: entity.currencyCode,
                initialFxRate: entity.matchingRate,
                initialRoeType: entity.matchingRateType,
            });
        }
        if (!isEdit) {
            this.formGroup.disable();
        }
        // this is used to avoid service call while in display/edit mode
        this.isEditable = true;
        return entity;
    };
    CurrencyInformationCardComponent.prototype.onAmountValueEntered = function (amount) {
        if (this.amountCtrl.value) {
            this.amount = Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_8__["ConvertToNumber"])(this.amountCtrl.value);
            if (this.amount === 0) {
                this.amountCtrl.patchValue('');
            }
            this.isFxRateValid = this.amount > 0 ? true : false;
            this.amountSearchValue.emit({ amount: this.amount });
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CurrencyInformationCardComponent.prototype, "roeTypeSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CurrencyInformationCardComponent.prototype, "fxRateEntered", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CurrencyInformationCardComponent.prototype, "bankCurrencySelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CurrencyInformationCardComponent.prototype, "amountSearchValue", void 0);
    CurrencyInformationCardComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-currency-information-card',
            template: __webpack_require__(/*! ./currency-information-card.component.html */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/currency-information-card/currency-information-card.component.html"),
            styles: [__webpack_require__(/*! ./currency-information-card.component.scss */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/currency-information-card/currency-information-card.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_9__["FormConfigurationProviderService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_11__["MasterdataService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_13__["UtilService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_12__["SnackbarService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_10__["ExecutionService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"]])
    ], CurrencyInformationCardComponent);
    return CurrencyInformationCardComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/document-information/document-information.component.html":
/*!*****************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/document-information/document-information.component.html ***!
  \*****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card fxFlex=\"100\">\r\n    <mat-card-header>\r\n        <mat-card-title>\r\n            <h2>Document Information</h2>\r\n        </mat-card-title>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n        <div fxLayout=\"column\"\r\n             fxLayoutGap=\"16px\">\r\n\r\n\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"left start\"\r\n                 fxLayoutGap=\"5%\">\r\n\r\n                <atlas-date-picker fxFlex=\"40%\"\r\n                                   [errorMap]=\"docDateErrorMap\"\r\n                                   label=\"Document date\"\r\n                                   [fieldControl]=\"docDateCtrl\"\r\n                                   [isEditable]=\"docDateCtrl.enabled\">\r\n                </atlas-date-picker>\r\n\r\n                <atlas-date-picker fxFlex=\"40%\"\r\n                                   [errorMap]=\"valueDateErrorMap\"\r\n                                   label=\"Value date\"\r\n                                   [fieldControl]=\"valueDateCtrl\"\r\n                                   [isEditable]=\"valueDateCtrl.enabled\"></atlas-date-picker>\r\n            </div>\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"left start\"\r\n                 fxLayoutGap=\"5%\">\r\n                <atlas-dropdown-select fxFlex=\"40%\"\r\n                                       [isEditable]=\"currencyCtrl.enabled\"\r\n                                       label=\"Currency\"\r\n                                       [fieldControl]=\"currencyCtrl\"\r\n                                       [options]=\"filteredCurrencyList\"\r\n                                       displayProperty=\"currencyCode\"\r\n                                       [selectProperties]=\"['currencyCode', 'description']\"\r\n                                       isAutocompleteActivated=\"true\"\r\n                                       (optionSelected)=\"onCurrencyValueEntered($event)\"\r\n                                       [errorMap]=\"currencyErrorMap\">\r\n                </atlas-dropdown-select>\r\n\r\n                <atlas-form-input *ngIf=\"isDiffCurrency\"\r\n                                  fxFlex=\"40%\"\r\n                                  [fieldControl]=\"amountOriginalCurrencyCtrl\"\r\n                                  label=\"Amount\"\r\n                                  [textMask]=\"{mask:mask}\"\r\n                                  [errorMap]=\"amountErrorMap\">\r\n                </atlas-form-input>\r\n                <atlas-form-input *ngIf=\"!isDiffCurrency\"\r\n                                  fxFlex=\"40%\"\r\n                                  [isEditable]=\"amountCtrl.enabled\"\r\n                                  [fieldControl]=\"amountCtrl\"\r\n                                  label=\"Amount\"\r\n                                  [textMask]=\"{mask:mask}\"\r\n                                  [errorMap]=\"amountErrorMap\"\r\n                                  (blur)=\"onAmountValueEntered()\">\r\n                </atlas-form-input>\r\n            </div>\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"left start\"\r\n                 fxLayoutGap=\"5%\">\r\n\r\n                <atlas-dropdown-select fxFlex=\"40%\"\r\n                                       [isEditable]=\"nominalAccountCtrl.enabled\"\r\n                                       label=\"Nom. Account\"\r\n                                       [fieldControl]=\"nominalAccountCtrl\"\r\n                                       [options]=\"filteredNominalAccountList\"\r\n                                       displayProperty=\"accountNumber\"\r\n                                       [selectProperties]=\"['nominalAccountNumberFormated', 'detailedDescription']\"\r\n                                       isAutocompleteActivated=\"true\"\r\n                                       [errorMap]=\"nomAccountErrorMap\"\r\n                                       (optionSelected)=\"getDescriptionOfAccount($event)\">\r\n                </atlas-dropdown-select>\r\n\r\n\r\n                <atlas-form-input fxFlex=\"40%\"\r\n                                  [isEditable]=\"accountDescriptionCtrl.enabled\"\r\n                                  [fieldControl]=\"accountDescriptionCtrl\"\r\n                                  label=\"Bank Account description\">\r\n                </atlas-form-input>\r\n            </div>\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"left start\"\r\n                 fxLayoutGap=\"5%\">\r\n\r\n                <atlas-dropdown-select fxFlex=\"40%\"\r\n                                       [isEditable]=\"departmentCodeCtrl.enabled\"\r\n                                       label=\"Department\"\r\n                                       [fieldControl]=\"departmentCodeCtrl\"\r\n                                       [options]=\"filteredDepartments\"\r\n                                       displayProperty=\"departmentCode\"\r\n                                       [selectProperties]=\"['departmentCode', 'description']\"\r\n                                       isAutocompleteActivated=\"true\"\r\n                                       [errorMap]=\"departementErrorMap\"\r\n                                       (optionSelected)=\"onDepartmentValueEntered($event)\">\r\n                </atlas-dropdown-select>\r\n\r\n                <atlas-form-input fxFlex=\"40%\"\r\n                                  [isEditable]=\"docRefCtrl.enabled\"\r\n                                  [fieldControl]=\"docRefCtrl\"\r\n                                  label=\"2nd Document Reference\"\r\n                                  [errorMap]=\"docRefErrorMap\">\r\n                </atlas-form-input>\r\n            </div>\r\n\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"left start\"\r\n                 fxLayoutGap=\"5%\">\r\n\r\n                <atlas-dropdown-select fxFlex=\"40%\"\r\n                                       [isEditable]=\"costTypeCtrl.enabled\"\r\n                                       label=\"Cost Type\"\r\n                                       [fieldControl]=\"costTypeCtrl\"\r\n                                       [options]=\"filteredCostTypes\"\r\n                                       displayProperty=\"costTypeCode\"\r\n                                       [selectProperties]=\"['costTypeCode', 'name']\"\r\n                                       isAutocompleteActivated=\"true\"\r\n                                       [errorMap]=\"costTypeErrorMap\">\r\n                </atlas-dropdown-select>\r\n\r\n                <div fxFlex=\"45%\"\r\n                     class=\"custom-form\">\r\n                    <atlas-masterdata-user-preferences-input fxFlex=\"90%\"\r\n                                                             [isEditable]=\"charterCtrl.enabled\"\r\n                                                             [fieldControl]=\"charterCtrl\"\r\n                                                             [options]=\"filteredCharters\"\r\n                                                             label=\"Charters\"\r\n                                                             displayProperty=\"charterCode\"\r\n                                                             [selectProperties]=\"['charterCode','description']\"\r\n                                                             [errorMap]=\"charterErrorMap\"\r\n                                                             lightBoxTitle=\"Results for charters\"\r\n                                                             gridId=\"charterGrid\"\r\n                                                             (optionSelected)=\"onCharterSelected($event)\">\r\n\r\n                    </atlas-masterdata-user-preferences-input>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/document-information/document-information.component.scss":
/*!*****************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/document-information/document-information.component.scss ***!
  \*****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ":host ::ng-deep .mat-form-field-infix {\n  margin-top: 10px; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/document-information/document-information.component.ts":
/*!***************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/document-information/document-information.component.ts ***!
  \***************************************************************************************************************************************/
/*! exports provided: DocumentInformationFormComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DocumentInformationFormComponent", function() { return DocumentInformationFormComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/directives/autocomplete-dropdown.directive */ "./Client/app/shared/directives/autocomplete-dropdown.directive.ts");
/* harmony import */ var _shared_directives_number_validators_directive__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/directives/number-validators.directive */ "./Client/app/shared/directives/number-validators.directive.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/entities/masterdata-props.entity */ "./Client/app/shared/entities/masterdata-props.entity.ts");
/* harmony import */ var _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../shared/enums/cash-selection-type */ "./Client/app/shared/enums/cash-selection-type.ts");
/* harmony import */ var _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../shared/enums/cash-type.enum */ "./Client/app/shared/enums/cash-type.enum.ts");
/* harmony import */ var _shared_numberMask__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../shared/numberMask */ "./Client/app/shared/numberMask.ts");
/* harmony import */ var _shared_services_execution_charter_data_loader__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../shared/services/execution/charter-data-loader */ "./Client/app/shared/services/execution/charter-data-loader.ts");
/* harmony import */ var _shared_services_execution_dtos_cash_setup__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../shared/services/execution/dtos/cash-setup */ "./Client/app/shared/services/execution/dtos/cash-setup.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../../shared/validators/date-validators.validator */ "./Client/app/shared/validators/date-validators.validator.ts");
/* harmony import */ var _trading_components_contract_physical_capture_form_components_shipment_period_form_shipment_period_date_validator_validator__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../../../trading/components/contract-physical-capture/form-components/shipment-period-form/shipment-period-date-validator.validator */ "./Client/app/trading/components/contract-physical-capture/form-components/shipment-period-form/shipment-period-date-validator.validator.ts");
/* harmony import */ var _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../../services/execution-cash-common-methods */ "./Client/app/execution/services/execution-cash-common-methods.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






















var moment = moment__WEBPACK_IMPORTED_MODULE_3__;
var DocumentInformationFormComponent = /** @class */ (function (_super) {
    __extends(DocumentInformationFormComponent, _super);
    function DocumentInformationFormComponent(formBuilder, masterdataService, utilService, formConfigurationProvider, route, router, executionService, companyManager, charterDataLoader) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.masterdataService = masterdataService;
        _this.utilService = utilService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.route = route;
        _this.router = router;
        _this.executionService = executionService;
        _this.companyManager = companyManager;
        _this.charterDataLoader = charterDataLoader;
        _this.isSummary = false;
        _this.currencySelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.currencySearchValue = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.departmentSearchValue = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.amountSearchValue = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.currencyChangeValue = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.currencyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__["AtlasFormControl"]('Currency');
        _this.amountCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__["AtlasFormControl"]('Amount');
        _this.amountOriginalCurrencyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__["AtlasFormControl"]('AmountOriginalCurrency');
        _this.departmentCodeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__["AtlasFormControl"]('Department');
        _this.docRefCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__["AtlasFormControl"]('DocumentReference');
        _this.bankCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__["AtlasFormControl"]('Bank');
        _this.docDateCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__["AtlasFormControl"]('DocumentDate');
        _this.valueDateCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__["AtlasFormControl"]('ValueDate');
        _this.costTypeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__["AtlasFormControl"]('costType');
        _this.charterCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__["AtlasFormControl"]('charter');
        _this.nominalAccountCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__["AtlasFormControl"]('NominalAccount');
        _this.accountDescriptionCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__["AtlasFormControl"]('AccountDescription');
        _this.cashSetupModel = new _shared_services_execution_dtos_cash_setup__WEBPACK_IMPORTED_MODULE_14__["CashSetup"]();
        _this.masterdataList = [
            _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_9__["MasterDataProps"].Currencies,
            _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_9__["MasterDataProps"].Departments,
            _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_9__["MasterDataProps"].CostTypes,
        ];
        _this.mask = Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_12__["CustomNumberMask"])(12, 10, false);
        _this.isDiffCurrency = false;
        _this.charterErrorMap = new Map();
        _this.docDateErrorMap = new Map();
        _this.valueDateErrorMap = new Map();
        _this.amountErrorMap = new Map();
        _this.nomAccountErrorMap = new Map();
        _this.docRefErrorMap = new Map();
        _this.currencyErrorMap = new Map();
        _this.departementErrorMap = new Map();
        _this.costTypeErrorMap = new Map();
        _this.isEdit = false;
        // Enums used in html
        _this.CashType = _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_11__["CashType"];
        _this.cashTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('cashTypeId')));
        _this.docDateErrorMap
            .set('required', 'Required *');
        _this.valueDateErrorMap
            .set('required', 'Required *')
            .set('isBeforeDate', 'Cannot be before Document date')
            .set('isGreaterThanNinetyDays', ' Value Date should not be more than 90 days from Document date');
        _this.amountErrorMap
            .set('required', 'Required *')
            .set('isPositiveError', 'Amount must be positive')
            .set('isGreatherThanZeroError', 'Amount must be greater than zero');
        _this.nomAccountErrorMap
            .set('required', 'Required *');
        _this.docRefErrorMap
            .set('maxlength', ' 2nd Document Reference should be at most 20 Characters long');
        _this.currencyErrorMap
            .set('required', 'Required *')
            .set('inDropdownList', ' Value not in list');
        _this.departementErrorMap
            .set('required', 'Required *')
            .set('inDropdownList', ' Value not in list');
        _this.costTypeErrorMap
            .set('required', 'Required *')
            .set('inDropdownList', ' Value not in list');
        return _this;
    }
    DocumentInformationFormComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.isDiffCurrency = false;
        this.amountOriginalCurrencyCtrl.disable();
        this.company = this.route.snapshot.paramMap.get('company');
        this.masterData = this.route.snapshot.data.masterdata;
        this.filteredDepartments = this.masterData.departments;
        this.departmentCodeCtrl.valueChanges.subscribe(function (input) {
            _this.filteredDepartments = _this.utilService.filterListforAutocomplete(input, _this.masterData.departments, ['departmentCode', 'description']);
        });
        var selectedCostTypes = this.masterData.costTypes.filter(function (costTypes) { return costTypes.isACashCost === true; });
        this.filteredCostTypes = selectedCostTypes;
        this.costTypeCtrl.valueChanges.subscribe(function (input) {
            _this.filteredCostTypes = _this.utilService.filterListforAutocomplete(input, _this.masterData.costTypes.filter(function (costTypes) { return costTypes.isACashCost === true; }), ['costTypeCode', 'name']);
        });
        this.populateCharterList();
        if (this.route.snapshot.url.length > 1 &&
            (this.route.snapshot.url[1].path.toString() !== 'edit'
                && this.route.snapshot.url[1].path.toString() !== 'display')) {
            this.documentInfoDefaultSubscription = this.executionService.getCashSetupDetails()
                .subscribe(function (data) {
                if (data) {
                    _this.cashSetupModel = data;
                    var selectedCurrency = _this.masterData.currencies.filter(function (currency) { return currency.currencyCode === _this.cashSetupModel.currencyCode; });
                    if (selectedCurrency.length > 0) {
                        _this.currencyRoeType = selectedCurrency[0].roeType;
                        _this.currencyCtrl.patchValue(selectedCurrency[0].currencyCode);
                        _this.currencySelected.emit(selectedCurrency[0].currencyCode);
                        _this.currencySearchValue.emit({
                            currency: selectedCurrency[0].currencyCode,
                            currencyRoeType: _this.currencyRoeType,
                        });
                    }
                    var selectedCostType = selectedCostTypes.filter(function (costType) { return costType.costTypeCode === ((_this.cashTypeId === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_11__["CashType"].CashPayment) ?
                        _this.cashSetupModel.paymentCostTypeCode : _this.cashSetupModel.receiptCostTypeCode); });
                    _this.costTypeCtrl.patchValue(selectedCostType[0].costTypeCode);
                    var nominalAccount = _this.masterData.nominalAccounts.filter(function (e) { return e.nominalAccountId === _this.cashSetupModel.nominalAccountId && e.bankAccount === true; });
                    if (nominalAccount.length > 0) {
                        _this.nominalAccountCtrl.patchValue(nominalAccount[0].nominalAccountNumberFormated);
                        _this.accountDescriptionCtrl.patchValue(nominalAccount[0].detailedDescription);
                    }
                }
            });
            this.isEdit = true;
        }
        this.nominalAccountListWithOnlyBankAccount = this.masterData.nominalAccounts.filter(function (a) { return a.bankAccount === true; });
        this.filteredNominalAccountList = this.nominalAccountListWithOnlyBankAccount;
        this.nominalAccountCtrl.valueChanges.subscribe(function (input) {
            _this.filteredNominalAccountList = _this.utilService.filterListforAutocomplete(input, _this.nominalAccountListWithOnlyBankAccount, ['accountNumber', 'nominalAccountNumberFormated', 'detailedDescription']);
        });
        this.docDateCtrl.setValue(this.companyManager.getCurrentCompanyDate());
        this.commonMethods = new _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_21__["CommonMethods"]();
        this.bindConfiguration();
    };
    DocumentInformationFormComponent.prototype.bindDocumentValues = function () {
        var _this = this;
        var selectedCurrency = this.masterData.currencies.filter(function (currency) { return currency.currencyCode === _this.currencyValue; });
        this.formGroup.patchValue({
            currencyCtrl: (selectedCurrency.length > 0) ? selectedCurrency[0].currencyCode : null,
            amountCtrl: this.commonMethods.getFormattedNumberValue(this.amountValue),
        });
        // This control is not part of the formControl, it's only informative
        this.amountOriginalCurrencyCtrl.patchValue(this.commonMethods.getFormattedNumberValue(this.amountOriginalCurrency));
        this.currencyCtrl.disable();
        this.amountCtrl.disable();
    };
    DocumentInformationFormComponent.prototype.filterCurrencies = function () {
        var _this = this;
        var currencyList = [];
        this.filteredCurrencyList = this.masterData.currencies;
        currencyList = this.filteredCurrencyList;
        this.currencyCtrl.valueChanges.subscribe(function (input) {
            _this.filteredCurrencyList = _this.utilService.filterListforAutocomplete(input, currencyList, ['currencyCode', 'description']);
        });
    };
    DocumentInformationFormComponent.prototype.setValidators = function () {
        this.currencyCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
            Object(_shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_6__["inDropdownListValidator"])(this.masterData.currencies, Object(_shared_services_util_service__WEBPACK_IMPORTED_MODULE_18__["nameof"])('currencyCode')),
        ]));
        this.departmentCodeCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
            Object(_shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_6__["inDropdownListValidator"])(this.masterData.departments, Object(_shared_services_util_service__WEBPACK_IMPORTED_MODULE_18__["nameof"])('departmentCode')),
        ]));
        this.departmentCodeCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]));
        this.charterCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
            Object(_shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_6__["inDropdownListValidator"])(this.charters, Object(_shared_services_util_service__WEBPACK_IMPORTED_MODULE_18__["nameof"])('charterCode')),
        ]));
        this.costTypeCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
            Object(_shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_6__["inDropdownListValidator"])(this.masterData.costTypes, Object(_shared_services_util_service__WEBPACK_IMPORTED_MODULE_18__["nameof"])('costTypeCode')),
        ]));
        this.nominalAccountCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
            Object(_shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_6__["inDropdownListValidator"])(this.nominalAccountListWithOnlyBankAccount, Object(_shared_services_util_service__WEBPACK_IMPORTED_MODULE_18__["nameof"])('nominalAccountNumberFormated')),
        ]));
        this.costTypeCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]));
        this.amountCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([Object(_shared_directives_number_validators_directive__WEBPACK_IMPORTED_MODULE_7__["isPositive"])(), _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required, Object(_shared_directives_number_validators_directive__WEBPACK_IMPORTED_MODULE_7__["isGreatherThanZero"])()]));
        this.docRefCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].maxLength(20)]));
        this.docDateCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]));
        this.valueDateCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]));
        this.nominalAccountCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]));
    };
    DocumentInformationFormComponent.prototype.ngOnDestroy = function () {
        if (this.documentInfoDefaultSubscription) {
            this.documentInfoDefaultSubscription.unsubscribe();
        }
    };
    DocumentInformationFormComponent.prototype.onCurrencyValueEntered = function (selectedCurrency) {
        this.currencySearchValue.emit({
            currency: selectedCurrency.currencyCode,
            currencyRoeType: selectedCurrency.roeType,
        });
        this.currencyChangeStatus = true;
        this.currencyChangeValue.emit({
            currencyStatus: this.currencyChangeStatus,
            currency: selectedCurrency.currencyCode,
        });
    };
    DocumentInformationFormComponent.prototype.onAmountValueEntered = function () {
        this.amountValue = Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_12__["ConvertToNumber"])(this.amountCtrl.value);
        this.cashAmountValue = Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_12__["ConvertToNumber"])(this.amountCtrl.value);
        if (this.amountValue === 0) {
            this.amountCtrl.patchValue('');
        }
        this.amountSearchValue.emit({ amount: this.amountValue });
    };
    DocumentInformationFormComponent.prototype.onDepartmentValueEntered = function (departmentValue) {
        this.departmentValue = this.departmentCodeCtrl.value;
        this.departmentSearchValue.emit({ department: this.departmentValue });
    };
    DocumentInformationFormComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            currencyCtrl: this.currencyCtrl,
            amountCtrl: this.amountCtrl,
            departmentCodeCtrl: this.departmentCodeCtrl,
            bankCtrl: this.bankCtrl,
            docRefCtrl: this.docRefCtrl,
            docDateCtrl: this.docDateCtrl,
            valueDateCtrl: this.valueDateCtrl,
            charterCtrl: this.charterCtrl,
            costTypeCtrl: this.costTypeCtrl,
            nominalAccountCtrl: this.nominalAccountCtrl,
            accountDescriptionCtrl: this.accountDescriptionCtrl,
        }, {
            validator: _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
                Object(_trading_components_contract_physical_capture_form_components_shipment_period_form_shipment_period_date_validator_validator__WEBPACK_IMPORTED_MODULE_20__["dateAfter"])('valueDateCtrl', 'docDateCtrl'),
                Object(_shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_19__["isGreaterThanNinetyDays"])('docDateCtrl', 'valueDateCtrl'),
            ]),
        });
        return _super.prototype.getFormGroup.call(this);
    };
    DocumentInformationFormComponent.prototype.populateEntity = function (entity) {
        var docInformation = entity;
        if (docInformation.childCashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].PaymentDifferentCurrency ||
            docInformation.childCashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].ReceiptDifferentCurrency) {
            docInformation.matchingCurrency = this.currencyCtrl.value;
        }
        else {
            docInformation.currencyCode = this.currencyCtrl.value;
        }
        docInformation.amount = this.amountCtrl.value;
        var department = this.getDepartmentDetail(this.masterData, this.departmentCodeCtrl.value.departmentId, true);
        if (department && department.length > 0) {
            docInformation.departmentId = department[0].departmentId;
        }
        docInformation.counterpartyDocumentReference = this.docRefCtrl.value;
        docInformation.clientBankAccount = this.bankCtrl.value;
        docInformation.documentDate = this.docDateCtrl.value;
        docInformation.valueDate = this.valueDateCtrl.value;
        docInformation.charterId = this.getCharterId(this.charterCtrl.value);
        docInformation.costTypeCode = this.costTypeCtrl.value;
        docInformation.charterReference = this.charterCtrl.value.charterCode;
        docInformation.bankAccountCode = this.bankCtrl.value;
        var nominalDetail = this.getNominalAccountDetails(this.nominalAccountCtrl.value, false);
        if (nominalDetail) {
            docInformation.nominalAccountCode = nominalDetail.accountNumber;
        }
        return docInformation;
    };
    DocumentInformationFormComponent.prototype.getCharterId = function (value) {
        var _this = this;
        var commonMethod = new _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_21__["CommonMethods"]();
        if (value) {
            if (this.charters && this.charters.length > 0) {
                return commonMethod.getCharterIdFromCharterList(value.charterCode, this.charters);
            }
            else {
                this.charterDataLoader.getData().subscribe(function (charter) {
                    _this.charters = charter;
                    return commonMethod.getCharterIdFromCharterList(value.charterCode, _this.charters);
                });
            }
        }
    };
    DocumentInformationFormComponent.prototype.initForm = function (entity, isEdit) {
        var _this = this;
        this.model = entity;
        this.cashTransactionId = entity.cashTypeId;
        this.filterCurrencies();
        this.isEdit = isEdit;
        if (this.model.valueDate) {
            this.valueDateCtrl.setValue(this.model.valueDate);
        }
        if (this.model.documentDate) {
            this.docDateCtrl.setValue(this.model.documentDate);
        }
        this.amountCtrl.setValue(this.commonMethods.getFormattedNumberValue(this.model.amount));
        this.amountOriginalCurrencyCtrl.patchValue(this.commonMethods.getFormattedNumberValue(this.model.matchingAmount));
        this.cashAmountValue = this.amountCtrl.value;
        var selectedCurrency;
        if (this.model.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].PaymentDifferentCurrency ||
            this.model.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].ReceiptDifferentCurrency) {
            selectedCurrency = this.masterData.currencies.find(function (currency) { return currency.currencyCode === _this.model.matchingCurrency; });
        }
        else {
            selectedCurrency = this.masterData.currencies.find(function (currency) { return currency.currencyCode === _this.model.currencyCode; });
        }
        this.currencyCtrl.setValue(selectedCurrency.currencyCode);
        this.bankCtrl.patchValue(this.model.bankAccountCode);
        var department = this.getDepartmentDetail(this.masterData, this.model.departmentId, true);
        if (department && department.length > 0) {
            this.departmentCodeCtrl.patchValue(department[0].departmentCode);
        }
        this.docRefCtrl.setValue(this.model.counterpartyDocumentReference);
        if (this.model.charterId) {
            if (!this.charters) {
                this.charterDataLoader.getData().subscribe(function (charter) {
                    _this.charters = charter;
                    if (_this.charters) {
                        _this.populateCharter(_this.model.charterId);
                    }
                });
            }
            else {
                this.populateCharter(this.model.charterId);
            }
        }
        if (this.model.nominalAccountCode) {
            var nominalCode = this.getNominalAccountDetails(this.model.nominalAccountCode, true);
            if (nominalCode) {
                this.nominalAccountCtrl.patchValue(nominalCode.nominalAccountNumberFormated);
                this.accountDescriptionCtrl.patchValue(nominalCode.detailedDescription);
            }
        }
        var costType;
        if (this.model.costTypeCode) {
            costType = this.masterData.costTypes.find(function (cost) { return cost.costTypeCode === _this.model.costTypeCode; });
        }
        this.costTypeCtrl.setValue(costType);
        if (!isEdit) {
            this.formGroup.disable();
        }
        // hide amount field for receipt diff ccy
        this.isDiffCurrency = (this.model.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].ReceiptDifferentCurrency
            || this.model.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].PaymentDifferentCurrency)
            ? true : false;
        return entity;
    };
    DocumentInformationFormComponent.prototype.populateCharter = function (charterId) {
        var filteredCharters = this.charters.filter(function (item) { return item.charterId === charterId; });
        if (filteredCharters.length > 0) {
            this.charterCtrl.patchValue(filteredCharters[0]);
        }
    };
    DocumentInformationFormComponent.prototype.bindSelectedTransactionValue = function (value) {
        this.cashTransactionId = value;
        return value;
    };
    DocumentInformationFormComponent.prototype.getDepartmentDetail = function (masterData, value, filterOnId) {
        var department = masterData.departments.filter(function (item) {
            return filterOnId ? item.departmentId === value : item.departmentCode === value;
        });
        if (department.length > 0) {
            return department;
        }
    };
    DocumentInformationFormComponent.prototype.getNominalAccountDetails = function (code, fetchFromAccountCode) {
        if (code) {
            var nominalCode = this.nominalAccountListWithOnlyBankAccount.find(function (e) {
                return (fetchFromAccountCode ? e.accountNumber === code
                    : e.nominalAccountNumberFormated === code.toString());
            });
            if (nominalCode) {
                return nominalCode;
            }
        }
    };
    DocumentInformationFormComponent.prototype.onDepartmentCodeSelected = function (departmentCode) {
        var selectedDepartments = this.masterData.departments.filter(function (department) { return department.departmentCode === departmentCode; });
        if (selectedDepartments.length > 0) {
            this.departmentValue = selectedDepartments[0].departmentId;
        }
    };
    DocumentInformationFormComponent.prototype.getDescriptionOfAccount = function (value) {
        var accountDetails = this.masterData.nominalAccounts.find(function (item) { return item.accountNumber === value.accountNumber; });
        if (accountDetails) {
            this.nominalAccountCtrl.patchValue(accountDetails.nominalAccountNumberFormated);
            this.accountDescriptionCtrl.patchValue(accountDetails.detailedDescription);
        }
    };
    DocumentInformationFormComponent.prototype.onCharterSelected = function (charter) {
    };
    // populate charterlist to charter contexual search
    DocumentInformationFormComponent.prototype.populateCharterList = function () {
        var _this = this;
        if (this.filteredCharters && this.filteredCharters.length > 0) {
            this.bindCharterControl();
        }
        else {
            this.charterDataLoader.getData().subscribe(function (charter) {
                _this.charters = charter.sort(function (a, b) { return (a.charterCode > b.charterCode) ? 1 : -1; });
                _this.filteredCharters = _this.charters;
                _this.bindCharterControl();
            });
        }
    };
    DocumentInformationFormComponent.prototype.bindCharterControl = function () {
        var _this = this;
        this.charterCtrl.valueChanges.subscribe(function (input) {
            _this.filteredCharters = _this.utilService.filterListforAutocomplete(input, _this.charters, ['charterCode', 'description']);
        });
        if (this.charterCtrl.valid) {
            this.onCharterSelected(this.charterCtrl.value);
        }
        this.setValidators();
    };
    // Emit the selected currency in pick trxn screen for cash Payment.
    // to filter client bank account based on selected currecny and counterparty.
    // in counterprty information component
    DocumentInformationFormComponent.prototype.currencyValueChangeInPickTransactionScreen = function () {
        this.currencyChangeStatus = true;
        this.currencyChangeValue.emit({
            currencyStatus: this.currencyChangeStatus,
            currency: this.currencyValue,
            paymentCurrency: this.paymentCurrency,
        });
    };
    DocumentInformationFormComponent.prototype.bindDepartmentControl = function (departmentId) {
        var department = this.getDepartmentDetail(this.masterData, departmentId, true);
        if (department && department.length > 0) {
            this.departmentCodeCtrl.patchValue(department[0]);
        }
    };
    DocumentInformationFormComponent.prototype.setDocAmountForCashReceiptDiffCurrency = function (amount) {
        this.amountOriginalCurrency = amount;
        this.amountOriginalCurrencyCtrl.patchValue(this.commonMethods.getFormattedNumberValue(this.amountOriginalCurrency));
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Object)
    ], DocumentInformationFormComponent.prototype, "isSummary", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], DocumentInformationFormComponent.prototype, "currencySelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], DocumentInformationFormComponent.prototype, "currencySearchValue", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], DocumentInformationFormComponent.prototype, "departmentSearchValue", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], DocumentInformationFormComponent.prototype, "amountSearchValue", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], DocumentInformationFormComponent.prototype, "currencyChangeValue", void 0);
    DocumentInformationFormComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-document-information',
            template: __webpack_require__(/*! ./document-information.component.html */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/document-information/document-information.component.html"),
            styles: [__webpack_require__(/*! ./document-information.component.scss */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/document-information/document-information.component.scss")],
            providers: [_shared_services_execution_charter_data_loader__WEBPACK_IMPORTED_MODULE_13__["CharterDataLoader"]],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_17__["MasterdataService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_18__["UtilService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_15__["FormConfigurationProviderService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_16__["ExecutionService"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__["CompanyManagerService"],
            _shared_services_execution_charter_data_loader__WEBPACK_IMPORTED_MODULE_13__["CharterDataLoader"]])
    ], DocumentInformationFormComponent);
    return DocumentInformationFormComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/template-selection-card/payment-order-template-selection-card.component.html":
/*!*************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/template-selection-card/payment-order-template-selection-card.component.html ***!
  \*************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-title>\r\n        <h2>Payment Order Document</h2>\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <mat-form-field>\r\n                <mat-select placeholder=\"Template\"\r\n                            [formControl]=\"templatesCtrl\"\r\n                            (selectionChange)=\"onTemplateSelected()\"\r\n                            matTooltip=\"Template\">\r\n                    <mat-option></mat-option>\r\n                    <mat-option *ngFor=\"let template of filteredTemplates\"\r\n                                [value]=\"template\">\r\n                        {{template.name}}\r\n                    </mat-option>\r\n                </mat-select>\r\n                <mat-hint>Select a template if you want to generate a physical document</mat-hint>\r\n            </mat-form-field>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/template-selection-card/payment-order-template-selection-card.component.scss":
/*!*************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/template-selection-card/payment-order-template-selection-card.component.scss ***!
  \*************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/template-selection-card/payment-order-template-selection-card.component.ts":
/*!***********************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-details/template-selection-card/payment-order-template-selection-card.component.ts ***!
  \***********************************************************************************************************************************************************/
/*! exports provided: PaymentOrderTemplateSelectionCardComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PaymentOrderTemplateSelectionCardComponent", function() { return PaymentOrderTemplateSelectionCardComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../shared/enums/cash-selection-type */ "./Client/app/shared/enums/cash-selection-type.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./../../../../../shared/enums/document-type.enum */ "./Client/app/shared/enums/document-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./../../../../../shared/services/http-services/document.service */ "./Client/app/shared/services/http-services/document.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var PaymentOrderTemplateSelectionCardComponent = /** @class */ (function (_super) {
    __extends(PaymentOrderTemplateSelectionCardComponent, _super);
    function PaymentOrderTemplateSelectionCardComponent(formBuilder, documentService, utilService, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.documentService = documentService;
        _this.utilService = utilService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.templatesCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('templateCtrl');
        _this.filteredTemplates = [];
        _this.templateSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        return _this;
    }
    PaymentOrderTemplateSelectionCardComponent.prototype.ngOnInit = function () { };
    PaymentOrderTemplateSelectionCardComponent.prototype.mapCashDocumentType = function (cashSelectionType) {
        switch (cashSelectionType) {
            case _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_2__["CashSelectionType"].SimpleCashPayment:
            case _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_2__["CashSelectionType"].SimpleCashReceipt:
                return _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_5__["DocumentTypes"].CashSimpleCash;
            case _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_2__["CashSelectionType"].PaymentDifferentClient:
                return _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_5__["DocumentTypes"].CashDifferentClient;
            case _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_2__["CashSelectionType"].PaymentDifferentCurrency:
            case _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_2__["CashSelectionType"].ReceiptDifferentCurrency:
                return _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_5__["DocumentTypes"].CashDifferentCurrency;
            case _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_2__["CashSelectionType"].PaymentFullPartialTransaction:
            case _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_2__["CashSelectionType"].ReceiptFullPartialTransaction:
                return _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_5__["DocumentTypes"].CashPickByTransaction;
            default:
                console.error('Invalid cash selection type: %s', cashSelectionType);
                break;
        }
    };
    PaymentOrderTemplateSelectionCardComponent.prototype.SetCashType = function (cashTypeId) {
        var _this = this;
        var documentType = this.mapCashDocumentType(cashTypeId);
        this.subscriptions.push(this.documentService.getTemplates(documentType).subscribe(function (templates) {
            _this.filteredTemplates = templates.value;
            _this.templatesCtrl.valueChanges.subscribe(function (input) {
                _this.filteredTemplates =
                    _this.utilService.filterListforAutocomplete(input, _this.filteredTemplates, ['documentTemplateId', 'name']);
            });
        }));
    };
    PaymentOrderTemplateSelectionCardComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            invoiceTemplatesCtrl: this.templatesCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    PaymentOrderTemplateSelectionCardComponent.prototype.onTemplateSelected = function () {
        this.templateSelected.emit(this.templatesCtrl.value ? true : false);
    };
    PaymentOrderTemplateSelectionCardComponent.prototype.populateEntity = function (entity) {
        entity.template = this.templatesCtrl.value ? this.templatesCtrl.value.path : null;
        return entity;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], PaymentOrderTemplateSelectionCardComponent.prototype, "templateSelected", void 0);
    PaymentOrderTemplateSelectionCardComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-payment-order-template-selection-card',
            template: __webpack_require__(/*! ./payment-order-template-selection-card.component.html */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/template-selection-card/payment-order-template-selection-card.component.html"),
            styles: [__webpack_require__(/*! ./payment-order-template-selection-card.component.scss */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/template-selection-card/payment-order-template-selection-card.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_7__["DocumentService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_8__["UtilService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__["FormConfigurationProviderService"]])
    ], PaymentOrderTemplateSelectionCardComponent);
    return PaymentOrderTemplateSelectionCardComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-dialog-component/cash-warning-dialog-component/cash-warning-dialog-component.component.html":
/*!********************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-dialog-component/cash-warning-dialog-component/cash-warning-dialog-component.component.html ***!
  \********************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<h1 mat-dialog-title\r\n    style=\"text-transform: uppercase;\">{{dialogData.title}}</h1>\r\n<mat-dialog-content>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"none center\"\r\n         fxLayoutWrap\r\n         fxLayoutGap=\"10px\">\r\n        <p>{{dialogData.text}}</p>\r\n    </div>\r\n</mat-dialog-content>\r\n<div fxLayout=\"row\"\r\n     fxLayoutAlign=\"space-between end\">\r\n    <button mat-button\r\n            (click)=\"onCloseCancel()\">DISCARD</button>\r\n    <button mat-button\r\n            (click)=\"onCloseEdit()\">EDIT CASH</button>\r\n    <button mat-button\r\n            (click)=\"onCloseConfirm()\">SAVE ANYWAY</button>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-dialog-component/cash-warning-dialog-component/cash-warning-dialog-component.component.scss":
/*!********************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-dialog-component/cash-warning-dialog-component/cash-warning-dialog-component.component.scss ***!
  \********************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-dialog-component/cash-warning-dialog-component/cash-warning-dialog-component.component.ts":
/*!******************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-dialog-component/cash-warning-dialog-component/cash-warning-dialog-component.component.ts ***!
  \******************************************************************************************************************************************************************/
/*! exports provided: CashWarningDialogComponentComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CashWarningDialogComponentComponent", function() { return CashWarningDialogComponentComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};





var CashWarningDialogComponentComponent = /** @class */ (function (_super) {
    __extends(CashWarningDialogComponentComponent, _super);
    function CashWarningDialogComponentComponent(formBuilder, thisDialogRef, dialog, data, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.thisDialogRef = thisDialogRef;
        _this.dialog = dialog;
        _this.data = data;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.dialogData = data;
        return _this;
    }
    CashWarningDialogComponentComponent.prototype.ngOnInit = function () {
    };
    CashWarningDialogComponentComponent.prototype.onCloseConfirm = function () {
        this.thisDialogRef.close(true);
    };
    CashWarningDialogComponentComponent.prototype.onCloseCancel = function () {
        this.thisDialogRef.close(false);
    };
    CashWarningDialogComponentComponent.prototype.onCloseEdit = function () {
        this.thisDialogRef.close(false);
    };
    CashWarningDialogComponentComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-cash-warning-dialog-component',
            template: __webpack_require__(/*! ./cash-warning-dialog-component.component.html */ "./Client/app/execution/execution-cash/execution-cash-create/cash-dialog-component/cash-warning-dialog-component/cash-warning-dialog-component.component.html"),
            styles: [__webpack_require__(/*! ./cash-warning-dialog-component.component.scss */ "./Client/app/execution/execution-cash/execution-cash-create/cash-dialog-component/cash-warning-dialog-component/cash-warning-dialog-component.component.scss")]
        }),
        __param(3, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_angular_material__WEBPACK_IMPORTED_MODULE_2__["MAT_DIALOG_DATA"])),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialogRef"],
            _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"], Object, _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_4__["FormConfigurationProviderService"]])
    ], CashWarningDialogComponentComponent);
    return CashWarningDialogComponentComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/cash-selection.component.html":
/*!****************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/cash-selection.component.html ***!
  \****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card *ngIf=\"cashTypeId==CashType.CashPayment\">\r\n    <mat-card-title>\r\n        <h2>Cash Payments</h2>\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div fxLayout=\"column\"\r\n             fxLayoutAlign=\"start left\"\r\n             fxFlex=\"50\">\r\n            <atlas-simple-cash-payment *ifAuthorized=\"'Cash.CashPayment.CPSIMPLE',company:this.company\"\r\n                                       #simpleCashPayment\r\n                                       (simpleCashPaymentOptionChecked)=\"onSimpleCashPaymentOptionChecked($event)\">\r\n            </atlas-simple-cash-payment>\r\n            <atlas-payment-full-transaction *ifAuthorized=\"'Cash.CashPayment.CPPICKTX',company:this.company\"\r\n                                            #paymentFullTransaction\r\n                                            (paymentFullTransactionOptionChecked)=\"onPaymentFullTransactionOptionChecked($event)\">\r\n            </atlas-payment-full-transaction>\r\n        </div>\r\n        <div fxLayout=\"column\"\r\n             fxLayoutAlign=\"start right\"\r\n             fxFlex=\"50\">\r\n            <atlas-payment-different-client *ifAuthorized=\"'Cash.CashPayment.CPDIFFCLI',company:this.company\"\r\n                                            #paymentDifferentClient\r\n                                            (paymentDifferentClientOptionChecked)=\"onPaymentDifferentClientOptionChecked($event)\">\r\n            </atlas-payment-different-client>\r\n            <atlas-payment-different-currency *ifAuthorized=\"'Cash.CashPayment.CPDIFFCCY',company:this.company\"\r\n                                              #paymentDifferentCurrency\r\n                                              (paymentDifferentCurrencyOptionChecked)=\"onPaymentDifferentCurrencyOptionChecked($event)\">\r\n            </atlas-payment-different-currency>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n<mat-card *ngIf=\"cashTypeId==CashType.CashReceipt\">\r\n    <mat-card-title>\r\n        <h2>Cash Receipts</h2>\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div fxLayout=\"column\"\r\n             fxLayoutAlign=\"start left\"\r\n             fxFlex=\"50\">\r\n            <atlas-simple-cash-receipt *ifAuthorized=\"'Cash.CashReceipt.CRSIMPLE',company:this.company\"\r\n                                       #simpleCashReceipt\r\n                                       (simpleCashReceiptOptionChecked)=\"onSimpleCashReceiptOptionChecked($event)\">\r\n            </atlas-simple-cash-receipt>\r\n            <atlas-receipt-full-transaction *ifAuthorized=\"'Cash.CashReceipt.CRPICKTX',company:this.company\"\r\n                                            #receiptFullTransaction\r\n                                            (receiptFullTransactionOptionChecked)=\"onReceiptFullTransactionOptionChecked($event)\">\r\n            </atlas-receipt-full-transaction>\r\n        </div>\r\n        <div fxLayout=\"column\"\r\n             fxLayoutAlign=\"start right\"\r\n             fxFlex=\"50\">\r\n            <atlas-receipt-different-currency *ifAuthorized=\"'Cash.CashReceipt.CRDIFFCCY',company:this.company\"\r\n                                              #receiptDifferentCurrency\r\n                                              (receiptDifferentCurrencyOptionChecked)=\"onReceiptDifferentCurrencyOptionChecked($event)\">\r\n            </atlas-receipt-different-currency>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/cash-selection.component.scss":
/*!****************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/cash-selection.component.scss ***!
  \****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/cash-selection.component.ts":
/*!**************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/cash-selection.component.ts ***!
  \**************************************************************************************************************/
/*! exports provided: CashSelectionFormComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CashSelectionFormComponent", function() { return CashSelectionFormComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../shared/enums/cash-selection-type */ "./Client/app/shared/enums/cash-selection-type.ts");
/* harmony import */ var _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../shared/enums/cash-type.enum */ "./Client/app/shared/enums/cash-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _payment_different_client_payment_different_client_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./payment-different-client/payment-different-client.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-different-client/payment-different-client.component.ts");
/* harmony import */ var _payment_different_currency_payment_different_currency_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./payment-different-currency/payment-different-currency.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-different-currency/payment-different-currency.component.ts");
/* harmony import */ var _payment_full_transaction_payment_full_transaction_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./payment-full-transaction/payment-full-transaction.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-full-transaction/payment-full-transaction.component.ts");
/* harmony import */ var _receipt_different_currency_receipt_different_currency_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./receipt-different-currency/receipt-different-currency.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/receipt-different-currency/receipt-different-currency.component.ts");
/* harmony import */ var _receipt_full_transaction_receipt_full_transaction_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./receipt-full-transaction/receipt-full-transaction.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/receipt-full-transaction/receipt-full-transaction.component.ts");
/* harmony import */ var _simple_cash_payment_simple_cash_payment_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./simple-cash-payment/simple-cash-payment.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/simple-cash-payment/simple-cash-payment.component.ts");
/* harmony import */ var _simple_cash_receipt_simple_cash_receipt_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./simple-cash-receipt/simple-cash-receipt.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/simple-cash-receipt/simple-cash-receipt.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};















var CashSelectionFormComponent = /** @class */ (function (_super) {
    __extends(CashSelectionFormComponent, _super);
    function CashSelectionFormComponent(formConfigurationProvider, route, formBuilder) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.checkBoxValueChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.cashOptionSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.CashType = _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_6__["CashType"];
        _this.masterData = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_4__["MasterData"]();
        _this.cashTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('cashTypeId')));
        return _this;
    }
    CashSelectionFormComponent.prototype.ngOnInit = function () {
        this.company = this.route.snapshot.paramMap.get('company');
    };
    CashSelectionFormComponent.prototype.onChange = function (value) {
        this.checkBoxValueChange.emit(!value.checked);
    };
    CashSelectionFormComponent.prototype.onSimpleCashPaymentOptionChecked = function (cashType) {
        this.cashSelectionOption = cashType.simpleCashPaymentOption;
        this.cashOptionSelected.emit({ option: this.cashSelectionOption, checked: cashType.checked });
        if (cashType.checked) {
            if (this.paymentDifferentClient) {
                this.paymentDifferentClient.paymentDifferentClientDisable();
            }
            if (this.paymentDifferentCurrency) {
                this.paymentDifferentCurrency.paymentDifferentCurrencyDisable();
            }
            if (this.paymentFullTransaction) {
                this.paymentFullTransaction.paymentFullTransactionDisable();
            }
        }
        else {
            if (this.paymentDifferentClient) {
                this.paymentDifferentClient.paymentDifferentClientEnable();
            }
            if (this.paymentDifferentCurrency) {
                this.paymentDifferentCurrency.paymentDifferentCurrencyEnable();
            }
            if (this.paymentFullTransaction) {
                this.paymentFullTransaction.paymentFullTransactionEnable();
            }
        }
    };
    CashSelectionFormComponent.prototype.onPaymentFullTransactionOptionChecked = function (cashType) {
        this.cashSelectionOption = cashType.paymentFullTransactionOption;
        this.cashOptionSelected.emit({ option: this.cashSelectionOption, checked: cashType.checked });
        if (cashType.checked) {
            if (this.paymentDifferentClient) {
                this.paymentDifferentClient.paymentDifferentClientDisable();
            }
            if (this.paymentDifferentCurrency) {
                this.paymentDifferentCurrency.paymentDifferentCurrencyDisable();
            }
            if (this.simpleCashPayment) {
                this.simpleCashPayment.simpleCashPaymentDisable();
            }
        }
        else {
            if (this.paymentDifferentClient) {
                this.paymentDifferentClient.paymentDifferentClientEnable();
            }
            if (this.paymentDifferentCurrency) {
                this.paymentDifferentCurrency.paymentDifferentCurrencyEnable();
            }
            if (this.simpleCashPayment) {
                this.simpleCashPayment.simpleCashPaymentEnable();
            }
        }
    };
    CashSelectionFormComponent.prototype.onPaymentDifferentClientOptionChecked = function (cashType) {
        this.cashSelectionOption = cashType.paymentDifferentClientOption;
        this.cashOptionSelected.emit({ option: this.cashSelectionOption, checked: cashType.checked });
        if (cashType.checked) {
            if (this.simpleCashPayment) {
                this.simpleCashPayment.simpleCashPaymentDisable();
            }
            if (this.paymentDifferentCurrency) {
                this.paymentDifferentCurrency.paymentDifferentCurrencyDisable();
            }
            if (this.paymentFullTransaction) {
                this.paymentFullTransaction.paymentFullTransactionDisable();
            }
        }
        else {
            if (this.simpleCashPayment) {
                this.simpleCashPayment.simpleCashPaymentEnable();
            }
            if (this.paymentDifferentCurrency) {
                this.paymentDifferentCurrency.paymentDifferentCurrencyEnable();
            }
            if (this.paymentFullTransaction) {
                this.paymentFullTransaction.paymentFullTransactionEnable();
            }
        }
    };
    CashSelectionFormComponent.prototype.onPaymentDifferentCurrencyOptionChecked = function (cashType) {
        this.cashSelectionOption = cashType.paymentDifferentCurrencyOption;
        this.cashOptionSelected.emit({ option: this.cashSelectionOption, checked: cashType.checked });
        if (cashType.checked) {
            if (this.simpleCashPayment) {
                this.simpleCashPayment.simpleCashPaymentDisable();
            }
            if (this.paymentDifferentClient) {
                this.paymentDifferentClient.paymentDifferentClientDisable();
            }
            if (this.paymentFullTransaction) {
                this.paymentFullTransaction.paymentFullTransactionDisable();
            }
        }
        else {
            if (this.simpleCashPayment) {
                this.simpleCashPayment.simpleCashPaymentEnable();
            }
            if (this.paymentDifferentClient) {
                this.paymentDifferentClient.paymentDifferentClientEnable();
            }
            if (this.paymentFullTransaction) {
                this.paymentFullTransaction.paymentFullTransactionEnable();
            }
        }
    };
    CashSelectionFormComponent.prototype.onSimpleCashReceiptOptionChecked = function (cashType) {
        this.cashSelectionOption = cashType.simpleCashReceiptOption;
        this.cashOptionSelected.emit({ option: this.cashSelectionOption, checked: cashType.checked });
        if (cashType.checked) {
            if (this.receiptDifferentCurrency) {
                this.receiptDifferentCurrency.receiptDifferentCurrencyDisable();
            }
            if (this.receiptFullTransaction) {
                this.receiptFullTransaction.receiptFullTransactionDisable();
            }
        }
        else {
            if (this.receiptDifferentCurrency) {
                this.receiptDifferentCurrency.receiptDifferentCurrencyEnable();
            }
            if (this.receiptFullTransaction) {
                this.receiptFullTransaction.receiptFullTransactionEnable();
            }
        }
    };
    CashSelectionFormComponent.prototype.onReceiptFullTransactionOptionChecked = function (cashType) {
        this.cashSelectionOption = cashType.receiptFullTransactionOption;
        this.cashOptionSelected.emit({ option: this.cashSelectionOption, checked: cashType.checked });
        if (cashType.checked) {
            if (this.receiptDifferentCurrency) {
                this.receiptDifferentCurrency.receiptDifferentCurrencyDisable();
            }
            if (this.simpleCashReceipt) {
                this.simpleCashReceipt.simpleCashReceiptDisable();
            }
        }
        else {
            if (this.receiptDifferentCurrency) {
                this.receiptDifferentCurrency.receiptDifferentCurrencyEnable();
            }
            if (this.simpleCashReceipt) {
                this.simpleCashReceipt.simpleCashReceiptEnable();
            }
        }
    };
    CashSelectionFormComponent.prototype.onReceiptDifferentCurrencyOptionChecked = function (cashType) {
        this.cashSelectionOption = cashType.receiptDifferentCurrencyOption;
        this.cashOptionSelected.emit({ option: this.cashSelectionOption, checked: cashType.checked });
        if (cashType.checked) {
            if (this.receiptFullTransaction) {
                this.receiptFullTransaction.receiptFullTransactionDisable();
            }
            if (this.simpleCashReceipt) {
                this.simpleCashReceipt.simpleCashReceiptDisable();
            }
        }
        else {
            if (this.receiptFullTransaction) {
                this.receiptFullTransaction.receiptFullTransactionEnable();
            }
            if (this.simpleCashReceipt) {
                this.simpleCashReceipt.simpleCashReceiptEnable();
            }
        }
    };
    CashSelectionFormComponent.prototype.initForm = function (entity, isEdit) {
        return entity;
    };
    CashSelectionFormComponent.prototype.bindSelectedCashTypeSelection = function (value, costDirectId) {
        if (value) {
            var selectedCashType_1 = Number(value);
            var cashTypeList = costDirectId === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_6__["CashType"].CashPayment ?
                this.simpleCashPayment.getCashTypes()
                : this.simpleCashReceipt.getCashTypes();
            this.cashTypes = cashTypeList.find(function (item) { return item.cashTypeId === selectedCashType_1; });
            switch (selectedCashType_1) {
                case _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_5__["CashSelectionType"].SimpleCashPayment: {
                    this.simpleCashPayment.onChange(null, true, this.cashTypes);
                    break;
                }
                case _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_5__["CashSelectionType"].SimpleCashReceipt: {
                    this.simpleCashReceipt.onChange(null, true, this.cashTypes);
                    break;
                }
                case _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_5__["CashSelectionType"].PaymentDifferentClient: {
                    this.paymentDifferentClient.onChange(null, true, this.cashTypes);
                    break;
                }
                case _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_5__["CashSelectionType"].PaymentDifferentCurrency: {
                    this.paymentDifferentCurrency.onChange(null, true, this.cashTypes);
                    break;
                }
                case _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_5__["CashSelectionType"].PaymentFullPartialTransaction: {
                    this.paymentFullTransaction.onChange(null, true, this.cashTypes);
                    break;
                }
                case _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_5__["CashSelectionType"].ReceiptDifferentCurrency: {
                    this.receiptDifferentCurrency.onChange(null, true, this.cashTypes);
                    break;
                }
                case _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_5__["CashSelectionType"].ReceiptFullPartialTransaction: {
                    this.receiptFullTransaction.onChange(null, true, this.cashTypes);
                    break;
                }
                default: {
                    // statements;
                    break;
                }
            }
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CashSelectionFormComponent.prototype, "checkBoxValueChange", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CashSelectionFormComponent.prototype, "cashOptionSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('simpleCashPayment'),
        __metadata("design:type", _simple_cash_payment_simple_cash_payment_component__WEBPACK_IMPORTED_MODULE_13__["SimpleCashPaymentComponent"])
    ], CashSelectionFormComponent.prototype, "simpleCashPayment", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('paymentFullTransaction'),
        __metadata("design:type", _payment_full_transaction_payment_full_transaction_component__WEBPACK_IMPORTED_MODULE_10__["PaymentFullTransactionComponent"])
    ], CashSelectionFormComponent.prototype, "paymentFullTransaction", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('paymentDifferentClient'),
        __metadata("design:type", _payment_different_client_payment_different_client_component__WEBPACK_IMPORTED_MODULE_8__["PaymentDifferentClientComponent"])
    ], CashSelectionFormComponent.prototype, "paymentDifferentClient", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('paymentDifferentCurrency'),
        __metadata("design:type", _payment_different_currency_payment_different_currency_component__WEBPACK_IMPORTED_MODULE_9__["PaymentDifferentCurrencyComponent"])
    ], CashSelectionFormComponent.prototype, "paymentDifferentCurrency", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('simpleCashReceipt'),
        __metadata("design:type", _simple_cash_receipt_simple_cash_receipt_component__WEBPACK_IMPORTED_MODULE_14__["SimpleCashReceiptComponent"])
    ], CashSelectionFormComponent.prototype, "simpleCashReceipt", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('receiptFullTransaction'),
        __metadata("design:type", _receipt_full_transaction_receipt_full_transaction_component__WEBPACK_IMPORTED_MODULE_12__["ReceiptFullTransactionComponent"])
    ], CashSelectionFormComponent.prototype, "receiptFullTransaction", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('receiptDifferentCurrency'),
        __metadata("design:type", _receipt_different_currency_receipt_different_currency_component__WEBPACK_IMPORTED_MODULE_11__["ReceiptDifferentCurrencyComponent"])
    ], CashSelectionFormComponent.prototype, "receiptDifferentCurrency", void 0);
    CashSelectionFormComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-cash-selection-form-component',
            template: __webpack_require__(/*! ./cash-selection.component.html */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/cash-selection.component.html"),
            styles: [__webpack_require__(/*! ./cash-selection.component.scss */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/cash-selection.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__["FormConfigurationProviderService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"]])
    ], CashSelectionFormComponent);
    return CashSelectionFormComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-different-client/payment-different-client.component.html":
/*!***************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-different-client/payment-different-client.component.html ***!
  \***************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div *ngFor=\"let cashType of cashTypes\">\r\n    <mat-checkbox #paymentDifferentClientTypeCtrl\r\n                  [formControl]=\"paymentDifferentClientCtrl\"\r\n                  [checked]=\"checked\"\r\n                  [value]=\"cashType.cashTypeId\"\r\n                  (change)=\"onChange($event,paymentDifferentClientTypeCtrl.checked,cashType)\">{{cashType.description}}\r\n    </mat-checkbox>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-different-client/payment-different-client.component.scss":
/*!***************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-different-client/payment-different-client.component.scss ***!
  \***************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-different-client/payment-different-client.component.ts":
/*!*************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-different-client/payment-different-client.component.ts ***!
  \*************************************************************************************************************************************************/
/*! exports provided: PaymentDifferentClientComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PaymentDifferentClientComponent", function() { return PaymentDifferentClientComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/enums/cash-selection-type */ "./Client/app/shared/enums/cash-selection-type.ts");
/* harmony import */ var _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/enums/cash-type.enum */ "./Client/app/shared/enums/cash-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var PaymentDifferentClientComponent = /** @class */ (function (_super) {
    __extends(PaymentDifferentClientComponent, _super);
    function PaymentDifferentClientComponent(formConfigurationProvider, route, masterDataService, formBuilder, router) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.route = route;
        _this.masterDataService = masterDataService;
        _this.formBuilder = formBuilder;
        _this.router = router;
        _this.paymentDifferentClientOptionChecked = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.paymentDifferentClientCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('PaymentDifferentClient');
        _this.CashType = _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_7__["CashType"];
        _this.masterData = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__["MasterData"]();
        _this.cashTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('cashTypeId')));
        return _this;
    }
    PaymentDifferentClientComponent.prototype.ngOnInit = function () {
        this.company = this.route.snapshot.paramMap.get('company');
        this.masterData = this.route.snapshot.data.masterdata;
        this.cashTypes = this.masterData.cashTypes.filter(function (cashtype) { return cashtype.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_6__["CashSelectionType"].PaymentDifferentClient; });
        this.checked = false;
    };
    PaymentDifferentClientComponent.prototype.onChange = function ($event, value, cashTypes) {
        this.checked = Boolean(value);
        this.paymentDifferentClientOptionChecked.emit({
            paymentDifferentClientOption: Number(cashTypes.cashTypeId),
            checked: Boolean(value),
        });
    };
    PaymentDifferentClientComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            paymentDifferentClientCtrl: this.paymentDifferentClientCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    PaymentDifferentClientComponent.prototype.paymentDifferentClientDisable = function () {
        this.paymentDifferentClientCtrl.disable();
    };
    PaymentDifferentClientComponent.prototype.paymentDifferentClientEnable = function () {
        this.paymentDifferentClientCtrl.enable();
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], PaymentDifferentClientComponent.prototype, "paymentDifferentClientOptionChecked", void 0);
    PaymentDifferentClientComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-payment-different-client',
            template: __webpack_require__(/*! ./payment-different-client.component.html */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-different-client/payment-different-client.component.html"),
            styles: [__webpack_require__(/*! ./payment-different-client.component.scss */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-different-client/payment-different-client.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationProviderService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_9__["MasterdataService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"]])
    ], PaymentDifferentClientComponent);
    return PaymentDifferentClientComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-different-currency/payment-different-currency.component.html":
/*!*******************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-different-currency/payment-different-currency.component.html ***!
  \*******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div *ngFor=\"let cashType of cashTypes\">\r\n    <mat-checkbox #paymentDifferentCurrencyTypeCtrl\r\n                  [formControl]=\"paymentDifferentCurrencyCtrl\"\r\n                  [checked]=\"checked\"\r\n                  [value]=\"cashType.cashTypeId\"\r\n                  (change)=\"onChange($event,paymentDifferentCurrencyTypeCtrl.checked,cashType)\">{{cashType.description}}\r\n    </mat-checkbox>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-different-currency/payment-different-currency.component.scss":
/*!*******************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-different-currency/payment-different-currency.component.scss ***!
  \*******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-different-currency/payment-different-currency.component.ts":
/*!*****************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-different-currency/payment-different-currency.component.ts ***!
  \*****************************************************************************************************************************************************/
/*! exports provided: PaymentDifferentCurrencyComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PaymentDifferentCurrencyComponent", function() { return PaymentDifferentCurrencyComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/enums/cash-selection-type */ "./Client/app/shared/enums/cash-selection-type.ts");
/* harmony import */ var _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/enums/cash-type.enum */ "./Client/app/shared/enums/cash-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var PaymentDifferentCurrencyComponent = /** @class */ (function (_super) {
    __extends(PaymentDifferentCurrencyComponent, _super);
    function PaymentDifferentCurrencyComponent(formConfigurationProvider, route, masterDataService, formBuilder, router) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.route = route;
        _this.masterDataService = masterDataService;
        _this.formBuilder = formBuilder;
        _this.router = router;
        _this.paymentDifferentCurrencyOptionChecked = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.paymentDifferentCurrencyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('PaymentDifferentCurrency');
        _this.CashType = _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_7__["CashType"];
        _this.masterData = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__["MasterData"]();
        _this.cashTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('cashTypeId')));
        return _this;
    }
    PaymentDifferentCurrencyComponent.prototype.ngOnInit = function () {
        this.company = this.route.snapshot.paramMap.get('company');
        this.masterData = this.route.snapshot.data.masterdata;
        this.cashTypes = this.masterData.cashTypes.filter(function (cashtype) { return cashtype.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_6__["CashSelectionType"].PaymentDifferentCurrency; });
        this.checked = false;
    };
    PaymentDifferentCurrencyComponent.prototype.onChange = function ($event, value, cashTypes) {
        this.checked = Boolean(value);
        this.paymentDifferentCurrencyOptionChecked.emit({
            paymentDifferentCurrencyOption: Number(cashTypes.cashTypeId),
            checked: Boolean(value),
        });
    };
    PaymentDifferentCurrencyComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            paymentDifferentCurrencyCtrl: this.paymentDifferentCurrencyCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    PaymentDifferentCurrencyComponent.prototype.paymentDifferentCurrencyDisable = function () {
        this.paymentDifferentCurrencyCtrl.disable();
    };
    PaymentDifferentCurrencyComponent.prototype.paymentDifferentCurrencyEnable = function () {
        this.paymentDifferentCurrencyCtrl.enable();
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], PaymentDifferentCurrencyComponent.prototype, "paymentDifferentCurrencyOptionChecked", void 0);
    PaymentDifferentCurrencyComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-payment-different-currency',
            template: __webpack_require__(/*! ./payment-different-currency.component.html */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-different-currency/payment-different-currency.component.html"),
            styles: [__webpack_require__(/*! ./payment-different-currency.component.scss */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-different-currency/payment-different-currency.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationProviderService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_9__["MasterdataService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"]])
    ], PaymentDifferentCurrencyComponent);
    return PaymentDifferentCurrencyComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-full-transaction/payment-full-transaction.component.html":
/*!***************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-full-transaction/payment-full-transaction.component.html ***!
  \***************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div *ngFor=\"let cashType of cashTypes\">\r\n    <mat-checkbox #paymentFullTransactionTypeCtrl\r\n                  [formControl]=\"paymentFullTransactionCtrl\"\r\n                  [checked]=\"cashType.checked\"\r\n                  [value]=\"cashType.cashTypeId\"\r\n                  (change)=\"onChange($event,paymentFullTransactionTypeCtrl.checked,cashType)\">{{cashType.description}}\r\n    </mat-checkbox>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-full-transaction/payment-full-transaction.component.scss":
/*!***************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-full-transaction/payment-full-transaction.component.scss ***!
  \***************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-full-transaction/payment-full-transaction.component.ts":
/*!*************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-full-transaction/payment-full-transaction.component.ts ***!
  \*************************************************************************************************************************************************/
/*! exports provided: PaymentFullTransactionComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PaymentFullTransactionComponent", function() { return PaymentFullTransactionComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/enums/cash-selection-type */ "./Client/app/shared/enums/cash-selection-type.ts");
/* harmony import */ var _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/enums/cash-type.enum */ "./Client/app/shared/enums/cash-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var PaymentFullTransactionComponent = /** @class */ (function (_super) {
    __extends(PaymentFullTransactionComponent, _super);
    function PaymentFullTransactionComponent(formConfigurationProvider, route, masterDataService, formBuilder, router) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.route = route;
        _this.masterDataService = masterDataService;
        _this.formBuilder = formBuilder;
        _this.router = router;
        _this.paymentFullTransactionOptionChecked = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.paymentFullTransactionCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('PickTransactionFullPayment');
        _this.CashType = _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_7__["CashType"];
        _this.masterData = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__["MasterData"]();
        _this.cashTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('cashTypeId')));
        return _this;
    }
    PaymentFullTransactionComponent.prototype.ngOnInit = function () {
        this.company = this.route.snapshot.paramMap.get('company');
        this.masterData = this.route.snapshot.data.masterdata;
        this.cashTypes = this.masterData.cashTypes.filter(function (cashtype) { return cashtype.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_6__["CashSelectionType"].PaymentFullPartialTransaction; });
        this.checked = false;
    };
    PaymentFullTransactionComponent.prototype.onChange = function ($event, value, cashTypes) {
        this.checked = Boolean(value);
        this.paymentFullTransactionOptionChecked.emit({
            paymentFullTransactionOption: Number(cashTypes.cashTypeId),
            checked: Boolean(value),
        });
    };
    PaymentFullTransactionComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            paymentFullTransactionCtrl: this.paymentFullTransactionCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    PaymentFullTransactionComponent.prototype.paymentFullTransactionDisable = function () {
        this.paymentFullTransactionCtrl.disable();
    };
    PaymentFullTransactionComponent.prototype.paymentFullTransactionEnable = function () {
        this.paymentFullTransactionCtrl.enable();
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], PaymentFullTransactionComponent.prototype, "paymentFullTransactionOptionChecked", void 0);
    PaymentFullTransactionComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-payment-full-transaction',
            template: __webpack_require__(/*! ./payment-full-transaction.component.html */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-full-transaction/payment-full-transaction.component.html"),
            styles: [__webpack_require__(/*! ./payment-full-transaction.component.scss */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-full-transaction/payment-full-transaction.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationProviderService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_9__["MasterdataService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"]])
    ], PaymentFullTransactionComponent);
    return PaymentFullTransactionComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/receipt-different-currency/receipt-different-currency.component.html":
/*!*******************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/receipt-different-currency/receipt-different-currency.component.html ***!
  \*******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div *ngFor=\"let cashType of cashTypes\">\r\n    <mat-checkbox #receiptDifferentCurrencyTypeCtrl\r\n                  [formControl]=\"receiptDifferentCurrencyCtrl\"\r\n                  [checked]=\"checked\"\r\n                  [value]=\"cashType.cashTypeId\"\r\n                  (change)=\"onChange($event,receiptDifferentCurrencyTypeCtrl.checked,cashType)\">{{cashType.description}}\r\n    </mat-checkbox>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/receipt-different-currency/receipt-different-currency.component.scss":
/*!*******************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/receipt-different-currency/receipt-different-currency.component.scss ***!
  \*******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/receipt-different-currency/receipt-different-currency.component.ts":
/*!*****************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/receipt-different-currency/receipt-different-currency.component.ts ***!
  \*****************************************************************************************************************************************************/
/*! exports provided: ReceiptDifferentCurrencyComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReceiptDifferentCurrencyComponent", function() { return ReceiptDifferentCurrencyComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/enums/cash-selection-type */ "./Client/app/shared/enums/cash-selection-type.ts");
/* harmony import */ var _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/enums/cash-type.enum */ "./Client/app/shared/enums/cash-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var ReceiptDifferentCurrencyComponent = /** @class */ (function (_super) {
    __extends(ReceiptDifferentCurrencyComponent, _super);
    function ReceiptDifferentCurrencyComponent(formConfigurationProvider, route, masterDataService, formBuilder, router) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.route = route;
        _this.masterDataService = masterDataService;
        _this.formBuilder = formBuilder;
        _this.router = router;
        _this.receiptDifferentCurrencyOptionChecked = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.receiptDifferentCurrencyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('ReceiptDifferentCurrency');
        _this.CashType = _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_7__["CashType"];
        _this.masterData = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__["MasterData"]();
        _this.cashTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('cashTypeId')));
        return _this;
    }
    ReceiptDifferentCurrencyComponent.prototype.ngOnInit = function () {
        this.company = this.route.snapshot.paramMap.get('company');
        this.masterData = this.route.snapshot.data.masterdata;
        this.cashTypes = this.masterData.cashTypes.filter(function (cashtype) { return cashtype.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_6__["CashSelectionType"].ReceiptDifferentCurrency; });
        this.checked = false;
    };
    ReceiptDifferentCurrencyComponent.prototype.onChange = function ($event, value, cashTypes) {
        this.checked = Boolean(value);
        this.receiptDifferentCurrencyOptionChecked.emit({
            receiptDifferentCurrencyOption: Number(cashTypes.cashTypeId),
            checked: Boolean(value),
        });
    };
    ReceiptDifferentCurrencyComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            receiptDifferentCurrencyCtrl: this.receiptDifferentCurrencyCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    ReceiptDifferentCurrencyComponent.prototype.receiptDifferentCurrencyDisable = function () {
        this.receiptDifferentCurrencyCtrl.disable();
    };
    ReceiptDifferentCurrencyComponent.prototype.receiptDifferentCurrencyEnable = function () {
        this.receiptDifferentCurrencyCtrl.enable();
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], ReceiptDifferentCurrencyComponent.prototype, "receiptDifferentCurrencyOptionChecked", void 0);
    ReceiptDifferentCurrencyComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-receipt-different-currency',
            template: __webpack_require__(/*! ./receipt-different-currency.component.html */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/receipt-different-currency/receipt-different-currency.component.html"),
            styles: [__webpack_require__(/*! ./receipt-different-currency.component.scss */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/receipt-different-currency/receipt-different-currency.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationProviderService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_9__["MasterdataService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"]])
    ], ReceiptDifferentCurrencyComponent);
    return ReceiptDifferentCurrencyComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/receipt-full-transaction/receipt-full-transaction.component.html":
/*!***************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/receipt-full-transaction/receipt-full-transaction.component.html ***!
  \***************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div *ngFor=\"let cashType of cashTypes\">\r\n    <mat-checkbox #receiptFullTransactionTypeCtrl\r\n                  [formControl]=\"receiptFullTransactionCtrl\"\r\n                  [checked]=\"checked\"\r\n                  [value]=\"cashType.cashTypeId\"\r\n                  (change)=\"onChange($event,receiptFullTransactionTypeCtrl.checked,cashType)\">{{cashType.description}}\r\n    </mat-checkbox>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/receipt-full-transaction/receipt-full-transaction.component.scss":
/*!***************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/receipt-full-transaction/receipt-full-transaction.component.scss ***!
  \***************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/receipt-full-transaction/receipt-full-transaction.component.ts":
/*!*************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/receipt-full-transaction/receipt-full-transaction.component.ts ***!
  \*************************************************************************************************************************************************/
/*! exports provided: ReceiptFullTransactionComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReceiptFullTransactionComponent", function() { return ReceiptFullTransactionComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/enums/cash-selection-type */ "./Client/app/shared/enums/cash-selection-type.ts");
/* harmony import */ var _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/enums/cash-type.enum */ "./Client/app/shared/enums/cash-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var ReceiptFullTransactionComponent = /** @class */ (function (_super) {
    __extends(ReceiptFullTransactionComponent, _super);
    function ReceiptFullTransactionComponent(formConfigurationProvider, route, masterDataService, formBuilder, router) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.route = route;
        _this.masterDataService = masterDataService;
        _this.formBuilder = formBuilder;
        _this.router = router;
        _this.receiptFullTransactionOptionChecked = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.receiptFullTransactionCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('ReceiptFullTransaction');
        _this.CashType = _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_7__["CashType"];
        _this.masterData = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__["MasterData"]();
        _this.cashTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('cashTypeId')));
        return _this;
    }
    ReceiptFullTransactionComponent.prototype.ngOnInit = function () {
        this.company = this.route.snapshot.paramMap.get('company');
        this.masterData = this.route.snapshot.data.masterdata;
        this.cashTypes = this.masterData.cashTypes.filter(function (cashtype) { return cashtype.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_6__["CashSelectionType"].ReceiptFullPartialTransaction; });
        this.checked = false;
    };
    ReceiptFullTransactionComponent.prototype.onChange = function ($event, value, cashTypes) {
        this.checked = Boolean(value);
        this.receiptFullTransactionOptionChecked.emit({
            receiptFullTransactionOption: Number(cashTypes.cashTypeId),
            checked: Boolean(value),
        });
    };
    ReceiptFullTransactionComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            receiptFullTransactionCtrl: this.receiptFullTransactionCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    ReceiptFullTransactionComponent.prototype.receiptFullTransactionDisable = function () {
        this.receiptFullTransactionCtrl.disable();
    };
    ReceiptFullTransactionComponent.prototype.receiptFullTransactionEnable = function () {
        this.receiptFullTransactionCtrl.enable();
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], ReceiptFullTransactionComponent.prototype, "receiptFullTransactionOptionChecked", void 0);
    ReceiptFullTransactionComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-receipt-full-transaction',
            template: __webpack_require__(/*! ./receipt-full-transaction.component.html */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/receipt-full-transaction/receipt-full-transaction.component.html"),
            styles: [__webpack_require__(/*! ./receipt-full-transaction.component.scss */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/receipt-full-transaction/receipt-full-transaction.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationProviderService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_9__["MasterdataService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"]])
    ], ReceiptFullTransactionComponent);
    return ReceiptFullTransactionComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/simple-cash-payment/simple-cash-payment.component.html":
/*!*****************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/simple-cash-payment/simple-cash-payment.component.html ***!
  \*****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div *ngFor=\"let cashType of cashTypes\">\r\n    <mat-checkbox #simplePaymentTypeCtrl\r\n                  [formControl]=\"simplePaymentCtrl\"\r\n                  [checked]=\"checked\"\r\n                  [value]=\"cashType.cashTypeId\"\r\n                  (change)=\"onChange($event,simplePaymentTypeCtrl.checked,cashType)\">{{cashType.description}}\r\n    </mat-checkbox>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/simple-cash-payment/simple-cash-payment.component.scss":
/*!*****************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/simple-cash-payment/simple-cash-payment.component.scss ***!
  \*****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/simple-cash-payment/simple-cash-payment.component.ts":
/*!***************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/simple-cash-payment/simple-cash-payment.component.ts ***!
  \***************************************************************************************************************************************/
/*! exports provided: SimpleCashPaymentComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SimpleCashPaymentComponent", function() { return SimpleCashPaymentComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/enums/cash-selection-type */ "./Client/app/shared/enums/cash-selection-type.ts");
/* harmony import */ var _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/enums/cash-type.enum */ "./Client/app/shared/enums/cash-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var SimpleCashPaymentComponent = /** @class */ (function (_super) {
    __extends(SimpleCashPaymentComponent, _super);
    function SimpleCashPaymentComponent(formConfigurationProvider, route, masterDataService, formBuilder, router) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.route = route;
        _this.masterDataService = masterDataService;
        _this.formBuilder = formBuilder;
        _this.router = router;
        _this.simpleCashPaymentOptionChecked = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.simplePaymentCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('SimpleCashPayment');
        _this.CashType = _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_7__["CashType"];
        _this.masterData = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__["MasterData"]();
        _this.cashTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('cashTypeId')));
        return _this;
    }
    SimpleCashPaymentComponent.prototype.ngOnInit = function () {
        this.company = this.route.snapshot.paramMap.get('company');
        this.masterData = this.route.snapshot.data.masterdata;
        this.cashTypes = this.masterData.cashTypes.filter(function (cashtype) { return cashtype.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_6__["CashSelectionType"].SimpleCashPayment; });
        this.checked = false;
    };
    SimpleCashPaymentComponent.prototype.onChange = function ($event, value, cashTypes) {
        this.checked = Boolean(value);
        this.simpleCashPaymentOptionChecked.emit({
            simpleCashPaymentOption: Number(cashTypes.cashTypeId),
            checked: Boolean(value),
        });
    };
    SimpleCashPaymentComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            simplePaymentCtrl: this.simplePaymentCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    SimpleCashPaymentComponent.prototype.simpleCashPaymentDisable = function () {
        this.simplePaymentCtrl.disable();
    };
    SimpleCashPaymentComponent.prototype.simpleCashPaymentEnable = function () {
        this.simplePaymentCtrl.enable();
    };
    SimpleCashPaymentComponent.prototype.getCashTypes = function () {
        return this.masterData.cashTypes;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], SimpleCashPaymentComponent.prototype, "simpleCashPaymentOptionChecked", void 0);
    SimpleCashPaymentComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-simple-cash-payment',
            template: __webpack_require__(/*! ./simple-cash-payment.component.html */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/simple-cash-payment/simple-cash-payment.component.html"),
            styles: [__webpack_require__(/*! ./simple-cash-payment.component.scss */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/simple-cash-payment/simple-cash-payment.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationProviderService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_9__["MasterdataService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"]])
    ], SimpleCashPaymentComponent);
    return SimpleCashPaymentComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/simple-cash-receipt/simple-cash-receipt.component.html":
/*!*****************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/simple-cash-receipt/simple-cash-receipt.component.html ***!
  \*****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div *ngFor=\"let cashType of cashTypes\">\r\n    <mat-checkbox #simpleCashReceiptTypeCtrl\r\n                  [formControl]=\"simpleCashReceiptCtrl\"\r\n                  [checked]=\"checked\"\r\n                  [value]=\"cashType.cashTypeId\"\r\n                  (change)=\"onChange($event,simpleCashReceiptTypeCtrl.checked,cashType)\">{{cashType.description}}\r\n    </mat-checkbox>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/simple-cash-receipt/simple-cash-receipt.component.scss":
/*!*****************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/simple-cash-receipt/simple-cash-receipt.component.scss ***!
  \*****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/simple-cash-receipt/simple-cash-receipt.component.ts":
/*!***************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-selection/simple-cash-receipt/simple-cash-receipt.component.ts ***!
  \***************************************************************************************************************************************/
/*! exports provided: SimpleCashReceiptComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SimpleCashReceiptComponent", function() { return SimpleCashReceiptComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/enums/cash-selection-type */ "./Client/app/shared/enums/cash-selection-type.ts");
/* harmony import */ var _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/enums/cash-type.enum */ "./Client/app/shared/enums/cash-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var SimpleCashReceiptComponent = /** @class */ (function (_super) {
    __extends(SimpleCashReceiptComponent, _super);
    function SimpleCashReceiptComponent(formConfigurationProvider, route, masterDataService, formBuilder, router) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.route = route;
        _this.masterDataService = masterDataService;
        _this.formBuilder = formBuilder;
        _this.router = router;
        _this.simpleCashReceiptOptionChecked = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.simpleCashReceiptCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('SimpleCashreceipt');
        _this.CashType = _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_7__["CashType"];
        _this.masterData = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__["MasterData"]();
        _this.cashTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('cashTypeId')));
        return _this;
    }
    SimpleCashReceiptComponent.prototype.ngOnInit = function () {
        this.company = this.route.snapshot.paramMap.get('company');
        this.masterData = this.route.snapshot.data.masterdata;
        this.cashTypes = this.masterData.cashTypes.filter(function (cashtype) { return cashtype.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_6__["CashSelectionType"].SimpleCashReceipt; });
        this.checked = false;
    };
    SimpleCashReceiptComponent.prototype.onChange = function ($event, value, cashTypes) {
        this.checked = Boolean(value);
        this.simpleCashReceiptOptionChecked.emit({
            simpleCashReceiptOption: Number(cashTypes.cashTypeId),
            checked: Boolean(value),
        });
    };
    SimpleCashReceiptComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            simpleCashReceiptCtrl: this.simpleCashReceiptCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    SimpleCashReceiptComponent.prototype.simpleCashReceiptDisable = function () {
        this.simpleCashReceiptCtrl.disable();
    };
    SimpleCashReceiptComponent.prototype.simpleCashReceiptEnable = function () {
        this.simpleCashReceiptCtrl.enable();
    };
    SimpleCashReceiptComponent.prototype.getCashTypes = function () {
        return this.masterData.cashTypes;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], SimpleCashReceiptComponent.prototype, "simpleCashReceiptOptionChecked", void 0);
    SimpleCashReceiptComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-simple-cash-receipt',
            template: __webpack_require__(/*! ./simple-cash-receipt.component.html */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/simple-cash-receipt/simple-cash-receipt.component.html"),
            styles: [__webpack_require__(/*! ./simple-cash-receipt.component.scss */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/simple-cash-receipt/simple-cash-receipt.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationProviderService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_9__["MasterdataService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"]])
    ], SimpleCashReceiptComponent);
    return SimpleCashReceiptComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-summary/cash-summary.component.html":
/*!************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-summary/cash-summary.component.html ***!
  \************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<ng-template #headerContent>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"start center\"\r\n         fxLayoutGap=\"1%\"\r\n         class=\"bottom-marge\">\r\n        <mat-card-title>\r\n            Cash {{docReference}}\r\n        </mat-card-title>\r\n        <mat-chip-list class=\"chip-list\">\r\n            <mat-chip *ngIf=\"showTraxStatus\"\r\n                      selected\r\n                      disabled\r\n                      matTooltip=\"Trax Status\"\r\n                      [ngClass]=\"isTraxStatusSuccess == true ? 'mat-approved': 'mat-error'\">\r\n                {{traxStatus}}\r\n            </mat-chip>\r\n            <mat-chip *ngIf=\"showPostingStatus\"\r\n                      selected\r\n                      disabled\r\n                      matTooltip=\"Posting Status\"\r\n                      [ngClass]=\"isPostingStatusSuccess == true ? 'mat-approved': 'mat-error'\">\r\n                {{postingStatus}}\r\n            </mat-chip>\r\n            <mat-chip *ngIf=\"showAccInterfaceStatus\"\r\n                      selected\r\n                      disabled\r\n                      matTooltip=\"Accounting Interface Status\"\r\n                      [ngClass]=\"isAccInterfaceStatusSuccess == 'true' ? 'mat-approved': 'mat-error'\">\r\n                {{accInterfaceStatus}}\r\n            </mat-chip>\r\n        </mat-chip-list>\r\n    </div>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"start center\"\r\n         fxLayoutGap=\"1%\">\r\n\r\n        <atlas-date-picker fxFlex=\"15%\"\r\n                           [fieldControl]=\"creationDateCtrl\"\r\n                           label=\"Created On\">\r\n        </atlas-date-picker>\r\n\r\n        <atlas-form-input fxFlex=\"15%\"\r\n                          [fieldControl]=\"createdByCtrl\"\r\n                          label=\"By\">\r\n        </atlas-form-input>\r\n    </div>\r\n</ng-template>\r\n\r\n<mat-card *ngIf=\"isCreationMode\"\r\n          class=\"card-header-luke\">\r\n    <ng-container *ngTemplateOutlet=\"headerContent\"></ng-container>\r\n</mat-card>\r\n\r\n<header *ngIf=\"!isCreationMode\"\r\n        class=\"header-background mat-elevation-z2\">\r\n    <div class=\"header-content\">\r\n        <ng-container *ngTemplateOutlet=\"headerContent\"></ng-container>\r\n    </div>\r\n</header>\r\n\r\n<atlas-floating-action-button [fabTitle]=\"fabTitle\"\r\n                              [fabType]=\"fabType\"\r\n                              [fabActions]=\"fabMenuActions\"\r\n                              [isParentLoaded]=\"!isLoading\"\r\n                              (fabActionClicked)=\"onFabActionClicked($event)\"\r\n                              *ngIf=\"!isCreationMode\">\r\n</atlas-floating-action-button>\r\n<div class=\"main-container\">\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"center center\"\r\n         fxLayoutWrap\r\n         *ngIf=\"isLoading\"\r\n         class=\"loading\">\r\n        <mat-spinner color=\"accent\"></mat-spinner>\r\n    </div>\r\n\r\n    <!--these css classes  \"warning-banner-card\" is already defined in common style class.-->\r\n    <div class=\"warning-banner-card\"\r\n         *ngIf=\"errorMessage\">\r\n        <mat-card class=\"cash-warning-card\">\r\n            <div class=\"warning-circle-icon\">\r\n                <mat-icon>warning_outline</mat-icon>\r\n            </div>\r\n            <mat-card-header>\r\n                <mat-card-title>\r\n                    <h4 class=\"no-margin\">Warning</h4>\r\n                </mat-card-title>\r\n                <mat-card-subtitle>\r\n                    {{errorMessage}}\r\n                </mat-card-subtitle>\r\n            </mat-card-header>\r\n        </mat-card>\r\n    </div>\r\n\r\n    <div fxLayout=\"row\"\r\n         fxLayout.md=\"column\"\r\n         fxLayoutAlign=\"space-around start\"\r\n         fxLayoutGap=\"20px\">\r\n        <div fxLayout=\"column\"\r\n             fxLayoutAlign=\"start left\"\r\n             fxFlex=\"50\">\r\n            <atlas-document-information #documentInformationFormComponent\r\n                                        [isSummary]='true'></atlas-document-information>\r\n        </div>\r\n        <div fxLayout=\"column\"\r\n             fxLayoutAlign=\"start right\"\r\n             fxFlex=\"50\">\r\n            <atlas-counterparty-card #counterpartyFormComponent></atlas-counterparty-card>\r\n\r\n            <atlas-currency-information-card [ngClass]=\"{'hidden-during-loading':isDifferentCurrencyoptionSelected()}\"\r\n                                             #currencyFormComponent></atlas-currency-information-card>\r\n\r\n            <atlas-bank-information #bankInformationComponent\r\n                                    *ngIf=\"cashTypeId==CashType.CashPayment\">\r\n            </atlas-bank-information>\r\n        </div>\r\n    </div>\r\n\r\n    <div fxLayout=\"column\"\r\n         fxLayoutAlign=\"start left\">\r\n        <atlas-additional-details #additionalDetailsFormComponent></atlas-additional-details>\r\n    </div>\r\n    <div fxLayout=\"column\"\r\n         fxLayoutAlign=\"start left\"\r\n         class=\"cost-style\">\r\n        <atlas-additional-costs #additionalCostsFormComponent></atlas-additional-costs>\r\n    </div>\r\n    <div fxLayout=\"column\"\r\n         fxLayoutAlign=\"start left\">\r\n        <atlas-invoice-grid-for-summary #invoiceGridForSummaryComponent></atlas-invoice-grid-for-summary>\r\n    </div>\r\n\r\n    <div fxLayout=\"row \"\r\n         fxLayoutAlign=\"right\">\r\n        <mat-slide-toggle [formControl]=\"urgentPaymentSummaryCtrl\"\r\n                          *ngIf=\"cashTypeId == CashType.CashPayment\"\r\n                          [checked]=\"disabled\">Urgent Payment</mat-slide-toggle>\r\n    </div>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"space-between\">\r\n        <div fxLayout=\"column\"\r\n             fxLayoutAlign=\"start\">\r\n            <mat-slide-toggle [disabled]=\"true\"\r\n                              [formControl]=\"authorizePostingCtrl\">\r\n                Authorize for posting\r\n            </mat-slide-toggle>\r\n        </div>\r\n\r\n        <div fxLayout=\"column\"\r\n             fxLayoutAlign=\"start\">\r\n            <mat-slide-toggle *ngIf=\"cashTypeId == CashType.CashPayment\"\r\n                              [disabled]=\"true\"\r\n                              [formControl]=\"transmitTreasuryCtrl\">\r\n                Transmit to treasury System\r\n            </mat-slide-toggle>\r\n        </div>\r\n\r\n        <atlas-lock-interval [resourcesInformation]=\"resourcesInformation\">\r\n        </atlas-lock-interval>\r\n    </div>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-summary/cash-summary.component.scss":
/*!************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-summary/cash-summary.component.scss ***!
  \************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".menu-bar {\n  margin-bottom: 30px; }\n\n.menu-bar-action-icon {\n  cursor: pointer;\n  background-color: #81cf5c;\n  border-radius: 50%;\n  width: 40px;\n  height: 40px;\n  text-align: center; }\n\n.white-icon {\n  color: white;\n  height: 24px;\n  width: 24px;\n  padding: 7px; }\n\n.cost-style {\n  padding: 10px 0px; }\n\n.main-container {\n  margin-top: 8px; }\n\nmat-card.cash-warning-card.mat-card {\n  padding: 0 !important;\n  min-height: 75px;\n  display: flex;\n  align-items: center; }\n\nmat-card.cash-warning-card.mat-card mat-card-header.mat-card-header mat-card-title.mat-card-title {\n    margin: 0;\n    padding: 8px 0; }\n\nmat-card.cash-warning-card.mat-card mat-card-header.mat-card-header h4 {\n    margin: 0; }\n\nmat-card.cash-warning-card.mat-card mat-card-header.mat-card-header mat-card-subtitle.mat-card-subtitle {\n    margin: 0; }\n\nheader .mat-card-title {\n  font-size: 16px;\n  margin-bottom: 0px; }\n\n.header-background {\n  min-height: 94px !important; }\n\n.header-content {\n  padding: 16px 30px 0px !important; }\n\n.bottom-marge {\n  margin-bottom: 6px; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-summary/cash-summary.component.ts":
/*!**********************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-summary/cash-summary.component.ts ***!
  \**********************************************************************************************************/
/*! exports provided: CashSummaryFormComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CashSummaryFormComponent", function() { return CashSummaryFormComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/services/authorization.service */ "./Client/app/core/services/authorization.service.ts");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _shared_components_floating_action_button_floating_action_button_type_enum__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../shared/components/floating-action-button/floating-action-button-type.enum */ "./Client/app/shared/components/floating-action-button/floating-action-button-type.enum.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../shared/entities/lock-functional-context.entity */ "./Client/app/shared/entities/lock-functional-context.entity.ts");
/* harmony import */ var _shared_entities_lock_resource_information_entity__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../shared/entities/lock-resource-information.entity */ "./Client/app/shared/entities/lock-resource-information.entity.ts");
/* harmony import */ var _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../shared/enums/cash-selection-type */ "./Client/app/shared/enums/cash-selection-type.ts");
/* harmony import */ var _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../shared/enums/cash-type.enum */ "./Client/app/shared/enums/cash-type.enum.ts");
/* harmony import */ var _shared_enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../shared/enums/interface-status.enum */ "./Client/app/shared/enums/interface-status.enum.ts");
/* harmony import */ var _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../shared/enums/permission-level.enum */ "./Client/app/shared/enums/permission-level.enum.ts");
/* harmony import */ var _shared_enums_posting_status_enum__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../shared/enums/posting-status.enum */ "./Client/app/shared/enums/posting-status.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../../shared/services/http-services/lock.service */ "./Client/app/shared/services/http-services/lock.service.ts");
/* harmony import */ var _shared_services_security_service__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../../shared/services/security.service */ "./Client/app/shared/services/security.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_title_service__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../../shared/services/title.service */ "./Client/app/shared/services/title.service.ts");
/* harmony import */ var _services_execution_actions_service__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../services/execution-actions.service */ "./Client/app/execution/services/execution-actions.service.ts");
/* harmony import */ var _cash_details_additional_costs_additional_costs_component__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../cash-details/additional-costs/additional-costs.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-costs/additional-costs.component.ts");
/* harmony import */ var _cash_details_additional_details_additional_details_component__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../cash-details/additional-details/additional-details.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-details/additional-details.component.ts");
/* harmony import */ var _cash_details_counterparty_card_counterparty_card_component__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../cash-details/counterparty-card/counterparty-card.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/counterparty-card/counterparty-card.component.ts");
/* harmony import */ var _cash_details_currency_information_card_currency_information_card_component__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../cash-details/currency-information-card/currency-information-card.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/currency-information-card/currency-information-card.component.ts");
/* harmony import */ var _cash_details_document_information_document_information_component__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../cash-details/document-information/document-information.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/document-information/document-information.component.ts");
/* harmony import */ var _invoice_grid_for_summary_invoice_grid_for_summary_component__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./invoice-grid-for-summary/invoice-grid-for-summary.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-summary/invoice-grid-for-summary/invoice-grid-for-summary.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
































var CashSummaryFormComponent = /** @class */ (function (_super) {
    __extends(CashSummaryFormComponent, _super);
    function CashSummaryFormComponent(formConfigurationProvider, snackbarService, dialog, formBuilder, route, executionService, router, companyManager, securityService, authorizationService, executionActionsService, lockService, titleService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.snackbarService = snackbarService;
        _this.dialog = dialog;
        _this.formBuilder = formBuilder;
        _this.route = route;
        _this.executionService = executionService;
        _this.router = router;
        _this.companyManager = companyManager;
        _this.securityService = securityService;
        _this.authorizationService = authorizationService;
        _this.executionActionsService = executionActionsService;
        _this.lockService = lockService;
        _this.titleService = titleService;
        _this.isCreationMode = false;
        _this.urgentPaymentSummaryCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_11__["AtlasFormControl"]('UrgentPaymentSummary');
        _this.formComponents = [];
        _this.subscriptions = [];
        _this.isEdit = false;
        _this.CashType = _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_15__["CashType"];
        _this.showCurrencyComponent = false;
        _this.hasCPTraxEditPrivilege = false;
        _this.canEdit = false;
        _this.canCreate = false;
        _this.destroy$ = new rxjs__WEBPACK_IMPORTED_MODULE_4__["Subject"]();
        _this.resourcesInformation = new Array();
        _this.traxStatusCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_11__["AtlasFormControl"]('TraxStatus');
        _this.interfaceStatusCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_11__["AtlasFormControl"]('InterfaceStatus');
        _this.postingStatusCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_11__["AtlasFormControl"]('PostingStatus');
        _this.transmitTreasuryCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_11__["AtlasFormControl"]('TransmitTreasury');
        _this.authorizePostingCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_11__["AtlasFormControl"]('AuthorizePosting');
        _this.creationDateCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_11__["AtlasFormControl"]('creationDate');
        _this.createdByCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_11__["AtlasFormControl"]('createdBy');
        _this.isLoading = false;
        _this.isCashReceipt = false;
        // properties for displaying cash details in header section
        _this.showTraxStatus = false;
        _this.showPostingStatus = false;
        _this.showAccInterfaceStatus = false;
        _this.fabMenuActions = [];
        _this.isLoaded = false;
        _this.cashTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('cashTypeId')));
        _this.company = _this.route.snapshot.paramMap.get('company');
        return _this;
    }
    CashSummaryFormComponent.prototype.ngOnInit = function () {
        this.isTraxStatusSuccess = false;
        this.isPostingStatusSuccess = false;
        this.isAccInterfaceStatusSuccess = false;
    };
    // tslint:disable-next-line:use-life-cycle-interface
    CashSummaryFormComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.cashSummaryFormGroup = this.formBuilder.group({
            counterpartyFormComponent: this.counterpartyFormComponent.getFormGroup(),
            additionalDetailsFormComponent: this.additionalDetailsFormComponent.getFormGroup(),
            documentInformationFormComponent: this.documentInformationFormComponent.getFormGroup(),
            additionalCostsFormComponent: this.additionalCostsFormComponent.getFormGroup(),
            invoiceGridForSummaryComponent: this.invoiceGridForSummaryComponent.getFormGroup(),
            currencyFormComponent: this.currencyFormComponent.getFormGroup(),
        });
        this.cashSummaryFormGroup.disable();
        this.urgentPaymentSummaryCtrl.disable();
        this.createdByCtrl.disable();
        this.creationDateCtrl.disable();
        this.formComponents.push(this.counterpartyFormComponent, this.documentInformationFormComponent, this.additionalDetailsFormComponent, this.additionalCostsFormComponent, this.invoiceGridForSummaryComponent, this.currencyFormComponent);
        this.securityService.isSecurityReady().subscribe(function () {
            _this.hasCPTraxEditPrivilege = _this.authorizationService.isPrivilegeAllowed(_this.company, 'CPTraxEdit');
        });
        this.cashId = Number(this.route.snapshot.paramMap.get('cashId'));
        if (this.cashId !== 0 && this.route.snapshot.url.length > 0
            && this.route.snapshot.url[1].path.toString() === 'display') {
            this.populateCashDetails();
        }
    };
    CashSummaryFormComponent.prototype.populateCashRecord = function (record) {
        var _this = this;
        this.model = record;
        this.isLoading = true;
        this.docReference = this.model.documentReference;
        this.titleService.setTitle(this.docReference + ' - Cash View');
        if (this.model.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_14__["CashSelectionType"].PaymentDifferentCurrency ||
            this.model.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_14__["CashSelectionType"].ReceiptDifferentCurrency) {
            this.docReference = this.docReference + ' / ' + this.model.matchedDocumentReference;
        }
        this.formComponents.forEach(function (comp) {
            comp.initForm(_this.model, false);
        });
        this.setAccountingLineTypeColumnVisibility();
        this.hideAmountInDifferentCurrencyColumn(this.model.childCashTypeId, this.model.currencyCode);
        this.disabled = this.model.urgentPayment;
        this.isLoading = false;
        this.authorizePostingCtrl.setValue(this.model.authorizedForPosting);
        this.transmitTreasuryCtrl.setValue(this.model.toTransmitToTreasury);
        this.urgentPaymentSummaryCtrl.setValue(this.model.urgentPayment);
        this.createdByCtrl.setValue(this.model.createdBy);
        this.creationDateCtrl.setValue(this.model.documentDate);
        this.bindDocumentStatusDetail(this.model);
    };
    CashSummaryFormComponent.prototype.populateCashDetails = function () {
        var _this = this;
        this.isLoading = true;
        this.subscriptions.push(this.executionService.getCashByCashId(this.cashId)
            .subscribe(function (data) {
            _this.model = data;
            _this.interfaceStatusCtrl.setValue(_this.getInterfaceStatus(_this.model.interfaceStatus));
            _this.traxStatusCtrl.setValue(_this.getTraxStatus(_this.model.traxStatus));
            _this.postingStatusCtrl.setValue(_this.getPostingStatus(_this.model.status));
            _this.authorizePostingCtrl.setValue(_this.model.authorizedForPosting);
            _this.transmitTreasuryCtrl.setValue(_this.model.toTransmitToTreasury);
            _this.createdByCtrl.setValue(_this.model.createdBy);
            _this.creationDateCtrl.setValue(_this.model.documentDate);
            _this.urgentPaymentSummaryCtrl.setValue(_this.model.urgentPayment);
            _this.cashTypeIdPrivilege = data.cashTypeId;
            if (_this.cashTypeIdPrivilege) {
                _this.isAuthorized();
            }
            _this.docReference = data.documentReference;
            _this.titleService.setTitle(_this.docReference + ' - Cash View');
            if (data.matchedDocumentReference) {
                _this.docReference = _this.docReference + ' / ' + data.matchedDocumentReference;
            }
            _this.formComponents.forEach(function (comp) {
                comp.initForm(data, _this.isEdit);
            });
            _this.setAccountingLineTypeColumnVisibility();
            _this.additionalCostsFormComponent.isPanelExpanded = false;
            _this.additionalDetailsFormComponent.isPanelExpanded = false;
            _this.hideAmountInDifferentCurrencyColumn(_this.model.cashTypeId, _this.model.currencyCode);
            _this.isLoading = false;
            _this.initFABActions();
            _this.bindDocumentStatusDetail(_this.model);
        }));
    };
    CashSummaryFormComponent.prototype.populateInvoiceGrid = function (record) {
        this.populateInvoiceRecordFromGrid(record, this.invoices);
    };
    CashSummaryFormComponent.prototype.populateInvoiceRecordFromGrid = function (summaryRecord, invoices) {
        if (summaryRecord) {
            this.invoiceGridForSummaryComponent.invoicesToBeSelectedForSummary(invoices, summaryRecord);
        }
        else {
            this.invoiceGridForSummaryComponent.showGrid = false;
        }
    };
    CashSummaryFormComponent.prototype.invoiceForSummaryStep = function (invoices) {
        this.invoices = invoices;
    };
    CashSummaryFormComponent.prototype.onEditClicked = function () {
        var _this = this;
        this.lockService.isLockedCashDocument(this.model.cashId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["takeUntil"])(this.destroy$)).subscribe(function (lock) {
            if (lock.isLocked) {
                _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_9__["ConfirmationDialogComponent"], {
                    data: {
                        title: 'Lock',
                        text: lock.message,
                        okButton: 'Got it',
                    },
                });
            }
            else {
                _this.executionActionsService.editCashSubject.next(_this.model);
            }
        });
    };
    CashSummaryFormComponent.prototype.onNewCashButtonClicked = function () {
        this.router.navigate(['/' + this.companyManager.getCurrentCompanyId() +
                '/execution/cash/new/' + encodeURIComponent(this.cashTypeId.toString())]);
    };
    CashSummaryFormComponent.prototype.onDeleteClicked = function () {
        var _this = this;
        this.lockService.isLockedCashDocument(this.model.cashId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["takeUntil"])(this.destroy$)).subscribe(function (lock) {
            if (lock.isLocked) {
                _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_9__["ConfirmationDialogComponent"], {
                    data: {
                        title: 'Lock',
                        text: lock.message,
                        okButton: 'Got it',
                    },
                });
            }
            else {
                _this.startLockRefresh(_this.model.cashId, _this.model.documentReference);
                _this.lockService.lockCashDocument(_this.model.cashId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_12__["LockFunctionalContext"].CashDocumentDeletion)
                    .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["takeUntil"])(_this.destroy$)).subscribe(function (lockState) {
                    var confirmDialog = _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_9__["ConfirmationDialogComponent"], {
                        data: {
                            title: 'Cash Deletion',
                            text: 'Deleting a cash is permanent. Do you wish to proceed?',
                            okButton: 'Delete anyway',
                            cancelButton: 'Cancel',
                        },
                    });
                    confirmDialog.afterClosed().subscribe(function (answer) {
                        _this.stopLockRefresh();
                        if (answer) {
                            _this.executionService.deleteCash(_this.model.cashId).subscribe(function () {
                                _this.snackbarService.informationSnackBar('Cash deleted successfully');
                                _this.router.navigate(['/' + _this.companyManager.getCurrentCompanyId() + '/execution/cash']);
                            });
                        }
                        else {
                            _this.snackbarService.throwErrorSnackBar('You cannot delete this cash');
                        }
                        _this.lockService.unlockCashDocument(_this.model.cashId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_12__["LockFunctionalContext"].CashDocumentDeletion)
                            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["takeUntil"])(_this.destroy$)).subscribe();
                    });
                });
            }
        });
    };
    CashSummaryFormComponent.prototype.isDifferentCurrencyoptionSelected = function () {
        if (this.model) {
            return (this.model.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_14__["CashSelectionType"].PaymentDifferentCurrency
                || this.model.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_14__["CashSelectionType"].ReceiptDifferentCurrency) ? false : true;
        }
    };
    CashSummaryFormComponent.prototype.setAccountingLineTypeColumnVisibility = function () {
        if (this.model.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_14__["CashSelectionType"].SimpleCashPayment
            || this.model.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_14__["CashSelectionType"].SimpleCashReceipt) {
            if (this.additionalCostsFormComponent.gridColumnApi) {
                this.additionalCostsFormComponent.gridColumnApi.setColumnVisible('accountLineType', false);
            }
        }
    };
    CashSummaryFormComponent.prototype.hideAmountInDifferentCurrencyColumn = function (id, currency) {
        if (id === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_14__["CashSelectionType"].PaymentDifferentCurrency
            || id === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_14__["CashSelectionType"].ReceiptDifferentCurrency) {
            if (this.invoiceGridForSummaryComponent.gridColumnApi) {
                this.invoiceGridForSummaryComponent.gridColumnApi.setColumnVisible('amountPaidInDiffCcy', true);
                // Add cash currency to the header like  "Amount Paid In Diff Ccy (AED)"
                this.invoiceGridForSummaryComponent.invoiceSummaryGridOptions.api.getColumnDef('amountPaidInDiffCcy').headerName
                    = 'Amount Paid in Diff CCY ( ' + currency + ' )';
            }
        }
    };
    CashSummaryFormComponent.prototype.isAuthorized = function () {
        var _this = this;
        if (this.model.status === _shared_enums_posting_status_enum__WEBPACK_IMPORTED_MODULE_18__["PostingStatus"].Posted) {
            this.canEdit = false;
        }
        else {
            this.securityService.isSecurityReady().subscribe(function () {
                _this.canEdit = false;
                _this.canCreate = false;
                var privilegeNameLevel2 = '';
                var privilegeNameLevel3 = '';
                switch (_this.cashTypeIdPrivilege) {
                    case 1:
                        privilegeNameLevel2 = 'CashPayment';
                        privilegeNameLevel3 = 'CPSIMPLE';
                        break;
                    case 2:
                        privilegeNameLevel2 = 'CashPayment';
                        privilegeNameLevel3 = 'CPPICKTX';
                        break;
                    case 3:
                        privilegeNameLevel2 = 'CashPayment';
                        privilegeNameLevel3 = 'CPDIFFCCY';
                        break;
                    case 4:
                        privilegeNameLevel2 = 'CashPayment';
                        privilegeNameLevel3 = 'CPDIFFCLI';
                        break;
                    case 5:
                        privilegeNameLevel2 = 'CashReceipt';
                        privilegeNameLevel3 = 'CRSIMPLE';
                        _this.isCashReceipt = true;
                        break;
                    case 6:
                        privilegeNameLevel2 = 'CashReceipt';
                        privilegeNameLevel3 = 'CRPICKTX';
                        _this.isCashReceipt = true;
                        break;
                    case 7:
                        privilegeNameLevel2 = 'CashReceipt';
                        privilegeNameLevel3 = 'CRDIFFCCY';
                        _this.isCashReceipt = true;
                        break;
                }
                if (_this.authorizationService.isPrivilegeAllowed(_this.company, 'Cash') &&
                    _this.authorizationService.isPrivilegeAllowed(_this.company, privilegeNameLevel2, _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_17__["PermissionLevels"].ReadWrite) &&
                    _this.authorizationService.isPrivilegeAllowed(_this.company, privilegeNameLevel3)) {
                    _this.canCreate = true;
                    if (_this.isCashReceipt) {
                        if (_this.model.status === _shared_enums_posting_status_enum__WEBPACK_IMPORTED_MODULE_18__["PostingStatus"].MappingError || _this.model.status === _shared_enums_posting_status_enum__WEBPACK_IMPORTED_MODULE_18__["PostingStatus"].Incomplete) {
                            _this.canEdit = true;
                        }
                    }
                    else {
                        // For cash payment, check trax
                        var traxReadOnly = true;
                        // If it's an error, it has not been transmitted to the bank, so you can modify; otherwise it's read-only
                        if (!_this.model.traxStatus
                            || _this.model.traxStatus === _shared_enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_16__["InterfaceStatus"].ReadyToTransmit
                            || _this.model.traxStatus === _shared_enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_16__["InterfaceStatus"].TransmitError
                            || _this.model.traxStatus === _shared_enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_16__["InterfaceStatus"].Error
                            || _this.model.traxStatus === _shared_enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_16__["InterfaceStatus"].Rejected) {
                            traxReadOnly = false;
                        }
                        if (!traxReadOnly || _this.hasCPTraxEditPrivilege) {
                            _this.canEdit = true;
                        }
                    }
                }
            });
        }
    };
    CashSummaryFormComponent.prototype.startLockRefresh = function (cashId, documentReference) {
        this.resourcesInformation = new Array();
        var resourceInformation = new _shared_entities_lock_resource_information_entity__WEBPACK_IMPORTED_MODULE_13__["LockResourceInformation"]();
        resourceInformation.resourceType = 'Cash Document';
        resourceInformation.resourceId = cashId;
        resourceInformation.resourceCode = documentReference;
        resourceInformation.needRefresh = true;
        this.resourcesInformation.push(resourceInformation);
    };
    CashSummaryFormComponent.prototype.stopLockRefresh = function () {
        this.resourcesInformation = new Array();
    };
    CashSummaryFormComponent.prototype.ngOnDestroy = function () {
        var _this = this;
        this.stopLockRefresh();
        this.lockService.cleanSessionLocks().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["takeUntil"])(this.destroy$)).subscribe(function () {
            _this.destroy$.next();
            _this.destroy$.complete();
        });
    };
    CashSummaryFormComponent.prototype.getInterfaceStatus = function (interfaceStatus) {
        switch (interfaceStatus) {
            case _shared_enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_16__["InterfaceStatus"].ReadyToTransmit:
                this.isAccInterfaceStatusSuccess = true;
                return 'Ready To Transmit';
                break;
            case _shared_enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_16__["InterfaceStatus"].StandBy:
                this.isAccInterfaceStatusSuccess = true;
                return 'Stand By';
                break;
            case _shared_enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_16__["InterfaceStatus"].TransmitError:
                this.isAccInterfaceStatusSuccess = false;
                return 'Transmit Error';
                break;
            case _shared_enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_16__["InterfaceStatus"].Interfaced:
                this.isAccInterfaceStatusSuccess = true;
                return 'Interfaced';
                break;
            case _shared_enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_16__["InterfaceStatus"].Error:
                this.isAccInterfaceStatusSuccess = false;
                return 'Error';
                break;
            case _shared_enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_16__["InterfaceStatus"].Rejected:
                this.isAccInterfaceStatusSuccess = false;
                return 'Rejected';
                break;
            case _shared_enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_16__["InterfaceStatus"].Signed:
                this.isAccInterfaceStatusSuccess = true;
                return 'Signed';
                break;
            case _shared_enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_16__["InterfaceStatus"].NotPosted:
                this.isAccInterfaceStatusSuccess = false;
                return 'NotPosted';
                break;
            default:
                return _shared_enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_16__["InterfaceStatus"][interfaceStatus];
                break;
        }
    };
    CashSummaryFormComponent.prototype.getTraxStatus = function (traxStatus) {
        switch (traxStatus) {
            case _shared_enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_16__["InterfaceStatus"].ReadyToTransmit:
                this.isTraxStatusSuccess = true;
                return 'Ready To Transmit';
                break;
            case _shared_enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_16__["InterfaceStatus"].StandBy:
                this.isTraxStatusSuccess = true;
                return 'Stand By';
                break;
            case _shared_enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_16__["InterfaceStatus"].TransmitError:
                this.isTraxStatusSuccess = false;
                return 'Transmit Error';
                break;
            case _shared_enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_16__["InterfaceStatus"].Interfaced:
                this.isTraxStatusSuccess = true;
                return 'Interfaced';
                break;
            case _shared_enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_16__["InterfaceStatus"].Error:
                this.isTraxStatusSuccess = false;
                return 'Error';
                break;
            case _shared_enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_16__["InterfaceStatus"].Rejected:
                this.isTraxStatusSuccess = false;
                return 'Rejected';
                break;
            case _shared_enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_16__["InterfaceStatus"].Signed:
                this.isTraxStatusSuccess = true;
                return 'Signed';
                break;
            default:
                return _shared_enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_16__["InterfaceStatus"][traxStatus];
                break;
        }
    };
    CashSummaryFormComponent.prototype.getPostingStatus = function (status) {
        switch (status) {
            case _shared_enums_posting_status_enum__WEBPACK_IMPORTED_MODULE_18__["PostingStatus"].Authorized:
                this.isPostingStatusSuccess = true;
                return 'Authorized';
                break;
            case _shared_enums_posting_status_enum__WEBPACK_IMPORTED_MODULE_18__["PostingStatus"].Deleted:
                this.isPostingStatusSuccess = true;
                return 'Deleted';
                break;
            case _shared_enums_posting_status_enum__WEBPACK_IMPORTED_MODULE_18__["PostingStatus"].Held:
                this.isPostingStatusSuccess = false;
                return 'Held';
                break;
            case _shared_enums_posting_status_enum__WEBPACK_IMPORTED_MODULE_18__["PostingStatus"].Incomplete:
                this.isPostingStatusSuccess = true;
                return 'Incomplete';
                break;
            case _shared_enums_posting_status_enum__WEBPACK_IMPORTED_MODULE_18__["PostingStatus"].MappingError:
                this.isPostingStatusSuccess = false;
                return 'MappingError';
                break;
            case _shared_enums_posting_status_enum__WEBPACK_IMPORTED_MODULE_18__["PostingStatus"].Posted:
                this.isPostingStatusSuccess = true;
                return 'Posted';
                break;
            default:
                return _shared_enums_posting_status_enum__WEBPACK_IMPORTED_MODULE_18__["PostingStatus"][status];
                break;
        }
    };
    CashSummaryFormComponent.prototype.bindDocumentStatusDetail = function (model) {
        // bind status details
        this.traxStatus = this.getTraxStatus(model.traxStatus);
        this.accInterfaceStatus = this.getInterfaceStatus(model.interfaceStatus);
        this.postingStatus = this.getPostingStatus(model.status);
        this.showTraxStatus = this.traxStatus ? true : false;
        this.showAccInterfaceStatus = this.accInterfaceStatus ? true : false;
        this.showPostingStatus = this.postingStatus ? true : false;
        this.errorMessage = model.interfaceErrorMessage ?
            model.interfaceErrorMessage : model.postingErrorMessage;
    };
    CashSummaryFormComponent.prototype.initFABActions = function () {
        this.fabTitle = 'Cash Mini FAB';
        this.fabType = _shared_components_floating_action_button_floating_action_button_type_enum__WEBPACK_IMPORTED_MODULE_10__["FABType"].MiniFAB;
        var actionNewCash = {
            icon: 'add',
            text: 'New',
            action: 'newCash',
            disabled: false,
            index: 0,
        };
        var actionEditCash = {
            icon: 'edit',
            text: 'Edit',
            action: 'editCash',
            disabled: false,
            index: 1,
        };
        var actionDeleteCash = {
            icon: 'delete',
            text: 'Delete',
            action: 'deleteCash',
            disabled: false,
            index: 2,
        };
        if (this.canCreate) {
            this.fabMenuActions.push(actionNewCash);
            if (this.canEdit) {
                this.fabMenuActions.push(actionEditCash);
                this.fabMenuActions.push(actionDeleteCash);
            }
        }
    };
    CashSummaryFormComponent.prototype.onFabActionClicked = function (action) {
        switch (action) {
            case 'newCash': {
                this.onNewCashButtonClicked();
                break;
            }
            case 'editCash': {
                this.onEditClicked();
                break;
            }
            case 'deleteCash': {
                this.onDeleteClicked();
                break;
            }
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('counterpartyFormComponent'),
        __metadata("design:type", _cash_details_counterparty_card_counterparty_card_component__WEBPACK_IMPORTED_MODULE_28__["CounterpartyFormComponent"])
    ], CashSummaryFormComponent.prototype, "counterpartyFormComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('additionalDetailsFormComponent'),
        __metadata("design:type", _cash_details_additional_details_additional_details_component__WEBPACK_IMPORTED_MODULE_27__["AdditionalDetailsFormComponent"])
    ], CashSummaryFormComponent.prototype, "additionalDetailsFormComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('documentInformationFormComponent'),
        __metadata("design:type", _cash_details_document_information_document_information_component__WEBPACK_IMPORTED_MODULE_30__["DocumentInformationFormComponent"])
    ], CashSummaryFormComponent.prototype, "documentInformationFormComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('invoiceGridForSummaryComponent'),
        __metadata("design:type", _invoice_grid_for_summary_invoice_grid_for_summary_component__WEBPACK_IMPORTED_MODULE_31__["InvoiceGridForSummaryComponent"])
    ], CashSummaryFormComponent.prototype, "invoiceGridForSummaryComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('additionalCostsFormComponent'),
        __metadata("design:type", _cash_details_additional_costs_additional_costs_component__WEBPACK_IMPORTED_MODULE_26__["AdditionalCostsFormComponent"])
    ], CashSummaryFormComponent.prototype, "additionalCostsFormComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('currencyFormComponent'),
        __metadata("design:type", _cash_details_currency_information_card_currency_information_card_component__WEBPACK_IMPORTED_MODULE_29__["CurrencyInformationCardComponent"])
    ], CashSummaryFormComponent.prototype, "currencyFormComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Boolean)
    ], CashSummaryFormComponent.prototype, "isCreationMode", void 0);
    CashSummaryFormComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-cash-summary-form-component',
            template: __webpack_require__(/*! ./cash-summary.component.html */ "./Client/app/execution/execution-cash/execution-cash-create/cash-summary/cash-summary.component.html"),
            styles: [__webpack_require__(/*! ./cash-summary.component.scss */ "./Client/app/execution/execution-cash/execution-cash-create/cash-summary/cash-summary.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_19__["FormConfigurationProviderService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_23__["SnackbarService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_20__["ExecutionService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_7__["CompanyManagerService"],
            _shared_services_security_service__WEBPACK_IMPORTED_MODULE_22__["SecurityService"],
            _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_6__["AuthorizationService"],
            _services_execution_actions_service__WEBPACK_IMPORTED_MODULE_25__["ExecutionActionsService"],
            _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_21__["LockService"],
            _shared_services_title_service__WEBPACK_IMPORTED_MODULE_24__["TitleService"]])
    ], CashSummaryFormComponent);
    return CashSummaryFormComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_8__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-summary/invoice-grid-for-summary/invoice-grid-for-summary.component.html":
/*!*************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-summary/invoice-grid-for-summary/invoice-grid-for-summary.component.html ***!
  \*************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card *ngIf=\"showGrid\"\r\n          fxFlex=100%\r\n          style=\"padding:20px;\">\r\n    <mat-card-header>\r\n        <mat-card-title>\r\n            <h2>Documents paid</h2>\r\n        </mat-card-title>\r\n    </mat-card-header>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"end center\">\r\n        <atlas-grid-enlargement *ngIf=\"invoiceSummaryGridOptions\"\r\n                                [gridOptions]=\"invoiceSummaryGridOptions\"\r\n                                [userPreferencesParameters]=\"gridPreferences\">\r\n        </atlas-grid-enlargement>\r\n\r\n    </div>\r\n\r\n    <div ag-grid=\"invoiceSummaryGridOptions\"\r\n         class=\"ag-theme-material pointer-cursor\">\r\n        <ag-grid-angular style=\" height:100%;\"\r\n                         class=\"ag-theme-material\"\r\n                         [columnDefs]=\"invoiceSummaryGridColumns\"\r\n                         [rowData]=\"invoiceSummaryGridRows\"\r\n                         [gridOptions]=\"invoiceSummaryGridOptions\"\r\n                         domLayout=\"autoHeight\"\r\n                         (gridReady)=\"onGridReady($event)\"\r\n                         rowSelection=\"multiple\"\r\n                         [singleClickEdit]=\"true\"\r\n                         [suppressRowClickSelection]=\"true\"\r\n                         [pagination]=\"true\"\r\n                         [paginationPageSize]=\"10\"\r\n                         [enableSorting]=\"true\"\r\n                         [enableColResize]=\"true\"\r\n                         enableFilter\r\n                         [rowHeight]=\"atlasAgGridParam.rowHeight\">\r\n        </ag-grid-angular>\r\n    </div>\r\n</mat-card>"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-summary/invoice-grid-for-summary/invoice-grid-for-summary.component.scss":
/*!*************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-summary/invoice-grid-for-summary/invoice-grid-for-summary.component.scss ***!
  \*************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/cash-summary/invoice-grid-for-summary/invoice-grid-for-summary.component.ts":
/*!***********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/cash-summary/invoice-grid-for-summary/invoice-grid-for-summary.component.ts ***!
  \***********************************************************************************************************************************************/
/*! exports provided: InvoiceGridForSummaryComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InvoiceGridForSummaryComponent", function() { return InvoiceGridForSummaryComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component */ "./Client/app/shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/enums/cash-selection-type */ "./Client/app/shared/enums/cash-selection-type.ts");
/* harmony import */ var _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/enums/cash-type.enum */ "./Client/app/shared/enums/cash-type.enum.ts");
/* harmony import */ var _shared_models_charter_display_view__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/models/charter-display-view */ "./Client/app/shared/models/charter-display-view.ts");
/* harmony import */ var _shared_pipes_format_date_pipe_pipe__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/pipes/format-date-pipe.pipe */ "./Client/app/shared/pipes/format-date-pipe.pipe.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_execution_dtos_cash_matching__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../shared/services/execution/dtos/cash-matching */ "./Client/app/shared/services/execution/dtos/cash-matching.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
/* harmony import */ var _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../services/execution-cash-common-methods */ "./Client/app/execution/services/execution-cash-common-methods.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};















var InvoiceGridForSummaryComponent = /** @class */ (function (_super) {
    __extends(InvoiceGridForSummaryComponent, _super);
    function InvoiceGridForSummaryComponent(formConfigurationProvider, formBuilder, route, router, formatDate, uiService, executionService, gridService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.formBuilder = formBuilder;
        _this.route = route;
        _this.router = router;
        _this.formatDate = formatDate;
        _this.uiService = uiService;
        _this.executionService = executionService;
        _this.gridService = gridService;
        _this.invoiceSummaryGridOptions = {};
        _this.isGroupingEnabled = false;
        _this.documentTypePI = 'PI';
        _this.documentTypeSI = 'SI';
        _this.showGrid = true;
        return _this;
    }
    InvoiceGridForSummaryComponent.prototype.ngOnInit = function () {
        this.atlasAgGridParam = this.gridService.getAgGridParam();
        this.cashTypeId = Number(this.route.snapshot.paramMap.get('cashTypeId'));
        this.cashOption = (this.cashTypeId === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_6__["CashType"].CashPayment ? true : false);
        this.initializeGridColumns();
        this.masterData = this.route.snapshot.data.masterdata;
    };
    InvoiceGridForSummaryComponent.prototype.onGridReady = function (params) {
        params.columnApi.autoSizeColumns();
        params.columnDefs = this.invoiceSummaryGridColumns;
        this.invoiceSummaryGridOptions = params;
        this.gridApi = params.api;
        this.gridColumnApi = params.columnApi;
        this.gridApi.showNoRowsOverlay();
        this.gridPreferences = null;
    };
    InvoiceGridForSummaryComponent.prototype.initializeGridColumns = function () {
        this.invoiceSummaryGridColumns = [
            {
                headerName: 'Document Reference',
                field: 'documentReference',
                colId: 'documentReference',
                pinned: 'left',
                hide: false,
            },
            {
                headerName: 'Secondary Document Reference',
                field: 'secondaryDocumentReference',
                colId: 'secondaryDocumentReference',
                hide: false,
            },
            {
                headerName: 'Document Date',
                field: 'documentDate',
                colId: 'documentDate',
                hide: false,
                valueFormatter: this.dateFormatter.bind(this),
            },
            {
                headerName: 'Value Date',
                field: 'valueDate',
                colId: 'valueDate',
                hide: false,
                valueFormatter: this.dateFormatter.bind(this),
            },
            {
                headerName: 'Department',
                field: 'departmentCode',
                colId: 'departmentCode',
                hide: false,
            },
            {
                headerName: 'External Reference',
                field: 'externalReference',
                colId: 'externalReference',
                hide: false,
            },
            {
                headerName: 'Narrative',
                field: 'narrative',
                colId: 'narrative',
                hide: false,
            },
            {
                headerName: 'Charter',
                field: 'charterCode',
                colId: 'charterCode',
                hide: false,
            },
            {
                headerName: 'Invoice Type',
                field: 'documentType',
                colId: 'documentType',
                hide: true,
            },
            {
                headerName: 'Amount',
                field: 'amount',
                type: 'numericColumn',
                colId: 'amount',
                hide: this.cashOption === false,
                valueGetter: this.getAmountValue,
                valueFormatter: this.amountFormatter.bind(this),
                pinned: 'right',
            },
            {
                headerName: 'Amount',
                field: 'amount',
                type: 'numericColumn',
                colId: 'amount',
                valueGetter: this.getAmountValueForReceipts,
                hide: this.cashOption === true,
                valueFormatter: this.amountFormatter.bind(this),
                pinned: 'right',
            },
            {
                headerName: 'Amount Paid',
                field: 'amountToBePaid',
                type: 'numericColumn',
                colId: 'amountToBePaid',
                hide: false,
                pinned: 'right',
                valueFormatter: this.amountFormatter.bind(this),
            },
            {
                headerName: 'Amount Paid in Diff CCY',
                field: 'amountPaidInDiffCcy',
                colId: 'amountPaidInDiffCcy',
                hide: true,
                valueFormatter: this.amountFormatter.bind(this),
                pinned: 'right',
            },
        ];
    };
    InvoiceGridForSummaryComponent.prototype.getAmountValueForReceipts = function (params) {
        var commonMethods = new _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_14__["CommonMethods"]();
        return params.data.amount *
            commonMethods.getSignedValueForDocumentAmountBasedOnDocumentTypeAndCostDirection(params.data.documentType, _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_6__["CashType"].CashReceipt, params.data, true);
    };
    InvoiceGridForSummaryComponent.prototype.getAmountValue = function (params) {
        var commonMethods = new _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_14__["CommonMethods"]();
        return params.data.amount *
            commonMethods.getSignedValueForDocumentAmountBasedOnDocumentTypeAndCostDirection(params.data.documentType, _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_6__["CashType"].CashPayment, params.data, true);
    };
    InvoiceGridForSummaryComponent.prototype.invoicesToBeSelected = function (invoices) {
        var _this = this;
        if (invoices.length > 0) {
            this.initializeGridColumns();
            var commonMethod_1 = new _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_14__["CommonMethods"]();
            // fetch charter details
            this.executionService.getCharters()
                .subscribe(function (charterdata) {
                if (charterdata.value) {
                    _this.charters = charterdata.value.map(function (charter) {
                        return new _shared_models_charter_display_view__WEBPACK_IMPORTED_MODULE_7__["CharterDisplayView"](charter);
                    });
                    invoices.forEach(function (item) {
                        item.charterCode = commonMethod_1.getCharterReferenceBasedOnIdFromCharterList(item.charterId, _this.charters);
                    });
                }
            });
            invoices.forEach(function (item) {
                item.departmentCode = commonMethod_1.getDepartmentCodeDescriptionBasedOnIdFromMasterData(item.departmentId, _this.masterData);
            });
            this.invoiceSummaryGridRows = invoices;
        }
    };
    InvoiceGridForSummaryComponent.prototype.dateFormatter = function (param) {
        if (param.value) {
            return this.formatDate.transform(param.value);
        }
    };
    InvoiceGridForSummaryComponent.prototype.amountFormatter = function (param) {
        if (param.value) {
            var commonMethods = new _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_14__["CommonMethods"]();
            return commonMethods.getFormattedNumberValue(param.value);
        }
    };
    InvoiceGridForSummaryComponent.prototype.invoicesToBeSelectedForSummary = function (invoices, summaryRecord) {
        this.invoiceSummaryGridRows = this.getInvoicesForSummary(summaryRecord);
        this.initializeGridColumnsFromSummary();
    };
    InvoiceGridForSummaryComponent.prototype.getInvoicesForSummary = function (summaryRecord) {
        var invoices = [];
        if (summaryRecord) {
            var invoice = new _shared_services_execution_dtos_cash_matching__WEBPACK_IMPORTED_MODULE_10__["CashMatching"]();
            invoice.documentReference = summaryRecord.documentReference;
            invoice.secondaryDocumentReference = summaryRecord.secondaryDocumentReference;
            invoice.documentDate = summaryRecord.documentDate;
            invoice.valueDate = summaryRecord.valueDate;
            invoice.documentNarrativeCode = summaryRecord.documentNarrativeCode;
            invoice.amount = summaryRecord.amount;
            invoice.amountToBePaid = summaryRecord.amountToBePaid;
            invoice.departmentId = summaryRecord.departmentId;
            invoice.currencyCode = summaryRecord.currencyCode;
            invoice.documentType = summaryRecord.documentType;
            invoices.push(invoice);
        }
        return invoices;
    };
    InvoiceGridForSummaryComponent.prototype.initializeGridColumnsFromSummary = function () {
        this.invoiceSummaryGridColumns = [
            {
                headerName: 'Document Reference',
                field: 'documentReference',
                colId: 'documentReference',
                hide: false,
            },
            {
                headerName: 'Secondary Document Reference',
                field: 'secondaryDocumentReference',
                colId: 'secondaryDocumentReference',
                hide: false,
            },
            {
                headerName: 'Document Date',
                field: 'documentDate',
                colId: 'documentDate',
                hide: false,
                valueFormatter: this.dateFormatter.bind(this),
            },
            {
                headerName: 'Value Date',
                field: 'valueDate',
                colId: 'valueDate',
                hide: false,
                valueFormatter: this.dateFormatter.bind(this),
            },
            {
                headerName: 'Department',
                field: 'departmentCode',
                colId: 'departmentCode',
                hide: false,
            },
            {
                headerName: 'External Reference',
                field: 'externalReference',
                colId: 'externalReference',
                hide: false,
            },
            {
                headerName: 'Narrative',
                field: 'narrative',
                colId: 'narrative',
                hide: false,
            },
            {
                headerName: 'Charter',
                field: 'charterCode',
                colId: 'charterCode',
                hide: false,
            },
            {
                headerName: 'Invoice Type',
                field: 'documentType',
                colId: 'documentType',
                hide: true,
            },
            {
                headerName: 'Amount',
                field: 'amount',
                colId: 'amount',
                hide: false,
                valueGetter: this.getAmountValue,
                valueFormatter: this.amountFormatter.bind(this),
                pinned: 'right',
            },
            {
                headerName: 'Amount Paid',
                field: 'amountToBePaid',
                colId: 'amountToBePaid',
                hide: false,
                valueFormatter: this.amountFormatter.bind(this),
                pinned: 'right',
            },
        ];
    };
    InvoiceGridForSummaryComponent.prototype.initForm = function (entity, isEdit) {
        if (!entity.documentMatchings ||
            (entity.documentMatchings && entity.documentMatchings.length === 0)) {
            this.showGrid = false;
        }
        else {
            if (entity.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_5__["CashSelectionType"].PaymentDifferentCurrency ||
                entity.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_5__["CashSelectionType"].ReceiptDifferentCurrency) {
                this.invoicesToBeSelected(this.calculateAmountToBePaidinDifferenceCurrency(entity));
            }
            else {
                this.invoicesToBeSelected(entity.documentMatchings);
            }
        }
        return entity;
    };
    InvoiceGridForSummaryComponent.prototype.calculateAmountToBePaidinDifferenceCurrency = function (values) {
        if (values.documentMatchings && values.documentMatchings.length > 0) {
            values.documentMatchings.forEach(function (item) { return item.amountPaidInDiffCcy =
                values.matchingRateType === 'M'
                    ? item.amountToBePaid * values.matchingRate
                    : item.amountToBePaid / values.matchingRate; });
        }
        return values.documentMatchings;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('userPreferences'),
        __metadata("design:type", _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_3__["AgGridUserPreferencesComponent"])
    ], InvoiceGridForSummaryComponent.prototype, "userPreferencesComponent", void 0);
    InvoiceGridForSummaryComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-invoice-grid-for-summary',
            template: __webpack_require__(/*! ./invoice-grid-for-summary.component.html */ "./Client/app/execution/execution-cash/execution-cash-create/cash-summary/invoice-grid-for-summary/invoice-grid-for-summary.component.html"),
            styles: [__webpack_require__(/*! ./invoice-grid-for-summary.component.scss */ "./Client/app/execution/execution-cash/execution-cash-create/cash-summary/invoice-grid-for-summary/invoice-grid-for-summary.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_11__["FormConfigurationProviderService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"],
            _shared_pipes_format_date_pipe_pipe__WEBPACK_IMPORTED_MODULE_8__["FormatDatePipe"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_13__["UiService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_12__["ExecutionService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_9__["AgGridService"]])
    ], InvoiceGridForSummaryComponent);
    return InvoiceGridForSummaryComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/execution-cash-create.component.html":
/*!********************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/execution-cash-create.component.html ***!
  \********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"main-container\"\r\n     *ngIf=\"cashTypeId==cashType.CashPayment\">\r\n    <mat-horizontal-stepper [linear]\r\n                            (selectionChange)=\"onChangeStepAction($event)\"\r\n                            #stepper>\r\n        <ng-template matStepperIcon=\"edit\">\r\n            <mat-icon>check</mat-icon>\r\n        </ng-template>\r\n        <mat-step>\r\n            <ng-template matStepLabel>Cash Type</ng-template>\r\n            <atlas-cash-selection-form-component #selectionFormComponent\r\n                                                 (checkBoxValueChange)=\"onCheckBoxValueChange($event)\"\r\n                                                 (cashOptionSelected)=\"onCashOptionSelected($event)\">\r\n            </atlas-cash-selection-form-component>\r\n            <div fxLayout=\"row \"\r\n                 fxLayoutAlign=\"space-between start\"\r\n                 class=\"button-details\">\r\n                <div fxLayout=\"column \"\r\n                     fxLayoutAlign=\"start \">\r\n                    <button (click)=\"onDiscardButtonClickedForCashSelectionType()\"\r\n                            mat-button>\r\n                        DISCARD\r\n                    </button>\r\n                </div>\r\n\r\n                <div fxLayout=\"column \"\r\n                     fxLayoutAlign=\"start \"\r\n                     matTooltip=\"Select the Cash Type\"\r\n                     [matTooltipDisabled]=\"!isDisabled\">\r\n                    <button mat-raised-button\r\n                            (click)=\"onPaymentNextButtonClicked()\"\r\n                            [disabled]=\"isDisabled\">\r\n                        NEXT\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </mat-step>\r\n        <div *ngIf=\"!isSimpleCashSelected\">\r\n            <mat-step [completed]=\"isCompleted\">\r\n                <ng-template matStepLabel>Pick Transaction</ng-template>\r\n                <atlas-pick-transaction #pickTransactionComponent\r\n                                        (setNarrative)=\"onSetNarrative($event)\"\r\n                                        (totalBalanceCalculated)=\"onTotalBalanceCalculated($event)\"\r\n                                        (cashDetailsDefaultValues)=\"onInvoiceSearchValuesEntered($event)\"\r\n                                        (invoicesSelected)=\"onInvoicesSelected($event)\"\r\n                                        (calculateTotalBalanceOnCostAmountEnter)=\"calculateTotalBalanceOnCostAmountEnter()\"\r\n                                        (AmountEnterOrInvoiceSelection)=\"onAmountEnterOrInvoiceSelection()\">\r\n                </atlas-pick-transaction>\r\n                <div fxLayout=\"row \"\r\n                     fxLayoutAlign=\"space-between start\"\r\n                     class=\"button-details\">\r\n                    <div fxLayout=\"column \"\r\n                         fxLayoutAlign=\"start \">\r\n                        <button (click)=\"onDiscardButtonClicked()\"\r\n                                mat-button>\r\n                            DISCARD\r\n                        </button>\r\n                    </div>\r\n                    <div fxLayout=\"column \"\r\n                         fxLayoutAlign=\"start \">\r\n                        <div fxLayout=\"row \"\r\n                             fxLayoutAlign=\"end start \">\r\n                            <button mat-button\r\n                                    (click)=\"onPreviousButtonClicked()\"\r\n                                    [disabled]=\"isPreviousButtonDisabled\">\r\n                                PREVIOUS\r\n                            </button>\r\n                            <button mat-raised-button\r\n                                    (click)=\"onMatchSelectedButtonClicked()\"\r\n                                    [disabled]=\"isDisabled\">\r\n                                NEXT\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </mat-step>\r\n        </div>\r\n        <mat-step [completed]=\"isCompleted\">\r\n            <form [formGroup] =\"cashFormGroup\">\r\n                <ng-template matStepLabel>Details</ng-template>\r\n                <atlas-cash-details-form-component #cashDetailsFormComponent\r\n                                                   (currencySearchValue)=\"onCurrencySearchValueEntered($event)\"\r\n                                                   (previewToggleSelected)=\"onPreviewToggleSelected($event)\"\r\n                                                   (templateSelected)=\"onTemplateSelected($event)\"\r\n                                                   (calculateTotalBalanceOnCostAmountEnter)=\"calculateTotalBalanceOnCostAmountEnterInCashDetails($event)\"\r\n                                                   (amountSearchValue)=\"onAmountSearchValueEntered($event)\"\r\n                                                   (calculateCashAmountWithoutCost)=\"onEditCalculateCashAmountWithoutCost($event)\">\r\n                </atlas-cash-details-form-component>\r\n                <div fxLayout=\"row \"\r\n                     fxLayoutAlign=\"space-between start\"\r\n                     class=\"button-details\">\r\n                    <div fxLayout=\"column\"\r\n                         fxLayoutAlign=\"start\">\r\n                        <button (click)=\"onDiscardButtonClicked()\"\r\n                                mat-button>\r\n                            DISCARD\r\n                        </button>\r\n                    </div>\r\n                    <div fxLayout=\"column\"\r\n                         fxLayoutAlign=\"start\">\r\n                        <div fxLayout=\"row \"\r\n                             fxLayoutAlign=\"end start \">\r\n                            <button mat-button\r\n                                    (click)=\"onPreviousButtonClicked()\"\r\n                                    [disabled]=\"saveInProgress\">\r\n                                PREVIOUS\r\n                            </button>\r\n                            <button mat-raised-button\r\n                                    (click)=\"onCreateButtonClicked()\"\r\n                                    [disabled]=\"saveInProgress\">\r\n                                {{ hasPreviewDocument ? 'Preview and save' : 'Save' }}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                </form>\r\n        </mat-step>\r\n        <mat-step>\r\n            <ng-template matStepLabel>Summary</ng-template>\r\n            <atlas-cash-summary-form-component #cashSummaryFormComponent\r\n                                               [isCreationMode]=\"isCreation\">\r\n            </atlas-cash-summary-form-component>\r\n            <div fxLayout=\"row \"\r\n                 fxLayoutAlign=\"space-between start\"\r\n                 class=\"button-details\">\r\n                <div fxLayout=\"column \"\r\n                     fxLayoutAlign=\"start\">\r\n                    <button (click)=\"onDiscardButtonClicked()\"\r\n                            mat-button>\r\n                        DISCARD\r\n                    </button>\r\n                </div>\r\n                <div fxLayout=\"column\"\r\n                     fxLayoutAlign=\"start\">\r\n                    <div fxLayout=\"row\"\r\n                         fxLayoutAlign=\"end start\">\r\n                        <button mat-button\r\n                                (click)=\"onNewTransactionClicked()\">\r\n                            NEW TRANSACTION\r\n                        </button>\r\n                        <button mat-raised-button\r\n                                (click)=\"onNewDocumentClicked()\">\r\n                            NEW DOCUMENT\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </mat-step>\r\n    </mat-horizontal-stepper>\r\n</div>\r\n\r\n\r\n<div class=\"main-container\"\r\n     *ngIf=\"cashTypeId==cashType.CashReceipt\">\r\n    <mat-horizontal-stepper [linear]\r\n                            (selectionChange)=\"onChangeStepAction($event)\"\r\n                            #stepper>\r\n        <ng-template matStepperIcon=\"edit\">\r\n            <mat-icon>check</mat-icon>\r\n        </ng-template>\r\n        <mat-step>\r\n            <ng-template matStepLabel>Cash Type</ng-template>\r\n            <atlas-cash-selection-form-component #selectionFormComponent\r\n                                                 (checkBoxValueChange)=\"onCheckBoxValueChange($event)\"\r\n                                                 (cashOptionSelected)=\"onCashOptionSelected($event)\">\r\n            </atlas-cash-selection-form-component>\r\n            <div fxLayout=\"row \"\r\n                 fxLayoutAlign=\"space-between start\"\r\n                 class=\"button-details\">\r\n                <div fxLayout=\"column \"\r\n                     fxLayoutAlign=\"start \">\r\n                    <button (click)=\"onDiscardButtonClickedForCashSelectionType()\"\r\n                            mat-button>\r\n                        DISCARD\r\n                    </button>\r\n                </div>\r\n                <div fxLayout=\"column \"\r\n                     fxLayoutAlign=\"start \"\r\n                     matTooltip=\"Select the Cash Type\"\r\n                     [matTooltipDisabled]=\"!isDisabled\">\r\n                    <button mat-raised-button\r\n                            (click)=\"onNextReceiptButtonClicked()\"\r\n                            [disabled]=\"isDisabled\">\r\n                        NEXT\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </mat-step>\r\n        <mat-step [completed]=\"isCompleted\">\r\n            <form [formGroup]=\"cashFormGroup\">\r\n                <ng-template matStepLabel>Details</ng-template>\r\n                <atlas-cash-details-form-component #cashDetailsFormComponent\r\n                                                   (counterpartySearchValues)=\"onCounterpartySearchValueEntered($event)\"\r\n                                                   (currencySearchValue)=\"onCurrencySearchValueEntered($event)\"\r\n                                                   (departmentSearchValue)=\"onDepartmentSearchValueEntered($event)\"\r\n                                                   (amountSearchValue)=\"onAmountSearchValueEntered($event)\"\r\n                                                   (currencyCardInitialValues)=\"onCurrencyCardValuesEntered($event)\"\r\n                                                   (currencyCardFinalRowType)=\"onFinalRoeTypeEntered($event)\"\r\n                                                   (fxRateValueCalculated)=\"onFinalFxRateValueEntered($event)\"\r\n                                                   (calculateTotalBalanceOnCostAmountEnter)=\"calculateTotalBalanceOnCostAmountEnterInCashDetails($event)\"\r\n                                                   (templateSelected)=\"onTemplateSelected($event)\"\r\n                                                   (previewToggleSelected)=\"onPreviewToggleSelected($event)\"\r\n                                                   (calculateCashAmountWithoutCost)=\"onEditCalculateCashAmountWithoutCost($event)\">\r\n                </atlas-cash-details-form-component>\r\n                <div fxLayout=\"row \"\r\n                     fxLayoutAlign=\"space-between start\"\r\n                     class=\"button-details\">\r\n                    <div fxLayout=\"column\"\r\n                         fxLayoutAlign=\"start\">\r\n                        <button (click)=\"onDiscardButtonClicked()\"\r\n                                mat-button>\r\n                            DISCARD\r\n                        </button>\r\n                    </div>\r\n                    <div fxLayout=\"column\"\r\n                         fxLayoutAlign=\"start\">\r\n                        <div fxLayout=\"row \"\r\n                             fxLayoutAlign=\"end start \">\r\n                            <button mat-button\r\n                                    (click)=\"onPreviousButtonClicked()\"\r\n                                    [disabled]=\"isPreviousButtonDisabled\">\r\n                                PREVIOUS\r\n                            </button>\r\n                            <button mat-raised-button\r\n                                    (click)=\"onNextButtonClicked()\"\r\n                                    [hidden]=\"selectionValue == cashSelectionType.SimpleCashReceipt\">\r\n                                NEXT\r\n                            </button>\r\n                            <button mat-raised-button\r\n                                    *ngIf=\"selectionValue == cashSelectionType.SimpleCashReceipt\"\r\n                                    (click)=\"onCreateButtonClicked()\"\r\n                                    [disabled]=\"saveInProgress\">\r\n                                {{ hasPreviewDocument ? 'Preview and save' : 'Save' }}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </mat-step>\r\n        <mat-step [completed]=\"isCompleted\">\r\n            <ng-template matStepLabel>Pick Transaction</ng-template>\r\n            <atlas-pick-transaction (proceedClickedCashReceipt)=\"onProceedClickedCashReceipt()\"\r\n                                    (invoicesSelected)=\"onInvoicesSelected($event)\"\r\n                                    (totalAmountCalculated)=\"onTotalAmountCalculated($event)\"\r\n                                    (calculateTotalBalanceOnCostAmountEnter)=\"calculateTotalBalanceOnCostAmountEnter($event)\"\r\n                                    (AmountEnterOrInvoiceSelection)=\"onAmountEnterOrInvoiceSelection()\"\r\n                                    #pickTransactionComponent></atlas-pick-transaction>\r\n            <div fxLayout=\"row \"\r\n                 fxLayoutAlign=\"space-between start\"\r\n                 class=\"button-details\">\r\n                <div fxLayout=\"column \"\r\n                     fxLayoutAlign=\"start \">\r\n                    <button (click)=\"onDiscardButtonClicked()\"\r\n                            mat-button>\r\n                        DISCARD\r\n                    </button>\r\n                </div>\r\n                <div fxLayout=\"column \"\r\n                     fxLayoutAlign=\"start \">\r\n                    <div fxLayout=\"row \"\r\n                         fxLayoutAlign=\"end start \">\r\n                        <button mat-button\r\n                                (click)=\"onPreviousButtonClicked()\"\r\n                                [disabled]=\"saveInProgress\">\r\n                            PREVIOUS\r\n                        </button>\r\n                        <button mat-raised-button\r\n                                (click)=\"onCreateReceiptButtonClicked()\"\r\n                                [disabled]=\"saveInProgress\">\r\n                            {{ hasPreviewDocument ? 'Preview and save' : 'Save' }}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </mat-step>\r\n        <mat-step>\r\n            <ng-template matStepLabel>Summary</ng-template>\r\n            <atlas-cash-summary-form-component #cashSummaryFormComponent\r\n                                               [isCreationMode]=\"isCreation\">\r\n            </atlas-cash-summary-form-component>\r\n            <div fxLayout=\"row \"\r\n                 fxLayoutAlign=\"space-between start\"\r\n                 class=\"button-details\">\r\n                <div fxLayout=\"column \"\r\n                     fxLayoutAlign=\"start\">\r\n                    <button (click)=\"onDiscardButtonClicked()\"\r\n                            mat-button>\r\n                        DISCARD\r\n                    </button>\r\n                </div>\r\n                <div fxLayout=\"column\"\r\n                     fxLayoutAlign=\"start\">\r\n                    <div fxLayout=\"row\"\r\n                         fxLayoutAlign=\"end start\">\r\n                        <button mat-button\r\n                                (click)=\"onNewTransactionClicked()\">\r\n                            NEW TRANSACTION </button>\r\n                        <button mat-raised-button\r\n                                (click)=\"onNewDocumentClicked()\">\r\n                            NEW DOCUMENT\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </mat-step>\r\n    </mat-horizontal-stepper>\r\n</div>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/execution-cash-create.component.scss":
/*!********************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/execution-cash-create.component.scss ***!
  \********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".mat-stepper-horizontal {\n  background-color: transparent; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/execution-cash-create.component.ts":
/*!******************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/execution-cash-create.component.ts ***!
  \******************************************************************************************************/
/*! exports provided: ExecutionCashCreateComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExecutionCashCreateComponent", function() { return ExecutionCashCreateComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/entities/window-injection-token */ "./Client/app/shared/entities/window-injection-token.ts");
/* harmony import */ var _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/enums/cash-selection-type */ "./Client/app/shared/enums/cash-selection-type.ts");
/* harmony import */ var _shared_enums_cash_stepper_type_enum__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../shared/enums/cash-stepper-type.enum */ "./Client/app/shared/enums/cash-stepper-type.enum.ts");
/* harmony import */ var _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../shared/enums/cash-type.enum */ "./Client/app/shared/enums/cash-type.enum.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_enums_document_entity_type_enum__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../shared/enums/document-entity-type.enum */ "./Client/app/shared/enums/document-entity-type.enum.ts");
/* harmony import */ var _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../shared/enums/document-type.enum */ "./Client/app/shared/enums/document-type.enum.ts");
/* harmony import */ var _shared_enums_generate_document_action_enum__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../shared/enums/generate-document-action.enum */ "./Client/app/shared/enums/generate-document-action.enum.ts");
/* harmony import */ var _shared_numberMask__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../shared/numberMask */ "./Client/app/shared/numberMask.ts");
/* harmony import */ var _shared_services_document_popup_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../shared/services/document-popup.service */ "./Client/app/shared/services/document-popup.service.ts");
/* harmony import */ var _shared_services_execution_dtos_cash_record__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../shared/services/execution/dtos/cash-record */ "./Client/app/shared/services/execution/dtos/cash-record.ts");
/* harmony import */ var _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../shared/services/http-services/document.service */ "./Client/app/shared/services/http-services/document.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_foreign_exchange_service__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../shared/services/http-services/foreign-exchange.service */ "./Client/app/shared/services/http-services/foreign-exchange.service.ts");
/* harmony import */ var _shared_services_http_services_preaccounting_service__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../shared/services/http-services/preaccounting.service */ "./Client/app/shared/services/http-services/preaccounting.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_title_service__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../shared/services/title.service */ "./Client/app/shared/services/title.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../services/execution-cash-common-methods */ "./Client/app/execution/services/execution-cash-common-methods.ts");
/* harmony import */ var _cash_details_additional_costs_additional_cost_list_display_view__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./cash-details/additional-costs/additional-cost-list-display-view */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-costs/additional-cost-list-display-view.ts");
/* harmony import */ var _cash_details_cash_details_component__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./cash-details/cash-details.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/cash-details.component.ts");
/* harmony import */ var _cash_dialog_component_cash_warning_dialog_component_cash_warning_dialog_component_component__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./cash-dialog-component/cash-warning-dialog-component/cash-warning-dialog-component.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-dialog-component/cash-warning-dialog-component/cash-warning-dialog-component.component.ts");
/* harmony import */ var _cash_selection_cash_selection_component__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./cash-selection/cash-selection.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/cash-selection.component.ts");
/* harmony import */ var _cash_summary_cash_summary_component__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./cash-summary/cash-summary.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-summary/cash-summary.component.ts");
/* harmony import */ var _pick_transaction_pick_transaction_component__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./pick-transaction/pick-transaction.component */ "./Client/app/execution/execution-cash/execution-cash-create/pick-transaction/pick-transaction.component.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};

































var ExecutionCashCreateComponent = /** @class */ (function () {
    function ExecutionCashCreateComponent(companyManager, cdr, route, router, formBuilder, executionService, snackbarService, preAccountingService, dialog, utilService, window, documentService, documentPopupService, foreignExchangeService, titleService) {
        this.companyManager = companyManager;
        this.cdr = cdr;
        this.route = route;
        this.router = router;
        this.formBuilder = formBuilder;
        this.executionService = executionService;
        this.snackbarService = snackbarService;
        this.preAccountingService = preAccountingService;
        this.dialog = dialog;
        this.utilService = utilService;
        this.window = window;
        this.documentService = documentService;
        this.documentPopupService = documentPopupService;
        this.foreignExchangeService = foreignExchangeService;
        this.titleService = titleService;
        this.postingWarning = 'Neither the "Authorize for Posting" nor "Transmit to Treasury System" toggle buttons are enabled.';
        this.formComponents = [];
        this.popupButtonSettings = {
            createButtonText: 'Create Payment Order without modification',
            uploadButtonText: 'Upload and create payment order',
            createButtonTooltip: 'Generate the cash from Atlas',
            uploadButtonTooltip: 'Create a cash from the file you edited and saved from your computer',
        };
        this.currentStep = 0;
        this.isValid = false;
        this.isDisabled = true;
        this.documentTypePI = 'PI';
        this.documentTypeSI = 'SI';
        this.cashSteps = {
            cashCreationStep: 0,
            pickTransactionStep: 1,
            cashDetailsStep: 2,
            cashSummaryStep: 3,
        };
        this.cashType = _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_11__["CashType"];
        this.cashSelectionType = _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"];
        this.mappingFields = new Array();
        this.isNewDoc = false;
        this.subscriptions = [];
        this.hasPreviewDocument = false;
        this.hasTemplate = false;
        this.isCreation = true;
        this.functionalStatutoryCurrencyRoeType = 'M';
        this.functionalStatutoryCurrenyRate = 1;
        this.isSave = false;
        this.isCompleted = false;
        this.isSimpleCashSelected = false;
        this.postingWarningForReceipts = '"Authorise for Posting" toggle button is not ticked';
        this.postingWarningTitle = 'Warning Message';
        this.postingWarningTitleForReceipts = 'Cash without authorization';
        this.postingWarningWhenBothbuttonEnabled = 'Both the "Authorize for Posting" and "Transmit to Treasury System" toggle buttons can not be enabled.';
    }
    ExecutionCashCreateComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.company = this.route.snapshot.paramMap.get('company');
        this.cashTypeId = Number(this.route.snapshot.paramMap.get('cashTypeId'));
        this.costDirectionId = this.cashTypeId;
        this.cashId = Number(this.route.snapshot.paramMap.get('cashId'));
        this.companyConfiguration = this.companyManager.getCompany(this.company);
        this.titleService.setTitle('Cash Creation');
        this.cashFormGroup = this.formBuilder.group({
            dummyFormControl: new _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormControl"](),
        });
        this.isPreviousButtonDisabled = false;
        this.getFxrateForFunctionalToStatutoryCurrencyConversion();
        this.masterdata = this.route.snapshot.data.masterdata;
        if (this.route.snapshot.url.length > 0 && this.route.snapshot.url[1].path.toString() === 'edit') {
            this.isEdit = true;
            this.populateCashDetails();
        }
        this.route.queryParams.subscribe(function (params) {
            _this.isNewDoc = (params['isNewDoc']);
            _this.selectionValue = params['selectedCashTypeId'];
        });
    };
    ExecutionCashCreateComponent.prototype.ngAfterViewInit = function () {
        this.cashFormGroup = this.formBuilder.group({
            selectionFormComponent: this.selectionFormComponent.getFormGroup(),
            cashDetailsFormComponent: this.cashDetailsFormComponent.getFormGroup(),
            pickTransactionComponent: this.pickTransactionComponent.getFormGroup(),
        });
        this.formComponents.push(this.selectionFormComponent, this.cashDetailsFormComponent, this.pickTransactionComponent);
        if (this.isNewDoc) {
            this.bindSelectedCashTypeForNewDocument();
        }
        this.cdr.detectChanges();
    };
    ExecutionCashCreateComponent.prototype.canDeactivate = function () {
        this.assignPickTransactionIfNull();
        if ((this.cashDetailsFormComponent.createCashCurrencyFormGroup.dirty
            || this.cashDetailsFormComponent.createCashFormGroup.dirty
            || this.pickTransactionComponent.pickTransactionFormGroup.dirty) && this.isSave === false) {
            return window.confirm('Leave an unsave form? \nYour changes won\'t be applied!');
        }
        return true;
    };
    ExecutionCashCreateComponent.prototype.unloadNotification = function ($event) {
        if ((this.cashDetailsFormComponent.createCashCurrencyFormGroup.dirty
            || this.cashDetailsFormComponent.createCashFormGroup.dirty
            || this.pickTransactionComponent.pickTransactionFormGroup.dirty) && this.isSave === false) {
            $event.returnValue = true;
        }
    };
    ExecutionCashCreateComponent.prototype.onChangeStepAction = function (event) {
        this.currentStep = event.selectedIndex;
    };
    ExecutionCashCreateComponent.prototype.assignPickTransactionIfNull = function () {
        if (!this.pickTransactionComponent) {
            this.pickTransactionComponent = this.pickTransactionComponentInitial;
        }
    };
    ExecutionCashCreateComponent.prototype.onCreateButtonClicked = function () {
        this.isSave = true;
        this.isCompleted = true;
        // Call service to create cash.
        if (this.isCashFormValid()
            && this.cashDetailsFormComponent.additionalCostsFormComponent.isAdditionalCostValid()) {
            if (this.hasTemplate && this.hasPreviewDocument) {
                this.createOrUpdateCash(true);
            }
            else {
                this.createOrUpdateCash();
            }
        }
        else {
            this.snackbarService.throwErrorSnackBar('Form is invalid. Please resolve the errors.');
        }
    };
    ExecutionCashCreateComponent.prototype.createOrUpdateCash = function (isDraft) {
        var _this = this;
        if (isDraft === void 0) { isDraft = false; }
        var cashRecord = this.generateCashRecord();
        if (this.isPostingAndTraxChecked(cashRecord)) {
            this.snackbarService.throwErrorSnackBar(this.postingWarningWhenBothbuttonEnabled);
            return;
        }
        else if (this.isPostingChecked(cashRecord) && !isDraft) {
            var dialog = this.showPostingWarning();
            dialog.afterClosed().subscribe(function (answer) {
                if (answer) {
                    _this.cashId ? _this.updateCash(cashRecord) : _this.createCash(cashRecord, isDraft);
                }
            });
        }
        else {
            this.cashId ? this.updateCash(cashRecord) : this.createCash(cashRecord, isDraft);
        }
    };
    ExecutionCashCreateComponent.prototype.showPostingWarning = function () {
        var dialog = this.dialog.open(_cash_dialog_component_cash_warning_dialog_component_cash_warning_dialog_component_component__WEBPACK_IMPORTED_MODULE_29__["CashWarningDialogComponentComponent"], {
            data: {
                title: this.postingWarningTitle,
                text: this.cashTypeId === this.cashType.CashPayment ? this.postingWarning : this.postingWarningForReceipts,
                okButton: 'Save Anyway',
                cancelButton: 'Discard',
                editButton: 'Edit Cash',
            },
        });
        return dialog;
    };
    ExecutionCashCreateComponent.prototype.isPostingChecked = function (cashRecord) {
        return (cashRecord.authorizedForPosting === false &&
            (cashRecord.toTransmitToTreasury === undefined || cashRecord.toTransmitToTreasury === false));
    };
    ExecutionCashCreateComponent.prototype.isPostingAndTraxChecked = function (cashRecord) {
        return (cashRecord.authorizedForPosting === true && cashRecord.toTransmitToTreasury === true);
    };
    ExecutionCashCreateComponent.prototype.createCash = function (cashRecord, isDraft) {
        var _this = this;
        if (isDraft === void 0) { isDraft = false; }
        this.saveInProgress = true;
        var dialog;
        var messageGenerating = 'Generating payment order' + (isDraft ? ' preview' : '') + '... Please wait.';
        if (isDraft) {
            dialog = this.documentPopupService.showDocumentGenerationPopup('Payment order', 'payment order', this.popupButtonSettings);
            if (this.isPostingChecked(cashRecord)) {
                dialog.componentInstance.bannerDescription = this.postingWarning;
            }
            this.documentPopupService.startDialogWork(dialog, messageGenerating);
        }
        else {
            this.snackbarService.informationSnackBar(messageGenerating);
        }
        cashRecord.isDraft = isDraft;
        this.executionService.createCash(cashRecord)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["mergeMap"])(function (cash) {
            var messageGenerated = (cash.physicalDocumentId ? 'Document' : 'Cash') + ' generated successfully';
            if (dialog) {
                dialog.componentInstance.processMessage = messageGenerated;
            }
            else {
                _this.snackbarService.informationSnackBar(messageGenerated);
            }
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["combineLatest"])((cash.physicalDocumentId) ?
                _this.documentService.getGeneratedDocumentContent(cash.physicalDocumentId, isDraft)
                : Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["of"])(null), Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["of"])(cash));
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["catchError"])(function (error) {
            if (dialog) {
                dialog.close();
            }
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["throwError"])(error);
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["finalize"])(function () {
            _this.saveInProgress = false;
            _this.documentPopupService.finishDialogWork(dialog);
        }))
            .subscribe(function (_a) {
            var _b = __read(_a, 2), response = _b[0], cash = _b[1];
            cash.documentMatchings = cashRecord.documentMatchings;
            if (!isDraft) {
                _this.afterCreateCash(cash);
            }
            else {
                _this.handleDialogEvents(cash, dialog);
            }
            if (response) {
                _this.downloadFile(response);
            }
        });
    };
    ExecutionCashCreateComponent.prototype.downloadFile = function (response) {
        var newBlob = new Blob([response.body], { type: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' });
        var data = this.window.URL.createObjectURL(newBlob);
        var link = document.createElement('a');
        link.href = data;
        link.download = this.utilService.getFileNameFromContentDisposition(response);
        link.click();
    };
    ExecutionCashCreateComponent.prototype.handleDialogEvents = function (cashRecord, dialog) {
        var _this = this;
        this.subscriptions.push(dialog.componentInstance.documentSelected
            .subscribe(function (file) {
            _this.onFileSelected(dialog, cashRecord, file);
        }));
        this.subscriptions.push(dialog.afterClosed()
            .subscribe(function (answer) {
            _this.onDialogClosed(answer);
        }));
    };
    ExecutionCashCreateComponent.prototype.onFileSelected = function (dialog, cashRecord, file) {
        var _this = this;
        this.documentPopupService.startDialogWork(dialog, 'Uploading document...');
        var documentType = this.mapCashSelectionTypeToPhysicalDocumentType(cashRecord.childCashTypeId);
        this.subscriptions.push(this.documentService.uploadDocument(cashRecord.cashId, documentType, cashRecord.template, true, file)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["mergeMap"])(function (document) {
            dialog.componentInstance.processMessage = 'Generating final document...';
            var finalCash = _this.generateCashRecord();
            finalCash.physicalDocumentId = document.physicalDocumentId;
            return _this.executionService.createCash(finalCash);
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["mergeMap"])(function (cash) {
            dialog.componentInstance.processMessage = 'Downloading final document...';
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["combineLatest"])(_this.documentService.getGeneratedDocumentContent(cash.physicalDocumentId), Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["of"])(cash));
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["finalize"])(function () {
            _this.documentPopupService.finishDialogWork(dialog);
        })).subscribe(function (_a) {
            var _b = __read(_a, 2), response = _b[0], cash = _b[1];
            cash.documentMatchings = cashRecord.documentMatchings;
            _this.downloadFile(response);
            _this.afterCreateCash(cash);
            dialog.close();
        }, function (error) {
            dialog.componentInstance.errorMessage = _this.documentPopupService.getErrorMessage(error, _shared_enums_document_entity_type_enum__WEBPACK_IMPORTED_MODULE_13__["DocumentEntityTypes"].Cash);
        }));
    };
    ExecutionCashCreateComponent.prototype.mapCashSelectionTypeToPhysicalDocumentType = function (cashSelectionType) {
        switch (cashSelectionType) {
            case _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].SimpleCashPayment:
            case _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].SimpleCashReceipt:
                return _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_14__["DocumentTypes"].CashSimpleCash;
            case _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].PaymentFullPartialTransaction:
            case _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptFullPartialTransaction:
                return _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_14__["DocumentTypes"].CashPickByTransaction;
            case _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].PaymentDifferentCurrency:
            case _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptDifferentCurrency:
                return _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_14__["DocumentTypes"].CashDifferentCurrency;
            case _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].PaymentDifferentClient:
                return _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_14__["DocumentTypes"].CashDifferentClient;
            default:
                console.error('Invalid cash selection type: %s', cashSelectionType);
        }
    };
    ExecutionCashCreateComponent.prototype.onDialogClosed = function (dialogAnswer) {
        if (dialogAnswer && dialogAnswer['buttonClicked']) {
            if (dialogAnswer['buttonClicked'] === _shared_enums_generate_document_action_enum__WEBPACK_IMPORTED_MODULE_15__["GenerateDocumentActions"].ConfirmDocumentGeneration) {
                var cashRecord = this.generateCashRecord();
                this.createCash(cashRecord);
            }
        }
    };
    ExecutionCashCreateComponent.prototype.generateCashRecord = function () {
        var cashRecord = new _shared_services_execution_dtos_cash_record__WEBPACK_IMPORTED_MODULE_18__["CashRecord"]();
        cashRecord.cashTypeId = this.cashTypeId;
        cashRecord.costDirectionId = this.cashTypeId;
        cashRecord.childCashTypeId = this.selectionValue;
        this.assignPickTransactionIfNull();
        var invoices = this.getSelectedInvoiceFromPickTransactionInvoiceList();
        cashRecord = this.getCreateCashInfo(cashRecord);
        cashRecord.ownerName = (this.cashTypeId === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_11__["CashType"].CashPayment ?
            cashRecord.payee : cashRecord.payer);
        cashRecord.nominalAccountCode = cashRecord.nominalAccountCode ? cashRecord.nominalAccountCode.toString() : '';
        // if cash is by diff ccy , assign cash ammount to MatchingAmount
        if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].PaymentDifferentCurrency) {
            // Consider ex  With diff ccy USD=>EUR
            // amount will be in EUR
            // MatchedAmount will be in USD
            cashRecord.matchingAmount = cashRecord.amount;
            // To convert from EUR to USD we need to do opposite action for RateType
            // If matchingRateType === 'D' than we need to multiplt rate*matchedamount and visa varsa
            cashRecord.amount = cashRecord.matchingRateType === 'D' ?
                Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_16__["ConvertToNumber"])(cashRecord.amount) * cashRecord.matchingRate
                : Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_16__["ConvertToNumber"])(cashRecord.amount) / cashRecord.matchingRate;
            // As per TDD in CashPayments , additionalcost amount need to be deducted with total amount
            if (cashRecord.additionalCostDetails && cashRecord.additionalCostDetails.length > 0) {
                var totalAdditonalCostAmount = cashRecord.additionalCostDetails
                    .map(function (c) { return c.amount; })
                    .reduce(function (sum, current) { return sum + current; });
                cashRecord.matchingAmount -= totalAdditonalCostAmount;
                totalAdditonalCostAmount = cashRecord.matchingRateType === 'D' ?
                    Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_16__["ConvertToNumber"])(totalAdditonalCostAmount) * cashRecord.matchingRate
                    : Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_16__["ConvertToNumber"])(totalAdditonalCostAmount) / cashRecord.matchingRate;
                cashRecord.amount -= totalAdditonalCostAmount;
            }
        }
        else if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptDifferentCurrency) {
            cashRecord.matchingAmount = cashRecord.amount;
            // convert payment currency amount to matchec ccy amount
            var matchedAmount = cashRecord.matchingRateType === 'D' ?
                Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_16__["ConvertToNumber"])(cashRecord.amount) * cashRecord.matchingRate
                : Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_16__["ConvertToNumber"])(cashRecord.amount) / cashRecord.matchingRate;
            cashRecord.amount = Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_16__["ConvertToNumber"])(matchedAmount);
        }
        return cashRecord;
    };
    ExecutionCashCreateComponent.prototype.updateCash = function (cashRecord) {
        var _this = this;
        // Call service to update cash.
        this.saveInProgress = true;
        cashRecord.cashId = this.cashId;
        cashRecord.transactionDocumentId = this.transactionDocumentId;
        cashRecord.documentReference = this.documentReferenceNumber;
        cashRecord.matchedDocumentReference = this.matchedDocumentReference;
        cashRecord.matchingCashId = this.matchingChashId; // for different CCY
        this.saveCashSubscription = this.executionService.updateCash(cashRecord)
            .subscribe(function (data) {
            _this.snackbarService.informationAndCopySnackBar('Cash with document reference : ' + _this.documentReferenceNumber + ' is updated', _this.documentReferenceNumber);
            cashRecord.cashTypeId = _this.selectionValue;
            _this.cashSummaryFormComponent.populateCashRecord(cashRecord);
            if (_this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].SimpleCashReceipt) {
                _this.stepper.selectedIndex = _shared_enums_cash_stepper_type_enum__WEBPACK_IMPORTED_MODULE_10__["CashStepperType"].ReceiptSummary;
            }
            else {
                _this.stepper.next();
            }
        }, function (error) {
            _this.saveInProgress = false;
            _this.snackbarService.throwErrorSnackBar('Oops! An error ocurred');
        }, function () {
            _this.saveInProgress = false;
        });
    };
    ExecutionCashCreateComponent.prototype.afterCreateCash = function (localCashRecord) {
        var _this = this;
        var cashIdToLoad = localCashRecord.cashId;
        // In case of diff ccy, we load the payment cash
        if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].PaymentDifferentCurrency ||
            this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptDifferentCurrency) {
            cashIdToLoad = localCashRecord.paymentCashId;
        }
        this.subscriptions.push(this.executionService.getCashByCashId(cashIdToLoad)
            .subscribe(function (cashRecord) {
            cashRecord.costAlternativeCode = localCashRecord.costAlternativeCode;
            cashRecord.departmentAlternativeCode = localCashRecord.departmentAlternativeCode;
            cashRecord.c2CCode = localCashRecord.c2CCode;
            cashRecord.nominalAlternativeAccount = localCashRecord.nominalAlternativeAccount;
            cashRecord.taxInterfaceCode = localCashRecord.taxInterfaceCode;
            if ((cashRecord.costAlternativeCode && cashRecord.departmentAlternativeCode && cashRecord.nominalAlternativeAccount
                && cashRecord.c2CCode) || !cashRecord.authorizedForPosting) {
                if (cashRecord.matchedDocumentReference !== null) {
                    _this.snackbarService.informationAndCopySnackBar('Cash created with document reference: '
                        + cashRecord.documentReference + '/' + cashRecord.matchedDocumentReference, cashRecord.documentReference + '/' + cashRecord.matchedDocumentReference);
                }
                else {
                    _this.snackbarService.informationAndCopySnackBar('Cash created with document reference: ' + cashRecord.documentReference, cashRecord.documentReference);
                }
            }
            else {
                if (!cashRecord.costAlternativeCode) {
                    _this.mappingFields.push('"Cost Alternative Code"');
                }
                if (!cashRecord.departmentAlternativeCode) {
                    _this.mappingFields.push('"Department Alternative Code"');
                }
                if (!cashRecord.nominalAlternativeAccount) {
                    _this.mappingFields.push('"Nominal Account"');
                }
                // tax code implementation is not there currently
                // if (!cashRecord.taxInterfaceCode) {
                //     this.mappingFields.push('"Tax Code"');
                // }
                if (!cashRecord.c2CCode) {
                    _this.mappingFields.push('"C2C code"');
                }
                var mappingErrorFields = _this.mappingFields.join(', ');
                var message = 'The document ' + cashRecord.documentReference +
                    ' will not be sent to the accounting interface because the accounting interface code for ' + mappingErrorFields
                    + ' is/are not filled in. Please contact the accountant';
                _this.snackbarService.informationAndCopySnackBar(message, message);
            }
            _this.cashSummaryFormComponent.populateCashRecord(cashRecord);
            if (_this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].SimpleCashReceipt) {
                _this.stepper.selectedIndex = _shared_enums_cash_stepper_type_enum__WEBPACK_IMPORTED_MODULE_10__["CashStepperType"].ReceiptSummary;
            }
            else {
                _this.stepper.next();
            }
        }));
    };
    ExecutionCashCreateComponent.prototype.isCashFormValid = function () {
        if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptDifferentCurrency
            || this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].PaymentDifferentCurrency) {
            if (this.cashDetailsFormComponent.createCashFormGroup.valid) {
                return true;
            }
        }
        else {
            if (this.cashDetailsFormComponent.createCashFormGroup.valid) {
                return true;
            }
        }
    };
    ExecutionCashCreateComponent.prototype.onNewDocumentClicked = function () {
        this.isSave = true;
        this.router.navigate(['/' + this.companyManager.getCurrentCompanyId() +
                '/execution/cash/new/' + encodeURIComponent(this.cashTypeId.toString())], {
            queryParams: {
                selectedCashTypeId: this.selectionValue,
                isNewDoc: true,
            },
        });
    };
    ExecutionCashCreateComponent.prototype.onNewTransactionClicked = function () {
        this.isSave = true;
        this.router.navigate(['/' + this.companyManager.getCurrentCompanyId() +
                '/execution/cash/new/' + encodeURIComponent(this.cashTypeId.toString())]);
    };
    ExecutionCashCreateComponent.prototype.onInvoicesSelected = function (invoicesSelected) {
        this.isValid = invoicesSelected;
        this.isDisabled = !this.isValid;
        var invoices = this.getSelectedInvoiceFromPickTransactionInvoiceList();
        this.calculateBalanceWithCost(invoices);
    };
    ExecutionCashCreateComponent.prototype.getCreateCashInfo = function (cashRecord) {
        var cash = new _shared_services_execution_dtos_cash_record__WEBPACK_IMPORTED_MODULE_18__["CashRecord"]();
        if (cashRecord) {
            cash = cashRecord;
        }
        this.formComponents.forEach(function (comp) {
            cash = comp.populateEntity(cash);
        });
        // add functionalcurrencycode and statutorycurrencycode based on company configration.
        cash.functionalCurrencyCode = this.companyConfiguration.functionalCurrencyCode;
        cash.statutoryCurrencyCode = this.companyConfiguration.statutoryCurrencyCode;
        cash.functionalToStatutoryCurrencyRoeType = this.functionalStatutoryCurrencyRoeType;
        cash.functionalToStatutoryCurrenyRate = this.functionalStatutoryCurrenyRate;
        return cash;
    };
    ExecutionCashCreateComponent.prototype.onDiscardButtonClicked = function () {
        var _this = this;
        this.isSave = true;
        var confirmDiscardDialog = this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_7__["ConfirmationDialogComponent"], {
            data: {
                title: 'Discard Changes',
                text: 'You have some modification pending. Close and lose changes?',
                okButton: 'Ok',
                cancelButton: 'Cancel',
            },
        });
        confirmDiscardDialog.afterClosed().subscribe(function (answer) {
            if (answer) {
                _this.router.navigate(['/' + _this.companyManager.getCurrentCompanyId() + '/execution/cash']);
            }
        });
    };
    ExecutionCashCreateComponent.prototype.onDiscardButtonClickedForCashSelectionType = function () {
        this.isSave = true;
        this.router.navigate(['/' + this.companyManager.getCurrentCompanyId() + '/execution/cash']);
    };
    ExecutionCashCreateComponent.prototype.onPreviousButtonClicked = function () {
        this.isSave = true;
        this.isCompleted = false;
        this.isDisabled = false;
        if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].SimpleCashPayment) {
            this.stepper.selectedIndex = _shared_enums_cash_stepper_type_enum__WEBPACK_IMPORTED_MODULE_10__["CashStepperType"].PaymentCashType;
        }
        else if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].SimpleCashReceipt) {
            this.stepper.selectedIndex = _shared_enums_cash_stepper_type_enum__WEBPACK_IMPORTED_MODULE_10__["CashStepperType"].ReceiptCashType;
        }
        else {
            this.stepper.previous();
        }
    };
    ExecutionCashCreateComponent.prototype.onCheckBoxValueChange = function (value) {
        this.isDisabled = value;
    };
    ExecutionCashCreateComponent.prototype.onCashOptionSelected = function (option) {
        this.selectionValue = option.option;
        this.isDisabled = !option.checked;
    };
    ExecutionCashCreateComponent.prototype.onPaymentNextButtonClicked = function () {
        // clear grid data
        this.cashDetailsFormComponent.bindSelectedValue(this.selectionValue);
        this.cashDetailsFormComponent.documentInformationFormComponent.filterCurrencies();
        this.pickTransactionComponent.clearControls();
        this.pickTransactionComponent.bindSelectedValue(this.selectionValue);
        this.pickTransactionComponent.invoiceMatchingComponent.filterCurrencies();
        this.pickTransactionComponent.invoiceMatchingComponent.selectedValue = this.selectionValue;
        this.pickTransactionComponent.invoiceMatchingComponent.setSearchFieldsSize();
        if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].SimpleCashPayment) {
            this.pickTransactionComponentInitial = this.pickTransactionComponent;
            this.isSimpleCashSelected = true;
            this.stepper.next();
        }
        else {
            this.isSimpleCashSelected = false;
            this.stepper.next();
        }
        this.cashDetailsFormComponent.bindSelectedValue(this.selectionValue);
        if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].SimpleCashPayment) {
            if (this.cashDetailsFormComponent.additionalCostsFormComponent.gridColumnApi) {
                this.cashDetailsFormComponent.additionalCostsFormComponent.gridColumnApi.setColumnVisible('accountLineType', false);
            }
        }
        if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].PaymentDifferentCurrency) {
            if (this.pickTransactionComponent.invoiceMatchingComponent.gridColumnApi) {
                this.pickTransactionComponent.invoiceMatchingComponent.gridColumnApi.setColumnVisible('amountPaidInDiffCcy', true);
            }
        }
    };
    ExecutionCashCreateComponent.prototype.onNextReceiptButtonClicked = function () {
        if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptDifferentCurrency ||
            this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptFullPartialTransaction) {
            this.cashDetailsFormComponent.additionalCostsFormComponent.showGrid = false;
            this.pickTransactionComponent.additionalCostsPickTransactionComponent.showGrid = true;
        }
        else {
            this.cashDetailsFormComponent.additionalCostsFormComponent.showGrid = true;
            this.pickTransactionComponent.additionalCostsPickTransactionComponent.showGrid = false;
        }
        this.cashDetailsFormComponent.bindSelectedValue(this.selectionValue);
        this.cashDetailsFormComponent.documentInformationFormComponent.filterCurrencies();
        if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].SimpleCashReceipt) {
            if (this.cashDetailsFormComponent.additionalCostsFormComponent.gridColumnApi) {
                this.cashDetailsFormComponent.additionalCostsFormComponent.gridColumnApi.setColumnVisible('accountLineType', false);
            }
        }
        if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptDifferentCurrency) {
            this.cashDetailsFormComponent.documentInformationFormComponent.isDiffCurrency = true;
            this.cashDetailsFormComponent.updateValidatorForAmount();
        }
        else {
            this.cashDetailsFormComponent.documentInformationFormComponent.isDiffCurrency = false;
            this.cashDetailsFormComponent.updateValidatorForAmount();
        }
        this.pickTransactionComponent.additionalCostsPickTransactionComponent.selectionValue = this.selectionValue;
        this.pickTransactionComponent.invoiceMatchingComponent.setSearchFieldsSize();
        this.stepper.next();
    };
    ExecutionCashCreateComponent.prototype.validateFxRate = function () {
        return this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptDifferentCurrency
            ? this.cashDetailsFormComponent.currencyFormComponent.isFxRateValid ? true : false
            : true;
    };
    ExecutionCashCreateComponent.prototype.onNextButtonClicked = function () {
        this.isSave = true;
        this.isCompleted = true;
        var currentDetails = this.cashDetailsFormComponent.getInvoiceSearchValues();
        var isDetailsChanged = this.isDetailsChanged(currentDetails);
        this.saveCurrentDetails(isDetailsChanged, currentDetails);
        var isSearchRequired = this.pickTransactionComponent.invoiceMatchingComponent.isSearchRequired();
        if (this.isCashFormValid()
            && this.validateFxRate()) {
            if ((isDetailsChanged || isSearchRequired)) {
                this.pickTransactionComponent.invoiceMatchingComponent.bindCurrencyValue(this.cashDetailsFormComponent.documentInformationFormComponent.currencyCtrl.value);
                this.pickTransactionComponent.bindSelectedValue(this.selectionValue);
                this.pickTransactionComponent.invoiceMatchingComponent.selectedValue = this.selectionValue;
                this.pickTransactionComponent.invoiceMatchingComponent.cashTypeId = this.cashTypeId;
                this.pickTransactionComponent.invoiceMatchingComponent.setSearchFieldsSize();
                var isDifferentCurrency = this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptDifferentCurrency
                    ? true : false;
                if (this.pickTransactionComponent.invoiceMatchingComponent.gridColumnApi) {
                    this.pickTransactionComponent.invoiceMatchingComponent.gridColumnApi
                        .setColumnVisible('amountPaidInDiffCcy', isDifferentCurrency);
                }
                if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].SimpleCashReceipt) {
                    this.stepper.selectedIndex = _shared_enums_cash_stepper_type_enum__WEBPACK_IMPORTED_MODULE_10__["CashStepperType"].ReceiptSummary;
                }
                else {
                    this.stepper.next();
                }
                // check whther the previously selected counterparty , currency and amount are assigned .
                var previousCounterpartyCode = this.pickTransactionComponent.invoiceMatchingComponent.previousCounterpartyCode;
                var previousCurrencyCode = this.pickTransactionComponent.invoiceMatchingComponent.previousCurrencyCode;
                var previousPaymentCurrency = null;
                var previousFxRateValue = null;
                if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptDifferentCurrency) {
                    previousPaymentCurrency = this.pickTransactionComponent.invoiceMatchingComponent.previousPaymentCurrency;
                    previousFxRateValue = this.pickTransactionComponent.invoiceMatchingComponent.previousFxRateValue;
                }
                if (previousCounterpartyCode || previousCurrencyCode ||
                    previousPaymentCurrency || previousFxRateValue) {
                    // if matching  conditions are modified
                    if (previousCounterpartyCode !==
                        this.pickTransactionComponent.invoiceMatchingComponent.counterpartyCtrl.value
                        || previousCurrencyCode !==
                            this.pickTransactionComponent.invoiceMatchingComponent.currencyCtrl.value
                        ||
                            ((this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptDifferentCurrency) && (previousPaymentCurrency !==
                                this.pickTransactionComponent.invoiceMatchingComponent.bankCurrencyCtrl.value
                                || previousFxRateValue !==
                                    this.pickTransactionComponent.invoiceMatchingComponent.fxRateCtrl.value))) {
                        if (!this.isEdit) {
                            this.pickTransactionComponent.clearAdditonalCostGrid();
                        }
                        // than clear previous selection
                        this.pickTransactionComponent.invoiceMatchingComponent.isInvoiceSelected = false;
                        this.pickTransactionComponent.invoiceMatchingComponent.onSearchButtonClicked();
                    }
                }
                else {
                    this.pickTransactionComponent.invoiceMatchingComponent.isInvoiceSelected = false;
                    this.pickTransactionComponent.invoiceMatchingComponent.onSearchButtonClicked();
                }
                // if amount is changes than re calculate the amount based on invoices selected.
                var previousAmount = this.pickTransactionComponent.invoiceMatchingComponent.previousAmount;
                if (previousAmount) {
                    if (previousAmount !== this.pickTransactionComponent.invoiceMatchingComponent.totalAmount) {
                        this.pickTransactionComponent.invoiceMatchingComponent.
                            reCalculateTotalAmountBasedonUpdatedAmountValue();
                    }
                }
                // bind currency component from document information card to invoicemarkingcard.
                this.cashDetailsFormComponent.bindSelectedValue(this.selectionValue);
            }
            else {
                if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].SimpleCashReceipt) {
                    this.stepper.selectedIndex = _shared_enums_cash_stepper_type_enum__WEBPACK_IMPORTED_MODULE_10__["CashStepperType"].ReceiptSummary;
                }
                else {
                    this.stepper.next();
                }
            }
        }
        else {
            this.snackbarService.throwErrorSnackBar('Form is invalid. Please resolve the errors.');
        }
    };
    // Cash Payment
    ExecutionCashCreateComponent.prototype.onMatchSelectedButtonClicked = function () {
        this.isSave = true;
        this.isCompleted = true;
        this.pickTransactionComponent.invoiceMatchingComponent.selectedValue = this.selectionValue;
        if (this.isValid) {
            if (this.isValidInvoiceList()) {
                if (this.pickTransactionComponent.additionalCostsPickTransactionComponent.isAdditionalCostValid()) {
                    this.InvoicesSelected();
                    var departmentId = this.getDepartmentIdFromSelectedInvoices();
                    if (this.totalbalance['balance']['value'] < 0) {
                        this.cashDetailsFormComponent.currencyFormComponent.amount = -(this.totalbalance['balance']['value']);
                        this.cashDetailsFormComponent.documentInformationFormComponent.bindDocumentValues();
                        this.cashDetailsFormComponent.counterpartyFormComponent.bindCounterpartyValues();
                        this.cashDetailsFormComponent.currencyFormComponent.bindCurrencyValues();
                        this.cashDetailsFormComponent.additionalCostsFormComponent.showGrid = false;
                        this.cashDetailsFormComponent.documentInformationFormComponent.bindDepartmentControl(departmentId);
                        if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].PaymentDifferentCurrency) {
                            this.cashDetailsFormComponent.documentInformationFormComponent.isDiffCurrency = true;
                            this.cashDetailsFormComponent.updateValidatorForAmount();
                        }
                        else {
                            this.cashDetailsFormComponent.documentInformationFormComponent.isDiffCurrency = false;
                            this.cashDetailsFormComponent.updateValidatorForAmount();
                        }
                        this.stepper.next();
                    }
                    else {
                        this.snackbarService.throwErrorSnackBar('Balance must be less than Zero');
                    }
                }
                else {
                    this.snackbarService.throwErrorSnackBar('Cost is invalid. Please resolve the errors.');
                }
            }
            else {
                this.snackbarService.throwErrorSnackBar('Selected invoice has invalid values. Please resolve the errors.');
            }
        }
        else {
            this.snackbarService.throwErrorSnackBar('Select an invoice To match');
        }
        this.pickTransactionComponent.invoiceMatchingComponent.getSelectedInvoices();
    };
    ExecutionCashCreateComponent.prototype.onCreateReceiptButtonClicked = function () {
        this.isSave = true;
        this.isCompleted = true;
        if (this.isValid) {
            if (this.isValidInvoiceList()) {
                if (this.pickTransactionComponent.additionalCostsPickTransactionComponent.isAdditionalCostValid()) {
                    if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptFullPartialTransaction
                        || this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptDifferentCurrency) {
                        var invoices = this.getSelectedInvoiceFromPickTransactionInvoiceList();
                        // this.calculateBalanceWithCost(invoices);
                    }
                    if (this.totalAmount && this.totalAmount['amount']['value'] === 0) {
                        this.onCreateButtonClicked();
                    }
                    else {
                        this.snackbarService.throwErrorSnackBar('Balance must be equal to Zero');
                    }
                }
                else {
                    this.snackbarService.throwErrorSnackBar('Cost is invalid. Please resolve the errors.');
                }
            }
            else {
                this.snackbarService.throwErrorSnackBar('Selected invoice has invalid values. Please resolve the errors.');
            }
        }
        else {
            this.snackbarService.throwErrorSnackBar('Select an invoice To match');
        }
    };
    ExecutionCashCreateComponent.prototype.onSetNarrative = function (narrative) {
        this.cashDetailsFormComponent.additionalDetailsFormComponent.setNarrative(narrative);
    };
    ExecutionCashCreateComponent.prototype.calculateTotalBalanceOnCostAmountEnter = function () {
        var invoices = this.getSelectedInvoiceFromPickTransactionInvoiceList();
        this.calculateBalanceWithCost(invoices);
    };
    ExecutionCashCreateComponent.prototype.calculateTotalBalanceOnCostAmountEnterInCashDetails = function () {
        // -- JEL - UAT 18774: Issue is we are using the same events and same variables for multiple processes and multiple components.
        // this makes it so the same code is executed where it pobably shouldn't (different screens using the same code)
        // To fix this issue, we are creating a seperate function for this card and for our case, we are not executing the code
        if (this.selectionValue !== _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].SimpleCashReceipt && this.selectionValue !== _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].SimpleCashPayment) {
            var invoices = this.getSelectedInvoiceFromPickTransactionInvoiceList();
            this.calculateBalanceWithCost(invoices);
        }
    };
    ExecutionCashCreateComponent.prototype.calculateAmountWithCostSimpleCPCI = function () {
        var totalCostAmount = 0;
        var costs = this.cashDetailsFormComponent.additionalCostsFormComponent.getGridData();
        if (costs.length > 0) {
            if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].SimpleCashReceipt ||
                this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptFullPartialTransaction ||
                this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptDifferentCurrency) {
                totalCostAmount = costs.map(function (c) { return (c.amount ? c.amount : 0) *
                    (c.costDirectionId === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_12__["CostDirections"].Payable ? -1 : 1); }).reduce(function (sum, current) { return sum + current; });
            }
            else {
                totalCostAmount = costs.map(function (c) { return (c.amount ? c.amount : 0) *
                    (c.costDirectionId === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_12__["CostDirections"].Payable ? 1 : -1); }).reduce(function (sum, current) { return sum + current; });
            }
        }
        if (this.cashDetailsFormComponent.documentInformationFormComponent.cashAmountValue) {
            var amountWithCost = Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_16__["ConvertToNumber"])(this.cashDetailsFormComponent.documentInformationFormComponent.cashAmountValue)
                + totalCostAmount;
            this.cashDetailsFormComponent.documentInformationFormComponent.amountCtrl.patchValue(amountWithCost);
        }
    };
    ExecutionCashCreateComponent.prototype.calculateBalanceWithCost = function (invoices) {
        var _this = this;
        var commonMethods = new _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_26__["CommonMethods"]();
        if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].SimpleCashReceipt || this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].SimpleCashPayment) {
            this.calculateAmountWithCostSimpleCPCI();
        }
        var totalCostAmount = 0;
        var costs = this.pickTransactionComponent.additionalCostsPickTransactionComponent.getGridData();
        if (costs.length > 0) {
            totalCostAmount = costs.map(function (c) {
                return (c.amount ? c.amount : 0) *
                    ((c.costDirectionId === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_12__["CostDirections"].Payable && _this.cashTypeId === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_11__["CashType"].CashPayment)
                        || ((c.costDirectionId === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_12__["CostDirections"].Receivable && _this.cashTypeId === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_11__["CashType"].CashReceipt)) ? -1 : 1);
            })
                .reduce(function (sum, current) { return sum + current; });
        }
        if (this.cashTypeId === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_11__["CashType"].CashReceipt) {
            if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptFullPartialTransaction) {
                this.balance = this.pickTransactionComponent.invoiceMatchingComponent.totalAmount
                    + ((invoices && invoices.length > 0) ?
                        invoices.map(function (a) { return (a.amountToBePaid ? a.amountToBePaid : 0)
                            * (commonMethods.getSignedValueForDocumentAmountBasedOnDocumentTypeAndCostDirection(a.documentType, _this.costDirectionId, a, false)); }).
                            reduce(function (sum, current) { return sum + current; })
                        : 0)
                    + totalCostAmount;
            }
            else if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptDifferentCurrency) {
                this.balance = Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_16__["ConvertToNumber"])(this.pickTransactionComponent.invoiceMatchingComponent.totalAmount)
                    + ((invoices && invoices.length > 0) ?
                        invoices.map(function (a) { return a.amountPaidInDiffCcy
                            * (commonMethods.getSignedValueForDocumentAmountBasedOnDocumentTypeAndCostDirection(a.documentType, _this.costDirectionId, a, false)); })
                            .reduce(function (sum, current) { return sum + current; }) : 0)
                    + totalCostAmount;
            }
            this.pickTransactionComponent.invoiceMatchingComponent.invoiceAmount =
                Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_16__["ConvertToNumber"])(this.balance ? this.balance.toFixed(2) : this.balance);
            this.pickTransactionComponent.invoiceMatchingComponent.formattedInvoiceAmount = this.balance;
            if (this.totalAmount) {
                this.totalAmount['amount']['value'] = Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_16__["ConvertToNumber"])(this.balance.toFixed(2));
            }
        }
        else {
            if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].PaymentFullPartialTransaction
                || this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].PaymentDifferentClient) {
                this.balance = ((invoices && invoices.length > 0) ? invoices.map(function (a) { return (a.amountToBePaid ? a.amountToBePaid : 0) *
                    (commonMethods.getSignedValueForDocumentAmountBasedOnDocumentTypeAndCostDirection(a.documentType, _this.costDirectionId, a, false)); })
                    .reduce(function (sum, current) { return sum + current; }) : 0)
                    + totalCostAmount;
            }
            else if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].PaymentDifferentCurrency) {
                this.balance = ((invoices && invoices.length > 0) ? invoices.map(function (a) { return a.amountPaidInDiffCcy *
                    (commonMethods.getSignedValueForDocumentAmountBasedOnDocumentTypeAndCostDirection(a.documentType, _this.costDirectionId, a, false)); })
                    .reduce(function (sum, current) { return sum + current; }) : 0)
                    + totalCostAmount;
            }
            var balanceWithDecimalValue = this.balance ? Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_16__["ConvertToNumber"])(this.balance.toFixed(2)) : this.balance;
            if (this.totalbalance) {
                this.totalbalance['balance'].value = balanceWithDecimalValue;
            }
            this.cashDetailsFormComponent.documentInformationFormComponent.amountValue =
                Math.abs(balanceWithDecimalValue);
            this.cashDetailsFormComponent
                .documentInformationFormComponent.amountOriginalCurrency = this.getAmountToBePaidInOriginalCurrency();
            this.pickTransactionComponent.invoiceMatchingComponent.totalBalance = balanceWithDecimalValue;
            if (balanceWithDecimalValue) {
                this.pickTransactionComponent.invoiceMatchingComponent.formattedBalance =
                    balanceWithDecimalValue.toLocaleString(undefined, {
                        minimumFractionDigits: 2,
                        maximumFractionDigits: 2,
                    });
            }
        }
    };
    ExecutionCashCreateComponent.prototype.getAmountToBePaidInOriginalCurrency = function () {
        var originalAmounts = this.getSelectedInvoiceFromPickTransactionInvoiceList().map(function (invoice) { return invoice.amountToBePaid; });
        var totalOriginalAmount = 0;
        originalAmounts.filter(function (amount) { return typeof (amount) === 'number'; }) // remove null amounts
            .forEach(function (amount) { return totalOriginalAmount += amount; });
        return totalOriginalAmount;
    };
    ExecutionCashCreateComponent.prototype.onProceedClickedCashReceipt = function () {
        this.insertCostToAdjustBalance();
    };
    ExecutionCashCreateComponent.prototype.insertCostToAdjustBalance = function () {
        var _this = this;
        this.costCurrency = (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptDifferentCurrency ||
            this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].PaymentDifferentCurrency) ?
            this.pickTransactionComponent.additionalCostsPickTransactionComponent.cashCurrency
            : this.pickTransactionComponent.invoiceMatchingComponent.currencyValue;
        // this.costCurrency = this.pickTransactionComponent.invoiceMatchingComponent.currencyValue;
        var fxRate = this.costCurrency === 'USD' ?
            1 : (this.masterdata.fxRates.filter(function (e) { return e.currencyCode === _this.costCurrency; })[0].rate
            ? this.masterdata.fxRates.filter(function (e) { return e.currencyCode === _this.costCurrency; })[0].rate
            : 1);
        var totalBalance = this.pickTransactionComponent.invoiceMatchingComponent.invoiceAmount;
        var multiplyDivide;
        if (this.cashSelectionId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].PaymentDifferentCurrency ||
            this.cashSelectionId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptDifferentCurrency) {
            var matchingCurrency_1 = this.pickTransactionComponent.invoiceMatchingComponent.bankCurrencyValue;
            multiplyDivide = this.masterdata.currencies.filter(function (e) { return e.currencyCode === matchingCurrency_1; })[0].roeType;
        }
        else {
            multiplyDivide = this.masterdata.currencies.filter(function (e) { return e.currencyCode === _this.costCurrency; })[0].roeType;
        }
        var totalBalanceInUSD = (multiplyDivide === 'M') ? totalBalance * Number(fxRate) : (totalBalance / Number(fxRate));
        if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptFullPartialTransaction
            || this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptDifferentCurrency) {
            if (totalBalanceInUSD !== 0 && totalBalanceInUSD < 100 && totalBalanceInUSD > -100) {
                var newCostRow = new _cash_details_additional_costs_additional_cost_list_display_view__WEBPACK_IMPORTED_MODULE_27__["AdditionalCostListDisplayView"]();
                newCostRow.isDirty = true;
                newCostRow.costDirection = this.pickTransactionComponent.invoiceMatchingComponent.invoiceAmount > 0
                    ? 'Receivable' : 'Payable';
                var costType = this.masterdata.costTypes.find(function (e) { return e.costTypeCode === 'BANKOTH'; });
                if (costType) {
                    newCostRow.costTypeCode = this.masterdata.costTypes.filter(function (e) { return e.costTypeCode === 'BANKOTH'; })[0].costTypeCode;
                    newCostRow.accountCode = costType.nominalAccountCode;
                    newCostRow.nominalAccountNumber = costType.nominalAccountCode;
                    newCostRow.accountLineType = costType.nominalAccountCode ? 'L' : 'B';
                }
                newCostRow.currencyCode = this.costCurrency;
                newCostRow.amount = Math.abs(this.pickTransactionComponent.invoiceMatchingComponent.invoiceAmount);
                if (this.pickTransactionComponent.additionalCostsPickTransactionComponent.gridApi) {
                    var res = this.pickTransactionComponent.additionalCostsPickTransactionComponent
                        .gridApi.updateRowData({ add: [newCostRow] });
                    // re-calculate the total balance here.
                    var invoices = this.getSelectedInvoiceFromPickTransactionInvoiceList();
                    this.calculateBalanceWithCost(invoices);
                }
            }
            else {
                this.snackbarService.throwErrorSnackBar('Cannot book the cash receipt, Total Balance left is greater than USD 100.');
                return;
            }
        }
    };
    ExecutionCashCreateComponent.prototype.InvoicesSelected = function () {
        var invoices = this.getSelectedInvoiceFromPickTransactionInvoiceList();
        // this.calculateBalanceWithCost(invoices);
        if (invoices) {
            this.cashSummaryFormComponent.invoiceGridForSummaryComponent.invoicesToBeSelected(invoices);
        }
        this.cashSummaryFormComponent.invoiceForSummaryStep(invoices);
    };
    ExecutionCashCreateComponent.prototype.onTotalBalanceCalculated = function (balance) {
        this.totalbalance = balance;
        var invoices = this.getSelectedInvoiceFromPickTransactionInvoiceList();
        this.calculateBalanceWithCost(invoices);
        this.cashDetailsFormComponent.documentInformationFormComponent.amountValue = -(this.totalbalance['balance']['value']);
        this.cashDetailsFormComponent
            .documentInformationFormComponent.amountOriginalCurrency = this.getAmountToBePaidInOriginalCurrency();
    };
    ExecutionCashCreateComponent.prototype.onTotalAmountCalculated = function (amount) {
        this.totalAmount = amount;
        var invoices = this.getSelectedInvoiceFromPickTransactionInvoiceList();
        this.calculateBalanceWithCost(invoices);
    };
    ExecutionCashCreateComponent.prototype.onInvoiceSearchValuesEntered = function (model) {
        if (model) {
            this.cashDetailsFormComponent.documentInformationFormComponent.currencyValue = model.currency;
            this.cashDetailsFormComponent.documentInformationFormComponent.departmentValue = model.department;
            // in case of diff ccy option, bank informations need to be fetch based on counterparty and payment currency value.
            if (this.selectionValue === this.cashSelectionType.PaymentDifferentCurrency ||
                this.selectionValue === this.cashSelectionType.ReceiptDifferentCurrency) {
                this.cashDetailsFormComponent.counterpartyFormComponent.currencyValue = model.bankCurrency;
                this.cashDetailsFormComponent.documentInformationFormComponent.paymentCurrency = model.bankCurrency;
            }
            else {
                this.cashDetailsFormComponent.counterpartyFormComponent.currencyValue = model.currency;
            }
            this.cashDetailsFormComponent.documentInformationFormComponent.
                currencyValueChangeInPickTransactionScreen();
            this.cashDetailsFormComponent.counterpartyFormComponent.counterpartyValue = model.counterparty;
            this.cashDetailsFormComponent.counterpartyFormComponent.clientNameValue = model.clientName;
            this.cashDetailsFormComponent.currencyFormComponent.fxRateValue = model.fxRate;
            this.cashDetailsFormComponent.currencyFormComponent.currencyValue = model.currency;
            this.cashDetailsFormComponent.currencyFormComponent.bankCurrencyValue = model.bankCurrency;
            this.cashDetailsFormComponent.currencyFormComponent.roeType = model.roeType;
            this.cashDetailsFormComponent.currencyFormComponent.bindCurrencyValues();
        }
    };
    ExecutionCashCreateComponent.prototype.onCounterpartySearchValueEntered = function (model) {
        this.pickTransactionComponent.invoiceMatchingComponent.counterpartyValue = model.counterparty.counterpartyCode;
        this.pickTransactionComponent.invoiceMatchingComponent.clientNameValue = model.clientName;
        this.pickTransactionComponent.invoiceMatchingComponent.bindCounterpartyValues();
    };
    ExecutionCashCreateComponent.prototype.onCurrencySearchValueEntered = function (model) {
        if (model) {
            this.pickTransactionComponent.invoiceMatchingComponent.currencyValue = model.currency;
            this.pickTransactionComponent.additionalCostsPickTransactionComponent.cashCurrency = model.currency;
            this.cashDetailsFormComponent.additionalCostsFormComponent.currencySelected(model.currency);
            if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptFullPartialTransaction) {
                this.pickTransactionComponent.invoiceMatchingComponent.bindCurrencyValue(model.currency);
            }
            if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptDifferentCurrency) {
                this.cashDetailsFormComponent.currencyFormComponent.filterBankCurrencies();
            }
        }
    };
    ExecutionCashCreateComponent.prototype.onDepartmentSearchValueEntered = function (model) {
        this.pickTransactionComponent.invoiceMatchingComponent.departmentId = model.department;
    };
    ExecutionCashCreateComponent.prototype.onAmountSearchValueEntered = function (model) {
        if (model) {
            this.assignPickTransactionIfNull();
            this.pickTransactionComponent.invoiceMatchingComponent.totalAmount = model.amount;
            this.pickTransactionComponent.invoiceMatchingComponent.invoiceAmount = model.amount;
            this.pickTransactionComponent.invoiceMatchingComponent.formattedInvoiceAmount = model.amount;
            // MDU: removal of the call to this.calculateAmountWithCostSimpleCPCI() for simple cash
            // (receivable or payable) as it caused the amount to be always incremented with the costs
            // in edition, when entering / leaving the amount field
            // See bug 19484, commeent by Mathilde
        }
    };
    ExecutionCashCreateComponent.prototype.onCurrencyCardValuesEntered = function (model) {
        if (model) {
            this.initialFxRateValue = model.initialFxRate;
            this.initialRoeType = model.initialRoeType;
            this.bankCurrency = model.bankCurrency;
            this.pickTransactionComponent.invoiceMatchingComponent.fxRateValue = this.initialFxRateValue;
            this.pickTransactionComponent.invoiceMatchingComponent.roeType = this.initialRoeType;
            this.pickTransactionComponent.invoiceMatchingComponent.bankCurrencyValue = this.bankCurrency;
            this.pickTransactionComponent.invoiceMatchingComponent.bindCurrencyCardValues();
            this.pickTransactionComponent.additionalCostsPickTransactionComponent.cashCurrency = this.bankCurrency;
            this.cashDetailsFormComponent.counterpartyFormComponent.paymentCurrency = model.bankCurrency;
        }
    };
    ExecutionCashCreateComponent.prototype.onFinalRoeTypeEntered = function (model) {
        if (model) {
            this.finalRoeType = model.finalRoeType;
            this.roeTypeValue = this.finalRoeType ? this.finalRoeType : this.initialRoeType;
            this.pickTransactionComponent.invoiceMatchingComponent.roeType = this.roeTypeValue;
            this.pickTransactionComponent.invoiceMatchingComponent.divideMultiplyCtrl.setValue(this.roeTypeValue);
        }
    };
    ExecutionCashCreateComponent.prototype.onFinalFxRateValueEntered = function (model) {
        if (model) {
            this.finalFxRateValue = Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_16__["ConvertToNumber"])(model.finalFxRate);
            this.fxRateValue = (this.finalFxRateValue) ? this.finalFxRateValue : this.initialFxRateValue;
            this.pickTransactionComponent.invoiceMatchingComponent.fxRateValue = this.fxRateValue;
            this.pickTransactionComponent.invoiceMatchingComponent.bindCurrencyCardValues();
        }
    };
    ExecutionCashCreateComponent.prototype.onPreviewToggleSelected = function (hasPreviewDocument) {
        this.hasPreviewDocument = hasPreviewDocument;
    };
    ExecutionCashCreateComponent.prototype.onTemplateSelected = function (hasTemplate) {
        this.hasTemplate = hasTemplate;
    };
    ExecutionCashCreateComponent.prototype.ngOnDestroy = function () {
        if (this.saveCashSubscription) {
            this.saveCashSubscription.unsubscribe();
        }
    };
    ExecutionCashCreateComponent.prototype.populateCashDetails = function () {
        var _this = this;
        this.subscriptions.push(this.executionService.getCashByCashId(this.cashId)
            .subscribe(function (data) {
            _this.isPreviousButtonDisabled = true;
            _this.model = data;
            _this.documentReferenceNumber = _this.model.documentReference;
            _this.matchedDocumentReference = _this.model.matchedDocumentReference;
            _this.transactionDocumentId = _this.model.transactionDocumentId;
            _this.matchingChashId = _this.model.matchingCashId;
            _this.selectionValue = _this.model.cashTypeId;
            _this.formComponents.forEach(function (comp) {
                comp.initForm(data, _this.isEdit);
            });
            if (_this.model.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].SimpleCashPayment) {
                _this.pickTransactionComponentInitial = _this.pickTransactionComponent;
                _this.isSimpleCashSelected = true;
                _this.stepper.next();
            }
            else if (_this.model.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].SimpleCashReceipt) {
                _this.stepper.selectedIndex = _shared_enums_cash_stepper_type_enum__WEBPACK_IMPORTED_MODULE_10__["CashStepperType"].ReceiptDetails;
            }
            else {
                _this.stepper.selectedIndex = _shared_enums_cash_stepper_type_enum__WEBPACK_IMPORTED_MODULE_10__["CashStepperType"].PaymentPickTransaction;
            }
            if (_this.model.costDirectionId === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_11__["CashType"].CashPayment) {
                _this.pickTransactionComponent.invoiceMatchingComponent.filterCurrencies();
            }
            if (_this.model.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].PaymentDifferentCurrency
                || _this.model.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptDifferentCurrency) {
                if (_this.pickTransactionComponent.invoiceMatchingComponent.gridColumnApi) {
                    _this.pickTransactionComponent.invoiceMatchingComponent.gridColumnApi.setColumnVisible('amountPaidInDiffCcy', true);
                }
                _this.cashDetailsFormComponent.documentInformationFormComponent.isDiffCurrency = true;
                _this.cashDetailsFormComponent.updateValidatorForAmount();
            }
            else {
                _this.cashDetailsFormComponent.documentInformationFormComponent.isDiffCurrency = false;
                _this.cashDetailsFormComponent.updateValidatorForAmount();
            }
        }));
    };
    // get fx rate for functionalCUrrency => statutorycurrency
    ExecutionCashCreateComponent.prototype.getFxrateForFunctionalToStatutoryCurrencyConversion = function () {
        var _this = this;
        if (this.companyConfiguration.statutoryCurrencyCode !== this.companyConfiguration.functionalCurrencyCode) {
            this.foreignExchangeService.getForeignExchangeRate(this.companyManager.getCurrentCompanyDate().toDate(), this.companyConfiguration.statutoryCurrencyCode)
                .subscribe(function (data) {
                if (data) {
                    _this.functionalStatutoryCurrenyRate = Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_16__["ConvertToNumber"])(data.rate);
                    _this.functionalStatutoryCurrencyRoeType = data.currencyRoeType;
                }
            });
        }
    };
    ExecutionCashCreateComponent.prototype.onAmountEnterOrInvoiceSelection = function () {
        var invoices = this.getSelectedInvoiceFromPickTransactionInvoiceList();
        this.calculateBalanceWithCost(invoices);
    };
    ExecutionCashCreateComponent.prototype.isValidInvoiceList = function () {
        var isInvoiceListValid = true;
        var invoices = this.getSelectedInvoiceFromPickTransactionInvoiceList();
        // this.pickTransactionComponent.invoiceMatchingComponent
        //     .selectedInvoiceToMatch as CashMatching[];
        if (invoices && invoices.length > 0) {
            invoices.forEach(function (item) {
                if (!Number(item.amountToBePaid)) {
                    isInvoiceListValid = false;
                }
            });
        }
        return isInvoiceListValid;
    };
    ExecutionCashCreateComponent.prototype.bindSelectedCashTypeForNewDocument = function () {
        // based on selected value(Cash Type), route to respective cash selectionpage and select the cash option
        // move to next step.
        this.selectionFormComponent.bindSelectedCashTypeSelection(this.selectionValue, this.costDirectionId);
        if (this.costDirectionId === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_11__["CashType"].CashPayment) {
            this.onPaymentNextButtonClicked();
        }
        else {
            this.onNextReceiptButtonClicked();
        }
    };
    ExecutionCashCreateComponent.prototype.onCloseButtonClicked = function () {
        this.isDialogClosed = false;
    };
    ExecutionCashCreateComponent.prototype.getSelectedInvoiceFromPickTransactionInvoiceList = function () {
        var selectedRows = [];
        if (this.pickTransactionComponent.invoiceMatchingComponent.gridApi) {
            this.pickTransactionComponent.invoiceMatchingComponent.gridApi.forEachNode(function (item) {
                if (item.data.isChecked === true) {
                    selectedRows.push(item.data);
                }
            });
        }
        return selectedRows;
    };
    ExecutionCashCreateComponent.prototype.getformatedNumberWith2DecimalPoint = function (value) {
        if (value) {
            var floatValue = Math.round(value * 100) / 100;
            return value ? parseFloat(floatValue.toString()).toFixed(2) : value;
        }
    };
    ExecutionCashCreateComponent.prototype.onEditCalculateCashAmountWithoutCost = function () {
        var totalCostAmount = 0;
        var costs = this.cashDetailsFormComponent.additionalCostsFormComponent.getGridData();
        if (costs.length > 0) {
            if (this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].SimpleCashReceipt ||
                this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptFullPartialTransaction ||
                this.selectionValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_9__["CashSelectionType"].ReceiptDifferentCurrency) {
                totalCostAmount = costs.map(function (c) { return (c.amount ? c.amount : 0) *
                    (c.costDirectionId === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_12__["CostDirections"].Payable ? -1 : 1); }).reduce(function (sum, current) { return sum + current; });
            }
            else {
                totalCostAmount = costs.map(function (c) { return (c.amount ? c.amount : 0) *
                    (c.costDirectionId === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_12__["CostDirections"].Payable ? 1 : -1); }).reduce(function (sum, current) { return sum + current; });
            }
        }
        this.cashDetailsFormComponent.documentInformationFormComponent.cashAmountValue =
            this.cashDetailsFormComponent.documentInformationFormComponent.cashAmountValue - totalCostAmount;
    };
    // This method is used to get the departmentId from selected documents.
    // If invoices are only in 1 dept, then defaulted to the dept. If multiple depts.,
    // then take the dept with maximum value. It can overwritten by the users in the next screen.
    ExecutionCashCreateComponent.prototype.getDepartmentIdFromSelectedInvoices = function () {
        var departmentId;
        var invoices = this.getSelectedInvoiceFromPickTransactionInvoiceList();
        if (invoices && invoices.length > 0) {
            if (invoices.length === 1) {
                departmentId = invoices[0].departmentId;
            }
            else {
                // logic implemented:
                // Choose the department linked to the document which has the
                // maximum absolute amount(amount selected by the user to be paid in the invoice selection page).
                // If two or more invoices has the same amount. Then department which has the document
                // posted recently has to be set as default.
                var maxInvoiceAmount_1 = 0;
                var maxPostedDate_1;
                var defaultDeptId_1 = 0;
                invoices.forEach(function (invoice) {
                    if (invoice.amountToBePaid > maxInvoiceAmount_1) {
                        maxInvoiceAmount_1 = invoice.amountToBePaid;
                        defaultDeptId_1 = invoice.departmentId;
                        maxPostedDate_1 = invoice.postedDate;
                    }
                    else if (invoice.amountToBePaid === maxInvoiceAmount_1) {
                        if (invoice.postedDate > maxPostedDate_1) {
                            defaultDeptId_1 = invoice.departmentId;
                            maxPostedDate_1 = invoice.postedDate;
                        }
                    }
                });
                departmentId = defaultDeptId_1;
            }
        }
        return departmentId;
    };
    ExecutionCashCreateComponent.prototype.isDetailsChanged = function (currentDetails) {
        if (!this.previousCashDetails) {
            return true;
        }
        if (this.previousCashDetails.amount === currentDetails.amount
            && this.previousCashDetails.currency === currentDetails.currency
            && this.previousCashDetails.departmentCode === currentDetails.departmentCode
            && this.previousCashDetails.counterpartyreference === currentDetails.counterpartyreference) {
            return false;
        }
        return true;
    };
    ExecutionCashCreateComponent.prototype.saveCurrentDetails = function (isDetailsChanged, currentDetails) {
        if (isDetailsChanged) {
            this.previousCashDetails = currentDetails;
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('stepper'),
        __metadata("design:type", _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatStepper"])
    ], ExecutionCashCreateComponent.prototype, "stepper", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('selectionFormComponent'),
        __metadata("design:type", _cash_selection_cash_selection_component__WEBPACK_IMPORTED_MODULE_30__["CashSelectionFormComponent"])
    ], ExecutionCashCreateComponent.prototype, "selectionFormComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('cashDetailsFormComponent'),
        __metadata("design:type", _cash_details_cash_details_component__WEBPACK_IMPORTED_MODULE_28__["CashDetailsFormComponent"])
    ], ExecutionCashCreateComponent.prototype, "cashDetailsFormComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('cashSummaryFormComponent'),
        __metadata("design:type", _cash_summary_cash_summary_component__WEBPACK_IMPORTED_MODULE_31__["CashSummaryFormComponent"])
    ], ExecutionCashCreateComponent.prototype, "cashSummaryFormComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('pickTransactionComponent'),
        __metadata("design:type", _pick_transaction_pick_transaction_component__WEBPACK_IMPORTED_MODULE_32__["PickTransactionComponent"])
    ], ExecutionCashCreateComponent.prototype, "pickTransactionComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"])('window:beforeunload', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], ExecutionCashCreateComponent.prototype, "unloadNotification", null);
    ExecutionCashCreateComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-execution-cash-create',
            template: __webpack_require__(/*! ./execution-cash-create.component.html */ "./Client/app/execution/execution-cash/execution-cash-create/execution-cash-create.component.html"),
            styles: [__webpack_require__(/*! ./execution-cash-create.component.scss */ "./Client/app/execution/execution-cash/execution-cash-create/execution-cash-create.component.scss")],
        }),
        __param(10, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_8__["WINDOW"])),
        __metadata("design:paramtypes", [_core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_6__["CompanyManagerService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_20__["ExecutionService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_23__["SnackbarService"],
            _shared_services_http_services_preaccounting_service__WEBPACK_IMPORTED_MODULE_22__["PreaccountingService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_25__["UtilService"],
            Window,
            _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_19__["DocumentService"],
            _shared_services_document_popup_service__WEBPACK_IMPORTED_MODULE_17__["DocumentPopupService"],
            _shared_services_http_services_foreign_exchange_service__WEBPACK_IMPORTED_MODULE_21__["ForeignExchangeService"],
            _shared_services_title_service__WEBPACK_IMPORTED_MODULE_24__["TitleService"]])
    ], ExecutionCashCreateComponent);
    return ExecutionCashCreateComponent;
}());



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/pick-transaction/invoice-matching/invoice-matching.component.html":
/*!*************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/pick-transaction/invoice-matching/invoice-matching.component.html ***!
  \*************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <form [formGroup]=\"searchForm\">\r\n        <mat-card-header>\r\n            <mat-card-title>\r\n                Entries to Cash Matching\r\n            </mat-card-title>\r\n        </mat-card-header>\r\n        <mat-card-content>\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutGap=\"8px\">\r\n\r\n                <atlas-dropdown-select fxFlex=\"9%\"\r\n                                       label=\"Cli. Reference\"\r\n                                       [isEditable]=\"counterpartyCtrl.enabled\"\r\n                                       [fieldControl]=\"counterpartyCtrl\"\r\n                                       [options]=\"filteredCounterPartyList\"\r\n                                       displayProperty=\"counterpartyCode\"\r\n                                       [selectProperties]=\"['counterpartyCode', 'description']\"\r\n                                       [errorMap]=\"counterpartyErrorMap\"\r\n                                       (optionSelected)=\"onCounterpartySelected($event)\"\r\n                                       isAutocompleteActivated=\"true\">\r\n                </atlas-dropdown-select>\r\n\r\n                <atlas-form-input fxFlex={{clientNameWidth}}\r\n                                  label=\"Client Name\"\r\n                                  [fieldControl]=\"clientNameCtrl\"\r\n                                  [isEditable]=\"clientNameCtrl.enabled\">\r\n                </atlas-form-input>\r\n\r\n                <atlas-dropdown-select fxFlex=\"7%\"\r\n                                       label=\"Department\"\r\n                                       [isEditable]=\"departmentsCtrl.enabled\"\r\n                                       [fieldControl]=\"departmentsCtrl\"\r\n                                       [options]=\"filteredDepartments\"\r\n                                       displayProperty=\"departmentCode\"\r\n                                       [selectProperties]=\"['departmentCode', 'description']\"\r\n                                       (optionSelected)=\"onDepartmentCodeSelected($event)\"\r\n                                       isAutocompleteActivated=\"true\">\r\n                </atlas-dropdown-select>\r\n\r\n                <atlas-dropdown-select fxFlex=\"6%\"\r\n                                       label=\"Currency\"\r\n                                       [isEditable]=\"currencyCtrl.enabled\"\r\n                                       [fieldControl]=\"currencyCtrl\"\r\n                                       [options]=\"filteredCurrencyList\"\r\n                                       displayProperty=\"currencyCode\"\r\n                                       [selectProperties]=\"['currencyCode', 'description']\"\r\n                                       [errorMap]=\"currencyErrorMap\"\r\n                                       (optionSelected)=\"onCurrencyOptionSelected($event)\"\r\n                                       isAutocompleteActivated=\"true\">\r\n                </atlas-dropdown-select>\r\n\r\n                <atlas-form-input fxFlex={{secDocReferenceWidth}}\r\n                                  label=\"Second Document Reference\"\r\n                                  [fieldControl]=\"secDocReferenceCtrl\"\r\n                                  [isEditable]=\"secDocReferenceCtrl.enabled\">\r\n                </atlas-form-input>\r\n\r\n                <atlas-dropdown-select fxFlex=\"13%\"\r\n                                       label=\"DocumentReference\"\r\n                                       [isEditable]=\"docReferenceCtrl.enabled\"\r\n                                       [fieldControl]=\"docReferenceCtrl\"\r\n                                       [options]=\"filteredDocReferenceList\"\r\n                                       displayProperty=\"invoiceDocumentReference\"\r\n                                       [selectProperties]=\"['invoiceDocumentReference']\"\r\n                                       [errorMap]=\"currencyErrorMap\"\r\n                                       (optionSelected)=\"onDocumentReferenceSelected($event)\"\r\n                                       (blur)=\"onDocumentReferenceSelection()\"\r\n                                       (keydown.enter)=\"onKeydown($event)\"\r\n                                       isAutocompleteActivated=\"true\">\r\n                </atlas-dropdown-select>\r\n\r\n                <atlas-dropdown-select fxFlex=\"9%\"\r\n                                       *ngIf=\"selectedValue==cashSelectionType.PaymentDifferentCurrency || selectedValue==cashSelectionType.ReceiptDifferentCurrency\"\r\n                                       label=\"Bank Currency\"\r\n                                       [isEditable]=\"bankCurrencyCtrl.enabled\"\r\n                                       [fieldControl]=\"bankCurrencyCtrl\"\r\n                                       [options]=\"filteredBankCurrencylist\"\r\n                                       displayProperty=\"currencyCode\"\r\n                                       [selectProperties]=\"['currencyCode', 'description']\"\r\n                                       [errorMap]=\"bankCurrencyErrorMap\"\r\n                                       (optionSelected)=\"onBankCurrencyEntered($event)\"\r\n                                       isAutocompleteActivated=\"true\">\r\n                </atlas-dropdown-select>\r\n\r\n                <atlas-form-input fxFlex=\"6%\"\r\n                                  *ngIf=\"selectedValue==cashSelectionType.PaymentDifferentCurrency || selectedValue==cashSelectionType.ReceiptDifferentCurrency\"\r\n                                  label=\"FX Rate\"\r\n                                  [fieldControl]=\"fxRateCtrl\"\r\n                                  [isEditable]=\"fxRateCtrl.enabled\"\r\n                                  (change)=\"onFXRateValueChanged($event)\"\r\n                                  [errorMap]=\"fxRateErrorMap\">\r\n                </atlas-form-input>\r\n\r\n                <div fxFlex=\"15%\"\r\n                     *ngIf=\"selectedValue==cashSelectionType.PaymentDifferentCurrency || selectedValue==cashSelectionType.ReceiptDifferentCurrency\">\r\n                    <mat-radio-group class=\"currency-radio-group\"\r\n                                     [formControl]=\"divideMultiplyCtrl\"\r\n                                     (change)=\"onDivideMultiplyToggleChanges($event)\"\r\n                                     [disabled]=\"true\">\r\n                        <mat-radio-button value=\"D\">Divide</mat-radio-button>\r\n                        <mat-radio-button value=\"M\">Multiply</mat-radio-button>\r\n                    </mat-radio-group>\r\n                </div>\r\n                <span class=\"fill-space\"></span>\r\n                <button mat-icon-button\r\n                        (click)=\"onSearchButtonClicked()\">\r\n                    <mat-icon aria-label=\"Search\">search</mat-icon>\r\n                </button>\r\n\r\n            </div>\r\n        </mat-card-content>\r\n    </form>\r\n</mat-card>\r\n<mat-card>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"space-between\">\r\n        <mat-card-title>\r\n            Documents found\r\n        </mat-card-title>\r\n        <atlas-grid-enlargement *ngIf=\"invoiceMatchingGridOptions && invoiceMatchingGridOptions.columnDefs\"\r\n                                [gridOptions]=\"invoiceMatchingGridOptions\"\r\n                                (rowSelected)=\"onSelectionChanged($event)\"\r\n                                #gridZoom>\r\n        </atlas-grid-enlargement>\r\n    </div>\r\n    <mat-card-content>\r\n        <div ag-grid=\"invoiceMatchingGridOptions\"\r\n             class=\"ag-theme-material pointer-cursor\">\r\n            <ag-grid-angular style=\" height:100%;\"\r\n                             class=\"ag-theme-material\"\r\n                             [columnDefs]=\"invoiceMatchingGridColumns\"\r\n                             [rowData]=\"invoiceMatchingGridRows\"\r\n                             [gridOptions]=\"invoiceMatchingGridOptions\"\r\n                             domLayout=\"autoHeight\"\r\n                             (gridReady)=\"onGridReady($event)\"\r\n                             (firstDataRendered)=\"autosizeColumns()\"\r\n                             (rowSelected)=\"onSelectionChanged($event)\"\r\n                             rowSelection=\"multiple\"\r\n                             [singleClickEdit]=\"true\"\r\n                             [suppressRowClickSelection]=\"true\"\r\n                             [pagination]=\"true\"\r\n                             [paginationPageSize]=\"10\"\r\n                             [enableSorting]=\"true\"\r\n                             [enableColResize]=\"true\"\r\n                             enableFilter\r\n                             [rowHeight]=\"atlasAgGridParam.rowHeight\"\r\n                             [frameworkComponents]=\"gridComponents\">\r\n            </ag-grid-angular>\r\n        </div>\r\n    </mat-card-content>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"end center\"\r\n         *ngIf=\"selectedValue == cashSelectionType.ReceiptFullPartialTransaction || selectedValue == cashSelectionType.ReceiptDifferentCurrency\">\r\n        <mat-card-subtitle class=\"total-figure\">Balance : <span\r\n                  class=\"total-figure-value\">{{invoiceAmount | number : '1.2-2' }}\r\n            </span></mat-card-subtitle>\r\n    </div>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"end center\"\r\n         *ngIf=\"selectedValue == cashSelectionType.PaymentFullPartialTransaction || selectedValue == cashSelectionType.PaymentDifferentCurrency \r\n             || selectedValue == cashSelectionType.PaymentDifferentClient\">\r\n        <mat-card-subtitle class=\"total-figure\">Amount to be Paid : <span\r\n                  class=\"total-figure-value\">{{totalBalance  | number : '1.2-2' }}\r\n            </span></mat-card-subtitle>\r\n    </div>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"center center\"\r\n         fxLayoutWrap\r\n         *ngIf=\"isLoading\"\r\n         class=\"loading\">\r\n        <mat-spinner color=\"accent\"></mat-spinner>\r\n    </div>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/pick-transaction/invoice-matching/invoice-matching.component.scss":
/*!*************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/pick-transaction/invoice-matching/invoice-matching.component.scss ***!
  \*************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".currency-radio-group {\n  display: inline-flex;\n  flex-direction: column; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/pick-transaction/invoice-matching/invoice-matching.component.ts":
/*!***********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/pick-transaction/invoice-matching/invoice-matching.component.ts ***!
  \***********************************************************************************************************************************/
/*! exports provided: InvoiceMatchingComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InvoiceMatchingComponent", function() { return InvoiceMatchingComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component */ "./Client/app/shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_components_cell_editor_numeric_cell_editor_numeric_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/components/cell-editor-numeric/cell-editor-numeric.component */ "./Client/app/shared/components/cell-editor-numeric/cell-editor-numeric.component.ts");
/* harmony import */ var _shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/directives/autocomplete-dropdown.directive */ "./Client/app/shared/directives/autocomplete-dropdown.directive.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../shared/enums/cash-selection-type */ "./Client/app/shared/enums/cash-selection-type.ts");
/* harmony import */ var _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../shared/enums/cash-type.enum */ "./Client/app/shared/enums/cash-type.enum.ts");
/* harmony import */ var _shared_enums_transaction_document_enum__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../shared/enums/transaction-document.enum */ "./Client/app/shared/enums/transaction-document.enum.ts");
/* harmony import */ var _shared_models_charter_display_view__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../shared/models/charter-display-view */ "./Client/app/shared/models/charter-display-view.ts");
/* harmony import */ var _shared_numberMask__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../shared/numberMask */ "./Client/app/shared/numberMask.ts");
/* harmony import */ var _shared_pipes_format_date_pipe_pipe__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../shared/pipes/format-date-pipe.pipe */ "./Client/app/shared/pipes/format-date-pipe.pipe.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_execution_dtos_cash_matching__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../shared/services/execution/dtos/cash-matching */ "./Client/app/shared/services/execution/dtos/cash-matching.ts");
/* harmony import */ var _shared_services_execution_dtos_invoice_for_cash__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../../shared/services/execution/dtos/invoice-for-cash */ "./Client/app/shared/services/execution/dtos/invoice-for-cash.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_foreign_exchange_service__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../../../shared/services/http-services/foreign-exchange.service */ "./Client/app/shared/services/http-services/foreign-exchange.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_http_services_preaccounting_service__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../../../shared/services/http-services/preaccounting.service */ "./Client/app/shared/services/http-services/preaccounting.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../../../services/execution-cash-common-methods */ "./Client/app/execution/services/execution-cash-common-methods.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




























var moment = moment__WEBPACK_IMPORTED_MODULE_3__;
var InvoiceMatchingComponent = /** @class */ (function (_super) {
    __extends(InvoiceMatchingComponent, _super);
    function InvoiceMatchingComponent(formConfigurationProvider, formBuilder, masterdataService, utilService, executionService, snackbarService, uiService, formatDate, route, preAccountingService, companyManager, foreignExchangeService, gridService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.formBuilder = formBuilder;
        _this.masterdataService = masterdataService;
        _this.utilService = utilService;
        _this.executionService = executionService;
        _this.snackbarService = snackbarService;
        _this.uiService = uiService;
        _this.formatDate = formatDate;
        _this.route = route;
        _this.preAccountingService = preAccountingService;
        _this.companyManager = companyManager;
        _this.foreignExchangeService = foreignExchangeService;
        _this.gridService = gridService;
        _this.totalBalanceValue = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.invoiceSearchValues = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.selectedInvoiceReferences = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.invoiceSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.setNarrative = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.invoiceAmountValue = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.currencySelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.AmountEnterOrInvoiceSelection = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.counterpartyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_9__["AtlasFormControl"]('Counterparty');
        _this.clientNameCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_9__["AtlasFormControl"]('Payer');
        _this.currencyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_9__["AtlasFormControl"]('Currency');
        _this.departmentsCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_9__["AtlasFormControl"]('Departments');
        _this.docReferenceCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_9__["AtlasFormControl"]('DocumentReference');
        _this.secDocReferenceCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_9__["AtlasFormControl"]('SecondDocumentReference');
        _this.bankCurrencyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_9__["AtlasFormControl"]('BankCurrency');
        _this.fxRateCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_9__["AtlasFormControl"]('FXRate');
        _this.divideMultiplyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_9__["AtlasFormControl"]('DivideMultiply');
        _this.documentReferenceList = [];
        _this.cashMatchingModel = new _shared_services_execution_dtos_cash_matching__WEBPACK_IMPORTED_MODULE_17__["CashMatching"]();
        _this.invoiceMatchingGridOptions = {};
        _this.documentTypePI = 'PI';
        _this.documentTypeSI = 'SI';
        _this.isFxRateValid = true;
        _this.totalBalance = 0;
        _this.dataLength = 0;
        _this.hasMaximumTolarence = false;
        _this.hasMinimumTolarence = false;
        _this.cashSelectionType = _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"];
        _this.cashType = _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_11__["CashType"];
        _this.invoiceForCashMatchingModel = new _shared_services_execution_dtos_invoice_for_cash__WEBPACK_IMPORTED_MODULE_18__["InvoiceForCashMatching"]();
        _this.gridContext = {
            component: _this,
        };
        _this.isEdit = false;
        _this.gridComponents = {
            atlasNumeric: _shared_components_cell_editor_numeric_cell_editor_numeric_component__WEBPACK_IMPORTED_MODULE_7__["CellEditorNumericComponent"],
        };
        _this.decimalOptionValue = 2;
        _this.formatType = 'en-US';
        _this.formInvalidMessage = 'Form is invalid. Please resolve the errors.';
        _this.counterpartyErrorMap = new Map();
        _this.currencyErrorMap = new Map();
        _this.bankCurrencyErrorMap = new Map();
        _this.fxRateErrorMap = new Map();
        _this.isSearchApplied = false;
        _this.atlasAgGridParam = _this.gridService.getAgGridParam();
        _this.searchForm = _this.formBuilder.group({
            counterpartyCtrl: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required],
            currencyCtrl: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required],
            bankCurrencyCtrl: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required],
            fxRateCtrl: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required],
        });
        _this.counterpartyErrorMap.set('required', ' Required *');
        _this.currencyErrorMap.set('required', ' Required *');
        _this.bankCurrencyErrorMap.set('required', ' Required *');
        _this.fxRateErrorMap.set('required', ' Required *');
        return _this;
    }
    InvoiceMatchingComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.company = this.route.snapshot.paramMap.get('company');
        this.cashTypeId = Number(this.route.snapshot.paramMap.get('cashTypeId'));
        this.cashOption = (this.cashTypeId === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_11__["CashType"].CashPayment ? true : false);
        this.masterData = this.route.snapshot.data.masterdata;
        this.companyConfiguration = this.companyManager.getCompany(this.company);
        this.filteredCounterPartyList = this.masterData.counterparties;
        this.counterpartyCtrl.valueChanges.subscribe(function (input) {
            _this.filteredCounterPartyList = _this.utilService.filterListforAutocomplete(input, _this.masterData.counterparties, ['counterpartyCode', 'description']);
            if (_this.counterpartyCtrl.valid) {
                _this.onClientReferenceChange();
            }
            else {
                if (_this.counterpartyCtrl.value) {
                    // this.counterpartyCtrl.reset();
                }
            }
        });
        this.filteredDepartments = this.masterData.departments;
        this.departmentsCtrl.valueChanges.subscribe(function (input) {
            _this.filteredDepartments = _this.utilService.filterListforAutocomplete(input, _this.masterData.departments, ['departmentCode', 'description']);
            if (_this.departmentsCtrl.valid) {
                _this.onDepartmentChange();
            }
            else {
                _this.docReferenceCtrl.reset();
            }
        });
        this.executionService.getDocumentReferenceList()
            .subscribe(function (data) {
            data.value.forEach(function (item) { return _this.documentReferenceList.push(_this.populateInvoices(item)); });
            _this.filteredDocReferenceList = _this.documentReferenceList;
        });
        this.docReferenceCtrl.valueChanges.subscribe(function (input) {
            _this.filteredDocReferenceList = _this.utilService.filterListforAutocomplete(input, _this.documentReferenceList, ['invoiceDocumentReference']);
        });
        this.filterBankCurrencies();
        this.initializeGridColumns();
        this.setValidators();
        this.bindConfiguration();
        this.isValueBindedFromCurrencyComponent = false;
    };
    InvoiceMatchingComponent.prototype.onClientReferenceChange = function () {
        var _this = this;
        if (this.filteredClientRefCurrency) {
            var documentRefrence = this.filteredClientRefCurrency.documentReference;
            var counterpartyCode = this.masterData.counterparties.find(function (a) {
                return a.counterpartyID === _this.filteredClientRefCurrency.counterPartyId;
            }).counterpartyCode;
            if (this.counterpartyCtrl.value && this.counterpartyCtrl.value.counterpartyCode !== counterpartyCode) {
                this.docReferenceCtrl.reset();
            }
        }
    };
    InvoiceMatchingComponent.prototype.onDepartmentChange = function () {
        var _this = this;
        if (this.filteredClientRefCurrency) {
            var documentRefrence = this.filteredClientRefCurrency.documentReference;
            var department = this.masterData.departments.find(function (a) {
                return a.departmentId === _this.filteredClientRefCurrency.departmentId;
            });
            if (department && this.departmentsCtrl.value &&
                this.departmentsCtrl.value.departmentCode !== department.departmentCode) {
                this.docReferenceCtrl.reset();
            }
        }
    };
    InvoiceMatchingComponent.prototype.onCurrencyChange = function () {
        if (this.filteredClientRefCurrency) {
            var documentRefrence = this.filteredClientRefCurrency.documentReference;
            var currency = this.filteredClientRefCurrency.currencyCode;
            if (this.currencyCtrl.value && this.currencyCtrl.value.currencyCode !== currency) {
                this.docReferenceCtrl.reset();
            }
        }
    };
    InvoiceMatchingComponent.prototype.onGridReady = function (params) {
        this.invoiceMatchingGridOptions.columnDefs = this.invoiceMatchingGridColumns;
        this.gridApi = this.invoiceMatchingGridOptions.api;
        this.gridColumnApi = this.invoiceMatchingGridOptions.columnApi;
        this.autosizeColumns();
        this.gridApi.showNoRowsOverlay();
        if (this.gridColumnApi) {
            if (this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].ReceiptDifferentCurrency
                || this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].PaymentDifferentCurrency) {
                this.gridColumnApi.setColumnVisible('amountPaidInDiffCcy', true);
            }
            else {
                this.gridColumnApi.setColumnVisible('amountPaidInDiffCcy', false);
            }
        }
        this.gridService.sizeColumns(params);
    };
    InvoiceMatchingComponent.prototype.autosizeColumns = function () {
        if (this.invoiceMatchingGridOptions) {
            this.gridService.sizeColumns(this.invoiceMatchingGridOptions);
        }
    };
    InvoiceMatchingComponent.prototype.setValidators = function () {
        this.counterpartyCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
            Object(_shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_8__["inDropdownListValidator"])(this.masterData.counterparties, Object(_shared_services_util_service__WEBPACK_IMPORTED_MODULE_26__["nameof"])('counterpartyCode')), _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required,
        ]));
        this.bankCurrencyCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]));
        this.fxRateCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]));
        this.currencyCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
            Object(_shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_8__["inDropdownListValidator"])(this.masterData.currencies, Object(_shared_services_util_service__WEBPACK_IMPORTED_MODULE_26__["nameof"])('currencyCode')), _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required,
        ]));
        this.departmentsCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
            Object(_shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_8__["inDropdownListValidator"])(this.masterData.departments, Object(_shared_services_util_service__WEBPACK_IMPORTED_MODULE_26__["nameof"])('departmentCode')),
        ]));
        this.docReferenceCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
            Object(_shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_8__["inDropdownListValidator"])(this.documentReferenceList, Object(_shared_services_util_service__WEBPACK_IMPORTED_MODULE_26__["nameof"])('invoiceDocumentReference')),
        ]));
    };
    InvoiceMatchingComponent.prototype.onFXRateValueChanged = function (fxRateInput) {
        var result = this.calculateFxrateTolarenceValue();
        if (!result) {
            this.isFxRateValid = false;
            this.snackbarService.throwErrorSnackBar('FX Rate difference should be within 10% threshold.');
        }
        else {
            this.isFxRateValid = true;
        }
    };
    InvoiceMatchingComponent.prototype.onSearchButtonClicked = function () {
        var _this = this;
        this.clearInvoiceSelection();
        // get the fxrate for the selected currency for conversion to fucntionalcurrency and statutorycurrency
        // validate controls before making service call.
        // if search by Document reference
        if (this.docReferenceCtrl.value && !this.docReferenceCtrl.valid
            && this.cashTypeId === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_11__["CashType"].CashPayment) {
            this.snackbarService.throwErrorSnackBar(this.formInvalidMessage);
            return;
        }
        else { // if search by counterparty,currency and department
            if ((!this.counterpartyCtrl.valid || !this.currencyCtrl.valid ||
                (this.departmentsCtrl.value && !this.departmentsCtrl.valid))
                && this.cashTypeId === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_11__["CashType"].CashPayment) {
                this.snackbarService.throwErrorSnackBar(this.formInvalidMessage);
                return;
            }
        }
        if (this.currencyCtrl.value.currencyCode !== this.companyConfiguration.functionalCurrencyCode) {
            // If functional currency is USD and Cash Currency is AED than fetch fxrates.
            this.foreignExchangeService.getForeignExchangeRate(this.companyConfiguration.companyDate.toDate(), this.currencyCtrl.value.currencyCode)
                .subscribe(function (data) {
                if (data) {
                    _this.isValidFxRateForFunctionalStatutoruCurrency = true;
                    _this.cashCurrencyRate = Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(data.rate);
                    _this.cashCurrencyRoeType = data.currencyRoeType;
                    _this.cashCurrencyCode = _this.currencyCtrl.value.currencyCode;
                }
                else {
                    _this.isValidFxRateForFunctionalStatutoruCurrency = false;
                    _this.isLoading = false;
                    _this.snackbarService.throwErrorSnackBar('FXrates are not avialable for the selected Currency');
                    return;
                }
            });
        }
        else {
            this.isValidFxRateForFunctionalStatutoruCurrency = true;
            this.cashCurrencyRate = 1;
            this.cashCurrencyRoeType = 'M';
            this.cashCurrencyCode = this.currencyCtrl.value.currencyCode;
        }
        // incase of different ccy , check whether the fx rates are avialable or not.
        // This is only for cash receipts.
        // assign the counterparty , currency and amount to properties which is used to
        // maintain/ clear the invoice selection while going to previous screen and coming back
        this.previousCounterpartyCode = this.counterpartyCtrl.value.counterpartyCode;
        this.previousCurrencyCode = this.currencyCtrl.value.currencyCode;
        this.previousAmount = this.totalAmount;
        if ((this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].PaymentDifferentCurrency ||
            this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].ReceiptDifferentCurrency) && !this.isFXratesAvailableForCashCurrency) {
            this.snackbarService.throwErrorSnackBar('Selected currency doesnot have Valid Fxrate details');
            return;
        }
        // emit select currency for additional cost component
        // if its diff ccy then emit the payable currency
        if (this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].PaymentDifferentCurrency ||
            this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].ReceiptDifferentCurrency) {
            this.currencySelected.emit(this.bankCurrencyCtrl.value.currencyCode);
            this.previousPaymentCurrency = this.bankCurrencyCtrl.value.currencyCode;
            this.previousFxRateValue = this.fxRateCtrl.value;
            // validate whether both currency are USD or atleast one currency should be USD
            if (this.currencyCtrl.value.currencyCode === this.bankCurrencyCtrl.value.currencyCode) {
                this.snackbarService.throwErrorSnackBar('Both the currencies cannot be same');
                this.bankCurrencyCtrl.reset();
                this.fxRateCtrl.reset();
                return;
            }
            else if (this.currencyCtrl.value.currencyCode !== 'USD' && this.bankCurrencyCtrl.value.currencyCode !== 'USD') {
                this.snackbarService.throwErrorSnackBar('One of the currency Must be USD');
                this.bankCurrencyCtrl.reset();
                this.fxRateCtrl.reset();
                return;
            }
            var result = this.calculateFxrateTolarenceValue();
            if (!result) {
                this.isFxRateValid = false;
                this.snackbarService.throwErrorSnackBar('FX Rate difference should be within 10% threshold.');
                return;
            }
            else {
                this.isFxRateValid = true;
            }
        }
        else {
            this.currencySelected.emit(this.currencyCtrl.value.currencyCode);
        }
        this.isLoading = true;
        if (this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].PaymentFullPartialTransaction
            || this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].PaymentDifferentClient) {
            if (this.counterpartyCtrl.valid && this.currencyCtrl.valid) {
                if (!this.isInvoiceSelected) {
                    this.currencyValue = this.currencyCtrl.value.currencyCode;
                    this.clientNameValue = this.clientNameCtrl.value;
                    this.docReferenceValue = this.docReferenceCtrl.value ?
                        this.docReferenceCtrl.value.invoiceDocumentReference : null;
                    this.invoiceSearchValues.emit({
                        counterparty: this.counterpartyValue,
                        department: this.departmentsCtrl.value !== null ?
                            this.departmentsCtrl.value.departmentCode : this.departmentsCtrl.value,
                        currency: this.currencyValue,
                        clientName: this.clientNameValue,
                    });
                    this.getInvoiceToMatch();
                }
                else {
                    this.snackbarService.throwErrorSnackBar('Cannot Search when invoice is selected');
                    this.isLoading = false;
                }
            }
        }
        else if (this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].ReceiptFullPartialTransaction
            || this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].ReceiptDifferentCurrency) {
            if (!this.isInvoiceSelected) {
                this.currencyValue = this.currencyCtrl.value.currencyCode;
                this.clientNameValue = this.clientNameCtrl.value;
                this.docReferenceValue = this.docReferenceCtrl.value ?
                    this.docReferenceCtrl.value.invoiceDocumentReference : null;
                if (this.totalAmount) {
                    this.invoiceAmount = Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(this.totalAmount);
                }
                this.getInvoiceToMatch();
            }
            else {
                this.snackbarService.throwErrorSnackBar('Cannot Search when invoice is selected');
                this.isLoading = false;
            }
        }
        else if (this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].PaymentDifferentCurrency) {
            if (this.currencyCtrl.value.currencyCode !== this.bankCurrencyCtrl.value.currencyCode) {
                if (this.counterpartyCtrl.valid && this.currencyCtrl.valid && this.bankCurrencyCtrl.valid
                    && this.isFxRateValid) {
                    if (!this.isInvoiceSelected) {
                        this.counterpartyValue = this.counterpartyCtrl.value.counterpartyCode;
                        this.currencyValue = this.currencyCtrl.value.currencyCode;
                        this.clientNameValue = this.clientNameCtrl.value;
                        this.docReferenceValue = this.docReferenceCtrl.value ?
                            this.docReferenceCtrl.value.invoiceDocumentReference : null;
                        this.invoiceSearchValues.emit({
                            counterparty: this.counterpartyValue,
                            department: this.departmentsCtrl.value !== null ?
                                this.departmentsCtrl.value.departmentCode : this.departmentsCtrl.value,
                            currency: this.currencyValue,
                            clientName: this.clientNameValue,
                            bankCurrency: this.bankCurrencyCtrl.value.currencyCode,
                            fxRate: this.fxRateCtrl.value,
                            roeType: this.roeType,
                        });
                        this.getInvoiceToMatch();
                    }
                    else {
                        this.snackbarService.throwErrorSnackBar('Cannot Search when invoice is selected');
                        this.isLoading = false;
                    }
                }
            }
            else {
                this.snackbarService.throwErrorSnackBar('only one currency can be USD');
            }
        }
        this.isSearchApplied = true;
    };
    InvoiceMatchingComponent.prototype.getInvoiceToMatch = function () {
        var _this = this;
        var counterparty = this.getCounterpartyDetails(this.masterData, this.counterpartyCtrl.value.counterpartyCode, false);
        var counterPartyId;
        if (counterparty && counterparty.length > 0) {
            counterPartyId = counterparty[0].counterpartyID;
        }
        if (!this.departmentsCtrl.value) {
            this.departmentValue = null;
        }
        this.getInvoiceForMatchSubscription = this.executionService
            .getInvoiceToMatch(counterPartyId.toString(), this.departmentValue, this.currencyCtrl.value.currencyCode, this.isEdit, this.matchFlagId, this.docReferenceValue)
            .subscribe(function (data) {
            if (data && data.value.length > 0) {
                _this.cashMatching = _this.populateData(data.value);
                _this.initializeGridColumns();
                _this.invoiceMatchingGridRows = _this.cashMatching;
                _this.isLoading = false;
                _this.dataLength = _this.invoiceMatchingGridRows.length;
                _this.gridApi.setRowData(_this.invoiceMatchingGridRows);
                var selectedRows_1 = [];
                _this.invoiceMatchingGridRows.forEach(function (item) {
                    // in Edit mode , bind ischecked=true for prematched documents
                    if (item.amountToBePaid && item.amountToBePaid !== 0) {
                        item.isChecked = true;
                    }
                    if (item.isChecked === true) {
                        // check for diff ccy
                        if (_this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].PaymentDifferentCurrency
                            || _this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].ReceiptDifferentCurrency) {
                            if (_this.roeType) {
                                item.amountPaidInDiffCcy =
                                    _this.roeType === 'M' ? item.amount * _this.fxRateCtrl.value :
                                        item.amount / _this.fxRateCtrl.value;
                            }
                        }
                        selectedRows_1.push(item);
                    }
                });
                _this.calculateAmountOrBalanceForInvoiceSelected(selectedRows_1);
                _this.selectedInvoiceToMatch = selectedRows_1;
                _this.isInvoiceSelected = selectedRows_1.length > 0;
                _this.AmountEnterOrInvoiceSelection.emit();
                _this.invoiceSelected.emit(_this.isInvoiceSelected);
            }
            else {
                _this.snackbarService.throwErrorSnackBar('No records are available for this search criteria.');
                _this.isLoading = false;
            }
        });
    };
    InvoiceMatchingComponent.prototype.ngOnDestroy = function () {
        if (this.getInvoiceForMatchSubscription) {
            this.getInvoiceForMatchSubscription.unsubscribe();
        }
        if (this.getInvoiceByDocumentReferenceSubscription) {
            this.getInvoiceByDocumentReferenceSubscription.unsubscribe();
        }
    };
    InvoiceMatchingComponent.prototype.getInvoiceByDocumentReference = function () {
        var _this = this;
        this.getInvoiceByDocumentReferenceSubscription = this.executionService.getInvoiceToMatchByDocumentReference(this.docReferenceValue)
            .subscribe(function (data) {
            if (data && data.value.length > 0) {
                _this.cashMatching = _this.populateData(data.value);
                _this.initializeGridColumns();
                _this.invoiceMatchingGridRows = _this.cashMatching;
                _this.dataLength = _this.invoiceMatchingGridRows.length;
            }
            else {
                _this.snackbarService.throwErrorSnackBar('No records are available for this search criteria.');
            }
            _this.isLoading = false;
        });
    };
    InvoiceMatchingComponent.prototype.initializeGridColumns = function () {
        this.invoiceMatchingGridColumns = [
            {
                headerName: 'Document Reference',
                field: 'documentReference',
                colId: 'documentReference',
                hide: false,
                pinned: 'left',
            },
            {
                headerName: 'TransactionDocumentId',
                field: 'transactionDocumentId',
                colId: 'transactionDocumentId',
                hide: true,
            },
            {
                headerName: 'Transaction Direction ID',
                field: 'transactionDirectionID',
                colId: 'transactionDirectionID',
                hide: true,
            },
            {
                headerName: 'DepartmentId',
                field: 'departmentId',
                colId: 'departmentId',
                hide: true,
            },
            {
                headerName: 'Secondary Document Reference',
                field: 'secondaryDocumentReference',
                colId: 'secondaryDocumentReference',
                hide: false,
            },
            {
                headerName: 'Document Date',
                field: 'documentDate',
                colId: 'documentDate',
                hide: false,
                valueFormatter: this.dateFormatter.bind(this),
            },
            {
                headerName: 'Value Date',
                field: 'valueDate',
                colId: 'valueDate',
                hide: false,
                valueFormatter: this.dateFormatter.bind(this),
            },
            {
                headerName: 'Department',
                field: 'departmentCode',
                colId: 'departmentCode',
                hide: false,
            },
            {
                headerName: 'External Reference',
                field: 'externalReference',
                colId: 'externalReference',
                hide: false,
            },
            {
                headerName: 'Narrative',
                field: 'narrative',
                colId: 'narrative',
                hide: false,
            },
            {
                headerName: 'Charter',
                field: 'charterCode',
                colId: 'charterCode',
                hide: false,
            }, {
                headerName: 'Invoice Type',
                field: 'documentType',
                colId: 'documentType',
                hide: true,
            },
            {
                headerName: 'Account Line Type Id',
                field: 'accountLineTypeId',
                colId: 'accountLineTypeId',
                hide: true,
            },
            {
                headerName: 'Transaction Direction ID',
                field: 'transactionDirectionId',
                colId: 'transactionDirectionId',
                hide: true,
            },
            {
                headerName: 'Amount',
                field: 'amount',
                type: 'numericColumn',
                colId: 'amount',
                valueGetter: this.getAmountValue,
                hide: this.cashOption === false,
                valueFormatter: this.amountFormatter.bind(this),
                pinned: 'right',
            },
            {
                headerName: 'Amount',
                field: 'amount',
                type: 'numericColumn',
                colId: 'amount',
                valueGetter: this.getAmountValueForReceipts,
                hide: this.cashOption === true,
                valueFormatter: this.amountFormatter.bind(this),
                pinned: 'right',
            },
            {
                headerName: 'Amount To Be Paid',
                field: 'amountToBePaid',
                type: 'numericColumn',
                colId: 'amountToBePaid',
                editable: this.isAmountToBePaidEditable.bind(this),
                onCellValueChanged: this.onAmountToBePaidChange.bind(this),
                hide: false,
                valueFormatter: this.amountFormatter.bind(this),
                pinned: 'right',
                cellEditor: 'atlasNumeric',
                cellEditorParams: {
                    displayMask: Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["CustomNumberMask"])(12, 10, false),
                    isRightAligned: false,
                },
            },
            {
                headerName: 'Amount Paid(different CCY)',
                field: 'amountPaidInDiffCcy',
                type: 'numericColumn',
                hide: true,
                colId: 'amountPaidInDiffCcy',
                valueFormatter: this.amountFormatter.bind(this),
                pinned: 'right',
                cellEditor: 'atlasNumeric',
                cellEditorParams: {
                    displayMask: Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["CustomNumberMask"])(12, 10, false),
                    isRightAligned: false,
                },
            },
            {
                headerName: 'Document Reference',
                field: 'documentReference',
                colId: 'documentReference',
                pinned: 'right',
                hide: false,
            },
            {
                headerName: '',
                field: 'isChecked',
                colId: 'isChecked',
                width: 40,
                minWidth: 40,
                maxWidth: 40,
                pinned: 'right',
                checkboxSelection: true,
                headerCheckboxSelection: true,
            },
            {
                headerName: 'Invoice GLDate',
                field: 'invoiceGLDate',
                colId: 'invoiceGLDate',
                valueFormatter: this.dateFormatter.bind(this),
                hide: true,
            },
        ];
    };
    InvoiceMatchingComponent.prototype.filterCurrencies = function () {
        var _this = this;
        var currencyList = [];
        this.filteredCurrencyList = this.masterData.currencies;
        currencyList = this.filteredCurrencyList;
        this.currencyCtrl.valueChanges.subscribe(function (input) {
            _this.filteredCurrencyList = _this.utilService.filterListforAutocomplete(input, currencyList, ['currencyCode', 'description']);
            if (_this.currencyCtrl.valid) {
                _this.onCurrencyChange();
            }
            else {
                _this.docReferenceCtrl.reset();
            }
        });
    };
    InvoiceMatchingComponent.prototype.filterBankCurrencies = function () {
        var _this = this;
        var bankCurrencyList = [];
        if (this.currencyCtrl.valid && this.currencyCtrl.value) {
            this.filteredBankCurrencylist = this.masterData.currencies.filter(function (item) { return item.currencyCode !== _this.currencyCtrl.value; });
        }
        else {
            this.filteredBankCurrencylist = this.masterData.currencies;
        }
        bankCurrencyList = this.filteredBankCurrencylist;
        this.bankCurrencyCtrl.valueChanges.subscribe(function (input) {
            _this.filteredBankCurrencylist = _this.utilService.filterListforAutocomplete(input, bankCurrencyList, ['currencyCode', 'description']);
            if (_this.bankCurrencyCtrl.valid) {
                _this.onCurrencyChange();
            }
            else {
                _this.docReferenceCtrl.reset();
            }
        });
    };
    InvoiceMatchingComponent.prototype.isAmountToBePaidEditable = function (params) {
        if ((this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].ReceiptFullPartialTransaction)
            || (this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].PaymentFullPartialTransaction)
            || (this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].PaymentDifferentClient)) {
            return params.node.selected ? true : false;
        }
        else {
            return false;
        }
    };
    InvoiceMatchingComponent.prototype.onAmountToBePaidChange = function (params) {
        var _this = this;
        var list = [];
        var amountPrev = 0;
        // check for zero and -Ve numbers
        if (params.data.amountToBePaid < 0) {
            var amount = params.data.amount;
            params.node.setDataValue('amountToBePaid', amount);
            this.snackbarService.throwErrorSnackBar('Amount to be paid can not be negative or zero.');
        }
        else if (params.data.amountToBePaid > Math.abs(params.data.amount)) {
            params.node.setDataValue('amountToBePaid', '');
            params.node.setSelected(false);
            this.snackbarService.throwErrorSnackBar('Amount to be paid must be less than or equal to absolute value of Amount.');
        }
        else if (Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(params.data.amountToBePaid) < Math.abs(params.data.amount)) {
            var selectedRows_2 = [];
            if (this.gridApi) {
                this.gridApi.forEachNode(function (item) {
                    if (item.data.isChecked === true) {
                        selectedRows_2.push(item.data);
                    }
                });
            }
            selectedRows_2.forEach(function (selectedInvoiceRow) {
                var amountToBePaid = selectedInvoiceRow.amountToBePaid ? selectedInvoiceRow.amountToBePaid : 0;
                if (_this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].PaymentFullPartialTransaction
                    || _this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].PaymentDifferentClient) {
                    if (_this.isDocumentTypePurchaseInvoiceOrCreditNote(selectedInvoiceRow.documentType)) {
                        _this.totalBalance = _this.totalBalance
                            - Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(amountToBePaid);
                    }
                    else if (_this.isDocumentTypeSalesInvoiceOrDebitNote(selectedInvoiceRow.documentType)) {
                        _this.totalBalance = _this.totalBalance
                            + Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(amountToBePaid);
                    }
                    else {
                        // 20190506 - JEL - We are in JL  : Quickfix
                        if (amountToBePaid !== 0) {
                            _this.totalBalance = _this.totalBalance
                                + Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(amountToBePaid) * Math.sign(selectedInvoiceRow.amount);
                        }
                    }
                    _this.totalBalanceValue.emit({ value: _this.totalBalance });
                }
                else if (_this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].ReceiptFullPartialTransaction) {
                    amountPrev = _this.totalAmount;
                    if (_this.isDocumentTypePurchaseInvoiceOrCreditNote(selectedInvoiceRow.documentType)) {
                        list.push(Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(amountToBePaid));
                    }
                    else if (_this.isDocumentTypeSalesInvoiceOrDebitNote(selectedInvoiceRow.documentType)) {
                        amountPrev = _this.totalAmount;
                        list.push(-Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(amountToBePaid));
                    }
                    else {
                        // 20190506 - JEL - We are in JL  : Quickfix
                        // should take opposite sign of JL, but as the subsequent operation is substraction (-), it is already taken
                        if (amountToBePaid !== 0) {
                            list.push(+Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(amountToBePaid) * Math.sign(selectedInvoiceRow.amount) * -1);
                        }
                    }
                }
                else if (_this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].PaymentDifferentCurrency) {
                    // We do nothing here, see invoice-matching.component.ts --> calculateBalanceWithCost() where the calculation is completed
                }
                else if (_this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].ReceiptDifferentCurrency) {
                    amountPrev = _this.totalAmount;
                    if (_this.isDocumentTypePurchaseInvoiceOrCreditNote(selectedInvoiceRow.documentType)) {
                        list.push(Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(selectedInvoiceRow.amountPaidInDiffCcy));
                    }
                    else if (_this.isDocumentTypeSalesInvoiceOrDebitNote(selectedInvoiceRow.documentType)) {
                        amountPrev = _this.totalAmount;
                        list.push(-Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(selectedInvoiceRow.amountPaidInDiffCcy));
                    }
                }
            });
            if (this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].ReceiptFullPartialTransaction) {
                this.invoiceAmount = (list && list.length > 0) ?
                    amountPrev + list.map(function (a) { return a; }).reduce(function (sum, current) { return sum + current; })
                    : this.totalAmount;
                this.invoiceAmountValue.emit({ value: this.invoiceAmount });
            }
        }
        // params.context.component.AmountEnterOrInvoiceSelection.emit();
    };
    InvoiceMatchingComponent.prototype.getSelectedInvoices = function () {
        var selectedGridRows = [];
        if (this.gridApi) {
            this.gridApi.forEachNode(function (item) {
                if (item.data.isChecked === true) {
                    selectedGridRows.push(item.data);
                }
            });
            var invoiceStringBuilder_1 = '';
            selectedGridRows.forEach(function (selectedInvoiceRow) {
                invoiceStringBuilder_1 += selectedInvoiceRow.externalReference + ' //';
            });
            invoiceStringBuilder_1 = invoiceStringBuilder_1.slice(0, -3);
            this.setNarrative.emit(invoiceStringBuilder_1);
        }
    };
    InvoiceMatchingComponent.prototype.invoiceForSearch = function () {
        if (this.invoiceForCashMatchingModel) {
            this.currencyCtrl.patchValue(this.invoiceForCashMatchingModel.currency);
            this.departmentsCtrl.patchValue(this.invoiceForCashMatchingModel.departmentCode);
        }
    };
    InvoiceMatchingComponent.prototype.bindCounterpartyValues = function () {
        var _this = this;
        var selectedCounterparty = this.masterData.counterparties.filter(function (counterparty) { return counterparty.counterpartyCode === _this.counterpartyValue; });
        this.counterpartyCtrl.patchValue(selectedCounterparty[0]);
        this.clientNameCtrl.patchValue(this.clientNameValue);
        this.counterpartyCtrl.disable();
        this.clientNameCtrl.disable();
    };
    InvoiceMatchingComponent.prototype.bindCurrencyCardValues = function () {
        var _this = this;
        var selectedCurrency = this.masterData.currencies.filter(function (currency) { return currency.currencyCode === _this.bankCurrencyValue; });
        this.bankCurrencyCtrl.patchValue(selectedCurrency[0]);
        this.fxRateCtrl.patchValue(this.fxRateValue);
        this.bankCurrencyCtrl.disable();
        this.fxRateCtrl.disable();
        this.divideMultiplyCtrl.patchValue(this.roeType);
        this.divideMultiplyCtrl.disable();
        this.isFXratesAvailableForCashCurrency = true;
        this.isValueBindedFromCurrencyComponent = true;
    };
    InvoiceMatchingComponent.prototype.bindCurrencyValue = function (currencyValue) {
        var selectedCurrency = this.masterData.currencies.filter(function (currency) { return currency.currencyCode === currencyValue; });
        this.currencyCtrl.patchValue(selectedCurrency[0]);
        this.currencyCtrl.disable();
    };
    InvoiceMatchingComponent.prototype.bindDepartmentValue = function () {
        var _this = this;
        var selectedDepartment = this.masterData.departments.filter(function (department) { return department.departmentId.toString() === _this.departmentId; });
        this.departmentsCtrl.patchValue(selectedDepartment[0]);
        this.departmentsCtrl.disable();
        var selectedDepartments = this.departmentsCtrl;
        if (selectedDepartments) {
            this.departmentValue = selectedDepartments.value;
        }
    };
    InvoiceMatchingComponent.prototype.getAmountValue = function (params) {
        var commonMethods = new _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_27__["CommonMethods"]();
        return params.data.amount *
            commonMethods.getSignedValueForDocumentAmountBasedOnDocumentTypeAndCostDirection(params.data.documentType, _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_11__["CashType"].CashPayment, params.data, true);
    };
    InvoiceMatchingComponent.prototype.getAmountValueForReceipts = function (params) {
        var commonMethods = new _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_27__["CommonMethods"]();
        return params.data.amount *
            commonMethods.getSignedValueForDocumentAmountBasedOnDocumentTypeAndCostDirection(params.data.documentType, _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_11__["CashType"].CashReceipt, params.data, true);
    };
    InvoiceMatchingComponent.prototype.dateFormatter = function (param) {
        if (param.value) {
            return this.formatDate.transform(param.value);
        }
    };
    InvoiceMatchingComponent.prototype.amountFormatter = function (param) {
        if (param.value) {
            var commonMethods = new _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_27__["CommonMethods"]();
            return commonMethods.getFormattedNumberValue(param.value);
        }
    };
    InvoiceMatchingComponent.prototype.onSelectionChanged = function (event) {
        event.data.isChecked = event.node.selected;
        if (event.node.selected) {
            if (event.data.amountToBePaid === 0) {
                event.node.setDataValue('amountToBePaid', Math.abs(event.data.amount));
            }
            else {
                event.node.setDataValue('amountToBePaid', event.data.amountToBePaid);
            }
        }
        else {
            event.node.setDataValue('amountToBePaid', 0);
        }
        if (this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].PaymentDifferentCurrency
            || this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].ReceiptDifferentCurrency) {
            if (event.node.selected) {
                if (this.roeType === 'D') {
                    event.data.amountPaidInDiffCcy =
                        (event.data.amountToBePaid / Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(this.fxRateCtrl.value)).toFixed(2);
                }
                else if (this.roeType === 'M') {
                    event.data.amountPaidInDiffCcy =
                        (event.data.amountToBePaid * Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(this.fxRateCtrl.value)).toFixed(2);
                }
                event.node.setDataValue('amountPaidInDiffCcy', event.data.amountPaidInDiffCcy);
            }
            else {
                event.node.setDataValue('amountPaidInDiffCcy', '');
            }
        }
        this.totalBalance = 0;
        this.formattedBalance = 0;
        if (this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].ReceiptFullPartialTransaction
            || this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].ReceiptDifferentCurrency) {
            this.invoiceAmount = Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(this.totalAmount.toFixed(2));
        }
        var selectedRows = [];
        if (this.gridApi) {
            this.gridApi.forEachNode(function (item) {
                if (item.data.isChecked === true) {
                    selectedRows.push(item.data);
                }
            });
        }
        if (this.calculateAmountOrBalanceForInvoiceSelected) {
            this.calculateAmountOrBalanceForInvoiceSelected(selectedRows);
        }
        this.isInvoiceSelected = selectedRows.length > 0;
        this.invoiceSelected.emit(this.isInvoiceSelected);
        this.selectedInvoiceToMatch = selectedRows;
        // this.AmountEnterOrInvoiceSelection.emit();
    };
    InvoiceMatchingComponent.prototype.populateEntity = function (entity) {
        var cashRecord = entity;
        cashRecord.matchFlagId = this.matchFlagId;
        var selectedRows = [];
        this.gridApi.forEachNode(function (item) {
            if (item.data.isChecked === true) {
                selectedRows.push(item.data);
            }
        });
        cashRecord.documentMatchings = selectedRows;
        this.selectedInvoiceToMatch = selectedRows;
        // NOTE: As currently we have fxrates convertion for only USD=>other ccy (i.e. EUR or AED)
        if (this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].PaymentDifferentCurrency ||
            this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].ReceiptDifferentCurrency) {
            cashRecord.currencyCode = this.bankCurrencyCtrl.value.currencyCode;
            cashRecord.matchingRate = this.fxRateCtrl.value;
            cashRecord.matchingRateType = this.roeType;
            cashRecord.cashCurrencyRate = this.fxRateCtrl.value;
            cashRecord.cashCurrencyRoeType = this.roeType;
            cashRecord.cashCurrencyCode = this.bankCurrencyCtrl.value.currencyCode;
        }
        else {
            cashRecord.cashCurrencyRate = this.cashCurrencyRate;
            cashRecord.cashCurrencyRoeType = this.cashCurrencyRoeType === 'M' ? 'D' : 'M';
            cashRecord.cashCurrencyCode = this.cashCurrencyCode;
        }
        return cashRecord;
    };
    InvoiceMatchingComponent.prototype.onCounterpartySelected = function (counterpartySelected) {
        if (counterpartySelected) {
            this.clientNameCtrl.patchValue(counterpartySelected.description);
            this.counterpartyValue = counterpartySelected.counterpartyCode;
        }
        this.clientNameCtrl.disable();
    };
    InvoiceMatchingComponent.prototype.onDocumentReferenceSelection = function () {
        this.setDetailsOndocumentReferenceSelection();
    };
    InvoiceMatchingComponent.prototype.onKeydown = function (event) {
        this.setDetailsOndocumentReferenceSelection();
    };
    InvoiceMatchingComponent.prototype.setDetailsOndocumentReferenceSelection = function () {
        var _this = this;
        this.clearInvoiceSelection();
        if (!this.docReferenceCtrl.valid) {
            return;
        }
        this.isLoading = true;
        var documentReference = this.docReferenceCtrl.value.invoiceDocumentReference;
        if (documentReference) {
            this.getInvoiceByDocumentReferenceSubscription = this.executionService.getInvoiceToMatchByDocumentReference(documentReference)
                .subscribe(function (data) {
                if (data && data.value.length > 0) {
                    _this.cashSelectionModel = data.value[0];
                    _this.filteredClientRefCurrency = data.value[0];
                    _this.bindDropdownListsFromEntity(_this.cashSelectionModel.counterPartyId, _this.cashSelectionModel.currencyCode, _this.cashSelectionModel.departmentId);
                    _this.onSearchButtonClicked();
                }
                _this.isLoading = false;
            });
        }
        else {
            this.isLoading = false;
        }
    };
    InvoiceMatchingComponent.prototype.onDocumentReferenceSelected = function (documentReference) {
        this.setDetailsOndocumentReferenceSelection();
    };
    InvoiceMatchingComponent.prototype.onBankCurrencyEntered = function (bankCurrency) {
        var _this = this;
        this.currencyFrom = this.currencyCtrl.value.currencyCode;
        this.currencyTo = bankCurrency.currencyCode;
        if (!this.isValueBindedFromCurrencyComponent) {
            this.isLoading = true;
            this.executionService.getForeignExchangeRateByCurrency(this.currencyFrom, this.currencyTo).subscribe(function (data) {
                if (data) {
                    _this.cashSelectionModel = data;
                    _this.fxRateCtrl.setValue(_this.cashSelectionModel.rate);
                    _this.actualFxrateValue = Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(_this.fxRateCtrl.value);
                    _this.tolarence = _this.fxRateCtrl.value * 0.1;
                    _this.divideMultiplyCtrl.patchValue(_this.cashSelectionModel.roeType);
                    _this.roeType = _this.cashSelectionModel.roeType;
                    _this.isFXratesAvailableForCashCurrency = true;
                }
                else {
                    _this.fxRateCtrl.reset();
                    _this.divideMultiplyCtrl.reset();
                    _this.snackbarService.throwErrorSnackBar('FX Rate details not available for these currencies.');
                    _this.isFXratesAvailableForCashCurrency = false;
                }
                _this.isLoading = false;
            });
        }
    };
    InvoiceMatchingComponent.prototype.onCurrencyOptionSelected = function (currencyValue) {
        this.clearInvoiceSelection();
        this.currencyRoeType = currencyValue.roeType;
        this.fxRateCtrl.reset();
        this.bankCurrencyCtrl.reset();
        this.currencySelected.emit(currencyValue.currencyCode);
        // bind bank currency except selected matching currency
        this.filterBankCurrencies();
    };
    InvoiceMatchingComponent.prototype.onDivideOptionSelected = function () {
        if (this.roeType === 'D') {
            return true;
        }
        else {
            return false;
        }
    };
    InvoiceMatchingComponent.prototype.onMultiplyOptionSelected = function () {
        if (this.roeType === 'M') {
            return true;
        }
        else {
            return false;
        }
    };
    InvoiceMatchingComponent.prototype.onDivideMultiplyToggleChanges = function (type) {
    };
    InvoiceMatchingComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            counterpartyCtrl: this.counterpartyCtrl,
            clientNameCtrl: this.clientNameCtrl,
            currencyCtrl: this.currencyCtrl,
            departmentCodeCtrl: this.departmentsCtrl,
            docReferenceCtrl: this.docReferenceCtrl,
            secDocReferenceCtrl: this.secDocReferenceCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    InvoiceMatchingComponent.prototype.populateInvoices = function (value) {
        var invoicesForMatching = new _shared_services_execution_dtos_invoice_for_cash__WEBPACK_IMPORTED_MODULE_18__["InvoiceForCashMatching"]();
        invoicesForMatching.invoiceDocumentReference = value.invoiceDocumentReference;
        return invoicesForMatching;
    };
    InvoiceMatchingComponent.prototype.bindDropdownListsFromEntity = function (counterpartyId, currencyCode, departmentId) {
        if (counterpartyId) {
            var counterparty = this.masterData.counterparties.filter(function (item) { return item.counterpartyID === counterpartyId; });
            if (counterparty.length > 0) {
                this.counterpartyCtrl.setValue(counterparty[0]);
                this.clientNameCtrl.setValue(counterparty[0].description);
                this.counterpartyValue = counterparty[0].counterpartyCode;
            }
        }
        if (currencyCode) {
            var currency = this.masterData.currencies.filter(function (item) { return item.currencyCode === currencyCode; });
            this.currencyCtrl.setValue(currency[0]);
            this.currencyValue = currencyCode;
            this.currencySelected.emit(this.currencyValue);
            this.filterBankCurrencies();
        }
        if (departmentId) {
            var department = this.masterData.departments.filter(function (item) { return item.departmentId === departmentId; });
            if (department.length > 0) {
                this.departmentsCtrl.setValue(department[0]);
            }
        }
    };
    InvoiceMatchingComponent.prototype.populateData = function (values) {
        var _this = this;
        if (values && values.length > 0) {
            values.forEach(function (item) {
                item.paymentTermCode = _this.getPaymentTermCode(item);
                item.departmentCode = _this.bindDepartmentDetails(item.departmentId);
            });
            // fetch charter details
            this.executionService.getCharters()
                .subscribe(function (charterdata) {
                if (charterdata.value) {
                    _this.charters = charterdata.value.map(function (charter) {
                        return new _shared_models_charter_display_view__WEBPACK_IMPORTED_MODULE_13__["CharterDisplayView"](charter);
                    });
                    values.forEach(function (item) {
                        item.charterCode = _this.getCharterReference(item);
                    });
                }
            });
        }
        return values;
    };
    InvoiceMatchingComponent.prototype.getCharterReference = function (entity) {
        if (entity.charterId && this.charters && this.charters.length > 0) {
            var filteredCharter = this.charters.filter(function (item) { return item.charterId === entity.charterId; });
            if (filteredCharter.length > 0) {
                return filteredCharter[0].charterCode;
            }
        }
        return '';
    };
    InvoiceMatchingComponent.prototype.getPaymentTermCode = function (entity) {
        if (entity && entity.paymentTermId) {
            var paymentTerm = this.masterData.paymentTerms.filter(function (item) { return item.paymentTermsId === entity.paymentTermId; });
            entity.paymentTermCode = paymentTerm.length > 0 ? paymentTerm[0].paymentTermCode : '';
        }
        return entity.paymentTermCode;
    };
    InvoiceMatchingComponent.prototype.initForm = function (entity, isEdit) {
        if (entity.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].PaymentDifferentCurrency ||
            entity.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].ReceiptDifferentCurrency) {
            this.bindDropdownListsFromEntity(entity.counterPartyId, entity.matchingCurrency, entity.departmentId);
        }
        else {
            this.bindDropdownListsFromEntity(entity.counterPartyId, entity.currencyCode, entity.departmentId);
        }
        if (entity.documentMatchings && entity.documentMatchings.length > 0) {
            this.selectedValue = entity.cashTypeId;
            this.isEdit = isEdit ? true : false;
            this.matchFlagId = entity.matchFlagId;
            // if the cashtype is for diff CCY
            if (entity.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].PaymentDifferentCurrency ||
                entity.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].ReceiptDifferentCurrency) {
                this.bankCurrencyCtrl.patchValue(entity.currencyCode);
                this.fxRateCtrl.patchValue(entity.matchingRate);
                this.divideMultiplyCtrl.patchValue(entity.matchingRateType);
                this.roeType = entity.matchingRateType;
                // assign total amount value
                this.totalAmount = entity.amount;
                this.isFXratesAvailableForCashCurrency = true;
                this.currencySelected.emit(entity.currencyCode);
            }
            else if (entity.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].ReceiptFullPartialTransaction) {
                this.totalAmount = entity.amount;
                this.currencySelected.emit(this.currencyCtrl.value.currencyCode);
            }
            this.onSearchButtonClicked();
        }
        return entity;
    };
    InvoiceMatchingComponent.prototype.getCounterpartyDetails = function (masterData, value, isFilterBasedOnCounterpartyId) {
        var counterparty = masterData.counterparties.filter(function (item) {
            return isFilterBasedOnCounterpartyId ?
                item.counterpartyID === value
                : item.counterpartyCode === value;
        });
        if (counterparty.length > 0) {
            return counterparty;
        }
    };
    InvoiceMatchingComponent.prototype.onDepartmentCodeSelected = function (departmentCode) {
        this.clearInvoiceSelection();
        var selectedDepartments = this.masterData.departments.find(function (department) { return department.departmentCode === departmentCode; });
        this.departmentValue = (selectedDepartments) ?
            selectedDepartments.departmentId : this.departmentValue = null;
    };
    InvoiceMatchingComponent.prototype.getDepartment = function (departmentCode, departmentId) {
        var department = this.masterData.departments.filter(function (item) { return (departmentCode && departmentCode !== null) ? item.departmentCode === departmentCode :
            item.departmentId === departmentId; });
        if (department.length > 0) {
            return department;
        }
    };
    InvoiceMatchingComponent.prototype.bindDepartmentDetails = function (departmentId) {
        var department = this.getDepartment(null, departmentId);
        return (department && department.length > 0) ? department[0].departmentCode + ' | ' + department[0].description : null;
    };
    InvoiceMatchingComponent.prototype.clearDropdownControls = function () {
        this.counterpartyCtrl.reset();
        this.departmentsCtrl.reset();
        this.currencyCtrl.reset();
        this.clientNameCtrl.reset();
    };
    // clear invoice list if any searchable control values changes
    InvoiceMatchingComponent.prototype.clearInvoiceSelection = function () {
        this.clearInvoiceGrid();
        if (this.cashTypeId === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_11__["CashType"].CashPayment) {
            this.totalAmount = 0;
            this.totalBalance = 0;
        }
    };
    InvoiceMatchingComponent.prototype.clearAllControls = function () {
        this.clearDropdownControls();
        this.clearInvoiceSelection();
        this.docReferenceCtrl.reset();
        this.secDocReferenceCtrl.reset();
        this.bankCurrencyCtrl.reset();
        this.fxRateCtrl.reset();
        this.divideMultiplyCtrl.reset();
    };
    InvoiceMatchingComponent.prototype.calculateFxrateTolarenceValue = function () {
        var modifiedFxRate = this.fxRateCtrl.value;
        this.maxFxRateValue = this.actualFxrateValue * 1.1;
        this.minFxRateValue = this.actualFxrateValue * 0.9;
        if ((modifiedFxRate > this.maxFxRateValue) || (modifiedFxRate < this.minFxRateValue)) {
            return false;
        }
        else {
            return true;
        }
    };
    InvoiceMatchingComponent.prototype.isDocumentTypePurchaseInvoiceOrCreditNote = function (documentType) {
        if (documentType) {
            return documentType === _shared_enums_transaction_document_enum__WEBPACK_IMPORTED_MODULE_12__["TransactionDocument"].PurchaseInvoice ||
                documentType === _shared_enums_transaction_document_enum__WEBPACK_IMPORTED_MODULE_12__["TransactionDocument"].CreditNote
                ? true : false;
        }
    };
    InvoiceMatchingComponent.prototype.isDocumentTypeSalesInvoiceOrDebitNote = function (documentType) {
        if (documentType) {
            return documentType === _shared_enums_transaction_document_enum__WEBPACK_IMPORTED_MODULE_12__["TransactionDocument"].SalesInvoice ||
                documentType === _shared_enums_transaction_document_enum__WEBPACK_IMPORTED_MODULE_12__["TransactionDocument"].DebitNote
                ? true : false;
        }
    };
    // this method is used to calculate totalamount or totalbalance when invoices are selected.
    InvoiceMatchingComponent.prototype.calculateAmountOrBalanceForInvoiceSelected = function (selectedRows) {
        var _this = this;
        if (selectedRows && selectedRows.length > 0) {
            selectedRows.forEach(function (selectedInvoiceRow) {
                var amountToBePaid = selectedInvoiceRow.amountToBePaid ? selectedInvoiceRow.amountToBePaid : 0;
                if (_this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].PaymentFullPartialTransaction
                    || _this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].PaymentDifferentClient) {
                    if (_this.isDocumentTypePurchaseInvoiceOrCreditNote(selectedInvoiceRow.documentType)) {
                        _this.totalBalance -= amountToBePaid;
                    }
                    else if (_this.isDocumentTypeSalesInvoiceOrDebitNote(selectedInvoiceRow.documentType)) {
                        _this.totalBalance += amountToBePaid;
                    }
                    else {
                        // 20190506 - JEL - We are in JL  : Quickfix
                        if (amountToBePaid !== 0) {
                            _this.totalBalance = _this.totalBalance
                                + Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(amountToBePaid) * Math.sign(selectedInvoiceRow.amount);
                        }
                    }
                }
                else if (_this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].ReceiptFullPartialTransaction) {
                    if (_this.isDocumentTypePurchaseInvoiceOrCreditNote(selectedInvoiceRow.documentType)) {
                        _this.invoiceAmount += Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(amountToBePaid);
                    }
                    else if (_this.isDocumentTypeSalesInvoiceOrDebitNote(selectedInvoiceRow.documentType)) {
                        _this.invoiceAmount -= Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(amountToBePaid);
                    }
                    else {
                        // 20190506 - JEL - We are in JL  : Quickfix
                        if (amountToBePaid !== 0) {
                            _this.invoiceAmount = _this.invoiceAmount
                                + Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(amountToBePaid) * Math.sign(selectedInvoiceRow.amount) * -1;
                        }
                    }
                }
                else if (_this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].PaymentDifferentCurrency) {
                    if (_this.isDocumentTypePurchaseInvoiceOrCreditNote(selectedInvoiceRow.documentType)) {
                        _this.totalBalance -= Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(selectedInvoiceRow.amountPaidInDiffCcy);
                    }
                    else if (_this.isDocumentTypeSalesInvoiceOrDebitNote(selectedInvoiceRow.documentType)) {
                        _this.totalBalance += selectedInvoiceRow.amountPaidInDiffCcy;
                    }
                }
                else if (_this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].ReceiptDifferentCurrency) {
                    if (_this.isDocumentTypePurchaseInvoiceOrCreditNote(selectedInvoiceRow.documentType)) {
                        _this.invoiceAmount += Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(selectedInvoiceRow.amountPaidInDiffCcy);
                    }
                    else if (_this.isDocumentTypeSalesInvoiceOrDebitNote(selectedInvoiceRow.documentType)) {
                        _this.invoiceAmount -= Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(selectedInvoiceRow.amountPaidInDiffCcy);
                    }
                }
            });
            this.totalBalance = Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(Number(this.totalBalance).toFixed(2));
            this.invoiceAmount = Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_14__["ConvertToNumber"])(Number(this.invoiceAmount).toFixed(2));
            this.totalBalanceValue.emit({ value: this.totalBalance });
            this.invoiceAmountValue.emit({ value: this.invoiceAmount });
        }
    };
    InvoiceMatchingComponent.prototype.clearInvoiceGrid = function () {
        this.invoiceSelected.emit(false);
        this.isInvoiceSelected = false;
        if (this.gridApi) {
            this.gridApi.setRowData([]);
        }
    };
    // when amount is changed in details page after invoice selection
    InvoiceMatchingComponent.prototype.reCalculateTotalAmountBasedonUpdatedAmountValue = function () {
        this.AmountEnterOrInvoiceSelection.emit();
    };
    InvoiceMatchingComponent.prototype.setSearchFieldsSize = function () {
        if (this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].ReceiptDifferentCurrency
            || this.selectedValue === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_10__["CashSelectionType"].PaymentDifferentCurrency) {
            this.clientNameWidth = '25%';
            this.secDocReferenceWidth = '14%';
        }
        else {
            this.clientNameWidth = '30%';
            this.secDocReferenceWidth = '18%';
        }
    };
    InvoiceMatchingComponent.prototype.isSearchRequired = function () {
        return (!this.isSearchApplied
            || !this.selectedInvoiceToMatch
            || (this.selectedInvoiceToMatch && this.selectedInvoiceToMatch.length === 0));
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], InvoiceMatchingComponent.prototype, "totalBalanceValue", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], InvoiceMatchingComponent.prototype, "invoiceSearchValues", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], InvoiceMatchingComponent.prototype, "selectedInvoiceReferences", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], InvoiceMatchingComponent.prototype, "invoiceSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], InvoiceMatchingComponent.prototype, "setNarrative", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], InvoiceMatchingComponent.prototype, "invoiceAmountValue", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], InvoiceMatchingComponent.prototype, "currencySelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], InvoiceMatchingComponent.prototype, "AmountEnterOrInvoiceSelection", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('userPreferences'),
        __metadata("design:type", _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_5__["AgGridUserPreferencesComponent"])
    ], InvoiceMatchingComponent.prototype, "userPreferencesComponent", void 0);
    InvoiceMatchingComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-invoice-matching',
            template: __webpack_require__(/*! ./invoice-matching.component.html */ "./Client/app/execution/execution-cash/execution-cash-create/pick-transaction/invoice-matching/invoice-matching.component.html"),
            styles: [__webpack_require__(/*! ./invoice-matching.component.scss */ "./Client/app/execution/execution-cash/execution-cash-create/pick-transaction/invoice-matching/invoice-matching.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_19__["FormConfigurationProviderService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_22__["MasterdataService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_26__["UtilService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_20__["ExecutionService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_24__["SnackbarService"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_25__["UiService"],
            _shared_pipes_format_date_pipe_pipe__WEBPACK_IMPORTED_MODULE_15__["FormatDatePipe"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_http_services_preaccounting_service__WEBPACK_IMPORTED_MODULE_23__["PreaccountingService"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__["CompanyManagerService"],
            _shared_services_http_services_foreign_exchange_service__WEBPACK_IMPORTED_MODULE_21__["ForeignExchangeService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_16__["AgGridService"]])
    ], InvoiceMatchingComponent);
    return InvoiceMatchingComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_6__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/pick-transaction/pick-transaction.component.html":
/*!********************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/pick-transaction/pick-transaction.component.html ***!
  \********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<atlas-invoice-matching #invoiceMatchingComponent\r\n                        (setNarrative)=\"onSetNarrative($event)\"\r\n                        (totalBalanceValue)=\"onTotalBalanceValueCalculated($event)\"\r\n                        (invoiceSearchValues)=\"onInvoiceSearchValueEntered($event)\"\r\n                        (invoiceSelected)=\"onInvoiceSelected($event)\"\r\n                        (currencySelected)=\"currencySelected($event)\"\r\n                        (invoiceAmountValue)=\"onInvoiceAmountEntered($event)\"\r\n                        (AmountEnterOrInvoiceSelection)=\"OnAmountEnterOrInvoiceSelection()\">\r\n</atlas-invoice-matching>\r\n<div fxLayout=\"column\"\r\n     fxLayoutAlign=\"start left\">\r\n    <atlas-additional-costs (proceedClickedCashReceipt)=\"onProceedClickedCashReceipt()\"\r\n                            (calculateBalanceOnCostAmountEnter)=\"calculateBalanceOnCostAmountEnter()\"\r\n                            #additionalCostsFormComponent></atlas-additional-costs>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/pick-transaction/pick-transaction.component.scss":
/*!********************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/pick-transaction/pick-transaction.component.scss ***!
  \********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-create/pick-transaction/pick-transaction.component.ts":
/*!******************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-create/pick-transaction/pick-transaction.component.ts ***!
  \******************************************************************************************************************/
/*! exports provided: PickTransactionComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PickTransactionComponent", function() { return PickTransactionComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../shared/enums/cash-selection-type */ "./Client/app/shared/enums/cash-selection-type.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _cash_details_additional_costs_additional_costs_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../cash-details/additional-costs/additional-costs.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-costs/additional-costs.component.ts");
/* harmony import */ var _invoice_matching_invoice_matching_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./invoice-matching/invoice-matching.component */ "./Client/app/execution/execution-cash/execution-cash-create/pick-transaction/invoice-matching/invoice-matching.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var PickTransactionComponent = /** @class */ (function (_super) {
    __extends(PickTransactionComponent, _super);
    function PickTransactionComponent(route, router, formConfigurationProvider, formBuilder) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.router = router;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.formBuilder = formBuilder;
        _this.totalBalanceCalculated = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.cashDetailsDefaultValues = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.invoicesSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.setNarrative = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.proceedClickedCashReceipt = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.totalAmountCalculated = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.calculateTotalBalanceOnCostAmountEnter = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.AmountEnterOrInvoiceSelection = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.formComponents = [];
        _this.isSave = false;
        return _this;
    }
    PickTransactionComponent.prototype.ngOnInit = function () {
    };
    PickTransactionComponent.prototype.ngAfterViewInit = function () {
        this.pickTransactionFormGroup = this.formBuilder.group({
            counterpartyFormComponent: this.invoiceMatchingComponent.getFormGroup(),
            additionalCostsFormComponent: this.additionalCostsPickTransactionComponent.getFormGroup(),
        });
        this.formComponents.push(this.invoiceMatchingComponent, this.additionalCostsPickTransactionComponent);
    };
    PickTransactionComponent.prototype.currencySelected = function (currency) {
        this.additionalCostsPickTransactionComponent.cashCurrency = currency;
    };
    PickTransactionComponent.prototype.onProceedClickedCashReceipt = function () {
        this.proceedClickedCashReceipt.emit();
    };
    PickTransactionComponent.prototype.onSetNarrative = function (narrative) {
        this.setNarrative.emit(narrative);
    };
    PickTransactionComponent.prototype.onTotalBalanceValueCalculated = function (value) {
        this.totalBalance = value;
        this.totalBalanceCalculated.emit({ balance: this.totalBalance });
    };
    PickTransactionComponent.prototype.onInvoiceAmountEntered = function (value) {
        this.totalAmount = value;
        this.totalAmountCalculated.emit({ amount: this.totalAmount });
    };
    PickTransactionComponent.prototype.onInvoiceSelected = function (invoicesSelected) {
        this.invoicesSelected.emit(invoicesSelected);
    };
    PickTransactionComponent.prototype.onInvoiceSearchValueEntered = function (model) {
        if (model) {
            this.counterpartyValue = model.counterparty;
            this.departmentValue = model.department;
            this.currencyValue = model.currency;
            this.clientNameValue = model.clientName;
            this.fxRateValue = model.fxRate;
            this.bankCurrencyValue = model.bankCurrency;
            this.roeTypeValue = model.roeType;
            this.cashDetailsDefaultValues.emit({
                counterparty: this.counterpartyValue,
                department: this.departmentValue,
                currency: this.currencyValue,
                clientName: this.clientNameValue,
                fxRate: this.fxRateValue,
                bankCurrency: this.bankCurrencyValue,
                roeType: this.roeTypeValue,
            });
        }
    };
    PickTransactionComponent.prototype.bindSelectedValue = function (value) {
        if (value !== 0) {
            this.selectionValue = value;
            this.invoiceMatchingComponent.cashTransactionId = value;
        }
    };
    PickTransactionComponent.prototype.populateEntity = function (model) {
        if (model.childCashTypeId !== _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_4__["CashSelectionType"].SimpleCashPayment &&
            model.childCashTypeId !== _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_4__["CashSelectionType"].SimpleCashReceipt) {
            this.formComponents.forEach(function (comp) {
                comp.populateEntity(model);
            });
        }
        return model;
    };
    PickTransactionComponent.prototype.initForm = function (entity, isEdit) {
        this.formComponents.forEach(function (comp) {
            if (comp) {
                comp.initForm(entity, isEdit);
            }
        });
        return entity;
    };
    PickTransactionComponent.prototype.calculateBalanceOnCostAmountEnter = function () {
        this.calculateTotalBalanceOnCostAmountEnter.emit();
    };
    PickTransactionComponent.prototype.clearControls = function () {
        this.invoiceMatchingComponent.clearAllControls();
        this.additionalCostsPickTransactionComponent.clearAdditonalCostGrid();
    };
    PickTransactionComponent.prototype.OnAmountEnterOrInvoiceSelection = function () {
        this.AmountEnterOrInvoiceSelection.emit();
    };
    PickTransactionComponent.prototype.clearAdditonalCostGrid = function () {
        this.additionalCostsPickTransactionComponent.clearAdditonalCostGrid();
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], PickTransactionComponent.prototype, "totalBalanceCalculated", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], PickTransactionComponent.prototype, "cashDetailsDefaultValues", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], PickTransactionComponent.prototype, "invoicesSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], PickTransactionComponent.prototype, "setNarrative", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], PickTransactionComponent.prototype, "proceedClickedCashReceipt", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], PickTransactionComponent.prototype, "totalAmountCalculated", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('invoiceMatchingComponent'),
        __metadata("design:type", _invoice_matching_invoice_matching_component__WEBPACK_IMPORTED_MODULE_7__["InvoiceMatchingComponent"])
    ], PickTransactionComponent.prototype, "invoiceMatchingComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('additionalCostsFormComponent'),
        __metadata("design:type", _cash_details_additional_costs_additional_costs_component__WEBPACK_IMPORTED_MODULE_6__["AdditionalCostsFormComponent"])
    ], PickTransactionComponent.prototype, "additionalCostsPickTransactionComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], PickTransactionComponent.prototype, "calculateTotalBalanceOnCostAmountEnter", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], PickTransactionComponent.prototype, "AmountEnterOrInvoiceSelection", void 0);
    PickTransactionComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-pick-transaction',
            template: __webpack_require__(/*! ./pick-transaction.component.html */ "./Client/app/execution/execution-cash/execution-cash-create/pick-transaction/pick-transaction.component.html"),
            styles: [__webpack_require__(/*! ./pick-transaction.component.scss */ "./Client/app/execution/execution-cash/execution-cash-create/pick-transaction/pick-transaction.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_5__["FormConfigurationProviderService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"]])
    ], PickTransactionComponent);
    return PickTransactionComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-payment-list-page/execution-cash-payment-list-page.component.html":
/*!******************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-payment-list-page/execution-cash-payment-list-page.component.html ***!
  \******************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"main-container\">\r\n    <mat-card>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"start none\"\r\n             class=\"search\">\r\n            <form class=\"large-form\"\r\n                  fxFlex=\"100%\">\r\n                <mat-form-field>\r\n                    <input specialIsAlphaNumeric\r\n                           matInput\r\n                           placeholder=\"Search document reference\"\r\n                           (keydown.enter)=\"onSearchButtonClicked()\"\r\n                           [formControl]=\"searchedValueCtrl\" />\r\n                </mat-form-field>\r\n            </form>\r\n            <button mat-raised-button\r\n                    (click)=\"onSearchButtonClicked()\"\r\n                    class=\"heroGradient\"\r\n                    id=\"search-button\">\r\n                <mat-icon aria-label=\"Search\"\r\n                          class=\"search-icon\">search</mat-icon>\r\n            </button>\r\n        </div>\r\n    </mat-card>\r\n    <atlas-list-and-search class=\"default-height\" [gridCode]=\"gridCode\"\r\n                           gridTitle=\"Cash List\"\r\n                           [company]=\"company\"\r\n                           [dataLoader]=\"dataLoader\"\r\n                           [additionalFilters]=\"additionalFilters\"\r\n                           waitBeforeLoadingData=true\r\n                           (configurationLoaded)=\"initAdditionnalFilters()\"\r\n                           (rowClicked)=\"onCashClicked($event)\"\r\n                           #listAndSearchComponent>\r\n    </atlas-list-and-search>\r\n    <mat-card *ngIf=\"isLoading\">\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"center center\"\r\n             fxLayoutWrap\r\n             class=\"loading\">\r\n            <mat-spinner color=\"accent\"></mat-spinner>\r\n        </div>\r\n    </mat-card>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-payment-list-page/execution-cash-payment-list-page.component.scss":
/*!******************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-payment-list-page/execution-cash-payment-list-page.component.scss ***!
  \******************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".search button {\n  position: absolute;\n  right: 0; }\n\n:host ::ng-deep.ag-menu {\n  overflow-y: hidden !important; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-payment-list-page/execution-cash-payment-list-page.component.ts":
/*!****************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-payment-list-page/execution-cash-payment-list-page.component.ts ***!
  \****************************************************************************************************************************/
/*! exports provided: ExecutionCashPaymentListPageComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExecutionCashPaymentListPageComponent", function() { return ExecutionCashPaymentListPageComponent; });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/services/authorization.service */ "./Client/app/core/services/authorization.service.ts");
/* harmony import */ var _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component */ "./Client/app/shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_components_list_and_search_list_and_search_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../shared/components/list-and-search/list-and-search.component */ "./Client/app/shared/components/list-and-search/list-and-search.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_cash_entity__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/entities/cash.entity */ "./Client/app/shared/entities/cash.entity.ts");
/* harmony import */ var _shared_entities_list_and_search_list_and_search_filter_entity__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/entities/list-and-search/list-and-search-filter.entity */ "./Client/app/shared/entities/list-and-search/list-and-search-filter.entity.ts");
/* harmony import */ var _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../shared/entities/masterdata-props.entity */ "./Client/app/shared/entities/masterdata-props.entity.ts");
/* harmony import */ var _shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../shared/entities/window-injection-token */ "./Client/app/shared/entities/window-injection-token.ts");
/* harmony import */ var _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../shared/enums/cash-selection-type */ "./Client/app/shared/enums/cash-selection-type.ts");
/* harmony import */ var _shared_enums_list_and_search_filter_type_enum__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../shared/enums/list-and-search-filter-type.enum */ "./Client/app/shared/enums/list-and-search-filter-type.enum.ts");
/* harmony import */ var _shared_models_cash_display_view__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../shared/models/cash-display-view */ "./Client/app/shared/models/cash-display-view.ts");
/* harmony import */ var _shared_pipes_format_date_pipe_pipe__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../shared/pipes/format-date-pipe.pipe */ "./Client/app/shared/pipes/format-date-pipe.pipe.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_list_and_search_cashList_payment_data_loader__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../shared/services/list-and-search/cashList-payment-data-loader */ "./Client/app/shared/services/list-and-search/cashList-payment-data-loader.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
/* harmony import */ var _services_execution_actions_service__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../services/execution-actions.service */ "./Client/app/execution/services/execution-actions.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};























var ExecutionCashPaymentListPageComponent = /** @class */ (function (_super) {
    __extends(ExecutionCashPaymentListPageComponent, _super);
    function ExecutionCashPaymentListPageComponent(formConfigurationProvider, executionService, uiService, route, masterdataService, formatDate, executionActionsService, authorizationService, datePipe, window, gridService, dataLoader) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.executionService = executionService;
        _this.uiService = uiService;
        _this.route = route;
        _this.masterdataService = masterdataService;
        _this.formatDate = formatDate;
        _this.executionActionsService = executionActionsService;
        _this.authorizationService = authorizationService;
        _this.datePipe = datePipe;
        _this.window = window;
        _this.gridService = gridService;
        _this.dataLoader = dataLoader;
        _this.searchedValueCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_7__["AtlasFormControl"]('searchedValue');
        _this.dataLength = 0;
        _this.cashGridRows = [];
        _this.checkExportedFormat = false;
        _this.formatType = 'en-US';
        _this.cashGridOptions = {
            enableSorting: true,
            enableFilter: true,
            suppressColumnVirtualisation: true,
            isExternalFilterPresent: function () { return true; },
            doesExternalFilterPass: _this.externalFilterPass.bind(_this),
        };
        _this.masterdataList = [
            _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_10__["MasterDataProps"].Departments,
        ];
        _this.gridCode = 'cashList';
        _this.additionalFilters = [];
        _this.cashGridColumns = [
            {
                headerName: 'CashId',
                headerTooltip: 'CashId',
                field: 'costDirectionId',
                colId: 'costDirectionId',
                hide: true,
            },
            {
                headerName: 'Document reference',
                headerTooltip: 'Document reference',
                field: 'documentReference',
                colId: 'documentReference',
                headerCheckboxSelection: true,
                headerCheckboxSelectionFilteredOnly: true,
                checkboxSelection: true,
            },
            {
                headerName: 'Document Type',
                headerTooltip: 'Document Type',
                field: 'documentType',
                colId: 'documentType',
            },
            {
                // TO DO
                // this need to be discused and property will be binded later
                headerName: 'Trax Status',
                headerTooltip: 'Trax Status',
                field: 'traxStatus',
                colId: 'traxStatus',
            },
            {
                headerName: 'Document date',
                headerTooltip: 'Document date',
                field: 'documentDate',
                colId: 'documentDate',
                valueFormatter: _this.dateFormatter.bind(_this),
                cellClass: 'dateFormat',
                valueGetter: function (params) {
                    var dateFormat = _this.formatDate;
                    var val = dateFormat.transformdate(params.data.documentDate);
                    if (val) {
                        if (val.indexOf('/') < 0) {
                            return val;
                        }
                        else {
                            var split = val.split('/');
                            return split[2] + '-' + split[1] + '-' + split[0];
                        }
                    }
                },
            },
            {
                headerName: 'Value date',
                headerTooltip: 'Value date',
                field: 'valueDate',
                colId: 'valueDate',
                valueFormatter: _this.dateFormatter.bind(_this),
                cellClass: 'dateFormat',
                valueGetter: function (params) {
                    var dateFormat = _this.formatDate;
                    var val = dateFormat.transformdate(params.data.valueDate);
                    if (val && val.indexOf('/') < 0) {
                        return val;
                    }
                    var split = val.split('/');
                    return split[2] + '-' + split[1] + '-' + split[0];
                },
            },
            {
                headerName: 'Currency',
                headerTooltip: 'Currency',
                field: 'currencyCode',
                colId: 'currencyCode',
            },
            {
                headerName: 'Amount',
                headerTooltip: 'Amount',
                field: 'amount',
                type: 'numericColumn',
                colId: 'amount',
                valueFormatter: _this.formatValue.bind(_this),
            },
            {
                headerName: 'Charter reference',
                headerTooltip: 'Charter reference',
                field: 'charterCode',
                colId: 'charterCode',
            },
            {
                headerName: 'Client / Nominal account',
                headerTooltip: 'Client / Nominal account',
                field: 'counterpartyOrNominalAccountCode',
                colId: 'counterpartyOrNominalAccountCode',
            },
            {
                headerName: 'Payee / Payer',
                headerTooltip: 'Payee / Payer',
                field: 'ownerName',
                colId: 'ownerName',
            },
            {
                headerName: 'Department',
                headerTooltip: 'Department',
                field: 'departmentDescription',
                colId: 'departmentDescription',
            },
            {
                headerName: 'Posting Status',
                headerTooltip: 'Posting Status',
                field: 'status',
                colId: 'status',
            },
            {
                headerName: 'Error Message',
                headerTooltip: 'Error Message',
                field: 'errorMessage',
                colId: 'errorMessage',
            },
        ];
        _this.company = route.snapshot.paramMap.get('company');
        _this.excelStyles = [
            {
                id: 'dateFormat',
                dataType: 'dateTime',
                numberFormat: {
                    format: 'dd/mm/yyyy',
                },
            },
        ];
        _this.userActiveDirectoryName = _this.authorizationService.getCurrentUser().samAccountName;
        return _this;
    }
    ExecutionCashPaymentListPageComponent.prototype.ngOnInit = function () {
        this.atlasAgGridParam = this.gridService.getAgGridParam();
        this.masterData = this.route.snapshot.data.masterdata;
    };
    ExecutionCashPaymentListPageComponent.prototype.externalFilterPass = function (node) {
        if (this.searchedValueCtrl.value) {
            var documentRef = node.data.documentReference.toUpperCase();
            return documentRef.toString().includes(this.searchedValueCtrl.value.toUpperCase());
        }
        else {
            return node.data.documentReference;
        }
    };
    ExecutionCashPaymentListPageComponent.prototype.showOrHideColum = function (event, col) {
        var cols = this.cashGridColumns.filter(function (colf) { return colf.colId === col.colId; });
        if (cols.length === 1) {
            cols[0].hide = !(col.hide || false);
            this.gridColumnApi.setColumnVisible(col.colId, !cols[0].hide);
        }
        event.stopPropagation();
        return false;
    };
    ExecutionCashPaymentListPageComponent.prototype.onRefreshButtonClicked = function () {
        var _this = this;
        this.gridColumnApi.resetColumnState();
        this.cashGridColumns.forEach(function (colf) {
            colf.hide = !_this.gridColumnApi.getColumn(colf.colId).isVisible();
        });
        this.cashGridOptions.columnApi.autoSizeAllColumns();
    };
    ExecutionCashPaymentListPageComponent.prototype.onGridReady = function (params) {
        var _this = this;
        this.cashGridOptions = params;
        this.cashGridOptions.columnDefs = this.cashGridColumns;
        this.gridApi = this.cashGridOptions.api;
        this.gridColumnApi = this.cashGridOptions.columnApi;
        this.gridColumnApi.autoSizeAllColumns();
        this.window.onresize = function () {
            _this.gridColumnApi.autoSizeAllColumns();
        };
    };
    ExecutionCashPaymentListPageComponent.prototype.onGridSizeChanged = function (params) {
        this.gridColumnApi = params.columnApi;
        this.gridColumnApi.autoSizeAllColumns();
    };
    ExecutionCashPaymentListPageComponent.prototype.getCashList = function () {
        this.initAdditionnalFilters();
    };
    ExecutionCashPaymentListPageComponent.prototype.setDepartmentDescription = function (masterData, cash) {
        var department = masterData.departments.filter(function (item) {
            return item.departmentId === cash.departmentId;
        });
        if (department.length > 0) {
            cash.departmentDescription = department[0].departmentCode + ' | ' + department[0].description;
        }
        return cash;
    };
    ExecutionCashPaymentListPageComponent.prototype.dateFormatter = function (param) {
        if (param.value) {
            return this.formatDate.transform(param.value);
        }
    };
    ExecutionCashPaymentListPageComponent.prototype.formatValue = function (param) {
        if (isNaN(param.value) || param.value === null) {
            return '';
        }
        return new Intl.NumberFormat(this.formatType, { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(param.value);
    };
    ExecutionCashPaymentListPageComponent.prototype.onCashClicked = function (event) {
        var cashView = event.data;
        if ((cashView.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_12__["CashSelectionType"].PaymentDifferentCurrency
            || cashView.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_12__["CashSelectionType"].ReceiptDifferentCurrency)
            && cashView.paymentCashId) {
            // In case of cash diff ccy, we can only navigate to the payment cash
            var cash = new _shared_entities_cash_entity__WEBPACK_IMPORTED_MODULE_8__["CashSummary"]();
            cash.cashId = cashView.paymentCashId;
            cash.costDirectionId = cashView.costDirectionId;
            cashView = new _shared_models_cash_display_view__WEBPACK_IMPORTED_MODULE_14__["CashDisplayView"](cash);
        }
        this.executionActionsService.displayCashSubject.next(cashView);
    };
    ExecutionCashPaymentListPageComponent.prototype.onExportButtonClickedAsExcel = function () {
        var screenName;
        if (this.cashTypeId === 1) {
            screenName = 'Cash' + '' + 'Payment';
        }
        else {
            screenName = 'Cash' + '' + 'Receipt';
        }
        var now = new Date();
        var todayDate = this.datePipe.transform(now, 'yyyyMMdd_hhmm').toString().toUpperCase();
        var params = {
            fileName: todayDate + '_' + this.company + '_' + screenName + '_' + this.userActiveDirectoryName + '.xlsx',
        };
        this.gridApi.exportDataAsExcel(params);
    };
    ExecutionCashPaymentListPageComponent.prototype.onExportButtonClickedAsCSV = function () {
        var screenName = 'FX Rates';
        var now = new Date();
        var todayDate = this.datePipe.transform(now, 'yyyyMMdd_hhmm').toString().toUpperCase();
        var params = {
            fileName: todayDate + '_' + this.company + '_' + screenName + '_' + this.userActiveDirectoryName + '.csv',
        };
        this.gridApi.exportDataAsCsv(params);
    };
    ExecutionCashPaymentListPageComponent.prototype.onColumnVisibilityChanged = function (column) {
        if (this.userPreferencesComponent) {
            this.userPreferencesComponent.onChangeColumnVisibility(column);
        }
        this.cashGridOptions.columnApi.autoSizeAllColumns();
    };
    ExecutionCashPaymentListPageComponent.prototype.onCashRowClicked = function (event) {
        this.executionActionsService.displayCashSubject.next(event.data);
    };
    ExecutionCashPaymentListPageComponent.prototype.initAdditionnalFilters = function () {
        this.additionalFilters = [];
        if (this.listAndSearchComponent &&
            this.listAndSearchComponent.columnConfiguration &&
            this.listAndSearchComponent.columnConfiguration.length > 0) {
            var costDirectionId = this.listAndSearchComponent.columnConfiguration
                .find(function (column) { return column.fieldName === 'CostDirectionId'; });
            var costDirectionIdfilter = new _shared_entities_list_and_search_list_and_search_filter_entity__WEBPACK_IMPORTED_MODULE_9__["ListAndSearchFilter"]();
            costDirectionIdfilter.fieldId = costDirectionId.fieldId;
            costDirectionIdfilter.fieldName = costDirectionId.fieldName;
            costDirectionIdfilter.predicate = {
                filterType: _shared_enums_list_and_search_filter_type_enum__WEBPACK_IMPORTED_MODULE_13__["ListAndSearchFilterType"].Numeric,
                operator: 'eq',
                value1: this.cashTypeId.toString(),
            };
            costDirectionIdfilter.isActive = true;
            this.additionalFilters.push(costDirectionIdfilter);
            this.listAndSearchComponent.waitBeforeLoadingData = false;
            this.listAndSearchComponent.additionalFilters = this.additionalFilters;
            this.listAndSearchComponent.loadData(true);
        }
        else {
            return;
        }
    };
    ExecutionCashPaymentListPageComponent.prototype.onSearchButtonClicked = function () {
        this.additionalFilters = [];
        var documentReferenceField = this.listAndSearchComponent.columnConfiguration
            .find(function (column) { return column.fieldName === 'DocumentReference'; });
        var filter = new _shared_entities_list_and_search_list_and_search_filter_entity__WEBPACK_IMPORTED_MODULE_9__["ListAndSearchFilter"]();
        filter.fieldId = documentReferenceField.fieldId;
        filter.fieldName = documentReferenceField.fieldName;
        filter.predicate = {
            filterType: _shared_enums_list_and_search_filter_type_enum__WEBPACK_IMPORTED_MODULE_13__["ListAndSearchFilterType"].Text,
            operator: 'eq',
            value1: this.searchedValueCtrl.value + '%',
        };
        filter.isActive = true;
        this.additionalFilters = [filter];
        this.listAndSearchComponent.additionalFilters = this.additionalFilters;
        this.listAndSearchComponent.loadData(true);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('userPreferences'),
        __metadata("design:type", _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_4__["AgGridUserPreferencesComponent"])
    ], ExecutionCashPaymentListPageComponent.prototype, "userPreferencesComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('listAndSearchComponent'),
        __metadata("design:type", _shared_components_list_and_search_list_and_search_component__WEBPACK_IMPORTED_MODULE_6__["ListAndSearchComponent"])
    ], ExecutionCashPaymentListPageComponent.prototype, "listAndSearchComponent", void 0);
    ExecutionCashPaymentListPageComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: 'atlas-execution-cash-payment-list-page',
            template: __webpack_require__(/*! ./execution-cash-payment-list-page.component.html */ "./Client/app/execution/execution-cash/execution-cash-payment-list-page/execution-cash-payment-list-page.component.html"),
            styles: [__webpack_require__(/*! ./execution-cash-payment-list-page.component.scss */ "./Client/app/execution/execution-cash/execution-cash-payment-list-page/execution-cash-payment-list-page.component.scss")],
            providers: [_angular_common__WEBPACK_IMPORTED_MODULE_0__["DatePipe"], _shared_services_list_and_search_cashList_payment_data_loader__WEBPACK_IMPORTED_MODULE_20__["CashListPaymentDataLoader"]],
        }),
        __param(9, Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Inject"])(_shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_11__["WINDOW"])),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_17__["FormConfigurationProviderService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_18__["ExecutionService"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_21__["UiService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_19__["MasterdataService"],
            _shared_pipes_format_date_pipe_pipe__WEBPACK_IMPORTED_MODULE_15__["FormatDatePipe"],
            _services_execution_actions_service__WEBPACK_IMPORTED_MODULE_22__["ExecutionActionsService"],
            _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_3__["AuthorizationService"],
            _angular_common__WEBPACK_IMPORTED_MODULE_0__["DatePipe"],
            Window,
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_16__["AgGridService"],
            _shared_services_list_and_search_cashList_payment_data_loader__WEBPACK_IMPORTED_MODULE_20__["CashListPaymentDataLoader"]])
    ], ExecutionCashPaymentListPageComponent);
    return ExecutionCashPaymentListPageComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-receipt-list-page/execution-cash-receipt-list-page.component.html":
/*!******************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-receipt-list-page/execution-cash-receipt-list-page.component.html ***!
  \******************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"main-container\">\r\n    <mat-card>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"start none\"\r\n             class=\"search\">\r\n            <form class=\"large-form\"\r\n                  fxFlex=\"100%\">\r\n                <mat-form-field>\r\n                    <input specialIsAlphaNumeric\r\n                           matInput\r\n                           placeholder=\"Search document reference\"\r\n                           (keydown.enter)=\"onSearchButtonClicked()\"\r\n                           [formControl]=\"searchedValueCtrl\" />\r\n                </mat-form-field>\r\n            </form>\r\n            <button mat-raised-button\r\n                    (click)=\"onSearchButtonClicked()\"\r\n                    class=\"heroGradient\"\r\n                    id=\"search-button\">\r\n                <mat-icon aria-label=\"Search\"\r\n                          class=\"search-icon\">search</mat-icon>\r\n            </button>\r\n        </div>\r\n    </mat-card>\r\n    <atlas-list-and-search [gridCode]=\"gridCode\"\r\n                           gridTitle=\"Cash Receipt List\"\r\n                           [company]=\"company\"\r\n                           [dataLoader]=\"dataLoader\"\r\n                           [additionalFilters]=\"additionalFilters\"\r\n                           waitBeforeLoadingData=true\r\n                           (configurationLoaded)=\"initAdditionnalFilters()\"\r\n                           (rowClicked)=\"onCashClicked($event)\"\r\n                           #listAndSearchComponent>\r\n    </atlas-list-and-search>\r\n    <mat-card *ngIf=\"isLoading\">\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"center center\"\r\n             fxLayoutWrap\r\n             class=\"loading\">\r\n        </div>\r\n    </mat-card>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-receipt-list-page/execution-cash-receipt-list-page.component.scss":
/*!******************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-receipt-list-page/execution-cash-receipt-list-page.component.scss ***!
  \******************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash-receipt-list-page/execution-cash-receipt-list-page.component.ts":
/*!****************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash-receipt-list-page/execution-cash-receipt-list-page.component.ts ***!
  \****************************************************************************************************************************/
/*! exports provided: ExecutionCashReceiptListPageComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExecutionCashReceiptListPageComponent", function() { return ExecutionCashReceiptListPageComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _shared_services_list_and_search_cashList_receipt_data_loader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../shared/services/list-and-search/cashList-receipt-data-loader */ "./Client/app/shared/services/list-and-search/cashList-receipt-data-loader.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_pipes_format_date_pipe_pipe__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/pipes/format-date-pipe.pipe */ "./Client/app/shared/pipes/format-date-pipe.pipe.ts");
/* harmony import */ var _services_execution_actions_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../services/execution-actions.service */ "./Client/app/execution/services/execution-actions.service.ts");
/* harmony import */ var _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../core/services/authorization.service */ "./Client/app/core/services/authorization.service.ts");
/* harmony import */ var _shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../shared/entities/window-injection-token */ "./Client/app/shared/entities/window-injection-token.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component */ "./Client/app/shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component.ts");
/* harmony import */ var _shared_components_list_and_search_list_and_search_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../shared/components/list-and-search/list-and-search.component */ "./Client/app/shared/components/list-and-search/list-and-search.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_models_cash_display_view__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../shared/models/cash-display-view */ "./Client/app/shared/models/cash-display-view.ts");
/* harmony import */ var _shared_entities_list_and_search_list_and_search_filter_entity__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../shared/entities/list-and-search/list-and-search-filter.entity */ "./Client/app/shared/entities/list-and-search/list-and-search-filter.entity.ts");
/* harmony import */ var _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../shared/enums/cash-selection-type */ "./Client/app/shared/enums/cash-selection-type.ts");
/* harmony import */ var _shared_entities_cash_entity__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../shared/entities/cash.entity */ "./Client/app/shared/entities/cash.entity.ts");
/* harmony import */ var _shared_enums_list_and_search_filter_type_enum__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../shared/enums/list-and-search-filter-type.enum */ "./Client/app/shared/enums/list-and-search-filter-type.enum.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../shared/entities/masterdata-props.entity */ "./Client/app/shared/entities/masterdata-props.entity.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};























var ExecutionCashReceiptListPageComponent = /** @class */ (function (_super) {
    __extends(ExecutionCashReceiptListPageComponent, _super);
    function ExecutionCashReceiptListPageComponent(formConfigurationProvider, executionService, uiService, route, masterdataService, formatDate, executionActionsService, authorizationService, datePipe, window, gridService, dataLoader) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.executionService = executionService;
        _this.uiService = uiService;
        _this.route = route;
        _this.masterdataService = masterdataService;
        _this.formatDate = formatDate;
        _this.executionActionsService = executionActionsService;
        _this.authorizationService = authorizationService;
        _this.datePipe = datePipe;
        _this.window = window;
        _this.gridService = gridService;
        _this.dataLoader = dataLoader;
        _this.searchedValueCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_15__["AtlasFormControl"]('searchedValue');
        _this.dataLength = 0;
        _this.cashGridRows = [];
        _this.checkExportedFormat = false;
        _this.formatType = 'en-US';
        _this.cashGridOptions = {
            enableSorting: true,
            enableFilter: true,
            suppressColumnVirtualisation: true,
            isExternalFilterPresent: function () { return true; },
            doesExternalFilterPass: _this.externalFilterPass.bind(_this),
        };
        _this.masterdataList = [
            _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_22__["MasterDataProps"].Departments,
        ];
        _this.gridCode = 'receiptList';
        _this.additionalFilters = [];
        _this.defaultAdditionalFilters = [];
        _this.company = route.snapshot.paramMap.get('company');
        _this.excelStyles = [
            {
                id: 'dateFormat',
                dataType: 'dateTime',
                numberFormat: {
                    format: 'dd/mm/yyyy',
                },
            },
        ];
        _this.userActiveDirectoryName = _this.authorizationService.getCurrentUser().samAccountName;
        return _this;
    }
    ExecutionCashReceiptListPageComponent.prototype.ngOnInit = function () {
        this.atlasAgGridParam = this.gridService.getAgGridParam();
        this.masterData = this.route.snapshot.data.masterdata;
    };
    ExecutionCashReceiptListPageComponent.prototype.externalFilterPass = function (node) {
        if (this.searchedValueCtrl.value) {
            var documentRef = node.data.documentReference.toUpperCase();
            return documentRef.toString().includes(this.searchedValueCtrl.value.toUpperCase());
        }
        else {
            return node.data.documentReference;
        }
    };
    ExecutionCashReceiptListPageComponent.prototype.getCashList = function () {
        this.initAdditionnalFilters();
    };
    ExecutionCashReceiptListPageComponent.prototype.onCashClicked = function (event) {
        var cashView = event.data;
        if ((cashView.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_18__["CashSelectionType"].PaymentDifferentCurrency
            || cashView.cashTypeId === _shared_enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_18__["CashSelectionType"].ReceiptDifferentCurrency)
            && cashView.paymentCashId) {
            // In case of cash diff ccy, we can only navigate to the payment cash
            var cash = new _shared_entities_cash_entity__WEBPACK_IMPORTED_MODULE_19__["CashSummary"]();
            cash.cashId = cashView.paymentCashId;
            cash.costDirectionId = cashView.costDirectionId;
            cashView = new _shared_models_cash_display_view__WEBPACK_IMPORTED_MODULE_16__["CashDisplayView"](cash);
        }
        this.executionActionsService.displayCashSubject.next(cashView);
    };
    ExecutionCashReceiptListPageComponent.prototype.onCashRowClicked = function (event) {
        this.executionActionsService.displayCashSubject.next(event.data);
    };
    ExecutionCashReceiptListPageComponent.prototype.initAdditionnalFilters = function () {
        this.additionalFilters = [];
        if (this.listAndSearchComponent &&
            this.listAndSearchComponent.columnConfiguration &&
            this.listAndSearchComponent.columnConfiguration.length > 0) {
            var costDirectionId = this.listAndSearchComponent.columnConfiguration
                .find(function (column) { return column.fieldName === 'CostDirectionId'; });
            var costDirectionIdfilter = new _shared_entities_list_and_search_list_and_search_filter_entity__WEBPACK_IMPORTED_MODULE_17__["ListAndSearchFilter"]();
            costDirectionIdfilter.fieldId = costDirectionId.fieldId;
            costDirectionIdfilter.fieldName = costDirectionId.fieldName;
            costDirectionIdfilter.predicate = {
                filterType: _shared_enums_list_and_search_filter_type_enum__WEBPACK_IMPORTED_MODULE_20__["ListAndSearchFilterType"].Numeric,
                operator: 'eq',
                value1: this.cashTypeId.toString(),
            };
            costDirectionIdfilter.isActive = true;
            this.additionalFilters.push(costDirectionIdfilter);
            this.defaultAdditionalFilters = this.additionalFilters;
            this.listAndSearchComponent.waitBeforeLoadingData = false;
            this.listAndSearchComponent.additionalFilters = this.additionalFilters;
            this.listAndSearchComponent.loadData(true);
        }
        else {
            return;
        }
    };
    ExecutionCashReceiptListPageComponent.prototype.onSearchButtonClicked = function () {
        this.additionalFilters = this.defaultAdditionalFilters;
        var documentReferenceField = this.listAndSearchComponent.columnConfiguration
            .find(function (column) { return column.fieldName === 'DocumentReference'; });
        var filter = new _shared_entities_list_and_search_list_and_search_filter_entity__WEBPACK_IMPORTED_MODULE_17__["ListAndSearchFilter"]();
        filter.fieldId = documentReferenceField.fieldId;
        filter.fieldName = documentReferenceField.fieldName;
        filter.predicate = {
            filterType: _shared_enums_list_and_search_filter_type_enum__WEBPACK_IMPORTED_MODULE_20__["ListAndSearchFilterType"].Text,
            operator: 'eq',
            value1: this.searchedValueCtrl.value + '%',
        };
        filter.isActive = true;
        this.additionalFilters.push(filter);
        this.listAndSearchComponent.additionalFilters = this.additionalFilters;
        this.listAndSearchComponent.loadData(true);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('userPreferences'),
        __metadata("design:type", _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_13__["AgGridUserPreferencesComponent"])
    ], ExecutionCashReceiptListPageComponent.prototype, "userPreferencesComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('listAndSearchComponent'),
        __metadata("design:type", _shared_components_list_and_search_list_and_search_component__WEBPACK_IMPORTED_MODULE_14__["ListAndSearchComponent"])
    ], ExecutionCashReceiptListPageComponent.prototype, "listAndSearchComponent", void 0);
    ExecutionCashReceiptListPageComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-execution-cash-receipt-list-page',
            template: __webpack_require__(/*! ./execution-cash-receipt-list-page.component.html */ "./Client/app/execution/execution-cash/execution-cash-receipt-list-page/execution-cash-receipt-list-page.component.html"),
            styles: [__webpack_require__(/*! ./execution-cash-receipt-list-page.component.scss */ "./Client/app/execution/execution-cash/execution-cash-receipt-list-page/execution-cash-receipt-list-page.component.scss")],
            providers: [_angular_common__WEBPACK_IMPORTED_MODULE_2__["DatePipe"], _shared_services_list_and_search_cashList_receipt_data_loader__WEBPACK_IMPORTED_MODULE_1__["CashListReceiptDataLoader"]],
        }),
        __param(9, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_11__["WINDOW"])),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_3__["FormConfigurationProviderService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_4__["ExecutionService"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_5__["UiService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_6__["ActivatedRoute"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_7__["MasterdataService"],
            _shared_pipes_format_date_pipe_pipe__WEBPACK_IMPORTED_MODULE_8__["FormatDatePipe"],
            _services_execution_actions_service__WEBPACK_IMPORTED_MODULE_9__["ExecutionActionsService"],
            _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_10__["AuthorizationService"],
            _angular_common__WEBPACK_IMPORTED_MODULE_2__["DatePipe"],
            Window,
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_12__["AgGridService"],
            _shared_services_list_and_search_cashList_receipt_data_loader__WEBPACK_IMPORTED_MODULE_1__["CashListReceiptDataLoader"]])
    ], ExecutionCashReceiptListPageComponent);
    return ExecutionCashReceiptListPageComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_21__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash.component.html":
/*!***************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash.component.html ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div matToolbarHighlight\r\n     class=\"dark-tab header-tab mat-elevation-z6\">\r\n    <div class=\"header-tab-container\">\r\n        <mat-tab-group [selectedIndex]=\"tabIndex\"\r\n                       (selectedIndexChange)=onSelectedIndexChanged($event)>\r\n            <mat-tab label=\"CASH PAYMENT\">\r\n            </mat-tab>\r\n            <mat-tab label=\"CASH RECEIPT\">\r\n            </mat-tab>\r\n        </mat-tab-group>\r\n        <span class=\"fill-space\"></span>\r\n    </div>\r\n</div>\r\n<atlas-floating-action-button [fabTitle]=\"fabTitle\"\r\n                              [fabType]=\"fabType\"\r\n                              [fabActions]=\"fabMenuActions\"\r\n                              [isParentLoaded]=\"isLoaded\"\r\n                              (fabActionClicked)=\"onFabActionClicked($event)\">\r\n</atlas-floating-action-button>\r\n<atlas-execution-cash-payment-list-page [hidden]=\"!isCashPaymentMode\"\r\n                                        #cashPaymentListComponent>\r\n</atlas-execution-cash-payment-list-page>\r\n<atlas-execution-cash-receipt-list-page [hidden]=\"isCashPaymentMode\"\r\n                                        #cashReceiptListComponent>\r\n</atlas-execution-cash-receipt-list-page>"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash.component.scss":
/*!***************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash.component.scss ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".fab-text-button {\n  z-index: 1;\n  margin-right: 20%; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-cash/execution-cash.component.ts":
/*!*************************************************************************!*\
  !*** ./Client/app/execution/execution-cash/execution-cash.component.ts ***!
  \*************************************************************************/
/*! exports provided: ExecutionCashComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExecutionCashComponent", function() { return ExecutionCashComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/services/authorization.service */ "./Client/app/core/services/authorization.service.ts");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_components_floating_action_button_floating_action_button_type_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../shared/components/floating-action-button/floating-action-button-type.enum */ "./Client/app/shared/components/floating-action-button/floating-action-button-type.enum.ts");
/* harmony import */ var _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../shared/enums/cash-type.enum */ "./Client/app/shared/enums/cash-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_security_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../shared/services/security.service */ "./Client/app/shared/services/security.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_title_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../shared/services/title.service */ "./Client/app/shared/services/title.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _execution_cash_payment_list_page_execution_cash_payment_list_page_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./execution-cash-payment-list-page/execution-cash-payment-list-page.component */ "./Client/app/execution/execution-cash/execution-cash-payment-list-page/execution-cash-payment-list-page.component.ts");
/* harmony import */ var _execution_cash_receipt_list_page_execution_cash_receipt_list_page_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./execution-cash-receipt-list-page/execution-cash-receipt-list-page.component */ "./Client/app/execution/execution-cash/execution-cash-receipt-list-page/execution-cash-receipt-list-page.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};














var ExecutionCashComponent = /** @class */ (function (_super) {
    __extends(ExecutionCashComponent, _super);
    function ExecutionCashComponent(route, router, formConfigurationProvider, utilService, snackbarService, companyManager, authorizationService, securityService, titleService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.router = router;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.utilService = utilService;
        _this.snackbarService = snackbarService;
        _this.companyManager = companyManager;
        _this.authorizationService = authorizationService;
        _this.securityService = securityService;
        _this.titleService = titleService;
        _this.cpSimplePrivilege = false;
        _this.cpPickTranPrivilege = false;
        _this.cpDiffClientPrivilege = false;
        _this.cpDiffCurrencyPrivilege = false;
        _this.crSimplePrivilege = false;
        _this.crPickTranPrivilege = false;
        _this.crDiffCurrencyPrivilege = false;
        _this.isCashPaymentMode = true;
        _this.fabMenuActions = [];
        _this.isLoaded = false;
        _this.actionCreateCash = {
            icon: 'add',
            text: 'Create Cash',
            action: 'createCash',
            disabled: false,
            index: 0,
        };
        _this.onSelectedIndexChanged = function (tabChangeEvent) {
            _this.setCashType(tabChangeEvent);
        };
        return _this;
    }
    ExecutionCashComponent.prototype.onCreateCashButtonClicked = function (cashOption) {
        this.router.navigate(['/' + this.companyManager.getCurrentCompanyId() +
                '/execution/cash/new/' + encodeURIComponent(cashOption)]);
    };
    ExecutionCashComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.company = this.route.snapshot.paramMap.get('company');
        this.tabIndex = 0;
        this.setCashType(this.tabIndex);
        this.securityService.isSecurityReady().subscribe(function () {
            if ((_this.authorizationService.isPrivilegeAllowed(_this.company, 'Cash') && _this.authorizationService.isPrivilegeAllowed(_this.company, 'CashPayment'))) {
                _this.cpSimplePrivilege = _this.authorizationService.isPrivilegeAllowed(_this.company, 'CPSIMPLE');
                _this.cpPickTranPrivilege = _this.authorizationService.isPrivilegeAllowed(_this.company, 'CPPICKTX');
                _this.cpDiffClientPrivilege = _this.authorizationService.isPrivilegeAllowed(_this.company, 'CPDIFFCLI');
                _this.cpDiffCurrencyPrivilege = _this.authorizationService.isPrivilegeAllowed(_this.company, 'CPDIFFCCY');
            }
            if ((_this.authorizationService.isPrivilegeAllowed(_this.company, 'Cash') && _this.authorizationService.isPrivilegeAllowed(_this.company, 'CashReceipt'))) {
                _this.crSimplePrivilege = _this.authorizationService.isPrivilegeAllowed(_this.company, 'CRSIMPLE');
                _this.crPickTranPrivilege = _this.authorizationService.isPrivilegeAllowed(_this.company, 'CRPICKTX');
                _this.crDiffCurrencyPrivilege = _this.authorizationService.isPrivilegeAllowed(_this.company, 'CRDIFFCCY');
            }
        });
        this.updateFAB();
    };
    ExecutionCashComponent.prototype.updateFAB = function () {
        this.initFABActions();
        this.isLoaded = true;
    };
    ExecutionCashComponent.prototype.setCashType = function (tabIndex) {
        if (tabIndex === 0) {
            this.isCashPaymentMode = true;
            this.cashOption = _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_6__["CashType"].CashPayment;
            this.cashPaymentListComponent.cashTypeId = this.cashOption;
            this.cashPaymentListComponent.getCashList();
            this.setTitle();
        }
        else if (tabIndex === 1) {
            this.isCashPaymentMode = false;
            this.cashOption = _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_6__["CashType"].CashReceipt;
            this.cashReceiptListComponent.cashTypeId = this.cashOption;
            this.cashReceiptListComponent.getCashList();
            this.setTitle();
        }
        this.updateFAB();
    };
    ExecutionCashComponent.prototype.setTitle = function () {
        if (this.cashOption === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_6__["CashType"].CashPayment) {
            this.titleService.setTitle('Cash Payments');
        }
        else if (this.cashOption === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_6__["CashType"].CashReceipt) {
            this.titleService.setTitle('Cash Receipts');
        }
    };
    ExecutionCashComponent.prototype.initFABActions = function () {
        this.fabTitle = 'Create Cash Single Extended FAB';
        this.fabType = _shared_components_floating_action_button_floating_action_button_type_enum__WEBPACK_IMPORTED_MODULE_5__["FABType"].ExtendedSingleButton;
        this.fabMenuActions = [];
        if (this.cashOption === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_6__["CashType"].CashPayment) {
            if (this.cpSimplePrivilege || this.cpPickTranPrivilege || this.cpDiffClientPrivilege || this.cpDiffCurrencyPrivilege) {
                this.fabMenuActions.push(this.actionCreateCash);
            }
        }
        if (this.cashOption === _shared_enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_6__["CashType"].CashReceipt) {
            if (this.crSimplePrivilege || this.crPickTranPrivilege || this.crDiffCurrencyPrivilege) {
                this.fabMenuActions.push(this.actionCreateCash);
            }
        }
    };
    ExecutionCashComponent.prototype.onFabActionClicked = function (action) {
        this.onCreateCashButtonClicked(this.cashOption);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('cashPaymentListComponent'),
        __metadata("design:type", _execution_cash_payment_list_page_execution_cash_payment_list_page_component__WEBPACK_IMPORTED_MODULE_12__["ExecutionCashPaymentListPageComponent"])
    ], ExecutionCashComponent.prototype, "cashPaymentListComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('cashReceiptListComponent'),
        __metadata("design:type", _execution_cash_receipt_list_page_execution_cash_receipt_list_page_component__WEBPACK_IMPORTED_MODULE_13__["ExecutionCashReceiptListPageComponent"])
    ], ExecutionCashComponent.prototype, "cashReceiptListComponent", void 0);
    ExecutionCashComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-execution-cash',
            template: __webpack_require__(/*! ./execution-cash.component.html */ "./Client/app/execution/execution-cash/execution-cash.component.html"),
            styles: [__webpack_require__(/*! ./execution-cash.component.scss */ "./Client/app/execution/execution-cash/execution-cash.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"],
            _angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__["FormConfigurationProviderService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_11__["UtilService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_9__["SnackbarService"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_3__["CompanyManagerService"],
            _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_2__["AuthorizationService"],
            _shared_services_security_service__WEBPACK_IMPORTED_MODULE_8__["SecurityService"],
            _shared_services_title_service__WEBPACK_IMPORTED_MODULE_10__["TitleService"]])
    ], ExecutionCashComponent);
    return ExecutionCashComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-charter/ag-grid-charterstatus-for-charter-bulk-closure/ag-grid-charterstatus-for-charter-bulk-closure.component.html":
/*!*************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/ag-grid-charterstatus-for-charter-bulk-closure/ag-grid-charterstatus-for-charter-bulk-closure.component.html ***!
  \*************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<i *ngIf=\"!disabled\"\r\n   class=\"material-icons\">{{this.icon}}</i>\r\n\r\n<a class=\"margin-left-i-5\"\r\n   [ngClass]=\"classApplied\"\r\n   *ngIf=\"!disabled\">{{this.params.value}}</a>"

/***/ }),

/***/ "./Client/app/execution/execution-charter/ag-grid-charterstatus-for-charter-bulk-closure/ag-grid-charterstatus-for-charter-bulk-closure.component.scss":
/*!*************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/ag-grid-charterstatus-for-charter-bulk-closure/ag-grid-charterstatus-for-charter-bulk-closure.component.scss ***!
  \*************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".contract-reference-link {\n  color: #0000EE;\n  text-decoration: underline;\n  cursor: pointer; }\n\n.disable-url-click-green {\n  color: green; }\n\n.disable-url-click-orange {\n  color: orange; }\n\n.disable-url-click-red {\n  color: red; }\n\n.icon-click-green {\n  color: green !important; }\n\n.icon-click-orange {\n  color: orange !important; }\n\n.icon-click-red {\n  color: red !important; }\n\n.margin-left-i-5 {\n  margin-left: 5px; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/ag-grid-charterstatus-for-charter-bulk-closure/ag-grid-charterstatus-for-charter-bulk-closure.component.ts":
/*!***********************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/ag-grid-charterstatus-for-charter-bulk-closure/ag-grid-charterstatus-for-charter-bulk-closure.component.ts ***!
  \***********************************************************************************************************************************************************/
/*! exports provided: AgGridCharterStatusForCharterBulkClosureComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AgGridCharterStatusForCharterBulkClosureComponent", function() { return AgGridCharterStatusForCharterBulkClosureComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var AgGridCharterStatusForCharterBulkClosureComponent = /** @class */ (function () {
    function AgGridCharterStatusForCharterBulkClosureComponent() {
        this.classApplied = 'contract-reference-link';
        this.disabled = false;
    }
    AgGridCharterStatusForCharterBulkClosureComponent.prototype.agInit = function (params) {
        this.params = params;
        if (this.params.data.sectionId) {
            this.disabled = true;
        }
        else {
            if (this.params.data.category === 'green') {
                this.classApplied = 'disable-url-click-green';
                this.classAppliedIcon = 'icon-click-green';
                this.icon = 'check_circle';
            }
            else if (this.params.data.category === 'orange') {
                this.classApplied = 'disable-url-click-orange';
                this.classAppliedIcon = 'icon-click-orange';
                this.icon = 'warning';
            }
            else if (this.params.data.category === 'red') {
                this.classApplied = 'disable-url-click-red';
                this.classAppliedIcon = 'icon-click-red';
                this.icon = 'remove_circle';
            }
        }
    };
    AgGridCharterStatusForCharterBulkClosureComponent.prototype.refresh = function () {
        return false;
    };
    AgGridCharterStatusForCharterBulkClosureComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-ag-grid-charterstatus-for-charter-bulk-closure',
            template: __webpack_require__(/*! ./ag-grid-charterstatus-for-charter-bulk-closure.component.html */ "./Client/app/execution/execution-charter/ag-grid-charterstatus-for-charter-bulk-closure/ag-grid-charterstatus-for-charter-bulk-closure.component.html"),
            styles: [__webpack_require__(/*! ./ag-grid-charterstatus-for-charter-bulk-closure.component.scss */ "./Client/app/execution/execution-charter/ag-grid-charterstatus-for-charter-bulk-closure/ag-grid-charterstatus-for-charter-bulk-closure.component.scss")],
        }),
        __metadata("design:paramtypes", [])
    ], AgGridCharterStatusForCharterBulkClosureComponent);
    return AgGridCharterStatusForCharterBulkClosureComponent;
}());



/***/ }),

/***/ "./Client/app/execution/execution-charter/ag-grid-hyperlink-for-charter-bulk-closure/ag-grid-hyperlink-for-charter-bulk-closure.component.html":
/*!*****************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/ag-grid-hyperlink-for-charter-bulk-closure/ag-grid-hyperlink-for-charter-bulk-closure.component.html ***!
  \*****************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div *ngIf=\"ispopUpcellRendererLoaded()\"\r\n     class=\"chart-status-div\">\r\n    <span>{{data}}</span>\r\n    <mat-icon matSuffix\r\n              (click)=\"onExploreClicked($event)\">launch</mat-icon>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-charter/ag-grid-hyperlink-for-charter-bulk-closure/ag-grid-hyperlink-for-charter-bulk-closure.component.scss":
/*!*****************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/ag-grid-hyperlink-for-charter-bulk-closure/ag-grid-hyperlink-for-charter-bulk-closure.component.scss ***!
  \*****************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "::ng-deep .chart-status-div {\n  line-height: 25px;\n  color: #9d5e5e; }\n\n::ng-deep mat-icon {\n  float: right;\n  padding-top: 2%; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/ag-grid-hyperlink-for-charter-bulk-closure/ag-grid-hyperlink-for-charter-bulk-closure.component.ts":
/*!***************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/ag-grid-hyperlink-for-charter-bulk-closure/ag-grid-hyperlink-for-charter-bulk-closure.component.ts ***!
  \***************************************************************************************************************************************************/
/*! exports provided: AgGridHyperlinkForCharterBulkClosureComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AgGridHyperlinkForCharterBulkClosureComponent", function() { return AgGridHyperlinkForCharterBulkClosureComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var AgGridHyperlinkForCharterBulkClosureComponent = /** @class */ (function () {
    function AgGridHyperlinkForCharterBulkClosureComponent() {
    }
    AgGridHyperlinkForCharterBulkClosureComponent.prototype.ngOnInit = function () {
    };
    AgGridHyperlinkForCharterBulkClosureComponent.prototype.agInit = function (params) {
        this.params = params;
        this.data = params.value;
    };
    AgGridHyperlinkForCharterBulkClosureComponent.prototype.refresh = function (params) {
        return false;
    };
    AgGridHyperlinkForCharterBulkClosureComponent.prototype.onExploreClicked = function () {
        var link;
        if (this.params.data) {
            if (this.params.data.message === 'Cargo Accrual' || this.params.data.message === 'Invoices not cash matched'
                || this.params.data.message === 'Invoices not posted') {
                link = this.params.context.componentParent.companyManager.getCurrentCompanyId() + "/trades/display/" + this.params.data.sectionId + "/5";
                window.open(link, '_blank');
            }
            if (this.params.data.message === 'Cost Accrual') {
                link = this.params.context.componentParent.companyManager.getCurrentCompanyId() + "/trades/display/" + this.params.data.sectionId + "/1";
            }
        }
    };
    AgGridHyperlinkForCharterBulkClosureComponent.prototype.ispopUpcellRendererLoaded = function () {
        if (this.params.data.sectionId) {
            if (this.params.data.category !== 'green' && this.data !== undefined && this.data !== '') {
                return true;
            }
        }
        return false;
    };
    AgGridHyperlinkForCharterBulkClosureComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-ag-grid-hyperlink-for-charter-bulk-closure',
            template: __webpack_require__(/*! ./ag-grid-hyperlink-for-charter-bulk-closure.component.html */ "./Client/app/execution/execution-charter/ag-grid-hyperlink-for-charter-bulk-closure/ag-grid-hyperlink-for-charter-bulk-closure.component.html"),
            styles: [__webpack_require__(/*! ./ag-grid-hyperlink-for-charter-bulk-closure.component.scss */ "./Client/app/execution/execution-charter/ag-grid-hyperlink-for-charter-bulk-closure/ag-grid-hyperlink-for-charter-bulk-closure.component.scss")]
        }),
        __metadata("design:paramtypes", [])
    ], AgGridHyperlinkForCharterBulkClosureComponent);
    return AgGridHyperlinkForCharterBulkClosureComponent;
}());



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/purchase-allocation-component/purchase-allocation-component.component.html":
/*!************************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/purchase-allocation-component/purchase-allocation-component.component.html ***!
  \************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <div fxLayout=\"row\"\r\n         fxLayout.xs=\"column\"\r\n         fxLayoutAlign=\"space-between left\"\r\n         fxLayoutWrap\r\n         fxLayoutGap=\"20px\">\r\n        <span class=\"fill-space\">\r\n            <h3>Possible Purchase Allocations</h3>\r\n        </span>\r\n        <mat-menu class=\"no-overflow\"\r\n                  #menu=\"matMenu\">\r\n\r\n            <div *ngFor=\"let col of purchaseAllocationGridCols\">\r\n                <mat-checkbox [checked]=\"!col.hide\">{{col.headerName}}</mat-checkbox>\r\n            </div>\r\n\r\n        </mat-menu>\r\n    </div>\r\n    <div ag-grid=\"purchaseAllocationGridOptions\"\r\n         class=\"ag-theme-material pointer-cursor\"\r\n         style=\"width: 100%; height: 100%\">\r\n        <ag-grid-angular style=\" height: 100%;\"\r\n                         class=\"ag-theme-material\"\r\n                         [gridOptions]=\"purchaseAllocationGridOptions\"\r\n                         [rowData]=\"purchaseAllocationGridRows\"\r\n                         [columnDefs]=\"purchaseAllocationGridCols\"\r\n                         [enableColResize]=\"true\"\r\n                         [pagination]=\"true\"\r\n                         [paginationPageSize]=\"10\"\r\n                         [suppressRowClickSelection]=\"true\"\r\n                         [enableSorting]=\"true\"\r\n                         (gridReady)=\"onGridReady($event)\"\r\n                         (rowSelected)=\"onRowSelected($event)\"\r\n                         domLayout=autoHeight\r\n                         domLayout=\"autoHeight\"\r\n                         [rowHeight]=\"atlasAgGridParam.rowHeight\">\r\n        </ag-grid-angular>\r\n    </div>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/purchase-allocation-component/purchase-allocation-component.component.scss":
/*!************************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/purchase-allocation-component/purchase-allocation-component.component.scss ***!
  \************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/purchase-allocation-component/purchase-allocation-component.component.ts":
/*!**********************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/purchase-allocation-component/purchase-allocation-component.component.ts ***!
  \**********************************************************************************************************************************************************************************************/
/*! exports provided: PurchaseAllocationComponentComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PurchaseAllocationComponentComponent", function() { return PurchaseAllocationComponentComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/enums/contract-type.enum */ "./Client/app/shared/enums/contract-type.enum.ts");
/* harmony import */ var _shared_enums_shipping_type_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/enums/shipping-type-enum */ "./Client/app/shared/enums/shipping-type-enum.ts");
/* harmony import */ var _shared_models_allocated_trade_display_view__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/models/allocated-trade-display-view */ "./Client/app/shared/models/allocated-trade-display-view.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var PurchaseAllocationComponentComponent = /** @class */ (function (_super) {
    __extends(PurchaseAllocationComponentComponent, _super);
    function PurchaseAllocationComponentComponent(uiService, route, executionService, formConfigurationProvider, gridService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.uiService = uiService;
        _this.route = route;
        _this.executionService = executionService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.gridService = gridService;
        _this.purchaseRowSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.isPurchaseRowDataUpdated = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.onPurchaseRowSelectedChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.purchaseRowUnChecked = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.purchaseAllocationGridOptions = {};
        _this.formatType = 'en-US';
        return _this;
    }
    PurchaseAllocationComponentComponent.prototype.ngOnInit = function () {
        this.charterId = Number(this.route.snapshot.paramMap.get('charterId'));
        this.atlasAgGridParam = this.gridService.getAgGridParam();
        this.initAllocationGridCols();
        this.getPurchaseTradesForAllocation();
    };
    PurchaseAllocationComponentComponent.prototype.onGridReady = function (params) {
        this.gridApi = params.api;
        this.gridColumnApi = params.columnApi;
        this.gridColumnApi.autoSizeAllColumns();
        this.gridApi.onFilterChanged();
    };
    PurchaseAllocationComponentComponent.prototype.initAllocationGridCols = function () {
        this.purchaseAllocationGridOptions = {
            enableSorting: true,
            enableFilter: true,
            rowDeselection: false,
        };
        this.purchaseAllocationGridCols = [
            {
                colId: 'sectionId',
                hide: true,
            },
            {
                colId: 'type',
                hide: true,
            },
            {
                headerName: 'Reference',
                headerTooltip: 'Reference',
                field: 'contractLabel',
                filter: 'agTextColumnFilter',
                colId: 'contractLabel',
                headerCheckboxSelection: false,
                headerCheckboxSelectionFilteredOnly: true,
                checkboxSelection: true,
            },
            {
                headerName: 'Department ',
                headerTooltip: 'Department ',
                field: 'departmentCode',
                colId: 'departmentCode',
            },
            {
                headerName: 'Quantity',
                headerTooltip: 'Quantity',
                field: 'quantity',
                type: 'numericColumn',
                colId: 'quantity',
                valueFormatter: this.formatValue.bind(this),
            },
            {
                headerName: 'Cmy1',
                headerTooltip: 'Cmy1',
                field: 'principalCommodity',
                colId: 'principalCommodity',
            },
            {
                headerName: 'Cmy2',
                headerTooltip: 'Cmy2',
                field: 'commodityOrigin',
                colId: 'commodityOrigin',
            },
            {
                headerName: 'Cmy3',
                headerTooltip: 'Cmy3',
                field: 'commodityGrade',
                colId: 'commodityGrade',
            },
            {
                headerName: 'Cmy4',
                headerTooltip: 'Cmy4',
                field: 'commodityLvl4',
                colId: 'commodityLvl4',
            },
            {
                headerName: 'Cmy5',
                headerTooltip: 'Cmy5',
                field: 'commodityLvl5',
                colId: 'commodityLvl5',
            },
        ];
    };
    PurchaseAllocationComponentComponent.prototype.formatValue = function (param) {
        if (isNaN(param.value) || param.value === null) {
            return '';
        }
        return new Intl.NumberFormat(this.formatType, { minimumFractionDigits: 3, maximumFractionDigits: 3 }).format(param.value);
    };
    PurchaseAllocationComponentComponent.prototype.getPurchaseTradesForAllocation = function () {
        var _this = this;
        this.getPossibleAllocationForPurchase = this.executionService.GetPossibleAllocationByCharterAsync(this.charterId)
            .subscribe(function (data) {
            _this.isPurchaseRowDataUpdated.emit({ salesDataUpdated: false, purchaseDataUpdated: true });
            _this.purchaseAllocationGridRows = data.value.map(function (allocatedTrade) {
                return new _shared_models_allocated_trade_display_view__WEBPACK_IMPORTED_MODULE_5__["AllocatedTradeDisplayView"](allocatedTrade);
            });
            _this.purchaseAllocationGridRows = _this.purchaseAllocationGridRows.filter(function (contract) {
                return contract.type === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_3__["ContractTypes"].Purchase.toString();
            });
            _this.initAllocationGridCols();
        });
    };
    PurchaseAllocationComponentComponent.prototype.ngOnDestroy = function () {
        if (this.getPossibleAllocationForPurchase) {
            this.getPossibleAllocationForPurchase.unsubscribe();
        }
    };
    PurchaseAllocationComponentComponent.prototype.onRowSelected = function (event) {
        if (event.node.selected === true) {
            this.purchaseRowSelected.emit();
        }
        else {
            this.purchaseRowUnChecked.emit();
        }
        this.onPurchaseRowSelectedChange.emit(event);
    };
    PurchaseAllocationComponentComponent.prototype.getSelectedRow = function () {
        return this.gridApi.getSelectedRows()[0];
    };
    PurchaseAllocationComponentComponent.prototype.populateEntity = function (command) {
        var allocateSection = command;
        var selectedRow = this.gridApi.getSelectedRows()[0];
        if (selectedRow) {
            allocateSection.sourceQuantity = selectedRow.quantity;
            allocateSection.sectionReference = selectedRow.contractLabel;
            allocateSection.sectionId = selectedRow.sectionId;
            allocateSection.shippingType = _shared_enums_shipping_type_enum__WEBPACK_IMPORTED_MODULE_4__["ShippingType"].PurchaseToSale;
        }
        return allocateSection;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], PurchaseAllocationComponentComponent.prototype, "purchaseRowSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], PurchaseAllocationComponentComponent.prototype, "isPurchaseRowDataUpdated", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], PurchaseAllocationComponentComponent.prototype, "onPurchaseRowSelectedChange", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], PurchaseAllocationComponentComponent.prototype, "purchaseRowUnChecked", void 0);
    PurchaseAllocationComponentComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-purchase-allocation-component',
            template: __webpack_require__(/*! ./purchase-allocation-component.component.html */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/purchase-allocation-component/purchase-allocation-component.component.html"),
            styles: [__webpack_require__(/*! ./purchase-allocation-component.component.scss */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/purchase-allocation-component/purchase-allocation-component.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_ui_service__WEBPACK_IMPORTED_MODULE_9__["UiService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_8__["ExecutionService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__["FormConfigurationProviderService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_6__["AgGridService"]])
    ], PurchaseAllocationComponentComponent);
    return PurchaseAllocationComponentComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/quantity-allocation-component/quantity-allocation-component.component.html":
/*!************************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/quantity-allocation-component/quantity-allocation-component.component.html ***!
  \************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"space-between center\"\r\n         fxFlex=\"70\">\r\n        <h3>Allocation</h3>\r\n    </div>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"end center\"\r\n             fxFlex=\"100\">\r\n            <mat-form-field fxFlex=\"50\">\r\n                <input matInput\r\n                       [textMask]=\"{mask:mask}\"\r\n                       [formControl]=\"quantityCtrl\"\r\n                       (blur)=\"checkQuantityValue()\"\r\n                       placeholder=\"Quantity to allocate\"\r\n                       [required]=\"quantityCtrl.isRequired\"\r\n                       autocomplete=\"off\">\r\n                <mat-error *ngIf=\"quantityCtrl.hasError('required')\">\r\n                    Quantity to allocate is required\r\n                </mat-error>\r\n                <mat-error *ngIf=\"quantityCtrl.hasError('isPositiveError')\">\r\n                    Quantity to allocate must be positive.\r\n                </mat-error>\r\n                <mat-error *ngIf=\"quantityCtrl.hasError('max')\">\r\n                    Cannot be greater than quantity available.\r\n                </mat-error>\r\n                <mat-error *ngIf=\"quantityCtrl.hasError('min')\">\r\n                    Quantity cannot be zero.\r\n                </mat-error>\r\n            </mat-form-field>\r\n            <mat-form-field fxFlex=\"50\">\r\n                <input matInput\r\n                       [formControl]=\"quantityCodeCtrl\"\r\n                       placeholder=\"Quantity Code\"\r\n                       autocomplete=\"off\"\r\n                       readonly>\r\n            </mat-form-field>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/quantity-allocation-component/quantity-allocation-component.component.scss":
/*!************************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/quantity-allocation-component/quantity-allocation-component.component.scss ***!
  \************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/quantity-allocation-component/quantity-allocation-component.component.ts":
/*!**********************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/quantity-allocation-component/quantity-allocation-component.component.ts ***!
  \**********************************************************************************************************************************************************************************************/
/*! exports provided: QuantityAllocationComponentComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QuantityAllocationComponentComponent", function() { return QuantityAllocationComponentComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_directives_number_validators_directive__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/directives/number-validators.directive */ "./Client/app/shared/directives/number-validators.directive.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_numberMask__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/numberMask */ "./Client/app/shared/numberMask.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var QuantityAllocationComponentComponent = /** @class */ (function (_super) {
    __extends(QuantityAllocationComponentComponent, _super);
    function QuantityAllocationComponentComponent(formBuilder, formConfigurationProvider, cdr, utilService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.cdr = cdr;
        _this.utilService = utilService;
        _this.quantityCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('Quantity');
        _this.quantityCodeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('QuantityCode');
        _this.isQuantityFormInvalid = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.mask = Object(_shared_numberMask__WEBPACK_IMPORTED_MODULE_5__["CustomNumberMask"])(12, 10, true);
        _this.quantityAvaliable = 0;
        return _this;
    }
    QuantityAllocationComponentComponent.prototype.ngOnInit = function () {
        this.setValidators();
        this.cdr.detectChanges();
    };
    QuantityAllocationComponentComponent.prototype.setValidators = function () {
        var _this = this;
        this.quantityCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([Object(_shared_directives_number_validators_directive__WEBPACK_IMPORTED_MODULE_3__["isPositive"])(),
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required, _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].min(0.0000000001),
            function (control) { return _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].max(Number(_this.quantityAvaliable) > 0 ? Number(_this.quantityAvaliable) : null); }]));
    };
    QuantityAllocationComponentComponent.prototype.updateQuantityData = function (contracts) {
        if (contracts && contracts.length === 2) {
            this.quantityAvaliable = Number(contracts[0].quantity) <= Number(contracts[1].quantity) ?
                Number(contracts[0].quantity) :
                Number(contracts[1].quantity);
            this.quantityCtrl.setValue(this.quantityAvaliable.toFixed(3));
            if (contracts[0].weightCode === contracts[1].weightCode) {
                this.quantityCodeCtrl.setValue(contracts[0].weightCode);
            }
            else {
                this.quantityCodeCtrl.setValue('');
            }
        }
        else {
            this.quantityAvaliable = 0;
            this.quantityCtrl.setValue('');
            this.quantityCodeCtrl.setValue('');
        }
        this.setValidators();
    };
    QuantityAllocationComponentComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            quantityCtrl: this.quantityCtrl,
            quantityCodeCtrl: this.quantityCodeCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    QuantityAllocationComponentComponent.prototype.populateEntity = function (command) {
        var allocateSection = command;
        allocateSection.quantity = this.quantityCtrl.value ? Number(this.quantityCtrl.value.toString().replace(/,/g, '')) : null;
        return allocateSection;
    };
    QuantityAllocationComponentComponent.prototype.resetQuantity = function () {
        this.quantityCtrl.setValue('');
        this.quantityCodeCtrl.setValue('');
    };
    QuantityAllocationComponentComponent.prototype.checkQuantityValue = function () {
        if (this.quantityCtrl.value) {
            var formattedNumber = Number(this.quantityCtrl.value.toString().replace(/,/g, ''));
            if (formattedNumber > this.quantityAvaliable) {
                this.quantityCtrl.setErrors({ max: true });
            }
        }
        if (!this.formGroup.valid) {
            this.isQuantityFormInvalid.emit(true);
        }
        else {
            this.isQuantityFormInvalid.emit(false);
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], QuantityAllocationComponentComponent.prototype, "isQuantityFormInvalid", void 0);
    QuantityAllocationComponentComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-quantity-allocation-component',
            template: __webpack_require__(/*! ./quantity-allocation-component.component.html */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/quantity-allocation-component/quantity-allocation-component.component.html"),
            styles: [__webpack_require__(/*! ./quantity-allocation-component.component.scss */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/quantity-allocation-component/quantity-allocation-component.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__["FormConfigurationProviderService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__["UtilService"]])
    ], QuantityAllocationComponentComponent);
    return QuantityAllocationComponentComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/sale-allocation-component/sale-allocation-component.component.html":
/*!****************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/sale-allocation-component/sale-allocation-component.component.html ***!
  \****************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <div fxLayout=\"row\"\r\n         fxLayout.xs=\"column\"\r\n         fxLayoutAlign=\"space-between left\"\r\n         fxLayoutWrap\r\n         fxLayoutGap=\"20px\">\r\n        <span class=\"fill-space\">\r\n            <h3>Possible Sale Allocations</h3>\r\n        </span>\r\n        <div>\r\n            <mat-menu class=\"no-overflow\"\r\n                      #menu=\"matMenu\">\r\n\r\n                <div *ngFor=\"let col of saleAllocationGridCols\">\r\n                    <mat-checkbox [checked]=\"!col.hide\">{{col.headerName}}</mat-checkbox>\r\n                </div>\r\n\r\n            </mat-menu>\r\n        </div>\r\n    </div>\r\n    <div ag-grid=\"saleAllocationGridOptions\"\r\n         class=\"ag-theme-material pointer-cursor\"\r\n         style=\"width: 100%; height: 100%\">\r\n        <ag-grid-angular style=\" height: 100%;\"\r\n                         class=\"ag-theme-material\"\r\n                         [gridOptions]=\"saleAllocationGridOptions\"\r\n                         [rowData]=\"saleAllocationGridRows\"\r\n                         [columnDefs]=\"saleAllocationGridCols\"\r\n                         [enableColResize]=\"true\"\r\n                         [pagination]=\"true\"\r\n                         [paginationPageSize]=\"10\"\r\n                         [suppressRowClickSelection]=\"true\"\r\n                         [enableSorting]=\"true\"\r\n                         (gridReady)=\"onGridReady($event)\"\r\n                         (rowSelected)=\"onRowSelected($event)\"\r\n                         domLayout=autoHeight\r\n                         domLayout=\"autoHeight\"\r\n                         [rowHeight]=\"atlasAgGridParam.rowHeight\">\r\n        </ag-grid-angular>\r\n    </div>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/sale-allocation-component/sale-allocation-component.component.scss":
/*!****************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/sale-allocation-component/sale-allocation-component.component.scss ***!
  \****************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/sale-allocation-component/sale-allocation-component.component.ts":
/*!**************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/sale-allocation-component/sale-allocation-component.component.ts ***!
  \**************************************************************************************************************************************************************************************/
/*! exports provided: SaleAllocationComponentComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SaleAllocationComponentComponent", function() { return SaleAllocationComponentComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/enums/contract-type.enum */ "./Client/app/shared/enums/contract-type.enum.ts");
/* harmony import */ var _shared_models_allocated_trade_display_view__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/models/allocated-trade-display-view */ "./Client/app/shared/models/allocated-trade-display-view.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var SaleAllocationComponentComponent = /** @class */ (function (_super) {
    __extends(SaleAllocationComponentComponent, _super);
    function SaleAllocationComponentComponent(uiService, route, executionService, gridService, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.uiService = uiService;
        _this.route = route;
        _this.executionService = executionService;
        _this.gridService = gridService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.saleRowSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.saleRowUnChecked = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.onSaleRowSelectedChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.isSaleRowDataUpdated = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.saleAllocationGridOptions = {};
        _this.formatType = 'en-US';
        return _this;
    }
    SaleAllocationComponentComponent.prototype.ngOnInit = function () {
        this.charterId = Number(this.route.snapshot.paramMap.get('charterId'));
        this.atlasAgGridParam = this.gridService.getAgGridParam();
        this.initAllocationGridCols();
        this.getSaleTradesForAllocation();
    };
    SaleAllocationComponentComponent.prototype.onGridReady = function (params) {
        this.gridApi = params.api;
        this.gridColumnApi = params.columnApi;
        this.gridColumnApi.autoSizeAllColumns();
        this.gridApi.onFilterChanged();
    };
    SaleAllocationComponentComponent.prototype.initAllocationGridCols = function () {
        this.saleAllocationGridOptions = {
            enableSorting: true,
            enableFilter: true,
            rowDeselection: false,
        };
        this.saleAllocationGridCols = [
            {
                colId: 'sectionId',
                hide: true,
            },
            {
                colId: 'type',
                hide: true,
            },
            {
                headerName: 'Reference',
                headerTooltip: 'Reference',
                field: 'contractLabel',
                filter: 'agTextColumnFilter',
                colId: 'contractLabel',
                headerCheckboxSelection: false,
                headerCheckboxSelectionFilteredOnly: true,
                checkboxSelection: true,
            },
            {
                headerName: 'Department ',
                headerTooltip: 'Department ',
                field: 'departmentCode',
                colId: 'departmentCode',
            },
            {
                headerName: 'Quantity',
                headerTooltip: 'Quantity',
                field: 'quantity',
                type: 'numericColumn',
                colId: 'quantity',
                valueFormatter: this.formatValue.bind(this),
            },
            {
                headerName: 'Cmy1',
                headerTooltip: 'Cmy1',
                field: 'principalCommodity',
                colId: 'principalCommodity',
            },
            {
                headerName: 'Cmy2',
                headerTooltip: 'Cmy2',
                field: 'commodityOrigin',
                colId: 'commodityOrigin',
            },
            {
                headerName: 'Cmy3',
                headerTooltip: 'Cmy3',
                field: 'commodityGrade',
                colId: 'commodityGrade',
            },
            {
                headerName: 'Cmy4',
                headerTooltip: 'Cmy4',
                field: 'commodityLvl4',
                colId: 'commodityLvl4',
            },
            {
                headerName: 'Cmy5',
                headerTooltip: 'Cmy5',
                field: 'commodityLvl5',
                colId: 'commodityLvl5',
            },
        ];
    };
    SaleAllocationComponentComponent.prototype.formatValue = function (param) {
        if (isNaN(param.value) || param.value === null) {
            return '';
        }
        return new Intl.NumberFormat(this.formatType, { minimumFractionDigits: 3, maximumFractionDigits: 3 }).format(param.value);
    };
    SaleAllocationComponentComponent.prototype.getSaleTradesForAllocation = function () {
        var _this = this;
        this.getPossibleAllocationForSale = this.executionService.GetPossibleAllocationByCharterAsync(this.charterId)
            .subscribe(function (data) {
            _this.isSaleRowDataUpdated.emit({ salesDataUpdated: true, purchaseDataUpdated: false });
            _this.saleAllocationGridRows = data.value.map(function (allocatedTrade) {
                return new _shared_models_allocated_trade_display_view__WEBPACK_IMPORTED_MODULE_4__["AllocatedTradeDisplayView"](allocatedTrade);
            });
            _this.saleAllocationGridRows = _this.saleAllocationGridRows.filter(function (contract) {
                return contract.type === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_3__["ContractTypes"].Sale.toString();
            });
            _this.initAllocationGridCols();
        });
    };
    SaleAllocationComponentComponent.prototype.ngOnDestroy = function () {
        if (this.getPossibleAllocationForSale) {
            this.getPossibleAllocationForSale.unsubscribe();
        }
    };
    SaleAllocationComponentComponent.prototype.onRowSelected = function (event) {
        if (event.node.selected === true) {
            this.saleRowSelected.emit();
        }
        else {
            this.saleRowUnChecked.emit();
        }
        this.onSaleRowSelectedChange.emit(event);
    };
    SaleAllocationComponentComponent.prototype.getSelectedRow = function () {
        return this.gridApi.getSelectedRows()[0];
    };
    SaleAllocationComponentComponent.prototype.populateEntity = function (command) {
        var allocateSection = command;
        var selectedRow = this.gridApi.getSelectedRows()[0];
        if (selectedRow) {
            allocateSection.allocatedSectionId = selectedRow.sectionId;
            allocateSection.targetQuantity = selectedRow.quantity;
            allocateSection.allocatedSectionReference = selectedRow.contractLabel;
        }
        return allocateSection;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], SaleAllocationComponentComponent.prototype, "saleRowSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], SaleAllocationComponentComponent.prototype, "saleRowUnChecked", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], SaleAllocationComponentComponent.prototype, "onSaleRowSelectedChange", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], SaleAllocationComponentComponent.prototype, "isSaleRowDataUpdated", void 0);
    SaleAllocationComponentComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-sale-allocation-component',
            template: __webpack_require__(/*! ./sale-allocation-component.component.html */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/sale-allocation-component/sale-allocation-component.component.html"),
            styles: [__webpack_require__(/*! ./sale-allocation-component.component.scss */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/sale-allocation-component/sale-allocation-component.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_ui_service__WEBPACK_IMPORTED_MODULE_8__["UiService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_7__["ExecutionService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_5__["AgGridService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__["FormConfigurationProviderService"]])
    ], SaleAllocationComponentComponent);
    return SaleAllocationComponentComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/contract-deallocation-dialog-component/contract-deallocation-dialog-component.component.html":
/*!***************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/contract-deallocation-dialog-component/contract-deallocation-dialog-component.component.html ***!
  \***************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div fxLayout=\"row\"\r\n     fxLayoutAlign=\"space-between center\">\r\n    <h2 mat-dialog-title>\r\n        You are about to deallocate your trade. Do you wish to re-instate pre-allocation traffic details ?\r\n    </h2>\r\n    <mat-dialog-actions>\r\n        <button mat-button\r\n                (click)=\"onCancelButtonClicked()\">\r\n            Cancel\r\n        </button>\r\n        <!-- The mat-dialog-close directive optionally accepts a value as a result for the dialog. -->\r\n        <button mat-button\r\n                (click)=\"onYesButtonClicked()\">\r\n            Yes\r\n        </button>\r\n        <button mat-button\r\n                (click)=\"onNoButtonClicked()\">\r\n            No\r\n        </button>\r\n    </mat-dialog-actions>\r\n</div>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/contract-deallocation-dialog-component/contract-deallocation-dialog-component.component.scss":
/*!***************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/contract-deallocation-dialog-component/contract-deallocation-dialog-component.component.scss ***!
  \***************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".mat-dialog-actions {\n  margin: 0 !important; }\n\nbutton.mat-button {\n  margin: 0px 8px !important; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/contract-deallocation-dialog-component/contract-deallocation-dialog-component.component.ts":
/*!*************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/contract-deallocation-dialog-component/contract-deallocation-dialog-component.component.ts ***!
  \*************************************************************************************************************************************************************************************/
/*! exports provided: ContractDeallocationDialogComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContractDeallocationDialogComponent", function() { return ContractDeallocationDialogComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var ContractDeallocationDialogComponent = /** @class */ (function () {
    function ContractDeallocationDialogComponent(dialogRef) {
        this.dialogRef = dialogRef;
    }
    ContractDeallocationDialogComponent.prototype.onCancelButtonClicked = function () {
        this.dialogRef.close();
    };
    ContractDeallocationDialogComponent.prototype.onYesButtonClicked = function () {
        this.dialogRef.close(true);
    };
    ContractDeallocationDialogComponent.prototype.onNoButtonClicked = function () {
        this.dialogRef.close(false);
    };
    ContractDeallocationDialogComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-contract-deallocation-dialog-component',
            template: __webpack_require__(/*! ./contract-deallocation-dialog-component.component.html */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/contract-deallocation-dialog-component/contract-deallocation-dialog-component.component.html"),
            styles: [__webpack_require__(/*! ./contract-deallocation-dialog-component.component.scss */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/contract-deallocation-dialog-component/contract-deallocation-dialog-component.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_material__WEBPACK_IMPORTED_MODULE_1__["MatDialogRef"]])
    ], ContractDeallocationDialogComponent);
    return ContractDeallocationDialogComponent;
}());



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/deallocation-form-component/deallocation-component/deallocation-component.component.html":
/*!***********************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/deallocation-form-component/deallocation-component/deallocation-component.component.html ***!
  \***********************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <div fxLayout=\"row\"\r\n         fxLayout.xs=\"column\"\r\n         fxLayoutAlign=\"space-between left\"\r\n         class=\"atlas-grid-card-header\">\r\n        <h3 class=\"atlas-grid-card-title\">Possible Deallocation</h3>\r\n        <span class=\"fill-space\"> </span>\r\n        <div>\r\n            <mat-menu class=\"no-overflow\"\r\n                      #menu=\"matMenu\">\r\n\r\n                <div *ngFor=\"let col of deallocationGridCols\">\r\n                    <mat-checkbox [checked]=\"!col.hide\">{{col.headerName}}</mat-checkbox>\r\n                </div>\r\n            </mat-menu>\r\n        </div>\r\n    </div>\r\n    <div>\r\n        <h5 class=\"no-margin\">Only trades that are allocated & have no BL date are available for deallocation</h5>\r\n    </div>\r\n    <div ag-grid=\"deallocationGridOptions\"\r\n         class=\"ag-theme-material pointer-cursor\"\r\n         style=\"width: 100%; height: 100%\">\r\n        <ag-grid-angular style=\" height: 100%;\"\r\n                         class=\"ag-theme-material\"\r\n                         [gridOptions]=\"deallocationGridOptions\"\r\n                         [rowData]=\"deallocationGridRows\"\r\n                         [columnDefs]=\"deallocationGridCols\"\r\n                         [enableColResize]=\"true\"\r\n                         [pagination]=\"true\"\r\n                         [paginationPageSize]=\"10\"\r\n                         [suppressRowClickSelection]=\"true\"\r\n                         [enableSorting]=\"true\"\r\n                         (gridReady)=\"onGridReady($event)\"\r\n                         (rowSelected)=\"onRowSelected($event)\"\r\n                         (selectionChanged)=\"onSelectionChanged($event)\"\r\n                         rowSelection='multiple'\r\n                         domLayout=\"autoHeight\"\r\n                         [rowHeight]=\"atlasAgGridParam.rowHeight\">\r\n        </ag-grid-angular>\r\n    </div>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/deallocation-form-component/deallocation-component/deallocation-component.component.scss":
/*!***********************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/deallocation-form-component/deallocation-component/deallocation-component.component.scss ***!
  \***********************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/deallocation-form-component/deallocation-component/deallocation-component.component.ts":
/*!*********************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/deallocation-form-component/deallocation-component/deallocation-component.component.ts ***!
  \*********************************************************************************************************************************************************************************/
/*! exports provided: DeallocationComponentComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeallocationComponentComponent", function() { return DeallocationComponentComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_models_allocated_trade_display_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../shared/models/allocated-trade-display-view */ "./Client/app/shared/models/allocated-trade-display-view.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var DeallocationComponentComponent = /** @class */ (function () {
    function DeallocationComponentComponent(uiService, route, executionService, gridService) {
        this.uiService = uiService;
        this.route = route;
        this.executionService = executionService;
        this.gridService = gridService;
        this.deallocationRowSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.onDeallocationRowSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.deallocationGridOptions = {};
        this.formatType = 'en-US';
    }
    DeallocationComponentComponent.prototype.ngOnInit = function () {
        this.charterId = Number(this.route.snapshot.paramMap.get('charterId'));
        this.atlasAgGridParam = this.gridService.getAgGridParam();
        this.initAllocationGridCols();
        this.getcontractsForDeallocation();
    };
    DeallocationComponentComponent.prototype.onGridReady = function (params) {
        var _this = this;
        this.gridApi = params.api;
        this.gridColumnApi = params.columnApi;
        this.gridColumnApi.autoSizeAllColumns();
        this.gridApi.onFilterChanged();
        window.onresize = function () {
            _this.gridColumnApi.autoSizeAllColumns();
        };
    };
    DeallocationComponentComponent.prototype.initAllocationGridCols = function () {
        this.deallocationGridCols = [
            {
                colId: 'sectionId',
                hide: true,
            },
            {
                colId: 'allocatedSectionId',
                hide: true,
            },
            {
                colId: 'type',
                hide: true,
            },
            {
                headerName: 'Reference',
                headerTooltip: 'Reference',
                field: 'contractLabel',
                filter: 'agTextColumnFilter',
                colId: 'contractLabel',
                headerCheckboxSelection: false,
                headerCheckboxSelectionFilteredOnly: true,
                checkboxSelection: true,
            },
            {
                headerName: 'Department ',
                headerTooltip: 'Department ',
                field: 'departmentCode',
                colId: 'departmentCode',
            },
            {
                headerName: 'Quantity',
                headerTooltip: 'Quantity',
                field: 'quantity',
                type: 'numericColumn',
                colId: 'quantity',
                valueFormatter: this.formatValue.bind(this),
            },
            {
                headerName: 'Cmy1',
                headerTooltip: 'Cmy1',
                field: 'principalCommodity',
                colId: 'principalCommodity',
            },
            {
                headerName: 'Cmy2',
                headerTooltip: 'Cmy2',
                field: 'commodityOrigin',
                colId: 'commodityOrigin',
            },
            {
                headerName: 'Cmy3',
                headerTooltip: 'Cmy3',
                field: 'commodityGrade',
                colId: 'commodityGrade',
            },
            {
                headerName: 'Cmy4',
                headerTooltip: 'Cmy4',
                field: 'commodityLvl4',
                colId: 'commodityLvl4',
            },
            {
                headerName: 'Cmy5',
                headerTooltip: 'Cmy5',
                field: 'commodityLvl5',
                colId: 'commodityLvl5',
            },
        ];
    };
    DeallocationComponentComponent.prototype.formatValue = function (param) {
        if (isNaN(param.value) || param.value === null) {
            return '';
        }
        return new Intl.NumberFormat(this.formatType, { minimumFractionDigits: 3, maximumFractionDigits: 3 }).format(param.value);
    };
    DeallocationComponentComponent.prototype.getcontractsForDeallocation = function () {
        var _this = this;
        this.getPossibleDeallocationSubscription = this.executionService.GetPossibleDeallocationByCharterAsync(this.charterId)
            .subscribe(function (data) {
            _this.deallocationGridRows = data.value.map(function (allocatedTrade) {
                return new _shared_models_allocated_trade_display_view__WEBPACK_IMPORTED_MODULE_2__["AllocatedTradeDisplayView"](allocatedTrade);
            });
            _this.initAllocationGridCols();
        });
    };
    DeallocationComponentComponent.prototype.ngOnDestroy = function () {
        if (this.getPossibleDeallocationSubscription) {
            this.getPossibleDeallocationSubscription.unsubscribe();
        }
    };
    DeallocationComponentComponent.prototype.getSelectedRow = function () {
        return this.gridApi.getSelectedRows();
    };
    DeallocationComponentComponent.prototype.refreshDeallocationData = function () {
        this.gridApi.redrawRows();
    };
    DeallocationComponentComponent.prototype.onRowSelected = function (event) {
        if (event.node.selected === true) {
            var contractCount_1 = 0;
            var numberOfRowsSelected = this.gridApi.getSelectedRows().length;
            if (numberOfRowsSelected < 2) {
                this.deallocationGridOptions.api.forEachNode(function (contract) {
                    if (event.node.data.sectionId === contract.data.allocatedSectionId) {
                        contract.setSelected(true);
                        contractCount_1 = contractCount_1 + 1;
                    }
                });
            }
            if ((numberOfRowsSelected === 1 && contractCount_1 === 0) || numberOfRowsSelected > 2) {
                this.deallocationGridOptions.api.deselectAll();
            }
            this.deallocationRowSelected.emit();
        }
        if (!event.node.selected) {
            this.deallocationGridOptions.api.deselectAll();
        }
        this.onDeallocationRowSelected.emit(event);
    };
    DeallocationComponentComponent.prototype.onSelectionChanged = function (event) {
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], DeallocationComponentComponent.prototype, "deallocationRowSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], DeallocationComponentComponent.prototype, "onDeallocationRowSelected", void 0);
    DeallocationComponentComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-deallocation-component',
            template: __webpack_require__(/*! ./deallocation-component.component.html */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/deallocation-form-component/deallocation-component/deallocation-component.component.html"),
            styles: [__webpack_require__(/*! ./deallocation-component.component.scss */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/deallocation-form-component/deallocation-component/deallocation-component.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_ui_service__WEBPACK_IMPORTED_MODULE_5__["UiService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_4__["ExecutionService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_3__["AgGridService"]])
    ], DeallocationComponentComponent);
    return DeallocationComponentComponent;
}());



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/execution-charter-allocation-deallocation.component.html":
/*!***************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/execution-charter-allocation-deallocation.component.html ***!
  \***************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"main-container\">\r\n    <form [formGroup]=\"allocationCharterFormGroup\">\r\n        <div fxLayout=\"row\"\r\n             fxLayout.md=\"column\"\r\n             fxLayoutAlign=\"space-around start\">\r\n            <div fxLayout=\"column\"\r\n                 fxFlex=\"49\">\r\n                <atlas-purchase-allocation-component #purchaseAllocationComponent\r\n                                                     (purchaseRowSelected)=\"validateContract()\"\r\n                                                     (purchaseRowUnChecked)=\"validateContract()\"\r\n                                                     (onPurchaseRowSelectedChange)=\"purchaseRowSelectedChange($event)\"\r\n                                                     (isPurchaseRowDataUpdated)=\"rowDataUpdated($event)\">\r\n                </atlas-purchase-allocation-component>\r\n            </div>\r\n            <div fxLayout=\"column\"\r\n                 fxLayoutAlign=\"start right\"\r\n                 fxFlex=\"49\">\r\n                <atlas-sale-allocation-component #saleAllocationComponent\r\n                                                 (saleRowSelected)=\"validateContract()\"\r\n                                                 (saleRowUnChecked)=\"validateContract()\"\r\n                                                 (onSaleRowSelectedChange)=\"saleRowSelectedChange($event)\"\r\n                                                 (isSaleRowDataUpdated)=\"rowDataUpdated($event)\">\r\n                </atlas-sale-allocation-component>\r\n            </div>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"center center\"\r\n             fxLayoutWrap\r\n             *ngIf=\"isLoadingassign\"\r\n             class=\"loading\">\r\n            <mat-spinner color=\"accent\"></mat-spinner>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayout.md=\"column\"\r\n             fxLayoutAlign=\"space-around start\">\r\n            <div fxLayout=\"column\"\r\n                 fxFlex=\"98.5\">\r\n                <atlas-quantity-allocation-component #quantityAllocationComponent\r\n                                                     (isQuantityFormInvalid)=\"disableAllocationButton($event)\">\r\n                </atlas-quantity-allocation-component>\r\n            </div>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"end\"\r\n             class=\"button-details\"\r\n             [ngClass]=\"{'hidden-during-loading':isLoadingassign}\">\r\n            <div fxLayout=\"column\"\r\n                 fxLayoutAlign=\"start\">\r\n                <button mat-raised-button\r\n                        (click)=\"onAllocateButtonClicked()\"\r\n                        [disabled]=\"isDisabled\"\r\n                        mat-button>\r\n                    ALLOCATE\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </form>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"space-around start\">\r\n        <div fxLayout=\"column\"\r\n             fxFlex=\"98.5\">\r\n            <atlas-deallocation-component #deallocationComponent\r\n                                          (deallocationRowSelected)=\"validateDeallocationContract()\"\r\n                                          (onDeallocationRowSelected)=\"deallocationRowSelectedChange($event)\">\r\n            </atlas-deallocation-component>\r\n        </div>\r\n    </div>\r\n    <div class=\"btn-container\">\r\n        <div fxFlex=\"50\"\r\n             fxLayout=\"row\"\r\n             fxAlignLayout=\"start start\">\r\n            <button mat-button\r\n                    (click)=\"onDiscardButtonClicked()\">\r\n                DISCARD\r\n            </button>\r\n        </div>\r\n        <div fxFlex=\"50\"\r\n             fxLayout=\"row\"\r\n             fxAlignLayout=\"start end\">\r\n            <span class=\"fill-space\"></span>\r\n            <button mat-raised-button\r\n                    (click)=\"onDeallocateButtonClicked()\"\r\n                    [disabled]=\"isDeallocationDisabled\">\r\n                Deallocate\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>\r\n<atlas-lock-interval [resourcesInformation]=\"resourcesInformation\">\r\n</atlas-lock-interval>"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/execution-charter-allocation-deallocation.component.scss":
/*!***************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/execution-charter-allocation-deallocation.component.scss ***!
  \***************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/execution-charter-allocation-deallocation.component.ts":
/*!*************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/execution-charter-allocation-deallocation.component.ts ***!
  \*************************************************************************************************************************************************/
/*! exports provided: ExecutionCharterAllocationDeallocationComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExecutionCharterAllocationDeallocationComponent", function() { return ExecutionCharterAllocationDeallocationComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _app_shared_enums_split_type_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../app/shared/enums/split-type.enum */ "./Client/app/shared/enums/split-type.enum.ts");
/* harmony import */ var _app_shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../app/shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_enums_warning_message_type_enum__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/enums/warning-message-type.enum */ "./Client/app/shared/enums/warning-message-type.enum.ts");
/* harmony import */ var _shared_services_execution_dtos_allocate_section_command__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/services/execution/dtos/allocate-section-command */ "./Client/app/shared/services/execution/dtos/allocate-section-command.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_trading_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../shared/services/http-services/trading.service */ "./Client/app/shared/services/http-services/trading.service.ts");
/* harmony import */ var _shared_validators_warning_messages_validator_validator__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../shared/validators/warning-messages-validator.validator */ "./Client/app/shared/validators/warning-messages-validator.validator.ts");
/* harmony import */ var _allocation_form_components_purchase_allocation_component_purchase_allocation_component_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./allocation-form-components/purchase-allocation-component/purchase-allocation-component.component */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/purchase-allocation-component/purchase-allocation-component.component.ts");
/* harmony import */ var _allocation_form_components_quantity_allocation_component_quantity_allocation_component_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./allocation-form-components/quantity-allocation-component/quantity-allocation-component.component */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/quantity-allocation-component/quantity-allocation-component.component.ts");
/* harmony import */ var _allocation_form_components_sale_allocation_component_sale_allocation_component_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./allocation-form-components/sale-allocation-component/sale-allocation-component.component */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/sale-allocation-component/sale-allocation-component.component.ts");
/* harmony import */ var _contract_deallocation_dialog_component_contract_deallocation_dialog_component_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./contract-deallocation-dialog-component/contract-deallocation-dialog-component.component */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/contract-deallocation-dialog-component/contract-deallocation-dialog-component.component.ts");
/* harmony import */ var _deallocation_form_component_deallocation_component_deallocation_component_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./deallocation-form-component/deallocation-component/deallocation-component.component */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/deallocation-form-component/deallocation-component/deallocation-component.component.ts");
/* harmony import */ var _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../shared/services/http-services/lock.service */ "./Client/app/shared/services/http-services/lock.service.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../shared/entities/lock-functional-context.entity */ "./Client/app/shared/entities/lock-functional-context.entity.ts");
/* harmony import */ var _shared_entities_lock_resource_information_entity__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../shared/entities/lock-resource-information.entity */ "./Client/app/shared/entities/lock-resource-information.entity.ts");
/* harmony import */ var _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../shared/enums/contract-type.enum */ "./Client/app/shared/enums/contract-type.enum.ts");
/* harmony import */ var _shared_services_title_service__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../shared/services/title.service */ "./Client/app/shared/services/title.service.ts");
/* harmony import */ var _shared_enums_contract_invoice_type_enum__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../shared/enums/contract-invoice-type.enum */ "./Client/app/shared/enums/contract-invoice-type.enum.ts");
/* harmony import */ var _shared_services_http_services_configuration_service__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../../shared/services/http-services/configuration.service */ "./Client/app/shared/services/http-services/configuration.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



























var ExecutionCharterAllocationDeallocationComponent = /** @class */ (function (_super) {
    __extends(ExecutionCharterAllocationDeallocationComponent, _super);
    function ExecutionCharterAllocationDeallocationComponent(executionService, route, snackbarService, formConfigurationProvider, formBuilder, companyManager, router, tradingService, dialog, lockService, titleService, configurationService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.executionService = executionService;
        _this.route = route;
        _this.snackbarService = snackbarService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.formBuilder = formBuilder;
        _this.companyManager = companyManager;
        _this.router = router;
        _this.tradingService = tradingService;
        _this.dialog = dialog;
        _this.lockService = lockService;
        _this.titleService = titleService;
        _this.configurationService = configurationService;
        _this.allocationMessage = [];
        _this.contracts = [];
        _this.formComponents = [];
        _this.isDisabled = true;
        _this.isSave = false;
        _this.errorCount = 0;
        _this.isDeallocationDisabled = true;
        _this.resourcesInformation = new Array();
        _this.locking = [];
        _this.unlocking = [];
        _this.isLoadingassign = false;
        _this.isSaleDataUpdated = false;
        _this.isPurchaseDataUpdated = false;
        _this.isTradesAvailableForWashout = false;
        _this.allocationSetUpData = [];
        return _this;
    }
    ExecutionCharterAllocationDeallocationComponent.prototype.ngOnInit = function () {
        this.company = this.route.snapshot.paramMap.get('company');
        this.charterId = Number(this.route.snapshot.paramMap.get('charterId'));
        this.allocationCharterFormGroup = this.formBuilder.group({
            quantityGroup: this.quantityAllocationComponent.getFormGroup(),
        });
        this.formComponents.push(this.purchaseAllocationComponent, this.saleAllocationComponent, this.quantityAllocationComponent);
        this.subscriptions.push(this.lockService.cleanSessionLocks().subscribe());
        this.titleService.setTitle('Trade Allocation/Deallocation');
        this.getAllocationSetUpData(this.company);
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.canDeactivate = function () {
        if (this.allocationCharterFormGroup.dirty && this.isSave === false) {
            return window.confirm("Leave an unsave form? \nYour changes won't be applied!");
        }
        return true;
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.allocationSuccessful = function () {
        this.quantityAllocationComponent.formGroup.reset();
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.onAllocateButtonClicked = function () {
        var _this = this;
        this.isLoadingassign = true;
        this.isSaleDataUpdated = false;
        this.isPurchaseDataUpdated = false;
        this.isDisabled = true;
        this.isSave = true;
        if (this.allocationCharterFormGroup.valid) {
            var allocationDetails_1 = this.getAllocationDetails();
            this.checkWashoutContract(this.contracts);
            if (this.isTradesAvailableForWashout) {
                var confirmDiscardDialog = this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_20__["ConfirmationDialogComponent"], {
                    data: {
                        title: 'Washout Contract',
                        text: 'Do you want to mark this contract as washout ?',
                        okButton: 'Yes',
                        cancelButton: 'No',
                    },
                });
                confirmDiscardDialog.afterClosed().subscribe(function (answer) {
                    if (answer) {
                        allocationDetails_1.contractInvoiceTypeId = _shared_enums_contract_invoice_type_enum__WEBPACK_IMPORTED_MODULE_25__["ContractInvoiceType"].Washout;
                        _this.onAllocation(allocationDetails_1);
                    }
                    else {
                        _this.onAllocation(allocationDetails_1);
                    }
                });
            }
            else {
                this.onAllocation(allocationDetails_1);
            }
        }
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.onDiscardButtonClicked = function () {
        var _this = this;
        this.isSave = true;
        var confirmDiscardDialog = this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_20__["ConfirmationDialogComponent"], {
            data: {
                title: 'Discard Changes',
                text: 'You have some modification pending. Close and lose changes?',
                okButton: 'Ok',
                cancelButton: 'Cancel',
            },
        });
        confirmDiscardDialog.afterClosed().subscribe(function (answer) {
            if (answer) {
                _this.router.navigate([_this.route.snapshot.paramMap.get('company') +
                        '/execution/charter/details', _this.charterId]);
            }
        });
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.onDeallocateButtonClicked = function () {
        this.isDeallocationDisabled = true;
        this.isSave = true;
        var contract = this.deallocationComponent.getSelectedRow()[0];
        if (contract) {
            this.openDeallocationDialog(contract.sectionId);
        }
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.openDeallocationDialog = function (sectionId) {
        var _this = this;
        var dialogRef = this.dialog.open(_contract_deallocation_dialog_component_contract_deallocation_dialog_component_component__WEBPACK_IMPORTED_MODULE_17__["ContractDeallocationDialogComponent"], {
            disableClose: true,
            width: '250px',
            panelClass: 'trade-approval-dialog-class',
            backdropClass: 'trade-approval-dialog-background-class',
        });
        this.subscriptions.push(dialogRef.afterClosed().subscribe(function (result) {
            if (result !== undefined) {
                _this.subscriptions.push(_this.executionService.deallocateContract(sectionId, result)
                    .subscribe(function (ok) {
                    if (ok) {
                        _this.snackbarService.throwErrorSnackBar('Trade has been successfully de-allocated');
                        _this.updateContractData();
                        var selectedContracts = _this.deallocationComponent.getSelectedRow();
                        _this.cleanAllocationSelectedContracts();
                        _this.refeshResourceInformation();
                        selectedContracts.forEach(function (selectedContract) {
                            _this.subscriptions.push(_this.lockService.unlockContract(selectedContract.sectionId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_21__["LockFunctionalContext"].Deallocation).subscribe());
                        });
                    }
                }));
            }
            else {
                _this.isDeallocationDisabled = false;
            }
        }));
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.validateContract = function () {
        var _this = this;
        this.errorCount = 0;
        var purchaseContract = this.purchaseAllocationComponent.getSelectedRow();
        var saleContract = this.saleAllocationComponent.getSelectedRow();
        if (purchaseContract && saleContract) {
            this.message = '';
            this.allocationMessage = [];
            this.contracts = [];
            this.contracts.push(purchaseContract);
            this.contracts.push(saleContract);
            this.quantityAllocationComponent.updateQuantityData(this.contracts);
            if (purchaseContract.departmentCode !== saleContract.departmentCode) {
                this.message = 'Department,';
                this.errorCount = this.errorCount + 1;
            }
            if (purchaseContract.weightCode !== saleContract.weightCode) {
                this.message = this.message + 'Quantity Code';
                this.errorCount = this.errorCount + 1;
            }
            if (this.message.length > 0) {
                this.message = this.message + ' ' + 'must be the same to perform allocation.';
            }
            this.allocateSectionSubscription =
                this.executionService.getWarningMessages(purchaseContract.sectionId, saleContract.sectionId)
                    .subscribe(function (data) {
                    if (data.value.length > 1) {
                        _this.allocationMessage = Object(_shared_validators_warning_messages_validator_validator__WEBPACK_IMPORTED_MODULE_13__["GetWarningMessages"])(data.value, _this.allocationSetUpData);
                    }
                    if (_this.allocationMessage.length > 0) {
                        _this.allocationMessage.forEach(function (item) {
                            if (item.errorTypeId === _shared_enums_warning_message_type_enum__WEBPACK_IMPORTED_MODULE_8__["WarningMessageTypes"].Restricted) {
                                _this.errorCount = _this.errorCount + 1;
                                _this.message = _this.message + ', ' + item.message;
                            }
                            if (item.errorTypeId === _shared_enums_warning_message_type_enum__WEBPACK_IMPORTED_MODULE_8__["WarningMessageTypes"].Warning) {
                                _this.message = _this.message + ', ' + item.message;
                            }
                        });
                    }
                    _this.displayErrorMessages();
                });
        }
        else {
            this.contracts = [];
            this.quantityAllocationComponent.updateQuantityData(this.contracts);
            this.isDisabled = true;
        }
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.ngOnDestroy = function () {
        var _this = this;
        if (this.allocateSectionSubscription) {
            this.allocateSectionSubscription.unsubscribe();
        }
        this.subscriptions.push(this.lockService.cleanSessionLocks().subscribe(function () {
            _this.subscriptions.forEach(function (subscription) {
                subscription.unsubscribe();
            });
        }));
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.displayErrorMessages = function () {
        if (this.message.length > 0) {
            this.message = this.message.replace(/^,|,$/g, '');
            this.snackbarService.throwErrorSnackBar(this.message);
        }
        this.isDisabled = this.errorCount > 0 ? true : false;
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.getAllocationDetails = function () {
        var allocationDetails = new _shared_services_execution_dtos_allocate_section_command__WEBPACK_IMPORTED_MODULE_9__["AllocateSectionCommand"]();
        this.formComponents.forEach(function (comp) {
            allocationDetails = comp.populateEntity(allocationDetails);
        });
        return allocationDetails;
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.allocateTrade = function (allocationDetails) {
        var _this = this;
        this.subscriptions.push(this.executionService
            .allocate(allocationDetails)
            .subscribe(function (data) {
            var message = 'the trade' + ' ' + allocationDetails.sectionReference + ' ' +
                ' has been properly allocated to ' + ' ' +
                allocationDetails.allocatedSectionReference + ' ' + ' with the number ' + ' ' + data;
            _this.snackbarService.informationAndCopySnackBar(message, message);
            _this.updateContractData();
            _this.cleanAllocationSelectedContracts();
            _this.refeshResourceInformation();
            _this.subscriptions.push(_this.lockService.unlockContract(allocationDetails.sectionId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_21__["LockFunctionalContext"].Deallocation).subscribe());
            _this.subscriptions.push(_this.lockService.unlockContract(allocationDetails.allocatedSectionId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_21__["LockFunctionalContext"].Deallocation).subscribe());
            _this.allocationSuccessful();
        }));
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.createSplitAndAllocate = function (sectionIds, allocationDetails) {
        var _this = this;
        var splitResult = [];
        var splitIds = [];
        this.allocateSectionSubscription = this.tradingService
            .createSplitForContract(sectionIds, allocationDetails.quantity)
            .subscribe((function (data) {
            _this.splitResult = data;
            if (_this.splitResult.length > 0 && allocationDetails.splitType === _app_shared_enums_split_type_enum__WEBPACK_IMPORTED_MODULE_5__["SplitType"].SourceSplit) {
                allocationDetails.sectionId = _this.splitResult[0].sectionId;
                allocationDetails.sectionReference = _this.splitResult[0].contractLabel;
                splitIds.push(allocationDetails.sectionId);
            }
            else if (_this.splitResult.length > 0 && allocationDetails.splitType === _app_shared_enums_split_type_enum__WEBPACK_IMPORTED_MODULE_5__["SplitType"].TargetSplit) {
                allocationDetails.allocatedSectionId = _this.splitResult[0].sectionId;
                allocationDetails.allocatedSectionReference = _this.splitResult[0].contractLabel;
                splitIds.push(allocationDetails.allocatedSectionId);
            }
            else {
                if (_this.splitResult.length > 1) {
                    allocationDetails.sectionId = _this.splitResult[0].sectionId;
                    allocationDetails.allocatedSectionId = _this.splitResult[1].sectionId;
                    allocationDetails.sectionReference = _this.splitResult[0].contractLabel;
                    allocationDetails.allocatedSectionReference = _this.splitResult[1].contractLabel;
                    splitIds.push(allocationDetails.sectionId);
                    splitIds.push(allocationDetails.allocatedSectionId);
                }
            }
            _this.assignSplitToCharter(splitIds, allocationDetails);
        }));
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.assignSplitToCharter = function (splitIds, allocationDetails) {
        var _this = this;
        if (splitIds.length >= 1) {
            var sectionTrafficList_1 = [];
            splitIds.forEach(function (splitId) {
                sectionTrafficList_1.push(_this.executionService.GetSectionTrafficDetails(splitId).toPromise());
            });
            Promise.all(sectionTrafficList_1).then(function (result) {
                _this.executionService.assignSectionsToCharter(_this.charterId, result).subscribe((function (data) {
                    _this.allocateTrade(allocationDetails);
                }));
            });
        }
        else {
            this.allocationSuccessful();
        }
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.validateDeallocationContract = function () {
        var contracts = this.deallocationComponent.getSelectedRow();
        this.isDeallocationDisabled = contracts.length > 2 ? true : false;
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.updateContractData = function () {
        this.purchaseAllocationComponent.getPurchaseTradesForAllocation();
        this.saleAllocationComponent.getSaleTradesForAllocation();
        this.deallocationComponent.getcontractsForDeallocation();
        this.refeshResourceInformation();
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.purchaseRowSelectedChange = function (event) {
        this.grantLock(Number(event.data.sectionId), event.node, _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_23__["ContractTypes"].Purchase);
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.saleRowSelectedChange = function (event) {
        this.grantLock(Number(event.data.sectionId), event.node, _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_23__["ContractTypes"].Sale);
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.rowDataUpdated = function (event) {
        if (event.salesDataUpdated) {
            this.isSaleDataUpdated = true;
        }
        if (event.purchaseDataUpdated) {
            this.isPurchaseDataUpdated = true;
        }
        if (this.isSaleDataUpdated && this.isPurchaseDataUpdated) {
            this.isLoadingassign = false;
        }
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.deallocationRowSelectedChange = function (event) {
        this.grantLock(Number(event.data.sectionId), event.node, null);
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.grantLock = function (sectionId, node, contractType) {
        var _this = this;
        if (node.isSelected()) {
            if (!this.locking.includes(sectionId)) {
                this.locking.push(sectionId);
                this.subscriptions.push(this.lockService.isLockedContract(sectionId).subscribe(function (lock) {
                    if (lock.isLocked) {
                        _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_20__["ConfirmationDialogComponent"], {
                            data: {
                                title: 'Lock',
                                text: lock.message,
                                okButton: 'Got it',
                            },
                        });
                        if (contractType === null) {
                            _this.deallocationComponent.gridApi.deselectNode(node);
                        }
                        else if (contractType === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_23__["ContractTypes"].Purchase) {
                            _this.purchaseAllocationComponent.gridApi.deselectNode(node);
                        }
                        else if (contractType === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_23__["ContractTypes"].Sale) {
                            _this.saleAllocationComponent.gridApi.deselectNode(node);
                        }
                        _this.locking = _this.locking.filter(function (id) { return id !== sectionId; });
                    }
                    else {
                        var lockFunctionalContext = _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_21__["LockFunctionalContext"].BulkAllocation;
                        if (contractType === null) {
                            lockFunctionalContext = _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_21__["LockFunctionalContext"].BulkDeallocation;
                        }
                        _this.subscriptions.push(_this.lockService.lockContract(sectionId, lockFunctionalContext).subscribe(function (lockState) {
                            _this.refeshResourceInformation();
                            _this.locking = _this.locking.filter(function (id) { return id !== sectionId; });
                        }));
                    }
                }));
            }
        }
        else {
            if (!this.unlocking.includes(sectionId)) {
                this.unlocking.push(sectionId);
                this.refeshResourceInformation();
                var lockFunctionalContext = _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_21__["LockFunctionalContext"].BulkAllocation;
                if (contractType === null) {
                    lockFunctionalContext = _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_21__["LockFunctionalContext"].BulkDeallocation;
                }
                this.subscriptions.push(this.lockService.unlockContract(sectionId, lockFunctionalContext).subscribe(function () {
                    node.setRowSelectable(true);
                    _this.unlocking = _this.unlocking.filter(function (id) { return id !== sectionId; });
                }));
            }
        }
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.cleanAllocationSelectedContracts = function () {
        var _this = this;
        this.purchaseAllocationComponent.gridApi.forEachNode(function (node) {
            if (node.isSelected()) {
                _this.purchaseAllocationComponent.gridApi.deselectNode(node);
            }
        });
        this.saleAllocationComponent.gridApi.forEachNode(function (node) {
            if (node.isSelected()) {
                _this.saleAllocationComponent.gridApi.deselectNode(node);
            }
        });
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.refeshResourceInformation = function () {
        var _this = this;
        this.resourcesInformation = new Array();
        this.purchaseAllocationComponent.gridApi.forEachNode(function (node) {
            if (node.isSelected()) {
                var resourceInformation = new _shared_entities_lock_resource_information_entity__WEBPACK_IMPORTED_MODULE_22__["LockResourceInformation"]();
                resourceInformation.resourceType = 'Contract';
                resourceInformation.resourceId = node.data.sectionId;
                resourceInformation.resourceCode = node.data.contractReference;
                _this.resourcesInformation.push(resourceInformation);
            }
        });
        this.saleAllocationComponent.gridApi.forEachNode(function (node) {
            if (node.isSelected()) {
                var resourceInformation = new _shared_entities_lock_resource_information_entity__WEBPACK_IMPORTED_MODULE_22__["LockResourceInformation"]();
                resourceInformation.resourceType = 'Contract';
                resourceInformation.resourceId = node.data.sectionId;
                resourceInformation.resourceCode = node.data.contractReference;
                _this.resourcesInformation.push(resourceInformation);
            }
        });
        this.deallocationComponent.gridApi.forEachNode(function (node) {
            if (node.isSelected()) {
                var resourceInformation = new _shared_entities_lock_resource_information_entity__WEBPACK_IMPORTED_MODULE_22__["LockResourceInformation"]();
                resourceInformation.resourceType = 'Contract';
                resourceInformation.resourceId = node.data.sectionId;
                resourceInformation.resourceCode = node.data.contractReference;
                _this.resourcesInformation.push(resourceInformation);
            }
        });
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.disableAllocationButton = function (value) {
        this.isDisabled = (value) ? true : false;
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.checkWashoutContract = function (contract) {
        if (contract[0].counterparty === contract[1].counterparty && contract[0].currencyCode === contract[1].currencyCode) {
            this.isTradesAvailableForWashout = true;
        }
        else {
            this.isTradesAvailableForWashout = false;
        }
    };
    ExecutionCharterAllocationDeallocationComponent.prototype.onAllocation = function (allocationDetails) {
        if ((allocationDetails.quantity === allocationDetails.sourceQuantity) &&
            (allocationDetails.quantity === allocationDetails.targetQuantity)) {
            this.allocateTrade(allocationDetails);
        }
        else {
            var sectionIds = [];
            allocationDetails.splitType = (allocationDetails.sourceQuantity > allocationDetails.quantity) &&
                (allocationDetails.targetQuantity === allocationDetails.quantity) ? _app_shared_enums_split_type_enum__WEBPACK_IMPORTED_MODULE_5__["SplitType"].SourceSplit :
                (allocationDetails.sourceQuantity === allocationDetails.quantity) &&
                    (allocationDetails.targetQuantity > allocationDetails.quantity) ? _app_shared_enums_split_type_enum__WEBPACK_IMPORTED_MODULE_5__["SplitType"].TargetSplit : _app_shared_enums_split_type_enum__WEBPACK_IMPORTED_MODULE_5__["SplitType"].Both;
            switch (allocationDetails.splitType) {
                case _app_shared_enums_split_type_enum__WEBPACK_IMPORTED_MODULE_5__["SplitType"].SourceSplit:
                    sectionIds.push(allocationDetails.sectionId);
                    this.createSplitAndAllocate(sectionIds, allocationDetails);
                    break;
                case _app_shared_enums_split_type_enum__WEBPACK_IMPORTED_MODULE_5__["SplitType"].TargetSplit:
                    sectionIds.push(allocationDetails.allocatedSectionId);
                    this.createSplitAndAllocate(sectionIds, allocationDetails);
                    break;
                case _app_shared_enums_split_type_enum__WEBPACK_IMPORTED_MODULE_5__["SplitType"].Both:
                    sectionIds.push(allocationDetails.sectionId);
                    sectionIds.push(allocationDetails.allocatedSectionId);
                    this.createSplitAndAllocate(sectionIds, allocationDetails);
                    break;
            }
        }
    };
    // this method will fetch allocationsetupdata for a company
    ExecutionCharterAllocationDeallocationComponent.prototype.getAllocationSetUpData = function (company) {
        var _this = this;
        this.configurationService.getAllocationSetUpByCompany(company)
            .subscribe(function (data) {
            if (data && data.length > 0) {
                _this.allocationSetUpData = data;
            }
        });
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('purchaseAllocationComponent'),
        __metadata("design:type", _allocation_form_components_purchase_allocation_component_purchase_allocation_component_component__WEBPACK_IMPORTED_MODULE_14__["PurchaseAllocationComponentComponent"])
    ], ExecutionCharterAllocationDeallocationComponent.prototype, "purchaseAllocationComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('saleAllocationComponent'),
        __metadata("design:type", _allocation_form_components_sale_allocation_component_sale_allocation_component_component__WEBPACK_IMPORTED_MODULE_16__["SaleAllocationComponentComponent"])
    ], ExecutionCharterAllocationDeallocationComponent.prototype, "saleAllocationComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('quantityAllocationComponent'),
        __metadata("design:type", _allocation_form_components_quantity_allocation_component_quantity_allocation_component_component__WEBPACK_IMPORTED_MODULE_15__["QuantityAllocationComponentComponent"])
    ], ExecutionCharterAllocationDeallocationComponent.prototype, "quantityAllocationComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('deallocationComponent'),
        __metadata("design:type", _deallocation_form_component_deallocation_component_deallocation_component_component__WEBPACK_IMPORTED_MODULE_18__["DeallocationComponentComponent"])
    ], ExecutionCharterAllocationDeallocationComponent.prototype, "deallocationComponent", void 0);
    ExecutionCharterAllocationDeallocationComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-execution-charter-allocation-deallocation',
            template: __webpack_require__(/*! ./execution-charter-allocation-deallocation.component.html */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/execution-charter-allocation-deallocation.component.html"),
            styles: [__webpack_require__(/*! ./execution-charter-allocation-deallocation.component.scss */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/execution-charter-allocation-deallocation.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_11__["ExecutionService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"],
            _app_shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_6__["SnackbarService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_10__["FormConfigurationProviderService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__["CompanyManagerService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"],
            _shared_services_http_services_trading_service__WEBPACK_IMPORTED_MODULE_12__["TradingService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"],
            _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_19__["LockService"],
            _shared_services_title_service__WEBPACK_IMPORTED_MODULE_24__["TitleService"],
            _shared_services_http_services_configuration_service__WEBPACK_IMPORTED_MODULE_26__["ConfigurationService"]])
    ], ExecutionCharterAllocationDeallocationComponent);
    return ExecutionCharterAllocationDeallocationComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_7__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-assignment/execution-charter-assignment.component.html":
/*!*************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-assignment/execution-charter-assignment.component.html ***!
  \*************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<header class=\"header-background\">\r\n    <div class=\"header-content\">\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"1%\">\r\n            <h2>Main Information</h2>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"1%\">\r\n            <mat-chip-list>\r\n                <mat-chip selected\r\n                          disabled=true>\r\n                    Charter Reference : {{charterReference}}\r\n                </mat-chip>\r\n                <mat-chip *ngIf=\"charterDescription\"\r\n                          selected\r\n                          disabled=true>\r\n                    Charter Description : {{charterDescription}}\r\n                </mat-chip>\r\n                <mat-chip *ngIf=\"charterManager\"\r\n                          selected\r\n                          disabled=true>\r\n                    Charter Manager : {{charterManager}}\r\n                </mat-chip>\r\n                <mat-chip *ngIf=\"vessel\"\r\n                          selected\r\n                          disabled=true>\r\n                    Vessel : {{vessel}}\r\n                </mat-chip>\r\n                <mat-chip selected\r\n                          disabled=true>\r\n                    KPI Transport Type : {{transportType}}\r\n                </mat-chip>\r\n            </mat-chip-list>\r\n        </div>\r\n    </div>\r\n</header>\r\n\r\n<div class=\"main-container\">\r\n    <mat-card>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"start none\"\r\n             class=\"search\">\r\n            <mat-form-field>\r\n                <input matInput\r\n                       fxFlex=\"30%\"\r\n                       [formControl]=\"searchContractReferenceCtrl\"\r\n                       placeholder=\"Contract N°\"\r\n                       autocomplete=\"off\"\r\n                       (keydown.enter)=\"onQuickSearchButtonClicked()\"\r\n                       #message>\r\n            </mat-form-field>\r\n            <atlas-masterdata-user-preferences-input fxFlex=\"30%\"\r\n                                                     isEditable=\"true\"\r\n                                                     [fieldControl]=\"counterPartyCtrl\"\r\n                                                     [options]=\"filteredCounterPartyList\"\r\n                                                     label=\"Counter Party\"\r\n                                                     (keydown.enter)=\"onQuickSearchButtonClicked()\"\r\n                                                     displayProperty=\"counterpartyCode\"\r\n                                                     [selectProperties]=\"['counterpartyCode', 'description']\"\r\n                                                     lightBoxTitle=\"Results for Counterparty\"\r\n                                                     gridId=\"counterpartiesGrid\"\r\n                                                     [dataLoader]=\"counterpartyDataLoader\">\r\n            </atlas-masterdata-user-preferences-input>\r\n            <mat-form-field>\r\n                <input matInput\r\n                       fxFlex=\"30%\"\r\n                       [formControl]=\"commodity1Ctrl\"\r\n                       placeholder=\"Commodity1\"\r\n                       autocomplete=\"off\"\r\n                       (keydown.enter)=\"onQuickSearchButtonClicked()\"\r\n                       #message>\r\n            </mat-form-field>\r\n            <button mat-raised-button\r\n                    (click)=\"onQuickSearchButtonClicked()\"\r\n                    class=\"heroGradient\">\r\n                <mat-icon aria-label=\"Search\"\r\n                          class=\"search-icon\">search</mat-icon>\r\n            </button>\r\n        </div>\r\n    </mat-card>\r\n\r\n    <atlas-list-and-search class=\"charter-trade-assign-height\"\r\n                           [gridCode]=\"gridCode\"\r\n                           [gridTitle]=\"'Charter Assignment Sections'\"\r\n                           [additionalFilters]=\"additionalFilters\"\r\n                           (rowSelected)=\"rowSelected($event)\"\r\n                           [company]=\"company\"\r\n                           [dataLoader]=\"dataLoader\"\r\n                           [dataVersionId]=\"dataVersionId\"\r\n                           #listAndSearchComponent>\r\n    </atlas-list-and-search>\r\n\r\n\r\n    <mat-card class=\"mat-elevation-z1 padding-small atr-ag-grid\">\r\n        <div fxFlex=\"100\">\r\n            <div fxLayout=\"row\">\r\n                <mat-card-title>Selected Contract</mat-card-title>\r\n            </div>\r\n            <div ag-grid=\"charterGridOptionsAss\"\r\n                 class=\"ag-theme-material pointer-cursor\">\r\n                <ag-grid-angular class=\"ag-theme-material\"\r\n                                 [rowData]=\"assignedContractGridRows\"\r\n                                 [columnDefs]=\"assignedContractGridColumns\"\r\n                                 (gridReady)=\"onGridReadyAssign($event)\"\r\n                                 [pagination]=\"true\"\r\n                                 domLayout=autoHeight\r\n                                 [paginationPageSize]=\"10\"\r\n                                 [enableSorting]=\"true\"\r\n                                 [enableColResize]=\"false\"\r\n                                 [animateRows]=\"true\"\r\n                                 [suppressDragLeaveHidesColumns]=\"true\"\r\n                                 rowSelection='multiple'\r\n                                 [rowStyle]=\"rowStyle\"\r\n                                 (cellValueChanged)=\"onCellValueChanged($event)\"\r\n                                 [context]=\"gridContext\"\r\n                                 [groupUseEntireRow]=\"true\"\r\n                                 [suppressRowClickSelection]=\"true\"\r\n                                 [rowHeight]=\"atlasAgGridParam.rowHeight\">\r\n                </ag-grid-angular>\r\n            </div>\r\n        </div>\r\n    </mat-card>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"center center\"\r\n         fxLayoutWrap\r\n         *ngIf=\"isLoadingassign\"\r\n         class=\"loading\">\r\n        <mat-spinner color=\"accent\"></mat-spinner>\r\n    </div>\r\n    <atlas-floating-action-button [fabTitle]=\"fabTitle\"\r\n                                  [fabType]=\"fabType\"\r\n                                  [fabActions]=\"fabMenuActions\"\r\n                                  [isParentLoaded]=\"isLoaded\"\r\n                                  (fabActionClicked)=\"onFabActionClicked($event)\">\r\n    </atlas-floating-action-button>\r\n</div>\r\n<atlas-lock-interval [resourcesInformation]=\"resourcesInformation\">\r\n</atlas-lock-interval>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-assignment/execution-charter-assignment.component.scss":
/*!*************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-assignment/execution-charter-assignment.component.scss ***!
  \*************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ":host ::ng-deep.ag-layout-auto-height.ag-body-container {\n  min-height: 100px !important; }\n\n.atr-ag-grid {\n  height: 100%; }\n\n::ng-deep.mat-form-field-appearance-legacy .mat-form-field-infix {\n  padding-top: 13px !important; }\n\n.search-bar {\n  margin-bottom: 16px; }\n\n.mat-card-title {\n  margin-bottom: 0px; }\n\n:host ::ng-deep atlas-list-and-search.charter-trade-assign-height {\n  height: calc(100vh - 56px - 236px - 130px - 40px - 256px); }\n\n:host ::ng-deep atlas-list-and-search.charter-trade-assign-height .list-and-search-grid-card {\n    height: inherit;\n    min-height: 230px;\n    max-height: calc(100vh - 120px); }\n\n:host ::ng-deep atlas-list-and-search.charter-trade-assign-height .list-and-search-grid-card .ag-grid-div-container {\n      height: calc(100% - 60px);\n      width: 100%; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-assignment/execution-charter-assignment.component.ts":
/*!***********************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-assignment/execution-charter-assignment.component.ts ***!
  \***********************************************************************************************************************/
/*! exports provided: ExecutionCharterAssignmentComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExecutionCharterAssignmentComponent", function() { return ExecutionCharterAssignmentComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_material_moment_adapter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/material-moment-adapter */ "./node_modules/@angular/material-moment-adapter/esm5/material-moment-adapter.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _shared_components_ag_grid_copy_icon_ag_grid_copy_icon_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/components/ag-grid-copy-icon/ag-grid-copy-icon.component */ "./Client/app/shared/components/ag-grid-copy-icon/ag-grid-copy-icon.component.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _shared_components_floating_action_button_floating_action_button_type_enum__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../shared/components/floating-action-button/floating-action-button-type.enum */ "./Client/app/shared/components/floating-action-button/floating-action-button-type.enum.ts");
/* harmony import */ var _shared_components_list_and_search_list_and_search_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../shared/components/list-and-search/list-and-search.component */ "./Client/app/shared/components/list-and-search/list-and-search.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_charter_entity__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../shared/entities/charter.entity */ "./Client/app/shared/entities/charter.entity.ts");
/* harmony import */ var _shared_entities_list_and_search_list_and_search_filter_entity__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../shared/entities/list-and-search/list-and-search-filter.entity */ "./Client/app/shared/entities/list-and-search/list-and-search-filter.entity.ts");
/* harmony import */ var _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../shared/entities/lock-functional-context.entity */ "./Client/app/shared/entities/lock-functional-context.entity.ts");
/* harmony import */ var _shared_entities_lock_resource_information_entity__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../shared/entities/lock-resource-information.entity */ "./Client/app/shared/entities/lock-resource-information.entity.ts");
/* harmony import */ var _shared_entities_section_traffic_entity__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../shared/entities/section-traffic.entity */ "./Client/app/shared/entities/section-traffic.entity.ts");
/* harmony import */ var _shared_enums_contract_status_enum__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../shared/enums/contract-status.enum */ "./Client/app/shared/enums/contract-status.enum.ts");
/* harmony import */ var _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../shared/enums/contract-type.enum */ "./Client/app/shared/enums/contract-type.enum.ts");
/* harmony import */ var _shared_enums_list_and_search_filter_type_enum__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../shared/enums/list-and-search-filter-type.enum */ "./Client/app/shared/enums/list-and-search-filter-type.enum.ts");
/* harmony import */ var _shared_enums_warning_message_type_enum__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../shared/enums/warning-message-type.enum */ "./Client/app/shared/enums/warning-message-type.enum.ts");
/* harmony import */ var _shared_models_assigned_section_display_view__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../shared/models/assigned-section-display-view */ "./Client/app/shared/models/assigned-section-display-view.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../shared/services/grid-configuration-provider.service */ "./Client/app/shared/services/grid-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_configuration_service__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../shared/services/http-services/configuration.service */ "./Client/app/shared/services/http-services/configuration.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../../shared/services/http-services/lock.service */ "./Client/app/shared/services/http-services/lock.service.ts");
/* harmony import */ var _shared_services_http_services_user_identity_service__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../../shared/services/http-services/user-identity.service */ "./Client/app/shared/services/http-services/user-identity.service.ts");
/* harmony import */ var _shared_services_list_and_search_charter_assignmentSections_data_loader__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../../../shared/services/list-and-search/charter-assignmentSections-data-loader */ "./Client/app/shared/services/list-and-search/charter-assignmentSections-data-loader.ts");
/* harmony import */ var _shared_services_masterdata_counterparty_data_loader__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../../../shared/services/masterdata/counterparty-data-loader */ "./Client/app/shared/services/masterdata/counterparty-data-loader.ts");
/* harmony import */ var _shared_services_security_service__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../../../shared/services/security.service */ "./Client/app/shared/services/security.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_split_create_and_allocate_service__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../../../shared/services/split-create-and-allocate.service */ "./Client/app/shared/services/split-create-and-allocate.service.ts");
/* harmony import */ var _shared_services_title_service__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../../../shared/services/title.service */ "./Client/app/shared/services/title.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _shared_validators_warning_messages_validator_validator__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ../../../shared/validators/warning-messages-validator.validator */ "./Client/app/shared/validators/warning-messages-validator.validator.ts");
var __assign = (undefined && undefined.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};





































var ExecutionCharterAssignmentComponent = /** @class */ (function () {
    function ExecutionCharterAssignmentComponent(dateLocale, options, executionService, route, formBuilder, userIdentityService, snackbarService, createSplitService, router, lockService, dialog, titleService, securityService, gridConfigurationProvider, gridService, configurationService, dataLoader, utilService, counterpartyDataLoader) {
        this.dateLocale = dateLocale;
        this.options = options;
        this.executionService = executionService;
        this.route = route;
        this.formBuilder = formBuilder;
        this.userIdentityService = userIdentityService;
        this.snackbarService = snackbarService;
        this.createSplitService = createSplitService;
        this.router = router;
        this.lockService = lockService;
        this.dialog = dialog;
        this.titleService = titleService;
        this.securityService = securityService;
        this.gridConfigurationProvider = gridConfigurationProvider;
        this.gridService = gridService;
        this.configurationService = configurationService;
        this.dataLoader = dataLoader;
        this.utilService = utilService;
        this.counterpartyDataLoader = counterpartyDataLoader;
        this.assignedContractGridRows = [];
        this.getAllocationWarningMessagesSubscription = [];
        this.allocationMessage = [];
        this.isRevert = false;
        this.quantityColumn = 'quantity';
        this.charter = new _shared_entities_charter_entity__WEBPACK_IMPORTED_MODULE_13__["Charter"]();
        this.formatType = 'en-US';
        this.isSave = false;
        this.isLoadingAssigned = true;
        this.dataLength = 0;
        this.destroy$ = new rxjs__WEBPACK_IMPORTED_MODULE_6__["Subject"]();
        this.resourcesInformation = new Array();
        this.locking = [];
        this.unlocking = [];
        this.isLoadingassign = false;
        this.sectionsGridOptions = {};
        this.hasGridSharing = false;
        this.componentId = 'charterSectionToAssign';
        this.fabMenuActions = [];
        this.isLoaded = false;
        this.defaultColumnDisplay = {
            checkboxSelection: true,
            contractLabel: true,
            commodityPart1: true,
            commodityPart2: true,
            commodityPart3: true,
            quantity: true,
            quantityUnit: true,
            shipmentPeriod: true,
            department: true,
            counterparty: true,
        };
        this.isPopupRequired = false;
        this.isWashoutRequired = false;
        this.allocationSetUpData = [];
        this.additionalFilters = [];
        this.gridCode = 'charterSectionToAssign';
        this.searchContractReferenceCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_12__["AtlasFormControl"]('searchContractReferenceCtrl');
        this.counterPartyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_12__["AtlasFormControl"]('CounterParty');
        this.commodity1Ctrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_12__["AtlasFormControl"]('commodity1Ctrl');
        this.locale = dateLocale || moment__WEBPACK_IMPORTED_MODULE_5__["locale"]();
        this.useUtc = this.options && this.options.useUtc;
    }
    ExecutionCharterAssignmentComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.charterId = Number(this.route.snapshot.paramMap.get('charterId'));
        this.company = this.route.snapshot.paramMap.get('company');
        this.dataVersionId = this.route.snapshot.paramMap.get('dataVersionId') ?
            Number(this.route.snapshot.paramMap.get('dataVersionId')) : null;
        this.masterdata = this.route.snapshot.data.masterdata;
        this.filteredCounterPartyList = this.masterdata.counterparties;
        this.counterPartyCtrl.valueChanges.subscribe(function (input) {
            _this.filterCounterParty(input);
        });
        this.gridContext = this;
        this.getCharter(this.charterId);
        this.onInitView();
        this.tempContractGridRows = [];
        this.initializeAssignmentGridColumns();
        this.initFavouriteColumns();
        this.securityService.isSecurityReady().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__["concatMap"])(function () {
            return _this.gridConfigurationProvider.getConfiguration(_this.company, _this.componentId);
        })).subscribe(function (configuration) {
            _this.hasGridSharing = configuration.hasMultipleViewsPerUser;
        });
        this.lockService.cleanSessionLocks().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__["takeUntil"])(this.destroy$)).subscribe();
        this.atlasAgGridParam = this.gridService.getAgGridParam();
        this.getAllocationSetUpData(this.company);
        this.initFABActions();
        this.isLoaded = true;
    };
    ExecutionCharterAssignmentComponent.prototype.filterCounterParty = function (input) {
        this.filteredCounterPartyList = this.utilService.filterListforAutocomplete(input, this.masterdata.counterparties, ['counterpartyCode', 'description']);
        if (this.counterPartyCtrl.valid || !this.counterPartyCtrl.value) {
            this.onQuickSearchButtonClicked();
        }
    };
    ExecutionCharterAssignmentComponent.prototype.canDeactivate = function () {
        if (this.isSave === false) {
            return window.confirm('Leave an unsave form? \nYour changes won\'t be applied!');
        }
        return true;
    };
    ExecutionCharterAssignmentComponent.prototype.unloadNotification = function ($event) {
        if (this.searchForm.dirty) {
            $event.returnValue = true;
        }
    };
    ExecutionCharterAssignmentComponent.prototype.getCharter = function (charterId) {
        var _this = this;
        this.executionService.getCharterById(charterId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__["map"])(function (charter) {
            _this.charter = charter;
            _this.charterReference = charter.charterCode;
            _this.charterDescription = charter.description;
            _this.updateCharterManager(charter.charterManagerId);
            if (charter.vesselCode) {
                var vesselDetails = _this.masterdata.vessels.find(function (x) { return x.vesselName === charter.vesselCode; });
                if (vesselDetails) {
                    _this.vessel = vesselDetails.description;
                }
            }
            if (charter.transportTypeCode) {
                var transportType = _this.masterdata.transportTypes.find(function (x) {
                    return x.transportTypeCode === charter.transportTypeCode;
                });
                if (transportType) {
                    _this.transportType = transportType.description;
                }
            }
            _this.titleService.setTitle(_this.charterReference + ' - Trade Assignment');
        }))
            .subscribe();
    };
    ExecutionCharterAssignmentComponent.prototype.updateCharterManager = function (userId) {
        var _this = this;
        if (userId) {
            this.userIdentityService.getAllUsers().subscribe(function (data) {
                _this.charterManager = data.value.find(function (user) { return user.userId === userId; }).displayName;
            });
        }
    };
    ExecutionCharterAssignmentComponent.prototype.onInitView = function () {
        var _this = this;
        this.isLoading = this.hasSearched = true;
        this.executionService.getSectionsToBeAssignToCharter().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__["map"])(function (data) {
            _this.selectedContractGridRowsAfterSearch = _this.selectedContractGridRows = data.value.map(function (section) {
                section.counterparty = (section.contractType === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_19__["ContractTypes"].Purchase ? section.sellerCode : section.buyerCode);
                return new _shared_models_assigned_section_display_view__WEBPACK_IMPORTED_MODULE_22__["AssignedSectionView"](section);
            });
            _this.dataLength = _this.selectedContractGridRows.length;
            _this.foundContractTitle = 'Contract Found';
            if (_this.dataLength > 1) {
                _this.foundContractTitle = 'Contracts Found';
            }
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__["finalize"])(function () {
            _this.isLoadingAssigned = false;
        }))
            .subscribe();
    };
    ExecutionCharterAssignmentComponent.prototype.onSearchTrade = function () {
        var _this = this;
        this.selectedContractGridRows = [];
        this.searchTerm = this.searchForm.get('searchContractReferenceCtrl').value;
        if (!this.searchTerm) {
            this.executionService.getSectionsToBeAssignToCharter().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__["map"])(function (data) {
                _this.selectedContractGridRows = data.value.map(function (section) {
                    section.counterparty = (section.contractType === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_19__["ContractTypes"].Purchase ? section.sellerCode : section.buyerCode);
                    return new _shared_models_assigned_section_display_view__WEBPACK_IMPORTED_MODULE_22__["AssignedSectionView"](section);
                });
                _this.dataLength = _this.selectedContractGridRows.length;
                _this.foundContractTitle = 'Contract Found';
                if (_this.dataLength > 1) {
                    _this.foundContractTitle = 'Contracts Found';
                }
            }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__["finalize"])(function () {
                _this.isLoadingAssigned = false;
            }))
                .subscribe();
        }
        this.isLoading = this.hasSearched = true;
        this.executionService.getSectionsToBeAssignToCharter(this.searchTerm).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__["map"])(function (data) {
            _this.tempContractGridRows = data.value.map(function (section) {
                section.counterparty = (section.contractType === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_19__["ContractTypes"].Purchase ? section.sellerCode : section.buyerCode);
                return new _shared_models_assigned_section_display_view__WEBPACK_IMPORTED_MODULE_22__["AssignedSectionView"](section);
            });
            _this.dataLength = _this.tempContractGridRows.length;
            _this.addNewRowInGrid();
            _this.checkSearchedAllocatedContracts();
            _this.foundContractTitle = 'Contract Found';
            if (_this.dataLength > 1) {
                _this.foundContractTitle = 'Contracts Found';
            }
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__["finalize"])(function () {
            _this.isLoadingAssigned = false;
            // this.removeAndAddRow();
        }))
            .subscribe();
    };
    ExecutionCharterAssignmentComponent.prototype.removeAndAddRow = function () {
        var _this = this;
        var selectedRows = this.gridApiSelected.getSelectedRows();
        if (selectedRows.length === 0) {
            this.selectedContractGridRows = this.tempContractGridRows;
        }
        else if (this.selectedContractGridRows.length === 0) {
            this.selectedContractGridRows = this.tempContractGridRows;
        }
        else if (this.selectedContractGridRows.length > 0) {
            var uncheckedContract = this.selectedContractGridRows.filter(function (item) { return selectedRows.indexOf(item) < 0; });
            uncheckedContract.forEach(function (contract) {
                var eventIndex = _this.selectedContractGridRows.indexOf(contract);
                _this.selectedContractGridRows.splice(eventIndex, 1);
                _this.gridApiSelected.updateRowData({ remove: [contract] });
            });
        }
    };
    ExecutionCharterAssignmentComponent.prototype.addNewRowInGrid = function () {
        var _this = this;
        if (this.tempContractGridRows.length > 0) {
            this.tempContractGridRows.forEach(function (contract) {
                if (_this.selectedContractGridRows.filter(function (item) { return item.contractLabel === contract.contractLabel; }).length === 0) {
                    _this.selectedContractGridRows.push(contract);
                    _this.gridApiSelected.updateRowData({ add: [contract] });
                }
            });
        }
    };
    ExecutionCharterAssignmentComponent.prototype.checkAndUnCheckSelectContracts = function (contractLabel, isChecked) {
        this.gridApiSelected.forEachNode(function (node) {
            if (node.data.contractLabel === contractLabel) {
                if (node.isSelected() && !isChecked) {
                    node.setSelected(isChecked);
                }
                else if (!node.isSelected() && isChecked) {
                    node.setSelected(isChecked);
                }
            }
        });
    };
    ExecutionCharterAssignmentComponent.prototype.removeSectionFromSelectedList = function (data) {
        var eventIndex = this.assignedContractGridRows.indexOf(data);
        this.assignedContractGridRows.splice(eventIndex, 1);
        this.gridApiAssignedSection.updateRowData({ remove: [data] });
    };
    ExecutionCharterAssignmentComponent.prototype.addSectionFromAssignedList = function (data) {
        var allocatedSection;
        allocatedSection = this.selectedContractGridRowsAfterSearch.find(function (item) {
            return item.allocatedTo && item.sectionId.toString() === data.allocatedTo;
        });
        if (allocatedSection && allocatedSection.allocatedTo) {
            data.allocatedTo = allocatedSection.contractLabel;
        }
        var sectionFound = this.assignedContractGridRows.find(function (item) { return item.contractLabel === data.contractLabel; });
        if (!sectionFound) {
            this.assignedContractGridRows.push(data);
            this.gridApiAssignedSection.updateRowData({ add: [data] });
        }
    };
    ExecutionCharterAssignmentComponent.prototype.ngOnDestroy = function () {
        var _this = this;
        if (this.getAllocationWarningMessagesSubscription) {
            this.getAllocationWarningMessagesSubscription.forEach(function (subscription) { return subscription.unsubscribe(); });
        }
        this.lockService.cleanSessionLocks().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__["takeUntil"])(this.destroy$)).subscribe(function () {
            _this.destroy$.next();
            _this.destroy$.complete();
        });
    };
    ExecutionCharterAssignmentComponent.prototype.rowSelected = function (event) {
        var _this = this;
        var allocatedSection;
        var copiedSection;
        if (this.assignedContractGridRows.filter(function (item) { return item.contractLabel === event.data.contractLabel; }).length > 0 && !event.node.isSelected()) {
            copiedSection = this.assignedContractGridRows.find(function (item) { return item.contractLabel === event.data.contractLabel; });
            allocatedSection = this.assignedContractGridRows.find(function (item) { return item.contractLabel === event.data.allocatedTo; });
            copiedSection.editableAllocatedTo = true;
            this.removeSectionFromSelectedList(copiedSection);
            if (this.searchTerm && allocatedSection) {
                this.removeSectionFromSelectedList(allocatedSection);
            }
            if (allocatedSection) {
                allocatedSection.editableAllocatedTo = true;
                this.listAndSearchComponent.checkAndUnCheckSelectContracts(allocatedSection.contractLabel, false);
            }
            if (!this.unlocking.includes(event.data.sectionId)) {
                this.unlocking.push(event.data.sectionId);
                this.refeshResourceInformation();
                this.lockService.unlockContract(event.data.sectionId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_15__["LockFunctionalContext"].TradeAssignment)
                    .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__["takeUntil"])(this.destroy$)).subscribe(function () {
                    _this.unlocking = _this.unlocking.filter(function (id) { return id !== event.data.sectionId; });
                });
            }
        }
        else if (event.node.isSelected()) {
            this.lockService.isLockedContract(event.data.sectionId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__["takeUntil"])(this.destroy$)).subscribe(function (lock) {
                if (lock.isLocked) {
                    _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_9__["ConfirmationDialogComponent"], {
                        data: {
                            title: 'Lock',
                            text: lock.message,
                            okButton: 'Got it',
                        },
                    });
                    _this.gridApiSelected.deselectNode(event.node);
                    _this.locking = _this.locking.filter(function (id) { return id !== event.data.sectionId; });
                }
                else {
                    _this.lockService.lockContract(event.data.sectionId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_15__["LockFunctionalContext"].TradeAssignment)
                        .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__["takeUntil"])(_this.destroy$)).subscribe(function (lockState) {
                        copiedSection = __assign({}, event.data);
                        allocatedSection = _this.selectedContractGridRowsAfterSearch
                            .find(function (item) { return item.contractLabel === event.data.allocatedTo; });
                        if (allocatedSection) {
                            copiedSection.quantity = (event.data.quantity < allocatedSection.quantity) ?
                                event.data.quantity : allocatedSection.quantity;
                            copiedSection.originalQuantity = copiedSection.quantity;
                            copiedSection.editableAllocatedTo = false;
                            _this.listAndSearchComponent.checkAndUnCheckSelectContracts(allocatedSection.contractLabel, true);
                        }
                        else {
                            copiedSection.originalQuantity = copiedSection.quantity;
                            copiedSection.editableAllocatedTo = true;
                        }
                        _this.addSectionFromAssignedList(copiedSection);
                        if (_this.searchTerm && allocatedSection) {
                            _this.addSectionFromAssignedList(allocatedSection);
                        }
                        _this.refeshResourceInformation();
                        _this.locking = _this.locking.filter(function (id) { return id !== event.data.sectionId; });
                    });
                }
            });
        }
    };
    ExecutionCharterAssignmentComponent.prototype.refeshResourceInformation = function () {
        var _this = this;
        this.resourcesInformation = new Array();
        if (this.gridApiSelected) {
            this.gridApiSelected.forEachNode(function (node) {
                if (node.isSelected()) {
                    var resourceInformation = new _shared_entities_lock_resource_information_entity__WEBPACK_IMPORTED_MODULE_16__["LockResourceInformation"]();
                    resourceInformation.resourceType = 'Contract';
                    resourceInformation.resourceId = node.data.sectionId;
                    resourceInformation.resourceCode = node.data.contractReference;
                    _this.resourcesInformation.push(resourceInformation);
                }
            });
        }
    };
    ExecutionCharterAssignmentComponent.prototype.onAssignButtonClick = function () {
        var inValidSections = this.assignedContractGridRows
            .filter(function (section) { return section.isValid === false || section.isValidAllocatedTo === false; });
        if (inValidSections.length === 0) {
            var assignSectionList = [];
            var modifiedSections = this.assignedContractGridRows
                .filter(function (section) { return section.isTouched === true; });
            if (modifiedSections.length > 0) {
                if (modifiedSections.some(function (x) { return x.isWashout === true; })) {
                    this.isPopupRequired = true;
                    this.washoutConfirmationPopup();
                }
                else {
                    this.isWashoutRequired = false;
                    this.assignTrade();
                }
            }
            else {
                this.isWashoutRequired = false;
                this.assignTrade();
            }
        }
        else {
            this.snackbarService.throwErrorSnackBar('Form is invalid. Please resolve the errors.');
            this.isLoadingassign = false;
        }
    };
    ExecutionCharterAssignmentComponent.prototype.assignTrade = function () {
        var _this = this;
        this.isLoadingassign = true;
        this.isSave = true;
        var sectionList;
        var inValidSections = this.assignedContractGridRows
            .filter(function (section) { return section.isValid === false || section.isValidAllocatedTo === false; });
        if (inValidSections.length === 0) {
            var assignCharterPromise = [];
            var assignSectionList_1 = [];
            var modifiedSections_1 = this.assignedContractGridRows
                .filter(function (section) { return section.isTouched === true; });
            if (modifiedSections_1.length > 0) {
                modifiedSections_1.forEach(function (section) {
                    section.vessel = _this.charter.vesselCode;
                    var allocatedSection = modifiedSections_1.find(function (element) { return element.contractLabel === section.allocatedTo; });
                    if (allocatedSection) {
                        section.quantity = section.quantity < allocatedSection.quantity ? section.quantity : allocatedSection.quantity;
                        if (!assignSectionList_1.includes(allocatedSection)) {
                            assignSectionList_1.push(section);
                        }
                    }
                    else {
                        var allocationFound = _this.assignedContractGridRows
                            .find(function (element) { return element.contractLabel === section.allocatedTo; });
                        if (allocationFound) {
                            _this.assignedContractGridRows.find(function (element) { return element.contractLabel === section.allocatedTo; }).isTouched = true;
                        }
                        assignSectionList_1.push(section);
                    }
                });
                assignCharterPromise.push(this.createSplitService.createSplitOfAssignedSections(assignSectionList_1, this.charterId, this.isWashoutRequired));
            }
            sectionList = this.assignedContractGridRows.filter(function (section) {
                return !section.charterRef && !section.isTouched;
            });
            var sectionTrafficList_1 = [];
            if (sectionList.length > 0) {
                sectionList.forEach(function (element) {
                    var sectionTrafiic = new _shared_entities_section_traffic_entity__WEBPACK_IMPORTED_MODULE_17__["SectionTraffic"]();
                    sectionTrafiic.sectionId = Number(element.sectionId);
                    sectionTrafiic.blDate = (element.blDate) ?
                        (_this.useUtc) ?
                            moment__WEBPACK_IMPORTED_MODULE_5__["utc"](element.blDate).locale(_this.locale).toDate() :
                            moment__WEBPACK_IMPORTED_MODULE_5__(element.blDate).locale(_this.locale).toDate()
                        : null;
                    sectionTrafiic.blReference = element.blRef;
                    sectionTrafiic.vesselCode = _this.charter.vesselCode;
                    sectionTrafiic.portDestination = element.portDestination;
                    sectionTrafiic.portOrigin = element.portOrigin;
                    sectionTrafiic.marketSector = element.marketSector;
                    sectionTrafficList_1.push(sectionTrafiic);
                });
            }
            if (sectionList.length > 0) {
                assignCharterPromise.push(this.executionService.assignSectionsToCharter(this.charterId, sectionTrafficList_1).toPromise());
            }
            Promise.all(assignCharterPromise).then(function () {
                if (_this.createSplitService.messageOnAllocation !== '') {
                    _this.snackbarService.informationAndCopySnackBar(_this.createSplitService.messageOnAllocation + 'and Selected contract(s) has been assigned to charter' + _this.charter.charterCode, _this.createSplitService.referenceGroupNumber);
                    _this.createSplitService.messageOnAllocation = '';
                }
                else {
                    _this.snackbarService.informationAndCopySnackBar('Selected contract(s) has been assigned to charter ' + _this.charter.charterCode, _this.charter.charterCode);
                }
                _this.router.navigate(['/' + _this.company
                        + '/execution/charter/details/', _this.charterId]);
            });
        }
        else {
            this.snackbarService.throwErrorSnackBar('Form is invalid. Please resolve the errors.');
            this.isLoadingassign = false;
        }
    };
    ExecutionCharterAssignmentComponent.prototype.onRefreshButtonClick = function () {
        var _this = this;
        if (this.isRevert) {
            this.selectedContractGridColumns.forEach(function (col) {
                col.hide = !_this.defaultColumnDisplay[col.colId];
                _this.gridColumnApiSelected.setColumnVisible(col.colId, !col.hide);
                _this.gridColumnApiSelected.moveColumns([col.colId], _this.selectedContractGridColumns.length - 1);
            });
        }
    };
    ExecutionCharterAssignmentComponent.prototype.onGridReadySelected = function (params) {
        this.sectionsGridOptions.columnDefs = this.selectedContractGridColumns;
        this.gridApiSelected = this.sectionsGridOptions.api;
        this.gridColumnApiSelected = this.sectionsGridOptions.columnApi;
        this.gridService.sizeColumns(this.sectionsGridOptions);
    };
    ExecutionCharterAssignmentComponent.prototype.onGridReadyAssign = function (params) {
        var _this = this;
        this.gridApiAssignedSection = params.api;
        this.gridColumnApiAssignedSection = params.columnApi;
        window.onresize = function () {
            _this.gridColumnApiAssignedSection.autoSizeAllColumns();
        };
        this.gridApiAssignedSection.sizeColumnsToFit();
    };
    ExecutionCharterAssignmentComponent.prototype.onAddOrDeleteColumn = function (event) {
        var cols = this.selectedContractGridColumns.filter(function (col) { return col.colId === event.column.colId; });
        if (cols.length !== 1) {
            return;
        }
        cols[0].hide = !event.visible;
    };
    ExecutionCharterAssignmentComponent.prototype.deleteAssignment = function (section) {
        // Remove selected section from Assigned table
        var index = this.assignedContractGridRows.indexOf(section, 0);
        if (index > -1) {
            this.assignedContractGridRows.splice(index, 1);
        }
    };
    ExecutionCharterAssignmentComponent.prototype.showOrHideColum = function (event, col) {
        this.gridColumnApiSelected.setColumnVisible(col.colId, (col.hide || false));
        event.stopPropagation();
        return false;
    };
    ExecutionCharterAssignmentComponent.prototype.showOrHideColum1 = function (event, col) {
        this.gridColumnApiAssignedSection.setColumnVisible(col.colId, (col.hide || false));
        event.stopPropagation();
        return false;
    };
    ExecutionCharterAssignmentComponent.prototype.initFavouriteColumns = function () {
        for (var key in this.defaultColumnDisplay) {
            this.defaultColumnDisplay[key] = false;
        }
        this.initializeSelectedGridColumns();
        this.contractSearchGridPreferences = {
            showExport: false,
            company: this.company,
            gridId: this.componentId,
            gridOptions: this.sectionsGridOptions,
            sharingEnabled: this.hasGridSharing,
        };
    };
    ExecutionCharterAssignmentComponent.prototype.onCellValueChanged = function (event) {
        var columnChanged = event.colDef.field;
        if ((event.colDef) && columnChanged === this.quantityColumn) {
            var newValue = Number(event.newValue);
            var oldValue = event.data.originalQuantity;
            event.data.isTouched = newValue !== oldValue ? true : false;
            if (!event.data.quantityStyleChangeForQuantity) {
                var contractLabel_1 = event.data.contractLabel.toUpperCase();
                var allocatedContract = this.assignedContractGridRows.find(function (row) {
                    return row.allocatedTo === contractLabel_1;
                });
                if (allocatedContract) {
                    if (Number(event.data.quantity) < Number(allocatedContract.originalQuantity)) {
                        allocatedContract.quantity = event.data.quantity;
                        allocatedContract.highLightRow = true;
                        event.data.highLightRow = false;
                    }
                    else {
                        event.data.quantity = allocatedContract.quantity;
                        event.data.highLightRow = false;
                    }
                    this.gridApiAssignedSection.updateRowData({ update: [allocatedContract] });
                    this.gridApiAssignedSection.updateRowData({ update: [event.data] });
                }
            }
            else {
                event.data.highLightRow = false;
            }
        }
        if (columnChanged === 'allocatedTo') {
            var allocatedToNewValue_1 = event.newValue;
            var allocatedToOldValue_1 = event.oldValue;
            if (!event.data.quantityStyleChangeForAllocatedTo) {
                if (allocatedToNewValue_1) {
                    var allocatedContract = this.assignedContractGridRows.find(function (row) {
                        return row.contractLabel.toUpperCase() === allocatedToNewValue_1.toUpperCase();
                    });
                    if (allocatedContract) {
                        if (!allocatedContract.automatedChanged) {
                            if (Number(event.data.quantity) < Number(allocatedContract.originalQuantity)) {
                                allocatedContract.quantity = event.data.quantity;
                                allocatedContract.highLightRow = true;
                            }
                            else if (Number(event.data.quantity) > Number(allocatedContract.originalQuantity)) {
                                event.data.quantity = allocatedContract.quantity;
                                event.data.highLightRow = true;
                            }
                            allocatedContract.allocatedTo = event.data.contractLabel;
                            allocatedContract.allocatedSectionId = event.data.sectionId;
                            event.data.allocatedSectionId = allocatedContract.sectionId;
                            event.data.automatedChanged = true;
                            event.data.isTouched = true;
                            allocatedContract.isTouched = true;
                            if (event.data.currency === allocatedContract.currency && event.data.counterparty === allocatedContract.counterparty) {
                                allocatedContract.isWashout = true;
                                event.data.isWashout = true;
                            }
                            this.gridApiAssignedSection.updateRowData({ update: [allocatedContract] });
                        }
                        allocatedContract.automatedChanged = false;
                    }
                }
                else {
                    var allocatedContract = this.assignedContractGridRows.find(function (row) {
                        return row.contractLabel && allocatedToOldValue_1 && row.contractLabel.toUpperCase() === allocatedToOldValue_1.toUpperCase();
                    });
                    if (allocatedContract) {
                        if (!allocatedContract.automatedChanged) {
                            allocatedContract.allocatedTo = '';
                            allocatedContract.quantity = allocatedContract.originalQuantity;
                            event.data.quantity = event.data.originalQuantity;
                            allocatedContract.highLightRow = false;
                            event.data.highLightRow = false;
                            event.data.automatedChanged = true;
                            event.data.isTouched = false;
                            allocatedContract.isTouched = false;
                            this.gridApiAssignedSection.updateRowData({ update: [allocatedContract] });
                        }
                        allocatedContract.automatedChanged = false;
                    }
                }
            }
        }
    };
    ExecutionCharterAssignmentComponent.prototype.initializeSelectedGridColumns = function () {
        this.selectedContractGridColumns = [
            {
                headerName: 'Contract reference',
                colId: 'contractLabel',
                field: 'contractLabel',
                headerCheckboxSelection: true,
                checkboxSelection: true,
            },
            {
                headerName: 'Commodity part 1',
                colId: 'commodityId',
                field: 'commodityId',
                valueFormatter: this.commodityPart1Formatter.bind(this),
            },
            {
                headerName: 'Commodity part 2',
                colId: 'commodityOrigin',
                field: 'commodityId',
                valueFormatter: this.commodityPart2Formatter.bind(this),
            },
            {
                headerName: 'Commodity part 3',
                colId: 'commodityGrade',
                field: 'commodityId',
                valueFormatter: this.commodityPart3Formatter.bind(this),
            },
            {
                headerName: 'Quantity',
                colId: 'quantity',
                field: 'quantity',
                type: 'numericColumn',
                valueFormatter: this.formatValue.bind(this),
            },
            {
                headerName: 'Weight code',
                colId: 'weightUnitId',
                field: 'weightUnitId',
                valueFormatter: this.weightCodeDescriptionFormatter.bind(this),
            },
            {
                headerName: 'Shipment period',
                colId: 'shipmentPeriod',
                field: 'shipmentPeriod',
            },
            {
                headerName: 'Dept',
                colId: 'departmentId',
                field: 'departmentId',
                valueFormatter: this.departmentDescriptionFormatter.bind(this),
            },
            {
                headerName: 'Counterparty',
                colId: 'counterparty',
                field: 'counterparty',
            },
            {
                headerName: 'Allocated contract',
                colId: 'allocatedTo',
                field: 'allocatedTo',
                valueFormatter: this.allocatedContractFormatter.bind(this),
            },
            {
                headerName: 'Approval Status',
                colId: 'contractStatusCode',
                field: 'contractStatusCode',
                valueFormatter: this.contractStatusFormatter.bind(this),
            },
        ];
        this.rowStyle = { 'border-bottom': '1px solid #e0e0e0 !important' };
    };
    ExecutionCharterAssignmentComponent.prototype.commodityPart1Formatter = function (params) {
        if (params.value) {
            var commodity = params.context.masterdata.commodities.find(function (x) { return x.commodityId === Number(params.value); });
            return commodity ? commodity.commodityCode : '';
        }
        else {
            return '';
        }
    };
    ExecutionCharterAssignmentComponent.prototype.commodityPart2Formatter = function (params) {
        if (params.value) {
            var commodity = params.context.masterdata.commodities.find(function (x) { return x.commodityId === Number(params.value); });
            return commodity ? commodity.commodityOrigin : '';
        }
        else {
            return '';
        }
    };
    ExecutionCharterAssignmentComponent.prototype.commodityPart3Formatter = function (params) {
        if (params.value) {
            var commodity = params.context.masterdata.commodities.find(function (x) { return x.commodityId === Number(params.value); });
            return commodity ? commodity.commodityGrade : '';
        }
        else {
            return '';
        }
    };
    ExecutionCharterAssignmentComponent.prototype.departmentDescriptionFormatter = function (params) {
        if (params.value) {
            var department = params.context.masterdata.departments.find(function (x) { return x.departmentId === Number(params.value); });
            return department ? department.description : '';
        }
        else if (params.data.departmentDescription) {
            return params.data.departmentDescription;
        }
        else {
            return '';
        }
    };
    ExecutionCharterAssignmentComponent.prototype.weightCodeDescriptionFormatter = function (params) {
        if (params.value) {
            var weightUnits = params.context.masterdata.weightUnits.find(function (x) { return x.weightUnitId === Number(params.value); });
            return weightUnits ? weightUnits.weightCode : '';
        }
        else if (params.data.weightCode) {
            return params.data.weightCode;
        }
        else {
            return '';
        }
    };
    ExecutionCharterAssignmentComponent.prototype.contractTypeFormatter = function (params) {
        return (Number(params.value) === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_19__["ContractTypes"].Purchase ? 'Purchase' : 'Sales');
    };
    ExecutionCharterAssignmentComponent.prototype.contractStatusFormatter = function (params) {
        return _shared_enums_contract_status_enum__WEBPACK_IMPORTED_MODULE_18__["ContractStatus"][params.value].toString();
    };
    ExecutionCharterAssignmentComponent.prototype.allocatedContractFormatter = function (params) {
        if (params.value) {
            var allocatedSection = void 0;
            if (this.selectedContractGridRowsAfterSearch) {
                allocatedSection = this.selectedContractGridRowsAfterSearch.find(function (item) {
                    return item.allocatedTo && item.sectionId.toString() === params.value;
                });
                if (allocatedSection) {
                    return allocatedSection.contractLabel;
                }
            }
        }
        else {
            return '';
        }
    };
    ExecutionCharterAssignmentComponent.prototype.validateAllocatedTo = function (params) {
        var _this = this;
        var toolTipMessage = '';
        params.data.quantityStyleChangeForAllocatedTo = false;
        params.data.isValidAllocatedTo = true;
        if (params.value) {
            var allocatedContract = this.assignedContractGridRows.find(function (row) {
                return row.contractLabel && params.value.toUpperCase() === row.contractLabel.toUpperCase();
            });
            params.data.isValidAllocatedTo = false;
            if (allocatedContract) {
                // Check both contract should different
                if ((params.data.contractType === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_19__["ContractTypes"].Purchase && allocatedContract.contractType === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_19__["ContractTypes"].Sale) ||
                    (params.data.contractType === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_19__["ContractTypes"].Sale && allocatedContract.contractType === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_19__["ContractTypes"].Purchase)) {
                    var filterSection = this.assignedContractGridRows.filter(function (row) {
                        return row.allocatedTo && params.value.toUpperCase() === row.allocatedTo.toUpperCase();
                    });
                    // Check if there is already assigned Contract in bottom list
                    if (filterSection.length < 2) {
                        // Check if Department is same of both contract
                        if (allocatedContract.departmentId === params.data.departmentId) {
                            // Check for allocation Message
                            this.getAllocationWarningMessagesSubscription.
                                push(this.executionService.getWarningMessages(params.data.sectionId, allocatedContract.sectionId)
                                .subscribe(function (data) {
                                _this.allocationMessage = Object(_shared_validators_warning_messages_validator_validator__WEBPACK_IMPORTED_MODULE_36__["GetWarningMessages"])(data.value, _this.allocationSetUpData);
                                params.data.isValidAllocatedTo = true;
                                toolTipMessage = null;
                                if (_this.allocationMessage.length > 0) {
                                    _this.allocationMessage.forEach(function (element) {
                                        if (element.errorTypeId === _shared_enums_warning_message_type_enum__WEBPACK_IMPORTED_MODULE_21__["WarningMessageTypes"].Restricted) {
                                            toolTipMessage = 'Contracts cannot be allocated because the fields '
                                                + _this.allocationMessage.forEach(function (item) { return item.message; })
                                                + ' are not matching';
                                            params.data.quantityStyleChangeForAllocatedTo = true;
                                            params.data.isValidAllocatedTo = false;
                                        }
                                    });
                                }
                            }));
                        }
                        else {
                            toolTipMessage = 'To allocate contracts from different departments please use trade group allocation';
                            params.data.quantityStyleChangeForAllocatedTo = true;
                        }
                    }
                    else {
                        toolTipMessage = 'This contract reference is already used in allocated contract column';
                        params.data.quantityStyleChangeForAllocatedTo = true;
                    }
                }
                else {
                    toolTipMessage = 'This contract reference does not correspond to the correct contract type';
                    params.data.quantityStyleChangeForAllocatedTo = true;
                }
            }
            else {
                toolTipMessage = 'Only selected contracts can be allocated together';
                params.data.quantityStyleChangeForAllocatedTo = true;
            }
        }
        return toolTipMessage;
    };
    ExecutionCharterAssignmentComponent.prototype.initializeAssignmentGridColumns = function () {
        var _this = this;
        this.assignedContractGridColumns = [
            {
                headerName: 'Contract Type',
                colId: 'contractType',
                field: 'contractType',
                hide: true,
                suppressToolPanel: true,
                valueFormatter: this.contractTypeFormatter,
            },
            {
                headerName: 'Contract reference',
                checkboxSelection: true,
                field: 'contractLabel',
                suppressToolPanel: true,
            },
            {
                headerName: 'Quantity',
                colId: 'quantity',
                field: 'quantity',
                editable: true,
                suppressToolPanel: true,
                type: 'numericColumn',
                valueFormatter: this.formatValue.bind(this),
                cellClassRules: {
                    'ag-grid-invalid-mandatory-field': (function (params) { return params.data.quantityStyleChangeForQuantity; }),
                    'ag-grid-valid-mandatory-field': (function (params) { return !params.data.quantityStyleChangeForQuantity; }),
                    'ag-grid-bold-quantity-field': (function (params) { return params.data.highLightRow; }),
                },
                tooltip: function (params) {
                    return _this.validateQuantity(params);
                },
            },
            {
                headerName: 'Weight code',
                colId: 'weightUnitId',
                field: 'weightUnitId',
                suppressToolPanel: true,
                valueFormatter: this.weightCodeDescriptionFormatter,
            },
            {
                headerName: 'Dept',
                colId: 'departmentId',
                suppressToolPanel: true,
                field: 'departmentId',
                valueFormatter: this.departmentDescriptionFormatter,
            },
            {
                headerName: 'Allocated contract',
                colId: 'allocatedTo',
                field: 'allocatedTo',
                tooltip: this.validateAllocatedTo.bind(this),
                editable: this.checkEditableForAllocatedContract.bind(this),
                valueFormatter: this.allocatedContractFormatter.bind(this),
                cellClassRules: {
                    'ag-grid-invalid-mandatory-field': (function (params) { return params.data.quantityStyleChangeForAllocatedTo; }),
                    'ag-grid-valid-mandatory-field': (function (params) { return !params.data.quantityStyleChangeForAllocatedTo; }),
                },
            },
            {
                headerName: 'Approval Status',
                colId: 'contractStatusCode',
                field: 'contractStatusCode',
                suppressToolPanel: true,
                valueFormatter: this.contractStatusFormatter,
            },
            {
                headerName: '',
                field: 'contractLabel',
                suppressToolPanel: true,
                cellRendererFramework: _shared_components_ag_grid_copy_icon_ag_grid_copy_icon_component__WEBPACK_IMPORTED_MODULE_8__["AgGridCopyIconComponent"],
            },
        ];
    };
    ExecutionCharterAssignmentComponent.prototype.formatValue = function (param) {
        if (isNaN(param.value) || param.value === null) {
            return '';
        }
        return new Intl.NumberFormat(this.formatType, { minimumFractionDigits: 3, maximumFractionDigits: 3 }).format(param.value);
    };
    ExecutionCharterAssignmentComponent.prototype.validateQuantity = function (params) {
        params.data.quantityStyleChangeForQuantity = false;
        if (params.data.allocatedTo) {
            var allocatedSection = void 0;
            var smallestQuantity = void 0;
            allocatedSection = this.assignedContractGridRows.find(function (item) { return item.contractLabel === params.data.allocatedTo; });
            if (allocatedSection && allocatedSection.isTouched) {
                smallestQuantity = (params.data.quantity > allocatedSection.originalQuantity) ?
                    allocatedSection.originalQuantity : params.data.quantity;
                if (Number(params.value) <= 0 || params.value > smallestQuantity) {
                    params.data.quantityStyleChangeForQuantity = true;
                    params.data.isValid = false;
                    this.tooltipMessageOnQuantity = 'Quantity should be greater than zero and less than or equal to ' + smallestQuantity;
                }
                else {
                    params.data.isValid = true;
                }
            }
        }
        else {
            this.tooltipMessageOnQuantity = null;
            params.data.quantityStyleChangeForQuantity = false;
            if ((Number(params.value) === 0 ||
                Number(params.value) < 0) && !params.data.charterRef) {
                this.tooltipMessageOnQuantity = 'Quantity can not be zero';
                params.data.quantityStyleChangeForQuantity = true;
                params.data.isValid = false;
            }
            else if (params.data.originalQuantity < Number(params.value)) {
                params.data.quantityStyleChangeForQuantity = true;
                params.data.isValid = false;
                this.tooltipMessageOnQuantity = 'Quantity can not be greater than the original quantity';
            }
            else {
                params.data.isValid = true;
            }
        }
        return this.tooltipMessageOnQuantity;
    };
    ExecutionCharterAssignmentComponent.prototype.checkEditableForAllocatedContract = function (params) {
        var rowData = params.data;
        return rowData.editableAllocatedTo;
    };
    ExecutionCharterAssignmentComponent.prototype.onDiscardButtonClicked = function () {
        var _this = this;
        this.isSave = true;
        var confirmDiscardDialog = this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_9__["ConfirmationDialogComponent"], {
            data: {
                title: 'Discard Changes',
                text: 'You have some modification pending. Close and lose changes?',
                okButton: 'Ok',
                cancelButton: 'Cancel',
            },
        });
        confirmDiscardDialog.afterClosed().subscribe(function (answer) {
            if (answer) {
                _this.router.navigate(['/' + _this.company
                        + '/execution/charter/details/', _this.charterId]);
            }
        });
    };
    ExecutionCharterAssignmentComponent.prototype.checkSearchedAllocatedContracts = function () {
        var _this = this;
        this.gridApiSelected.forEachNode(function (node) {
            if (node.data && node.data.contractLabel && _this.assignedContractGridRows) {
                var contractLabel_2 = node.data.contractLabel;
                var contractFound = _this.assignedContractGridRows.find(function (contract) { return contract.contractLabel === contractLabel_2; });
                if (contractFound) {
                    node.setSelected(true);
                }
            }
        });
    };
    ExecutionCharterAssignmentComponent.prototype.washoutConfirmationPopup = function () {
        var _this = this;
        if (this.isPopupRequired) {
            var confirmDiscardDialog = this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_9__["ConfirmationDialogComponent"], {
                data: {
                    title: 'Washout Contract',
                    text: 'Do you want contract(s) to mark as washout?',
                    okButton: 'Yes',
                    cancelButton: 'No',
                },
            });
            confirmDiscardDialog.afterClosed().subscribe(function (answer) {
                if (answer) {
                    _this.isWashoutRequired = true;
                    _this.assignTrade();
                }
                else {
                    _this.isWashoutRequired = false;
                    _this.assignTrade();
                }
            });
        }
        else {
            return this.isWashoutRequired;
        }
    };
    // this method will fetch allocationsetupdata for a company
    ExecutionCharterAssignmentComponent.prototype.getAllocationSetUpData = function (company) {
        var _this = this;
        this.configurationService.getAllocationSetUpByCompany(company)
            .subscribe(function (data) {
            if (data && data.length > 0) {
                _this.allocationSetUpData = data;
            }
        });
    };
    ExecutionCharterAssignmentComponent.prototype.onQuickSearchButtonClicked = function () {
        this.additionalFilters = [];
        var searchCounterParty;
        if (this.counterPartyCtrl.value) {
            searchCounterParty = this.counterPartyCtrl.value.counterpartyCode;
            if (!searchCounterParty) {
                searchCounterParty = this.counterPartyCtrl.value;
            }
        }
        var contractLabelField = this.listAndSearchComponent.columnConfiguration
            .find(function (column) { return column.fieldName === 'ContractLabel'; });
        var counterpartyCodeField = this.listAndSearchComponent.columnConfiguration
            .find(function (column) { return column.fieldName === 'Counterparty'; });
        var commodityField = this.listAndSearchComponent.columnConfiguration
            .find(function (column) { return column.fieldName === 'PrincipalCommodity'; });
        if (!this.listAndSearchComponent) {
            return;
        }
        else {
            if (this.searchContractReferenceCtrl.value && contractLabelField) {
                var filter = new _shared_entities_list_and_search_list_and_search_filter_entity__WEBPACK_IMPORTED_MODULE_14__["ListAndSearchFilter"]();
                filter.fieldId = contractLabelField.fieldId;
                filter.fieldName = contractLabelField.fieldName;
                filter.predicate = {
                    filterType: _shared_enums_list_and_search_filter_type_enum__WEBPACK_IMPORTED_MODULE_20__["ListAndSearchFilterType"].Text,
                    operator: 'eq',
                    value1: this.searchContractReferenceCtrl.value + '%',
                };
                filter.isActive = true;
                this.additionalFilters.push(filter);
            }
            if (this.counterPartyCtrl.value && counterpartyCodeField) {
                var filterCounterParty = new _shared_entities_list_and_search_list_and_search_filter_entity__WEBPACK_IMPORTED_MODULE_14__["ListAndSearchFilter"]();
                filterCounterParty.fieldId = counterpartyCodeField.fieldId;
                filterCounterParty.fieldName = counterpartyCodeField.fieldName;
                filterCounterParty.predicate = {
                    filterType: _shared_enums_list_and_search_filter_type_enum__WEBPACK_IMPORTED_MODULE_20__["ListAndSearchFilterType"].Text,
                    operator: 'eq',
                    value1: searchCounterParty + '%',
                };
                filterCounterParty.isActive = true;
                this.additionalFilters.push(filterCounterParty);
            }
            if (this.commodity1Ctrl.value && commodityField) {
                var filterCommodity = new _shared_entities_list_and_search_list_and_search_filter_entity__WEBPACK_IMPORTED_MODULE_14__["ListAndSearchFilter"]();
                filterCommodity.fieldId = commodityField.fieldId;
                filterCommodity.fieldName = commodityField.fieldName;
                filterCommodity.predicate = {
                    filterType: _shared_enums_list_and_search_filter_type_enum__WEBPACK_IMPORTED_MODULE_20__["ListAndSearchFilterType"].Text,
                    operator: 'eq',
                    value1: this.commodity1Ctrl.value + '%',
                };
                filterCommodity.isActive = true;
                this.additionalFilters.push(filterCommodity);
            }
        }
        this.listAndSearchComponent.additionalFilters = this.additionalFilters;
        this.listAndSearchComponent.loadData(true);
    };
    // For FAB
    ExecutionCharterAssignmentComponent.prototype.initFABActions = function () {
        this.fabTitle = 'Assignment FAB mini';
        this.fabType = _shared_components_floating_action_button_floating_action_button_type_enum__WEBPACK_IMPORTED_MODULE_10__["FABType"].MiniFAB;
        var actionItemSave = {
            icon: 'check_circle',
            text: 'Assign',
            action: 'assign',
            disabled: false,
            index: 0,
        };
        var actionItemCancel = {
            icon: 'keyboard_backspace',
            text: 'Discard',
            action: 'discard',
            disabled: false,
            index: 1,
        };
        this.fabMenuActions.push(actionItemSave);
        this.fabMenuActions.push(actionItemCancel);
    };
    ExecutionCharterAssignmentComponent.prototype.onFabActionClicked = function (action) {
        switch (action) {
            case 'assign': {
                this.onAssignButtonClick();
                break;
            }
            case 'discard': {
                this.onDiscardButtonClicked();
                break;
            }
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('listAndSearchComponent'),
        __metadata("design:type", _shared_components_list_and_search_list_and_search_component__WEBPACK_IMPORTED_MODULE_11__["ListAndSearchComponent"])
    ], ExecutionCharterAssignmentComponent.prototype, "listAndSearchComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"])('window:beforeunload', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], ExecutionCharterAssignmentComponent.prototype, "unloadNotification", null);
    ExecutionCharterAssignmentComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-execution-charter-assignment',
            template: __webpack_require__(/*! ./execution-charter-assignment.component.html */ "./Client/app/execution/execution-charter/execution-charter-assignment/execution-charter-assignment.component.html"),
            styles: [__webpack_require__(/*! ./execution-charter-assignment.component.scss */ "./Client/app/execution/execution-charter/execution-charter-assignment/execution-charter-assignment.component.scss")],
            providers: [_shared_services_list_and_search_charter_assignmentSections_data_loader__WEBPACK_IMPORTED_MODULE_29__["CharterAssignmentSectionsDataLoader"], _shared_services_masterdata_counterparty_data_loader__WEBPACK_IMPORTED_MODULE_30__["CounterPartyDataLoader"]],
        }),
        __param(0, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Optional"])()), __param(0, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_angular_material__WEBPACK_IMPORTED_MODULE_2__["MAT_DATE_LOCALE"])),
        __param(1, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Optional"])()), __param(1, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_angular_material_moment_adapter__WEBPACK_IMPORTED_MODULE_3__["MAT_MOMENT_DATE_ADAPTER_OPTIONS"])),
        __metadata("design:paramtypes", [String, Object, _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_26__["ExecutionService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_4__["ActivatedRoute"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_user_identity_service__WEBPACK_IMPORTED_MODULE_28__["UserIdentityService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_32__["SnackbarService"],
            _shared_services_split_create_and_allocate_service__WEBPACK_IMPORTED_MODULE_33__["SplitCreateAndAllocateService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_4__["Router"],
            _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_27__["LockService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"],
            _shared_services_title_service__WEBPACK_IMPORTED_MODULE_34__["TitleService"],
            _shared_services_security_service__WEBPACK_IMPORTED_MODULE_31__["SecurityService"],
            _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_24__["GridConfigurationProviderService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_23__["AgGridService"],
            _shared_services_http_services_configuration_service__WEBPACK_IMPORTED_MODULE_25__["ConfigurationService"],
            _shared_services_list_and_search_charter_assignmentSections_data_loader__WEBPACK_IMPORTED_MODULE_29__["CharterAssignmentSectionsDataLoader"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_35__["UtilService"],
            _shared_services_masterdata_counterparty_data_loader__WEBPACK_IMPORTED_MODULE_30__["CounterPartyDataLoader"]])
    ], ExecutionCharterAssignmentComponent);
    return ExecutionCharterAssignmentComponent;
}());



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/additional-information-form-component/additional-information-form-component.component.html":
/*!**************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/additional-information-form-component/additional-information-form-component.component.html ***!
  \**************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-header>\r\n        <mat-card-title>\r\n            <h2>Additional Information</h2>\r\n        </mat-card-title>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <atlas-masterdata-user-preferences-input class=\"contextual-search-for-control\"\r\n                                                     isEditable=\"true\"\r\n                                                     [fieldControl]=\"charterDeptCntrl\"\r\n                                                     [options]=\"filteredDepartments\"\r\n                                                     label=\"Department\"\r\n                                                     displayProperty=\"departmentCode\"\r\n                                                     [errorMap]=\"departmentErrorMap\"\r\n                                                     [selectProperties]=\"['departmentCode','description']\"\r\n                                                     lightBoxTitle=\"Results for Department\"\r\n                                                     gridId=\"departmentsGrid\">\r\n            </atlas-masterdata-user-preferences-input>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <atlas-masterdata-user-preferences-input class=\"contextual-search-for-control\"\r\n                                                     isEditable=\"true\"\r\n                                                     [fieldControl]=\"charterQuantityCntrl\"\r\n                                                     [options]=\"filteredQuantities\"\r\n                                                     label=\"Quantity for Reporting\"\r\n                                                     displayProperty=\"weightCode\"\r\n                                                     [selectProperties]=\"['weightCode','description']\"\r\n                                                     lightBoxTitle=\"Results for Quantity\"\r\n                                                     gridId=\"weightUnitsGrid\">\r\n            </atlas-masterdata-user-preferences-input>\r\n\r\n            <atlas-masterdata-user-preferences-input class=\"contextual-search-for-control\"\r\n                                                     isEditable=\"true\"\r\n                                                     [fieldControl]=\"charterCurrencyCntrl\"\r\n                                                     [options]=\"filteredCurrencies\"\r\n                                                     label=\"Currency for Reporting\"\r\n                                                     displayProperty=\"currencyCode\"\r\n                                                     [selectProperties]=\"['currencyCode','description']\"\r\n                                                     lightBoxTitle=\"Results for Currency\"\r\n                                                     gridId=\"currenciesGrid\">\r\n            </atlas-masterdata-user-preferences-input>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/additional-information-form-component/additional-information-form-component.component.scss":
/*!**************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/additional-information-form-component/additional-information-form-component.component.scss ***!
  \**************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".contextual-search-for-control {\n  width: 40%; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/additional-information-form-component/additional-information-form-component.component.ts":
/*!************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/additional-information-form-component/additional-information-form-component.component.ts ***!
  \************************************************************************************************************************************************************************************/
/*! exports provided: AdditionalInformationFormComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AdditionalInformationFormComponent", function() { return AdditionalInformationFormComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/directives/autocomplete-dropdown.directive */ "./Client/app/shared/directives/autocomplete-dropdown.directive.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var AdditionalInformationFormComponent = /** @class */ (function (_super) {
    __extends(AdditionalInformationFormComponent, _super);
    function AdditionalInformationFormComponent(formbuilder, utilService, route, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formbuilder = formbuilder;
        _this.utilService = utilService;
        _this.route = route;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.isCreateOrEdit = true;
        _this.charterDeptCntrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__["AtlasFormControl"]('charterDeptCntrl');
        _this.charterQuantityCntrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__["AtlasFormControl"]('charterQuantityCntrl');
        _this.charterCurrencyCntrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__["AtlasFormControl"]('charterCurrencyCntrl');
        _this.isFormControlRequired = new Map();
        _this.defaultQuantity = 'MT';
        _this.defaultCurrency = 'USD';
        _this.departmentErrorMap = new Map()
            .set('required', 'Required *')
            .set('inDropdownList', 'Invalid entry. Department not in the list or not authorized.');
        return _this;
    }
    AdditionalInformationFormComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.masterdata = this.route.snapshot.data.masterdata;
        this.filteredCurrencies = this.masterdata.currencies;
        this.charterCurrencyCntrl.valueChanges.subscribe(function (input) {
            _this.filteredCurrencies =
                _this.utilService.filterListforAutocomplete(input, _this.masterdata.currencies, ['currencyCode', 'description']);
        });
        this.filteredDepartments = this.masterdata.departments;
        this.charterDeptCntrl.valueChanges.subscribe(function (input) {
            _this.filteredDepartments =
                _this.utilService.filterListforAutocomplete(input, _this.masterdata.departments, ['departmentCode', 'description']);
        });
        this.filteredQuantities = this.masterdata.weightUnits;
        this.charterQuantityCntrl.valueChanges.subscribe(function (input) {
            _this.filteredQuantities =
                _this.utilService.filterListforAutocomplete(input, _this.masterdata.weightUnits, ['weightCode', 'description']);
        });
        if (!this.currencyCodeControl) {
            this.defaultCurrencyCntrl = this.masterdata.currencies.find(function (currency) {
                return currency.currencyCode === _this.defaultCurrency;
            });
            this.charterCurrencyCntrl.patchValue(this.defaultCurrencyCntrl);
        }
        if (!this.quantityControl) {
            this.defaultQuantityCntrl = this.masterdata.weightUnits.find(function (weight) {
                return weight.weightCode === _this.defaultQuantity;
            });
            this.charterQuantityCntrl.patchValue(this.defaultQuantityCntrl);
        }
        if (this.isCreateOrEdit) {
            this.enableControl();
            this.setValidators();
        }
        else {
            this.disbaleControl();
        }
    };
    AdditionalInformationFormComponent.prototype.disbaleControl = function () {
        this.charterDeptCntrl.disable();
        this.charterCurrencyCntrl.disable();
        this.charterQuantityCntrl.disable();
    };
    AdditionalInformationFormComponent.prototype.enableControl = function () {
        this.charterDeptCntrl.enable();
        this.charterCurrencyCntrl.enable();
        this.charterQuantityCntrl.enable();
    };
    AdditionalInformationFormComponent.prototype.clearValueOfControl = function () {
        this.charterDeptCntrl.patchValue('');
        this.charterQuantityCntrl.patchValue('');
        this.charterCurrencyCntrl.patchValue('');
    };
    AdditionalInformationFormComponent.prototype.initForm = function (entity, isEdit) {
        if (isEdit === void 0) { isEdit = false; }
        this.assignValues(entity, isEdit);
        this.charterCurrencyCntrl.patchValue(this.currencyCodeControl);
        this.charterQuantityCntrl.patchValue(this.quantityControl);
        this.charterDeptCntrl.patchValue(this.departmentControl);
    };
    AdditionalInformationFormComponent.prototype.assignValues = function (entity, isEdit) {
        if (isEdit === void 0) { isEdit = false; }
        var charter = entity;
        this.currencyCodeControl = this.masterdata.currencies.find(function (currenctCode) { return currenctCode.currencyCode === charter.currency; });
        this.departmentControl = this.masterdata.departments.find(function (department) { return department.departmentId === charter.departmentId; });
        this.quantityControl = this.masterdata.weightUnits.find(function (quantity) { return quantity.weightUnitId === charter.weightUnitId; });
    };
    AdditionalInformationFormComponent.prototype.setValidators = function () {
        this.charterDeptCntrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
            Object(_shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_4__["inDropdownListValidator"])(this.masterdata.departments, Object(_shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__["nameof"])('departmentCode')),
        ]));
        this.charterCurrencyCntrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
            Object(_shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_4__["inDropdownListValidator"])(this.masterdata.currencies, Object(_shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__["nameof"])('currencyCode')),
        ]));
        this.charterCurrencyCntrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]));
        this.charterQuantityCntrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
            Object(_shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_4__["inDropdownListValidator"])(this.masterdata.weightUnits, Object(_shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__["nameof"])('weightCode')),
        ]));
        this.charterQuantityCntrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]));
        this.isFormControlRequired['charterCurrencyCntrl'] = this.utilService.isRequired(this.charterCurrencyCntrl);
        this.isFormControlRequired['charterQuantityCntrl'] = this.utilService.isRequired(this.charterQuantityCntrl);
        this.formGroup.updateValueAndValidity();
    };
    AdditionalInformationFormComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formbuilder.group({
            charterDeptCntrl: this.charterDeptCntrl,
            charterQuantityCntrl: this.charterQuantityCntrl,
            charterCurrencyCntrl: this.charterCurrencyCntrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    AdditionalInformationFormComponent.prototype.findDepartmentByCode = function (departmentCode) {
        return this.masterdata.departments.find(function (x) { return x.departmentCode === departmentCode; });
    };
    AdditionalInformationFormComponent.prototype.findWeightByCode = function (weightCode) {
        return this.masterdata.weightUnits.find(function (x) { return x.weightCode === weightCode; });
    };
    AdditionalInformationFormComponent.prototype.populateEntity = function (entity) {
        var section = entity;
        var currency = this.charterCurrencyCntrl.value;
        section.currency = currency ? currency.currencyCode : '';
        if (this.charterQuantityCntrl.value && this.charterQuantityCntrl.value !== '') {
            var weightCode = this.findWeightByCode(this.charterQuantityCntrl.value.weightCode);
            section.weightUnitId = weightCode ? weightCode.weightUnitId : null;
        }
        if (this.charterDeptCntrl.value && this.charterDeptCntrl.value !== '') {
            var department = this.findDepartmentByCode(this.charterDeptCntrl.value.departmentCode);
            section.departmentId = department ? department.departmentId : null;
        }
        return section;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Boolean)
    ], AdditionalInformationFormComponent.prototype, "isCreateOrEdit", void 0);
    AdditionalInformationFormComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-additional-information-form-component',
            template: __webpack_require__(/*! ./additional-information-form-component.component.html */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/additional-information-form-component/additional-information-form-component.component.html"),
            styles: [__webpack_require__(/*! ./additional-information-form-component.component.scss */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/additional-information-form-component/additional-information-form-component.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__["UtilService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__["FormConfigurationProviderService"]])
    ], AdditionalInformationFormComponent);
    return AdditionalInformationFormComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/assign-section-dialog/assign-section-dialog.component.html":
/*!******************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/assign-section-dialog/assign-section-dialog.component.html ***!
  \******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"section-light-box\">\r\n    <h1 mat-dialog-title>Edit Assigned Sections</h1>\r\n    <div mat-dialog-content>\r\n        <div ag-grid=\"sectionsGridOptions\"\r\n             class=\"ag-theme-material pointer-cursor\">\r\n            <ag-grid-angular class=\"ag-theme-material atr-grid\"\r\n                             [rowData]=\"model.assignedSections\"\r\n                             [columnDefs]=\"sectionGridCols\"\r\n                             [enableColResize]=\"true\"\r\n                             [pagination]=\"true\"\r\n                             [paginationPageSize]=\"10\"\r\n                             [frameworkComponents]=\"gridComponents\"\r\n                             rowMultiSelectWithClick=\"true\"\r\n                             [enableSorting]=\"true\"\r\n                             [singleClickEdit]=true\r\n                             domLayout=\"autoHeight\"\r\n                             (gridReady)=\"onGridReady($event)\"\r\n                             enableFilter\r\n                             [rowHeight]=\"atlasAgGridParam.rowHeight\">\r\n            </ag-grid-angular>\r\n        </div>\r\n    </div>\r\n    <div mat-dialog-actions>\r\n        <span class=\"fill-space\"></span>\r\n        <button mat-button\r\n                (click)=\"onCancelButtonClick()\">Cancel</button>\r\n        <button mat-raised-button\r\n                (click)=\"onEditButtonClick()\">Edit</button>\r\n    </div>\r\n</div>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/assign-section-dialog/assign-section-dialog.component.scss":
/*!******************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/assign-section-dialog/assign-section-dialog.component.scss ***!
  \******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "::ng-deep.ag-layout-auto-height.ag-body-container {\n  min-height: 300px !important; }\n\n.section-light-box {\n  width: 1200px;\n  height: 700px; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/assign-section-dialog/assign-section-dialog.component.ts":
/*!****************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/assign-section-dialog/assign-section-dialog.component.ts ***!
  \****************************************************************************************************************************************************/
/*! exports provided: AssignSectionDialogComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AssignSectionDialogComponent", function() { return AssignSectionDialogComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_ag_grid_autocomplete_ag_grid_autocomplete_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/components/ag-grid/autocomplete/ag-grid-autocomplete.component */ "./Client/app/shared/components/ag-grid/autocomplete/ag-grid-autocomplete.component.ts");
/* harmony import */ var _shared_components_cell_editor_date_picker_cell_editor_date_picker_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/components/cell-editor-date-picker/cell-editor-date-picker.component */ "./Client/app/shared/components/cell-editor-date-picker/cell-editor-date-picker.component.ts");
/* harmony import */ var _shared_components_cell_editor_select_cell_editor_select_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/components/cell-editor-select/cell-editor-select.component */ "./Client/app/shared/components/cell-editor-select/cell-editor-select.component.ts");
/* harmony import */ var _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/entities/masterdata-props.entity */ "./Client/app/shared/entities/masterdata-props.entity.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};











var AssignSectionDialogComponent = /** @class */ (function () {
    function AssignSectionDialogComponent(masterDataService, route, companyManager, uiService, thisDialogRef, data, gridService) {
        this.masterDataService = masterDataService;
        this.route = route;
        this.companyManager = companyManager;
        this.uiService = uiService;
        this.thisDialogRef = thisDialogRef;
        this.data = data;
        this.gridService = gridService;
        this.listOfMasterData = [
            _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_7__["MasterDataProps"].Ports,
        ];
        this.gridComponents = {
            atrDate: _shared_components_cell_editor_date_picker_cell_editor_date_picker_component__WEBPACK_IMPORTED_MODULE_5__["CellEditorDatePickerComponent"],
            atrSelect: _shared_components_cell_editor_select_cell_editor_select_component__WEBPACK_IMPORTED_MODULE_6__["CellEditorSelectComponent"],
        };
        this.sectionsGridOptions = {};
        this.model = data.result;
        this.filteredLocations = data.masterdata.ports;
        this.atlasAgGridParam = this.gridService.getAgGridParam();
    }
    AssignSectionDialogComponent.prototype.ngOnInit = function () {
        this.initContractGridColumns();
    };
    AssignSectionDialogComponent.prototype.initContractGridColumns = function () {
        this.sectionGridCols = [
            {
                headerName: 'Contract ref',
                field: 'contractLabel',
            },
            {
                headerName: 'Counterparty',
                field: 'counterparty',
            },
            {
                headerName: 'Quantity',
                field: 'quantity',
                type: 'numericColumn',
            },
            {
                headerName: 'Vessel',
                field: 'vessel',
            },
            {
                headerName: 'Group Number',
                field: 'groupNumber',
                type: 'numericColumn',
            },
            {
                headerName: 'Loading location',
                field: 'portOrigin',
                colId: 'portOrigin',
                cellRendererFramework: _shared_components_ag_grid_autocomplete_ag_grid_autocomplete_component__WEBPACK_IMPORTED_MODULE_4__["AgGridAutocompleteComponent"],
                cellRendererParams: {
                    context: {
                        componentParent: this,
                    },
                    editable: true,
                    options: this.filteredLocations,
                    valueProperty: 'portCode',
                    codeProperty: 'portCode',
                    displayProperty: 'portCode',
                },
                onCellValueChanged: function (params) {
                },
            },
            {
                headerName: 'Discharge location',
                field: 'portDestination',
                colId: 'portDestination',
                cellRendererFramework: _shared_components_ag_grid_autocomplete_ag_grid_autocomplete_component__WEBPACK_IMPORTED_MODULE_4__["AgGridAutocompleteComponent"],
                cellRendererParams: {
                    context: {
                        componentParent: this,
                    },
                    editable: true,
                    options: this.filteredLocations,
                    valueProperty: 'portCode',
                    codeProperty: 'portCode',
                    displayProperty: 'portCode',
                },
                onCellValueChanged: function (params) {
                },
            },
            {
                headerName: 'Charter B/L date',
                field: 'blDate',
                cellEditor: 'atrDate',
                valueFormatter: this.uiService.dateFormatter,
                cellEditorParams: {
                    maxDate: this.companyManager.getCurrentCompanyDate()
                },
                editable: true,
                onCellValueChanged: this.ammendAllocatedContract.bind(this),
            },
            {
                headerName: 'BL Ref',
                field: 'blRef',
                editable: true,
            },
        ];
    };
    AssignSectionDialogComponent.prototype.onGridReady = function (params) {
        var _this = this;
        this.gridApi = params.api;
        this.gridColumnApi = params.columnApi;
        this.gridColumnApi.autoSizeAllColumns();
        window.onresize = function () {
            _this.gridColumnApi.autoSizeAllColumns();
        };
    };
    AssignSectionDialogComponent.prototype.onEditButtonClick = function () {
        this.thisDialogRef.close(this.model);
    };
    AssignSectionDialogComponent.prototype.onCancelButtonClick = function () {
        this.thisDialogRef.close(null);
    };
    AssignSectionDialogComponent.prototype.ammendAllocatedContract = function (params) {
        if (params) {
            this.gridApi.forEachNode(function (rowData) {
                if (params.data.contractLabel === rowData.data.allocatedTo) {
                    rowData.data.blDate = params.data.blDate;
                }
            });
            this.gridApi.setRowData(this.model.assignedSections);
        }
    };
    AssignSectionDialogComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-assign-section-dialog',
            template: __webpack_require__(/*! ./assign-section-dialog.component.html */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/assign-section-dialog/assign-section-dialog.component.html"),
            styles: [__webpack_require__(/*! ./assign-section-dialog.component.scss */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/assign-section-dialog/assign-section-dialog.component.scss")],
        }),
        __param(5, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_angular_material__WEBPACK_IMPORTED_MODULE_1__["MAT_DIALOG_DATA"])),
        __metadata("design:paramtypes", [_shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_9__["MasterdataService"], _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_3__["CompanyManagerService"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_10__["UiService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_1__["MatDialogRef"], Object, _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_8__["AgGridService"]])
    ], AssignSectionDialogComponent);
    return AssignSectionDialogComponent;
}());



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/assigned-contract-list-form-component/assigned-contract-list-form-component.component.html":
/*!**************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/assigned-contract-list-form-component/assigned-contract-list-form-component.component.html ***!
  \**************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-sidenav-container>\r\n    <mat-sidenav class=\"side-nav-reassignscreen\"\r\n                 position=\"end\"\r\n                 mode=\"over\"\r\n                 [(opened)]=\"sideReassignNavOpened\">\r\n        <div class=\"atr-sidenav-margin\">\r\n            <h2>Edit Reassigned Sections</h2>\r\n            <atlas-reassign-contract-ag-grid #atlasNewReassign\r\n                                             (sideReassignValueNavOpened)=\"closeReassignSideNav($event)\">\r\n            </atlas-reassign-contract-ag-grid>\r\n        </div>\r\n    </mat-sidenav>\r\n    <mat-sidenav-content>\r\n        <mat-card [hidden]=\"hasEmptyState\">\r\n            <mat-card-header>\r\n                <div fxLayout=\"row\"\r\n                     fxLayoutAlign=\"start start\"\r\n                     fxFlex>\r\n                    <mat-card-title>Assigned Section</mat-card-title>\r\n                    <span class=\"fill-space\"></span>\r\n                    <button mat-button\r\n                            (click)=\"onUpdateCostsButtonClicked()\">\r\n                        <span>UPDATE COSTS</span>\r\n                    </button>\r\n                    <button mat-button\r\n                            *ifAuthorized=\"'Charters.ChartersView',company:this.company\"\r\n                            [disabled]=\"!isEdit\"\r\n                            (click)=\"onActionButtonClicked()\">\r\n                        <span>DEASSIGN</span>\r\n                    </button>\r\n                    <button mat-button\r\n                            *ifAuthorized=\"'Charters.ChartersView',company:this.company\"\r\n                            [disabled]=\"!isEdit\"\r\n                            (click)=\" onReassignSideNavOpenClicked()\">\r\n                        <span>REASSIGN</span>\r\n                    </button>\r\n                    <atlas-ag-grid-user-preferences *ngIf=\"charterGridOptions && charterGridOptions.columnDefs\"\r\n                                                    [gridOptions]=\"charterGridOptions\"\r\n                                                    [company]=\"company\"\r\n                                                    [gridId]=\"componentId\"\r\n                                                    [showExport]=\"true\"\r\n                                                    [sharingEnabled]=\"hasGridSharing\"\r\n                                                    #userPreferences>\r\n                    </atlas-ag-grid-user-preferences>\r\n                    <atlas-grid-enlargement *ngIf=\"charterGridOptions && charterGridOptions.columnDefs\"\r\n                                            [gridOptions]=\"charterGridOptions\"\r\n                                            [userPreferencesParameters]=\"gridPreferences\"\r\n                                            [hasRangeSelectionOption]=\"true\"\r\n                                            [summableColumns]=\"allowedColumnsforQuickSum\"\r\n                                            [additionnalActions]=\"gridZoomAdditionalActions\"\r\n                                            (additionalActionTriggered)=\"handleGridZoomAction($event)\"\r\n                                            (rowSelected)=\"onRowSelected($event)\"\r\n                                            #gridZoom>\r\n                    </atlas-grid-enlargement>\r\n                </div>\r\n            </mat-card-header>\r\n\r\n            <div fxLayout=\"row\"\r\n                 class=\"quick-sum-div-height\"\r\n                 fxLayoutAlign=\"space-between center\">\r\n                <mat-slide-toggle mat-raised-button\r\n                                  (change)=\"toggleQuickSum()\">Quick Sum Mode</mat-slide-toggle>\r\n                <div fxLayout=\"row\"\r\n                     fxLayoutAlign=\"space-around center\">\r\n\r\n                    <div *ngFor=\"let column of selectedColumnsArray\">\r\n                        <span class=\"quick-sum-span\"\r\n                              *ngIf=\"column.sum!==0 && quickSumModeActivated\">{{column.name}}:{{column.sum}}</span>\r\n                    </div>\r\n                    <button mat-button\r\n                            (click)=\"onClearSelectionClicked()\"\r\n                            class=\"mat-button-user-margin\"\r\n                            *ngIf=\"quickSumModeActivated\">\r\n                        Clear Selection\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <div ag-grid=\"charterGridOptions\"\r\n                 class=\"atr-ag-grid\"\r\n                 [ngClass]='classApplied'>\r\n                <ag-grid-angular class=\"ag-theme-material atr-ag-grid\"\r\n                                 [rowData]=\"sectionsAssigned\"\r\n                                 [columnDefs]=\"columnDefs\"\r\n                                 domLayout=\"autoHeight\"\r\n                                 (columnVisible)=\"onAddOrDeleteColumn($event)\"\r\n                                 (gridReady)=\"onGridReady($event)\"\r\n                                 [pagination]=\"true\"\r\n                                 [paginationPageSize]=\"10\"\r\n                                 [gridOptions]='charterGridOptions'\r\n                                 [enableSorting]=\"true\"\r\n                                 [enableColResize]=\"false\"\r\n                                 [context]=\"gridContext\"\r\n                                 [rowSelection]=\"rowSelection\"\r\n                                 [rowStyle]=\"rowStyle\"\r\n                                 [enableRangeSelection]=\"true\"\r\n                                 (rangeSelectionChanged)=\"onRangeSelectionChanged($event)\"\r\n                                 (rowSelected)=\"onRowSelected($event)\"\r\n                                 [rowHeight]=\"atlasAgGridParam.rowHeight\"\r\n                                 [excelStyles]=\"excelStyles\">\r\n                </ag-grid-angular>\r\n            </div>\r\n\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"center center\"\r\n                 fxLayoutWrap\r\n                 *ngIf=\"isLoadingAssigned\"\r\n                 class=\"loading\">\r\n                <mat-spinner color=\"accent\"></mat-spinner>\r\n            </div>\r\n        </mat-card>\r\n        <atlas-empty-state *ngIf=\"hasEmptyState\"\r\n                           title=\"No Assignments\"\r\n                           [message]=\"assignmentEmptyMessage\"></atlas-empty-state>\r\n        <atlas-lock-interval [resourcesInformation]=\"resourcesInformation\">\r\n        </atlas-lock-interval>\r\n    </mat-sidenav-content>\r\n</mat-sidenav-container>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/assigned-contract-list-form-component/assigned-contract-list-form-component.component.scss":
/*!**************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/assigned-contract-list-form-component/assigned-contract-list-form-component.component.scss ***!
  \**************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".h2-title {\n  padding-left: 10px; }\n\n.atr-ag-grid {\n  height: 100%; }\n\n.ag-theme-material .ag-header-select-all {\n  width: 100% !important;\n  text-align: center !important; }\n\n.atr-grid-left-margin {\n  left: 20px; }\n\n:host ::ng-deep.ag-layout-auto-height.ag-body-container {\n  min-height: 300px !important; }\n\n.quick-sum-span {\n  font: 400 14px/20px Roboto, \"Helvetica Neue\", sans-serif;\n  margin-right: 4px; }\n\nbutton.mat-button-user-margin.mat-button.ng-star-inserted {\n  margin: 0px !important;\n  line-height: 0px !important; }\n\n.mat-card-header button.mat-button {\n  margin: 0 8px !important; }\n\n.quick-sum-div-height {\n  height: 25px !important; }\n\n.side-nav-reassignscreen {\n  width: 1200px;\n  height: calc(100vh - 53px);\n  top: 56px;\n  z-index: 10px; }\n\n.atr-sidenav-margin {\n  margin: 16px; }\n\n.isLoading {\n  width: 0;\n  height: 0; }\n\nh2 {\n  margin-top: 20px !important; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/assigned-contract-list-form-component/assigned-contract-list-form-component.component.ts":
/*!************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/assigned-contract-list-form-component/assigned-contract-list-form-component.component.ts ***!
  \************************************************************************************************************************************************************************************/
/*! exports provided: AssignedContractListFormComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AssignedContractListFormComponent", function() { return AssignedContractListFormComponent; });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../core/services/authorization.service */ "./Client/app/core/services/authorization.service.ts");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_ag_contextual_menu_ag_contextual_menu_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/components/ag-contextual-menu/ag-contextual-menu.component */ "./Client/app/shared/components/ag-contextual-menu/ag-contextual-menu.component.ts");
/* harmony import */ var _shared_components_ag_grid_hyperlink_ag_grid_hyperlink_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/components/ag-grid-hyperlink/ag-grid-hyperlink.component */ "./Client/app/shared/components/ag-grid-hyperlink/ag-grid-hyperlink.component.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _shared_components_grid_enlargement_grid_enlargement_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../shared/components/grid-enlargement/grid-enlargement.component */ "./Client/app/shared/components/grid-enlargement/grid-enlargement.component.ts");
/* harmony import */ var _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../shared/entities/lock-functional-context.entity */ "./Client/app/shared/entities/lock-functional-context.entity.ts");
/* harmony import */ var _shared_entities_lock_resource_information_entity__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../shared/entities/lock-resource-information.entity */ "./Client/app/shared/entities/lock-resource-information.entity.ts");
/* harmony import */ var _shared_enums_contract_status_enum__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../shared/enums/contract-status.enum */ "./Client/app/shared/enums/contract-status.enum.ts");
/* harmony import */ var _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../shared/enums/contract-type.enum */ "./Client/app/shared/enums/contract-type.enum.ts");
/* harmony import */ var _shared_enums_invoicing_status_enum__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../shared/enums/invoicing-status.enum */ "./Client/app/shared/enums/invoicing-status.enum.ts");
/* harmony import */ var _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../../shared/enums/permission-level.enum */ "./Client/app/shared/enums/permission-level.enum.ts");
/* harmony import */ var _shared_enums_pricing_method_enum__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../../shared/enums/pricing-method.enum */ "./Client/app/shared/enums/pricing-method.enum.ts");
/* harmony import */ var _shared_models_assigned_section_display_view__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../../../shared/models/assigned-section-display-view */ "./Client/app/shared/models/assigned-section-display-view.ts");
/* harmony import */ var _shared_pipes_format_date_pipe_pipe__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../../../shared/pipes/format-date-pipe.pipe */ "./Client/app/shared/pipes/format-date-pipe.pipe.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../../../shared/services/http-services/lock.service */ "./Client/app/shared/services/http-services/lock.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
/* harmony import */ var _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../../../services/execution-cash-common-methods */ "./Client/app/execution/services/execution-cash-common-methods.ts");
/* harmony import */ var _deassign_section_dialog_deassign_section_dialog_component__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../deassign-section-dialog/deassign-section-dialog.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/deassign-section-dialog/deassign-section-dialog.component.ts");
/* harmony import */ var _reassign_contract_ag_grid_reassign_contract_ag_grid_component__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../reassign-contract-ag-grid/reassign-contract-ag-grid.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/reassign-contract-ag-grid/reassign-contract-ag-grid.component.ts");
/* harmony import */ var _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./../../../../../shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component */ "./Client/app/shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component.ts");
/* harmony import */ var _shared_enums_group_function_type__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./../../../../../shared/enums/group-function-type */ "./Client/app/shared/enums/group-function-type.ts");
/* harmony import */ var _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./../../../../../shared/services/grid-configuration-provider.service */ "./Client/app/shared/services/grid-configuration-provider.service.ts");
/* harmony import */ var _shared_services_security_service__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./../../../../../shared/services/security.service */ "./Client/app/shared/services/security.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



































var AssignedContractListFormComponent = /** @class */ (function (_super) {
    __extends(AssignedContractListFormComponent, _super);
    function AssignedContractListFormComponent(companyManager, securityService, route, router, gridConfigurationProvider, executionService, formConfigurationProvider, snackbarService, authorizationService, dialog, datePipe, formatDate, uiService, lockService, gridService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.companyManager = companyManager;
        _this.securityService = securityService;
        _this.route = route;
        _this.router = router;
        _this.gridConfigurationProvider = gridConfigurationProvider;
        _this.executionService = executionService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.snackbarService = snackbarService;
        _this.authorizationService = authorizationService;
        _this.dialog = dialog;
        _this.datePipe = datePipe;
        _this.formatDate = formatDate;
        _this.uiService = uiService;
        _this.lockService = lockService;
        _this.gridService = gridService;
        _this.savingInProgress = false;
        _this.isLoadingAssigned = true;
        _this.dataLength = 0;
        _this.masterdata = [];
        _this.sectionsAssignedMenuActions = {
            deleteAssignedContract: 'delete',
            reassignedContract: 'reassign',
        };
        _this.isEdit = true;
        _this.quickSumModeActivated = false;
        _this.selectedColumnsArray = new Array();
        _this.checkExportedFormat = false;
        _this.hasEmptyState = true;
        _this.isContractAssigned = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        _this.isReassignedButtonClicked = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        _this.chartersList = [];
        _this.assignDeassignPrivilege = {
            privilegeName: 'ChartersView',
            profileId: null,
            permission: _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_18__["PermissionLevels"].ReadWrite,
            privilegeParentLevelOne: 'Charters',
            privilegeParentLevelTwo: 'ChartersView',
        };
        _this.defaultColumnDisplay = {
            checkboxSelection: true,
            contractLabel: true,
            counterparty: true,
            quantity: true,
            departmentCode: true,
            commodity1: true,
            blDate: true,
            allocatedTo: true,
            invoiceRef: true,
        };
        _this.destroy$ = new rxjs__WEBPACK_IMPORTED_MODULE_4__["Subject"]();
        _this.resourcesInformation = new Array();
        _this.locking = [];
        _this.unlocking = [];
        _this.componentId = 'charterAssignedSectionsList';
        _this.hasGridSharing = false;
        _this.charterGridOptions = {};
        _this.defaultClass = 'ag-theme-material pointer-cursor';
        _this.cellSelectionClass = 'ag-theme-material pointer-cursor cell-selection';
        _this.assignmentEmptyMessage = 'No contract has been assigned yet';
        _this.gridZoomAdditionalActions = [];
        _this.editingCharter = {
            profileId: null,
            privilegeName: 'ChartersView',
            permission: _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_18__["PermissionLevels"].ReadWrite,
            privilegeParentLevelOne: 'Charters',
            privilegeParentLevelTwo: null,
        };
        _this.excelStyles = [
            {
                id: 'dateFormat',
                dataType: 'dateTime',
                numberFormat: {
                    format: 'dd/mm/yyyy',
                },
            },
        ];
        var currentUser = _this.authorizationService.getCurrentUser();
        _this.userActiveDirectoryName = currentUser ? currentUser.samAccountName : '';
        _this.atlasAgGridParam = _this.gridService.getAgGridParam();
        return _this;
    }
    AssignedContractListFormComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.company = this.route.snapshot.params['company'];
        this.charterId = this.route.snapshot.params['charterId'];
        this.masterdata = this.route.snapshot.data.masterdata;
        this.gridContext = this;
        this.classApplied = this.defaultClass;
        this.atlasNewReassign.charterId = this.charterId;
        this.init();
        this.initFavouriteColumns();
        this.securityService.isSecurityReady().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["concatMap"])(function () {
            return _this.gridConfigurationProvider.getConfiguration(_this.company, _this.componentId);
        })).subscribe(function (configuration) {
            _this.hasGridSharing = configuration.hasMultipleViewsPerUser;
            _this.gridPreferences = {
                company: _this.company,
                gridId: _this.componentId,
                gridOptions: _this.charterGridOptions,
                sharingEnabled: _this.hasGridSharing,
                showExport: true,
            };
            _this.findAssignedContractsToCharter();
        });
    };
    AssignedContractListFormComponent.prototype.toggleQuickSum = function () {
        this.onClearSelectionClicked();
        this.quickSumModeActivated = !this.quickSumModeActivated;
        this.quickSumModeActivated ? this.classApplied = this.cellSelectionClass : this.classApplied = this.defaultClass;
        this.selectedColumnsArray = [];
    };
    AssignedContractListFormComponent.prototype.onClearSelectionClicked = function () {
        this.gridApi.clearRangeSelection();
        this.selectedColumnsArray = [];
    };
    AssignedContractListFormComponent.prototype.closeReassignSideNav = function (value) {
        this.sideReassignNavOpened = false;
        this.isReassignedButtonClicked.emit(false);
        if (value) {
            this.findAssignedContractsToCharter();
            this.router.navigate(['/' + this.route.snapshot.paramMap.get('company') + '/execution/charter/details', this.charterId]);
        }
    };
    AssignedContractListFormComponent.prototype.onRangeSelectionChanged = function (event) {
        this.selectedColumnsArray = [];
        var rangeSelections = this.gridApi.getRangeSelections();
        if (!rangeSelections || rangeSelections.length === 0) {
            return;
        }
        var firstRange = rangeSelections[0];
        var startRow = Math.min(firstRange.start.rowIndex, firstRange.end.rowIndex);
        var endRow = Math.max(firstRange.start.rowIndex, firstRange.end.rowIndex);
        var api = this.gridApi;
        var sum = 0;
        var selectedColumnsArray = this.selectedColumnsArray;
        var allowedColumnsforQuickSum = this.allowedColumnsforQuickSum;
        firstRange.columns.forEach(function (column) {
            sum = 0;
            if (allowedColumnsforQuickSum.includes(column.getColDef().colId)) {
                for (var rowIndex = startRow; rowIndex <= endRow; rowIndex++) {
                    var rowModel = api.getModel();
                    var rowNode = rowModel.getRow(rowIndex);
                    var value = api.getValue(column, rowNode);
                    sum += Number(value);
                }
                selectedColumnsArray.push({ name: column.getColDef().headerName, sum: sum });
            }
        });
        this.selectedColumnsArray = selectedColumnsArray;
    };
    AssignedContractListFormComponent.prototype.onRowSelected = function (event) {
        var _this = this;
        if (event.data.allocatedTo) {
            var allocatedSection_1;
            allocatedSection_1 = this.sectionsAssigned.find(function (item) {
                return item.contractLabel === event.data.allocatedTo;
            });
            if (allocatedSection_1) {
                event.data.isChecked = !event.data.isChecked;
                this.gridApi.forEachNode(function (node) {
                    if (node.data.contractLabel === allocatedSection_1.contractLabel) {
                        if (node.isSelected() && !event.data.isChecked) {
                            node.setSelected(event.data.isChecked);
                        }
                        else if (!node.isSelected() && event.data.isChecked) {
                            node.setSelected(event.data.isChecked);
                        }
                    }
                });
            }
        }
        if (this.isEdit) {
            if (event.node.isSelected()) {
                this.lockService.isLockedContract(event.data.sectionId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["takeUntil"])(this.destroy$)).subscribe(function (lock) {
                    if (lock.isLocked) {
                        _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_11__["ConfirmationDialogComponent"], {
                            data: {
                                title: 'Lock',
                                text: lock.message,
                                okButton: 'Got it',
                            },
                        });
                        _this.gridApi.deselectNode(event.node);
                        _this.locking = _this.locking.filter(function (id) { return id !== event.data.sectionId; });
                    }
                    else {
                        _this.lockService.lockContract(event.data.sectionId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_13__["LockFunctionalContext"].TradeDeassignment)
                            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["takeUntil"])(_this.destroy$))
                            .subscribe(function (lockState) {
                            _this.refeshResourceInformation();
                            _this.locking = _this.locking.filter(function (id) { return id !== event.data.sectionId; });
                        });
                    }
                });
            }
            else {
                if (!this.unlocking.includes(event.data.sectionId)) {
                    this.unlocking.push(event.data.sectionId);
                    this.refeshResourceInformation();
                    this.lockService.unlockContract(event.data.sectionId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_13__["LockFunctionalContext"].TradeDeassignment)
                        .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["takeUntil"])(this.destroy$)).subscribe(function () {
                        _this.unlocking = _this.unlocking.filter(function (id) { return id !== event.data.sectionId; });
                    });
                }
            }
        }
    };
    AssignedContractListFormComponent.prototype.refeshResourceInformation = function () {
        var _this = this;
        this.resourcesInformation = new Array();
        this.gridApi.forEachNode(function (node) {
            if (node.isSelected()) {
                var resourceInformation = new _shared_entities_lock_resource_information_entity__WEBPACK_IMPORTED_MODULE_14__["LockResourceInformation"]();
                resourceInformation.resourceType = 'Contract';
                resourceInformation.resourceId = node.data.sectionId;
                resourceInformation.resourceCode = node.data.contractReference;
                _this.resourcesInformation.push(resourceInformation);
            }
        });
    };
    AssignedContractListFormComponent.prototype.init = function () {
        this.allowedColumnsforQuickSum = ['quantity', 'price'];
        this.sectionsAssignedGridContextualMenuActions = [
            {
                icon: 'delete',
                text: 'Deassign',
                action: this.sectionsAssignedMenuActions.deleteAssignedContract,
                disabled: this.isDisabled,
            },
            {
                icon: 'refresh',
                text: 'Reassign',
                action: this.sectionsAssignedMenuActions.reassignedContract,
            },
        ];
        this.initGridZoom();
    };
    AssignedContractListFormComponent.prototype.isDisabled = function (params) {
        var deassignDisable = true;
        if (params.context.actionContext.isEdit) {
            deassignDisable = false;
        }
        return deassignDisable;
    };
    AssignedContractListFormComponent.prototype.getSelectedRow = function () {
        var _this = this;
        var assignedSections;
        var allocatedSection;
        assignedSections = this.gridApi.getSelectedRows();
        assignedSections.forEach(function (element) {
            if (element.contractType === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_16__["ContractTypes"].Sale && element.invoicingStatus === _shared_enums_invoicing_status_enum__WEBPACK_IMPORTED_MODULE_17__["InvoicingStatus"].Finalized) {
                element.reasonForDeassignment = 'Sales contract is 100% invoiced and cannot be de-assigned';
                element.isSaleFullyInvoiced = true;
            }
            else if (element.contractType === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_16__["ContractTypes"].Purchase && element.allocatedTo) {
                allocatedSection = _this.sectionsAssigned.find(function (item) { return item.contractLabel === element.allocatedTo; });
                if (allocatedSection.invoicingStatus === _shared_enums_invoicing_status_enum__WEBPACK_IMPORTED_MODULE_17__["InvoicingStatus"].Finalized) {
                    element.reasonForDeassignment =
                        'Purchase contract allocated to a Sales Contract which is 100% invoiced and cannot be de-assigned';
                    element.isSaleFullyInvoiced = true;
                }
            }
        });
        assignedSections.forEach(function (element) {
            if (element.allocatedTo) {
                allocatedSection = _this.sectionsAssigned.find(function (item) {
                    return item.contractLabel === element.allocatedTo && element.isSaleFullyInvoiced === false;
                });
                if (allocatedSection) {
                    if (!assignedSections.includes(allocatedSection)) {
                        assignedSections.push(allocatedSection);
                    }
                }
            }
        });
        this.model.assignedSections = assignedSections.filter(function (section) {
            return section.isSaleFullyInvoiced === false;
        });
        this.fullyInvoiceContract = assignedSections.filter(function (section) {
            return section.isSaleFullyInvoiced === true || section.reasonForDeassignment !== '';
        });
    };
    AssignedContractListFormComponent.prototype.initForm = function (entity, isEdit) {
        if (isEdit === void 0) { isEdit = false; }
        this.model = entity;
        this.isEdit = isEdit;
        if (isEdit) {
            this.isEdit = this.checkIfUserHasRequiredPrivileges(this.assignDeassignPrivilege);
        }
        this.initializeGridColumns();
        this.initGridZoom();
    };
    AssignedContractListFormComponent.prototype.checkIfUserHasRequiredPrivileges = function (userCompanyPrivilege) {
        if (this.authorizationService.isUserAllowedForCompany(this.company)) {
            var userPermissionLevel = this.authorizationService.getPermissionLevel(this.company, userCompanyPrivilege.privilegeParentLevelTwo, userCompanyPrivilege.privilegeParentLevelOne);
            if (userPermissionLevel < userCompanyPrivilege.permission) {
                return false;
            }
        }
        return true;
    };
    AssignedContractListFormComponent.prototype.findAssignedContractsToCharter = function () {
        var _this = this;
        this.isLoadingAssigned = true;
        this.locking = [];
        this.resourcesInformation.forEach(function (resourceInformation) {
            if (!_this.unlocking.includes(resourceInformation.resourceId)) {
                _this.unlocking.push(resourceInformation.resourceId);
                _this.refeshResourceInformation();
                _this.lockService.unlockContract(resourceInformation.resourceId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_13__["LockFunctionalContext"].TradeDeassignment)
                    .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["takeUntil"])(_this.destroy$))
                    .subscribe(function () {
                    _this.unlocking = _this.unlocking.filter(function (id) { return id !== resourceInformation.resourceId; });
                });
            }
        });
        this.unlocking = [];
        this.resourcesInformation = new Array();
        this.executionService.getSectionsAssignedToCharter(this.charterId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["map"])(function (data) {
            _this.sectionsAssigned = data.value.map(function (section) {
                section.counterparty = (section.contractType === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_16__["ContractTypes"].Purchase ? section.sellerCode : section.buyerCode);
                return new _shared_models_assigned_section_display_view__WEBPACK_IMPORTED_MODULE_20__["AssignedSectionView"](section);
            });
            _this.initializeGridColumns();
            _this.dataLength = _this.sectionsAssigned.length;
            if (_this.dataLength > 0) {
                _this.isContractAssigned.emit(true);
                _this.hasEmptyState = false;
            }
            _this.isLoadingAssigned = false;
        }))
            .subscribe();
    };
    AssignedContractListFormComponent.prototype.hyperlinkClicked = function (rowSelected, event) {
        this.router.navigate(['/' + this.companyManager.getCurrentCompanyId() + '/trades/display', rowSelected.sectionId]);
        event.preventDefault();
    };
    AssignedContractListFormComponent.prototype.onGridReady = function (params) {
        this.gridApi = this.charterGridOptions.api;
        this.charterGridOptions.columnDefs = this.columnDefs;
        this.gridColumnApi = this.charterGridOptions.columnApi;
        this.gridService.sizeColumns(this.charterGridOptions);
    };
    AssignedContractListFormComponent.prototype.onAddOrDeleteColumn = function (event) {
        this.userPreferencesComponent.onChangeColumnVisibility(event);
    };
    AssignedContractListFormComponent.prototype.showOrHideColum = function (event, col) {
        this.gridColumnApi.setColumnVisible(col.colId, (col.hide || false));
        event.stopPropagation();
        return false;
    };
    AssignedContractListFormComponent.prototype.initFavouriteColumns = function () {
        for (var key in this.defaultColumnDisplay) {
            this.defaultColumnDisplay[key] = false;
        }
        this.initializeGridColumns();
    };
    AssignedContractListFormComponent.prototype.commodityDescriptionFormatter = function (params) {
        var commodity = params.context.masterdata.commodities.find(function (com) { return com.commodityId === params.value; });
        return commodity ? commodity.commodityCode : '';
    };
    AssignedContractListFormComponent.prototype.departmentDescriptionFormatter = function (params) {
        var department = params.context.masterdata.departments.find(function (dept) { return dept.departmentId === params.value; });
        return department ? department.departmentCode : '';
    };
    AssignedContractListFormComponent.prototype.paymentTermCodeFormatter = function (params) {
        var paymentTerm = params.context.masterdata.paymentTerms.find(function (payment) { return payment.paymentTermsCode === params.value; });
        return paymentTerm ? paymentTerm.paymentTermsDescription : '';
    };
    AssignedContractListFormComponent.prototype.contractStatusFormatter = function (params) {
        if (params.value === _shared_enums_contract_status_enum__WEBPACK_IMPORTED_MODULE_15__["ContractStatus"].Unapproved || params.value === _shared_enums_contract_status_enum__WEBPACK_IMPORTED_MODULE_15__["ContractStatus"].Invoiced
            || params.value === _shared_enums_contract_status_enum__WEBPACK_IMPORTED_MODULE_15__["ContractStatus"].Approved) {
            return _shared_enums_contract_status_enum__WEBPACK_IMPORTED_MODULE_15__["ContractStatus"][params.value] ? _shared_enums_contract_status_enum__WEBPACK_IMPORTED_MODULE_15__["ContractStatus"][params.value].toString() : '';
        }
    };
    AssignedContractListFormComponent.prototype.pricingMethodIdFormatter = function (params) {
        if (params.value === _shared_enums_pricing_method_enum__WEBPACK_IMPORTED_MODULE_19__["PricingMethods"].FnO || params.value === _shared_enums_pricing_method_enum__WEBPACK_IMPORTED_MODULE_19__["PricingMethods"].Priced) {
            return _shared_enums_pricing_method_enum__WEBPACK_IMPORTED_MODULE_19__["PricingMethods"][params.value] ? _shared_enums_pricing_method_enum__WEBPACK_IMPORTED_MODULE_19__["PricingMethods"][params.value].toString() : '';
        }
    };
    AssignedContractListFormComponent.prototype.initializeGridColumns = function () {
        var _this = this;
        this.columnDefs = [
            {
                headerName: '',
                headerCheckboxSelection: true,
                checkboxSelection: true,
                headerCheckboxSelectionFilteredOnly: true,
                lockPosition: true,
                hide: !this.isEdit,
                width: 80,
                maxWidth: 80,
            },
            {
                headerName: 'Contract Label',
                colId: 'contractLabel',
                field: 'contractLabel',
                cellRendererFramework: _shared_components_ag_grid_hyperlink_ag_grid_hyperlink_component__WEBPACK_IMPORTED_MODULE_9__["AgGridHyperlinkComponent"],
                cellRendererParams: {
                    context: {
                        componentParent: this,
                    },
                },
            },
            {
                headerName: 'Counter Party',
                colId: 'counterparty',
                field: 'counterparty',
            },
            {
                headerName: 'Quantity',
                colId: 'quantity',
                field: 'quantity',
                type: 'numericColumn',
                valueFormatter: this.amountFormatter.bind(this),
            },
            {
                headerName: 'Department',
                colId: 'departmentCode',
                field: 'departmentCode',
            },
            {
                headerName: 'BL date',
                colId: 'blDate',
                field: 'blDate',
                cellClass: 'dateFormat',
                valueFormatter: function (params) { return _this.uiService.dateFormatter(params); },
            },
            {
                headerName: 'Allocation',
                colId: 'allocatedTo',
                field: 'allocatedTo',
            },
            {
                headerName: 'Invoice Ref',
                colId: 'invoiceRef',
                field: 'invoiceRef',
            },
            {
                headerName: 'Contract Date',
                colId: 'contractDate',
                field: 'contractDate',
                hide: !this.defaultColumnDisplay['contractDate'],
                cellClass: 'dateFormat',
                valueFormatter: function (params) { return _this.uiService.dateFormatter(params); },
            },
            {
                headerName: 'Pricing Method',
                colId: 'pricingMethodId',
                field: 'pricingMethodId',
                hide: !this.defaultColumnDisplay['pricingMethodId'],
                valueFormatter: this.pricingMethodIdFormatter,
            },
            {
                headerName: 'Status',
                colId: 'contractStatusCode',
                field: 'contractStatusCode',
                hide: !this.defaultColumnDisplay['ContractStatusCode'],
                valueFormatter: this.contractStatusFormatter,
            },
            {
                headerName: 'Last Amendment',
                colId: 'modifiedDateTime',
                field: 'modifiedDateTime',
                hide: !this.defaultColumnDisplay['modifiedDateTime'],
                cellClass: 'dateFormat',
                valueFormatter: function (params) { return _this.uiService.dateFormatter(params); },
            },
            {
                headerName: 'Amendment by',
                colId: 'modifiedBy',
                field: 'modifiedBy',
                hide: !this.defaultColumnDisplay['modifiedBy'],
            },
            {
                headerName: 'Price',
                colId: 'price',
                field: 'price',
                type: 'numericColumn',
                valueFormatter: this.amountFormatter.bind(this),
                hide: !this.defaultColumnDisplay['price'],
            },
            {
                headerName: 'Currency',
                colId: 'currency',
                field: 'currency',
                type: 'numericColumn',
                hide: !this.defaultColumnDisplay['currency'],
            },
            {
                headerName: 'Payment Terms',
                colId: 'paymentTermCode',
                field: 'paymentTermCode',
                hide: !this.defaultColumnDisplay['paymentTermCode'],
                valueFormatter: this.paymentTermCodeFormatter,
            },
            {
                headerName: 'Charter',
                colId: 'charterRef',
                field: 'charterRef',
                hide: !this.defaultColumnDisplay['charterRef'],
            },
            {
                headerName: 'Allocation Date',
                colId: 'allocatedDateTime',
                field: 'allocatedDateTime',
                hide: !this.defaultColumnDisplay['allocatedDateTime'],
                valueFormatter: this.uiService.dateFormatter,
            },
            {
                headerName: 'Amended By',
                colId: 'amendedBy',
                field: 'amendedBy',
                hide: !this.defaultColumnDisplay['amendedBy'],
            },
            {
                headerName: 'Amended On',
                colId: 'amendedOn',
                field: 'amendedOn',
                valueFormatter: this.uiService.dateFormatter,
                hide: !this.defaultColumnDisplay['amendedOn'],
            },
            {
                headerName: 'Arbitration Code',
                colId: 'arbitrationCode',
                field: 'arbitrationCode',
                hide: !this.defaultColumnDisplay['arbitrationCode'],
            },
            {
                headerName: 'Arbitration Description',
                colId: 'arbitrationDescription',
                field: 'arbitrationDescription',
                hide: !this.defaultColumnDisplay['arbitrationDescription'],
            },
            {
                headerName: 'Buyer',
                colId: 'buyerCode',
                field: 'buyerCode',
                hide: !this.defaultColumnDisplay['buyerCode'],
            },
            {
                headerName: 'Buyer Description',
                colId: 'buyerDescription',
                field: 'buyerDescription',
                hide: !this.defaultColumnDisplay['buyerDescription'],
            },
            {
                headerName: 'Cmy1',
                colId: 'commodity1',
                field: 'commodity1',
            },
            {
                headerName: 'Cmy2',
                colId: 'commodity2',
                field: 'commodity2',
                hide: !this.defaultColumnDisplay['commodity2'],
            },
            {
                headerName: 'Cmy3',
                colId: 'commodity3',
                field: 'commodity3',
                hide: !this.defaultColumnDisplay['commodity3'],
            },
            {
                headerName: 'Cmy4',
                colId: 'commodity4',
                field: 'commodity4',
                hide: !this.defaultColumnDisplay['commodity4'],
            },
            {
                headerName: 'Cmy5',
                colId: 'commodity5',
                field: 'commodity5',
                hide: !this.defaultColumnDisplay['commodity5'],
            },
            {
                headerName: 'Commodity Description',
                colId: 'commodityDescription',
                field: 'commodityDescription',
                hide: !this.defaultColumnDisplay['commodityDescription'],
            },
            {
                headerName: 'Company',
                colId: 'companyId',
                field: 'companyId',
                hide: !this.defaultColumnDisplay['pricingMethodId'],
            },
            {
                headerName: 'Contract Issued On',
                colId: 'contractIssuedOn',
                field: 'contractIssuedOn',
                valueFormatter: function (params) { return _this.uiService.dateFormatter(params); },
                hide: !this.defaultColumnDisplay['contractIssuedOn'],
            },
            {
                headerName: 'Contracted Quantity',
                colId: 'contractQuantity',
                field: 'contractQuantity',
                type: 'numericColumn',
                valueFormatter: this.amountFormatter.bind(this),
                hide: !this.defaultColumnDisplay['contractQuantity'],
            },
            {
                headerName: 'Contract Term',
                colId: 'contractTermCode',
                field: 'contractTermCode',
                hide: !this.defaultColumnDisplay['contractTermCode'],
            },
            {
                headerName: 'Contract Term Description',
                colId: 'contractTermDescription',
                field: 'contractTermDescription',
                hide: !this.defaultColumnDisplay['contractTermDescription'],
            },
            {
                headerName: 'Contract Term Port Code',
                colId: 'contractTermLocationPortCode',
                field: 'contractTermLocationPortCode',
                hide: !this.defaultColumnDisplay['contractTermLocationPortCode'],
            },
            {
                headerName: 'Contract Term Port Description',
                colId: 'contractTermLocationDescription',
                field: 'contractTermLocationDescription',
                hide: !this.defaultColumnDisplay['contractTermLocationDescription'],
            },
            {
                headerName: 'Created Date Time',
                colId: 'createdDateTime',
                field: 'createdDateTime',
                cellClass: 'dateFormat',
                valueFormatter: function (params) { return _this.uiService.dateFormatter(params); },
                hide: !this.defaultColumnDisplay['createdDateTime'],
            },
            {
                headerName: 'Contract Type',
                colId: 'displayContractType',
                field: 'displayContractType',
                hide: !this.defaultColumnDisplay['displayContractType'],
            },
            {
                headerName: 'Contract Value',
                colId: 'contractValue',
                field: 'contractValue',
                type: 'numericColumn',
                valueFormatter: this.amountFormatter.bind(this),
                hide: !this.defaultColumnDisplay['contractValue'],
            },
            {
                headerName: 'Counterparty Ref',
                colId: 'counterpartyRef',
                field: 'counterpartyRef',
                hide: !this.defaultColumnDisplay['counterpartyRef'],
            },
            {
                headerName: 'Created By',
                colId: 'createdBy',
                field: 'createdBy',
                hide: !this.defaultColumnDisplay['createdBy'],
            },
            {
                headerName: 'Crop Year',
                colId: 'cropYear',
                field: 'cropYear',
                hide: !this.defaultColumnDisplay['cropYear'],
            },
            {
                headerName: 'Currency Description',
                colId: 'currencyDescription',
                field: 'currencyDescription',
                hide: !this.defaultColumnDisplay['currencyDescription'],
            },
            {
                headerName: 'Delivery Period Start',
                colId: 'deliveryPeriodStart',
                field: 'deliveryPeriodStart',
                valueFormatter: function (params) { return _this.uiService.dateFormatter(params); },
                hide: !this.defaultColumnDisplay['deliveryPeriodStart'],
            },
            {
                headerName: 'Delivery Period End',
                colId: 'deliveryPeriodEnd',
                field: 'deliveryPeriodEnd',
                valueFormatter: function (params) { return _this.uiService.dateFormatter(params); },
                hide: !this.defaultColumnDisplay['deliveryPeriodEnd'],
            },
            {
                headerName: 'Department Description',
                colId: 'departmentDescription',
                field: 'departmentDescription',
                hide: !this.defaultColumnDisplay['pricingMethodId'],
            },
            {
                headerName: 'Grouping Number',
                colId: 'groupingNumber',
                field: 'groupingNumber',
                hide: !this.defaultColumnDisplay['groupingNumber'],
            },
            {
                headerName: 'Original Quantity',
                colId: 'originalQuantity',
                field: 'originalQuantity',
                type: 'numericColumn',
                valueFormatter: this.amountFormatter.bind(this),
                hide: !this.defaultColumnDisplay['originalQuantity'],
            },
            {
                headerName: 'Invoice Value',
                colId: 'invoiceValue',
                field: 'invoiceValue',
                type: 'numericColumn',
                valueFormatter: this.amountFormatter.bind(this),
                hide: !this.defaultColumnDisplay['invoiceValue'],
            },
            {
                headerName: 'Invoicing Status',
                colId: 'displayInvoicingStatus',
                field: 'displayInvoicingStatus',
                hide: !this.defaultColumnDisplay['displayInvoicingStatus'],
            },
            {
                headerName: 'Main Invoice Reference',
                colId: 'mainInvoiceReference',
                field: 'mainInvoiceReference',
                hide: !this.defaultColumnDisplay['mainInvoiceReference'],
            },
            {
                headerName: 'Main Invoice Date',
                colId: 'mainInvoiceDate',
                field: 'mainInvoiceDate',
                valueFormatter: function (params) { return _this.uiService.dateFormatter(params); },
                hide: !this.defaultColumnDisplay['mainInvoiceDate'],
            },
            {
                headerName: 'Memo',
                colId: 'memo',
                field: 'memo',
                hide: !this.defaultColumnDisplay['memo'],
            },
            {
                headerName: 'Other Reference',
                colId: 'otherReference',
                field: 'otherReference',
                hide: !this.defaultColumnDisplay['otherReference'],
            },
            {
                headerName: 'Parent',
                colId: 'parentContractLabel',
                field: 'parentContractLabel',
                hide: !this.defaultColumnDisplay['parentContractLabel'],
            },
            {
                headerName: 'Payment Date',
                colId: 'paymentDate',
                field: 'paymentDate',
                valueFormatter: function (params) { return _this.uiService.dateFormatter(params); },
                hide: !this.defaultColumnDisplay['paymentDate'],
            },
            {
                headerName: 'Payment Term Description',
                colId: 'paymentTermDescription',
                field: 'paymentTermDescription',
                hide: !this.defaultColumnDisplay['paymentTermDescription'],
            },
            {
                headerName: 'Percentage Invoiced',
                colId: 'percentageInvoiced',
                field: 'percentageInvoiced',
                hide: !this.defaultColumnDisplay['percentageInvoiced'],
            },
            {
                headerName: 'Period Type',
                colId: 'periodType',
                field: 'periodType',
                hide: !this.defaultColumnDisplay['periodType'],
            },
            {
                headerName: 'Contract Reference',
                colId: 'physicalContractCode',
                field: 'physicalContractCode',
                hide: !this.defaultColumnDisplay['physicalContractCode'],
            },
            {
                headerName: 'Port Of Origin',
                colId: 'portOfOrigin',
                field: 'portOfOrigin',
                hide: !this.defaultColumnDisplay['portOfOrigin'],
            },
            {
                headerName: 'Port Of Origin Description',
                colId: 'portOfOriginDescription',
                field: 'portOfOriginDescription',
                hide: !this.defaultColumnDisplay['portOfOriginDescription'],
            },
            {
                headerName: 'Port Of Destination',
                colId: 'portOfDestination',
                field: 'portOfDestination',
                hide: !this.defaultColumnDisplay['portOfDestination'],
            },
            {
                headerName: 'Port Of Destination Description',
                colId: 'portOfDestinationDescription',
                field: 'portOfDestinationDescription',
                hide: !this.defaultColumnDisplay['portOfDestinationDescription'],
            },
            {
                headerName: 'Position Month',
                colId: 'positionMonth',
                field: 'positionMonth',
                valueFormatter: function (params) { return _this.uiService.dateFormatter(params); },
                hide: !this.defaultColumnDisplay['positionMonth'],
            },
            {
                headerName: 'Position Type',
                colId: 'positionType',
                field: 'positionType',
                hide: !this.defaultColumnDisplay['positionType'],
            },
            {
                headerName: 'Price Unit Code',
                colId: 'priceCode',
                field: 'priceCode',
                hide: !this.defaultColumnDisplay['priceCode'],
            },
            {
                headerName: 'Price Unit Description',
                colId: 'priceUnitDescription',
                field: 'priceUnitDescription',
                hide: !this.defaultColumnDisplay['priceUnitDescription'],
            },
            {
                headerName: 'Quantity Code Invoiced',
                colId: 'quantityCodeInvoiced',
                field: 'quantityCodeInvoiced',
                hide: !this.defaultColumnDisplay['quantityCodeInvoiced'],
            },
            {
                headerName: 'Quantity Invoiced',
                colId: 'quantityInvoiced',
                field: 'quantityInvoiced',
                type: 'numericColumn',
                valueFormatter: this.amountFormatter.bind(this),
                hide: !this.defaultColumnDisplay['quantityInvoiced'],
            },
            {
                headerName: 'Seller',
                colId: 'sellerCode',
                field: 'sellerCode',
                hide: !this.defaultColumnDisplay['sellerCode'],
            },
            {
                headerName: 'Seller Description',
                colId: 'sellerDescription',
                field: 'sellerDescription',
                hide: !this.defaultColumnDisplay['sellerDescription'],
            },
            {
                headerName: 'Trader',
                colId: 'traderDisplayName',
                field: 'traderDisplayName',
                hide: !this.defaultColumnDisplay['pricingMethodId'],
            },
            {
                headerName: 'Vessel Name',
                colId: 'vesselName',
                field: 'vesselName',
                hide: !this.defaultColumnDisplay['vesselName'],
            },
            {
                headerName: 'Quantity Code',
                colId: 'weightUnitCode',
                field: 'weightUnitCode',
                hide: !this.defaultColumnDisplay['weightUnitCode'],
            },
            {
                headerName: 'Quantity Code Description',
                colId: 'weightUnitDescription',
                field: 'weightUnitDescription',
                hide: !this.defaultColumnDisplay['weightUnitDescription'],
            },
            {
                headerName: '',
                cellRendererFramework: _shared_components_ag_contextual_menu_ag_contextual_menu_component__WEBPACK_IMPORTED_MODULE_8__["AgContextualMenuComponent"],
                cellRendererParams: {
                    context: {
                        componentParent: this,
                        actionContext: this.gridContext,
                    },
                    menuActions: this.sectionsAssignedGridContextualMenuActions,
                },
                cellClass: 'ag-contextual-menu',
                width: 80,
            },
        ];
        this.rowSelection = 'multiple';
        this.rowStyle = { 'border-bottom': '1px solid #e0e0e0 !important' };
    };
    AssignedContractListFormComponent.prototype.onActionButtonClicked = function () {
        this.getSelectedRow();
        this.removeContractFromSection();
    };
    AssignedContractListFormComponent.prototype.removeContractFromSection = function () {
        var _this = this;
        if (this.model.assignedSections.length > 0 || this.fullyInvoiceContract.length > 0) {
            var result = this.model;
            var deAssignSectionDialog = this.dialog.open(_deassign_section_dialog_deassign_section_dialog_component__WEBPACK_IMPORTED_MODULE_29__["DeassignSectionDialogComponent"], {
                data: { result: result, masterdata: this.masterdata, fullyInvoiceContract: this.fullyInvoiceContract },
            });
            deAssignSectionDialog.afterClosed().subscribe(function (charters) {
                _this.findAssignedContractsToCharter();
            });
        }
        else {
            this.snackbarService.informationSnackBar('No Contract Selected.');
        }
    };
    AssignedContractListFormComponent.prototype.populateEntity = function (entity) {
        var _this = this;
        var charter = entity;
        charter.assignedSections = this.gridApi ? this.gridApi.getSelectedRows() : [];
        charter.assignedSections.forEach(function (section) {
            section.vessel = charter.vesselCode;
            section.portOrigin = charter.loadingLocationCode;
            section.portDestination = charter.dischargeLocationCode;
            var sectionAllocated = charter.assignedSections
                .find(function (assignedSection) { return section.allocatedTo === assignedSection.contractLabel; });
            if (!_this.isSectionInvoicedOrUnallocatedSale(section)) {
                section.blDate = charter.blDate;
                if (sectionAllocated && !_this.isSectionInvoicedOrUnallocatedSale(sectionAllocated)) {
                    sectionAllocated.blDate = charter.blDate;
                }
            }
            section.blRef = charter.blRef;
        });
        return charter;
    };
    AssignedContractListFormComponent.prototype.isSectionInvoicedOrUnallocatedSale = function (section) {
        if (section.invoiceRef && section.invoiceRef !== '') {
            return true;
        }
        // Sale not allocated will not be updated
        if (section.contractType === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_16__["ContractTypes"].Sale && section.allocatedTo === null) {
            return true;
        }
        return false;
    };
    AssignedContractListFormComponent.prototype.handleAction = function (action, rowSelected) {
        var _this = this;
        var allocatedSection;
        var assignedSections = [];
        this.model.assignedSections = [];
        switch (action) {
            case this.sectionsAssignedMenuActions.deleteAssignedContract:
                if (rowSelected.contractType === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_16__["ContractTypes"].Sale && rowSelected.invoicingStatus === _shared_enums_invoicing_status_enum__WEBPACK_IMPORTED_MODULE_17__["InvoicingStatus"].Finalized) {
                    rowSelected.reasonForDeassignment = 'Sales contract is 100% invoiced and cannot be de-assigned';
                    rowSelected.isSaleFullyInvoiced = true;
                }
                if (rowSelected.contractType === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_16__["ContractTypes"].Purchase && rowSelected.allocatedTo) {
                    allocatedSection = this.sectionsAssigned.find(function (item) {
                        return item.contractLabel === rowSelected.allocatedTo;
                    });
                    if (allocatedSection.invoicingStatus === _shared_enums_invoicing_status_enum__WEBPACK_IMPORTED_MODULE_17__["InvoicingStatus"].Finalized) {
                        rowSelected.reasonForDeassignment =
                            'Purchase contract allocated to a Sales Contract which is 100% invoiced and cannot be de-assigned';
                        rowSelected.isSaleFullyInvoiced = true;
                    }
                }
                assignedSections.push(rowSelected);
                if (rowSelected.allocatedTo && rowSelected.isSaleFullyInvoiced === false) {
                    allocatedSection = this.sectionsAssigned.find(function (item) {
                        return item.contractLabel === rowSelected.allocatedTo && item.isSaleFullyInvoiced === false;
                    });
                    if (allocatedSection) {
                        assignedSections.push(allocatedSection);
                    }
                }
                this.model.assignedSections = assignedSections.filter(function (section) {
                    return section.isSaleFullyInvoiced === false;
                });
                this.fullyInvoiceContract = assignedSections.filter(function (section) {
                    return section.isSaleFullyInvoiced === true || section.reasonForDeassignment !== '';
                });
                this.removeContractFromSection();
                break;
            case this.sectionsAssignedMenuActions.reassignedContract:
                if (this.isEdit) {
                    if (rowSelected.sectionId) {
                        this.lockContracts(rowSelected.sectionId);
                        if (rowSelected.allocatedToSectionId) {
                            this.lockContracts(rowSelected.allocatedToSectionId);
                        }
                    }
                    else {
                        this.sideReassignNavOpened = true;
                        if (!this.unlocking.includes(rowSelected.sectionId)) {
                            this.unlocking.push(rowSelected.sectionId);
                            this.refeshResourceInformation();
                            this.lockService.unlockContract(rowSelected.sectionId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_13__["LockFunctionalContext"].TradeReassignment)
                                .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["takeUntil"])(this.destroy$)).subscribe(function () {
                                _this.unlocking = _this.unlocking.filter(function (id) { return id !== rowSelected.sectionId; });
                            });
                        }
                    }
                }
                this.sideReassignNavOpened = true;
                assignedSections.push(rowSelected);
                if (rowSelected.allocatedTo && rowSelected.isSaleFullyInvoiced === false) {
                    allocatedSection = this.sectionsAssigned.find(function (item) {
                        return item.contractLabel === rowSelected.allocatedTo && item.isSaleFullyInvoiced === false;
                    });
                    if (allocatedSection) {
                        assignedSections.push(allocatedSection);
                    }
                }
                this.model.assignedSections = assignedSections;
                this.atlasNewReassign.reassignCharterGridRows(this.model);
                break;
            default: // throw Action not recognized exception
                break;
        }
    };
    AssignedContractListFormComponent.prototype.goToChartersDetails = function (charterId) {
        this.router.navigate([this.route.snapshot.paramMap.get('company') +
                '/execution/charter/details', charterId, { warning: false }]);
    };
    AssignedContractListFormComponent.prototype.amountFormatter = function (param) {
        if (param && param.value) {
            var commonMethods = new _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_28__["CommonMethods"]();
            if (param.colDef.colId.toLowerCase() === 'quantity' ||
                param.colDef.colId.toLowerCase() === 'contractquantity' || param.colDef.colId.toLowerCase() === 'originalquantity'
                || param.colDef.colId.toLowerCase() === 'quantityinvoiced') {
                return commonMethods.getFormattedNumberValue(param.value, 3);
            }
            else {
                return commonMethods.getFormattedNumberValue(param.value, 2);
            }
        }
    };
    AssignedContractListFormComponent.prototype.initGridZoom = function () {
        this.gridZoomAdditionalActions = [];
        var addCostPrivilegeLevel = this.authorizationService.getPermissionLevel(this.company, this.editingCharter.privilegeName, this.editingCharter.privilegeParentLevelOne, this.editingCharter.privilegeParentLevelTwo);
        var hasAddCostPrivilege = addCostPrivilegeLevel >= _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_18__["PermissionLevels"].ReadWrite;
        this.gridZoomAdditionalActions.push({
            action: 'updateCost',
            text: 'Update Cost',
            disabled: false,
        });
        if (hasAddCostPrivilege) {
            this.gridZoomAdditionalActions.push({
                action: 'deassign',
                text: 'Deassign',
                disabled: !this.isEdit,
            }, {
                action: 'reassign',
                text: 'Reassign',
                disabled: !this.isEdit,
            });
        }
    };
    AssignedContractListFormComponent.prototype.handleGridZoomAction = function (action) {
        switch (action) {
            case 'deassign':
                this.gridEnlargementComponent.mapSelectedRowInGridOptions(this.charterGridOptions);
                this.onActionButtonClicked();
                break;
            case 'reassign':
                this.gridEnlargementComponent.mapSelectedRowInGridOptions(this.charterGridOptions);
                this.onReassignSideNavOpenClicked();
                break;
            case 'updateCost':
                this.gridEnlargementComponent.mapSelectedRowInGridOptions(this.charterGridOptions);
                this.onUpdateCostsButtonClicked();
                break;
            default: break;
        }
    };
    AssignedContractListFormComponent.prototype.ngOnDestroy = function () {
        this.destroy$.next();
        this.destroy$.complete();
    };
    AssignedContractListFormComponent.prototype.onReassignSideNavOpenClicked = function () {
        this.isReassignedButtonClicked.emit(true);
        this.reassignContractFromSection();
    };
    AssignedContractListFormComponent.prototype.getAllSelectedRows = function () {
        var assignedSections;
        assignedSections = this.gridApi.getSelectedRows();
        this.model.assignedSections = assignedSections;
    };
    AssignedContractListFormComponent.prototype.reassignContractFromSection = function () {
        this.getAllSelectedRows();
        if (this.model.assignedSections.length > 0 || this.fullyInvoiceContract.length > 0) {
            this.sideReassignNavOpened = true;
            this.atlasNewReassign.reassignCharterGridRows(this.model);
        }
        else {
            this.snackbarService.informationSnackBar('No Contract Selected.');
            this.sideReassignNavOpened = false;
        }
    };
    AssignedContractListFormComponent.prototype.lockContracts = function (sectionId) {
        var _this = this;
        this.sideReassignNavOpened = false;
        this.lockService.isLockedContract(sectionId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["takeUntil"])(this.destroy$)).subscribe(function (lock) {
            if (lock.isLocked) {
                _this.sideReassignNavOpened = false;
                _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_11__["ConfirmationDialogComponent"], {
                    data: {
                        title: 'Lock',
                        text: lock.message,
                        okButton: 'Got it',
                    },
                });
                _this.locking = _this.locking.filter(function (id) { return id !== sectionId; });
            }
            else {
                _this.lockService.lockContract(sectionId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_13__["LockFunctionalContext"].TradeReassignment)
                    .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["takeUntil"])(_this.destroy$))
                    .subscribe(function (lockState) {
                    _this.refeshResourceInformation();
                    _this.locking = _this.locking.filter(function (id) { return id !== sectionId; });
                });
            }
        });
    };
    AssignedContractListFormComponent.prototype.onUpdateCostsButtonClicked = function () {
        this.bulkActionTypeId = _shared_enums_group_function_type__WEBPACK_IMPORTED_MODULE_32__["GroupFunctionTypes"].Costs;
        this.router.navigate(['/' + this.companyManager.getCurrentCompanyId() +
                '/trades/bulkActions/costs/' + encodeURIComponent(String(this.bulkActionTypeId)) +
                '/' + encodeURIComponent(String(this.charterId))]);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('userPreferences'),
        __metadata("design:type", _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_31__["AgGridUserPreferencesComponent"])
    ], AssignedContractListFormComponent.prototype, "userPreferencesComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('gridZoom'),
        __metadata("design:type", _shared_components_grid_enlargement_grid_enlargement_component__WEBPACK_IMPORTED_MODULE_12__["GridEnlargementComponent"])
    ], AssignedContractListFormComponent.prototype, "gridEnlargementComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])(),
        __metadata("design:type", Object)
    ], AssignedContractListFormComponent.prototype, "isContractAssigned", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])(),
        __metadata("design:type", Object)
    ], AssignedContractListFormComponent.prototype, "isReassignedButtonClicked", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('atlasNewReassign'),
        __metadata("design:type", _reassign_contract_ag_grid_reassign_contract_ag_grid_component__WEBPACK_IMPORTED_MODULE_30__["ReassignContractAgGridComponent"])
    ], AssignedContractListFormComponent.prototype, "atlasNewReassign", void 0);
    AssignedContractListFormComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: 'atlas-assigned-contract-list-form-component',
            template: __webpack_require__(/*! ./assigned-contract-list-form-component.component.html */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/assigned-contract-list-form-component/assigned-contract-list-form-component.component.html"),
            styles: [__webpack_require__(/*! ./assigned-contract-list-form-component.component.scss */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/assigned-contract-list-form-component/assigned-contract-list-form-component.component.scss")],
            providers: [_angular_common__WEBPACK_IMPORTED_MODULE_0__["DatePipe"]],
        }),
        __metadata("design:paramtypes", [_core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_7__["CompanyManagerService"],
            _shared_services_security_service__WEBPACK_IMPORTED_MODULE_34__["SecurityService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"],
            _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_33__["GridConfigurationProviderService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_24__["ExecutionService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_23__["FormConfigurationProviderService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_26__["SnackbarService"],
            _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_6__["AuthorizationService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"],
            _angular_common__WEBPACK_IMPORTED_MODULE_0__["DatePipe"],
            _shared_pipes_format_date_pipe_pipe__WEBPACK_IMPORTED_MODULE_21__["FormatDatePipe"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_27__["UiService"],
            _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_25__["LockService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_22__["AgGridService"]])
    ], AssignedContractListFormComponent);
    return AssignedContractListFormComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_10__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-menu-bar-component/charter-menu-bar-component.component.html":
/*!****************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-menu-bar-component/charter-menu-bar-component.component.html ***!
  \****************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-toolbar class=\"menu-bar\">\r\n    <div class=\"toolbar-div\">\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"start center\"\r\n             fxFlex=\"30\">\r\n            <button mat-button\r\n                    class=\"menu-bar-button\"\r\n                    *ifAuthorized=\"'Charters.ChartersView',company:this.company\"\r\n                    (click)='onAssignButtonClicked()'\r\n                    [disabled]=\"menuDisable\">Assign </button>\r\n            <button mat-button\r\n                    class=\"menu-bar-button\"\r\n                    *ifAuthorized=\"'Charters.ChartersView',company:this.company\"\r\n                    (click)='onCopyButtonClicked()'\r\n                    [disabled]=\"menuDisable\">Image </button>\r\n            <button mat-button\r\n                    class=\"menu-bar-button\"\r\n                    *ngIf=\"charterStatus !== 'Open'\"\r\n                    (click)='onOpenButtonClicked()'\r\n                    [disabled]=\"menuDisable\">Open </button>\r\n            <button mat-button\r\n                    class=\"menu-bar-button\"\r\n                    *ngIf=\"charterStatus === 'Open' && tradeClosePrivilege\"\r\n                    (click)='onCloseButtonClicked()'\r\n                    [disabled]=\"menuDisable\">Close </button>\r\n            <button mat-button\r\n                    class=\"menu-bar-button\"\r\n                    *ifAuthorized=\"'Charters.ChartersView',company:this.company\"\r\n                    (click)='onDeleteButtonClicked()'>Delete\r\n            </button>\r\n            <button mat-button\r\n                    class=\"menu-bar-button\"\r\n                    (click)='allocateDeallocate()'>Allocate/Deallocate\r\n            </button>\r\n            <button mat-button\r\n                    [matMenuTriggerFor]=\"reports\"\r\n                    class=\"menu-bar-button\">Reports\r\n            </button>\r\n            <mat-menu #reports=\"matMenu\"\r\n                      [overlapTrigger]=\"false\"\r\n                      xPosition=\"after\">\r\n                <button mat-menu-item\r\n                        (click)='onViewPnLButtonClicked()'>View P&L</button>\r\n                <button mat-menu-item\r\n                        (click)='onViewCharterReportButtonClicked()'>Charter Report</button>\r\n                <span *ngFor=\"let item of filteredTemplates\">\r\n                    <button mat-button\r\n                            (click)=\"OnReportClick(item)\">\r\n                        {{item.name}}\r\n                    </button>\r\n                </span>\r\n            </mat-menu>\r\n            <button mat-button\r\n                    *ifAuthorized=\"'Documents',company:this.company\"\r\n                    [matMenuTriggerFor]=\"documents\"\r\n                    class=\"menu-bar-button\"\r\n                    [disabled]=\"menuDisable\">Documents\r\n            </button>\r\n            <mat-menu #documents=\"matMenu\"\r\n                      [overlapTrigger]=\"false\"\r\n                      xPosition=\"after\">\r\n                <button mat-menu-item\r\n                        (click)=\"onSeeDocumentButtonClicked()\">See Documents</button>\r\n            </mat-menu>\r\n        </div>\r\n\r\n        <span class=\"fill-space\"></span>\r\n    </div>\r\n</mat-toolbar>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-menu-bar-component/charter-menu-bar-component.component.scss":
/*!****************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-menu-bar-component/charter-menu-bar-component.component.scss ***!
  \****************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".menu-bar-action-icon {\n  cursor: pointer;\n  background-color: #81cf5c;\n  border-radius: 50%;\n  width: 40px;\n  height: 40px;\n  text-align: center; }\n\nmat-toolbar {\n  height: 40px !important;\n  background-color: white !important; }\n\n.white-icon {\n  color: white;\n  height: 24px;\n  width: 24px;\n  vertical-align: bottom; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-menu-bar-component/charter-menu-bar-component.component.ts":
/*!**************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-menu-bar-component/charter-menu-bar-component.component.ts ***!
  \**************************************************************************************************************************************************************/
/*! exports provided: CharterMenuBarComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CharterMenuBarComponent", function() { return CharterMenuBarComponent; });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _execution_execution_charter_execution_charter_creation_page_components_charter_pnl_report_charter_pnl_report_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../execution/execution-charter/execution-charter-creation-page/components/charter-pnl-report/charter-pnl-report.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-pnl-report/charter-pnl-report.component.ts");
/* harmony import */ var _execution_execution_charter_execution_charter_creation_page_components_charter_report_charter_report_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../execution/execution-charter/execution-charter-creation-page/components/charter-report/charter-report.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-report/charter-report.component.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/entities/lock-functional-context.entity */ "./Client/app/shared/entities/lock-functional-context.entity.ts");
/* harmony import */ var _shared_enums_charter_status_enum__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../shared/enums/charter-status.enum */ "./Client/app/shared/enums/charter-status.enum.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../shared/services/http-services/lock.service */ "./Client/app/shared/services/http-services/lock.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../core/services/authorization.service */ "./Client/app/core/services/authorization.service.ts");
/* harmony import */ var _shared_services_security_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../shared/services/security.service */ "./Client/app/shared/services/security.service.ts");
/* harmony import */ var _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../shared/services/http-services/document.service */ "./Client/app/shared/services/http-services/document.service.ts");
/* harmony import */ var _shared_components_generic_report_viewer_generic_report_viewer_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../shared/components/generic-report-viewer/generic-report-viewer.component */ "./Client/app/shared/components/generic-report-viewer/generic-report-viewer.component.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


















var CharterMenuBarComponent = /** @class */ (function () {
    function CharterMenuBarComponent(router, route, dialog, executionService, snackbarService, location, lockService, authorizationService, documentService, securityService) {
        this.router = router;
        this.route = route;
        this.dialog = dialog;
        this.executionService = executionService;
        this.snackbarService = snackbarService;
        this.location = location;
        this.lockService = lockService;
        this.authorizationService = authorizationService;
        this.documentService = documentService;
        this.securityService = securityService;
        this.menuDisable = undefined;
        this.charterSaveAction = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.destroy$ = new rxjs__WEBPACK_IMPORTED_MODULE_4__["Subject"]();
        this.closeCharterSubject = new rxjs__WEBPACK_IMPORTED_MODULE_4__["Subject"]();
        this.openCharterSubject = new rxjs__WEBPACK_IMPORTED_MODULE_4__["Subject"]();
        this.tradeClosePrivilege = false;
        this.filteredTemplates = new Array();
    }
    CharterMenuBarComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.charterId = this.route.snapshot.params['charterId'];
        this.company = this.route.snapshot.params['company'];
        this.securityService.isSecurityReady().subscribe(function () {
            if (_this.authorizationService.isPrivilegeAllowed(_this.company, 'Trades')
                && _this.authorizationService.isPrivilegeAllowed(_this.company, 'Physicals')) {
                _this.tradeClosePrivilege = _this.authorizationService.isPrivilegeAllowed(_this.company, 'CloseTrade');
            }
        });
        var documentType = 76;
        this.documentService.getTemplates(documentType, 'Charters').subscribe(function (templates) {
            _this.filteredTemplates = templates.value;
        });
    };
    CharterMenuBarComponent.prototype.onCopyButtonClicked = function () {
        this.router.navigate(['/' + this.company + '/execution/charter/new', this.charterId]);
    };
    CharterMenuBarComponent.prototype.OnReportClick = function (data) {
        var openTradepnlReportDialog = this.dialog.open(_shared_components_generic_report_viewer_generic_report_viewer_component__WEBPACK_IMPORTED_MODULE_17__["GenericReportViewerComponent"], {
            data: {
                reportName: data.name,
                reportPath: data.path,
            },
            width: '90%',
            height: '90%',
        });
    };
    CharterMenuBarComponent.prototype.onAssignButtonClicked = function () {
        this.router.navigate(['/' + this.company + '/execution/charter/assignment', this.charterId]);
    };
    CharterMenuBarComponent.prototype.onDeleteButtonClicked = function () {
        var _this = this;
        this.lockService.isLockedCharter(this.charterId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["takeUntil"])(this.destroy$)).subscribe(function (lock) {
            if (lock.isLocked) {
                _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_8__["ConfirmationDialogComponent"], {
                    data: {
                        title: 'Lock',
                        text: lock.message,
                        okButton: 'Got it',
                    },
                });
            }
            else {
                _this.lockService.lockCharter(_this.charterId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_9__["LockFunctionalContext"].CharterDeletion).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["takeUntil"])(_this.destroy$))
                    .subscribe(function (data) {
                    var confirmDialog = _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_8__["ConfirmationDialogComponent"], {
                        data: {
                            title: 'Charter Deletion',
                            text: 'Deleting a charter is permanent. Do you wish to proceed?',
                            okButton: 'Delete anyway',
                            cancelButton: 'Cancel',
                        },
                    });
                    confirmDialog.afterClosed().subscribe(function (answer) {
                        if (answer) {
                            _this.executionService.getSectionsAssignedToCharter(_this.charterId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["map"])(function (data) {
                                _this.sectionsAssigned = data.value;
                                if (_this.sectionsAssigned && _this.sectionsAssigned.length > 0) {
                                    _this.snackbarService.informationSnackBar('Charter cannot be deleted as it has allocated/assigned contracts');
                                }
                                else {
                                    _this.deleteCharterPermanantly();
                                }
                            }))
                                .subscribe();
                        }
                    });
                }, function (err) {
                    var confirmDialog = _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_8__["ConfirmationDialogComponent"], {
                        data: {
                            title: 'Lock',
                            text: err.error.detail,
                            okButton: 'Got it',
                        },
                    });
                });
            }
        });
    };
    CharterMenuBarComponent.prototype.goToChartersList = function () {
        this.router.navigate(['/' + this.company + '/execution/charter']);
    };
    CharterMenuBarComponent.prototype.onPreviousPageNavigation = function () {
        this.location.back();
    };
    CharterMenuBarComponent.prototype.onSaveCharterClicked = function () {
        this.charterSaveAction.emit();
    };
    CharterMenuBarComponent.prototype.allocateDeallocate = function () {
        this.router.navigate(['/' + this.company + '/execution/charter/allocateDeallocate', this.charterId]);
    };
    CharterMenuBarComponent.prototype.onSeeDocumentButtonClicked = function () {
        this.menuDisable = true;
        this.router.navigate([this.company + '/execution/document/list/', 'charter', this.charterId]);
    };
    CharterMenuBarComponent.prototype.onViewPnLButtonClicked = function () {
        var openPnlReportDialog = this.dialog.open(_execution_execution_charter_execution_charter_creation_page_components_charter_pnl_report_charter_pnl_report_component__WEBPACK_IMPORTED_MODULE_6__["CharterPnlReportComponent"], {
            data: {
                charterId: this.charterId,
            },
            width: '90%',
            height: '90%',
        });
    };
    CharterMenuBarComponent.prototype.onViewCharterReportButtonClicked = function () {
        var openCharterReportDialog = this.dialog.open(_execution_execution_charter_execution_charter_creation_page_components_charter_report_charter_report_component__WEBPACK_IMPORTED_MODULE_7__["CharterReportComponent"], {
            data: {
                charterId: this.charterId,
            },
            width: '90%',
            height: '90%',
        });
    };
    CharterMenuBarComponent.prototype.ngOnDestroy = function () {
        this.destroy$.next();
        this.destroy$.complete();
    };
    CharterMenuBarComponent.prototype.deleteCharterPermanantly = function () {
        var _this = this;
        this.executionService.deleteCharter(this.charterId).subscribe(function () {
            _this.snackbarService.informationSnackBar('Charter deleted successfully');
            _this.goToChartersList();
        });
        if (!this.menuDisable) {
            this.lockService.unlockCharter(this.charterId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_9__["LockFunctionalContext"].CharterDeletion)
                .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["takeUntil"])(this.destroy$)).subscribe();
        }
    };
    CharterMenuBarComponent.prototype.onOpenButtonClicked = function () {
        this.openCharterSubject.next();
    };
    CharterMenuBarComponent.prototype.onCloseButtonClicked = function () {
        this.closeCharterSubject.next();
    };
    CharterMenuBarComponent.prototype.updateCharterMenu = function (charterStatusId) {
        this.charterStatus = _shared_enums_charter_status_enum__WEBPACK_IMPORTED_MODULE_10__["CharterStatus"][charterStatusId].toString();
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])(),
        __metadata("design:type", Boolean)
    ], CharterMenuBarComponent.prototype, "menuDisable", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])(),
        __metadata("design:type", Object)
    ], CharterMenuBarComponent.prototype, "charterSaveAction", void 0);
    CharterMenuBarComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: 'atlas-charter-menu-bar-component',
            template: __webpack_require__(/*! ./charter-menu-bar-component.component.html */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-menu-bar-component/charter-menu-bar-component.component.html"),
            styles: [__webpack_require__(/*! ./charter-menu-bar-component.component.scss */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-menu-bar-component/charter-menu-bar-component.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"],
            _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_11__["ExecutionService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_13__["SnackbarService"],
            _angular_common__WEBPACK_IMPORTED_MODULE_0__["Location"],
            _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_12__["LockService"],
            _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_14__["AuthorizationService"],
            _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_16__["DocumentService"],
            _shared_services_security_service__WEBPACK_IMPORTED_MODULE_15__["SecurityService"]])
    ], CharterMenuBarComponent);
    return CharterMenuBarComponent;
}());



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-pnl-report/charter-pnl-report.component.html":
/*!************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-pnl-report/charter-pnl-report.component.html ***!
  \************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div fxLayoutAlign=\"space-between center\">\r\n    <h2>Charter P&L Report</h2>\r\n    <button mat-button>\r\n        <mat-icon (click)=\"onCloseButtonClicked()\">close</mat-icon>\r\n    </button>\r\n</div>\r\n<div class=\"report-container-full-content\">\r\n    <atlas-ssrsreport-viewer [reportServer]=\"reportServerUrl\"\r\n                             [reportUrl]=\"reportPath\"\r\n                             [parameters]=\"parameters\"\r\n                             #ssrsReportViewer></atlas-ssrsreport-viewer>\r\n</div>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-pnl-report/charter-pnl-report.component.scss":
/*!************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-pnl-report/charter-pnl-report.component.scss ***!
  \************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-pnl-report/charter-pnl-report.component.ts":
/*!**********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-pnl-report/charter-pnl-report.component.ts ***!
  \**********************************************************************************************************************************************/
/*! exports provided: CharterPnlReportComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CharterPnlReportComponent", function() { return CharterPnlReportComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../../environments/environment */ "./Client/environments/environment.ts");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_ssrs_report_viewer_ssrsreport_viewer_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/components/ssrs-report-viewer/ssrsreport-viewer.component */ "./Client/app/shared/components/ssrs-report-viewer/ssrsreport-viewer.component.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};





var CharterPnlReportComponent = /** @class */ (function () {
    function CharterPnlReportComponent(thisDialogRef, data, companyManager) {
        this.thisDialogRef = thisDialogRef;
        this.data = data;
        this.companyManager = companyManager;
        this.parameters = [];
        this.reportServerUrl = _environments_environment__WEBPACK_IMPORTED_MODULE_2__["environment"].reportServerLink;
        this.reportPath = 'LDC Atlas/PnL/PnL_TradeCharter';
        this.dialogData = data;
    }
    CharterPnlReportComponent.prototype.ngOnInit = function () {
        this.charterId = Number(this.dialogData.charterId);
        this.company = this.companyManager.getCurrentCompanyId();
        this.GenerateReport();
    };
    CharterPnlReportComponent.prototype.onCloseButtonClicked = function () {
        this.thisDialogRef.close(true);
    };
    CharterPnlReportComponent.prototype.GenerateReport = function () {
        this.parameters = [
            { name: 'CompanyID', value: this.company },
            { name: 'CharterId', value: this.charterId },
        ];
        this.ssrsReportViewer.generateReport(this.reportServerUrl, this.reportPath, this.parameters);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('ssrsReportViewer'),
        __metadata("design:type", _shared_components_ssrs_report_viewer_ssrsreport_viewer_component__WEBPACK_IMPORTED_MODULE_4__["SSRSReportViewerComponent"])
    ], CharterPnlReportComponent.prototype, "ssrsReportViewer", void 0);
    CharterPnlReportComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-charter-pnl-report',
            template: __webpack_require__(/*! ./charter-pnl-report.component.html */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-pnl-report/charter-pnl-report.component.html"),
            styles: [__webpack_require__(/*! ./charter-pnl-report.component.scss */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-pnl-report/charter-pnl-report.component.scss")],
        }),
        __param(1, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_angular_material__WEBPACK_IMPORTED_MODULE_1__["MAT_DIALOG_DATA"])),
        __metadata("design:paramtypes", [_angular_material__WEBPACK_IMPORTED_MODULE_1__["MatDialogRef"], Object, _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_3__["CompanyManagerService"]])
    ], CharterPnlReportComponent);
    return CharterPnlReportComponent;
}());



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-report/charter-report.component.html":
/*!****************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-report/charter-report.component.html ***!
  \****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div fxLayoutAlign=\"space-between center\">\r\n    <h2>Charter Report</h2>\r\n    <button mat-button>\r\n        <mat-icon (click)=\"onCloseButtonClicked()\">close</mat-icon>\r\n    </button>\r\n</div>\r\n<div fxLayout=\"row wrap\"\r\n     fxLayoutAlign=\"space-between stretch\"\r\n     fxLayoutAlign.lt-md=\"space-around center\">\r\n    <mat-card class=\"database-selection\"\r\n              fxFlex=\"45\">\r\n        <mat-card-header>\r\n            <mat-card-title>\r\n                <h2>Database Selection</h2>\r\n            </mat-card-title>\r\n        </mat-card-header>\r\n        <mat-card-content fxLayoutGap=\"5px\">\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"left start\"\r\n                 fxLayoutGap=\"5%\">\r\n                <atlas-dropdown-select fxFlex='30%'\r\n                                       label=\"Snapshot\"\r\n                                       [fieldControl]=\"charterSnapshotCtrl\"\r\n                                       isEditable=true\r\n                                       [options]=\"snapshotList\"\r\n                                       displayProperty=\"freezeDate\"\r\n                                       [selectProperties]=\"['freezeDate']\">\r\n                </atlas-dropdown-select>\r\n                <div fxLayout=\"row\"\r\n                     class=\"include-closed-trades\">\r\n                    <span fxFlex='50%'></span>\r\n                    <span fxLayoutAlign=\"right center\">\r\n                        <mat-checkbox [formControl]=\"includeClosedTradesCtrl\"\r\n                                      (change)=\"onIncludeClosedTradesChanged($event)\">Include closed trades\r\n                        </mat-checkbox>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </mat-card-content>\r\n    </mat-card>\r\n</div>\r\n<div fxLayout=\"row\"\r\n     fxLayoutAlign=\"end center\">\r\n    <button mat-raised-button\r\n            class=\"generate-report-button\"\r\n            (click)=\"onGenerateReportButtonClicked()\">GENERATE REPORT</button>\r\n</div>\r\n<div class=\"report-container\">\r\n    <atlas-ssrsreport-viewer [reportServer]=\"reportServerUrl\"\r\n                             [reportUrl]=\"reportPath\"\r\n                             [parameters]=\"parameters\"\r\n                             #ssrsReportViewer></atlas-ssrsreport-viewer>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-report/charter-report.component.scss":
/*!****************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-report/charter-report.component.scss ***!
  \****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".report-container {\n  height: 50%; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-report/charter-report.component.ts":
/*!**************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-report/charter-report.component.ts ***!
  \**************************************************************************************************************************************/
/*! exports provided: CharterReportComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CharterReportComponent", function() { return CharterReportComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../environments/environment */ "./Client/environments/environment.ts");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_ssrs_report_viewer_ssrsreport_viewer_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/components/ssrs-report-viewer/ssrsreport-viewer.component */ "./Client/app/shared/components/ssrs-report-viewer/ssrsreport-viewer.component.ts");
/* harmony import */ var _shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/directives/autocomplete-dropdown.directive */ "./Client/app/shared/directives/autocomplete-dropdown.directive.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_models_freeze_display_view__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../shared/models/freeze-display-view */ "./Client/app/shared/models/freeze-display-view.ts");
/* harmony import */ var _shared_services_http_services_freeze_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../shared/services/http-services/freeze.service */ "./Client/app/shared/services/http-services/freeze.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};













var CharterReportComponent = /** @class */ (function () {
    function CharterReportComponent(thisDialogRef, freezeService, formBuilder, data, companyManager) {
        this.thisDialogRef = thisDialogRef;
        this.freezeService = freezeService;
        this.formBuilder = formBuilder;
        this.data = data;
        this.companyManager = companyManager;
        this.charterSnapshotCtrl = new _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormControl"]();
        this.snapshotList = [];
        this.includeClosedTradesCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_9__["AtlasFormControl"]('includeClosedTradesCtrl');
        this.currentSnapshot = new _shared_models_freeze_display_view__WEBPACK_IMPORTED_MODULE_10__["FreezeDisplayView"](-1, 'CURRENT');
        this.closedTrades = false;
        this.parameters = [];
        this.reportServerUrl = _environments_environment__WEBPACK_IMPORTED_MODULE_5__["environment"].reportServerLink;
        this.reportPath = 'LDC Atlas/Charter/Charter';
        this.destroy$ = new rxjs__WEBPACK_IMPORTED_MODULE_3__["Subject"]();
        this.dialogData = data;
    }
    CharterReportComponent.prototype.ngOnInit = function () {
        this.charterId = Number(this.dialogData.charterId);
        this.company = this.companyManager.getCurrentCompanyId();
        this.loadSnapshots();
    };
    CharterReportComponent.prototype.initializeForm = function () {
        this.charterReportFormGroup = this.formBuilder.group({
            charterSnapshotCtrl: this.charterSnapshotCtrl,
            includeClosedTradesCtrl: this.includeClosedTradesCtrl,
        });
        this.setValidators();
        return this.charterReportFormGroup;
    };
    CharterReportComponent.prototype.setValidators = function () {
        this.charterSnapshotCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
            Object(_shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_8__["inDropdownListValidator"])(this.snapshotList, Object(_shared_services_util_service__WEBPACK_IMPORTED_MODULE_12__["nameof"])('dataVersionId')),
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required,
        ]));
    };
    CharterReportComponent.prototype.loadSnapshots = function () {
        var _this = this;
        this.freezeService.getFreezeList().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(function (data) {
            return data.value.map(function (freeze) {
                return new _shared_models_freeze_display_view__WEBPACK_IMPORTED_MODULE_10__["FreezeDisplayView"](freeze.dataVersionId, _this.freezeService.toFormattedDate(freeze.dataVersionTypeId, freeze.freezeDate));
            });
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["takeUntil"])(this.destroy$)).subscribe(function (snapshots) {
            _this.snapshotList = snapshots;
            _this.snapshotList.unshift(_this.currentSnapshot);
            if (snapshots.length > 0) {
                _this.charterSnapshotCtrl.setValue(snapshots[0]);
            }
            _this.initializeForm();
        });
    };
    CharterReportComponent.prototype.onIncludeClosedTradesChanged = function (event) {
        this.closedTrades = event.checked;
    };
    CharterReportComponent.prototype.onCloseButtonClicked = function () {
        this.thisDialogRef.close(true);
    };
    CharterReportComponent.prototype.onGenerateReportButtonClicked = function () {
        var snapshotId;
        var snapShotvalue = this.charterSnapshotCtrl.value;
        (snapShotvalue) ? snapshotId = snapShotvalue.dataVersionId : snapshotId = null;
        var iIncludeClosedTrades = this.closedTrades ? 1 : 0;
        this.parameters = [
            { name: 'Company', value: this.company },
            { name: 'CharterId', value: this.charterId },
            { name: 'iIncludeClosedTrades', value: iIncludeClosedTrades },
        ];
        if (snapshotId !== -1) {
            this.parameters.push({ name: 'Database', value: snapshotId });
        }
        this.ssrsReportViewer.generateReport(this.reportServerUrl, this.reportPath, this.parameters);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('ssrsReportViewer'),
        __metadata("design:type", _shared_components_ssrs_report_viewer_ssrsreport_viewer_component__WEBPACK_IMPORTED_MODULE_7__["SSRSReportViewerComponent"])
    ], CharterReportComponent.prototype, "ssrsReportViewer", void 0);
    CharterReportComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-charter-report',
            template: __webpack_require__(/*! ./charter-report.component.html */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-report/charter-report.component.html"),
            styles: [__webpack_require__(/*! ./charter-report.component.scss */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-report/charter-report.component.scss")],
        }),
        __param(3, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_angular_material__WEBPACK_IMPORTED_MODULE_2__["MAT_DIALOG_DATA"])),
        __metadata("design:paramtypes", [_angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialogRef"],
            _shared_services_http_services_freeze_service__WEBPACK_IMPORTED_MODULE_11__["FreezeService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"], Object, _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_6__["CompanyManagerService"]])
    ], CharterReportComponent);
    return CharterReportComponent;
}());



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/deassign-section-dialog/deassign-section-dialog.component.html":
/*!**********************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/deassign-section-dialog/deassign-section-dialog.component.html ***!
  \**********************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"section-light-box lightbox-width\">\r\n    <h1>De-Assignment</h1>\r\n    <div *ngIf=\"isTopCardVisible\">\r\n        <div fxLayout=\"row\"\r\n             fxLayoutGap=\"2%\"\r\n             fxLayoutAlign=\"start stretch\">\r\n            <div fxLayout=\"column\"\r\n                 fxLayoutAlign=\"center center\"\r\n                 fxFlex=\"4%\">\r\n                <mat-icon class=\"icon-padding title-icon\">warning</mat-icon>\r\n            </div>\r\n            <div fxLayout=\"column\"\r\n                 fxLayoutAlign=\"center start\"\r\n                 fxFlex=\"60%\">\r\n                <h2 class=\"no-margin warning-title\"> Some contracts can't be de-assigned </h2>\r\n            </div>\r\n        </div>\r\n        <div class=\"full-invoiced-contract-list\">\r\n            <p *ngFor=\"let assigned of fullyInvoiceContract\">\r\n                {{assigned.contractLabel}} : {{assigned.reasonForDeassignment}}\r\n            </p>\r\n        </div>\r\n        <mat-divider></mat-divider>\r\n    </div>\r\n\r\n    <div *ngIf=\"isBottomCardVisible\">\r\n        <p>\r\n            The following contracts will be de-assigned. Unselect the ones for which you want to keep traffic\r\n            details.\r\n        </p>\r\n        <mat-chip-list multiple>\r\n            <mat-chip *ngFor=\"let assigned of model.assignedSections\"\r\n                      [selected]=\"assigned.removeSectionTrafficInfo\"\r\n                      (click)=\"onSelectedContractClicked(assigned)\">\r\n                <mat-icon>{{ assigned.removeSectionTrafficInfo ? 'check_circle' : 'panorama_fish_eye'}}</mat-icon>\r\n                {{assigned.contractLabel}}\r\n            </mat-chip>\r\n        </mat-chip-list>\r\n    </div>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"space-between end\">\r\n        <button mat-button\r\n                (click)=\"onDiscardButtonClicked()\">discard</button>\r\n        <button mat-button\r\n                (click)=\"onDeassignButtonClicked()\"\r\n                *ngIf=\"isBottomCardVisible\">deassign contracts</button>\r\n    </div>\r\n</div>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/deassign-section-dialog/deassign-section-dialog.component.scss":
/*!**********************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/deassign-section-dialog/deassign-section-dialog.component.scss ***!
  \**********************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".lightbox-width {\n  width: 1000px; }\n\n.mat-divider {\n  margin: 8px 0; }\n\n.icon-padding {\n  background-color: #ec8d2d;\n  border-radius: 50%;\n  padding: 8px;\n  height: 24px;\n  width: 24px; }\n\n.icon-padding.mat-icon {\n    color: white; }\n\n.full-invoiced-contract-list {\n  margin: 8px 0; }\n\nh1 {\n  margin-top: 0; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/deassign-section-dialog/deassign-section-dialog.component.ts":
/*!********************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/deassign-section-dialog/deassign-section-dialog.component.ts ***!
  \********************************************************************************************************************************************************/
/*! exports provided: DeassignSectionDialogComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeassignSectionDialogComponent", function() { return DeassignSectionDialogComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/services/http-services/lock.service */ "./Client/app/shared/services/http-services/lock.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};









var DeassignSectionDialogComponent = /** @class */ (function () {
    function DeassignSectionDialogComponent(snackbarService, router, route, executionService, dialog, lockService, thisDialogRef, data) {
        this.snackbarService = snackbarService;
        this.router = router;
        this.route = route;
        this.executionService = executionService;
        this.dialog = dialog;
        this.lockService = lockService;
        this.thisDialogRef = thisDialogRef;
        this.data = data;
        this.isTopCardVisible = true;
        this.isBottomCardVisible = true;
        this.destroy$ = new rxjs__WEBPACK_IMPORTED_MODULE_3__["Subject"]();
        this.model = data.result;
        this.fullyInvoiceContract = data.fullyInvoiceContract;
    }
    DeassignSectionDialogComponent.prototype.ngOnInit = function () {
        this.fullyInvoiceContract.length > 0 ? this.isTopCardVisible = true : this.isTopCardVisible = false;
        this.model.assignedSections.length > 0 ? this.isBottomCardVisible = true : this.isBottomCardVisible = false;
        this.model.assignedSections.forEach(function (element) {
            element.removeSectionTrafficInfo = true;
        });
    };
    DeassignSectionDialogComponent.prototype.onSelectedContractClicked = function (section) {
        var sectionFiltered = this.model.assignedSections.find(function (sec) {
            return sec.sectionId === section.sectionId;
        });
        if (sectionFiltered) {
            this.model.assignedSections.find(function (sec) {
                return sec.sectionId === section.sectionId;
            }).removeSectionTrafficInfo = !section.removeSectionTrafficInfo;
        }
    };
    DeassignSectionDialogComponent.prototype.onDeassignButtonClicked = function () {
        var _this = this;
        var sectionList = this.model.assignedSections.map(function (section) { return Number(section.sectionId); });
        this.model.assignedSections.forEach(function (assignedSection) {
            var allocatedSection = _this.model.assignedSections.filter(function (sec) { return sec.allocatedTo === assignedSection.contractLabel; });
            _this.lockService.isLockedContract(assignedSection.sectionId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["takeUntil"])(_this.destroy$)).subscribe(function (lock) {
                if (lock.isLocked) {
                    _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_5__["ConfirmationDialogComponent"], {
                        data: {
                            title: 'Lock',
                            text: lock.message,
                            okButton: 'Got it',
                        },
                    });
                    sectionList = sectionList.filter(function (id) { return id !== assignedSection.sectionId; });
                    if (allocatedSection && allocatedSection.length > 0) {
                        sectionList = sectionList.filter(function (id) { return id !== allocatedSection[0].sectionId; });
                    }
                }
                else if (allocatedSection && allocatedSection.length > 0) {
                    _this.lockService.isLockedContract(allocatedSection[0].sectionId)
                        .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["takeUntil"])(_this.destroy$)).subscribe(function (lock) {
                        if (lock.isLocked) {
                            _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_5__["ConfirmationDialogComponent"], {
                                data: {
                                    title: 'Lock',
                                    text: lock.message,
                                    okButton: 'Got it',
                                },
                            });
                            sectionList = sectionList.filter(function (id) { return id !== allocatedSection[0].sectionId; });
                        }
                        else {
                            _this.removeSectionSubscription = _this.executionService
                                .removeSectionFromCharter(_this.model.charterId, [assignedSection.sectionId])
                                .subscribe(function () {
                                _this.executionService.updateCharter(_this.model, true)
                                    .subscribe(function () {
                                    _this.snackbarService.informationSnackBar('Section has been de-assigned.');
                                    _this.thisDialogRef.close(null);
                                });
                            });
                        }
                    });
                }
                else {
                    _this.removeSectionSubscription = _this.executionService
                        .removeSectionFromCharter(_this.model.charterId, [assignedSection.sectionId])
                        .subscribe(function () {
                        _this.executionService.updateCharter(_this.model, true)
                            .subscribe(function () {
                            _this.snackbarService.informationSnackBar('Section has been de-assigned.');
                            _this.thisDialogRef.close(null);
                        }, function (error) {
                            console.error(error);
                            _this.snackbarService.throwErrorSnackBar('Oops! An error ocurred');
                        });
                    }, function (error) {
                        console.error(error);
                        _this.snackbarService.throwErrorSnackBar('Oops! An error ocurred');
                        _this.thisDialogRef.close(null);
                    });
                }
            });
        });
    };
    DeassignSectionDialogComponent.prototype.onDiscardButtonClicked = function () {
        this.thisDialogRef.close(null);
    };
    DeassignSectionDialogComponent.prototype.ngOnDestroy = function () {
        if (this.removeSectionSubscription) {
            this.removeSectionSubscription.unsubscribe();
        }
        this.destroy$.next();
        this.destroy$.complete();
    };
    DeassignSectionDialogComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-deassign-section-dialog',
            template: __webpack_require__(/*! ./deassign-section-dialog.component.html */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/deassign-section-dialog/deassign-section-dialog.component.html"),
            styles: [__webpack_require__(/*! ./deassign-section-dialog.component.scss */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/deassign-section-dialog/deassign-section-dialog.component.scss")],
        }),
        __param(7, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_angular_material__WEBPACK_IMPORTED_MODULE_1__["MAT_DIALOG_DATA"])),
        __metadata("design:paramtypes", [_shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_8__["SnackbarService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_6__["ExecutionService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_1__["MatDialog"],
            _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_7__["LockService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_1__["MatDialogRef"], Object])
    ], DeassignSectionDialogComponent);
    return DeassignSectionDialogComponent;
}());



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/main-information-form-component/main-information-form-component.component.html":
/*!**************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/main-information-form-component/main-information-form-component.component.html ***!
  \**************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-header>\r\n        <mat-card-title>\r\n            <h2>Main Information</h2>\r\n        </mat-card-title>\r\n    </mat-card-header>\r\n    <mat-card-content fxLayout=\"column\"\r\n                      fxLayoutGap=\"15px\">\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"space-between start\"\r\n             fxLayoutGap=\"5%\">\r\n            <mat-form-field fxFlex=\"29%\">\r\n                <input matInput\r\n                       placeholder=\"Charter Reference\"\r\n                       [formControl]=\"charterRefCntrl\"\r\n                       class=\"charter-input-fields\"\r\n                       autocomplete=\"off\">\r\n                <mat-hint class=\"charter-required-fields\"\r\n                          *ngIf=isCreateOrEdit>Required*</mat-hint>\r\n                <mat-icon class=\"validIcon\"\r\n                          matSuffix\r\n                          *ngIf=\"charterRefCntrl.valid\">check_circle </mat-icon>\r\n                <mat-icon class=\"errorIcon\"\r\n                          matSuffix\r\n                          *ngIf=\"charterRefCntrl.hasError('required') && (charterRefCntrl.touched  || showErrorIcon)\">\r\n                    error\r\n                </mat-icon>\r\n                <mat-error *ngIf=\"charterRefCntrl.hasError('required')\">\r\n                    Required*\r\n                </mat-error>\r\n                <mat-error *ngIf=\"charterRefCntrl.hasError('pattern')\">\r\n                    No special character except \".\"\r\n                </mat-error>\r\n                <mat-error *ngIf=\"charterRefCntrl.hasError('maxlength')\">\r\n                    More than 15 char not allowed\r\n                </mat-error>\r\n            </mat-form-field>\r\n            <mat-form-field fxFlex=\"59%\">\r\n                <input matInput\r\n                       placeholder=\"Charter Description\"\r\n                       [formControl]=\"charterDescCntrl\"\r\n                       class=\"charter-input-fields\"\r\n                       autocomplete=\"off\">\r\n                <mat-icon class=\"validIcon\"\r\n                          matSuffix\r\n                          *ngIf=\"charterDescCntrl.valid && charterDescCntrl.value\">check_circle</mat-icon>\r\n                <mat-error *ngIf=\"charterDescCntrl.hasError('maxlength')\">\r\n                    More than 60 char not allowed\r\n                </mat-error>\r\n            </mat-form-field>\r\n\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"space-between start\"\r\n             fxLayoutGap=\"5%\">\r\n            <atlas-masterdata-user-preferences-input fxFlex=\"30%\"\r\n                                                     class=\"contextual-search-for-control\"\r\n                                                     isEditable=\"true\"\r\n                                                     [fieldControl]=\"charterMgrCntrl\"\r\n                                                     [options]=\"filteredCharterManagers\"\r\n                                                     label=\"Charter Manager\"\r\n                                                     displayProperty=\"displayName\"\r\n                                                     [selectProperties]=\"['userId','displayName']\"\r\n                                                     lightBoxTitle=\"Results for Manager\"\r\n                                                     gridId=\"charterManagerGrid\"\r\n                                                     [dataLoader]=\"charterManagerDataLoader\">\r\n            </atlas-masterdata-user-preferences-input>\r\n\r\n            <atlas-masterdata-user-preferences-input fxFlex=\"60%\"\r\n                                                     class=\"contextual-search-for-vessel\"\r\n                                                     isEditable=\"true\"\r\n                                                     [fieldControl]=\"charterVesselCtrl\"\r\n                                                     [options]=\"filteredVessels\"\r\n                                                     label=\"Vessel\"\r\n                                                     displayProperty=\"vesselName\"\r\n                                                     [selectProperties]=\"['vesselName','flag','built']\"\r\n                                                     lightBoxTitle=\"Results for Vessel\"\r\n                                                     gridId=\"vesselsGrid\">\r\n            </atlas-masterdata-user-preferences-input>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"start start\"\r\n             fxLayoutGap=\"5%\">\r\n            <atlas-masterdata-user-preferences-input fxFlex=\"30%\"\r\n                                                     class=\"contextual-search-for-control\"\r\n                                                     isEditable=\"true\"\r\n                                                     [fieldControl]=\"charterTransportCntrl\"\r\n                                                     [options]=\"filteredTransports\"\r\n                                                     label=\"KPI Transport Type\"\r\n                                                     displayProperty=\"transportTypeCode\"\r\n                                                     [selectProperties]=\"['transportTypeCode']\"\r\n                                                     lightBoxTitle=\"Results for Transport\"\r\n                                                     gridId=\"transportTypeGrid\">\r\n            </atlas-masterdata-user-preferences-input>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/main-information-form-component/main-information-form-component.component.scss":
/*!**************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/main-information-form-component/main-information-form-component.component.scss ***!
  \**************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".contextual-search-for-vessel {\n  width: 70%; }\n\n.contextual-search-for-control {\n  width: 30%; }\n\n.charter-required-fields {\n  color: #00a9c6; }\n\n.charter-input-fields {\n  width: 80%; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/main-information-form-component/main-information-form-component.component.ts":
/*!************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/main-information-form-component/main-information-form-component.component.ts ***!
  \************************************************************************************************************************************************************************/
/*! exports provided: MainInformationFormComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MainInformationFormComponent", function() { return MainInformationFormComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/directives/autocomplete-dropdown.directive */ "./Client/app/shared/directives/autocomplete-dropdown.directive.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _shared_services_execution_charter_manager_data_loader__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./../../../../../shared/services/execution/charter-manager-data-loader */ "./Client/app/shared/services/execution/charter-manager-data-loader.ts");
/* harmony import */ var _shared_services_http_services_user_identity_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./../../../../../shared/services/http-services/user-identity.service */ "./Client/app/shared/services/http-services/user-identity.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./../../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};












var MainInformationFormComponent = /** @class */ (function (_super) {
    __extends(MainInformationFormComponent, _super);
    function MainInformationFormComponent(route, formBuilder, utilService, executionService, formConfigurationProvider, snackbarService, userIdentityService, charterManagerDataLoader) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.utilService = utilService;
        _this.executionService = executionService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.snackbarService = snackbarService;
        _this.userIdentityService = userIdentityService;
        _this.charterManagerDataLoader = charterManagerDataLoader;
        _this.isCreateOrEdit = true;
        _this.isFormControlRequired = new Map();
        _this.charterVesselCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__["AtlasFormControl"]('charterVesselCtrl');
        _this.charterRefCntrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__["AtlasFormControl"]('charterRefCntrl');
        _this.charterDescCntrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__["AtlasFormControl"]('charterDescCntrl');
        _this.charterMgrCntrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__["AtlasFormControl"]('charterMgrCntrl');
        _this.charterTransportCntrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__["AtlasFormControl"]('charterTransportCntrl');
        return _this;
    }
    MainInformationFormComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.masterdata = this.route.snapshot.data.masterdata;
        this.charterReference = this.route.snapshot.paramMap.get('ref');
        this.filteredVessels = this.masterdata.vessels;
        this.charterVesselCtrl.valueChanges.subscribe(function (input) {
            _this.filteredVessels =
                _this.utilService.filterListforAutocomplete(input, _this.masterdata.vessels, ['vesselName', 'flag', 'built']);
        });
        this.filteredTransports = this.masterdata.transportTypes;
        this.charterTransportCntrl.valueChanges.subscribe(function (input) {
            _this.filteredTransports =
                _this.utilService.filterListforAutocomplete(input, _this.masterdata.transportTypes, ['transportTypeCode']);
        });
        this.charterManagerDataLoader.getData().subscribe(function (charterManager) {
            _this.filteredCharterManagers = charterManager;
            if (_this.isCreateOrEdit) {
                _this.setValidatorOnCharterManager();
            }
            if (_this.charterManagerId) {
                _this.charterManagerControl = _this.filteredCharterManagers.find(function (charterManagers) {
                    return charterManagers.userId === _this.charterManagerId;
                });
                _this.charterMgrCntrl.patchValue(_this.charterManagerControl);
            }
            _this.charterMgrCntrl.valueChanges.subscribe(function (input) {
                _this.filteredCharterManagers = _this.utilService.filterListforAutocomplete(input, charterManager, ['userId', 'displayName']);
            });
        });
        if (this.isCreateOrEdit) {
            this.enableControl();
            this.setValidators();
            this.setCharterReference();
        }
        else {
            this.disableControl();
        }
    };
    MainInformationFormComponent.prototype.disableControl = function () {
        this.charterVesselCtrl.disable();
        this.charterRefCntrl.disable();
        this.charterDescCntrl.disable();
        this.charterMgrCntrl.disable();
        this.charterTransportCntrl.disable();
    };
    MainInformationFormComponent.prototype.enableControl = function () {
        this.charterVesselCtrl.enable();
        this.charterRefCntrl.enable();
        this.charterDescCntrl.enable();
        this.charterMgrCntrl.enable();
        this.charterTransportCntrl.enable();
    };
    MainInformationFormComponent.prototype.clearValueOfControl = function () {
        this.charterVesselCtrl.patchValue('');
        this.charterRefCntrl.patchValue('');
        this.charterDescCntrl.patchValue('');
        this.charterMgrCntrl.patchValue('');
        this.charterTransportCntrl.patchValue('');
    };
    MainInformationFormComponent.prototype.initForm = function (entity, isEdit) {
        if (isEdit === void 0) { isEdit = false; }
        this.model = entity;
        this.assignValues(entity, isEdit);
        this.charterVesselCtrl.patchValue(this.vesselControl);
        this.charterRefCntrl.patchValue(this.model.charterCode);
        this.charterDescCntrl.patchValue(this.model.description);
        this.charterMgrCntrl.patchValue(this.charterManagerControl ? this.charterManagerControl : '');
        this.charterTransportCntrl.patchValue(this.transportControl);
    };
    MainInformationFormComponent.prototype.assignValues = function (entity, isEdit) {
        if (isEdit === void 0) { isEdit = false; }
        var charter = entity;
        this.vesselControl = this.filteredVessels.find(function (vessel) { return vessel.vesselName === charter.vesselCode; });
        this.charterManagerControl = this.filteredCharterManagers ?
            this.filteredCharterManagers.find(function (charterManager) { return charterManager.userId === charter.charterManagerId; }) : null;
        this.transportControl = this.filteredTransports.find(function (transport) { return transport.transportTypeCode === charter.transportTypeCode; });
        if (this.filteredCharterManagers) {
            this.charterManagerControl = this.filteredCharterManagers.find(function (charterManager) {
                return charterManager.userId === charter.charterManagerId;
            });
        }
        else {
            this.charterManagerId = charter.charterManagerId;
        }
    };
    MainInformationFormComponent.prototype.populateEntity = function (entity) {
        var charter = entity;
        charter.vesselCode = this.charterVesselCtrl.value.vesselName;
        charter.vesselId = this.charterVesselCtrl.value.vesselId;
        charter.charterCode = this.charterRefCntrl.value;
        var charterManager = this.charterMgrCntrl.value;
        if (charterManager && charterManager.userId) {
            charter.charterManagerId = charterManager.userId;
        }
        charter.description = this.charterDescCntrl.value;
        var transport = this.charterTransportCntrl.value;
        charter.transportTypeCode = transport ? transport.transportTypeCode : '';
        return charter;
    };
    MainInformationFormComponent.prototype.setValidatorOnCharterManager = function () {
        this.charterMgrCntrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
            Object(_shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_4__["inDropdownListValidator"])(this.filteredCharterManagers, Object(_shared_services_util_service__WEBPACK_IMPORTED_MODULE_8__["nameof"])('displayName')),
        ]));
    };
    MainInformationFormComponent.prototype.setValidators = function () {
        this.charterVesselCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required,
            Object(_shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_4__["inDropdownListValidator"])(this.masterdata.vessels, Object(_shared_services_util_service__WEBPACK_IMPORTED_MODULE_8__["nameof"])('vesselName')),
        ]));
        this.charterDescCntrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].maxLength(60));
        this.charterTransportCntrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required,
            Object(_shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_4__["inDropdownListValidator"])(this.masterdata.transportTypes, Object(_shared_services_util_service__WEBPACK_IMPORTED_MODULE_8__["nameof"])('transportTypeCode')),
        ]));
        this.charterRefCntrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required,
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].maxLength(15),
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].pattern('^[a-zA-Z0-9.]*'),
        ]));
        this.isFormControlRequired['charterVesselCtrl'] = this.utilService.isRequired(this.charterVesselCtrl);
        this.isFormControlRequired['charterTransportCntrl'] = this.utilService.isRequired(this.charterTransportCntrl);
        this.isFormControlRequired['charterRefCntrl'] = this.utilService.isRequired(this.charterRefCntrl);
        this.formGroup.updateValueAndValidity();
    };
    MainInformationFormComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            charterVesselCtrl: this.charterVesselCtrl,
            charterRefCntrl: this.charterRefCntrl,
            charterDescCntrl: this.charterDescCntrl,
            charterMgrCntrl: this.charterMgrCntrl,
            charterTransportCntrl: this.charterTransportCntrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    MainInformationFormComponent.prototype.setCharterReference = function () {
        if (this.charterReference != null) {
            this.charterRefCntrl.patchValue(this.charterReference);
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Boolean)
    ], MainInformationFormComponent.prototype, "isCreateOrEdit", void 0);
    MainInformationFormComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-main-information-form-component',
            template: __webpack_require__(/*! ./main-information-form-component.component.html */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/main-information-form-component/main-information-form-component.component.html"),
            styles: [__webpack_require__(/*! ./main-information-form-component.component.scss */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/main-information-form-component/main-information-form-component.component.scss")],
            providers: [_shared_services_execution_charter_manager_data_loader__WEBPACK_IMPORTED_MODULE_9__["CharterManagerDataLoader"]],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_8__["UtilService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_7__["ExecutionService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__["FormConfigurationProviderService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_11__["SnackbarService"],
            _shared_services_http_services_user_identity_service__WEBPACK_IMPORTED_MODULE_10__["UserIdentityService"],
            _shared_services_execution_charter_manager_data_loader__WEBPACK_IMPORTED_MODULE_9__["CharterManagerDataLoader"]])
    ], MainInformationFormComponent);
    return MainInformationFormComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/memo-form-component/memo-form-component.component.html":
/*!**************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/memo-form-component/memo-form-component.component.html ***!
  \**************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-header>\r\n        <mat-card-title>\r\n            <h2>Internal Memorandum</h2>\r\n        </mat-card-title>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n        <mat-form-field fxFlex=\"100%\">\r\n            <textarea matInput\r\n                      rows=\"5\"\r\n                      maxlength=\"4000\"\r\n                      [formControl]=\"charterInternalMemorandumCntrl\"\r\n                      class=\"charter-input-fields\"></textarea>\r\n        </mat-form-field>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/memo-form-component/memo-form-component.component.scss":
/*!**************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/memo-form-component/memo-form-component.component.scss ***!
  \**************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/memo-form-component/memo-form-component.component.ts":
/*!************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/memo-form-component/memo-form-component.component.ts ***!
  \************************************************************************************************************************************************/
/*! exports provided: MemoFormComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MemoFormComponent", function() { return MemoFormComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var MemoFormComponent = /** @class */ (function (_super) {
    __extends(MemoFormComponent, _super);
    function MemoFormComponent(formbuilder, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formbuilder = formbuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.isCreateOrEdit = true;
        _this.charterInternalMemorandumCntrl = new _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormControl"]('');
        return _this;
    }
    MemoFormComponent.prototype.ngOnInit = function () {
        if (this.isCreateOrEdit) {
            this.enableControl();
        }
        else {
            this.disablControl();
        }
    };
    MemoFormComponent.prototype.clearValueOfControl = function () {
        this.charterInternalMemorandumCntrl.patchValue('');
    };
    MemoFormComponent.prototype.enableControl = function () {
        this.charterInternalMemorandumCntrl.enable();
    };
    MemoFormComponent.prototype.disablControl = function () {
        this.charterInternalMemorandumCntrl.disable();
    };
    MemoFormComponent.prototype.initForm = function (entity, isEdit) {
        if (isEdit === void 0) { isEdit = false; }
        var model = entity;
        this.charterInternalMemorandumCntrl.patchValue(model ? model.memo : '');
    };
    MemoFormComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formbuilder.group({
            charterInternalMemorandumCntrl: this.charterInternalMemorandumCntrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    MemoFormComponent.prototype.populateEntity = function (entity) {
        var section = entity;
        section.memo = this.charterInternalMemorandumCntrl.value;
        return section;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Boolean)
    ], MemoFormComponent.prototype, "isCreateOrEdit", void 0);
    MemoFormComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-memo-form-component',
            template: __webpack_require__(/*! ./memo-form-component.component.html */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/memo-form-component/memo-form-component.component.html"),
            styles: [__webpack_require__(/*! ./memo-form-component.component.scss */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/memo-form-component/memo-form-component.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_3__["FormConfigurationProviderService"]])
    ], MemoFormComponent);
    return MemoFormComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/reassign-contract-ag-grid/reassign-contract-ag-grid.component.html":
/*!**************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/reassign-contract-ag-grid/reassign-contract-ag-grid.component.html ***!
  \**************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div fxLayout=\"row\">\r\n    <div fxLayout=\"row\"\r\n         fxFlex=\"50%\">\r\n        <atlas-masterdata-user-preferences-input tabindex=\"1\"\r\n                                                 class=\"contextual-search-for-control\"\r\n                                                 isEditable=\"true\"\r\n                                                 [fieldControl]=\"charterCtrl\"\r\n                                                 label=\"New Charter\"\r\n                                                 [options]=\"filteredCharters\"\r\n                                                 displayProperty=\"charterCode\"\r\n                                                 [selectProperties]=\"['charterCode','description']\"\r\n                                                 lightBoxTitle=\"Results for charters\"\r\n                                                 gridId=\"charterGrid\"\r\n                                                 [errorMap]=\"charterErrorMap\"\r\n                                                 (valueChange)='onCharterSelected($event)'\r\n                                                 (optionSelected)=\"onCharterSelected($event)\"\r\n                                                 isSearchBar=\"true\">\r\n        </atlas-masterdata-user-preferences-input>\r\n    </div>\r\n\r\n</div>\r\n<div>\r\n    <mat-card>\r\n        <mat-card-content>\r\n            <div ag-grid=\"reassignOptions\"\r\n                 class=\"ag-theme-material pointer-cursor\"\r\n                 style=\"width:80%; height: 80%;\">\r\n                <ag-grid-angular class=\"ag-theme-material\"\r\n                                 [rowData]=\"reassignContractGridRows\"\r\n                                 [columnDefs]=\"reassignGridCols\"\r\n                                 (gridReady)=\"onGridReady($event)\"\r\n                                 [pagination]=\"true\"\r\n                                 domLayout=autoHeight\r\n                                 [enableColResize]=\"false\"\r\n                                 [paginationPageSize]=\"10\"\r\n                                 (cellValueChanged)=\"onCellValueChanged($event)\"\r\n                                 rowSelection=\"multiple\"\r\n                                 [rowHeight]=32>\r\n                </ag-grid-angular>\r\n            </div>\r\n        </mat-card-content>\r\n    </mat-card>\r\n\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"space-between center\">\r\n        <div fxLayout=\"column\"\r\n             fxLayoutAlign=\"start start\">\r\n            <button mat-button\r\n                    type=\"button\"\r\n                    (click)=\"onDiscardButtonClick()\">\r\n                DISCARD\r\n            </button>\r\n        </div>\r\n        <div fxLayout=\"column\"\r\n             fxLayoutAlign=\"start end\">\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"end start\">\r\n                <button mat-raised-button\r\n                        type=\"button\"\r\n                        (click)=\"onSideNavSaveButtonClick()\">\r\n                    SAVE\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/reassign-contract-ag-grid/reassign-contract-ag-grid.component.scss":
/*!**************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/reassign-contract-ag-grid/reassign-contract-ag-grid.component.scss ***!
  \**************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "::ng-deep .mat-form-field-suffix {\n  z-index: 0 !important; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/reassign-contract-ag-grid/reassign-contract-ag-grid.component.ts":
/*!************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/reassign-contract-ag-grid/reassign-contract-ag-grid.component.ts ***!
  \************************************************************************************************************************************************************/
/*! exports provided: ReassignContractAgGridComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReassignContractAgGridComponent", function() { return ReassignContractAgGridComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/directives/autocomplete-dropdown.directive */ "./Client/app/shared/directives/autocomplete-dropdown.directive.ts");
/* harmony import */ var _shared_services_execution_charter_data_loader__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/services/execution/charter-data-loader */ "./Client/app/shared/services/execution/charter-data-loader.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../shared/services/http-services/lock.service */ "./Client/app/shared/services/http-services/lock.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _reassign_section_dialog_reassign_section_dialog_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../reassign-section-dialog/reassign-section-dialog.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/reassign-section-dialog/reassign-section-dialog.component.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../shared/enums/contract-type.enum */ "./Client/app/shared/enums/contract-type.enum.ts");
/* harmony import */ var _shared_enums_invoicing_status_enum__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../shared/enums/invoicing-status.enum */ "./Client/app/shared/enums/invoicing-status.enum.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
















var ReassignContractAgGridComponent = /** @class */ (function (_super) {
    __extends(ReassignContractAgGridComponent, _super);
    function ReassignContractAgGridComponent(utilService, snackbarService, executionService, lockService, dialog, formConfigurationProvider, charterDataLoader) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.utilService = utilService;
        _this.snackbarService = snackbarService;
        _this.executionService = executionService;
        _this.lockService = lockService;
        _this.dialog = dialog;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.charterDataLoader = charterDataLoader;
        _this.charterCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_2__["AtlasFormControl"]('charter');
        _this.sideReassignValueNavOpened = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.tooltipRequiredMessage = 'The field should not be empty';
        _this.charterErrorMap = new Map()
            .set('required', 'Required*')
            .set('maxlength', 'More than 15 char(s) not allowed.')
            .set('inDropdownList', 'Invalid entry. Charter not in the list.');
        return _this;
    }
    ReassignContractAgGridComponent.prototype.ngOnInit = function () {
        this.initReassignCharterGridCols();
        this.populateCharterList(this.charterId);
    };
    ReassignContractAgGridComponent.prototype.onGridReady = function (params) {
        var _this = this;
        this.reassignOptions = params;
        this.reassignOptions.columnDefs = this.reassignGridCols;
        this.reassignOptions.columnApi.autoSizeAllColumns();
        window.onresize = function () {
            _this.reassignOptions.columnApi.autoSizeAllColumns();
        };
    };
    ReassignContractAgGridComponent.prototype.initReassignCharterGridCols = function () {
        this.reassignGridCols = [
            {
                headerName: 'Contract Ref',
                field: 'contractLabel',
                colId: 'contractLabel',
                minWidth: 200,
                maxWidth: 180,
            },
            {
                headerName: 'Intial Quantity',
                field: 'originalQuantity',
                colId: 'originalQuantity',
                suppressToolPanel: false,
                type: 'numericColumn',
            },
            {
                headerName: 'Quantity to reassign',
                field: 'reassignQuantity',
                colId: 'reassignQuantity',
                suppressToolPanel: true,
                type: 'numericColumn',
                editable: true,
                hide: true,
            },
        ];
    };
    ReassignContractAgGridComponent.prototype.onCellValueChanged = function (params) {
        if (params.value > params.data.quantity) {
            this.snackbarService.throwErrorSnackBar('Reassign Quantity cannot be more than Initial Quantity.');
        }
    };
    ReassignContractAgGridComponent.prototype.reassignCharterGridRows = function (charter) {
        if (charter.assignedSections) {
            this.reassignContractGridRows = charter.assignedSections;
            this.charter = charter;
            this.reassignOptions.api.setRowData(this.reassignContractGridRows);
        }
    };
    ReassignContractAgGridComponent.prototype.onDiscardButtonClick = function () {
        var _this = this;
        var confirmDiscardDialog = this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_5__["ConfirmationDialogComponent"], {
            data: {
                title: 'Discard Changes',
                text: 'You have some modification pending. Close and lose changes?',
                okButton: 'Ok',
                cancelButton: 'Cancel',
            },
        });
        confirmDiscardDialog.afterClosed().subscribe(function (answer) {
            if (answer) {
                _this.charterCtrl.patchValue('');
                _this.sideReassignValueNavOpened.emit(false);
            }
        });
    };
    ReassignContractAgGridComponent.prototype.onCharterSelected = function (charter) {
        this.charterCtrl.patchValue(charter);
        this.newCharterSelected = charter;
    };
    ReassignContractAgGridComponent.prototype.populateCharterList = function (charterId) {
        var _this = this;
        this.charterDataLoader.getData().subscribe(function (charters) {
            _this.filteredCharters = charters.filter(function (charter) { return charter.charterId !== Number(charterId); });
            _this.allCharters = _this.filteredCharters;
            _this.setValidators();
        });
        this.charterCtrl.valueChanges.subscribe(function (input) {
            _this.filteredCharters = _this.utilService.filterListforAutocomplete(input, _this.allCharters, ['charterCode']);
        });
    };
    ReassignContractAgGridComponent.prototype.setValidators = function () {
        this.charterCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required, _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].maxLength(15),
            Object(_shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_7__["inDropdownListValidator"])(this.filteredCharters, Object(_shared_services_util_service__WEBPACK_IMPORTED_MODULE_4__["nameof"])('charterCode'))
        ]));
    };
    ReassignContractAgGridComponent.prototype.getSelectedInvoicedRow = function () {
        var _this = this;
        var assignedSections;
        var allocatedSection;
        assignedSections = this.reassignContractGridRows;
        assignedSections.forEach(function (element) {
            if (element.contractType === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_14__["ContractTypes"].Sale && element.invoicingStatus === _shared_enums_invoicing_status_enum__WEBPACK_IMPORTED_MODULE_15__["InvoicingStatus"].Finalized) {
                element.reasonForReassignment = 'Sales contract is 100% invoiced and cannot be reassigned';
                element.isSaleFullyInvoiced = true;
            }
            else if (element.contractType === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_14__["ContractTypes"].Purchase && element.allocatedTo) {
                allocatedSection = _this.reassignContractGridRows.find(function (item) { return item.contractLabel === element.allocatedTo; });
                if (allocatedSection.invoicingStatus === _shared_enums_invoicing_status_enum__WEBPACK_IMPORTED_MODULE_15__["InvoicingStatus"].Finalized) {
                    element.reasonForReassignment =
                        'Purchase contract allocated to a Sales Contract which is 100% invoiced and cannot be reassigned';
                    element.isSaleFullyInvoiced = true;
                }
            }
        });
        this.sectionsAssigned = assignedSections.filter(function (section) {
            return section.isSaleFullyInvoiced === false;
        });
        this.fullyInvoiceContract = assignedSections.filter(function (section) {
            return section.isSaleFullyInvoiced === true;
        });
    };
    ReassignContractAgGridComponent.prototype.onSideNavSaveButtonClick = function () {
        var _this = this;
        if (this.charterCtrl.valid) {
            this.getSelectedInvoicedRow();
            var result_1 = this.sectionsAssigned;
            var reAssignSectionDialog = this.dialog.open(_reassign_section_dialog_reassign_section_dialog_component__WEBPACK_IMPORTED_MODULE_12__["ReassignSectionDialogComponent"], {
                data: { result: result_1, masterdata: this.masterdata, charter: this.charter, newCharterSelected: this.newCharterSelected, fullyInvoiceContract: this.fullyInvoiceContract },
            });
            reAssignSectionDialog.afterClosed().subscribe(function (charters) {
                if (_reassign_section_dialog_reassign_section_dialog_component__WEBPACK_IMPORTED_MODULE_12__["ReassignSectionDialogComponent"] && result_1[0].isnavopen) {
                    _this.sideReassignValueNavOpened.emit(true);
                }
            });
        }
        else {
            this.snackbarService.throwErrorSnackBar('Form is invalid. Please resolve the errors.');
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], ReassignContractAgGridComponent.prototype, "sideReassignValueNavOpened", void 0);
    ReassignContractAgGridComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-reassign-contract-ag-grid',
            template: __webpack_require__(/*! ./reassign-contract-ag-grid.component.html */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/reassign-contract-ag-grid/reassign-contract-ag-grid.component.html"),
            styles: [__webpack_require__(/*! ./reassign-contract-ag-grid.component.scss */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/reassign-contract-ag-grid/reassign-contract-ag-grid.component.scss")],
            providers: [_shared_services_execution_charter_data_loader__WEBPACK_IMPORTED_MODULE_8__["CharterDataLoader"]],
        }),
        __metadata("design:paramtypes", [_shared_services_util_service__WEBPACK_IMPORTED_MODULE_4__["UtilService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_11__["SnackbarService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_9__["ExecutionService"],
            _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_10__["LockService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatDialog"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_3__["FormConfigurationProviderService"],
            _shared_services_execution_charter_data_loader__WEBPACK_IMPORTED_MODULE_8__["CharterDataLoader"]])
    ], ReassignContractAgGridComponent);
    return ReassignContractAgGridComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_13__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/reassign-section-dialog/reassign-section-dialog.component.html":
/*!**********************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/reassign-section-dialog/reassign-section-dialog.component.html ***!
  \**********************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"section-light-box lightbox-width\">\r\n    <h1>Re-Assignment</h1>\r\n    <div *ngIf=\"isTopCardVisible\">\r\n        <div fxLayout=\"row\"\r\n             fxLayoutGap=\"2%\"\r\n             fxLayoutAlign=\"start stretch\">\r\n            <div fxLayout=\"column\"\r\n                 fxLayoutAlign=\"center center\"\r\n                 fxFlex=\"4%\">\r\n                <mat-icon class=\"icon-padding title-icon\">warning</mat-icon>\r\n            </div>\r\n            <div fxLayout=\"column\"\r\n                 fxLayoutAlign=\"center start\"\r\n                 fxFlex=\"60%\">\r\n                <h2 class=\"no-margin warning-title\"> Some contracts can't be re-assigned </h2>\r\n            </div>\r\n        </div>\r\n        <div class=\"full-invoiced-contract-list\">\r\n            <p *ngFor=\"let assigned of fullyInvoiceContract\">\r\n                {{assigned.contractLabel}} : {{assigned.reasonForReassignment}}\r\n            </p>\r\n        </div>\r\n        <mat-divider></mat-divider>\r\n    </div>\r\n\r\n    <div *ngIf=\"isBottomCardVisible\">\r\n        <p>\r\n            The following contracts will be re-assigned. Unselect the ones for which you want to keep traffic\r\n            details.\r\n        </p>\r\n        <mat-chip-list multiple>\r\n            <mat-chip *ngFor=\"let assigned of assignedSections\"\r\n                      [selected]=\"assigned.removeSectionTrafficInfo\"\r\n                      (click)=\"onSelectedContractClicked(assigned)\">\r\n                <mat-icon>{{ assigned.removeSectionTrafficInfo ? 'check_circle' : 'panorama_fish_eye'}}</mat-icon>\r\n                {{assigned.contractLabel}}\r\n            </mat-chip>\r\n        </mat-chip-list>\r\n    </div>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"space-between end\">\r\n        <button mat-button\r\n                (click)=\"onDiscardButtonClick()\">discard</button>\r\n        <button mat-button\r\n                (click)=\"onReassignButtonClicked()\"\r\n                *ngIf=\"isBottomCardVisible\">reassign contracts</button>\r\n    </div>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/reassign-section-dialog/reassign-section-dialog.component.scss":
/*!**********************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/reassign-section-dialog/reassign-section-dialog.component.scss ***!
  \**********************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".lightbox-width {\n  width: 1000px; }\n\n.mat-divider {\n  margin: 8px 0; }\n\n.icon-padding {\n  background-color: #ec8d2d;\n  border-radius: 50%;\n  padding: 8px;\n  height: 24px;\n  width: 24px; }\n\n.icon-padding.mat-icon {\n    color: white; }\n\n.full-invoiced-contract-list {\n  margin: 8px 0; }\n\nh1 {\n  margin-top: 0; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/reassign-section-dialog/reassign-section-dialog.component.ts":
/*!********************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/reassign-section-dialog/reassign-section-dialog.component.ts ***!
  \********************************************************************************************************************************************************/
/*! exports provided: ReassignSectionDialogComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReassignSectionDialogComponent", function() { return ReassignSectionDialogComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_services_http_services_trading_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/services/http-services/trading.service */ "./Client/app/shared/services/http-services/trading.service.ts");
/* harmony import */ var _shared_services_split_create_and_allocate_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/services/split-create-and-allocate.service */ "./Client/app/shared/services/split-create-and-allocate.service.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};









var ReassignSectionDialogComponent = /** @class */ (function () {
    function ReassignSectionDialogComponent(snackbarService, route, router, dialog, executionService, createSplitService, tradingService, thisDialogRef, data) {
        this.snackbarService = snackbarService;
        this.route = route;
        this.router = router;
        this.dialog = dialog;
        this.executionService = executionService;
        this.createSplitService = createSplitService;
        this.tradingService = tradingService;
        this.thisDialogRef = thisDialogRef;
        this.data = data;
        this.assignedSectionsSplit = [];
        this.assignedSectionsFullQuantity = [];
        this.isTopCardVisible = false;
        this.isBottomCardVisible = true;
        this.charterCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__["AtlasFormControl"]('charter');
        this.subscriptions = [];
        this.assignedContractLabels = [];
        this.assignedSections = data.result;
        this.charter = data.charter;
        this.charterId = data.newCharterSelected.charterId;
        this.newCharterSelected = data.newCharterSelected;
        this.fullyInvoiceContract = data.fullyInvoiceContract;
    }
    ReassignSectionDialogComponent.prototype.ngOnInit = function () {
        this.fullyInvoiceContract.length > 0 ? this.isTopCardVisible = true : this.isTopCardVisible = false;
        this.assignedSections.length > 0 ? this.isBottomCardVisible = true : this.isBottomCardVisible = false;
        this.assignedSections.forEach(function (element) {
            element.removeSectionTrafficInfo = true;
        });
    };
    ReassignSectionDialogComponent.prototype.onDiscardButtonClick = function () {
        var _this = this;
        var confirmDiscardDialog = this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_3__["ConfirmationDialogComponent"], {
            data: {
                title: 'Discard Changes',
                text: 'You have some modification pending. Close and lose changes?',
                okButton: 'Ok',
                cancelButton: 'Cancel',
            },
        });
        confirmDiscardDialog.afterClosed().subscribe(function (answer) {
            if (answer) {
                _this.thisDialogRef.close(null);
            }
        });
    };
    ReassignSectionDialogComponent.prototype.onSelectedContractClicked = function (section) {
        var sectionFiltered = this.assignedSections.find(function (sec) {
            return sec.sectionId === section.sectionId;
        });
        if (sectionFiltered) {
            this.assignedSections.find(function (sec) {
                return sec.sectionId === section.sectionId;
            }).removeSectionTrafficInfo = !section.removeSectionTrafficInfo;
        }
    };
    ReassignSectionDialogComponent.prototype.fullyOrPartiallyReassignSections = function () {
        var _this = this;
        if (this.assignedSectionsSplit.length > 0) {
            this.createSplitService.createSplitOfAssignedSections(this.assignedSectionsSplit, this.charterId).then(function (data) {
                _this.snackbarService.informationSnackBar('Splits have been created and reassigned to charter' + ' ' + _this.newCharterSelected.charterCode);
                _this.thisDialogRef.close(null);
            });
        }
        if (this.assignedSectionsFullQuantity.length > 0) {
            this.fullyReassignSections();
        }
    };
    ReassignSectionDialogComponent.prototype.fullyReassignSections = function () {
        var _this = this;
        if (this.assignedSectionsFullQuantity.length > 0) {
            this.charter.assignedSections = this.assignedSectionsFullQuantity;
            this.reAssignSectionSubscription = this.executionService
                .reAssignSectionToCharter(this.charter, this.newCharterSelected)
                .subscribe(function (data) {
                _this.getAssignedContractLabels();
                _this.thisDialogRef.close(null);
            });
        }
    };
    ReassignSectionDialogComponent.prototype.onReassignButtonClicked = function () {
        var _this = this;
        this.assignedSections[0].isnavopen = true;
        this.assignedSections.forEach(function (section) {
            if (section.reassignQuantity && section.reassignQuantity < section.quantity) {
                section.quantity = Number(section.reassignQuantity);
                _this.assignedSectionsSplit.push(section);
            }
            else if (!section.reassignQuantity || section.reassignQuantity == null || section.reassignQuantity == section.quantity) {
                _this.assignedContractLabels.push(section.contractLabel);
                _this.assignedSectionsFullQuantity.push(section);
            }
        });
        this.fullyReassignSections();
    };
    ReassignSectionDialogComponent.prototype.getAssignedContractLabels = function () {
        var name = '';
        this.assignedContractLabels.forEach(function (element) {
            name = name + element + ',';
        });
        this.snackbarService.informationSnackBar('Contracts' + ' ' + name + ' ' + 'have been reassigned to charter' + ' ' + this.newCharterSelected.charterCode);
    };
    ReassignSectionDialogComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-reassign-section-dialog',
            template: __webpack_require__(/*! ./reassign-section-dialog.component.html */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/reassign-section-dialog/reassign-section-dialog.component.html"),
            styles: [__webpack_require__(/*! ./reassign-section-dialog.component.scss */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/reassign-section-dialog/reassign-section-dialog.component.scss")]
        }),
        __param(8, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_angular_material__WEBPACK_IMPORTED_MODULE_1__["MAT_DIALOG_DATA"])),
        __metadata("design:paramtypes", [_shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_2__["SnackbarService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_8__["ActivatedRoute"],
            _angular_router__WEBPACK_IMPORTED_MODULE_8__["Router"],
            _angular_material__WEBPACK_IMPORTED_MODULE_1__["MatDialog"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_4__["ExecutionService"],
            _shared_services_split_create_and_allocate_service__WEBPACK_IMPORTED_MODULE_7__["SplitCreateAndAllocateService"],
            _shared_services_http_services_trading_service__WEBPACK_IMPORTED_MODULE_6__["TradingService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_1__["MatDialogRef"], Object])
    ], ReassignSectionDialogComponent);
    return ReassignSectionDialogComponent;
}());



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/shipment-form-component/shipment-form-component.component.html":
/*!**********************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/shipment-form-component/shipment-form-component.component.html ***!
  \**********************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-header>\r\n        <mat-card-title>\r\n            <h2>Shipment</h2>\r\n        </mat-card-title>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <atlas-masterdata-user-preferences-input class=\"contextual-search-for-control\"\r\n                                                     isEditable=\"true\"\r\n                                                     [fieldControl]=\"charterLoadLocationCntrl\"\r\n                                                     [options]=\"filteredLoadLocations\"\r\n                                                     label=\"Loading Location\"\r\n                                                     displayProperty=\"portCode\"\r\n                                                     [selectProperties]=\"['portCode','description','countryCode']\"\r\n                                                     lightBoxTitle=\"Results for Port\"\r\n                                                     gridId=\"portsGrid\"\r\n                                                     (valueChange)='LoadingValueChanged($event)'\r\n                                                     (optionSelected)=\"onLoadingPortSelected($event)\">\r\n            </atlas-masterdata-user-preferences-input>\r\n\r\n            <atlas-form-input fxFlex=\"30%\"\r\n                              [fieldControl]=\"charterLoadDescrCntrl\"\r\n                              [isEditable]=\"isInputField\"\r\n                              [label]=\"'Description'\">\r\n            </atlas-form-input>\r\n            <atlas-form-input fxFlex=\"30%\"\r\n                              [fieldControl]=\"charterLoadCntryCntrl\"\r\n                              [isEditable]=\"isInputField\"\r\n                              [label]=\"'Country'\">\r\n            </atlas-form-input>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n\r\n            <atlas-masterdata-user-preferences-input class=\"contextual-search-for-control\"\r\n                                                     isEditable=\"true\"\r\n                                                     [fieldControl]=\"charterDiscLocationCntrl\"\r\n                                                     [options]=\"filteredDiscLocations\"\r\n                                                     label=\"Discharge Location\"\r\n                                                     displayProperty=\"portCode\"\r\n                                                     [selectProperties]=\"['portCode','description','countryCode']\"\r\n                                                     lightBoxTitle=\"Results for Port\"\r\n                                                     gridId=\"portsGrid\"\r\n                                                     (valueChange)='DischargeValueChanged($event)'\r\n                                                     (optionSelected)=\"onDischargePortSelected($event)\">\r\n            </atlas-masterdata-user-preferences-input>\r\n            <atlas-form-input fxFlex=\"30%\"\r\n                              [fieldControl]=\"charterDiscDescrCntrl\"\r\n                              [isEditable]=\"isInputField\"\r\n                              [label]=\"'Description'\"\r\n                              class=\"charter-input-fields\">\r\n\r\n            </atlas-form-input>\r\n            <atlas-form-input fxFlex=\"30%\"\r\n                              [fieldControl]=\"charterDiscCntryCntrl\"\r\n                              [isEditable]=\"isInputField\"\r\n                              [label]=\"'Country'\"\r\n                              class=\"charter-input-fields\">\r\n\r\n            </atlas-form-input>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <mat-form-field fxFlex=\"30%\">\r\n                <input matInput\r\n                       [max]=\"maxDate\"\r\n                       placeholder=\"Charter BL Date\"\r\n                       autocomplete=\"off\"\r\n                       [formControl]=\"charterBLDateCntrl\"\r\n                       [matDatepicker]=\"charterDatePicker\"\r\n                       class=\"charter-input-fields\">\r\n                <mat-datepicker-toggle matSuffix\r\n                                       [for]=\"charterDatePicker\"></mat-datepicker-toggle>\r\n                <mat-datepicker #charterDatePicker></mat-datepicker>\r\n                <mat-icon matSuffix\r\n                          class=\"validIcon\"\r\n                          *ngIf=\"charterBLDateCntrl.valid && (charterBLDateCntrl.value!==null)\">check_circle</mat-icon>\r\n                <mat-error *ngIf=\"charterBLDateCntrl.hasError('isDateValid')\">\r\n                    Cannot be After Today\r\n                </mat-error>\r\n            </mat-form-field>\r\n            <mat-form-field fxFlex=\"30%\">\r\n                <input matInput\r\n                       placeholder=\"BL Reference\"\r\n                       [formControl]=\"charterBLRefnCntrl\"\r\n                       autocomplete=\"off\"\r\n                       class=\"charter-input-fields\">\r\n                <mat-icon class=\"validIcon\"\r\n                          matSuffix\r\n                          *ngIf=\"charterBLRefnCntrl.valid && (charterBLRefnCntrl.value!==null && charterBLRefnCntrl.value)\">\r\n                    check_circle</mat-icon>\r\n                <mat-error *ngIf=\"charterBLRefnCntrl.hasError('maxlength')\">\r\n                    More than 20 char not allowed\r\n                </mat-error>\r\n            </mat-form-field>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/shipment-form-component/shipment-form-component.component.scss":
/*!**********************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/shipment-form-component/shipment-form-component.component.scss ***!
  \**********************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".contextual-search-for-control {\n  width: 30%; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/shipment-form-component/shipment-form-component.component.ts":
/*!********************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/shipment-form-component/shipment-form-component.component.ts ***!
  \********************************************************************************************************************************************************/
/*! exports provided: ShipmentFormComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ShipmentFormComponent", function() { return ShipmentFormComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/directives/autocomplete-dropdown.directive */ "./Client/app/shared/directives/autocomplete-dropdown.directive.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/validators/date-validators.validator */ "./Client/app/shared/validators/date-validators.validator.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var ShipmentFormComponent = /** @class */ (function (_super) {
    __extends(ShipmentFormComponent, _super);
    function ShipmentFormComponent(formBuilder, utilService, route, companyManager, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.utilService = utilService;
        _this.route = route;
        _this.companyManager = companyManager;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.isCreateOrEdit = true;
        _this.isInputField = false;
        _this.charterLoadLocationCntrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('charterLoadLocationCntrl');
        _this.charterLoadDescrCntrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('charterLoadDescrCntrl');
        _this.charterLoadCntryCntrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('charterLoadCntryCntrl');
        _this.charterDiscLocationCntrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('charterDiscLocationCntrl');
        _this.charterDiscDescrCntrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('charterDiscDescrCntrl');
        _this.charterDiscCntryCntrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('charterDiscCntryCntrl');
        _this.charterBLDateCntrl = new _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormControl"]();
        _this.charterBLRefnCntrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('charterBLRefnCntrl');
        _this.maxDate = _this.companyManager.getCurrentCompanyDate().toDate();
        _this.isFormControlRequired = new Map();
        return _this;
    }
    ShipmentFormComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.masterdata = this.route.snapshot.data.masterdata;
        this.filteredLoadLocations = this.masterdata.ports;
        this.charterLoadLocationCntrl.valueChanges.subscribe(function (input) {
            _this.filteredLoadLocations =
                _this.utilService.filterListforAutocomplete(input, _this.masterdata.ports, ['portCode', 'description', 'countryCode']);
        });
        this.filteredDiscLocations = this.masterdata.ports;
        this.charterDiscLocationCntrl.valueChanges.subscribe(function (input) {
            _this.filteredDiscLocations =
                _this.utilService.filterListforAutocomplete(input, _this.masterdata.ports, ['portCode', 'description', 'countryCode']);
        });
        if (this.isCreateOrEdit) {
            this.enableControl();
            this.setValidators();
        }
        else {
            this.disableControl();
        }
    };
    ShipmentFormComponent.prototype.clearValueOfControl = function () {
        this.charterLoadLocationCntrl.patchValue('');
        this.charterLoadDescrCntrl.patchValue('');
        this.charterLoadCntryCntrl.patchValue('');
        this.charterDiscLocationCntrl.patchValue('');
        this.charterDiscDescrCntrl.patchValue('');
        this.charterDiscCntryCntrl.patchValue('');
        this.charterBLDateCntrl.patchValue('');
        this.charterBLRefnCntrl.patchValue('');
    };
    ShipmentFormComponent.prototype.enableControl = function () {
        this.charterLoadLocationCntrl.enable();
        this.charterLoadDescrCntrl.enable();
        this.charterLoadCntryCntrl.enable();
        this.charterDiscLocationCntrl.enable();
        this.charterDiscDescrCntrl.enable();
        this.charterDiscCntryCntrl.enable();
        this.charterBLDateCntrl.enable();
        this.charterBLRefnCntrl.enable();
    };
    ShipmentFormComponent.prototype.disableControl = function () {
        this.charterLoadLocationCntrl.disable();
        this.charterLoadDescrCntrl.disable();
        this.charterLoadCntryCntrl.disable();
        this.charterDiscLocationCntrl.disable();
        this.charterDiscDescrCntrl.disable();
        this.charterDiscCntryCntrl.disable();
        this.charterBLDateCntrl.disable();
        this.charterBLRefnCntrl.disable();
    };
    ShipmentFormComponent.prototype.initForm = function (entity, isEdit) {
        if (isEdit === void 0) { isEdit = false; }
        var model = entity;
        this.assignValues(entity, isEdit);
        this.charterLoadLocationCntrl.patchValue(this.loadingControl ? this.loadingControl : '');
        this.loadLocationSelected(model.loadingLocationCode);
        this.charterDiscLocationCntrl.patchValue(this.dischargeControl ? this.dischargeControl : '');
        this.dischargeLocationsSelected(model.dischargeLocationCode);
        this.charterBLDateCntrl.patchValue(model.blDate);
        this.charterBLRefnCntrl.patchValue(model.blRef);
    };
    ShipmentFormComponent.prototype.assignValues = function (entity, isEdit) {
        if (isEdit === void 0) { isEdit = false; }
        var charter = entity;
        this.loadingControl = this.filteredLoadLocations
            .find(function (loadingLocationCode) { return loadingLocationCode.portCode === charter.loadingLocationCode; });
        this.dischargeControl = this.filteredDiscLocations
            .find((function (dischargeLocationCode) { return dischargeLocationCode.portCode === charter.dischargeLocationCode; }));
    };
    ShipmentFormComponent.prototype.dischargeLocationsSelected = function (dischargeLocationCode) {
        if (dischargeLocationCode !== null) {
            var selectedLoc = this.masterdata.ports.find(function (port) { return port.portCode.trim() === dischargeLocationCode.trim(); });
            if (selectedLoc) {
                this.charterDiscDescrCntrl.patchValue(selectedLoc.description);
                this.charterDiscCntryCntrl.patchValue(selectedLoc.countryCode);
            }
        }
    };
    ShipmentFormComponent.prototype.loadLocationSelected = function (loadingLocationCode) {
        if (loadingLocationCode !== null) {
            var selectedLoc = this.masterdata.ports.find(function (port) { return port.portCode.trim() === loadingLocationCode.trim(); });
            if (selectedLoc) {
                this.charterLoadCntryCntrl.patchValue(selectedLoc.countryCode);
                this.charterLoadDescrCntrl.patchValue(selectedLoc.description);
            }
        }
    };
    ShipmentFormComponent.prototype.setValidators = function () {
        this.charterLoadLocationCntrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
            Object(_shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_5__["inDropdownListValidator"])(this.masterdata.ports, Object(_shared_services_util_service__WEBPACK_IMPORTED_MODULE_8__["nameof"])('portCode')),
        ]));
        this.charterDiscLocationCntrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
            Object(_shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_5__["inDropdownListValidator"])(this.masterdata.ports, Object(_shared_services_util_service__WEBPACK_IMPORTED_MODULE_8__["nameof"])('portCode')),
        ]));
        this.charterBLDateCntrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([Object(_shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_9__["isBeforeDate"])(this.companyManager.getCurrentCompanyDate(), true),
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].maxLength(11)]));
        this.charterBLRefnCntrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].maxLength(20));
    };
    ShipmentFormComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            charterLoadLocationCntrl: this.charterLoadLocationCntrl,
            charterLoadDescrCntrl: this.charterLoadDescrCntrl,
            charterLoadCntryCntrl: this.charterLoadCntryCntrl,
            charterDiscLocationCntrl: this.charterDiscLocationCntrl,
            charterDiscDescrCntrl: this.charterDiscDescrCntrl,
            charterDiscCntryCntrl: this.charterDiscCntryCntrl,
            charterBLDateCntrl: this.charterBLDateCntrl,
            charterBLRefnCntrl: this.charterBLRefnCntrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    ShipmentFormComponent.prototype.populateEntity = function (entity) {
        var section = entity;
        if (this.charterLoadLocationCntrl.value && this.charterLoadLocationCntrl.value.portCode !== '') {
            section.loadingLocationCode = this.charterLoadLocationCntrl.value.portCode;
        }
        if (this.charterDiscLocationCntrl.value && this.charterDiscLocationCntrl.value.portCode !== '') {
            section.dischargeLocationCode = this.charterDiscLocationCntrl.value.portCode;
        }
        section.blDate = this.charterBLDateCntrl.value;
        section.blRef = this.charterBLRefnCntrl.value;
        return section;
    };
    ShipmentFormComponent.prototype.onDischargePortSelected = function (value) {
        var port = this.masterdata.ports.find(function (item) { return item.portCode === value.portCode; });
        if (port) {
            this.charterDiscDescrCntrl.patchValue(port.description);
            this.charterDiscCntryCntrl.patchValue(port.countryCode);
        }
    };
    ShipmentFormComponent.prototype.onLoadingPortSelected = function (value) {
        var port = this.masterdata.ports.find(function (item) { return item.portCode === value.portCode; });
        if (port) {
            this.charterLoadDescrCntrl.patchValue(port.description);
            this.charterLoadCntryCntrl.patchValue(port.countryCode);
        }
    };
    ShipmentFormComponent.prototype.LoadingValueChanged = function (value) {
        this.charterLoadDescrCntrl.patchValue(value.description);
        this.charterLoadCntryCntrl.patchValue(value.countryCode);
    };
    ShipmentFormComponent.prototype.DischargeValueChanged = function (value) {
        this.charterDiscDescrCntrl.patchValue(value.description);
        this.charterDiscCntryCntrl.patchValue(value.countryCode);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Boolean)
    ], ShipmentFormComponent.prototype, "isCreateOrEdit", void 0);
    ShipmentFormComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-shipment-form-component',
            template: __webpack_require__(/*! ./shipment-form-component.component.html */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/shipment-form-component/shipment-form-component.component.html"),
            styles: [__webpack_require__(/*! ./shipment-form-component.component.scss */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/shipment-form-component/shipment-form-component.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_8__["UtilService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_3__["CompanyManagerService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__["FormConfigurationProviderService"]])
    ], ShipmentFormComponent);
    return ShipmentFormComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/total-card-component/total-card-component.component.html":
/*!****************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/total-card-component/total-card-component.component.html ***!
  \****************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div fxLayout=\"column\"\r\n     class=\"total-card\">\r\n    <mat-card fxFlex=\"100%\"\r\n              class=\"charter-total\">\r\n        <mat-card-header>\r\n            <mat-card-title>\r\n                <h2>Total Card</h2>\r\n            </mat-card-title>\r\n        </mat-card-header>\r\n        <mat-card-content>\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"left start\"\r\n                 fxLayoutGap=\"1%\">\r\n                <div fxLayout=\"column\"\r\n                     fxLayoutAlign=\"right start\">\r\n                    <h4>Purchase Total: </h4>\r\n                </div>\r\n                <div fxLayout=\"column\"\r\n                     fxLayoutAlign=\"left start\">\r\n                    <h4>{{purchaseQuantity |number:'1.3-3'}}</h4>\r\n                </div>\r\n            </div>\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"left start\"\r\n                 fxLayoutGap=\"1%\">\r\n                <div fxLayout=\"column\"\r\n                     fxLayoutAlign=\"right start\">\r\n                    <h4>Sales Total: </h4>\r\n                </div>\r\n                <div fxLayout=\"column\"\r\n                     fxLayoutAlign=\"left start\">\r\n                    <h4>{{salesQuantity |number:'1.3-3'}}</h4>\r\n                </div>\r\n            </div>\r\n        </mat-card-content>\r\n    </mat-card>\r\n</div>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/total-card-component/total-card-component.component.scss":
/*!****************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/total-card-component/total-card-component.component.scss ***!
  \****************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".total-card-text-color {\n  color: black; }\n\n.total-card {\n  height: 100%; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/total-card-component/total-card-component.component.ts":
/*!**************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/total-card-component/total-card-component.component.ts ***!
  \**************************************************************************************************************************************************/
/*! exports provided: TotalCardComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TotalCardComponent", function() { return TotalCardComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/enums/contract-type.enum */ "./Client/app/shared/enums/contract-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var TotalCardComponent = /** @class */ (function (_super) {
    __extends(TotalCardComponent, _super);
    function TotalCardComponent(formbuilder, route, executionService, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formbuilder = formbuilder;
        _this.route = route;
        _this.executionService = executionService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.isCreate = true;
        _this.purchaseQuantity = 0;
        _this.salesQuantity = 0;
        return _this;
    }
    TotalCardComponent.prototype.ngOnInit = function () {
        this.charterId = this.route.snapshot.params['charterId'];
        this.masterdata = this.route.snapshot.data.masterdata;
    };
    TotalCardComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formbuilder.group({
            charterPurchaseTotal: this.charterPurchaseTotal,
            charterSalesTotal: this.charterSalesTotal,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    TotalCardComponent.prototype.assignValueToControl = function (weightUnitId) {
        var _this = this;
        var weightUnitForConversion = this.masterdata.weightUnits.find(function (weightUnit) { return weightUnit.weightUnitId === weightUnitId; });
        this.executionService.getSectionsAssignedToCharter(this.charterId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__["map"])(function (data) {
            _this.sectionsAssigned = data.value;
            _this.sectionsAssigned.forEach(function (element) {
                var weightCodeConversionForContract = _this.masterdata.weightUnits.find(function (weightUnit) {
                    return weightUnit.weightUnitId === element.weightUnitId;
                });
                if (element.contractType === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_5__["ContractTypes"].Purchase) {
                    _this.purchaseQuantity += (element.quantity * weightCodeConversionForContract.conversionFactor)
                        / weightUnitForConversion.conversionFactor;
                }
                else if (element.contractType === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_5__["ContractTypes"].Sale) {
                    _this.salesQuantity += (element.quantity * weightCodeConversionForContract.conversionFactor) /
                        weightUnitForConversion.conversionFactor;
                }
            });
        }))
            .subscribe();
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Boolean)
    ], TotalCardComponent.prototype, "isCreate", void 0);
    TotalCardComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-total-card-component',
            template: __webpack_require__(/*! ./total-card-component.component.html */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/total-card-component/total-card-component.component.html"),
            styles: [__webpack_require__(/*! ./total-card-component.component.scss */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/total-card-component/total-card-component.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"], _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_7__["ExecutionService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__["FormConfigurationProviderService"]])
    ], TotalCardComponent);
    return TotalCardComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/warning-component/warning-component.component.html":
/*!**********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/warning-component/warning-component.component.html ***!
  \**********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"charter-total mat-elevation-z1\">\r\n\t<mat-card-content>\r\n\t\t<div fxLayout=\"row\"\r\n\t\t     fxLayoutGap=\"2%\"\r\n\t\t     fxLayoutAlign=\"start stretch\">\r\n\t\t\t<div fxLayout=\"column\"\r\n\t\t\t     fxLayoutAlign=\"center center\"\r\n\t\t\t     fxFlex=\"4\">\r\n\t\t\t\t<mat-icon class=\"icon-padding title-icon\">{{icon}}</mat-icon>\r\n\t\t\t</div>\r\n\t\t\t<div fxLayout=\"column\"\r\n\t\t\t     fxLayoutAlign=\"center start\"\r\n\t\t\t     fxFlex=\"60\">\r\n\t\t\t\t<h2 class=\"no-margin warning-title\">{{title}} </h2>\r\n\t\t\t\t<p class=\"no-margin\">{{message}}</p>\r\n\t\t\t</div>\r\n\t\t\t<div *ngIf=\"isActionDisplayed\"\r\n\t\t\t     fxLayout=\"row\"\r\n\t\t\t     fxLayoutGap=\"2%\"\r\n\t\t\t     fxLayoutAlign=\"end end\"\r\n\t\t\t     fxFlex>\r\n\t\t\t\t<span class=\"fill-space\"></span>\r\n\t\t\t\t<button mat-button>Dismiss</button>\r\n\t\t\t\t<button mat-button>Action</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/warning-component/warning-component.component.scss":
/*!**********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/warning-component/warning-component.component.scss ***!
  \**********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".mat-card {\n  padding: 16px; }\n\n.warning-title {\n  font-size: 14px; }\n\n.icon-padding {\n  background-color: #ec8d2d;\n  border-radius: 50%;\n  padding: 8px;\n  height: 24px;\n  width: 24px; }\n\n.mat-icon {\n  color: white; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/warning-component/warning-component.component.ts":
/*!********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/components/warning-component/warning-component.component.ts ***!
  \********************************************************************************************************************************************/
/*! exports provided: WarningComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WarningComponent", function() { return WarningComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var WarningComponent = /** @class */ (function () {
    function WarningComponent() {
        this.isActionDisplayed = false;
    }
    WarningComponent.prototype.ngOnInit = function () {
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], WarningComponent.prototype, "icon", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], WarningComponent.prototype, "title", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], WarningComponent.prototype, "message", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Boolean)
    ], WarningComponent.prototype, "isActionDisplayed", void 0);
    WarningComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-warning-component',
            template: __webpack_require__(/*! ./warning-component.component.html */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/warning-component/warning-component.component.html"),
            styles: [__webpack_require__(/*! ./warning-component.component.scss */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/warning-component/warning-component.component.scss")],
        }),
        __metadata("design:paramtypes", [])
    ], WarningComponent);
    return WarningComponent;
}());



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/execution-charter-creation-page.component.html":
/*!*******************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/execution-charter-creation-page.component.html ***!
  \*******************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<form [formGroup]=\"charterForm\">\r\n    <div class=\"main-container\">\r\n        <main>\r\n            <div fxLayout=\"row\"\r\n                 fxLayout.md=\"column\"\r\n                 fxLayoutAlign=\"space-around start\"\r\n                 class='charter-creation-margin'>\r\n                <div fxLayout=\"column\"\r\n                     fxLayoutAlign=\"start left\"\r\n                     fxFlex=\"48\">\r\n                    <atlas-main-information-form-component #mainInfoComponent\r\n                                                           [isCreateOrEdit]=true>\r\n                    </atlas-main-information-form-component>\r\n                    <atlas-shipment-form-component #shipmentComponent\r\n                                                   [isCreateOrEdit]=true></atlas-shipment-form-component>\r\n                </div>\r\n                <div fxLayout=\"column\"\r\n                     fxLayoutAlign=\"start right\"\r\n                     fxFlex=\"49\">\r\n                    <atlas-additional-information-form-component #additionalInfoComponent\r\n                                                                 [isCreateOrEdit]=true>\r\n                    </atlas-additional-information-form-component>\r\n                    <atlas-memo-form-component #memoComponent\r\n                                               [isCreateOrEdit]=true></atlas-memo-form-component>\r\n                </div>\r\n            </div>\r\n        </main>\r\n        <atlas-floating-action-button [fabTitle]=\"fabTitle\"\r\n                                      [fabType]=\"fabType\"\r\n                                      [fabActions]=\"fabMenuActions\"\r\n                                      [isParentLoaded]=\"isLoaded\"\r\n                                      (fabActionClicked)=\"onFabActionClicked($event)\">\r\n        </atlas-floating-action-button>\r\n    </div>\r\n</form>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/execution-charter-creation-page.component.scss":
/*!*******************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/execution-charter-creation-page.component.scss ***!
  \*******************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".mat-table {\n  overflow: auto; }\n\n.mat-card:not([class*=mat-elevation-z]) {\n  box-shadow: none; }\n\n.summaryTable .mat-row:hover {\n  background: none; }\n\n.mat-card:not([class*=mat-elevation-z]) {\n  box-shadow: none; }\n\n.very-long-field {\n  width: 100%; }\n\n.droplist ::ng-deep .mat-form-field-underline {\n  display: none; }\n\n.droplist mat-select {\n  border-width: 1px;\n  border-style: solid;\n  -o-border-image: initial;\n     border-image: initial;\n  border-radius: 1px;\n  border-color: darkgray;\n  text-rendering: auto;\n  padding: 7px;\n  padding-left: 5px; }\n\n.no-placeholder-animation ::ng-deep md-input-container.md-input-focused {\n  display: none; }\n\n.mat-hint {\n  color: red; }\n\n.padding-medium {\n  padding: 20px 40px 20px 20px; }\n\n.wrap-content {\n  display: flex;\n  flex-wrap: wrap; }\n\n.wrapping-div {\n  flex: 1 1 auto; }\n\n.charter-creation-margin {\n  margin-left: 24px;\n  margin-right: 24px; }\n\n.circle-icon {\n  background: #53C234;\n  width: 32px;\n  color: white !important;\n  height: 32px;\n  border-radius: 50%;\n  text-align: center;\n  padding: 5px;\n  float: right;\n  position: relative;\n  top: -28px; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-creation-page/execution-charter-creation-page.component.ts":
/*!*****************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-creation-page/execution-charter-creation-page.component.ts ***!
  \*****************************************************************************************************************************/
/*! exports provided: ExecutionCharterCreationPageComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExecutionCharterCreationPageComponent", function() { return ExecutionCharterCreationPageComponent; });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_components_floating_action_button_floating_action_button_type_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/components/floating-action-button/floating-action-button-type.enum */ "./Client/app/shared/components/floating-action-button/floating-action-button-type.enum.ts");
/* harmony import */ var _shared_entities_assigned_section_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../shared/entities/assigned-section.entity */ "./Client/app/shared/entities/assigned-section.entity.ts");
/* harmony import */ var _shared_entities_charter_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/entities/charter.entity */ "./Client/app/shared/entities/charter.entity.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_title_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../shared/services/title.service */ "./Client/app/shared/services/title.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _components_additional_information_form_component_additional_information_form_component_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./components/additional-information-form-component/additional-information-form-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/additional-information-form-component/additional-information-form-component.component.ts");
/* harmony import */ var _components_main_information_form_component_main_information_form_component_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./components/main-information-form-component/main-information-form-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/main-information-form-component/main-information-form-component.component.ts");
/* harmony import */ var _components_memo_form_component_memo_form_component_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./components/memo-form-component/memo-form-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/memo-form-component/memo-form-component.component.ts");
/* harmony import */ var _components_shipment_form_component_shipment_form_component_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./components/shipment-form-component/shipment-form-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/shipment-form-component/shipment-form-component.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

















var ExecutionCharterCreationPageComponent = /** @class */ (function (_super) {
    __extends(ExecutionCharterCreationPageComponent, _super);
    function ExecutionCharterCreationPageComponent(route, executionService, cdr, formBuilder, snackbarService, router, location, formConfigurationProvider, utilService, titleService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.executionService = executionService;
        _this.cdr = cdr;
        _this.formBuilder = formBuilder;
        _this.snackbarService = snackbarService;
        _this.router = router;
        _this.location = location;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.utilService = utilService;
        _this.titleService = titleService;
        _this.savingInProgress = false;
        _this.isClearClicked = false;
        _this.isSave = false;
        _this.sectionModel = new _shared_entities_assigned_section_entity__WEBPACK_IMPORTED_MODULE_6__["AssignedSection"]();
        _this.formComponents = [];
        // -- FAB Management
        _this.fabMenuActions = [];
        _this.isLoaded = false;
        return _this;
    }
    ExecutionCharterCreationPageComponent.prototype.ngOnInit = function () {
        this.titleService.setTitle('Charter Creation');
        this.isClearClicked = false;
        this.charterForm = this.formBuilder.group({
            additionalInfoComponent: this.additionalInfoComponent.getFormGroup(),
            mainInfoComponent: this.mainInfoComponent.getFormGroup(),
            shipmentComponent: this.shipmentComponent.getFormGroup(),
            memoComponent: this.memoComponent.getFormGroup(),
        });
        this.formComponents.push(this.additionalInfoComponent, this.mainInfoComponent, this.memoComponent, this.shipmentComponent);
        this.cdr.detectChanges();
        this.charterId = Number(this.route.snapshot.paramMap.get('charterId'));
        if (this.charterId > 0) {
            this.getCharterDetails(this.charterId);
        }
        this.initFABActions();
        this.isLoaded = true;
    };
    ExecutionCharterCreationPageComponent.prototype.canDeactivate = function () {
        if (this.charterForm.dirty && this.isSave === false) {
            return window.confirm('Leave an unsave form? \nYour changes won\'t be applied!');
        }
        return true;
    };
    ExecutionCharterCreationPageComponent.prototype.unloadNotification = function ($event) {
        if (this.charterForm.dirty) {
            $event.returnValue = true;
        }
    };
    ExecutionCharterCreationPageComponent.prototype.getCharterDetails = function (charterId) {
        var _this = this;
        this.executionService.getCharterById(this.charterId)
            .subscribe(function (data) {
            _this.model = data;
            _this.model.charterCode = null;
            _this.formComponents.forEach(function (comp) {
                comp.initForm(_this.model);
            });
            _this.snackbarService.informationSnackBar('Charter details copied successfully.');
        });
    };
    ExecutionCharterCreationPageComponent.prototype.cancelForm = function () {
        this.isSave = true;
        this.location.back();
    };
    ExecutionCharterCreationPageComponent.prototype.submitForm = function () {
        var _this = this;
        this.isSave = true;
        this.utilService.updateFormGroupValidity(this.charterForm);
        if (this.charterForm.valid) {
            this.getCharterInfo();
            this.executionService.findChartersByReference(this.model.charterCode)
                .subscribe(function (data) {
                _this.charters = data.value.map(function (charter) {
                    return charter;
                });
                if (_this.charters == null || _this.charters.length === 0) {
                    _this.executionService.createCharter(_this.model)
                        .subscribe(function (data) {
                        _this.snackbarService.informationSnackBar('Charter has been saved successfully.');
                        _this.goToCharterView(data.charterId);
                    }, function (error) {
                        console.error(error);
                        _this.snackbarService.throwErrorSnackBar('Oops! An error ocurred');
                    }, function () {
                        _this.savingInProgress = false;
                    });
                }
                else {
                    _this.snackbarService.informationSnackBar('Charter Reference already exist.');
                    return;
                }
            });
        }
        else {
            this.additionalInfoComponent.showErrorIcon = true;
            this.mainInfoComponent.showErrorIcon = true;
            this.snackbarService.throwErrorSnackBar('Form is invalid. Please resolve the errors.');
        }
    };
    ExecutionCharterCreationPageComponent.prototype.goToUserList = function () {
        this.router.navigate(['/' + this.route.snapshot.paramMap.get('company') + '/execution/charter']);
    };
    ExecutionCharterCreationPageComponent.prototype.goToCharterView = function (charterId) {
        this.router.navigate(['/' + this.route.snapshot.paramMap.get('company') + '/execution/charter/details', charterId]);
    };
    ExecutionCharterCreationPageComponent.prototype.getCharterInfo = function () {
        var _this = this;
        this.model = new _shared_entities_charter_entity__WEBPACK_IMPORTED_MODULE_7__["Charter"]();
        this.formComponents.forEach(function (comp) {
            _this.model = comp.populateEntity(_this.model);
        });
    };
    ExecutionCharterCreationPageComponent.prototype.clearForm = function () {
        this.mainInfoComponent.clearValueOfControl();
        this.additionalInfoComponent.clearValueOfControl();
        this.shipmentComponent.clearValueOfControl();
        this.memoComponent.clearValueOfControl();
    };
    // For FAB
    ExecutionCharterCreationPageComponent.prototype.initFABActions = function () {
        this.fabTitle = 'init FAB mini Creation';
        this.fabType = _shared_components_floating_action_button_floating_action_button_type_enum__WEBPACK_IMPORTED_MODULE_5__["FABType"].MiniFAB;
        var actionItemSave = {
            icon: 'save',
            text: 'Save',
            action: 'save',
            disabled: false,
            index: 3,
        };
        var actionItemCancel = {
            icon: 'keyboard_backspace',
            text: 'Cancel',
            action: 'cancel',
            disabled: false,
            index: 2,
        };
        this.fabMenuActions.push(actionItemSave);
        this.fabMenuActions.push(actionItemCancel);
    };
    ExecutionCharterCreationPageComponent.prototype.onFabActionClicked = function (action) {
        switch (action) {
            case 'save': {
                this.submitForm();
                break;
            }
            case 'cancel': {
                this.cancelForm();
                break;
            }
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('mainInfoComponent'),
        __metadata("design:type", _components_main_information_form_component_main_information_form_component_component__WEBPACK_IMPORTED_MODULE_14__["MainInformationFormComponent"])
    ], ExecutionCharterCreationPageComponent.prototype, "mainInfoComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('additionalInfoComponent'),
        __metadata("design:type", _components_additional_information_form_component_additional_information_form_component_component__WEBPACK_IMPORTED_MODULE_13__["AdditionalInformationFormComponent"])
    ], ExecutionCharterCreationPageComponent.prototype, "additionalInfoComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('shipmentComponent'),
        __metadata("design:type", _components_shipment_form_component_shipment_form_component_component__WEBPACK_IMPORTED_MODULE_16__["ShipmentFormComponent"])
    ], ExecutionCharterCreationPageComponent.prototype, "shipmentComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('memoComponent'),
        __metadata("design:type", _components_memo_form_component_memo_form_component_component__WEBPACK_IMPORTED_MODULE_15__["MemoFormComponent"])
    ], ExecutionCharterCreationPageComponent.prototype, "memoComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["HostListener"])('window:beforeunload', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], ExecutionCharterCreationPageComponent.prototype, "unloadNotification", null);
    ExecutionCharterCreationPageComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: 'atlas-execution-charter-creation-page',
            template: __webpack_require__(/*! ./execution-charter-creation-page.component.html */ "./Client/app/execution/execution-charter/execution-charter-creation-page/execution-charter-creation-page.component.html"),
            styles: [__webpack_require__(/*! ./execution-charter-creation-page.component.scss */ "./Client/app/execution/execution-charter/execution-charter-creation-page/execution-charter-creation-page.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_9__["ExecutionService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormBuilder"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_10__["SnackbarService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"],
            _angular_common__WEBPACK_IMPORTED_MODULE_0__["Location"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationProviderService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_12__["UtilService"],
            _shared_services_title_service__WEBPACK_IMPORTED_MODULE_11__["TitleService"]])
    ], ExecutionCharterCreationPageComponent);
    return ExecutionCharterCreationPageComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-details/execution-charter-details.component.html":
/*!*******************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-details/execution-charter-details.component.html ***!
  \*******************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"atr-charter-detail\">\r\n    <header class=\"header-background charter-detail\">\r\n        <div class=\"header-content\">\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"start center\"\r\n                 fxLayoutGap=\"16px\">\r\n                <mat-card-title>Charter {{charterReference}}</mat-card-title>\r\n                <mat-chip-list>\r\n                    <mat-chip class=\"status-chip\"\r\n                              [ngClass]=\"charterStatus != 'Open' ? 'mat-error line-height-18' : 'mat-success'\"\r\n                              selected\r\n                              disabled>\r\n                        {{charterStatus}}\r\n                    </mat-chip>\r\n                </mat-chip-list>\r\n            </div>\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"start center\"\r\n                 fxLayoutGap=\"16px\"\r\n                 class=\"charter-global-info\">\r\n                <mat-form-field fxFlex=\"14\"\r\n                                class=\"mat-disabled-field\">\r\n                    <input matInput\r\n                           placeholder=\"Created By\"\r\n                           disabled\r\n                           value=\"{{createdBy}}\"\r\n                           autocomplete=\"off\">\r\n                </mat-form-field>\r\n                <mat-form-field fxFlex=\"14\"\r\n                                class=\"mat-disabled-field\">\r\n                    <input matInput\r\n                           placeholder=\"On\"\r\n                           disabled\r\n                           value=\"{{creationDate}}\"\r\n                           autocomplete=\"off\">\r\n                </mat-form-field>\r\n                <mat-form-field *ngIf=\"modifiedBy\"\r\n                                fxFlex=\"14\"\r\n                                class=\"mat-disabled-field\">\r\n                    <input matInput\r\n                           placeholder=\"Modified By\"\r\n                           disabled\r\n                           value=\"{{modifiedBy ? modifiedBy : ' '}}\"\r\n                           autocomplete=\"off\">\r\n                </mat-form-field>\r\n                <mat-form-field *ngIf=\"modifiedDate\"\r\n                                fxFlex=\"14\"\r\n                                class=\"mat-disabled-field\">\r\n                    <input matInput\r\n                           placeholder=\"On\"\r\n                           disabled\r\n                           value=\"{{modifiedDate ? modifiedDate : ' '}}\"\r\n                           autocomplete=\"off\">\r\n                </mat-form-field>\r\n            </div>\r\n        </div>\r\n    </header>\r\n\r\n    <atlas-charter-menu-bar-component #charterMenuBarComponent>\r\n    </atlas-charter-menu-bar-component>\r\n    <div class=\"main-container\">\r\n        <main [ngClass]=\"{'hidden-during-loading':isLoading}\">\r\n            <mat-tab-group class=\"bright-tab\">\r\n                <mat-tab label=\"Contracts\">\r\n                    <div fxLayout=\"column\"\r\n                         fxLayoutAlign=\"space-around\">\r\n                        <div fxLayout=\"row\"\r\n                             fxLayoutAlign=\"space-between\">\r\n                            <atlas-shipment-form-component #shipmentComponent\r\n                                                           [isCreateOrEdit]=false\r\n                                                           fxFlex=\"49\"></atlas-shipment-form-component>\r\n\r\n                            <atlas-total-card-component #totalCardComponent\r\n                                                        [isCreateOrEdit]=false\r\n                                                        fxFlex=\"49\"></atlas-total-card-component>\r\n                        </div>\r\n                        <atlas-assigned-contract-list-form-component (isContractAssigned)=\"onContractAssignedForCharter($event)\"\r\n                                                                     #assignSectionComponent>\r\n                        </atlas-assigned-contract-list-form-component>\r\n                    </div>\r\n                </mat-tab>\r\n                <mat-tab label=\"General\">\r\n                    <div fxLayout=\"row wrap\"\r\n                         fxLayoutAlign=\"space-around start\">\r\n                        <!-- Left -->\r\n                        <div fxFlex=\"49\"\r\n                             fxFlex.lt-md=\"100\">\r\n                            <atlas-main-information-form-component #mainInfoComponent\r\n                                                                   [isCreateOrEdit]=false>\r\n                            </atlas-main-information-form-component>\r\n                        </div>\r\n                        <!-- Right -->\r\n                        <div fxFlex=\"49\"\r\n                             fxFlex.lt-md=\"100\">\r\n                            <atlas-additional-information-form-component #additionalInfoComponent\r\n                                                                         [isCreateOrEdit]=false>\r\n                            </atlas-additional-information-form-component>\r\n                            <atlas-memo-form-component #memoComponent\r\n                                                       [isCreateOrEdit]=false></atlas-memo-form-component>\r\n                        </div>\r\n                    </div>\r\n                    <div fxLayout=\"row\"\r\n                         fxLayoutAlign=\"space-around start\">\r\n                        <div fxLayout=\"column\"\r\n                             fxFlex=\"98.5\">\r\n                            <atlas-warning-component #warningComponent\r\n                                                     *ngIf=\"warning && isContractAssignedToCharter\"\r\n                                                     title='You updated the charter without updating the assigned contracts.'\r\n                                                     message='To apply the modifications, you can switch to edit mode again.'\r\n                                                     icon='directions_boat'></atlas-warning-component>\r\n                        </div>\r\n                    </div>\r\n                </mat-tab>\r\n            </mat-tab-group>\r\n        </main>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"center center\"\r\n             fxLayoutWrap\r\n             *ngIf=\"isLoading\"\r\n             class=\"loading\">\r\n            <mat-spinner color=\"accent\"></mat-spinner>\r\n        </div>\r\n    </div>\r\n    <atlas-floating-action-button [fabTitle]=\"fabTitle\"\r\n                                  [fabType]=\"fabType\"\r\n                                  [fabActions]=\"fabMenuActions\"\r\n                                  [isParentLoaded]=\"!isLoading\"\r\n                                  (fabActionClicked)=\"onFabActionClicked($event)\">\r\n    </atlas-floating-action-button>\r\n</div>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-details/execution-charter-details.component.scss":
/*!*******************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-details/execution-charter-details.component.scss ***!
  \*******************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "label {\n  font-weight: bold; }\n\n.mat-column-delete mat-icon {\n  color: #007caa; }\n\natlas-shipment-form-component,\natlas-total-card-component {\n  width: 49%; }\n\n.header-background {\n  min-height: 94px !important; }\n\n.header-content {\n  padding: 16px 30px 0px !important; }\n\nheader .mat-card-title {\n  font-size: 16px;\n  margin-bottom: 0px; }\n\n.bottom-marge {\n  margin-bottom: 6px; }\n\n.line-height-18 {\n  line-height: 18px !important; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-details/execution-charter-details.component.ts":
/*!*****************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-details/execution-charter-details.component.ts ***!
  \*****************************************************************************************************************/
/*! exports provided: ExecutionCharterDetailsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExecutionCharterDetailsComponent", function() { return ExecutionCharterDetailsComponent; });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _shared_components_floating_action_button_floating_action_button_type_enum__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/components/floating-action-button/floating-action-button-type.enum */ "./Client/app/shared/components/floating-action-button/floating-action-button-type.enum.ts");
/* harmony import */ var _shared_enums_charter_status_enum__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/enums/charter-status.enum */ "./Client/app/shared/enums/charter-status.enum.ts");
/* harmony import */ var _shared_enums_contract_invoice_type_enum__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../shared/enums/contract-invoice-type.enum */ "./Client/app/shared/enums/contract-invoice-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../shared/services/http-services/lock.service */ "./Client/app/shared/services/http-services/lock.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _execution_charter_creation_page_components_additional_information_form_component_additional_information_form_component_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../execution-charter-creation-page/components/additional-information-form-component/additional-information-form-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/additional-information-form-component/additional-information-form-component.component.ts");
/* harmony import */ var _execution_charter_creation_page_components_assigned_contract_list_form_component_assigned_contract_list_form_component_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../execution-charter-creation-page/components/assigned-contract-list-form-component/assigned-contract-list-form-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/assigned-contract-list-form-component/assigned-contract-list-form-component.component.ts");
/* harmony import */ var _execution_charter_creation_page_components_charter_menu_bar_component_charter_menu_bar_component_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../execution-charter-creation-page/components/charter-menu-bar-component/charter-menu-bar-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-menu-bar-component/charter-menu-bar-component.component.ts");
/* harmony import */ var _execution_charter_creation_page_components_main_information_form_component_main_information_form_component_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../execution-charter-creation-page/components/main-information-form-component/main-information-form-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/main-information-form-component/main-information-form-component.component.ts");
/* harmony import */ var _execution_charter_creation_page_components_memo_form_component_memo_form_component_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../execution-charter-creation-page/components/memo-form-component/memo-form-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/memo-form-component/memo-form-component.component.ts");
/* harmony import */ var _execution_charter_creation_page_components_shipment_form_component_shipment_form_component_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../execution-charter-creation-page/components/shipment-form-component/shipment-form-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/shipment-form-component/shipment-form-component.component.ts");
/* harmony import */ var _execution_charter_creation_page_components_total_card_component_total_card_component_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../execution-charter-creation-page/components/total-card-component/total-card-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/total-card-component/total-card-component.component.ts");
/* harmony import */ var _execution_charter_creation_page_components_warning_component_warning_component_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../execution-charter-creation-page/components/warning-component/warning-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/warning-component/warning-component.component.ts");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_enums_invoicing_status_enum__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./../../../shared/enums/invoicing-status.enum */ "./Client/app/shared/enums/invoicing-status.enum.ts");
/* harmony import */ var _shared_enums_posting_status_enum__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./../../../shared/enums/posting-status.enum */ "./Client/app/shared/enums/posting-status.enum.ts");
/* harmony import */ var _shared_services_http_services_trading_service__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./../../../shared/services/http-services/trading.service */ "./Client/app/shared/services/http-services/trading.service.ts");
/* harmony import */ var _shared_services_title_service__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./../../../shared/services/title.service */ "./Client/app/shared/services/title.service.ts");
/* harmony import */ var _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./../../../shared/enums/charter-closure-status.enum */ "./Client/app/shared/enums/charter-closure-status.enum.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};





























var ExecutionCharterDetailsComponent = /** @class */ (function (_super) {
    __extends(ExecutionCharterDetailsComponent, _super);
    function ExecutionCharterDetailsComponent(route, executionService, router, snackbarService, dialog, location, formConfigurationProvider, titleService, lockService, tradingService, companyManager) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.executionService = executionService;
        _this.router = router;
        _this.snackbarService = snackbarService;
        _this.dialog = dialog;
        _this.location = location;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.titleService = titleService;
        _this.lockService = lockService;
        _this.tradingService = tradingService;
        _this.companyManager = companyManager;
        _this.isCreate = false;
        _this.warning = false;
        _this.isLoading = true;
        _this.isContractAssignedToCharter = false;
        _this.childFlag = 0;
        _this.defaultDate = 'Mon Jan 01 0001';
        _this.sectionToClose = new Array();
        _this.destroy$ = new rxjs__WEBPACK_IMPORTED_MODULE_4__["Subject"]();
        // -- FAB Management
        _this.fabMenuActions = [];
        return _this;
    }
    ExecutionCharterDetailsComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.charterId = this.route.snapshot.params['charterId'];
        this.company = this.route.snapshot.params['company'];
        this.dataVersionId = this.route.snapshot.paramMap.get('dataVersionId') ?
            Number(this.route.snapshot.paramMap.get('dataVersionId')) : null;
        this.executionService.getCharterById(this.charterId)
            .subscribe(function (data) {
            _this.model = data;
            _this.creationDate = data.creationDate.toDateString();
            _this.createdBy = data.createdBy;
            _this.modifiedDate = data.modifiedDate == null ? '' : data.modifiedDate.toDateString();
            _this.modifiedBy = data.modifiedBy;
            _this.charterReference = data.charterCode;
            _this.mainInfoComponent.assignValues(_this.model);
            _this.mainInfoComponent.initForm(_this.model);
            _this.totalCardComponent.assignValueToControl(_this.model.weightUnitId);
            _this.additionalInfoComponent.assignValues(_this.model);
            _this.additionalInfoComponent.initForm(_this.model);
            _this.shipmentComponent.assignValues(_this.model);
            _this.shipmentComponent.initForm(_this.model);
            _this.memoComponent.initForm(_this.model);
            _this.assignSectionComponent.initForm(_this.model);
            _this.initFABActions();
            _this.isLoading = false;
            _this.titleService.setTitle(_this.charterReference + ' - Charter View');
            _this.charterStatus = data.charterStatusId === _shared_enums_charter_status_enum__WEBPACK_IMPORTED_MODULE_9__["CharterStatus"].Open ?
                _shared_enums_charter_status_enum__WEBPACK_IMPORTED_MODULE_9__["CharterStatus"][_shared_enums_charter_status_enum__WEBPACK_IMPORTED_MODULE_9__["CharterStatus"].Open].toString() :
                _shared_enums_charter_status_enum__WEBPACK_IMPORTED_MODULE_9__["CharterStatus"][_shared_enums_charter_status_enum__WEBPACK_IMPORTED_MODULE_9__["CharterStatus"].Closed].toString();
            _this.updateCharterMenu(data.charterStatusId);
        });
        this.warning = this.route.snapshot.paramMap.get('warning') === 'true' ? true : false;
        this.subscriptions.push(this.charterMenuBarComponent.openCharterSubject.subscribe(function () {
            _this.onReopenCharterButtonClicked();
        }), this.charterMenuBarComponent.closeCharterSubject.subscribe(function () {
            _this.onCloseCharterButtonClicked();
        }));
    };
    ExecutionCharterDetailsComponent.prototype.copyCharter = function () {
        this.router.navigate(['/' + this.route.snapshot.paramMap.get('company') + '/execution/charter/new', this.charterId]);
    };
    ExecutionCharterDetailsComponent.prototype.editCharter = function () {
        this.router.navigate(['/' + this.route.snapshot.paramMap.get('company') + '/execution/charter/edit', this.charterId]);
    };
    ExecutionCharterDetailsComponent.prototype.btnEditClick = function () {
        this.isVisible = true;
    };
    ExecutionCharterDetailsComponent.prototype.btnCancelClick = function () {
        this.location.back();
    };
    ExecutionCharterDetailsComponent.prototype.btnDiscardChange = function () {
        this.isVisible = false;
        var confirmDialog = this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_7__["ConfirmationDialogComponent"], {
            data: {
                title: '',
                text: 'Do you want to discard the changes.',
                okButton: 'Discard anyway',
                cancelButton: 'Cancel',
            },
        });
    };
    ExecutionCharterDetailsComponent.prototype.deleteCharter = function () {
        var _this = this;
        var confirmDialog = this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_7__["ConfirmationDialogComponent"], {
            data: {
                title: 'Charter Deletion',
                text: 'Deleting a charter is permanent. Do you wish to proceed?',
                okButton: 'Delete anyway',
                cancelButton: 'Cancel',
            },
        });
        confirmDialog.afterClosed().subscribe(function (answer) {
            if (answer) {
                _this.executionService.deleteCharter(_this.charterId).subscribe(function () {
                    _this.snackbarService.informationSnackBar('Charter deleted successfully');
                    _this.goToChartersList();
                });
            }
        });
    };
    ExecutionCharterDetailsComponent.prototype.goToChartersList = function () {
        this.router.navigate(['/' + this.company + '/execution/charter']);
    };
    ExecutionCharterDetailsComponent.prototype.onContractAssignedForCharter = function (value) {
        if (value === true) {
            this.isContractAssignedToCharter = value;
        }
    };
    ExecutionCharterDetailsComponent.prototype.updateCharterMenu = function (charterStatusId) {
        this.charterMenuBarComponent.updateCharterMenu(charterStatusId);
    };
    ExecutionCharterDetailsComponent.prototype.onCloseCharterButtonClicked = function () {
        return __awaiter(this, void 0, void 0, function () {
            var charterModelToClose, lockedTrades, _a, lockMessageCombined, i;
            var _this = this;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        this.sectionToClose.length = 0;
                        this.sectionToClose = new Array();
                        charterModelToClose = this.model;
                        if (!(charterModelToClose.sectionsAssigned.length > 0)) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.checkLockStatusForAssignedTrades(charterModelToClose.sectionsAssigned)];
                    case 1:
                        _a = _b.sent();
                        return [3 /*break*/, 3];
                    case 2:
                        _a = [];
                        _b.label = 3;
                    case 3:
                        lockedTrades = _a;
                        if (lockedTrades !== null && lockedTrades.length > 0) {
                            lockMessageCombined = '';
                            for (i = 0; i < lockedTrades.length; i++) {
                                lockMessageCombined += lockedTrades[i].lockMessage + '<br/>';
                            }
                            this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_7__["ConfirmationDialogComponent"], {
                                data: {
                                    title: 'Trade(s) Locked',
                                    text: 'Not allowed. <br/>' + lockMessageCombined,
                                    okButton: 'Ok',
                                },
                            });
                        }
                        else {
                            if (charterModelToClose.sectionsAssigned.length > 0) {
                                this.tradingService.
                                    getAssigedSectionDetailsToCloseCharter(charterModelToClose.sectionsAssigned.map(function (s) { return s.sectionId; })).subscribe(function (data) {
                                    if (data && data.length > 0) {
                                        var closureValidaityStatusArray = new Array();
                                        for (var i = 0; i < data.length; i++) {
                                            var validityStatus = _this.checkSectionClosureValidity(data[i], data[i].invoices);
                                            if (validityStatus !== _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].InvoiceNotFinalized
                                                && validityStatus !== _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UnpostedInvoice
                                                && validityStatus !== _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].NoBlDateUnrelizedTrade) {
                                                _this.sectionToClose.push({
                                                    sectionId: charterModelToClose.sectionsAssigned[i].sectionId,
                                                    sectionCode: charterModelToClose.sectionsAssigned[i].contractLabel,
                                                });
                                            }
                                            closureValidaityStatusArray.push({ status: validityStatus, contractLabel: data[i].contractSectionCode });
                                        }
                                        var closureDialog = _this.displayPopUpForCharterClosure(closureValidaityStatusArray);
                                        var closureValidaityStatus = closureValidaityStatusArray.map(function (a) { return a.status; });
                                        if (closureValidaityStatus.indexOf(_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].InvoiceNotFinalized) === -1
                                            && closureValidaityStatus.indexOf(_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UnpostedInvoice) === -1
                                            && closureValidaityStatus.indexOf(_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].NoBlDateUnrelizedTrade) === -1) {
                                            closureDialog.afterClosed().toPromise().then(function (answer) {
                                                if (answer) {
                                                    _this.closeSections(_this.sectionToClose, charterModelToClose);
                                                }
                                                else {
                                                    _this.sectionToClose.length = 0;
                                                    _this.sectionToClose = new Array();
                                                }
                                            });
                                        }
                                        else {
                                            _this.sectionToClose.length = 0;
                                            _this.sectionToClose = new Array();
                                        }
                                    }
                                    else {
                                        _this.closeCharter(charterModelToClose, _this.sectionToClose);
                                    }
                                });
                            }
                            else {
                                this.closeCharter(charterModelToClose, this.sectionToClose);
                            }
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    ExecutionCharterDetailsComponent.prototype.onReopenCharterButtonClicked = function () {
        return __awaiter(this, void 0, void 0, function () {
            var charterModelToClose, lockedTrades;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        charterModelToClose = this.model;
                        return [4 /*yield*/, this.checkLockStatusForAssignedTrades(charterModelToClose.sectionsAssigned)];
                    case 1:
                        lockedTrades = _a.sent();
                        if (lockedTrades !== null && lockedTrades.length > 0) {
                            this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_7__["ConfirmationDialogComponent"], {
                                data: {
                                    title: 'Trade(s) Locked',
                                    text: 'Not allowed, ' + lockedTrades.map(function (a) { return a.lockMessage; }).toString(),
                                    okButton: 'Ok',
                                },
                            });
                        }
                        else {
                            this.executionService.openCharter([charterModelToClose.charterId]).subscribe(function (ok) {
                                if (ok) {
                                    if (charterModelToClose.sectionsAssigned.length > 0) {
                                        var sectionIdsToReopen = charterModelToClose.sectionsAssigned.map(function (a) { return a.sectionId; });
                                        _this.tradingService.reOpenSection(sectionIdsToReopen)
                                            .subscribe(function (ok) {
                                            if (ok) {
                                                var title = 'Charter ' + charterModelToClose.charterCode + ' is now reopened.<br/>Trade ';
                                                title += charterModelToClose.sectionsAssigned.map(function (a) { return a.contractLabel; }).toString();
                                                title += charterModelToClose.sectionsAssigned.length > 1 ? ' are now reopened.' : ' is now reopened.';
                                                _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_7__["ConfirmationDialogComponent"], {
                                                    data: {
                                                        title: 'Charter Reopened',
                                                        text: title,
                                                        okButton: 'Ok',
                                                    },
                                                }).afterClosed().subscribe(function (sucess) {
                                                    if (sucess) {
                                                        _this.router.navigate([_this.companyManager.getCurrentCompanyId() +
                                                                '/execution/charter/details/' + _this.charterId]);
                                                    }
                                                });
                                            }
                                        });
                                    }
                                    else {
                                        var title = 'Charter ' + charterModelToClose.charterCode + ' is now reopened.';
                                        _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_7__["ConfirmationDialogComponent"], {
                                            data: {
                                                title: 'Success - Charter Reopened',
                                                text: title,
                                                okButton: 'Ok',
                                            },
                                        }).afterClosed().subscribe(function (sucess) {
                                            if (sucess) {
                                                _this.router.navigate([_this.companyManager.getCurrentCompanyId() +
                                                        '/execution/charter/details/' + _this.charterId]);
                                            }
                                        });
                                    }
                                }
                            });
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    ExecutionCharterDetailsComponent.prototype.closeCharter = function (charter, sectionIToClose) {
        var _this = this;
        this.executionService.closeCharter([charter.charterId])
            .subscribe(function (ok) {
            if (ok) {
                var title = 'Charter ' + charter.charterCode + ' is now closed.';
                if (charter.sectionsAssigned.length > 0) {
                    title += '<br/> Trade ';
                    title += sectionIToClose.map(function (a) { return a.sectionCode; }).toString();
                    title += sectionIToClose.length > 1 ? ' are now closed.' : ' is now closed.';
                }
                var closeInfoPopup = _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_7__["ConfirmationDialogComponent"], {
                    data: {
                        title: 'Success - Charter Closed',
                        text: title,
                        okButton: 'Ok',
                    },
                });
                closeInfoPopup.afterClosed().subscribe(function (answer) {
                    _this.router.navigate([_this.companyManager.getCurrentCompanyId() +
                            '/execution/charter/details/' + charter.charterId]);
                });
            }
        });
    };
    ExecutionCharterDetailsComponent.prototype.displayPopUpForCharterClosure = function (closureValidaityStatus) {
        var confirmPopupData;
        var popupText = '';
        var blockerSections = closureValidaityStatus.filter(function (item) { return item.status === _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].NoBlDateUnrelizedTrade
            || item.status === _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].InvoiceNotFinalized
            || item.status === _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UnpostedInvoice; });
        var groupStatusArray = {};
        closureValidaityStatus.forEach(function (a) {
            groupStatusArray[a.status] = groupStatusArray[a.status] || [];
            groupStatusArray[a.status].push({ status: a.status, contractLabel: a.contractLabel });
        });
        if (blockerSections.length > 0) {
            if (groupStatusArray[_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].InvoiceNotFinalized] !== undefined
                && groupStatusArray[_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].InvoiceNotFinalized] !== null
                && groupStatusArray[_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].InvoiceNotFinalized].length > 0) {
                popupText += groupStatusArray[_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].InvoiceNotFinalized].map(function (x) { return x.contractLabel; }).toString()
                    + this.getpopupText(_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].InvoiceNotFinalized);
            }
            if (groupStatusArray[_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UnpostedInvoice] !== undefined
                && groupStatusArray[_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UnpostedInvoice] !== null
                && groupStatusArray[_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UnpostedInvoice].length > 0) {
                popupText += groupStatusArray[_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UnpostedInvoice].map(function (x) { return x.contractLabel; }).toString()
                    + this.getpopupText(_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UnpostedInvoice);
            }
            if (groupStatusArray[_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].NoBlDateUnrelizedTrade] !== undefined
                && groupStatusArray[_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].NoBlDateUnrelizedTrade] !== null
                && groupStatusArray[_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].NoBlDateUnrelizedTrade].length > 0) {
                popupText += groupStatusArray[_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].NoBlDateUnrelizedTrade].map(function (x) { return x.contractLabel; }).toString()
                    + this.getpopupText(_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].NoBlDateUnrelizedTrade);
            }
            confirmPopupData = {
                data: {
                    title: 'Blocking - Charter closure',
                    text: popupText,
                    okButton: 'Ok',
                },
            };
        }
        else {
            if (groupStatusArray[_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UninvoicedCosts] !== undefined
                && groupStatusArray[_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UninvoicedCosts] !== null
                && groupStatusArray[_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UninvoicedCosts].length > 0) {
                popupText += groupStatusArray[_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UninvoicedCosts].map(function (x) { return x.contractLabel; }).toString()
                    + this.getpopupText(_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UninvoicedCosts);
            }
            if (groupStatusArray[_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UncashmatchedCosts] !== undefined
                && groupStatusArray[_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UncashmatchedCosts] !== null
                && groupStatusArray[_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UncashmatchedCosts].length > 0) {
                popupText += groupStatusArray[_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UncashmatchedCosts].map(function (x) { return x.contractLabel; }).toString()
                    + this.getpopupText(_shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UncashmatchedCosts);
            }
            if (popupText === '') {
                popupText = 'Continue with closure?';
            }
            else {
                popupText = popupText + '<br/>Continue with closure?';
            }
            confirmPopupData = {
                data: {
                    title: 'Warning - Charter closure',
                    text: popupText,
                    okButton: 'Yes',
                    cancelButton: 'Cancel',
                },
            };
        }
        return this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_7__["ConfirmationDialogComponent"], confirmPopupData);
    };
    ExecutionCharterDetailsComponent.prototype.getpopupText = function (status) {
        var popupText = '';
        switch (status) {
            case _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].InvoiceNotFinalized:
                popupText = ' is not final invoiced.<br/>';
                break;
            case _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UnpostedInvoice:
                popupText = ' has unposted invoices.<br/>';
                break;
            case _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].NoBlDateUnrelizedTrade:
                popupText = ' is unrealized physicals. Make the Quantity 0 or change the shipping status to close it.<br/>';
                break;
            case _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UninvoicedCosts:
                popupText = ' has cost accrual.<br/>';
                break;
            case _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UncashmatchedCosts:
                popupText = ' has cash unmatched Invoice(s).<br/>';
                break;
            default:
                break;
        }
        return popupText;
    };
    ExecutionCharterDetailsComponent.prototype.checkLockStatusForAssignedTrades = function (sectionsAssigned) {
        return __awaiter(this, void 0, void 0, function () {
            var lockedTrades, i, val;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        lockedTrades = new Array();
                        i = 0;
                        _a.label = 1;
                    case 1:
                        if (!(i < sectionsAssigned.length)) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.lockService.isLockedContractAsync(sectionsAssigned[i].sectionId)];
                    case 2:
                        val = _a.sent();
                        if (val.isLocked) {
                            lockedTrades.push({
                                contractLable: sectionsAssigned[i].contractLabel,
                                sectionId: sectionsAssigned[i].sectionId,
                                lockMessage: val.message,
                            });
                        }
                        _a.label = 3;
                    case 3:
                        i++;
                        return [3 /*break*/, 1];
                    case 4: return [2 /*return*/, lockedTrades];
                }
            });
        });
    };
    ExecutionCharterDetailsComponent.prototype.closeSections = function (sectionsToClose, charter) {
        var _this = this;
        var sectionIdsToClose = new Array();
        sectionsToClose.forEach(function (element) {
            sectionIdsToClose.push(element.sectionId);
        });
        this.subscriptions.push(this.tradingService.closeSection(sectionIdsToClose, this.childFlag, this.dataVersionId)
            .subscribe(function (ok) {
            if (ok) {
                _this.closeCharter(charter, sectionsToClose);
            }
        }));
    };
    ExecutionCharterDetailsComponent.prototype.checkSectionClosureValidity = function (closeSectionModel, invoiceModel) {
        var unpostedTradeInvoiceStatusList = invoiceModel.filter(function (invoice) { return invoice.postingStatusId !== _shared_enums_posting_status_enum__WEBPACK_IMPORTED_MODULE_25__["PostingStatus"].Posted; });
        var cashUnMatchedInvoiceTradeList = invoiceModel.filter(function (invoice) { return invoice.cashMatchPercentage !== 100; });
        var invoicePercentage = invoiceModel !== null || invoiceModel.length > 0 ? invoiceModel.reduce(function (a, b) { return a + b.invoicePercent; }, 0) : 0;
        var costFilteredByInvoiceStatus = closeSectionModel.costs.filter(function (cost) { return cost.invoiceStatus === _shared_enums_invoicing_status_enum__WEBPACK_IMPORTED_MODULE_24__["InvoicingStatus"].Uninvoiced; });
        if (invoiceModel.length > 0
            && invoicePercentage === 100
            && unpostedTradeInvoiceStatusList.length === 0
            && cashUnMatchedInvoiceTradeList.length === 0
            && (costFilteredByInvoiceStatus === null || costFilteredByInvoiceStatus.length === 0)) {
            return _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].FullyInvoiced;
        }
        else if (closeSectionModel.quantity === 0 || closeSectionModel.contractInvoiceTypeId === _shared_enums_contract_invoice_type_enum__WEBPACK_IMPORTED_MODULE_10__["ContractInvoiceType"].Cancellation) {
            return _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].ZeroQuantity;
        }
        else if (closeSectionModel.invoicingStatusId !== _shared_enums_invoicing_status_enum__WEBPACK_IMPORTED_MODULE_24__["InvoicingStatus"].Finalized) {
            return _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].InvoiceNotFinalized;
        }
        else if (unpostedTradeInvoiceStatusList.length > 0) {
            return _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UnpostedInvoice;
        }
        else if (closeSectionModel.blDate === null ||
            closeSectionModel.blDate.toDateString() === this.defaultDate) {
            return _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].NoBlDateUnrelizedTrade;
        }
        else if (costFilteredByInvoiceStatus.length > 0) {
            return _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UninvoicedCosts;
        }
        else if (unpostedTradeInvoiceStatusList.length === 0 && cashUnMatchedInvoiceTradeList.length > 0) {
            return _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_28__["CharterClosureStatus"].UncashmatchedCosts;
        }
    };
    ExecutionCharterDetailsComponent.prototype.onNewCharterClicked = function () {
        this.router.navigate(['/' + this.company + '/execution/charter/new']);
    };
    ExecutionCharterDetailsComponent.prototype.onEditCharterClicked = function () {
        var _this = this;
        this.lockService.isLockedCharter(this.charterId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["takeUntil"])(this.destroy$)).subscribe(function (lock) {
            if (lock.isLocked) {
                _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_7__["ConfirmationDialogComponent"], {
                    data: {
                        title: 'Lock',
                        text: lock.message,
                        okButton: 'Got it',
                    },
                });
            }
            else {
                _this.router.navigate(['/' + _this.company + '/execution/charter/edit', _this.charterId]);
            }
        });
    };
    // For FAB
    ExecutionCharterDetailsComponent.prototype.initFABActions = function () {
        this.fabTitle = 'Charter Display FAB mini';
        this.fabType = _shared_components_floating_action_button_floating_action_button_type_enum__WEBPACK_IMPORTED_MODULE_8__["FABType"].MiniFAB;
        var actionItemEdit = {
            icon: 'edit',
            text: 'Edit Charter',
            action: 'editCharter',
            index: 0,
            disabled: false,
        };
        var actionItemNew = {
            icon: 'add',
            text: 'New Charter',
            action: 'newCharter',
            index: 1,
            disabled: false,
        };
        this.fabMenuActions.push(actionItemNew);
        this.fabMenuActions.push(actionItemEdit);
    };
    ExecutionCharterDetailsComponent.prototype.onFabActionClicked = function (action) {
        switch (action) {
            case 'newCharter': {
                this.onNewCharterClicked();
                break;
            }
            case 'editCharter': {
                this.onEditCharterClicked();
                break;
            }
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('mainInfoComponent'),
        __metadata("design:type", _execution_charter_creation_page_components_main_information_form_component_main_information_form_component_component__WEBPACK_IMPORTED_MODULE_18__["MainInformationFormComponent"])
    ], ExecutionCharterDetailsComponent.prototype, "mainInfoComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('additionalInfoComponent'),
        __metadata("design:type", _execution_charter_creation_page_components_additional_information_form_component_additional_information_form_component_component__WEBPACK_IMPORTED_MODULE_15__["AdditionalInformationFormComponent"])
    ], ExecutionCharterDetailsComponent.prototype, "additionalInfoComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('shipmentComponent'),
        __metadata("design:type", _execution_charter_creation_page_components_shipment_form_component_shipment_form_component_component__WEBPACK_IMPORTED_MODULE_20__["ShipmentFormComponent"])
    ], ExecutionCharterDetailsComponent.prototype, "shipmentComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('memoComponent'),
        __metadata("design:type", _execution_charter_creation_page_components_memo_form_component_memo_form_component_component__WEBPACK_IMPORTED_MODULE_19__["MemoFormComponent"])
    ], ExecutionCharterDetailsComponent.prototype, "memoComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('totalCardComponent'),
        __metadata("design:type", _execution_charter_creation_page_components_total_card_component_total_card_component_component__WEBPACK_IMPORTED_MODULE_21__["TotalCardComponent"])
    ], ExecutionCharterDetailsComponent.prototype, "totalCardComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('assignSectionComponent'),
        __metadata("design:type", _execution_charter_creation_page_components_assigned_contract_list_form_component_assigned_contract_list_form_component_component__WEBPACK_IMPORTED_MODULE_16__["AssignedContractListFormComponent"])
    ], ExecutionCharterDetailsComponent.prototype, "assignSectionComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('warningComponent'),
        __metadata("design:type", _execution_charter_creation_page_components_warning_component_warning_component_component__WEBPACK_IMPORTED_MODULE_22__["WarningComponent"])
    ], ExecutionCharterDetailsComponent.prototype, "warningComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('charterMenuBarComponent'),
        __metadata("design:type", _execution_charter_creation_page_components_charter_menu_bar_component_charter_menu_bar_component_component__WEBPACK_IMPORTED_MODULE_17__["CharterMenuBarComponent"])
    ], ExecutionCharterDetailsComponent.prototype, "charterMenuBarComponent", void 0);
    ExecutionCharterDetailsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: 'atlas-execution-charter-details',
            template: __webpack_require__(/*! ./execution-charter-details.component.html */ "./Client/app/execution/execution-charter/execution-charter-details/execution-charter-details.component.html"),
            styles: [__webpack_require__(/*! ./execution-charter-details.component.scss */ "./Client/app/execution/execution-charter/execution-charter-details/execution-charter-details.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"], _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_12__["ExecutionService"], _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_14__["SnackbarService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"], _angular_common__WEBPACK_IMPORTED_MODULE_0__["Location"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_11__["FormConfigurationProviderService"],
            _shared_services_title_service__WEBPACK_IMPORTED_MODULE_27__["TitleService"],
            _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_13__["LockService"],
            _shared_services_http_services_trading_service__WEBPACK_IMPORTED_MODULE_26__["TradingService"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_23__["CompanyManagerService"]])
    ], ExecutionCharterDetailsComponent);
    return ExecutionCharterDetailsComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_6__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-edit-page/execution-charter-edit-page.component.html":
/*!***********************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-edit-page/execution-charter-edit-page.component.html ***!
  \***********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<form [formGroup]=\"charterForm\">\r\n    <header class=\"header-background charter-detail\">\r\n        <div class=\"header-content\">\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"start center\"\r\n                 fxLayoutGap=\"16px\"\r\n                 class=\"bottom-marge\">\r\n                <h2>Charter {{charterReference}}</h2>\r\n                <mat-chip-list>\r\n                    <mat-chip class=\"mat-success status-chip\"\r\n                              selected\r\n                              disabled>\r\n                        Open\r\n                    </mat-chip>\r\n                </mat-chip-list>\r\n            </div>\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"start center\"\r\n                 fxLayoutGap=\"16px\"\r\n                 class=\"charter-global-info\">\r\n                <mat-form-field fxFlex=\"14\"\r\n                                class=\"mat-disabled-field\">\r\n                    <input matInput\r\n                           placeholder=\"Created By\"\r\n                           disabled\r\n                           value=\"{{createdBy}}\"\r\n                           autocomplete=\"off\">\r\n                </mat-form-field>\r\n                <mat-form-field fxFlex=\"14\"\r\n                                class=\"mat-disabled-field\">\r\n                    <input matInput\r\n                           placeholder=\"On\"\r\n                           disabled\r\n                           value=\"{{creationDate}}\"\r\n                           autocomplete=\"off\">\r\n                </mat-form-field>\r\n                <mat-form-field fxFlex=\"14\"\r\n                                class=\"mat-disabled-field\">\r\n                    <input matInput\r\n                           placeholder=\"Modified By\"\r\n                           disabled\r\n                           value=\"{{modifiedBy ? modifiedBy : ' '}}\"\r\n                           autocomplete=\"off\">\r\n                </mat-form-field>\r\n                <mat-form-field fxFlex=\"14\"\r\n                                class=\"mat-disabled-field\">\r\n                    <input matInput\r\n                           placeholder=\"On\"\r\n                           disabled\r\n                           value=\"{{modifiedDate ? modifiedDate : ' '}}\"\r\n                           autocomplete=\"off\">\r\n                </mat-form-field>\r\n            </div>\r\n        </div>\r\n    </header>\r\n\r\n    <atlas-charter-menu-bar-component [menuDisable]=\"isEdit\"\r\n                                      (charterSaveAction)=\"onSaveButtonClicked()\"></atlas-charter-menu-bar-component>\r\n\r\n    <div class=\"main-container\">\r\n        <main [ngClass]=\"{'hidden-during-loading':isLoading}\"\r\n              class=\"cards-fxLayout\">\r\n            <mat-tab-group class=\"bright-tab\">\r\n                <mat-tab label=\"Contracts\">\r\n                    <div fxLayout=\"row\"\r\n                         fxLayoutAlign=\"space-between\">\r\n                        <atlas-shipment-form-component #shipmentComponent\r\n                                                       [isCreateOrEdit]=true\r\n                                                       fxFlex=\"50\"></atlas-shipment-form-component>\r\n                        <atlas-total-card-component #totalCardComponent\r\n                                                    [isCreateOrEdit]=false\r\n                                                    fxFlex=\"50\"></atlas-total-card-component>\r\n                    </div>\r\n                    <div fxLayout=\"row\"\r\n                         fxLayoutAlign=\"space-around start\">\r\n                        <atlas-warning-component #warningComponent\r\n                                                 *ngIf=\"warning\"\r\n                                                 title='Select the contracts you want to update with the new charter informations.'\r\n                                                 message='Non selected contracts will have to be updated manually later'\r\n                                                 icon='swap_horiz'\r\n                                                 fxFlex=\"100\"></atlas-warning-component>\r\n                    </div>\r\n                    <atlas-assigned-contract-list-form-component (isReassignedButtonClicked)=\"onReassignedButtonClicked($event)\"\r\n                                                                 #assignedContractListFormComponent>\r\n                    </atlas-assigned-contract-list-form-component>\r\n                </mat-tab>\r\n                <mat-tab label=\"General\">\r\n                    <div fxLayout=\"row wrap\"\r\n                         fxLayoutAlign=\"space-around start\">\r\n                        <div fxFlex=\"50\"\r\n                             fxFlex.lt-md=\"100\">\r\n                            <atlas-main-information-form-component #mainInfoComponent\r\n                                                                   [isCreateOrEdit]=true>\r\n                            </atlas-main-information-form-component>\r\n                        </div>\r\n                        <!-- Right -->\r\n                        <div fxFlex=\"50\"\r\n                             fxFlex.lt-md=\"100\">\r\n                            <atlas-additional-information-form-component #additionalInfoComponent\r\n                                                                         [isCreateOrEdit]=true>\r\n                            </atlas-additional-information-form-component>\r\n                            <atlas-memo-form-component #memoComponent\r\n                                                       [isCreateOrEdit]=true></atlas-memo-form-component>\r\n                        </div>\r\n                    </div>\r\n                </mat-tab>\r\n            </mat-tab-group>\r\n        </main>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"center center\"\r\n             fxLayoutWrap\r\n             *ngIf=\"isLoading\"\r\n             class=\"loading\">\r\n            <mat-spinner color=\"accent\"></mat-spinner>\r\n        </div>\r\n    </div>\r\n    <atlas-lock-interval [resourceId]=\"charterId\"\r\n                         [resourceCode]=\"charterReference\"\r\n                         resourceType=\"Charter\"\r\n                         isEdit=true>\r\n    </atlas-lock-interval>\r\n</form>\r\n<atlas-floating-action-button *ngIf=\"!hideFloatingButtons\"\r\n                              [fabTitle]=\"fabTitle\"\r\n                              [fabType]=\"fabType\"\r\n                              [fabActions]=\"fabMenuActions\"\r\n                              [isParentLoaded]=\"!isLoading\"\r\n                              (fabActionClicked)=\"onFabActionClicked($event)\">\r\n</atlas-floating-action-button>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-edit-page/execution-charter-edit-page.component.scss":
/*!***********************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-edit-page/execution-charter-edit-page.component.scss ***!
  \***********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".header-background {\n  min-height: 94px !important; }\n\n.header-content {\n  padding: 16px 30px 0px !important; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-edit-page/execution-charter-edit-page.component.ts":
/*!*********************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-edit-page/execution-charter-edit-page.component.ts ***!
  \*********************************************************************************************************************/
/*! exports provided: ExecutionCharterEditPageComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExecutionCharterEditPageComponent", function() { return ExecutionCharterEditPageComponent; });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _shared_components_floating_action_button_floating_action_button_type_enum__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/components/floating-action-button/floating-action-button-type.enum */ "./Client/app/shared/components/floating-action-button/floating-action-button-type.enum.ts");
/* harmony import */ var _shared_entities_assigned_section_entity__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../shared/entities/assigned-section.entity */ "./Client/app/shared/entities/assigned-section.entity.ts");
/* harmony import */ var _shared_entities_charter_entity__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../shared/entities/charter.entity */ "./Client/app/shared/entities/charter.entity.ts");
/* harmony import */ var _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../shared/entities/lock-functional-context.entity */ "./Client/app/shared/entities/lock-functional-context.entity.ts");
/* harmony import */ var _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../shared/enums/contract-type.enum */ "./Client/app/shared/enums/contract-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../shared/services/http-services/lock.service */ "./Client/app/shared/services/http-services/lock.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _execution_charter_creation_page_components_additional_information_form_component_additional_information_form_component_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../execution-charter-creation-page/components/additional-information-form-component/additional-information-form-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/additional-information-form-component/additional-information-form-component.component.ts");
/* harmony import */ var _execution_charter_creation_page_components_assigned_contract_list_form_component_assigned_contract_list_form_component_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../execution-charter-creation-page/components/assigned-contract-list-form-component/assigned-contract-list-form-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/assigned-contract-list-form-component/assigned-contract-list-form-component.component.ts");
/* harmony import */ var _execution_charter_creation_page_components_main_information_form_component_main_information_form_component_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../execution-charter-creation-page/components/main-information-form-component/main-information-form-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/main-information-form-component/main-information-form-component.component.ts");
/* harmony import */ var _execution_charter_creation_page_components_memo_form_component_memo_form_component_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../execution-charter-creation-page/components/memo-form-component/memo-form-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/memo-form-component/memo-form-component.component.ts");
/* harmony import */ var _execution_charter_creation_page_components_shipment_form_component_shipment_form_component_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../execution-charter-creation-page/components/shipment-form-component/shipment-form-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/shipment-form-component/shipment-form-component.component.ts");
/* harmony import */ var _execution_charter_creation_page_components_total_card_component_total_card_component_component__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../execution-charter-creation-page/components/total-card-component/total-card-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/total-card-component/total-card-component.component.ts");
/* harmony import */ var _execution_charter_creation_page_components_warning_component_warning_component_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../execution-charter-creation-page/components/warning-component/warning-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/warning-component/warning-component.component.ts");
/* harmony import */ var _shared_services_title_service__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./../../../shared/services/title.service */ "./Client/app/shared/services/title.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



























var ExecutionCharterEditPageComponent = /** @class */ (function (_super) {
    __extends(ExecutionCharterEditPageComponent, _super);
    function ExecutionCharterEditPageComponent(route, executionService, cdr, formBuilder, snackbarService, router, location, dialog, formConfigurationProvider, lockService, utilService, titleService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.executionService = executionService;
        _this.cdr = cdr;
        _this.formBuilder = formBuilder;
        _this.snackbarService = snackbarService;
        _this.router = router;
        _this.location = location;
        _this.dialog = dialog;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.lockService = lockService;
        _this.utilService = utilService;
        _this.titleService = titleService;
        _this.savingInProgress = false;
        _this.isClearClicked = false;
        _this.sectionModel = new _shared_entities_assigned_section_entity__WEBPACK_IMPORTED_MODULE_10__["AssignedSection"]();
        _this.formComponents = [];
        _this.viewWarning = false;
        _this.warning = true;
        _this.isEdit = true;
        _this.isSave = false;
        _this.isLoading = true;
        _this.hideFloatingButtons = false;
        _this.destroy$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        _this.fabMenuActions = [];
        return _this;
    }
    ExecutionCharterEditPageComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.isClearClicked = false;
        this.charterId = this.route.snapshot.params['charterId'];
        var companySubscription = this.route.paramMap
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (params) { return params.get('company'); }))
            .subscribe(function (company) {
            _this.company = company;
        });
        this.charterForm = this.formBuilder.group({
            additionalInfoComponent: this.additionalInfoComponent.getFormGroup(),
            mainInfoComponent: this.mainInfoComponent.getFormGroup(),
            shipmentComponent: this.shipmentComponent.getFormGroup(),
            memoComponent: this.memoComponent.getFormGroup(),
            assignedContractListFormComponent: this.assignedContractListFormComponent.getFormGroup(),
        });
        this.formComponents.push(this.additionalInfoComponent, this.mainInfoComponent, this.memoComponent, this.shipmentComponent, this.assignedContractListFormComponent, this.totalCardComponent);
        this.cdr.detectChanges();
        this.subscriptions.push(this.lockService.lockCharter(this.charterId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_12__["LockFunctionalContext"].CharterEdit)
            .subscribe(function (data) {
            _this.loadCharterData();
        }, function (err) {
            var confirmDialog = _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_8__["ConfirmationDialogComponent"], {
                data: {
                    title: 'Lock',
                    text: err.error.detail,
                    okButton: 'Got it',
                },
            });
            _this.goToChartersDetails(_this.charterId);
        }));
        this.subscriptions.push(companySubscription);
    };
    ExecutionCharterEditPageComponent.prototype.canDeactivate = function () {
        if (this.charterForm.dirty && this.isSave === false) {
            return window.confirm('Leave an unsave form? \nYour changes won\'t be applied!');
        }
        return true;
    };
    ExecutionCharterEditPageComponent.prototype.unloadNotification = function ($event) {
        if (this.charterForm.dirty) {
            $event.returnValue = true;
        }
    };
    ExecutionCharterEditPageComponent.prototype.loadCharterData = function () {
        var _this = this;
        this.subscriptions.push(this.executionService.getCharterById(this.charterId)
            .subscribe(function (data) {
            _this.model = data;
            _this.creationDate = data.creationDate.toDateString();
            _this.createdBy = data.createdBy;
            _this.modifiedDate = data.modifiedDate === null ? '' : data.modifiedDate.toDateString();
            _this.modifiedBy = data.modifiedBy;
            _this.charterReference = data.charterCode;
            _this.mainInfoComponent.assignValues(_this.model);
            _this.mainInfoComponent.initForm(_this.model);
            _this.additionalInfoComponent.initForm(_this.model);
            _this.shipmentComponent.assignValues(_this.model);
            _this.shipmentComponent.initForm(_this.model);
            _this.memoComponent.initForm(_this.model);
            _this.assignedContractListFormComponent.initForm(_this.model, true);
            _this.initFABActions();
            _this.isLoading = false;
            _this.titleService.setTitle(_this.charterReference + ' - Edit Charter');
        }));
    };
    ExecutionCharterEditPageComponent.prototype.onDiscardButtonClicked = function () {
        var _this = this;
        this.isSave = true;
        var confirmDiscardDialog = this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_8__["ConfirmationDialogComponent"], {
            data: {
                title: 'Discard Changes',
                text: 'You have some modification pending. Close and lose changes?',
                okButton: 'Ok',
                cancelButton: 'Cancel',
            },
        });
        confirmDiscardDialog.afterClosed().subscribe(function (answer) {
            if (answer) {
                _this.mainInfoComponent.initForm(_this.model);
                _this.additionalInfoComponent.initForm(_this.model);
                _this.shipmentComponent.initForm(_this.model);
                _this.memoComponent.initForm(_this.model);
                _this.goToChartersDetails(_this.charterId);
            }
        });
    };
    ExecutionCharterEditPageComponent.prototype.onSaveButtonClicked = function () {
        this.isSave = true;
        this.utilService.updateFormGroupValidity(this.charterForm);
        if (this.charterForm.valid) {
            this.masterdata = this.route.snapshot.data.masterdata;
            this.getCharterInfo();
            this.warning = false;
            // This code has been removed in bug 23126 but will be added back for UX
            // if (this.model.assignedSections.length > 0 && this.model.allContractsSelected === false) {
            //     const result = this.model;
            // 
            //     const assignSectionDialog = this.dialog.open(AssignSectionDialogComponent, {
            //         data: { result, masterdata: this.masterdata },
            //     });
            //     assignSectionDialog.afterClosed().subscribe((charters: Charter) => {
            //         if (charters != null) {
            //             this.validateSectionAndUpdate(charters);
            //         }
            //     });
            // } else {
            if (this.model.assignedSections.length === 0) {
                this.warning = true;
                this.viewWarning = true;
            }
            this.validateSectionAndUpdate(this.model);
        }
        else {
            this.snackbarService.throwErrorSnackBar('Form is invalid. Please resolve the errors.');
        }
    };
    ExecutionCharterEditPageComponent.prototype.goToChartersDetails = function (charterId) {
        this.router.navigate([this.route.snapshot.paramMap.get('company') +
                '/execution/charter/details', charterId, { warning: this.viewWarning }]);
    };
    ExecutionCharterEditPageComponent.prototype.validateSectionAndUpdate = function (charter) {
        var _this = this;
        var assignedSections;
        assignedSections = charter.assignedSections.map(function (o) { return o; });
        var sectionsInvoicedOrUnallocatedSales = assignedSections.filter(function (section) { return _this.isSectionInvoicedOrUnallocatedSale(section); });
        if (sectionsInvoicedOrUnallocatedSales.length > 0) {
            var confirmDialog = this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_8__["ConfirmationDialogComponent"], {
                data: {
                    title: 'Warning',
                    text: 'The BL date of invoiced contracts or unallocated sales contracts will not be updated',
                    okButton: 'Ok',
                },
            });
            confirmDialog.afterClosed().subscribe(function (answer) {
                if (answer) {
                    _this.updateCharter(charter);
                }
            });
        }
        else {
            this.updateCharter(charter);
        }
    };
    ExecutionCharterEditPageComponent.prototype.isSectionInvoicedOrUnallocatedSale = function (section) {
        if (section.invoiceRef && section.invoiceRef !== '') {
            return true;
        }
        // Sale not allocated will not be updated
        if (section.contractType === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_13__["ContractTypes"].Sale && section.allocatedTo === null) {
            return true;
        }
        return false;
    };
    ExecutionCharterEditPageComponent.prototype.updateCharter = function (updateCharterModel) {
        var _this = this;
        updateCharterModel.charterId = this.charterId;
        this.executionService.updateCharter(updateCharterModel, false)
            .subscribe(function () {
            _this.snackbarService.informationSnackBar('Charter has been updated successfully.');
            _this.goToChartersDetails(_this.charterId);
        }, function (error) {
            console.error(error);
            _this.snackbarService.throwErrorSnackBar('Oops! An error ocurred');
        }, function () {
            _this.savingInProgress = false;
        });
    };
    ExecutionCharterEditPageComponent.prototype.goToChartersList = function () {
        this.router.navigate([this.route.snapshot.paramMap.get('company') + '/execution/charter']);
    };
    ExecutionCharterEditPageComponent.prototype.getCharterInfo = function () {
        var _this = this;
        this.model = new _shared_entities_charter_entity__WEBPACK_IMPORTED_MODULE_11__["Charter"]();
        this.formComponents.forEach(function (comp) {
            _this.model = comp.populateEntity(_this.model);
        });
    };
    ExecutionCharterEditPageComponent.prototype.onClearButtonClicked = function () {
        this.isSave = true;
        this.mainInfoComponent.clearValueOfControl();
        this.additionalInfoComponent.clearValueOfControl();
        this.shipmentComponent.clearValueOfControl();
        this.memoComponent.clearValueOfControl();
    };
    ExecutionCharterEditPageComponent.prototype.deleteCharter = function () {
        var _this = this;
        var confirmDialog = this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_8__["ConfirmationDialogComponent"], {
            data: {
                title: 'Charter Deletion',
                text: 'Deleting a charter is permanent. Do you wish to proceed?',
                okButton: 'Delete anyway',
                cancelButton: 'Cancel',
            },
        });
        confirmDialog.afterClosed().subscribe(function (answer) {
            if (answer) {
                _this.executionService.deleteCharter(_this.charterId).subscribe(function () {
                    _this.snackbarService.informationSnackBar('Charter deleted successfully');
                    _this.goToChartersList();
                });
            }
        });
    };
    ExecutionCharterEditPageComponent.prototype.ngOnDestroy = function () {
        var _this = this;
        this.subscriptions.push(this.lockService.cleanSessionLocks().subscribe(function () {
            _this.subscriptions.forEach(function (subscription) {
                subscription.unsubscribe();
            });
        }));
    };
    ExecutionCharterEditPageComponent.prototype.onPreviousPageNavigation = function () {
        this.location.back();
    };
    ExecutionCharterEditPageComponent.prototype.onEditCharterClicked = function () {
        var _this = this;
        this.lockService.isLockedCharter(this.charterId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["takeUntil"])(this.destroy$)).subscribe(function (lock) {
            if (lock.isLocked) {
                _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_8__["ConfirmationDialogComponent"], {
                    data: {
                        title: 'Lock',
                        text: lock.message,
                        okButton: 'Got it',
                    },
                });
            }
            else {
                _this.router.navigate(['/' + _this.company + '/execution/charter/edit', _this.charterId]);
            }
        });
    };
    // For FAB
    ExecutionCharterEditPageComponent.prototype.initFABActions = function () {
        this.fabTitle = 'Charter Edit FAB mini';
        this.fabType = _shared_components_floating_action_button_floating_action_button_type_enum__WEBPACK_IMPORTED_MODULE_9__["FABType"].MiniFAB;
        var actionItemSave = {
            icon: 'save',
            text: 'Save',
            action: 'save',
            disabled: false,
            index: 3,
        };
        var actionItemCancel = {
            icon: 'keyboard_backspace',
            text: 'Cancel',
            action: 'cancel',
            disabled: false,
            index: 2,
        };
        this.fabMenuActions.push(actionItemSave);
        this.fabMenuActions.push(actionItemCancel);
    };
    ExecutionCharterEditPageComponent.prototype.onFabActionClicked = function (action) {
        switch (action) {
            case 'save': {
                this.onSaveButtonClicked();
                break;
            }
            case 'cancel': {
                this.onPreviousPageNavigation();
                break;
            }
        }
    };
    ExecutionCharterEditPageComponent.prototype.onReassignedButtonClicked = function (event) {
        if (event) {
            this.hideFloatingButtons = true;
        }
        else {
            this.hideFloatingButtons = false;
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('mainInfoComponent'),
        __metadata("design:type", _execution_charter_creation_page_components_main_information_form_component_main_information_form_component_component__WEBPACK_IMPORTED_MODULE_20__["MainInformationFormComponent"])
    ], ExecutionCharterEditPageComponent.prototype, "mainInfoComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('additionalInfoComponent'),
        __metadata("design:type", _execution_charter_creation_page_components_additional_information_form_component_additional_information_form_component_component__WEBPACK_IMPORTED_MODULE_18__["AdditionalInformationFormComponent"])
    ], ExecutionCharterEditPageComponent.prototype, "additionalInfoComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('shipmentComponent'),
        __metadata("design:type", _execution_charter_creation_page_components_shipment_form_component_shipment_form_component_component__WEBPACK_IMPORTED_MODULE_22__["ShipmentFormComponent"])
    ], ExecutionCharterEditPageComponent.prototype, "shipmentComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('memoComponent'),
        __metadata("design:type", _execution_charter_creation_page_components_memo_form_component_memo_form_component_component__WEBPACK_IMPORTED_MODULE_21__["MemoFormComponent"])
    ], ExecutionCharterEditPageComponent.prototype, "memoComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('totalCardComponent'),
        __metadata("design:type", _execution_charter_creation_page_components_total_card_component_total_card_component_component__WEBPACK_IMPORTED_MODULE_23__["TotalCardComponent"])
    ], ExecutionCharterEditPageComponent.prototype, "totalCardComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('assignedContractListFormComponent'),
        __metadata("design:type", _execution_charter_creation_page_components_assigned_contract_list_form_component_assigned_contract_list_form_component_component__WEBPACK_IMPORTED_MODULE_19__["AssignedContractListFormComponent"])
    ], ExecutionCharterEditPageComponent.prototype, "assignedContractListFormComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('warningComponent'),
        __metadata("design:type", _execution_charter_creation_page_components_warning_component_warning_component_component__WEBPACK_IMPORTED_MODULE_24__["WarningComponent"])
    ], ExecutionCharterEditPageComponent.prototype, "warningComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["HostListener"])('window:beforeunload', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], ExecutionCharterEditPageComponent.prototype, "unloadNotification", null);
    ExecutionCharterEditPageComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: 'atlas-execution-charter-edit-page',
            template: __webpack_require__(/*! ./execution-charter-edit-page.component.html */ "./Client/app/execution/execution-charter/execution-charter-edit-page/execution-charter-edit-page.component.html"),
            styles: [__webpack_require__(/*! ./execution-charter-edit-page.component.scss */ "./Client/app/execution/execution-charter/execution-charter-edit-page/execution-charter-edit-page.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_4__["ActivatedRoute"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_15__["ExecutionService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormBuilder"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_17__["SnackbarService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_4__["Router"],
            _angular_common__WEBPACK_IMPORTED_MODULE_0__["Location"],
            _angular_material__WEBPACK_IMPORTED_MODULE_3__["MatDialog"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_14__["FormConfigurationProviderService"],
            _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_16__["LockService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_26__["UtilService"],
            _shared_services_title_service__WEBPACK_IMPORTED_MODULE_25__["TitleService"]])
    ], ExecutionCharterEditPageComponent);
    return ExecutionCharterEditPageComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_7__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-list-page/execution-charter-list-page.component.html":
/*!***********************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-list-page/execution-charter-list-page.component.html ***!
  \***********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"main-container\">\r\n    <mat-card class=\"search-card\">\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"start none\"\r\n             class=\"search\">\r\n            <mat-form-field>\r\n                <input matInput\r\n                       [formControl]=\"searchCharterReferenceCtrl\"\r\n                       placeholder=\"Charter Ref\"\r\n                       autocomplete=\"off\"\r\n                       (keydown.enter)=\"onQuickSearchButtonClicked()\"\r\n                       #message>\r\n            </mat-form-field>\r\n\r\n            <mat-form-field>\r\n                <input matInput\r\n                       [formControl]=\"charterManagerCtrl\"\r\n                       placeholder=\"Charter Manager\"\r\n                       autocomplete=\"off\"\r\n                       (keydown.enter)=\"onQuickSearchButtonClicked()\"\r\n                       #action>\r\n            </mat-form-field>\r\n            <button mat-raised-button\r\n                    (click)=\"onQuickSearchButtonClicked()\"\r\n                    class=\"heroGradient\">\r\n                <mat-icon aria-label=\"Search\"\r\n                          class=\"search-icon\">search</mat-icon>\r\n            </button>\r\n        </div>\r\n    </mat-card>\r\n    <atlas-list-and-search class=\"default-height\"\r\n                           [gridCode]=\"gridCode\"\r\n                           [gridTitle]=\"'Charters'\"\r\n                           [additionalFilters]=\"additionalFilters\"\r\n                           (rowClicked)=\"onCharterRowClicked($event)\"\r\n                           (quickNavigate)=\"onQuickNavigate($event)\"\r\n                           [company]=\"company\"\r\n                           [dataLoader]=\"dataLoader\"\r\n                           [dataVersionId]=\"dataVersionId\"\r\n                           #listAndSearchComponent>\r\n    </atlas-list-and-search>\r\n</div>\r\n<atlas-floating-action-button [fabTitle]=\"fabTitle\"\r\n                              [fabType]=\"fabType\"\r\n                              [fabActions]=\"fabMenuActions\"\r\n                              [isParentLoaded]=\"!isLoading\"\r\n                              (fabActionClicked)=\"onFabActionClicked($event)\">\r\n</atlas-floating-action-button>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-list-page/execution-charter-list-page.component.scss":
/*!***********************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-list-page/execution-charter-list-page.component.scss ***!
  \***********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".mat-table {\n  overflow: auto; }\n\n.mat-form-field-wrapper {\n  padding-bottom: 0px;\n  margin-top: 0px !important;\n  margin-bottom: 0px !important; }\n\n.mat-form-field-flex {\n  height: 44px !important;\n  font-size: 14px !important;\n  border-top-left-radius: 0px !important;\n  border-bottom-left-radius: 0px !important; }\n\n.no-margin {\n  margin: 0; }\n\n.mat-form-field-infix {\n  padding-top: 5px !important; }\n\n.mat-error {\n  margin-top: 15px; }\n\n.large-form {\n  width: 100%;\n  border-radius: 5px 5px;\n  background-color: white; }\n\n.search-card {\n  margin-bottom: 16px; }\n\n.search-bar {\n  border-radius: 5px 5px;\n  background-color: #FFFAFC; }\n\n.table-title {\n  background-color: white; }\n\n.ag-header-row {\n  border-style: none !important; }\n\n.loading {\n  background-color: white;\n  padding-top: 2%;\n  padding-bottom: 2%; }\n\n.menu-header {\n  background-color: #53c234;\n  color: white; }\n\n.menu-header mat-icon {\n    color: white; }\n\n:host ::ng-deep.ag-menu {\n  overflow-y: hidden !important; }\n\n/*/deep/.mat-form-field-appearance-outline .mat-form-field-outline{\r\n\tcolor:white;\r\n}*/\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/execution-charter-list-page/execution-charter-list-page.component.ts":
/*!*********************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/execution-charter-list-page/execution-charter-list-page.component.ts ***!
  \*********************************************************************************************************************/
/*! exports provided: ExecutionCharterListPageComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExecutionCharterListPageComponent", function() { return ExecutionCharterListPageComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/services/authorization.service */ "./Client/app/core/services/authorization.service.ts");
/* harmony import */ var _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component */ "./Client/app/shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _shared_components_floating_action_button_floating_action_button_type_enum__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/components/floating-action-button/floating-action-button-type.enum */ "./Client/app/shared/components/floating-action-button/floating-action-button-type.enum.ts");
/* harmony import */ var _shared_components_list_and_search_list_and_search_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/components/list-and-search/list-and-search.component */ "./Client/app/shared/components/list-and-search/list-and-search.component.ts");
/* harmony import */ var _shared_entities_list_and_search_list_and_search_filter_entity__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../shared/entities/list-and-search/list-and-search-filter.entity */ "./Client/app/shared/entities/list-and-search/list-and-search-filter.entity.ts");
/* harmony import */ var _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../shared/entities/masterdata-props.entity */ "./Client/app/shared/entities/masterdata-props.entity.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_enums_charter_status_enum__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../shared/enums/charter-status.enum */ "./Client/app/shared/enums/charter-status.enum.ts");
/* harmony import */ var _shared_enums_list_and_search_filter_type_enum__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../shared/enums/list-and-search-filter-type.enum */ "./Client/app/shared/enums/list-and-search-filter-type.enum.ts");
/* harmony import */ var _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../shared/enums/permission-level.enum */ "./Client/app/shared/enums/permission-level.enum.ts");
/* harmony import */ var _shared_models_charter_display_view__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../shared/models/charter-display-view */ "./Client/app/shared/models/charter-display-view.ts");
/* harmony import */ var _shared_pipes_format_date_pipe_pipe__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../shared/pipes/format-date-pipe.pipe */ "./Client/app/shared/pipes/format-date-pipe.pipe.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../shared/services/grid-configuration-provider.service */ "./Client/app/shared/services/grid-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_list_and_search_charterList_data_loader__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../shared/services/list-and-search/charterList-data-loader */ "./Client/app/shared/services/list-and-search/charterList-data-loader.ts");
/* harmony import */ var _shared_services_security_service__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../shared/services/security.service */ "./Client/app/shared/services/security.service.ts");
/* harmony import */ var _shared_services_title_service__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../shared/services/title.service */ "./Client/app/shared/services/title.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _services_execution_actions_service__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../services/execution-actions.service */ "./Client/app/execution/services/execution-actions.service.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





























var ExecutionCharterListPageComponent = /** @class */ (function () {
    function ExecutionCharterListPageComponent(masterdataService, utilService, securityService, executionService, masterDataService, route, router, dialog, executionActionsService, formBuilder, formatDate, titleService, gridConfigurationProvider, uiService, authorizationService, gridService, dataLoader) {
        var _this = this;
        this.masterdataService = masterdataService;
        this.utilService = utilService;
        this.securityService = securityService;
        this.executionService = executionService;
        this.masterDataService = masterDataService;
        this.route = route;
        this.router = router;
        this.dialog = dialog;
        this.executionActionsService = executionActionsService;
        this.formBuilder = formBuilder;
        this.formatDate = formatDate;
        this.titleService = titleService;
        this.gridConfigurationProvider = gridConfigurationProvider;
        this.uiService = uiService;
        this.authorizationService = authorizationService;
        this.gridService = gridService;
        this.dataLoader = dataLoader;
        this.searchCharterReferenceCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_27__["AtlasFormControl"]('searchCharterReferenceCtrl');
        this.charterManagerCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_27__["AtlasFormControl"]('charterManagerCtrl');
        this.dataLength = 0;
        this.additionalFilters = [];
        this.gridCode = 'charterlist';
        this.charterGridOptions = {};
        this.charterGridColumns = [
            {
                headerName: 'Reference',
                field: 'charterCode',
                colId: 'charterCode',
                hide: false,
                sort: 'asc',
            },
            {
                headerName: 'Transport Type',
                field: 'transportType',
                colId: 'transportType',
                hide: true,
            },
            {
                headerName: 'Vessel',
                field: 'vessel',
                colId: 'vessel',
                hide: false,
            },
            {
                headerName: 'Description',
                field: 'description',
                colId: 'description',
                hide: false,
            },
            {
                headerName: 'Charter Status',
                field: 'charterStatusId',
                colId: 'charterStatusId',
                valueFormatter: this.charterStatusFormatter,
                hide: false,
            },
            {
                headerName: 'Charter Manager',
                field: 'charterManagerSamAccountName',
                colId: 'charterManagerSamAccountName',
                hide: false,
            },
            {
                headerName: 'Dept',
                colId: 'departmentId',
                field: 'departmentId',
                valueFormatter: this.departmentDescriptionFormatter.bind(this),
                hide: false,
            },
            {
                headerName: 'Charter B/L Date',
                field: 'blDate',
                colId: 'blDate',
                hide: false,
                valueFormatter: function (params) {
                    return _this.uiService.dateFormatter(params);
                },
                cellClass: 'dateFormat',
                valueGetter: function (params) {
                    var dateFormat = _this.formatDate;
                    var val = dateFormat.transformdate(params.data.blDate);
                    if (val) {
                        if (val.indexOf('/') < 0) {
                            return val;
                        }
                        else {
                            var split = val.split('/');
                            return split[2] + '-' + split[1] + '-' + split[0];
                        }
                    }
                },
            },
            {
                headerName: 'Created By',
                field: 'createdBy',
                colId: 'createdBy',
                hide: false,
            },
            {
                headerName: 'Date Created',
                field: 'creationDate',
                colId: 'creationDate',
                hide: false,
                valueFormatter: function (params) {
                    return _this.uiService.dateFormatter(params);
                },
                cellClass: 'dateFormat',
                valueGetter: function (params) {
                    var dateFormat = _this.formatDate;
                    var val = dateFormat.transformdate(params.data.creationDate);
                    if (val) {
                        if (val.indexOf('/') < 0) {
                            return val;
                        }
                        else {
                            var split = val.split('/');
                            return split[2] + '-' + split[1] + '-' + split[0];
                        }
                    }
                },
            },
        ];
        this.componentId = 'charterList';
        this.hasGridSharing = false;
        this.masterData = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_12__["MasterData"]();
        this.listOfMasterData = [
            _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_11__["MasterDataProps"].Ports,
            _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_11__["MasterDataProps"].TransportTypes,
            _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_11__["MasterDataProps"].Vessels,
        ];
        // FAB
        this.fabMenuActions = [];
        this.isLoaded = false;
        this.isLoading = true;
        this.excelStyles = [
            {
                id: 'dateFormat',
                dataType: 'dateTime',
                numberFormat: {
                    format: 'dd/mm/yyyy',
                },
            },
        ];
        this.checkIfUserHasRequiredPrivileges();
    }
    ExecutionCharterListPageComponent.prototype.departmentDescriptionFormatter = function (params) {
        var department = this.masterdata.departments.find(function (dept) { return dept.departmentId === params.value; });
        if (params.value && department) {
            return department.description;
        }
        return '';
    };
    ExecutionCharterListPageComponent.prototype.charterStatusFormatter = function (params) {
        if (params.value && _shared_enums_charter_status_enum__WEBPACK_IMPORTED_MODULE_13__["CharterStatus"][params.value]) {
            return _shared_enums_charter_status_enum__WEBPACK_IMPORTED_MODULE_13__["CharterStatus"][params.value].toString();
        }
        return '';
    };
    ExecutionCharterListPageComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.titleService.setTitle('Charters');
        this.masterdata = this.route.snapshot.data.masterdata;
        this.dataVersionId = this.route.snapshot.paramMap.get('dataVersionId') ?
            Number(this.route.snapshot.paramMap.get('dataVersionId')) : null;
        this.atlasAgGridParam = this.gridService.getAgGridParam();
        this.route.paramMap
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(function (params) { return params.get('company'); }))
            .subscribe(function (company) {
            _this.company = company;
        });
        this.securityService.isSecurityReady().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["concatMap"])(function () {
            return _this.gridConfigurationProvider.getConfiguration(_this.company, _this.componentId);
        })).subscribe(function (configuration) {
            // -- used later if this will become L&S maybe
            // this.columnConfiguration = configuration.columns;
            // this.configurationLoaded.emit();
            // this.initColumns(this.columnConfiguration);
            _this.hasGridSharing = configuration.hasMultipleViewsPerUser;
            _this.gridPreferences = {
                company: _this.company,
                gridId: _this.componentId,
                gridOptions: _this.charterGridOptions,
                sharingEnabled: _this.hasGridSharing,
            };
            _this.getAllCharters();
        });
    };
    ExecutionCharterListPageComponent.prototype.onGridReady = function (params) {
        this.gridService.sizeColumns(this.charterGridOptions);
        this.charterGridOptions.columnDefs = this.charterGridColumns;
        this.gridColumnApi = this.charterGridOptions.columnApi;
    };
    ExecutionCharterListPageComponent.prototype.getAllCharters = function () {
        var _this = this;
        this.masterDataService.getMasterData(this.listOfMasterData).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(function (masterData) {
            _this.initView(masterData);
        })).subscribe();
    };
    ExecutionCharterListPageComponent.prototype.initView = function (masterData) {
        var _this = this;
        this.executionService.getCharters()
            .subscribe(function (data) {
            _this.charters = data.value.map(function (charter) {
                return new _shared_models_charter_display_view__WEBPACK_IMPORTED_MODULE_16__["CharterDisplayView"](_this.getDescriptions(masterData, charter));
            });
            _this.charterGridRows = _this.charters;
            _this.initFABActions();
            _this.isLoading = false;
            _this.dataLength = _this.charterGridRows.length;
        });
    };
    ExecutionCharterListPageComponent.prototype.getDescriptions = function (masterData, charter) {
        if (charter.transportTypeCode) {
            this.transportTypeRecord = masterData.transportTypes
                .filter(function (transport) { return transport.transportTypeCode
                .toLowerCase().trim() === charter.transportTypeCode.toString()
                .toLowerCase().trim(); });
        }
        if (this.transportTypeRecord && this.transportTypeRecord.length > 0) {
            charter.transportTypeCode = this.transportTypeRecord[0].description;
        }
        var vesselRecord;
        if (charter.vesselCode) {
            vesselRecord = masterData.vessels
                .find(function (vessel) { return vessel.vesselName.toLowerCase().trim() === charter.vesselCode.toString().toLowerCase().trim(); });
        }
        if (vesselRecord) {
            charter.vesselCode = vesselRecord.vesselName;
        }
        return charter;
    };
    ExecutionCharterListPageComponent.prototype.onSearchCharters = function () {
        var _this = this;
        this.searchTerm = this.searchForm.get('searchCharterReferenceCtrl').value;
        if (!this.searchTerm) {
            return;
        }
        this.executionService.findChartersByReference(this.searchTerm)
            .subscribe(function (data) {
            _this.charters = data.value.map(function (charter) {
                return new _shared_models_charter_display_view__WEBPACK_IMPORTED_MODULE_16__["CharterDisplayView"](charter);
            });
            _this.charterGridRows = _this.charters;
            _this.dataLength = _this.charterGridRows.length;
            if (_this.charters == null || _this.charters.length === 0) {
                var confirmDialog = _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_7__["ConfirmationDialogComponent"], {
                    data: {
                        title: _this.searchTerm + '  doesn\'t exist',
                        text: '  Do you want to create a Charter with this Reference',
                        okButton: 'START CREATION',
                        cancelButton: 'DISCARD',
                    },
                });
                confirmDialog.afterClosed().subscribe(function (answer) {
                    if (answer) {
                        _this.router.navigate(['/' + _this.company + '/execution/charter/new/', { ref: _this.searchTerm }]);
                    }
                });
            }
            else if (_this.charters && _this.charters.length === 1) {
                _this.router.navigate([_this.company + '/execution/charter/details', _this.charters[0].charterId]);
                return;
            }
        });
    };
    ExecutionCharterListPageComponent.prototype.onCharterRowClicked = function (event) {
        var charterId = event.data.charterId;
        this.router.navigate([this.company + '/execution/charter/details', charterId]);
    };
    ExecutionCharterListPageComponent.prototype.onQuickNavigate = function (event) {
        var charterId = event.charterId;
        this.router.navigate([this.company + '/execution/charter/details', charterId]);
    };
    ExecutionCharterListPageComponent.prototype.onColumnVisibilityChanged = function (col) {
        this.userPreferencesComponent.onChangeColumnVisibility(col);
    };
    // For FAB
    ExecutionCharterListPageComponent.prototype.initFABActions = function () {
        this.fabType = _shared_components_floating_action_button_floating_action_button_type_enum__WEBPACK_IMPORTED_MODULE_8__["FABType"].ExtendedMenu;
        this.fabTitle = 'Charter Actions';
        var actionCreateCharter = {
            icon: 'add',
            text: 'Create Charter',
            action: 'createCharter',
            disabled: false,
            index: 0,
        };
        var actionGroupFunction = {
            icon: 'gamepad',
            text: 'Group Functions',
            action: 'groupFunctions',
            disabled: false,
            index: 1,
        };
        if (this.checkIfUserHasRequiredPrivileges()) {
            this.fabMenuActions.push(actionCreateCharter);
        }
        this.fabMenuActions.push(actionGroupFunction);
    };
    ExecutionCharterListPageComponent.prototype.onFabActionClicked = function (action) {
        if (action === 'createCharter') {
            this.router.navigate([this.company + '/execution/charter/new']);
        }
        if (action === 'groupFunctions') {
            this.executionActionsService.charterGroupFunctionsSubject.next();
        }
    };
    ExecutionCharterListPageComponent.prototype.onQuickSearchButtonClicked = function () {
        this.additionalFilters = [];
        var charterRefField = this.listAndSearchComponent.columnConfiguration
            .find(function (column) { return column.fieldName === 'CharterCode'; });
        var charterManagerField = this.listAndSearchComponent.columnConfiguration
            .find(function (column) { return column.fieldName === 'CharterManagerSamAccountName'; });
        if (!this.listAndSearchComponent) {
            return;
        }
        else {
            if (this.searchCharterReferenceCtrl.value && charterRefField) {
                var filterCharterReference = new _shared_entities_list_and_search_list_and_search_filter_entity__WEBPACK_IMPORTED_MODULE_10__["ListAndSearchFilter"]();
                filterCharterReference.fieldId = charterRefField.fieldId;
                filterCharterReference.fieldName = charterRefField.fieldName;
                filterCharterReference.predicate = {
                    filterType: _shared_enums_list_and_search_filter_type_enum__WEBPACK_IMPORTED_MODULE_14__["ListAndSearchFilterType"].Text,
                    operator: 'eq',
                    value1: this.searchCharterReferenceCtrl.value + '%',
                };
                filterCharterReference.isActive = true;
                this.additionalFilters = [filterCharterReference];
            }
        }
        if (this.charterManagerCtrl.value && charterManagerField) {
            var filterCharterManager = new _shared_entities_list_and_search_list_and_search_filter_entity__WEBPACK_IMPORTED_MODULE_10__["ListAndSearchFilter"]();
            filterCharterManager.fieldId = charterManagerField.fieldId;
            filterCharterManager.fieldName = charterManagerField.fieldName;
            filterCharterManager.predicate = {
                filterType: _shared_enums_list_and_search_filter_type_enum__WEBPACK_IMPORTED_MODULE_14__["ListAndSearchFilterType"].Text,
                operator: 'eq',
                value1: this.charterManagerCtrl.value + '%',
            };
            filterCharterManager.isActive = true;
            this.additionalFilters.push(filterCharterManager);
        }
        this.listAndSearchComponent.additionalFilters = this.additionalFilters;
        this.listAndSearchComponent.loadData(true);
    };
    ExecutionCharterListPageComponent.prototype.checkIfUserHasRequiredPrivileges = function () {
        if (this.authorizationService.isPrivilegeAllowed(this.company, 'Charters')) {
            if (this.authorizationService.isPrivilegeAllowed(this.company, 'ChartersView', _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_15__["PermissionLevels"].ReadWrite)) {
                return true;
            }
            else {
                return false;
            }
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('userPreferences'),
        __metadata("design:type", _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_6__["AgGridUserPreferencesComponent"])
    ], ExecutionCharterListPageComponent.prototype, "userPreferencesComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('listAndSearchComponent'),
        __metadata("design:type", _shared_components_list_and_search_list_and_search_component__WEBPACK_IMPORTED_MODULE_9__["ListAndSearchComponent"])
    ], ExecutionCharterListPageComponent.prototype, "listAndSearchComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])(_angular_material__WEBPACK_IMPORTED_MODULE_2__["MatPaginator"]),
        __metadata("design:type", _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatPaginator"])
    ], ExecutionCharterListPageComponent.prototype, "paginator", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])(_angular_material__WEBPACK_IMPORTED_MODULE_2__["MatSort"]),
        __metadata("design:type", _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatSort"])
    ], ExecutionCharterListPageComponent.prototype, "sort", void 0);
    ExecutionCharterListPageComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-execution-charter-list-page',
            template: __webpack_require__(/*! ./execution-charter-list-page.component.html */ "./Client/app/execution/execution-charter/execution-charter-list-page/execution-charter-list-page.component.html"),
            styles: [__webpack_require__(/*! ./execution-charter-list-page.component.scss */ "./Client/app/execution/execution-charter/execution-charter-list-page/execution-charter-list-page.component.scss")],
            providers: [_shared_services_list_and_search_charterList_data_loader__WEBPACK_IMPORTED_MODULE_22__["CharterListDataLoader"]],
        }),
        __metadata("design:paramtypes", [_shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_21__["MasterdataService"], _shared_services_util_service__WEBPACK_IMPORTED_MODULE_25__["UtilService"], _shared_services_security_service__WEBPACK_IMPORTED_MODULE_23__["SecurityService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_20__["ExecutionService"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_21__["MasterdataService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"],
            _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"],
            _services_execution_actions_service__WEBPACK_IMPORTED_MODULE_26__["ExecutionActionsService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_pipes_format_date_pipe_pipe__WEBPACK_IMPORTED_MODULE_17__["FormatDatePipe"],
            _shared_services_title_service__WEBPACK_IMPORTED_MODULE_24__["TitleService"],
            _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_19__["GridConfigurationProviderService"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_28__["UiService"],
            _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_5__["AuthorizationService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_18__["AgGridService"],
            _shared_services_list_and_search_charterList_data_loader__WEBPACK_IMPORTED_MODULE_22__["CharterListDataLoader"]])
    ], ExecutionCharterListPageComponent);
    return ExecutionCharterListPageComponent;
}());



/***/ }),

/***/ "./Client/app/execution/execution-charter/group-amendments/charter-bulk-closure/charter-bulk-closure.component.html":
/*!**************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/group-amendments/charter-bulk-closure/charter-bulk-closure.component.html ***!
  \**************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card *ifAuthorized=\"'Trades.Physicals.CloseTrade',company:this.company\">\r\n    <mat-card-title>\r\n        <h2>Bulk Closure</h2>\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div *ngFor=\"let groupFunctionType of charterGroupFunctionTypeMenu\">\r\n            <mat-checkbox #charterbulkCtrl\r\n                          [formControl]=\"charterBulkClosureCtrl\"\r\n                          [value]=\"groupFunctionType.charterFunctionTypeCode\"\r\n                          (change)=\"onSelectionChange($event,charterbulkCtrl.checked, groupFunctionType)\">\r\n                {{groupFunctionType.name}}\r\n            </mat-checkbox>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>"

/***/ }),

/***/ "./Client/app/execution/execution-charter/group-amendments/charter-bulk-closure/charter-bulk-closure.component.scss":
/*!**************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/group-amendments/charter-bulk-closure/charter-bulk-closure.component.scss ***!
  \**************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-charter/group-amendments/charter-bulk-closure/charter-bulk-closure.component.ts":
/*!************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/group-amendments/charter-bulk-closure/charter-bulk-closure.component.ts ***!
  \************************************************************************************************************************/
/*! exports provided: CharterBulkClosureComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CharterBulkClosureComponent", function() { return CharterBulkClosureComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_enums_charter_group_function_type__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../shared/enums/charter-group-function-type */ "./Client/app/shared/enums/charter-group-function-type.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var CharterBulkClosureComponent = /** @class */ (function (_super) {
    __extends(CharterBulkClosureComponent, _super);
    function CharterBulkClosureComponent(formConfigurationProvider, route, formBuilder) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.charterBulkClosureCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_1__["AtlasFormControl"]('charterBulkClosure');
        _this.charterGroupFunctionTypeMenu = [];
        _this.charterBulkClosureOptionChecked = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        return _this;
    }
    CharterBulkClosureComponent.prototype.ngOnInit = function () {
        this.company = this.route.snapshot.paramMap.get('company');
        this.charterGroupFunctionTypeMenu = this.charterGroupFunctionTypeMenu.filter(function (functionType) { return functionType.charterFunctionTypeCode === _shared_enums_charter_group_function_type__WEBPACK_IMPORTED_MODULE_4__["CharterGroupFunctionTypes"].CharterBulkClosure; });
    };
    CharterBulkClosureComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            charterBulkClosureCtrl: this.charterBulkClosureCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    CharterBulkClosureComponent.prototype.onSelectionChange = function ($event, value, groupFunctionType) {
        this.charterBulkClosureOptionChecked.emit({
            bulkClosureOption: Number(groupFunctionType.charterFunctionTypeCode),
            checked: Boolean(value),
        });
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CharterBulkClosureComponent.prototype, "charterBulkClosureOptionChecked", void 0);
    CharterBulkClosureComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-charter-bulk-closure',
            template: __webpack_require__(/*! ./charter-bulk-closure.component.html */ "./Client/app/execution/execution-charter/group-amendments/charter-bulk-closure/charter-bulk-closure.component.html"),
            styles: [__webpack_require__(/*! ./charter-bulk-closure.component.scss */ "./Client/app/execution/execution-charter/group-amendments/charter-bulk-closure/charter-bulk-closure.component.scss")]
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_3__["FormConfigurationProviderService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_5__["ActivatedRoute"], _angular_forms__WEBPACK_IMPORTED_MODULE_6__["FormBuilder"]])
    ], CharterBulkClosureComponent);
    return CharterBulkClosureComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-charter/group-amendments/execution-charter-group-amendments.component.html":
/*!*******************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/group-amendments/execution-charter-group-amendments.component.html ***!
  \*******************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<form>\r\n    <div class=\"main-container\">\r\n        <div fxLayout=\"row wrap\"\r\n             fxLayoutAlign=\"space-around start\">\r\n\r\n            <div fxLayout=\"column\"\r\n                 fxLayoutAlign=\"start left\"\r\n                 fxFlex=\"48\">\r\n                <atlas-charter-bulk-closure #charterBulkClosure\r\n                                            (charterBulkClosureOptionChecked)=\"onCharterBulkClosureOptionChecked($event)\">\r\n                </atlas-charter-bulk-closure>\r\n            </div>\r\n\r\n        </div>\r\n        <div fxLayout=\"row \"\r\n             fxLayoutAlign=\"space-between start\"\r\n             class=\"button-details\">\r\n            <div fxLayout=\"column \"\r\n                 fxLayoutAlign=\"start \">\r\n                <button (click)=\"onDiscardButtonClicked()\"\r\n                        mat-button>\r\n                    DISCARD\r\n                </button>\r\n            </div>\r\n            <div fxLayout=\"column \"\r\n                 fxLayoutAlign=\"start \">\r\n                <div fxLayout=\"row \"\r\n                     fxLayoutAlign=\"end start \">\r\n                    <button mat-raised-button\r\n                            (click)=\"onNextButtonClicked(charterBulkActionTypeId)\"\r\n                            [disabled]=\"isDisabled\">\r\n                        NEXT\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>"

/***/ }),

/***/ "./Client/app/execution/execution-charter/group-amendments/execution-charter-group-amendments.component.scss":
/*!*******************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/group-amendments/execution-charter-group-amendments.component.scss ***!
  \*******************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-charter/group-amendments/execution-charter-group-amendments.component.ts":
/*!*****************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/group-amendments/execution-charter-group-amendments.component.ts ***!
  \*****************************************************************************************************************/
/*! exports provided: ExecutionCharterGroupAmendmentsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExecutionCharterGroupAmendmentsComponent", function() { return ExecutionCharterGroupAmendmentsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _charter_bulk_closure_charter_bulk_closure_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./charter-bulk-closure/charter-bulk-closure.component */ "./Client/app/execution/execution-charter/group-amendments/charter-bulk-closure/charter-bulk-closure.component.ts");
/* harmony import */ var _shared_enums_charter_group_function_type__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../shared/enums/charter-group-function-type */ "./Client/app/shared/enums/charter-group-function-type.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_services_title_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/services/title.service */ "./Client/app/shared/services/title.service.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var ExecutionCharterGroupAmendmentsComponent = /** @class */ (function (_super) {
    __extends(ExecutionCharterGroupAmendmentsComponent, _super);
    function ExecutionCharterGroupAmendmentsComponent(formBuilder, titleService, formConfigurationProvider, router, companyManager) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.titleService = titleService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.router = router;
        _this.companyManager = companyManager;
        _this.charterGroupFunctionTypeMenu = [];
        _this.charterGroupFunctionFieldList = [];
        _this.formComponents = [];
        _this.isDisabled = true;
        _this.isSave = false;
        _this.populateListofOptions();
        return _this;
    }
    ExecutionCharterGroupAmendmentsComponent.prototype.ngOnInit = function () {
        this.charterBulkClosure.charterGroupFunctionTypeMenu = this.charterGroupFunctionTypeMenu;
        this.charterGroupFunctionFormGroup = this.formBuilder.group({
            charterBulkClosure: this.charterBulkClosure.getFormGroup(),
        });
        this.titleService.setTitle('Charter Bulk Actions');
        this.formComponents.push(this.charterBulkClosure);
    };
    ExecutionCharterGroupAmendmentsComponent.prototype.populateListofOptions = function () {
        var _this = this;
        this.charterGroupFunctionFieldList.push({
            charterbulkFunctionTypeId: 1,
            name: 'Bulk Closure Charter',
            charterFunctionTypeCode: _shared_enums_charter_group_function_type__WEBPACK_IMPORTED_MODULE_3__["CharterGroupFunctionTypes"].CharterBulkClosure,
        });
        this.charterGroupFunctionFieldList.filter(function (e) {
            _this.charterGroupFunctionTypeMenu.push(e);
        });
    };
    ExecutionCharterGroupAmendmentsComponent.prototype.onCharterBulkClosureOptionChecked = function ($event) {
        this.charterBulkActionTypeId = $event.bulkClosureOption;
        if ($event.checked) {
            this.isDisabled = false;
        }
        else {
            this.isDisabled = true;
        }
    };
    ExecutionCharterGroupAmendmentsComponent.prototype.onDiscardButtonClicked = function () {
        this.isSave = true;
        this.router.navigate(['/' + this.companyManager.getCurrentCompanyId() + '/execution/charter']);
    };
    ExecutionCharterGroupAmendmentsComponent.prototype.onNextButtonClicked = function (charterBulkActionTypeId) {
        this.isSave = true;
        this.router.navigate(['/' + this.companyManager.getCurrentCompanyId() +
                '/execution/charter/bulkActions/' + encodeURIComponent(charterBulkActionTypeId)]);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('charterBulkClosure'),
        __metadata("design:type", _charter_bulk_closure_charter_bulk_closure_component__WEBPACK_IMPORTED_MODULE_2__["CharterBulkClosureComponent"])
    ], ExecutionCharterGroupAmendmentsComponent.prototype, "charterBulkClosure", void 0);
    ExecutionCharterGroupAmendmentsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-execution-charter-group-amendments',
            template: __webpack_require__(/*! ./execution-charter-group-amendments.component.html */ "./Client/app/execution/execution-charter/group-amendments/execution-charter-group-amendments.component.html"),
            styles: [__webpack_require__(/*! ./execution-charter-group-amendments.component.scss */ "./Client/app/execution/execution-charter/group-amendments/execution-charter-group-amendments.component.scss")]
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_title_service__WEBPACK_IMPORTED_MODULE_5__["TitleService"], _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__["FormConfigurationProviderService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_7__["Router"], _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_8__["CompanyManagerService"]])
    ], ExecutionCharterGroupAmendmentsComponent);
    return ExecutionCharterGroupAmendmentsComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-matrix/charter-bulk-closure-matrix.component.html":
/*!************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-matrix/charter-bulk-closure-matrix.component.html ***!
  \************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class='mat-checkbox-height'\r\n     *ngIf=\"isGridReady\">\r\n    <mat-checkbox [(ngModel)]=\"selectAllCharterToClose\"\r\n                  (change)=\"onSelectAllClicked($event.checked)\"\r\n                  label=\"Select all\">Tick all/ Untick all\r\n    </mat-checkbox>\r\n</div>\r\n<div fxLayout=\"row\"\r\n     fxLayoutAlign=\"center center\"\r\n     fxLayoutWrap\r\n     *ngIf=\"!isGridReady\"\r\n     class=\"loading\">\r\n    <mat-spinner color=\"accent\"></mat-spinner>\r\n</div>\r\n<div class=\"ag-theme-material pointer-cursor\"\r\n     *ngIf=\"isGridReady\">\r\n    <ag-grid-angular style=\"width: 100%; height:450px\"\r\n                     id=\"myGrid\"\r\n                     class=\"ag-theme-material\"\r\n                     [columnDefs]=\"columnDefs\"\r\n                     [rowData]=\"rowData\"\r\n                     [getNodeChildDetails]=\"getNodeChildDetails\"\r\n                     [suppressRowClickSelection]=\"true\"\r\n                     [gridOptions]=\"bulkClosureGridOptions\"\r\n                     (rowSelected)=\"onSelectionChanged($event)\"\r\n                     [rowHeight]=\"atlasAgGridParam.rowHeight\"\r\n                     rowSelection=\"multiple\"\r\n                     (gridReady)=\"onGridReady($event)\">\r\n    </ag-grid-angular>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-matrix/charter-bulk-closure-matrix.component.scss":
/*!************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-matrix/charter-bulk-closure-matrix.component.scss ***!
  \************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "::ng-deep .ag-row-group-indent-0 {\n  font-weight: bold; }\n\n::ng-deep .status-background-color {\n  color: #635e5e !important; }\n\n::ng-deep .disabled-checkbox .ag-icon.ag-icon-checkbox-unchecked {\n  background: #a5a1aa4d;\n  border: 1px solid #8d7f7f; }\n\n::ng-deep .risky-for-closure {\n  background-color: red !important; }\n\n::ng-deep .cat-red {\n  background: #ffcccc;\n  color: #ff3e3e; }\n\n::ng-deep .cat-grn {\n  background: #ccefdc;\n  color: #35bf71; }\n\n::ng-deep .cat-org {\n  background: #fdefe6;\n  color: #df9768; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-matrix/charter-bulk-closure-matrix.component.ts":
/*!**********************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-matrix/charter-bulk-closure-matrix.component.ts ***!
  \**********************************************************************************************************************************************************/
/*! exports provided: CharterBulkClosureMatrixComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CharterBulkClosureMatrixComponent", function() { return CharterBulkClosureMatrixComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/services/authorization.service */ "./Client/app/core/services/authorization.service.ts");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_trading_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/services/http-services/trading.service */ "./Client/app/shared/services/http-services/trading.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _charter_matrix_data__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./charter-matrix-data */ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-matrix/charter-matrix-data.ts");
/* harmony import */ var _ag_grid_hyperlink_for_charter_bulk_closure_ag_grid_hyperlink_for_charter_bulk_closure_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../ag-grid-hyperlink-for-charter-bulk-closure/ag-grid-hyperlink-for-charter-bulk-closure.component */ "./Client/app/execution/execution-charter/ag-grid-hyperlink-for-charter-bulk-closure/ag-grid-hyperlink-for-charter-bulk-closure.component.ts");
/* harmony import */ var _ag_grid_charterstatus_for_charter_bulk_closure_ag_grid_charterstatus_for_charter_bulk_closure_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../ag-grid-charterstatus-for-charter-bulk-closure/ag-grid-charterstatus-for-charter-bulk-closure.component */ "./Client/app/execution/execution-charter/ag-grid-charterstatus-for-charter-bulk-closure/ag-grid-charterstatus-for-charter-bulk-closure.component.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_components_ag_grid_hyperlink_ag_grid_hyperlink_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../shared/components/ag-grid-hyperlink/ag-grid-hyperlink.component */ "./Client/app/shared/components/ag-grid-hyperlink/ag-grid-hyperlink.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};














var CharterBulkClosureMatrixComponent = /** @class */ (function (_super) {
    __extends(CharterBulkClosureMatrixComponent, _super);
    function CharterBulkClosureMatrixComponent(formConfigurationProvider, dialog, snackbarService, companyManager, router, authorizationService, tradingService, gridService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.dialog = dialog;
        _this.snackbarService = snackbarService;
        _this.companyManager = companyManager;
        _this.router = router;
        _this.authorizationService = authorizationService;
        _this.tradingService = tradingService;
        _this.gridService = gridService;
        _this.rowData = [];
        _this.tooltipMessage = 'Trade Status';
        _this.isGridReady = false;
        _this.bulkClosureGridOptions = {};
        _this.gridContext = {
            gridEditable: false,
            componentParent: _this,
        };
        _this.chartersClose = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.closeCharterGridReady = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        return _this;
    }
    CharterBulkClosureMatrixComponent.prototype.ngOnInit = function () {
        this.getGridColumns();
        this.atlasAgGridParam = this.gridService.getAgGridParam();
    };
    CharterBulkClosureMatrixComponent.prototype.ngAfterContentChecked = function () {
        if (this.charterDetailsMatrix.length === this.chartersLength && !this.isGridReady) {
            this.initializeRows();
        }
    };
    CharterBulkClosureMatrixComponent.prototype.getGridColumns = function () {
        var _this = this;
        this.columnDefs = [
            {
                headerName: '',
                field: "rowHeader",
                colSpan: function (params) {
                    return params.data.charterId ? 5 : 1;
                },
                cellClass: function (params) {
                    var className;
                    if (params.data.charterId && params.data.category === 'red') {
                        className = 'disabled-checkbox cat-red';
                    }
                    if (params.data.charterId && params.data.category === 'green') {
                        className = 'cat-grn';
                    }
                    if (params.data.charterId && params.data.category === 'orange') {
                        className = 'cat-org';
                    }
                    return className;
                },
                cellRenderer: "agGroupCellRenderer",
                cellRendererParams: {
                    checkbox: function (params) {
                        if (params.data.sectionId) {
                            return false;
                        }
                        return true;
                    },
                    suppressCount: true,
                    innerRendererFramework: _ag_grid_charterstatus_for_charter_bulk_closure_ag_grid_charterstatus_for_charter_bulk_closure_component__WEBPACK_IMPORTED_MODULE_11__["AgGridCharterStatusForCharterBulkClosureComponent"],
                },
            },
            {
                headerName: "",
                field: "sectionDetails",
                cellRendererFramework: _shared_components_ag_grid_hyperlink_ag_grid_hyperlink_component__WEBPACK_IMPORTED_MODULE_13__["AgGridHyperlinkComponent"],
                cellRendererParams: {
                    context: {
                        componentParent: this,
                    },
                },
            },
            {
                headerName: "Status",
                field: "message",
                cellStyle: function (params) {
                    if (params.value) {
                        if (params.data.message === 'Cost Accrual' || params.data.message === 'Invoices not cash matched') {
                            return { backgroundColor: 'LightSalmon', borderRadius: '2px !important;' };
                        }
                        if (params.data.message === 'Invoices not posted' || params.data.message === 'Cargo Accrual'
                            || params.data.message === 'No BL date, Unrealized Contract' || params.data.message === 'Trade is Already Blocked') {
                            return { backgroundColor: 'LightCoral', borderRadius: '2px !important;' };
                        }
                    }
                },
                cellRendererFramework: _ag_grid_hyperlink_for_charter_bulk_closure_ag_grid_hyperlink_for_charter_bulk_closure_component__WEBPACK_IMPORTED_MODULE_10__["AgGridHyperlinkForCharterBulkClosureComponent"],
                cellRendererParams: {
                    context: {
                        componentParent: this,
                    },
                },
                tooltip: function (params) {
                    if (params.data) {
                        if (params.data.message === 'Cost accrual') {
                            _this.tooltipMessage = 'link to ‘cost’ tab';
                        }
                        else if (params.data.message === 'Invoices not cash matched') {
                            _this.tooltipMessage = 'link to ‘Invoice marking’ tab';
                        }
                        else if (params.data.message === 'Cargo Accrual') {
                            _this.tooltipMessage = 'link to ‘Invoice marking’ tab';
                        }
                        else if (params.data.message === 'Invoices not posted') {
                            _this.tooltipMessage = 'link to ‘Invoice marking’ tab';
                        }
                        return _this.tooltipMessage;
                    }
                },
            },
            {
                headerName: "Net accrual/ P&L value",
                field: "netAccuralPnLValue",
            },
            {
                headerName: "%Invoice",
                field: "percentageInvoice",
            }
        ];
        this.getNodeChildDetails = function getNodeChildDetails(rowItem) {
            if (rowItem.sectionsAssigned) {
                return {
                    group: true,
                    expanded: false,
                    children: rowItem.sectionsAssigned,
                    key: rowItem.charterId,
                    checkboxSelection: true
                };
            }
            else {
                return null;
            }
        };
    };
    CharterBulkClosureMatrixComponent.prototype.initializeRows = function () {
        var _this = this;
        var treeStructuredCharter = [];
        this.charterDetailsMatrix.forEach(function (charter) {
            var charterTree = new _charter_matrix_data__WEBPACK_IMPORTED_MODULE_9__["CharterMatrixData"]();
            charterTree.sectionsAssigned = [];
            var sectionTree = [];
            charterTree.charterId = charter.charterId;
            charterTree.category = charter.category;
            charterTree.charterCode = charter.charterCode;
            charterTree.vesselName = charter.vesselName;
            charterTree.description = charter.description ? charter.description : '';
            if (charter.category === 'green') {
                charterTree.rowHeader = charterTree.charterCode + " - Vessel : " + charterTree.vesselName + " - Department : " + charterTree.description + " - Allowed for closure";
            }
            if (charter.category === 'orange') {
                charterTree.rowHeader = charterTree.charterCode + " - Vessel : " + charterTree.vesselName + " - Department : " + charterTree.description + " - Risky for closure";
            }
            if (charter.category === 'red') {
                charterTree.rowHeader = charterTree.charterCode + " - Vessel : " + charterTree.vesselName + " - Department : " + charterTree.description + " - Unavailable for closure";
            }
            if (charter.sectionsAssigned) {
                charter.sectionsAssigned.forEach(function (section) {
                    sectionTree.push({
                        message: section.message,
                        category: section.category,
                        netAccuralPnLValue: _this.getNetAccuralAndPnlValue(section),
                        percentageInvoice: section.percentageInvoice,
                        rowHeader: section.contractSectionCode,
                        sectionId: section.sectionId,
                        contractSectionCode: section.contractSectionCode,
                        sectionDetails: section.contractSectionCode
                    });
                });
                charterTree.sectionsAssigned = sectionTree;
            }
            treeStructuredCharter.push(charterTree);
        });
        treeStructuredCharter.sort(function (compareTo, compareFrom) {
            if (compareTo.category === 'green' && (compareFrom.category === 'orange' || compareFrom.category === 'red')) {
                return -1;
            }
            else if (compareTo.category === 'orange' && compareFrom.category === 'red') {
                return -1;
            }
            else {
                return 1;
            }
        });
        this.rowData = treeStructuredCharter;
        this.bulkClosureGridOptions = {
            context: this.gridContext,
            rowSelection: 'multiple',
        };
        this.isGridReady = true;
        this.autoSizeContractsGrid();
        this.closeCharterGridReady.emit(true);
    };
    CharterBulkClosureMatrixComponent.prototype.getNetAccuralAndPnlValue = function (section) {
        var result = '0';
        if (section.netAccuralPnLValue === 0) {
            if (section.costAssigned.length > 0) {
                for (var i = 0; i < section.costAssigned.length; i++) {
                    if (section.costAssigned[i].netAccrual !== 0 && result === '0') {
                        result = section.costAssigned[i].netAccrual.toString() + ' ' + section.costAssigned[i].currencyCode;
                    }
                }
            }
        }
        else {
            result = section.netAccuralPnLValue.toString() + ' ' + section.currencyCode;
        }
        return result;
    };
    CharterBulkClosureMatrixComponent.prototype.onGridReady = function (params) {
        var _this = this;
        params.columnDefs = this.columnDefs;
        this.gridParam = params;
        this.gridApi = params.api;
        this.gridColumnApi = params.columnApi;
        this.gridApi.forEachNode(function (node) {
            if (node.data.charterId && node.data.category === 'green') {
                node.setSelected(true);
            }
        });
        setTimeout(function () {
            _this.gridParam.api.sizeColumnsToFit();
        });
    };
    CharterBulkClosureMatrixComponent.prototype.onSelectionChanged = function (event) {
        this.gridApi.forEachNode(function (node) {
            if (node.data.charterId && node.data.category === 'red') {
                node.setSelected(false);
                node.selectable = false;
            }
        });
        var chartersRowsForClosure = this.gridApi.getSelectedRows();
        if (chartersRowsForClosure.length > 0) {
            this.chartersClose.emit(true);
        }
        else {
            this.chartersClose.emit(false);
        }
        this.gridApi.refreshCells(event.data);
        this.chartersForConfirmClosure = chartersRowsForClosure;
        if (this.chartersForConfirmClosure.length === this.rowData.filter(function (c) { return c.category !== 'red'; }).length) {
            this.selectAllCharterToClose = true;
        }
        else {
            this.selectAllCharterToClose = false;
        }
    };
    CharterBulkClosureMatrixComponent.prototype.autoSizeContractsGrid = function () {
        var _this = this;
        if (!this.gridApi)
            return;
        setTimeout(function () {
            _this.gridApi.sizeColumnsToFit();
            _this.gridApi.onRowHeightChanged();
        });
    };
    CharterBulkClosureMatrixComponent.prototype.onSelectAllClicked = function (input) {
        this.gridApi.forEachNode(function (node) {
            if (node.data.charterId && node.data.category === 'green') {
                node.setSelected(input);
            }
        });
    };
    CharterBulkClosureMatrixComponent.prototype.hyperlinkClicked = function (rowSelected, event) {
        var link = this.companyManager.getCurrentCompanyId() + "/trades/display/" + rowSelected.sectionId;
        window.open(link, '_blank');
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], CharterBulkClosureMatrixComponent.prototype, "charterDetailsMatrix", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Number)
    ], CharterBulkClosureMatrixComponent.prototype, "chartersLength", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CharterBulkClosureMatrixComponent.prototype, "chartersClose", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CharterBulkClosureMatrixComponent.prototype, "closeCharterGridReady", void 0);
    CharterBulkClosureMatrixComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-charter-bulk-closure-matrix',
            template: __webpack_require__(/*! ./charter-bulk-closure-matrix.component.html */ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-matrix/charter-bulk-closure-matrix.component.html"),
            styles: [__webpack_require__(/*! ./charter-bulk-closure-matrix.component.scss */ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-matrix/charter-bulk-closure-matrix.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__["FormConfigurationProviderService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_1__["MatDialog"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_8__["SnackbarService"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__["CompanyManagerService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"],
            _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_3__["AuthorizationService"],
            _shared_services_http_services_trading_service__WEBPACK_IMPORTED_MODULE_7__["TradingService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_12__["AgGridService"]])
    ], CharterBulkClosureMatrixComponent);
    return CharterBulkClosureMatrixComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-matrix/charter-matrix-data.ts":
/*!****************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-matrix/charter-matrix-data.ts ***!
  \****************************************************************************************************************************************/
/*! exports provided: CharterMatrixData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CharterMatrixData", function() { return CharterMatrixData; });
var CharterMatrixData = /** @class */ (function () {
    function CharterMatrixData() {
    }
    return CharterMatrixData;
}());



/***/ }),

/***/ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-summary/charter-bulk-closure-summary.component.html":
/*!**************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-summary/charter-bulk-closure-summary.component.html ***!
  \**************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div>\r\n    <ag-grid-angular style=\"width: 100%; height:450px\"\r\n                     id=\"myGrid\"\r\n                     class=\"ag-theme-material\"\r\n                     [columnDefs]=\"columnDefs\"\r\n                     [rowData]=\"rowData\"\r\n                     [getNodeChildDetails]=\"getNodeChildDetails\"\r\n                     [gridOptions]=\"bulkClosureGridOptions\"\r\n                     (gridReady)=\"onGridReady($event)\"\r\n                     [rowHeight]=atlasAgGridParam.rowHeight\r\n                     [pagination]=\"true\"\r\n                     [paginationPageSize]=\"10\">\r\n    </ag-grid-angular>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-summary/charter-bulk-closure-summary.component.scss":
/*!**************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-summary/charter-bulk-closure-summary.component.scss ***!
  \**************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-summary/charter-bulk-closure-summary.component.ts":
/*!************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-summary/charter-bulk-closure-summary.component.ts ***!
  \************************************************************************************************************************************************************/
/*! exports provided: CharterBulkClosureSummaryComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CharterBulkClosureSummaryComponent", function() { return CharterBulkClosureSummaryComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _charter_bulk_closure_matrix_charter_matrix_data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../charter-bulk-closure-matrix/charter-matrix-data */ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-matrix/charter-matrix-data.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var CharterBulkClosureSummaryComponent = /** @class */ (function () {
    function CharterBulkClosureSummaryComponent(gridService) {
        this.gridService = gridService;
        this.chartersForSummary = [];
        this.rowData = [];
        this.bulkClosureGridOptions = {};
        this.gridContext = {
            gridEditable: false,
            componentParent: this,
        };
    }
    CharterBulkClosureSummaryComponent.prototype.ngOnInit = function () {
        this.getGridColumns();
        this.atlasAgGridParam = this.gridService.getAgGridParam();
    };
    CharterBulkClosureSummaryComponent.prototype.charterForClosureSummary = function (charters) {
        this.chartersForSummary = charters;
        this.initializeGridRows();
    };
    CharterBulkClosureSummaryComponent.prototype.getGridColumns = function () {
        this.columnDefs = [
            {
                headerName: 'Closed Charters',
                field: "rowHeader",
                cellRenderer: "agGroupCellRenderer",
            }
        ];
        this.getNodeChildDetails = this.getNodeChildDetailsForTreeData;
    };
    CharterBulkClosureSummaryComponent.prototype.getNodeChildDetailsForTreeData = function (rowItem) {
        if (rowItem.sectionsAssigned) {
            return {
                group: true,
                expanded: true,
                children: rowItem.sectionsAssigned,
                key: rowItem.charterId
            };
        }
        else {
            return null;
        }
    };
    ;
    CharterBulkClosureSummaryComponent.prototype.initializeGridRows = function () {
        var treeStructuredCharter = [];
        this.chartersForSummary.forEach(function (charter) {
            var charterTree = new _charter_bulk_closure_matrix_charter_matrix_data__WEBPACK_IMPORTED_MODULE_1__["CharterMatrixData"]();
            charterTree.sectionsAssigned = [];
            var sectionTree = [];
            charterTree.charterId = charter.charterId;
            charterTree.category = charter.category;
            charterTree.charterCode = charter.charterCode;
            charterTree.vesselName = charter.vesselName;
            charterTree.rowHeader = charter.charterCode + " - " + charter.vesselName;
            if (charter.sectionsAssigned) {
                charter.sectionsAssigned.forEach(function (section) {
                    sectionTree.push({
                        message: '',
                        category: section.category,
                        netAccuralPnLValue: section.netAccuralPnLValue,
                        percentageInvoice: section.percentageInvoice,
                        rowHeader: section.contractSectionCode,
                        sectionId: section.sectionId,
                        contractSectionCode: section.contractSectionCode,
                        sectionDetails: section.contractSectionCode
                    });
                });
                charterTree.sectionsAssigned = sectionTree;
            }
            treeStructuredCharter.push(charterTree);
        });
        this.rowData = treeStructuredCharter;
        this.bulkClosureGridOptions = {
            context: this.gridContext,
            rowHeight: 35,
        };
        this.autoSizeContractsGrid();
    };
    CharterBulkClosureSummaryComponent.prototype.onGridReady = function (params) {
        params.columnDefs = this.columnDefs;
        this.gridParams = params;
        this.gridApi = params.api;
        this.gridColumnApi = params.columnApi;
        this.gridApi.showNoRowsOverlay();
        params.api.sizeColumnsToFit();
    };
    CharterBulkClosureSummaryComponent.prototype.autoSizeContractsGrid = function () {
        var _this = this;
        if (!this.gridApi)
            return;
        setTimeout(function () {
            _this.gridApi.sizeColumnsToFit();
            _this.gridApi.onRowHeightChanged();
            _this.gridApi.refreshCells(_this.gridParams);
        });
    };
    CharterBulkClosureSummaryComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-charter-bulk-closure-summary',
            template: __webpack_require__(/*! ./charter-bulk-closure-summary.component.html */ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-summary/charter-bulk-closure-summary.component.html"),
            styles: [__webpack_require__(/*! ./charter-bulk-closure-summary.component.scss */ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-summary/charter-bulk-closure-summary.component.scss")]
        }),
        __metadata("design:paramtypes", [_shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_2__["AgGridService"]])
    ], CharterBulkClosureSummaryComponent);
    return CharterBulkClosureSummaryComponent;
}());



/***/ }),

/***/ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-selection-bulk-closure/charter-selection-bulk-closure.component.html":
/*!******************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-selection-bulk-closure/charter-selection-bulk-closure.component.html ***!
  \******************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"main-container\">\r\n    <h2>Charter to close</h2>\r\n    <mat-card class=\"search-card\">\r\n        <div fxLayout=\"row\"\r\n             class=\"search\">\r\n            <form [formGroup]=\"searchForm\"\r\n                  ng-submit=\"onSearchCharters()\"\r\n                  class=\"large-form\">\r\n                <mat-form-field appearance=\"outline\"\r\n                                id=\"charter-search\">\r\n                    <input required\r\n                           specialIsAlphaNumeric\r\n                           autocomplete=\"off\"\r\n                           matInput\r\n                           formControlName=\"searchCharterReferenceCtrl\"\r\n                           (keydown.enter)=\"onSearchCharters()\"\r\n                           placeholder=\"Charter Ref\" />\r\n                </mat-form-field>\r\n            </form>\r\n            <button mat-raised-button\r\n                    (click)=\"onSearchCharters()\"\r\n                    class=\"heroGradient mat-raised-button\">\r\n                <mat-icon aria-label=\"Search\"\r\n                          class=\"search-icon\">search</mat-icon>\r\n            </button>\r\n        </div>\r\n    </mat-card>\r\n    <mat-card class=\"mat-elevation-z1 padding-small\">\r\n        <div fxLayout=\"row\"\r\n             class=\" table-title atlas-grid-card-header\">\r\n            <h2 class=\"atlas-grid-card-title\">Charters</h2>\r\n            <span class=\"fill-space\"></span>\r\n            <atlas-ag-grid-user-preferences *ngIf=\"charterGridOptions && charterGridOptions.columnDefs\"\r\n                                            [gridOptions]=\"charterGridOptions\"\r\n                                            [company]=\"company\"\r\n                                            [gridId]=\"componentId\"\r\n                                            [sharingEnabled]=\"hasGridSharing\"\r\n                                            #userPreferences>\r\n            </atlas-ag-grid-user-preferences>\r\n        </div>\r\n        <div style=\"width: 100%; height:100%\">\r\n            <div ag-grid=\"charterGridOptions\"\r\n                 class=\"ag-theme-material pointer-cursor\"\r\n                 style=\"width: 100%; height:100%\">\r\n                <ag-grid-angular style=\" height:100%;\"\r\n                                 class=\"ag-theme-material\"\r\n                                 [rowData]=\"charterGridRows\"\r\n                                 [columnDefs]=\"charterGridColumns\"\r\n                                 domLayout=\"autoHeight\"\r\n                                 (gridReady)=\"onGridReady($event)\"\r\n                                 (rowSelected)=\"onSelectionChanged($event)\"\r\n                                 (columnVisible)=\"onColumnVisibilityChanged($event)\"\r\n                                 [pagination]=\"true\"\r\n                                 [paginationPageSize]=\"10\"\r\n                                 [enableSorting]=\"true\"\r\n                                 [enableColResize]=\"true\"\r\n                                 enableFilter\r\n                                 [rowHeight]=\"atlasAgGridParam.rowHeight\"\r\n                                 [excelStyles]=\"excelStyles\"\r\n                                 rowSelection=\"multiple\">\r\n                </ag-grid-angular>\r\n            </div>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"center center\"\r\n             fxLayoutWrap\r\n             *ngIf=\"isLoading\"\r\n             class=\"loading\">\r\n            <mat-spinner color=\"accent\"></mat-spinner>\r\n        </div>\r\n    </mat-card>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-selection-bulk-closure/charter-selection-bulk-closure.component.scss":
/*!******************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-selection-bulk-closure/charter-selection-bulk-closure.component.scss ***!
  \******************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".mat-table {\n  overflow: auto; }\n\n.mat-form-field-wrapper {\n  padding-bottom: 0px;\n  margin-top: 0px !important;\n  margin-bottom: 0px !important; }\n\n.mat-form-field-flex {\n  height: 44px !important;\n  font-size: 14px !important;\n  border-top-left-radius: 0px !important;\n  border-bottom-left-radius: 0px !important; }\n\n.no-margin {\n  margin: 0; }\n\n.mat-form-field-infix {\n  padding-top: 5px !important; }\n\n.mat-error {\n  margin-top: 15px; }\n\n.large-form {\n  width: 100%;\n  border-radius: 5px 5px;\n  background-color: white; }\n\n.search-card {\n  margin-bottom: 30px; }\n\n.search-bar {\n  border-radius: 5px 5px;\n  background-color: #FFFAFC; }\n\n.table-title {\n  background-color: white; }\n\n.ag-header-row {\n  border-style: none !important; }\n\n.loading {\n  background-color: white;\n  padding-top: 2%;\n  padding-bottom: 2%; }\n\n.menu-header {\n  background-color: #53c234;\n  color: white; }\n\n.menu-header mat-icon {\n    color: white; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-selection-bulk-closure/charter-selection-bulk-closure.component.ts":
/*!****************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-selection-bulk-closure/charter-selection-bulk-closure.component.ts ***!
  \****************************************************************************************************************************************************************/
/*! exports provided: CharterSelectionBulkClosureComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CharterSelectionBulkClosureComponent", function() { return CharterSelectionBulkClosureComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component */ "./Client/app/shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component.ts");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_models_charter_display_view__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/models/charter-display-view */ "./Client/app/shared/models/charter-display-view.ts");
/* harmony import */ var _shared_services_title_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/services/title.service */ "./Client/app/shared/services/title.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_enums_charter_status_enum__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/enums/charter-status.enum */ "./Client/app/shared/enums/charter-status.enum.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_pipes_format_date_pipe_pipe__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../shared/pipes/format-date-pipe.pipe */ "./Client/app/shared/pipes/format-date-pipe.pipe.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../shared/services/grid-configuration-provider.service */ "./Client/app/shared/services/grid-configuration-provider.service.ts");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _shared_services_security_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../shared/services/security.service */ "./Client/app/shared/services/security.service.ts");
/* harmony import */ var _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../shared/entities/masterdata-props.entity */ "./Client/app/shared/entities/masterdata-props.entity.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


















var CharterSelectionBulkClosureComponent = /** @class */ (function () {
    function CharterSelectionBulkClosureComponent(formBuilder, titleService, masterdataService, uiService, route, formatDate, gridService, gridConfigurationProvider, securityService, executionService) {
        var _this = this;
        this.formBuilder = formBuilder;
        this.titleService = titleService;
        this.masterdataService = masterdataService;
        this.uiService = uiService;
        this.route = route;
        this.formatDate = formatDate;
        this.gridService = gridService;
        this.gridConfigurationProvider = gridConfigurationProvider;
        this.securityService = securityService;
        this.executionService = executionService;
        this.charterSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.searchCharterReferenceCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('searchCharterReferenceCtrl');
        this.dataLength = 0;
        this.isLoading = true;
        this.charterGridOptions = {};
        this.charterGridColumns = [
            {
                headerName: '',
                colId: 'selection',
                headerCheckboxSelection: true,
                checkboxSelection: true,
                minWidth: 40,
                maxWidth: 40,
                pinned: 'left',
            },
            {
                headerName: 'Reference',
                field: 'charterCode',
                colId: 'charterCode',
                hide: false,
                sort: 'asc',
            },
            {
                headerName: 'Transport Type',
                field: 'transportType',
                colId: 'transportType',
                hide: true,
            },
            {
                headerName: 'Vessel',
                field: 'vessel',
                colId: 'vessel',
                hide: false,
            },
            {
                headerName: 'Description',
                field: 'description',
                colId: 'description',
                hide: false,
            },
            {
                headerName: 'Charter Status',
                field: 'charterStatusId',
                colId: 'charterStatusId',
                valueFormatter: this.charterStatusFormatter,
                hide: false,
            },
            {
                headerName: 'Charter Manager',
                field: 'charterManagerSamAccountName',
                colId: 'charterManagerSamAccountName',
                hide: false,
            },
            {
                headerName: 'Dept',
                colId: 'departmentId',
                field: 'departmentId',
                valueFormatter: this.departmentDescriptionFormatter.bind(this),
                hide: false,
            },
            {
                headerName: 'Charter B/L Date',
                field: 'blDate',
                colId: 'blDate',
                hide: false,
                valueFormatter: function (params) {
                    return _this.uiService.dateFormatter(params);
                },
                cellClass: 'dateFormat',
                valueGetter: function (params) {
                    var dateFormat = _this.formatDate;
                    var val = dateFormat.transformdate(params.data.blDate);
                    if (val) {
                        if (val.indexOf('/') < 0) {
                            return val;
                        }
                        else {
                            var split = val.split('/');
                            return split[2] + '-' + split[1] + '-' + split[0];
                        }
                    }
                },
            },
            {
                headerName: 'Created By',
                field: 'createdBy',
                colId: 'createdBy',
                hide: false,
            },
            {
                headerName: 'Date Created',
                field: 'creationDate',
                colId: 'creationDate',
                hide: false,
                valueFormatter: function (params) {
                    return _this.uiService.dateFormatter(params);
                },
                cellClass: 'dateFormat',
                valueGetter: function (params) {
                    var dateFormat = _this.formatDate;
                    var val = dateFormat.transformdate(params.data.creationDate);
                    if (val) {
                        if (val.indexOf('/') < 0) {
                            return val;
                        }
                        else {
                            var split = val.split('/');
                            return split[2] + '-' + split[1] + '-' + split[0];
                        }
                    }
                },
            },
        ];
        this.componentId = 'charterList';
        this.hasGridSharing = false;
        this.masterDataList = [
            _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_16__["MasterDataProps"].Ports,
            _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_16__["MasterDataProps"].TransportTypes,
            _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_16__["MasterDataProps"].Vessels,
        ];
        this.searchForm = this.formBuilder.group({
            searchCharterReferenceCtrl: this.searchCharterReferenceCtrl,
        });
        this.excelStyles = [
            {
                id: 'dateFormat',
                dataType: 'dateTime',
                numberFormat: {
                    format: 'dd/mm/yyyy',
                },
            },
        ];
    }
    CharterSelectionBulkClosureComponent.prototype.departmentDescriptionFormatter = function (params) {
        var department = this.masterdata.departments.find(function (dept) { return dept.departmentId === params.value; });
        if (params.value && department) {
            return department.description;
        }
        return '';
    };
    CharterSelectionBulkClosureComponent.prototype.charterStatusFormatter = function (params) {
        if (params.value && _shared_enums_charter_status_enum__WEBPACK_IMPORTED_MODULE_8__["CharterStatus"][params.value]) {
            return _shared_enums_charter_status_enum__WEBPACK_IMPORTED_MODULE_8__["CharterStatus"][params.value].toString();
        }
        return '';
    };
    CharterSelectionBulkClosureComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.titleService.setTitle('Charters');
        this.masterdata = this.route.snapshot.data.masterdata;
        this.atlasAgGridParam = this.gridService.getAgGridParam();
        this.company = this.route.snapshot.paramMap.get('company');
        this.securityService.isSecurityReady().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_14__["concatMap"])(function () {
            return _this.gridConfigurationProvider.getConfiguration(_this.company, _this.componentId);
        })).subscribe(function (configuration) {
            _this.hasGridSharing = configuration.hasMultipleViewsPerUser;
            _this.getAllCharters();
        });
    };
    CharterSelectionBulkClosureComponent.prototype.getAllCharters = function () {
        var _this = this;
        this.masterdataService.getMasterData(this.masterDataList).subscribe(function (masterData) {
            _this.initView(masterData);
        });
    };
    CharterSelectionBulkClosureComponent.prototype.onSearchCharters = function () {
        var _this = this;
        this.searchTerm = this.searchForm.get('searchCharterReferenceCtrl').value;
        if (!this.searchTerm) {
            return;
        }
        this.executionService.findChartersByReference(this.searchTerm)
            .subscribe(function (data) {
            _this.charters = data.value.map(function (charter) {
                return new _shared_models_charter_display_view__WEBPACK_IMPORTED_MODULE_5__["CharterDisplayView"](charter);
            });
            _this.charterGridRows = _this.charters.filter(function (charter) {
                return charter.charterStatusId !== _shared_enums_charter_status_enum__WEBPACK_IMPORTED_MODULE_8__["CharterStatus"].Closed;
            });
            _this.dataLength = _this.charterGridRows.length;
        });
    };
    CharterSelectionBulkClosureComponent.prototype.onGridReady = function (params) {
        var _this = this;
        params.columnDefs = this.charterGridColumns;
        this.charterGridOptions = params;
        this.gridColumnApi = this.charterGridOptions.columnApi;
        this.gridApi = this.charterGridOptions.api;
        this.gridColumnApi.autoSizeAllColumns();
        window.onresize = function () {
            _this.gridColumnApi.autoSizeAllColumns();
        };
    };
    CharterSelectionBulkClosureComponent.prototype.onGridSizeChanged = function (params) {
        this.gridColumnApi = params.columnApi;
        this.gridColumnApi.autoSizeAllColumns();
    };
    CharterSelectionBulkClosureComponent.prototype.initView = function (masterData) {
        var _this = this;
        this.executionService.getCharters()
            .subscribe(function (data) {
            _this.charters = data.value.map(function (charter) {
                return new _shared_models_charter_display_view__WEBPACK_IMPORTED_MODULE_5__["CharterDisplayView"](_this.getDescriptions(masterData, charter));
            });
            _this.charterGridRows = _this.charters.filter(function (charter) {
                return charter.charterStatusId !== _shared_enums_charter_status_enum__WEBPACK_IMPORTED_MODULE_8__["CharterStatus"].Closed;
            });
            _this.isLoading = false;
            _this.dataLength = _this.charterGridRows.length;
        });
    };
    CharterSelectionBulkClosureComponent.prototype.getDescriptions = function (masterData, charter) {
        if (charter.transportTypeCode) {
            this.transportTypeRecord = masterData.transportTypes
                .filter(function (transport) { return transport.transportTypeCode
                .toLowerCase().trim() === charter.transportTypeCode.toString()
                .toLowerCase().trim(); });
        }
        if (this.transportTypeRecord && this.transportTypeRecord.length > 0) {
            charter.transportTypeCode = this.transportTypeRecord[0].description;
        }
        var vesselRecord;
        if (charter.vesselCode) {
            vesselRecord = masterData.vessels
                .find(function (vessel) { return vessel.vesselName.toLowerCase().trim() === charter.vesselCode.toString().toLowerCase().trim(); });
        }
        if (vesselRecord) {
            charter.vesselCode = vesselRecord.vesselName;
        }
        return charter;
    };
    CharterSelectionBulkClosureComponent.prototype.onSelectionChanged = function (event) {
        var selectedRows = this.gridApi.getSelectedRows();
        if (selectedRows.length > 0) {
            this.charterSelected.emit(true);
        }
        else {
            this.charterSelected.emit(false);
        }
        this.gridApi.refreshCells(event.data);
        this.selectedCharterForBulkFunctions = selectedRows;
    };
    CharterSelectionBulkClosureComponent.prototype.onColumnVisibilityChanged = function (col) {
        this.userPreferencesComponent.onChangeColumnVisibility(col);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('userPreferences'),
        __metadata("design:type", _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_1__["AgGridUserPreferencesComponent"])
    ], CharterSelectionBulkClosureComponent.prototype, "userPreferencesComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])(_angular_material__WEBPACK_IMPORTED_MODULE_2__["MatPaginator"]),
        __metadata("design:type", _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatPaginator"])
    ], CharterSelectionBulkClosureComponent.prototype, "paginator", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])(_angular_material__WEBPACK_IMPORTED_MODULE_2__["MatSort"]),
        __metadata("design:type", _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatSort"])
    ], CharterSelectionBulkClosureComponent.prototype, "sort", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CharterSelectionBulkClosureComponent.prototype, "charterSelected", void 0);
    CharterSelectionBulkClosureComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-charter-selection-bulk-closure',
            template: __webpack_require__(/*! ./charter-selection-bulk-closure.component.html */ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-selection-bulk-closure/charter-selection-bulk-closure.component.html"),
            styles: [__webpack_require__(/*! ./charter-selection-bulk-closure.component.scss */ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-selection-bulk-closure/charter-selection-bulk-closure.component.scss")]
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_3__["FormBuilder"], _shared_services_title_service__WEBPACK_IMPORTED_MODULE_6__["TitleService"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_7__["MasterdataService"], _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_9__["UiService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_10__["ActivatedRoute"], _shared_pipes_format_date_pipe_pipe__WEBPACK_IMPORTED_MODULE_11__["FormatDatePipe"], _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_12__["AgGridService"],
            _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_13__["GridConfigurationProviderService"], _shared_services_security_service__WEBPACK_IMPORTED_MODULE_15__["SecurityService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_17__["ExecutionService"]])
    ], CharterSelectionBulkClosureComponent);
    return CharterSelectionBulkClosureComponent;
}());



/***/ }),

/***/ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/execution-charter-bulk-closure-function.component.html":
/*!********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/group-function/bulk-closure-function/execution-charter-bulk-closure-function.component.html ***!
  \********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"main-container\">\r\n    <mat-horizontal-stepper [linear]\r\n                            (selectionChange)=\"onChangeStepAction($event)\"\r\n                            #stepper>\r\n        <ng-template matStepperIcon=\"edit\">\r\n            <mat-icon>check</mat-icon>\r\n        </ng-template>\r\n        <mat-step>\r\n            <ng-template matStepLabel>Charters to Close</ng-template>\r\n            <atlas-charter-selection-bulk-closure #chartersSelected\r\n                                                  (charterSelected)=\"onCharterSelected($event)\">\r\n            </atlas-charter-selection-bulk-closure>\r\n            <div fxLayout=\"row \"\r\n                 fxLayoutAlign=\"space-between start\"\r\n                 class=\"button-details\">\r\n                <div fxLayout=\"row \"\r\n                     fxLayoutAlign=\"start \">\r\n                    <button (click)=\"onCharterSelectionDiscardButtonClicked()\"\r\n                            mat-button>\r\n                        DISCARD\r\n                    </button>\r\n                    <button (click)=\"onCharterSelectionPreviousButtonClicked()\"\r\n                            mat-button>\r\n                        PREVIOUS\r\n                    </button>\r\n                </div>\r\n                <div fxLayout=\"column \"\r\n                     fxLayoutAlign=\"start \">\r\n                    <div fxLayout=\"row \"\r\n                         fxLayoutAlign=\"end start \">\r\n                        <button mat-raised-button\r\n                                (click)=\"onCharterSelectionNextButtonClicked()\"\r\n                                [disabled]=\"isChartersNextDisabled\">\r\n                            NEXT\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </mat-step>\r\n\r\n        <mat-step>\r\n            <ng-template matStepLabel>Details</ng-template>\r\n            <atlas-charter-bulk-closure-matrix #charterBulkClosureMatrix\r\n                                               *ngIf=\"step > 1\"\r\n                                               [(charterDetailsMatrix)]=\"chartersForBulkClosure\"\r\n                                               (chartersClose)=\"onCharterClose($event)\"\r\n                                               (closeCharterGridReady)=\"onCharterCloseGridReady($event)\"\r\n                                               [chartersLength]=\"chartersLength\">\r\n            </atlas-charter-bulk-closure-matrix>\r\n            <br />\r\n            <div fxLayout=\"row \"\r\n                 [style.display]=\"isCharterCloseGridReady ? 'block' : 'none'\"\r\n                 fxLayoutAlign=\"space-between start\"\r\n                 class=\"button-details\">\r\n                <div fxLayout=\"row \"\r\n                     fxLayoutAlign=\"start \">\r\n                    <button (click)=\"onClosureMatrixDiscardButtonClicked()\"\r\n                            mat-button>\r\n                        DISCARD\r\n                    </button>\r\n                    <button mat-button\r\n                            (click)=\"onClosureMatrixPreviousButtonClicked()\">\r\n                        PREVIOUS\r\n                    </button>\r\n                </div>\r\n                <div fxLayout=\"column \"\r\n                     fxLayoutAlign=\"start \">\r\n                    <div fxLayout=\"row \"\r\n                         fxLayoutAlign=\"end start \">\r\n                        <button mat-raised-button\r\n                                (click)=\"onBulkClosureConfirmButtonClicked()\"\r\n                                [disabled]=\"isCharterConfirmClosureDisabled\">\r\n                            CONFIRM CHARTER CLOSURE\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </mat-step>\r\n        <mat-step>\r\n            <ng-template matStepLabel>Summary</ng-template>\r\n            <atlas-charter-bulk-closure-summary #charterBulkClosureSummary></atlas-charter-bulk-closure-summary>\r\n            <div fxLayout=\"row \"\r\n                 fxLayoutAlign=\"space-between start\"\r\n                 class=\"button-details\">\r\n                <div fxLayout=\"column \"\r\n                     fxLayoutAlign=\"start \">\r\n                    <div fxLayout=\"row \"\r\n                         fxLayoutAlign=\"end start \">\r\n                        <button mat-raised-button\r\n                                (click)=\"onFinishButtonClicked()\">\r\n                            FINISH\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </mat-step>\r\n    </mat-horizontal-stepper>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/execution-charter-bulk-closure-function.component.scss":
/*!********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/group-function/bulk-closure-function/execution-charter-bulk-closure-function.component.scss ***!
  \********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/execution-charter-bulk-closure-function.component.ts":
/*!******************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/group-function/bulk-closure-function/execution-charter-bulk-closure-function.component.ts ***!
  \******************************************************************************************************************************************/
/*! exports provided: ExecutionCharterBulkClosureFunctionComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExecutionCharterBulkClosureFunctionComponent", function() { return ExecutionCharterBulkClosureFunctionComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _charter_selection_bulk_closure_charter_selection_bulk_closure_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./charter-selection-bulk-closure/charter-selection-bulk-closure.component */ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-selection-bulk-closure/charter-selection-bulk-closure.component.ts");
/* harmony import */ var _charter_bulk_closure_matrix_charter_bulk_closure_matrix_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./charter-bulk-closure-matrix/charter-bulk-closure-matrix.component */ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-matrix/charter-bulk-closure-matrix.component.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var _shared_entities_charter_bulk_closure_entity__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../shared/entities/charter-bulk-closure.entity */ "./Client/app/shared/entities/charter-bulk-closure.entity.ts");
/* harmony import */ var _shared_services_http_services_trading_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../shared/services/http-services/trading.service */ "./Client/app/shared/services/http-services/trading.service.ts");
/* harmony import */ var _shared_enums_posting_status_enum__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../shared/enums/posting-status.enum */ "./Client/app/shared/enums/posting-status.enum.ts");
/* harmony import */ var _shared_enums_invoicing_status_enum__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../shared/enums/invoicing-status.enum */ "./Client/app/shared/enums/invoicing-status.enum.ts");
/* harmony import */ var _shared_enums_contract_invoice_type_enum__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../shared/enums/contract-invoice-type.enum */ "./Client/app/shared/enums/contract-invoice-type.enum.ts");
/* harmony import */ var _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../shared/services/http-services/lock.service */ "./Client/app/shared/services/http-services/lock.service.ts");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _charter_bulk_closure_summary_charter_bulk_closure_summary_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./charter-bulk-closure-summary/charter-bulk-closure-summary.component */ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-summary/charter-bulk-closure-summary.component.ts");
/* harmony import */ var _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../shared/enums/charter-closure-status.enum */ "./Client/app/shared/enums/charter-closure-status.enum.ts");
/* harmony import */ var _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../shared/entities/lock-functional-context.entity */ "./Client/app/shared/entities/lock-functional-context.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



















var ExecutionCharterBulkClosureFunctionComponent = /** @class */ (function () {
    function ExecutionCharterBulkClosureFunctionComponent(router, companyManager, dialog, executionService, tradingService, lockService) {
        this.router = router;
        this.companyManager = companyManager;
        this.dialog = dialog;
        this.executionService = executionService;
        this.tradingService = tradingService;
        this.lockService = lockService;
        this.isChartersNextDisabled = true;
        this.isCharterConfirmClosureDisabled = true;
        this.selectedCharterIds = [];
        this.closureCharterIds = [];
        this.isLoading = false;
        this.assigneSectionIds = [];
        this.closureSectionIds = [];
        this.defaultDate = 'Mon Jan 01 0001';
        this.currentStep = 0;
        this.chartersForBulkClosure = [];
        this.selectChartersForSummaryScreen = [];
        this.isCharterCloseGridReady = false;
        this.subscriptions = [];
        this.destroy$ = new rxjs__WEBPACK_IMPORTED_MODULE_8__["Subject"]();
        this.step = 1;
    }
    ExecutionCharterBulkClosureFunctionComponent.prototype.ngOnInit = function () {
    };
    ExecutionCharterBulkClosureFunctionComponent.prototype.onCharterSelectionPreviousButtonClicked = function () {
        this.router.navigate([this.companyManager.getCurrentCompanyId() + '/execution/charter/groupfunctions']);
    };
    ExecutionCharterBulkClosureFunctionComponent.prototype.discardButtonDialog = function () {
        var confirmDiscardDialog = this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_4__["ConfirmationDialogComponent"], {
            data: {
                title: 'Discard Changes',
                text: 'You have some modification pending. Close and lose changes?',
                okButton: 'Ok',
                cancelButton: 'Cancel',
            },
        });
        confirmDiscardDialog.afterClosed().subscribe(function (answer) {
            if (answer) {
                window.location.reload();
            }
        });
    };
    ExecutionCharterBulkClosureFunctionComponent.prototype.onCharterSelectionNextButtonClicked = function () {
        var _this = this;
        var selectedCharters = this.chartersSelected.selectedCharterForBulkFunctions;
        this.chartersLength = selectedCharters.length;
        this.selectedCharterIds = [];
        this.selectedCharterIds = selectedCharters.map(function (element) {
            return element.charterId;
        });
        if (this.selectedCharterIds) {
            this.executionService.getAssignedSectionsForCharterList(this.selectedCharterIds)
                .subscribe(function (data) {
                if (data) {
                    _this.charterBulkClosure = data;
                    _this.charterBulkClosure.forEach(function (charter) {
                        _this.checkCharterLocked(charter);
                    });
                    _this.step = 2;
                    _this.stepper.next();
                }
            });
        }
        else {
            return '';
        }
    };
    ExecutionCharterBulkClosureFunctionComponent.prototype.onChangeStepAction = function (event) {
        this.currentStep = event.selectedIndex;
    };
    ExecutionCharterBulkClosureFunctionComponent.prototype.onCharterSelectionDiscardButtonClicked = function () {
        if (!this.isChartersNextDisabled) {
            this.discardButtonDialog();
        }
        else {
            window.location.reload();
        }
    };
    ExecutionCharterBulkClosureFunctionComponent.prototype.onCharterSelected = function (charterSelected) {
        if (charterSelected) {
            this.isChartersNextDisabled = false;
        }
        else {
            this.isChartersNextDisabled = true;
        }
    };
    ExecutionCharterBulkClosureFunctionComponent.prototype.unloadNotification = function (event) {
        this.lockService.cleanSessionLocks().subscribe(function () {
        });
    };
    ExecutionCharterBulkClosureFunctionComponent.prototype.ngOnDestroy = function () {
        this.lockService.cleanSessionLocks().subscribe(function () {
        });
    };
    ExecutionCharterBulkClosureFunctionComponent.prototype.checkCharterLocked = function (charter) {
        var _this = this;
        this.lockService.isLockedCharter(charter.charterId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__["takeUntil"])(this.destroy$)).subscribe(function (lock) {
            if (lock.isLocked) {
                charter.category = 'red';
                charter.message = 'Charter is Already Blocked';
                _this.checkTradeAvailableForClosure(charter);
            }
            else {
                _this.subscriptions.push(_this.lockService.lockCharter(charter.charterId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_18__["LockFunctionalContext"].CharterBulkClosure).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__["takeUntil"])(_this.destroy$)).subscribe(function (data) {
                    _this.checkTradeAvailableForClosure(charter);
                }));
            }
        });
    };
    ExecutionCharterBulkClosureFunctionComponent.prototype.checkTradeAvailableForClosure = function (charter) {
        var _this = this;
        var charterForClose = new _shared_entities_charter_bulk_closure_entity__WEBPACK_IMPORTED_MODULE_9__["CharterBulkClosure"]();
        charterForClose.charterId = charter.charterId;
        charterForClose.charterCode = charter.charterCode;
        charterForClose.dataVersionId = charter.dataVersionId;
        charterForClose.statusId = charter.statusId;
        charterForClose.category = charter.category ? charter.category : 'green';
        charterForClose.message = charter.message ? charter.message : '';
        charterForClose.description = charter.description;
        charterForClose.vesselName = charter.vesselName;
        charterForClose.sectionsAssigned = [];
        if (charter.sectionsAssigned.length > 0) {
            this.tradingService.getAssigedSectionDetailsToCloseCharter(charter.sectionsAssigned.map(function (s) { return s.sectionId; }))
                .subscribe(function (data) {
                if (data && data.length > 0) {
                    var _loop_1 = function (i) {
                        charterForClose.sectionsAssigned.push(charter.sectionsAssigned.find(function (x) { return x.sectionId == data[i].sectionId; }));
                        _this.lockService.isLockedContract(data[i].sectionId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__["takeUntil"])(_this.destroy$)).subscribe(function (lock) {
                            if (lock.isLocked) {
                                charterForClose.sectionsAssigned[i].category = 'red';
                                charterForClose.sectionsAssigned[i].message = 'Locked by ' + lock.message.split(' ')[7];
                                charterForClose.category = 'red';
                            }
                            else {
                                _this.subscriptions.push(_this.lockService.lockContract(data[i].sectionId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_18__["LockFunctionalContext"].CharterBulkClosure).subscribe(function (res) { }));
                                var validityStatus = _this.checkSectionClosureValidity(data[i], data[i].invoices);
                                switch (validityStatus) {
                                    case _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_17__["CharterClosureStatus"].FullyInvoiced:
                                    case _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_17__["CharterClosureStatus"].CancelledShipping:
                                    case _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_17__["CharterClosureStatus"].ZeroQuantity:
                                        charterForClose.sectionsAssigned[i].category = 'green';
                                        break;
                                    case _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_17__["CharterClosureStatus"].UnpostedInvoice:
                                        charterForClose.sectionsAssigned[i].category = 'red';
                                        charterForClose.sectionsAssigned[i].message = 'Invoices not posted';
                                        charterForClose.category = 'red';
                                        break;
                                    case _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_17__["CharterClosureStatus"].InvoiceNotFinalized:
                                        charterForClose.sectionsAssigned[i].category = 'red';
                                        charterForClose.sectionsAssigned[i].message = 'Cargo Accrual';
                                        charterForClose.category = 'red';
                                        break;
                                    case _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_17__["CharterClosureStatus"].NoBlDateUnrelizedTrade:
                                        charterForClose.sectionsAssigned[i].category = 'red';
                                        charterForClose.sectionsAssigned[i].message = 'No BL date, Unrealized Contract';
                                        charterForClose.category = 'red';
                                        break;
                                    case _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_17__["CharterClosureStatus"].UninvoicedCosts:
                                        charterForClose.sectionsAssigned[i].category = 'orange';
                                        charterForClose.sectionsAssigned[i].message = 'Cost Accrual';
                                        if (charterForClose.category != 'red') {
                                            charterForClose.category = 'orange';
                                        }
                                        break;
                                    case _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_17__["CharterClosureStatus"].UncashmatchedCosts:
                                        charterForClose.sectionsAssigned[i].category = 'orange';
                                        charterForClose.sectionsAssigned[i].message = 'Invoices not cash matched';
                                        if (charterForClose.category != 'red') {
                                            charterForClose.category = 'orange';
                                        }
                                        break;
                                }
                            }
                            if (i + 1 === data.length) {
                                _this.chartersForBulkClosure.push(charterForClose);
                            }
                        });
                    };
                    for (var i = 0; i < data.length; i++) {
                        _loop_1(i);
                    }
                }
                else {
                    _this.chartersForBulkClosure.push(charterForClose);
                }
            });
        }
        else {
            this.chartersForBulkClosure.push(charterForClose);
        }
    };
    ExecutionCharterBulkClosureFunctionComponent.prototype.checkSectionClosureValidity = function (closeSectionModel, invoiceModel) {
        var unpostedTradeInvoiceStatusList = invoiceModel.filter(function (invoice) { return invoice.postingStatusId !== _shared_enums_posting_status_enum__WEBPACK_IMPORTED_MODULE_11__["PostingStatus"].Posted; });
        var cashUnMatchedInvoiceTradeList = invoiceModel.filter(function (invoice) { return invoice.cashMatchPercentage !== 100; });
        var invoicePercentage = invoiceModel !== null || invoiceModel.length > 0 ? invoiceModel.reduce(function (a, b) { return a + b.invoicePercent; }, 0) : 0;
        var costFilteredByInvoiceStatus = closeSectionModel.costs.filter(function (cost) { return cost.invoiceStatus === _shared_enums_invoicing_status_enum__WEBPACK_IMPORTED_MODULE_12__["InvoicingStatus"].Uninvoiced; });
        if (invoiceModel.length > 0
            && invoicePercentage === 100
            && unpostedTradeInvoiceStatusList.length === 0
            && cashUnMatchedInvoiceTradeList.length === 0
            && (costFilteredByInvoiceStatus === null || costFilteredByInvoiceStatus.length === 0)) {
            return _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_17__["CharterClosureStatus"].FullyInvoiced;
        }
        else if (closeSectionModel.quantity === 0 || closeSectionModel.contractInvoiceTypeId === _shared_enums_contract_invoice_type_enum__WEBPACK_IMPORTED_MODULE_13__["ContractInvoiceType"].Cancellation) {
            return _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_17__["CharterClosureStatus"].ZeroQuantity;
        }
        else if (closeSectionModel.blDate === null ||
            closeSectionModel.blDate.toDateString() === this.defaultDate) {
            return _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_17__["CharterClosureStatus"].NoBlDateUnrelizedTrade;
        }
        else if (closeSectionModel.invoicingStatusId !== _shared_enums_invoicing_status_enum__WEBPACK_IMPORTED_MODULE_12__["InvoicingStatus"].Finalized) {
            return _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_17__["CharterClosureStatus"].InvoiceNotFinalized;
        }
        else if (unpostedTradeInvoiceStatusList.length > 0) {
            return _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_17__["CharterClosureStatus"].UnpostedInvoice;
        }
        else if (costFilteredByInvoiceStatus.length > 0) {
            return _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_17__["CharterClosureStatus"].UninvoicedCosts;
        }
        else if (unpostedTradeInvoiceStatusList.length === 0 && cashUnMatchedInvoiceTradeList.length > 0) {
            return _shared_enums_charter_closure_status_enum__WEBPACK_IMPORTED_MODULE_17__["CharterClosureStatus"].UncashmatchedCosts;
        }
    };
    ExecutionCharterBulkClosureFunctionComponent.prototype.onBulkClosureConfirmButtonClicked = function () {
        this.charterClosureSelected();
    };
    ExecutionCharterBulkClosureFunctionComponent.prototype.charterClosureSelected = function () {
        var _this = this;
        var selectedChartersForClosure = this.charterBulkClosureMatrix.chartersForConfirmClosure;
        this.closureCharterIds = selectedChartersForClosure.map(function (charter) { return charter.charterId; });
        this.closureSectionIds = [];
        selectedChartersForClosure.filter(function (element) {
            if (element.sectionsAssigned) {
                element.sectionsAssigned.filter(function (section) {
                    _this.closureSectionIds.push(section.sectionId);
                });
            }
        });
        if (this.closureSectionIds.length > 0) {
            this.tradingService.closeSection(this.closureSectionIds).subscribe(function (ok) {
                if (ok) {
                    _this.executionService.closeCharter(_this.closureCharterIds).subscribe(function (closedCharters) {
                        if (closedCharters) {
                            _this.selectChartersForSummaryScreen = closedCharters;
                            _this.charterBulkClosureSummary.charterForClosureSummary(_this.selectChartersForSummaryScreen);
                            _this.stepper.next();
                        }
                    });
                }
            });
        }
        else {
            this.executionService.closeCharter(this.closureCharterIds).subscribe(function (closedCharters) {
                if (closedCharters) {
                    _this.selectChartersForSummaryScreen = closedCharters;
                    _this.charterBulkClosureSummary.charterForClosureSummary(_this.selectChartersForSummaryScreen);
                    _this.stepper.next();
                }
            });
        }
    };
    ExecutionCharterBulkClosureFunctionComponent.prototype.onClosureMatrixPreviousButtonClicked = function () {
        this.stepper.previous();
        this.chartersForBulkClosure = [];
        this.charterBulkClosureMatrix.isGridReady = false;
        this.lockService.cleanSessionLocks().subscribe(function () {
        });
    };
    ExecutionCharterBulkClosureFunctionComponent.prototype.onClosureMatrixDiscardButtonClicked = function () {
        if (!this.isCharterConfirmClosureDisabled) {
            this.discardButtonFromDetailsStepperDialog();
        }
        else {
            this.lockService.cleanSessionLocks().subscribe(function () {
            });
            this.router.navigate([this.companyManager.getCurrentCompanyId() + '/execution/charter']);
        }
    };
    ExecutionCharterBulkClosureFunctionComponent.prototype.onCharterClose = function (charterForClosure) {
        if (charterForClosure) {
            this.isCharterConfirmClosureDisabled = false;
        }
        else {
            this.isCharterConfirmClosureDisabled = true;
        }
    };
    ExecutionCharterBulkClosureFunctionComponent.prototype.onCharterCloseGridReady = function (isCharterCloseGridReady) {
        this.isCharterCloseGridReady = true;
    };
    ExecutionCharterBulkClosureFunctionComponent.prototype.onFinishButtonClicked = function () {
        this.router.navigate([this.companyManager.getCurrentCompanyId() + '/execution/charter']);
    };
    ExecutionCharterBulkClosureFunctionComponent.prototype.discardButtonFromDetailsStepperDialog = function () {
        var _this = this;
        var confirmDiscardDialog = this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_4__["ConfirmationDialogComponent"], {
            data: {
                title: 'Discard Changes',
                text: 'You have some modification pending. Close and lose changes?',
                okButton: 'Ok',
                cancelButton: 'Cancel',
            },
        });
        confirmDiscardDialog.afterClosed().subscribe(function (answer) {
            if (answer) {
                _this.lockService.cleanSessionLocks().subscribe(function () {
                });
                _this.router.navigate([_this.companyManager.getCurrentCompanyId() + '/execution/charter']);
            }
        });
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('stepper'),
        __metadata("design:type", _angular_material__WEBPACK_IMPORTED_MODULE_1__["MatStepper"])
    ], ExecutionCharterBulkClosureFunctionComponent.prototype, "stepper", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('chartersSelected'),
        __metadata("design:type", _charter_selection_bulk_closure_charter_selection_bulk_closure_component__WEBPACK_IMPORTED_MODULE_5__["CharterSelectionBulkClosureComponent"])
    ], ExecutionCharterBulkClosureFunctionComponent.prototype, "chartersSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('charterBulkClosureMatrix'),
        __metadata("design:type", _charter_bulk_closure_matrix_charter_bulk_closure_matrix_component__WEBPACK_IMPORTED_MODULE_6__["CharterBulkClosureMatrixComponent"])
    ], ExecutionCharterBulkClosureFunctionComponent.prototype, "charterBulkClosureMatrix", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('charterBulkClosureSummary'),
        __metadata("design:type", _charter_bulk_closure_summary_charter_bulk_closure_summary_component__WEBPACK_IMPORTED_MODULE_16__["CharterBulkClosureSummaryComponent"])
    ], ExecutionCharterBulkClosureFunctionComponent.prototype, "charterBulkClosureSummary", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"])('window:beforeunload', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], ExecutionCharterBulkClosureFunctionComponent.prototype, "unloadNotification", null);
    ExecutionCharterBulkClosureFunctionComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-execution-charter-bulk-closure-function',
            template: __webpack_require__(/*! ./execution-charter-bulk-closure-function.component.html */ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/execution-charter-bulk-closure-function.component.html"),
            styles: [__webpack_require__(/*! ./execution-charter-bulk-closure-function.component.scss */ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/execution-charter-bulk-closure-function.component.scss")]
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"], _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_3__["CompanyManagerService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_1__["MatDialog"], _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_7__["ExecutionService"], _shared_services_http_services_trading_service__WEBPACK_IMPORTED_MODULE_10__["TradingService"],
            _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_14__["LockService"]])
    ], ExecutionCharterBulkClosureFunctionComponent);
    return ExecutionCharterBulkClosureFunctionComponent;
}());



/***/ }),

/***/ "./Client/app/execution/execution-charter/group-function/execution-charter-group-function.component.html":
/*!***************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/group-function/execution-charter-group-function.component.html ***!
  \***************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div [ngSwitch]=\"charterBulkActionTypeId\">\r\n    <atlas-execution-charter-bulk-closure-function #charterBulkClosureFunction\r\n                                                   *ngSwitchCase=charterGroupFunction.CharterBulkClosure>\r\n    </atlas-execution-charter-bulk-closure-function>\r\n\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-charter/group-function/execution-charter-group-function.component.scss":
/*!***************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/group-function/execution-charter-group-function.component.scss ***!
  \***************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-charter/group-function/execution-charter-group-function.component.ts":
/*!*************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-charter/group-function/execution-charter-group-function.component.ts ***!
  \*************************************************************************************************************/
/*! exports provided: ExecutionCharterGroupFunctionComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExecutionCharterGroupFunctionComponent", function() { return ExecutionCharterGroupFunctionComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_enums_charter_group_function_type__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../shared/enums/charter-group-function-type */ "./Client/app/shared/enums/charter-group-function-type.ts");
/* harmony import */ var _bulk_closure_function_execution_charter_bulk_closure_function_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./bulk-closure-function/execution-charter-bulk-closure-function.component */ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/execution-charter-bulk-closure-function.component.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var ExecutionCharterGroupFunctionComponent = /** @class */ (function () {
    function ExecutionCharterGroupFunctionComponent(formConfigurationProvider, route) {
        this.formConfigurationProvider = formConfigurationProvider;
        this.route = route;
        this.charterGroupFunction = _shared_enums_charter_group_function_type__WEBPACK_IMPORTED_MODULE_3__["CharterGroupFunctionTypes"];
        this.charterBulkActionTypeId = Number(decodeURIComponent(this.route.snapshot.paramMap.get('bulkActionTypeId')));
    }
    ExecutionCharterGroupFunctionComponent.prototype.ngOnInit = function () {
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('charterBulkClosureFunction'),
        __metadata("design:type", _bulk_closure_function_execution_charter_bulk_closure_function_component__WEBPACK_IMPORTED_MODULE_4__["ExecutionCharterBulkClosureFunctionComponent"])
    ], ExecutionCharterGroupFunctionComponent.prototype, "charterBulkClosureFunction", void 0);
    ExecutionCharterGroupFunctionComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-execution-charter-group-function',
            template: __webpack_require__(/*! ./execution-charter-group-function.component.html */ "./Client/app/execution/execution-charter/group-function/execution-charter-group-function.component.html"),
            styles: [__webpack_require__(/*! ./execution-charter-group-function.component.scss */ "./Client/app/execution/execution-charter/group-function/execution-charter-group-function.component.scss")]
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_1__["FormConfigurationProviderService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"]])
    ], ExecutionCharterGroupFunctionComponent);
    return ExecutionCharterGroupFunctionComponent;
}());



/***/ }),

/***/ "./Client/app/execution/execution-invoicing-create/components/cost-form-component/cost-form-component.component.html":
/*!***************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-create/components/cost-form-component/cost-form-component.component.html ***!
  \***************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-title>\r\n        <h2>Additional Invoicing</h2>\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div *ngFor=\"let invoicetype of invoiceTypeMenuItems\">\r\n            <mat-checkbox #costsCtrl\r\n                          [formControl]=\"costInvoiceCtrl\"\r\n                          [checked]=\"invoicetype.checked\"\r\n                          [value]=\"invoicetype.invoiceTypeId\"\r\n                          (change)=\"onInvoiceTypeChecked($event,costsCtrl.checked,invoicetype)\">{{invoicetype.name}}</mat-checkbox>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing-create/components/cost-form-component/cost-form-component.component.scss":
/*!***************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-create/components/cost-form-component/cost-form-component.component.scss ***!
  \***************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing-create/components/cost-form-component/cost-form-component.component.ts":
/*!*************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-create/components/cost-form-component/cost-form-component.component.ts ***!
  \*************************************************************************************************************************/
/*! exports provided: CostFormComponentComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CostFormComponentComponent", function() { return CostFormComponentComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_security_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../shared/services/security.service */ "./Client/app/shared/services/security.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var CostFormComponentComponent = /** @class */ (function (_super) {
    __extends(CostFormComponentComponent, _super);
    function CostFormComponentComponent(securityService, formBuilder, route, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.securityService = securityService;
        _this.formBuilder = formBuilder;
        _this.route = route;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.costOptionChecked = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.costInvoiceCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('costInvoiceType');
        return _this;
    }
    CostFormComponentComponent.prototype.ngOnInit = function () {
        this.company = this.route.snapshot.paramMap.get('company');
        this.masterData = this.route.snapshot.data.masterdata;
        this.invoiceTypeMenuItems = this.masterData.invoiceTypes.filter(function (invoicetype) { return invoicetype.invoiceTypeId === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].Cost; });
    };
    CostFormComponentComponent.prototype.onInvoiceTypeChecked = function ($event, value, invoicetype) {
        this.costOptionChecked.emit({
            costOption: Number(invoicetype.invoiceTypeId),
            checked: Boolean(value),
        });
    };
    CostFormComponentComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            costInvoiceCtrl: this.costInvoiceCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    CostFormComponentComponent.prototype.costOptionDisable = function () {
        this.costInvoiceCtrl.disable();
    };
    CostFormComponentComponent.prototype.costOptionEnable = function () {
        this.costInvoiceCtrl.enable();
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CostFormComponentComponent.prototype, "costOptionChecked", void 0);
    CostFormComponentComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-cost-form-component',
            template: __webpack_require__(/*! ./cost-form-component.component.html */ "./Client/app/execution/execution-invoicing-create/components/cost-form-component/cost-form-component.component.html"),
            styles: [__webpack_require__(/*! ./cost-form-component.component.scss */ "./Client/app/execution/execution-invoicing-create/components/cost-form-component/cost-form-component.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_security_service__WEBPACK_IMPORTED_MODULE_7__["SecurityService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__["FormConfigurationProviderService"]])
    ], CostFormComponentComponent);
    return CostFormComponentComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing-create/components/purchase-goods-form-component/purchase-goods-form-component.component.html":
/*!***********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-create/components/purchase-goods-form-component/purchase-goods-form-component.component.html ***!
  \***********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-title>\r\n        <h2>Purchase of Goods</h2>\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div *ngFor=\"let invoicetype of invoiceTypeMenuItems\">\r\n            <mat-checkbox #purchaseCtrl\r\n                          [formControl]=\"purchaseInvoiceCtrl\"\r\n                          [value]=\"invoicetype.invoiceTypeId\"\r\n                          (change)=\"OnChange($event,purchaseCtrl.checked,invoicetype)\">{{invoicetype.name}}</mat-checkbox>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing-create/components/purchase-goods-form-component/purchase-goods-form-component.component.scss":
/*!***********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-create/components/purchase-goods-form-component/purchase-goods-form-component.component.scss ***!
  \***********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing-create/components/purchase-goods-form-component/purchase-goods-form-component.component.ts":
/*!*********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-create/components/purchase-goods-form-component/purchase-goods-form-component.component.ts ***!
  \*********************************************************************************************************************************************/
/*! exports provided: PurchaseGoodsFormComponentComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PurchaseGoodsFormComponentComponent", function() { return PurchaseGoodsFormComponentComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../shared/enums/contract-type.enum */ "./Client/app/shared/enums/contract-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_security_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../shared/services/security.service */ "./Client/app/shared/services/security.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var PurchaseGoodsFormComponentComponent = /** @class */ (function (_super) {
    __extends(PurchaseGoodsFormComponentComponent, _super);
    function PurchaseGoodsFormComponentComponent(securityService, masterDataService, route, formBuilder, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.securityService = securityService;
        _this.masterDataService = masterDataService;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.purchaseOptionChecked = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.purchaseInvoiceCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('purchaseInvoiceType');
        _this.masterData = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__["MasterData"]();
        return _this;
    }
    PurchaseGoodsFormComponentComponent.prototype.ngOnInit = function () {
        this.company = this.route.snapshot.paramMap.get('company');
        this.masterData = this.route.snapshot.data.masterdata;
        this.invoiceTypeMenuItems = this.masterData.invoiceTypes.filter(function (contractCode) { return contractCode.contractTypeCode === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_6__["ContractTypes"].Purchase; });
    };
    PurchaseGoodsFormComponentComponent.prototype.OnChange = function ($event, value, invoicetype) {
        this.purchaseOptionChecked.emit({
            purchaseOption: Number(invoicetype.invoiceTypeId),
            checked: Boolean(value),
        });
    };
    PurchaseGoodsFormComponentComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            purchaseInvoiceCtrl: this.purchaseInvoiceCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    PurchaseGoodsFormComponentComponent.prototype.purchaseOptionDisable = function () {
        this.purchaseInvoiceCtrl.disable();
    };
    PurchaseGoodsFormComponentComponent.prototype.purchaseOptionEnable = function () {
        this.purchaseInvoiceCtrl.enable();
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], PurchaseGoodsFormComponentComponent.prototype, "purchaseOptionChecked", void 0);
    PurchaseGoodsFormComponentComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-purchase-goods-form-component',
            template: __webpack_require__(/*! ./purchase-goods-form-component.component.html */ "./Client/app/execution/execution-invoicing-create/components/purchase-goods-form-component/purchase-goods-form-component.component.html"),
            styles: [__webpack_require__(/*! ./purchase-goods-form-component.component.scss */ "./Client/app/execution/execution-invoicing-create/components/purchase-goods-form-component/purchase-goods-form-component.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_security_service__WEBPACK_IMPORTED_MODULE_9__["SecurityService"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_8__["MasterdataService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__["FormConfigurationProviderService"]])
    ], PurchaseGoodsFormComponentComponent);
    return PurchaseGoodsFormComponentComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing-create/components/quantity-invoice-form-component/quantity-invoice-form-component.component.html":
/*!***************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-create/components/quantity-invoice-form-component/quantity-invoice-form-component.component.html ***!
  \***************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-title>\r\n        <h2> Quantity to Invoice </h2>\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div>\r\n            <mat-checkbox [checked]=\"true\"\r\n                          disabled=true>\r\n                <label>Contract</label>\r\n            </mat-checkbox>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing-create/components/quantity-invoice-form-component/quantity-invoice-form-component.component.scss":
/*!***************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-create/components/quantity-invoice-form-component/quantity-invoice-form-component.component.scss ***!
  \***************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing-create/components/quantity-invoice-form-component/quantity-invoice-form-component.component.ts":
/*!*************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-create/components/quantity-invoice-form-component/quantity-invoice-form-component.component.ts ***!
  \*************************************************************************************************************************************************/
/*! exports provided: QuantityInvoiceFormComponentComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QuantityInvoiceFormComponentComponent", function() { return QuantityInvoiceFormComponentComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var QuantityInvoiceFormComponentComponent = /** @class */ (function (_super) {
    __extends(QuantityInvoiceFormComponentComponent, _super);
    function QuantityInvoiceFormComponentComponent(formBuilder, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        return _this;
    }
    QuantityInvoiceFormComponentComponent.prototype.ngOnInit = function () {
    };
    QuantityInvoiceFormComponentComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({});
        return _super.prototype.getFormGroup.call(this);
    };
    QuantityInvoiceFormComponentComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-quantity-invoice-form-component',
            template: __webpack_require__(/*! ./quantity-invoice-form-component.component.html */ "./Client/app/execution/execution-invoicing-create/components/quantity-invoice-form-component/quantity-invoice-form-component.component.html"),
            styles: [__webpack_require__(/*! ./quantity-invoice-form-component.component.scss */ "./Client/app/execution/execution-invoicing-create/components/quantity-invoice-form-component/quantity-invoice-form-component.component.scss")]
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_3__["FormConfigurationProviderService"]])
    ], QuantityInvoiceFormComponentComponent);
    return QuantityInvoiceFormComponentComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing-create/components/reversal-form-component/reversal-form-component.component.html":
/*!***********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-create/components/reversal-form-component/reversal-form-component.component.html ***!
  \***********************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-title>\r\n        <h2> Reversal</h2>\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div *ngFor=\"let invoiceType of invoiceTypeMenuItems\">\r\n            <mat-checkbox #reversalsCtrl\r\n                          [formControl]=\"reversalCtrl\"\r\n                          [checked]=\"invoiceType.checked\"\r\n                          [value]=\"invoiceType.invoiceTypeId\"\r\n                          (change)=\"onInvoiceTypeChecked($event,reversalsCtrl.checked,invoiceType)\">{{invoiceType.name}}</mat-checkbox>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing-create/components/reversal-form-component/reversal-form-component.component.scss":
/*!***********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-create/components/reversal-form-component/reversal-form-component.component.scss ***!
  \***********************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing-create/components/reversal-form-component/reversal-form-component.component.ts":
/*!*********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-create/components/reversal-form-component/reversal-form-component.component.ts ***!
  \*********************************************************************************************************************************/
/*! exports provided: ReversalFormComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReversalFormComponent", function() { return ReversalFormComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var ReversalFormComponent = /** @class */ (function (_super) {
    __extends(ReversalFormComponent, _super);
    function ReversalFormComponent(formBuilder, route, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.route = route;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.reversalOptionChecked = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.reversalCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('reversalType');
        return _this;
    }
    ReversalFormComponent.prototype.ngOnInit = function () {
        this.company = this.route.snapshot.paramMap.get('company');
        this.masterData = this.route.snapshot.data.masterdata;
        this.invoiceTypeMenuItems = this.masterData.invoiceTypes
            .filter(function (invoiceType) { return invoiceType.invoiceTypeId === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].Reversal; });
    };
    ReversalFormComponent.prototype.onInvoiceTypeChecked = function ($event, value, invoiceType) {
        this.reversalOptionChecked.emit({
            reversalOption: Number(invoiceType.invoiceTypeId),
            checked: Boolean(value),
        });
    };
    ReversalFormComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            reversalCtrl: this.reversalCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    ReversalFormComponent.prototype.reversalOptionDisable = function () {
        this.reversalCtrl.disable();
    };
    ReversalFormComponent.prototype.reversalOptionEnable = function () {
        this.reversalCtrl.enable();
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], ReversalFormComponent.prototype, "reversalOptionChecked", void 0);
    ReversalFormComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-reversal-form-component',
            template: __webpack_require__(/*! ./reversal-form-component.component.html */ "./Client/app/execution/execution-invoicing-create/components/reversal-form-component/reversal-form-component.component.html"),
            styles: [__webpack_require__(/*! ./reversal-form-component.component.scss */ "./Client/app/execution/execution-invoicing-create/components/reversal-form-component/reversal-form-component.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__["FormConfigurationProviderService"]])
    ], ReversalFormComponent);
    return ReversalFormComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing-create/components/sales-goods-form-component/sales-goods-form-component.component.html":
/*!*****************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-create/components/sales-goods-form-component/sales-goods-form-component.component.html ***!
  \*****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-title>\r\n        <h2>Sales of Goods</h2>\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div *ngFor=\"let invoicetype of invoiceTypeMenuItems\">\r\n            <mat-checkbox #salesCtrl\r\n                          [formControl]=\"salesInvoiceCtrl\"\r\n                          [value]=\"invoicetype.invoiceTypeId\"\r\n                          (change)=\"OnChange($event,salesCtrl.checked,invoicetype)\">{{invoicetype.name}}</mat-checkbox>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing-create/components/sales-goods-form-component/sales-goods-form-component.component.scss":
/*!*****************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-create/components/sales-goods-form-component/sales-goods-form-component.component.scss ***!
  \*****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing-create/components/sales-goods-form-component/sales-goods-form-component.component.ts":
/*!***************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-create/components/sales-goods-form-component/sales-goods-form-component.component.ts ***!
  \***************************************************************************************************************************************/
/*! exports provided: SalesGoodsFormComponentComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SalesGoodsFormComponentComponent", function() { return SalesGoodsFormComponentComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../shared/enums/contract-type.enum */ "./Client/app/shared/enums/contract-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_security_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../shared/services/security.service */ "./Client/app/shared/services/security.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var SalesGoodsFormComponentComponent = /** @class */ (function (_super) {
    __extends(SalesGoodsFormComponentComponent, _super);
    function SalesGoodsFormComponentComponent(securityService, masterDataService, route, formBuilder, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.securityService = securityService;
        _this.masterDataService = masterDataService;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.salesOptionChecked = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.salesInvoiceCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('salesInvoiceType');
        _this.masterData = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__["MasterData"]();
        return _this;
    }
    SalesGoodsFormComponentComponent.prototype.ngOnInit = function () {
        this.company = this.route.snapshot.paramMap.get('company');
        this.masterData = this.route.snapshot.data.masterdata;
        this.invoiceTypeMenuItems = this.masterData.invoiceTypes.filter(function (contractCode) { return contractCode.contractTypeCode === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_6__["ContractTypes"].Sale; });
    };
    SalesGoodsFormComponentComponent.prototype.OnChange = function ($event, value, invoicetype) {
        this.salesOptionChecked.emit({
            saleOption: Number(invoicetype.invoiceTypeId),
            checked: Boolean(value),
        });
    };
    SalesGoodsFormComponentComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            salesInvoiceCtrl: this.salesInvoiceCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    SalesGoodsFormComponentComponent.prototype.salesOptionDisable = function () {
        this.salesInvoiceCtrl.disable();
    };
    SalesGoodsFormComponentComponent.prototype.salesOptionEnable = function () {
        this.salesInvoiceCtrl.enable();
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], SalesGoodsFormComponentComponent.prototype, "salesOptionChecked", void 0);
    SalesGoodsFormComponentComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-sales-goods-form-component',
            template: __webpack_require__(/*! ./sales-goods-form-component.component.html */ "./Client/app/execution/execution-invoicing-create/components/sales-goods-form-component/sales-goods-form-component.component.html"),
            styles: [__webpack_require__(/*! ./sales-goods-form-component.component.scss */ "./Client/app/execution/execution-invoicing-create/components/sales-goods-form-component/sales-goods-form-component.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_security_service__WEBPACK_IMPORTED_MODULE_9__["SecurityService"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_8__["MasterdataService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__["FormConfigurationProviderService"]])
    ], SalesGoodsFormComponentComponent);
    return SalesGoodsFormComponentComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing-create/components/washout-form-component/washout-form-component.component.html":
/*!*********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-create/components/washout-form-component/washout-form-component.component.html ***!
  \*********************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-title>\r\n        <h2>Other Settlements</h2>\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div *ngFor=\"let invoiceType of invoiceTypeMenuItems\">\r\n            <mat-checkbox #washoutsCtrl\r\n                          [formControl]=\"washoutCtrl\"\r\n                          [checked]=\"invoiceType.checked\"\r\n                          [value]=\"invoiceType.invoiceTypeId\"\r\n                          (change)=\"onInvoiceTypeChecked($event,washoutsCtrl.checked,invoiceType)\">{{invoiceType.name}}</mat-checkbox>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing-create/components/washout-form-component/washout-form-component.component.scss":
/*!*********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-create/components/washout-form-component/washout-form-component.component.scss ***!
  \*********************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing-create/components/washout-form-component/washout-form-component.component.ts":
/*!*******************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-create/components/washout-form-component/washout-form-component.component.ts ***!
  \*******************************************************************************************************************************/
/*! exports provided: WashoutFormComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WashoutFormComponent", function() { return WashoutFormComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var WashoutFormComponent = /** @class */ (function (_super) {
    __extends(WashoutFormComponent, _super);
    function WashoutFormComponent(formBuilder, route, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.route = route;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.washoutOptionChecked = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.washoutCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('washoutType');
        return _this;
    }
    WashoutFormComponent.prototype.ngOnInit = function () {
        this.company = this.route.snapshot.paramMap.get('company');
        this.masterData = this.route.snapshot.data.masterdata;
        this.invoiceTypeMenuItems = this.masterData.invoiceTypes
            .filter(function (invoicetype) { return invoicetype.invoiceTypeId === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].Washout; });
    };
    WashoutFormComponent.prototype.onInvoiceTypeChecked = function ($event, value, invoiceType) {
        this.washoutOptionChecked.emit({
            washoutOption: Number(invoiceType.invoiceTypeId),
            checked: Boolean(value),
        });
    };
    WashoutFormComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            washoutCtrl: this.washoutCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    WashoutFormComponent.prototype.washoutOptionDisable = function () {
        this.washoutCtrl.disable();
    };
    WashoutFormComponent.prototype.washoutOptionEnable = function () {
        this.washoutCtrl.enable();
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], WashoutFormComponent.prototype, "washoutOptionChecked", void 0);
    WashoutFormComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-washout-form-component',
            template: __webpack_require__(/*! ./washout-form-component.component.html */ "./Client/app/execution/execution-invoicing-create/components/washout-form-component/washout-form-component.component.html"),
            styles: [__webpack_require__(/*! ./washout-form-component.component.scss */ "./Client/app/execution/execution-invoicing-create/components/washout-form-component/washout-form-component.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__["FormConfigurationProviderService"]])
    ], WashoutFormComponent);
    return WashoutFormComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing-create/execution-invoicing-create.component.html":
/*!***************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-create/execution-invoicing-create.component.html ***!
  \***************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<form>\r\n    <div class=\"main-container\">\r\n        <div fxLayout=\"row wrap\"\r\n             fxLayoutAlign=\"space-around start\">\r\n            <div fxLayout=\"column\"\r\n                 fxFlex=\"32\">\r\n                <atlas-purchase-goods-form-component #purchaseGoodsComponent\r\n                                                     fxFlex=\"32\"\r\n                                                     fxFlex.lt-md=\"85\"\r\n                                                     (purchaseOptionChecked)=\"onPurchaseOptionChecked($event)\">\r\n                </atlas-purchase-goods-form-component>\r\n\r\n                <atlas-cost-form-component #costComponent\r\n                                           fxFlex=\"32\"\r\n                                           fxFlex.lt-md=\"85\"\r\n                                           (costOptionChecked)=\"onCostsOptionChecked($event)\">\r\n                </atlas-cost-form-component>\r\n                <atlas-reversal-form-component #reversalFormComponent\r\n                                               fxFlex=\"32\"\r\n                                               fxFlex.lt-md=\"85\"\r\n                                               (reversalOptionChecked)=\"onReversalOptionChecked($event)\">\r\n\r\n                </atlas-reversal-form-component>\r\n            </div>\r\n            <div fxLayout=\"column\"\r\n                 fxFlex=\"32\">\r\n                <atlas-sales-goods-form-component #salesGoodsComponent\r\n                                                  fxFlex=\"32\"\r\n                                                  fxFlex.lt-md=\"85\"\r\n                                                  (salesOptionChecked)=\"onSalesOptionChecked($event)\">\r\n                </atlas-sales-goods-form-component>\r\n                <atlas-washout-form-component #washoutFormComponent\r\n                                              fxFlex=\"32\"\r\n                                              fxFlex.lt-md=\"85\"\r\n                                              (washoutOptionChecked)=\"onWashoutsOptionChecked($event)\">\r\n                </atlas-washout-form-component>\r\n            </div>\r\n            <div fxLayout=\"column\"\r\n                 fxFlex=\"32\">\r\n                <atlas-quantity-invoice-form-component #quantityInvoiceComponent\r\n                                                       fxFlex=\"32\"\r\n                                                       fxFlex.lt-md=\"85\"></atlas-quantity-invoice-form-component>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"btn-container\">\r\n            <div fxFlex=\"50\"\r\n                 fxLayout=\"row\"\r\n                 fxAlignLayout=\"start start\">\r\n                <button mat-button\r\n                        (click)=\"onDiscardButtonClicked()\">\r\n                    Discard\r\n                </button>\r\n            </div>\r\n            <div fxFlex=\"50\"\r\n                 fxLayout=\"row\"\r\n                 fxAlignLayout=\"start end\">\r\n                <span class=\"fill-space\"></span>\r\n                <button mat-raised-button\r\n                        (click)=\"onNextButtonClicked(invoiceOption)\"\r\n                        [disabled]=\"isDisabled\">\r\n                    Next\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing-create/execution-invoicing-create.component.scss":
/*!***************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-create/execution-invoicing-create.component.scss ***!
  \***************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "atlas-purchase-goods-form-component .mat-card,\natlas-sales-goods-form-component .mat-card,\natlas-quantity-invoice-form-component .mat-card {\n  height: 85px; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing-create/execution-invoicing-create.component.ts":
/*!*************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-create/execution-invoicing-create.component.ts ***!
  \*************************************************************************************************/
/*! exports provided: ExecutionInvoicingCreateComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExecutionInvoicingCreateComponent", function() { return ExecutionInvoicingCreateComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_title_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../shared/services/title.service */ "./Client/app/shared/services/title.service.ts");
/* harmony import */ var _execution_invoicing_commercial_components_commercial_selection_components_invoice_selection_form_component_invoice_selection_form_component_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../execution-invoicing/commercial/components/commercial-selection/components/invoice-selection-form-component/invoice-selection-form-component.component */ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/invoice-selection-form-component/invoice-selection-form-component.component.ts");
/* harmony import */ var _components_cost_form_component_cost_form_component_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./components/cost-form-component/cost-form-component.component */ "./Client/app/execution/execution-invoicing-create/components/cost-form-component/cost-form-component.component.ts");
/* harmony import */ var _components_purchase_goods_form_component_purchase_goods_form_component_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./components/purchase-goods-form-component/purchase-goods-form-component.component */ "./Client/app/execution/execution-invoicing-create/components/purchase-goods-form-component/purchase-goods-form-component.component.ts");
/* harmony import */ var _components_quantity_invoice_form_component_quantity_invoice_form_component_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./components/quantity-invoice-form-component/quantity-invoice-form-component.component */ "./Client/app/execution/execution-invoicing-create/components/quantity-invoice-form-component/quantity-invoice-form-component.component.ts");
/* harmony import */ var _components_reversal_form_component_reversal_form_component_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./components/reversal-form-component/reversal-form-component.component */ "./Client/app/execution/execution-invoicing-create/components/reversal-form-component/reversal-form-component.component.ts");
/* harmony import */ var _components_sales_goods_form_component_sales_goods_form_component_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./components/sales-goods-form-component/sales-goods-form-component.component */ "./Client/app/execution/execution-invoicing-create/components/sales-goods-form-component/sales-goods-form-component.component.ts");
/* harmony import */ var _components_washout_form_component_washout_form_component_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./components/washout-form-component/washout-form-component.component */ "./Client/app/execution/execution-invoicing-create/components/washout-form-component/washout-form-component.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

















var ExecutionInvoicingCreateComponent = /** @class */ (function (_super) {
    __extends(ExecutionInvoicingCreateComponent, _super);
    function ExecutionInvoicingCreateComponent(formBuilder, formConfigurationProvider, router, dialog, companyManager, titleService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.router = router;
        _this.dialog = dialog;
        _this.companyManager = companyManager;
        _this.titleService = titleService;
        _this.formComponents = [];
        _this.isPurchaseChecked = false;
        _this.isSalesChecked = false;
        _this.isCostChecked = false;
        _this.isSave = false;
        _this.isDisabled = true;
        return _this;
    }
    ExecutionInvoicingCreateComponent.prototype.ngOnInit = function () {
        this.invoiceCreationFormGroup = this.formBuilder.group({
            purchaseGoodsComponent: this.purchaseGoodsComponent.getFormGroup(),
            quantityInvoiceComponent: this.quantityInvoiceComponent.getFormGroup(),
            salesGoodsComponent: this.salesGoodsComponent.getFormGroup(),
            costComponent: this.costComponent.getFormGroup(),
            washoutFormComponent: this.washoutFormComponent.getFormGroup(),
            reversalFormComponent: this.reversalFormComponent.getFormGroup(),
        });
        this.titleService.setTitle('New Invoice');
        this.formComponents.push(this.purchaseGoodsComponent, this.quantityInvoiceComponent, this.salesGoodsComponent, this.costComponent, this.washoutFormComponent, this.reversalFormComponent);
    };
    ExecutionInvoicingCreateComponent.prototype.unloadNotification = function ($event) {
        if (this.invoiceCreationFormGroup.dirty) {
            $event.returnValue = true;
        }
    };
    ExecutionInvoicingCreateComponent.prototype.canDeactivate = function () {
        if (this.invoiceCreationFormGroup.dirty && this.isSave === false) {
            return window.confirm('Leave an unsave form? \nYour changes won\'t be applied!');
        }
        return true;
    };
    ExecutionInvoicingCreateComponent.prototype.onDiscardButtonClicked = function () {
        var _this = this;
        this.isSave = true;
        var confirmDiscardDialog = this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_6__["ConfirmationDialogComponent"], {
            data: {
                title: 'Discard Changes',
                text: 'You have some modification pending. Close and lose changes?',
                okButton: 'Ok',
                cancelButton: 'Cancel',
            },
        });
        confirmDiscardDialog.afterClosed().subscribe(function (answer) {
            if (answer) {
                _this.router.navigate(['/' + _this.companyManager.getCurrentCompanyId() + '/execution/invoicing/home']);
            }
        });
    };
    ExecutionInvoicingCreateComponent.prototype.onNextButtonClicked = function (invoiceOption) {
        this.isSave = true;
        this.router.navigate(['/' + this.companyManager.getCurrentCompanyId() +
                '/execution/invoicing/' + encodeURIComponent(invoiceOption)]);
    };
    ExecutionInvoicingCreateComponent.prototype.onPurchaseOptionChecked = function ($event) {
        this.invoiceOption = $event.purchaseOption;
        this.isPurchaseChecked = false;
        if ($event.checked) {
            this.isPurchaseChecked = true;
            if (this.isPurchaseChecked || this.isCostChecked) {
                this.isDisabled = false;
            }
            if (this.isCostChecked) {
                this.invoiceOption = _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceTypes"].GoodsCostPurchase;
            }
            this.salesGoodsComponent.salesOptionDisable();
            this.washoutFormComponent.washoutOptionDisable();
            this.reversalFormComponent.reversalOptionDisable();
        }
        else {
            if (this.isPurchaseChecked && this.isCostChecked) {
                this.isDisabled = true;
            }
            else if (this.isPurchaseChecked || this.isCostChecked) {
                this.isDisabled = false;
            }
            else {
                this.isDisabled = true;
            }
            this.salesGoodsComponent.salesOptionEnable();
            if (!this.isCostChecked) {
                this.washoutFormComponent.washoutOptionEnable();
                this.reversalFormComponent.reversalOptionEnable();
            }
        }
    };
    ExecutionInvoicingCreateComponent.prototype.onSalesOptionChecked = function ($event) {
        this.invoiceOption = $event.saleOption;
        this.isSalesChecked = false;
        if ($event.checked) {
            if (this.isCostChecked) {
                this.invoiceOption = _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceTypes"].GoodsCostSales;
            }
            this.isSalesChecked = true;
            if (this.isSalesChecked || this.isCostChecked) {
                this.isDisabled = false;
            }
            this.purchaseGoodsComponent.purchaseOptionDisable();
            this.washoutFormComponent.washoutOptionDisable();
            this.reversalFormComponent.reversalOptionDisable();
        }
        else {
            if (this.isSalesChecked && this.isCostChecked) {
                this.isDisabled = true;
            }
            else if (this.isSalesChecked || this.isCostChecked) {
                this.isDisabled = false;
            }
            else {
                this.isDisabled = true;
            }
            this.purchaseGoodsComponent.purchaseOptionEnable();
            if (!this.isCostChecked) {
                this.washoutFormComponent.washoutOptionEnable();
                this.reversalFormComponent.reversalOptionEnable();
            }
        }
    };
    ExecutionInvoicingCreateComponent.prototype.onCostsOptionChecked = function ($event) {
        this.invoiceOption = $event.costOption;
        this.isCostChecked = false;
        if ($event.checked) {
            this.isCostChecked = true;
            if (this.isPurchaseChecked || this.isCostChecked) {
                this.isDisabled = false;
            }
            if (this.isSalesChecked) {
                this.invoiceOption = _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceTypes"].GoodsCostSales;
                this.salesGoodsComponent.salesOptionEnable();
            }
            else if (this.isPurchaseChecked) {
                this.invoiceOption = _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceTypes"].GoodsCostPurchase;
                this.purchaseGoodsComponent.purchaseOptionEnable();
            }
            this.washoutFormComponent.washoutOptionDisable();
            this.reversalFormComponent.reversalOptionDisable();
        }
        else {
            if (this.isPurchaseChecked && this.isCostChecked) {
                this.isDisabled = true;
            }
            else if (this.isPurchaseChecked || this.isCostChecked || this.isSalesChecked) {
                this.isDisabled = false;
            }
            else {
                this.isDisabled = true;
            }
            if (this.isSalesChecked) {
                this.enableSaleAndDisableOtherInvoiceOptions();
            }
            else if (this.isPurchaseChecked) {
                this.enablePurchaseAndDisableOtherInvoiceOptions();
            }
            else {
                this.enableAllInvoiceOptions();
            }
        }
    };
    ExecutionInvoicingCreateComponent.prototype.enableAllInvoiceOptions = function () {
        this.purchaseGoodsComponent.purchaseOptionEnable();
        this.salesGoodsComponent.salesOptionEnable();
        this.washoutFormComponent.washoutOptionEnable();
        this.reversalFormComponent.reversalOptionEnable();
    };
    ExecutionInvoicingCreateComponent.prototype.enablePurchaseAndDisableOtherInvoiceOptions = function () {
        this.invoiceOption = _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceTypes"].Purchase;
        this.purchaseGoodsComponent.purchaseOptionEnable();
        this.salesGoodsComponent.salesOptionDisable();
        this.washoutFormComponent.washoutOptionDisable();
        this.reversalFormComponent.reversalOptionDisable();
    };
    ExecutionInvoicingCreateComponent.prototype.enableSaleAndDisableOtherInvoiceOptions = function () {
        this.invoiceOption = _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceTypes"].Sales;
        this.salesGoodsComponent.salesOptionEnable();
        this.purchaseGoodsComponent.purchaseOptionDisable();
        this.washoutFormComponent.washoutOptionDisable();
        this.reversalFormComponent.reversalOptionDisable();
    };
    ExecutionInvoicingCreateComponent.prototype.onWashoutsOptionChecked = function ($event) {
        this.invoiceOption = $event.washoutOption;
        if ($event.checked) {
            this.isDisabled = false;
            this.salesGoodsComponent.salesOptionDisable();
            this.purchaseGoodsComponent.purchaseOptionDisable();
            this.costComponent.costOptionDisable();
            this.reversalFormComponent.reversalOptionDisable();
        }
        else {
            this.isDisabled = true;
            this.salesGoodsComponent.salesOptionEnable();
            this.purchaseGoodsComponent.purchaseOptionEnable();
            this.costComponent.costOptionEnable();
            this.reversalFormComponent.reversalOptionEnable();
        }
    };
    ExecutionInvoicingCreateComponent.prototype.onReversalOptionChecked = function ($event) {
        this.invoiceOption = $event.reversalOption;
        if ($event.checked) {
            this.isDisabled = false;
            this.salesGoodsComponent.salesOptionDisable();
            this.purchaseGoodsComponent.purchaseOptionDisable();
            this.costComponent.costOptionDisable();
            this.washoutFormComponent.washoutOptionDisable();
        }
        else {
            this.isDisabled = true;
            this.salesGoodsComponent.salesOptionEnable();
            this.purchaseGoodsComponent.purchaseOptionEnable();
            this.costComponent.costOptionEnable();
            this.washoutFormComponent.washoutOptionEnable();
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('purchaseGoodsComponent'),
        __metadata("design:type", _components_purchase_goods_form_component_purchase_goods_form_component_component__WEBPACK_IMPORTED_MODULE_12__["PurchaseGoodsFormComponentComponent"])
    ], ExecutionInvoicingCreateComponent.prototype, "purchaseGoodsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('quantityInvoiceComponent'),
        __metadata("design:type", _components_quantity_invoice_form_component_quantity_invoice_form_component_component__WEBPACK_IMPORTED_MODULE_13__["QuantityInvoiceFormComponentComponent"])
    ], ExecutionInvoicingCreateComponent.prototype, "quantityInvoiceComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('salesGoodsComponent'),
        __metadata("design:type", _components_sales_goods_form_component_sales_goods_form_component_component__WEBPACK_IMPORTED_MODULE_15__["SalesGoodsFormComponentComponent"])
    ], ExecutionInvoicingCreateComponent.prototype, "salesGoodsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('invoiceSelectionFormComponent'),
        __metadata("design:type", _execution_invoicing_commercial_components_commercial_selection_components_invoice_selection_form_component_invoice_selection_form_component_component__WEBPACK_IMPORTED_MODULE_10__["InvoiceSelectionFormComponent"])
    ], ExecutionInvoicingCreateComponent.prototype, "invoiceSelectionFormComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('costComponent'),
        __metadata("design:type", _components_cost_form_component_cost_form_component_component__WEBPACK_IMPORTED_MODULE_11__["CostFormComponentComponent"])
    ], ExecutionInvoicingCreateComponent.prototype, "costComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('washoutFormComponent'),
        __metadata("design:type", _components_washout_form_component_washout_form_component_component__WEBPACK_IMPORTED_MODULE_16__["WashoutFormComponent"])
    ], ExecutionInvoicingCreateComponent.prototype, "washoutFormComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('reversalFormComponent'),
        __metadata("design:type", _components_reversal_form_component_reversal_form_component_component__WEBPACK_IMPORTED_MODULE_14__["ReversalFormComponent"])
    ], ExecutionInvoicingCreateComponent.prototype, "reversalFormComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"])('window:beforeunload', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], ExecutionInvoicingCreateComponent.prototype, "unloadNotification", null);
    ExecutionInvoicingCreateComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-execution-invoicing-create',
            template: __webpack_require__(/*! ./execution-invoicing-create.component.html */ "./Client/app/execution/execution-invoicing-create/execution-invoicing-create.component.html"),
            styles: [__webpack_require__(/*! ./execution-invoicing-create.component.scss */ "./Client/app/execution/execution-invoicing-create/execution-invoicing-create.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationProviderService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"],
            _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__["CompanyManagerService"],
            _shared_services_title_service__WEBPACK_IMPORTED_MODULE_9__["TitleService"]])
    ], ExecutionInvoicingCreateComponent);
    return ExecutionInvoicingCreateComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing-home/execution-invoicing-home.component.html":
/*!***********************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-home/execution-invoicing-home.component.html ***!
  \***********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<atlas-floating-action-button [fabTitle]=\"fabTitle\"\r\n                              [fabType]=\"fabType\"\r\n                              [fabActions]=\"fabMenuActions\"\r\n                              [isParentLoaded]=\"isLoaded\"\r\n                              (fabActionClicked)=\"onFabActionClicked($event)\">\r\n</atlas-floating-action-button>\r\n<div class=\"main-container\">\r\n    <mat-card>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"start none\"\r\n             class=\"search\">\r\n            <atlas-masterdata-user-preferences-input fxFlex=\"45%\"\r\n                                                     isEditable=\"true\"\r\n                                                     [fieldControl]=\"counterPartyCtrl\"\r\n                                                     [options]=\"filteredCounterPartyList\"\r\n                                                     label=\"Counter Party\"\r\n                                                     (keydown.enter)=\"onQuickSearchButtonClicked()\"\r\n                                                     displayProperty=\"counterpartyCode\"\r\n                                                     [selectProperties]=\"['counterpartyCode', 'description']\"\r\n                                                     [errorMap]=\"counterpartyErrorMap\"\r\n                                                     lightBoxTitle=\"Results for Counterparty\"\r\n                                                     gridId=\"counterpartiesGrid\"\r\n                                                     [dataLoader]=\"counterpartyDataLoader\">\r\n            </atlas-masterdata-user-preferences-input>\r\n            <mat-form-field>\r\n                <input matInput\r\n                       fxFlex=\"45%\"\r\n                       value=\"\"\r\n                       [formControl]=\"invoiceReferenceCtrl\"\r\n                       placeholder=\"Invoice Reference\"\r\n                       (keydown.enter)=\"onQuickSearchButtonClicked()\"\r\n                       #action>\r\n            </mat-form-field>\r\n            <button mat-raised-button\r\n                    class=\"heroGradient\">\r\n                <mat-icon aria-label=\"Search\"\r\n                          (click)=\"onQuickSearchButtonClicked()\"\r\n                          class=\"search-icon\">search</mat-icon>\r\n            </button>\r\n        </div>\r\n    </mat-card>\r\n\r\n    <atlas-list-and-search class=\"default-height\" [gridCode]=\"gridCode\"\r\n                           (rowClicked)=\"onInvoiceRowClicked($event)\"\r\n                           (quickNavigate)=\"onQuickNavigate($event)\"\r\n                           [company]=\"company\"\r\n                           [dataLoader]=\"dataLoader\"\r\n                           [additionalFilters]=\"additionalFilters\"\r\n                           gridTitle=\"Invoices\"\r\n                           #listAndSearchComponent>\r\n    </atlas-list-and-search>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing-home/execution-invoicing-home.component.scss":
/*!***********************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-home/execution-invoicing-home.component.scss ***!
  \***********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ":host ::ng-deep.ag-menu {\n  overflow-y: hidden !important; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing-home/execution-invoicing-home.component.ts":
/*!*********************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing-home/execution-invoicing-home.component.ts ***!
  \*********************************************************************************************/
/*! exports provided: ExecutionInvoicingHomeComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExecutionInvoicingHomeComponent", function() { return ExecutionInvoicingHomeComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/services/authorization.service */ "./Client/app/core/services/authorization.service.ts");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_floating_action_button_floating_action_button_type_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../shared/components/floating-action-button/floating-action-button-type.enum */ "./Client/app/shared/components/floating-action-button/floating-action-button-type.enum.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_services_list_and_search_invoice_data_loader__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../shared/services/list-and-search/invoice-data-loader */ "./Client/app/shared/services/list-and-search/invoice-data-loader.ts");
/* harmony import */ var _shared_services_masterdata_counterparty_data_loader__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../shared/services/masterdata/counterparty-data-loader */ "./Client/app/shared/services/masterdata/counterparty-data-loader.ts");
/* harmony import */ var _shared_services_security_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../shared/services/security.service */ "./Client/app/shared/services/security.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _shared_components_list_and_search_list_and_search_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./../../shared/components/list-and-search/list-and-search.component */ "./Client/app/shared/components/list-and-search/list-and-search.component.ts");
/* harmony import */ var _shared_entities_list_and_search_list_and_search_filter_entity__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./../../shared/entities/list-and-search/list-and-search-filter.entity */ "./Client/app/shared/entities/list-and-search/list-and-search-filter.entity.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_enums_list_and_search_filter_type_enum__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./../../shared/enums/list-and-search-filter-type.enum */ "./Client/app/shared/enums/list-and-search-filter-type.enum.ts");
/* harmony import */ var _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./../../shared/enums/permission-level.enum */ "./Client/app/shared/enums/permission-level.enum.ts");
/* harmony import */ var _shared_services_title_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./../../shared/services/title.service */ "./Client/app/shared/services/title.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


















var ExecutionInvoicingHomeComponent = /** @class */ (function () {
    function ExecutionInvoicingHomeComponent(securityService, router, route, companyManager, dataLoader, counterpartyDataLoader, utilService, authorizationService, titleService) {
        this.securityService = securityService;
        this.router = router;
        this.route = route;
        this.companyManager = companyManager;
        this.dataLoader = dataLoader;
        this.counterpartyDataLoader = counterpartyDataLoader;
        this.utilService = utilService;
        this.authorizationService = authorizationService;
        this.titleService = titleService;
        this.gridCode = 'invoiceList';
        this.invoiceTypeMap = new Map();
        this.invoiceReferenceCtrl = new _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormControl"]();
        this.PermissionLevels = _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_16__["PermissionLevels"];
        this.additionalFilters = [];
        this.masterdata = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_7__["MasterData"]();
        this.counterPartyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('CounterPartyHomeInvoice');
        this.counterpartyErrorMap = new Map()
            .set('inDropdownList', 'Invalid entry. Counter Party not in the list.');
        this.fabMenuActions = [];
        this.isLoaded = false;
    }
    ExecutionInvoicingHomeComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.masterdata = this.route.snapshot.data.masterdata;
        this.securityService.isSecurityReady().subscribe(function () {
            _this.company = _this.route.snapshot.paramMap.get('company');
        });
        this.titleService.setTitle(this.route.snapshot.data.title);
        this.filteredCounterPartyList = this.masterdata.counterparties;
        this.counterPartyCtrl.valueChanges.subscribe(function (input) {
            _this.filterCounterParty(input);
        });
        this.initFABActions();
    };
    ExecutionInvoicingHomeComponent.prototype.filterCounterParty = function (input) {
        this.filteredCounterPartyList = this.utilService.filterListforAutocomplete(input, this.masterdata.counterparties, ['counterpartyCode', 'description']);
        if (this.counterPartyCtrl.valid || !this.counterPartyCtrl.value) {
            this.onQuickSearchButtonClicked();
        }
    };
    ExecutionInvoicingHomeComponent.prototype.onNewInvoiceButtonClicked = function () {
        this.router.navigate(['/' + this.companyManager.getCurrentCompanyId() + '/execution/invoicing/new']);
    };
    ExecutionInvoicingHomeComponent.prototype.onQuickSearchButtonClicked = function () {
        this.additionalFilters = [];
        var searchCounterParty;
        if (this.counterPartyCtrl.value) {
            searchCounterParty = this.counterPartyCtrl.value.counterpartyCode;
            if (!searchCounterParty) {
                searchCounterParty = this.counterPartyCtrl.value;
            }
        }
        var invoicereferenceField = this.listAndSearchComponent.columnConfiguration
            .find(function (column) { return column.fieldName === 'InvoiceCode'; });
        var counterpartyCodeField = this.listAndSearchComponent.columnConfiguration
            .find(function (column) { return column.fieldName === 'CounterParty'; });
        if (!this.listAndSearchComponent) {
            return;
        }
        else {
            if (this.invoiceReferenceCtrl.value && invoicereferenceField) {
                var filterInvoiceReference = new _shared_entities_list_and_search_list_and_search_filter_entity__WEBPACK_IMPORTED_MODULE_13__["ListAndSearchFilter"]();
                filterInvoiceReference.fieldId = invoicereferenceField.fieldId;
                filterInvoiceReference.fieldName = invoicereferenceField.fieldName;
                filterInvoiceReference.predicate = {
                    filterType: _shared_enums_list_and_search_filter_type_enum__WEBPACK_IMPORTED_MODULE_15__["ListAndSearchFilterType"].Text,
                    operator: 'eq',
                    value1: this.invoiceReferenceCtrl.value + '%',
                };
                filterInvoiceReference.isActive = true;
                this.additionalFilters = [filterInvoiceReference];
            }
            if (this.counterPartyCtrl.value && counterpartyCodeField) {
                var filterCounterParty = new _shared_entities_list_and_search_list_and_search_filter_entity__WEBPACK_IMPORTED_MODULE_13__["ListAndSearchFilter"]();
                filterCounterParty.fieldId = counterpartyCodeField.fieldId;
                filterCounterParty.fieldName = counterpartyCodeField.fieldName;
                filterCounterParty.predicate = {
                    filterType: _shared_enums_list_and_search_filter_type_enum__WEBPACK_IMPORTED_MODULE_15__["ListAndSearchFilterType"].Text,
                    operator: 'eq',
                    value1: searchCounterParty + '%',
                };
                filterCounterParty.isActive = true;
                this.additionalFilters.push(filterCounterParty);
            }
        }
        this.listAndSearchComponent.additionalFilters = this.additionalFilters;
        this.listAndSearchComponent.loadData(true);
    };
    ExecutionInvoicingHomeComponent.prototype.onQuickNavigate = function (event) {
        var invoiceOption = event.invoiceId;
        var invoiceType = event.invoiceTypeId;
        var originalInvoiceType = event.originalInvoiceTypeId;
        var orginalInvoiceId = event.data.orginalInvoiceId;
        if (originalInvoiceType && orginalInvoiceId) {
            if (invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_14__["InvoiceTypes"].Reversal) {
                invoiceOption = orginalInvoiceId;
            }
        }
        this.router.navigate(['/' + this.companyManager.getCurrentCompanyId() +
                '/execution/invoicing/summary/' + encodeURIComponent(invoiceOption)], {
            queryParams: { invoiceType: invoiceType, originalInvoiceType: originalInvoiceType },
            skipLocationChange: true,
        });
    };
    ExecutionInvoicingHomeComponent.prototype.onInvoiceRowClicked = function (event) {
        var invoiceOption = event.data.invoiceId;
        var invoiceType = event.data.invoiceTypeId;
        var originalInvoiceType = event.data.originalInvoiceTypeId;
        var originalInvoiceId = event.data.originalInvoiceId;
        if (originalInvoiceType && originalInvoiceId) {
            if (invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_14__["InvoiceTypes"].Reversal) {
                invoiceOption = originalInvoiceId;
            }
        }
        this.router.navigate(['/' + this.companyManager.getCurrentCompanyId() +
                '/execution/invoicing/summary/' + encodeURIComponent(invoiceOption)], {
            queryParams: { invoiceType: invoiceType, originalInvoiceType: originalInvoiceType },
            skipLocationChange: true,
        });
    };
    ExecutionInvoicingHomeComponent.prototype.initFABActions = function () {
        this.fabTitle = 'CREATE INVOICE';
        this.fabType = _shared_components_floating_action_button_floating_action_button_type_enum__WEBPACK_IMPORTED_MODULE_5__["FABType"].ExtendedSingleButton;
        var actionCreateInvoice = {
            icon: 'add',
            text: 'CREATE INVOICE',
            action: 'createInvoice',
            disabled: false,
            index: 0,
        };
        if (this.checkInvoiceCreationPrivilege()) {
            this.fabMenuActions.push(actionCreateInvoice);
        }
        this.isLoaded = true;
    };
    ExecutionInvoicingHomeComponent.prototype.checkInvoiceCreationPrivilege = function () {
        if (this.authorizationService.isPrivilegeAllowed(this.company, 'Invoices')) {
            if (this.authorizationService.isPrivilegeAllowed(this.company, 'InvoiceCreation', _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_16__["PermissionLevels"].ReadWrite)) {
                return true;
            }
            else {
                return false;
            }
        }
    };
    ExecutionInvoicingHomeComponent.prototype.onFabActionClicked = function (action) {
        this.onNewInvoiceButtonClicked();
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('listAndSearchComponent'),
        __metadata("design:type", _shared_components_list_and_search_list_and_search_component__WEBPACK_IMPORTED_MODULE_12__["ListAndSearchComponent"])
    ], ExecutionInvoicingHomeComponent.prototype, "listAndSearchComponent", void 0);
    ExecutionInvoicingHomeComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-execution-invoicing-home',
            template: __webpack_require__(/*! ./execution-invoicing-home.component.html */ "./Client/app/execution/execution-invoicing-home/execution-invoicing-home.component.html"),
            styles: [__webpack_require__(/*! ./execution-invoicing-home.component.scss */ "./Client/app/execution/execution-invoicing-home/execution-invoicing-home.component.scss")],
            providers: [_shared_services_list_and_search_invoice_data_loader__WEBPACK_IMPORTED_MODULE_8__["InvoiceDataLoader"], _shared_services_masterdata_counterparty_data_loader__WEBPACK_IMPORTED_MODULE_9__["CounterPartyDataLoader"]],
        }),
        __metadata("design:paramtypes", [_shared_services_security_service__WEBPACK_IMPORTED_MODULE_10__["SecurityService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__["CompanyManagerService"],
            _shared_services_list_and_search_invoice_data_loader__WEBPACK_IMPORTED_MODULE_8__["InvoiceDataLoader"],
            _shared_services_masterdata_counterparty_data_loader__WEBPACK_IMPORTED_MODULE_9__["CounterPartyDataLoader"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_11__["UtilService"],
            _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_3__["AuthorizationService"],
            _shared_services_title_service__WEBPACK_IMPORTED_MODULE_17__["TitleService"]])
    ], ExecutionInvoicingHomeComponent);
    return ExecutionInvoicingHomeComponent;
}());



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/commercial.component.html":
/*!***************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/commercial.component.html ***!
  \***************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<form [formGroup]=\"commercialInvoiceFormGroup\">\r\n    <div class=\"main-container\">\r\n        <mat-horizontal-stepper [linear]\r\n                                (selectionChange)=\"onChangeStepAction($event)\"\r\n                                #stepper>\r\n            <ng-template matStepperIcon=\"edit\">\r\n                <mat-icon>check</mat-icon>\r\n            </ng-template>\r\n            <mat-step>\r\n                <ng-template matStepLabel>Contract Selection Screen</ng-template>\r\n                <atlas-commercial-selection #commercialSelectionComponent\r\n                                            [companyWeightCode]=\"weightCode\"\r\n                                            (contractsSelected)=\"onContractsSelected($event)\"\r\n                                            (pricingAndDecimalOptionSelected)=\"onPricingAndDecimalOptionSelected($event)\">\r\n                </atlas-commercial-selection>\r\n                <div fxLayout=\"row\"\r\n                     fxLayoutAlign=\"space-between start\"\r\n                     class=\"button-details\">\r\n                    <div fxLayout=\"column\"\r\n                         fxLayoutAlign=\"start\">\r\n                        <button (click)=\"onDiscardButtonClicked()\"\r\n                                mat-button>\r\n                            DISCARD\r\n                        </button>\r\n                    </div>\r\n                    <div fxLayout=\"column \"\r\n                         fxLayoutAlign=\"start\">\r\n                        <button mat-raised-button\r\n                                (click)=\"onMoveButtonClicked(invoicingSteps.workingStep)\">\r\n                            NEXT\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </mat-step>\r\n            <mat-step [completed]=\"isCompleted\">\r\n                <ng-template matStepLabel>Invoice Working Page</ng-template>\r\n                <atlas-commercial-working-page #commercialWorkingPageComponent\r\n                                               [companyWeightCode]=\"weightCode\"\r\n                                               (totalCostTaxCalculated)=\"ontotalAmountCalculated($event)\"\r\n                                               (totalCostAndVatCode)=\"onChangeCostContract($event)\"\r\n                                               (templateSelected)=\"onDocumentTemplateSelected($event)\">\r\n                </atlas-commercial-working-page>\r\n                <div fxLayout=\"row\"\r\n                     fxLayoutAlign=\"end start\">\r\n                    <mat-slide-toggle [formControl]=\"previewDocumentCtrl\"\r\n                                      *ngIf=\"hasTemplate\">Preview Document </mat-slide-toggle>\r\n                </div>\r\n                <div fxLayout=\"row\"\r\n                     fxLayoutAlign=\"space-between start\"\r\n                     class=\"button-details\">\r\n                    <button (click)=\"onDiscardButtonClicked()\"\r\n                            [disabled]=\"isLoading\"\r\n                            mat-button>\r\n                        DISCARD\r\n                    </button>\r\n                    <div fxLayout=\"column\"\r\n                         fxLayoutAlign=\"start end\">\r\n                        <div fxLayout=\"row\"\r\n                             fxLayoutAlign=\"end start\">\r\n                            <button mat-button\r\n                                    (click)=\"onBackButtonClicked(invoicingSteps.invoiceCreationStep)\"\r\n                                    [disabled]=\"isLoading\">\r\n                                BACK\r\n                            </button>\r\n                            <div\r\n                                 *ifAuthorized=\"'Invoices.InvoiceCreation', company:company, level: PermissionLevels.ReadWrite\">\r\n                                <button mat-raised-button\r\n                                        (click)=\"onOpenDialogOnPreviewOrSaveClicked()\"\r\n                                        [disabled]=\"isLoading\">\r\n                                    {{ previewDocumentCtrl.value ? \"Preview and Invoice\" : \"Create Invoice\" }}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </mat-step>\r\n            <mat-step>\r\n                <ng-template matStepLabel>Invoice Summary Page</ng-template>\r\n                <atlas-commercial-summary #commercialSummaryComponent\r\n                                          [invoiceTaxContracts]=\"taxRecords\"\r\n                                          [filteredCompanyBankAccounts]=\"filteredCompanyBankAccounts\"\r\n                                          [isCreationMode]=\"isCreationMode\"\r\n                                          [invoiceCostContracts]=\"invoiceCostContracts\">\r\n                </atlas-commercial-summary>\r\n                <div class=\"btn-container\"\r\n                     *ngIf=\"!isFromGrid\">\r\n                    <div fxLayout=\"row\"\r\n                         fxAlignLayout=\"start end\">\r\n                        <span class=\"fill-space\"></span>\r\n                        <button mat-button\r\n                                (click)=\"newSearchButtonClicked()\">\r\n                            New Search\r\n                        </button>\r\n                        <button mat-raised-button\r\n                                (click)=\"nextInvoiceButtonClicked(stepper)\">\r\n                            Next Invoice\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </mat-step>\r\n        </mat-horizontal-stepper>\r\n    </div>\r\n</form>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/commercial.component.scss":
/*!***************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/commercial.component.scss ***!
  \***************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".mat-column-selection {\n  overflow: initial; }\n\n.mat-button-toggle {\n  text-align: center;\n  min-width: 88px; }\n\nlabel {\n  font-size: 14px;\n  font-family: Roboto;\n  color: black; }\n\nlabel.no-data-message {\n  font-weight: bold; }\n\n.highlight {\n  background: #A7C5E2; }\n\n.label-search {\n  font-size: 11px;\n  font-family: Roboto;\n  color: rgba(0, 0, 0, 0.54); }\n\n.label-summary {\n  font-weight: bold; }\n\nmat-radio-button {\n  margin: 5px; }\n\n.mat-stepper-horizontal {\n  background-color: transparent; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/commercial.component.ts":
/*!*************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/commercial.component.ts ***!
  \*************************************************************************************/
/*! exports provided: CommercialComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CommercialComponent", function() { return CommercialComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../shared/entities/window-injection-token */ "./Client/app/shared/entities/window-injection-token.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/enums/permission-level.enum */ "./Client/app/shared/enums/permission-level.enum.ts");
/* harmony import */ var _shared_services_document_popup_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/services/document-popup.service */ "./Client/app/shared/services/document-popup.service.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../shared/services/http-services/document.service */ "./Client/app/shared/services/http-services/document.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_http_services_preaccounting_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../shared/services/http-services/preaccounting.service */ "./Client/app/shared/services/http-services/preaccounting.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _dialog_boxes_bank_account_dialog_bank_account_dialog_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../dialog-boxes/bank-account-dialog/bank-account-dialog.component */ "./Client/app/execution/execution-invoicing/dialog-boxes/bank-account-dialog/bank-account-dialog.component.ts");
/* harmony import */ var _invoicing_base_form_invoicing_base_form_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../invoicing-base-form/invoicing-base-form.component */ "./Client/app/execution/execution-invoicing/invoicing-base-form/invoicing-base-form.component.ts");
/* harmony import */ var _components_commercial_selection_commercial_selection_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./components/commercial-selection/commercial-selection.component */ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/commercial-selection.component.ts");
/* harmony import */ var _components_summary_commercial_summary_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./components/summary/commercial-summary.component */ "./Client/app/execution/execution-invoicing/commercial/components/summary/commercial-summary.component.ts");
/* harmony import */ var _components_working_page_commercial_working_page_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./components/working-page/commercial-working-page.component */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/commercial-working-page.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};






















var CommercialComponent = /** @class */ (function (_super) {
    __extends(CommercialComponent, _super);
    function CommercialComponent(dialog, router, companyManager, snackbarService, documentService, window, utilService, executionService, masterdataService, route, formBuilder, preaccountingService, formConfigurationProvider, documentPopupService) {
        var _this = _super.call(this, dialog, router, companyManager, snackbarService, documentService, window, utilService, executionService, route, formBuilder, preaccountingService, formConfigurationProvider, documentPopupService) || this;
        _this.dialog = dialog;
        _this.router = router;
        _this.companyManager = companyManager;
        _this.snackbarService = snackbarService;
        _this.documentService = documentService;
        _this.window = window;
        _this.utilService = utilService;
        _this.executionService = executionService;
        _this.masterdataService = masterdataService;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.preaccountingService = preaccountingService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.documentPopupService = documentPopupService;
        _this.filteredCompanyBankAccounts = [];
        _this.InvoiceTypes = _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceTypes"];
        _this.currentStep = 0;
        _this.PermissionLevels = _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_8__["PermissionLevels"];
        _this.isFromGrid = false;
        _this.invoicingSteps = {
            templateStep: -1,
            invoiceCreationStep: 0,
            workingStep: 1,
            summaryStep: 2,
        };
        _this.isValid = false;
        _this.previewDocumentCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__["AtlasFormControl"]('previewDocumentCtrl');
        _this.isCreateInvoiceButtonClicked = false;
        _this.isCreationMode = true;
        _this.isCompleted = false;
        _this.invoiceTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('invoiceTypeId')));
        _this.company = _this.companyManager.getCurrentCompanyId();
        var companyDetails = _this.companyManager.getCurrentCompany();
        _this.weightCode = companyDetails.weightCode;
        return _this;
    }
    CommercialComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.commercialInvoiceFormGroup = this.formBuilder.group({
            commercialSelectionComponent: this.commercialSelectionComponent.getFormGroup(),
            commercialWorkingPageComponent: this.commercialWorkingPageComponent.getFormGroup(),
            commercialSummaryComponent: this.commercialSummaryComponent.getFormGroup(),
        });
        this.formComponents.push(this.commercialSelectionComponent, this.commercialWorkingPageComponent, this.commercialSummaryComponent);
        this.getInvoiceSetupByCompany();
        this.route.queryParams.subscribe(function (params) {
            _this.selectedInvoiceId = params['invoiceId'];
            _this.isFromGrid = params['isFromGrid'];
        });
        if (this.isFromGrid) {
            this.launchSelectedInvoiceSummary(this.selectedInvoiceId);
        }
        this.masterData = this.route.snapshot.data.masterdata;
    };
    CommercialComponent.prototype.unloadNotification = function ($event) {
        if ((this.commercialWorkingPageComponent.invoiceWorkingFormGroup.dirty ||
            this.commercialSelectionComponent.invoiceSelectionContractFormGroup.dirty) &&
            this.stepper.selectedIndex !== 2) {
            $event.returnValue = true;
        }
    };
    CommercialComponent.prototype.launchSelectedInvoiceSummary = function (selectedInvoiceId) {
        var _this = this;
        this.subscriptions.push(this.executionService.
            getInvoiceById(selectedInvoiceId)
            .subscribe(function (data) {
            _this.stepper.selectedIndex = 2;
            _this.commercialSummaryComponent.setSummaryFieldsFromGrid(data);
            _this.invoiceLabel = data.invoiceCode;
        }));
    };
    CommercialComponent.prototype.contractsSelected = function () {
        var _this = this;
        var contracts = this.commercialSelectionComponent.
            contractSelectionComponent.selectedContractsToInvoice;
        if (contracts) {
            this.commercialWorkingPageComponent.valueOfGoodsComponent.contractToBeSelected(contracts);
            this.commercialWorkingPageComponent.selectionFormComponent.contractToBeSelected(contracts);
            if (!this.isCreateInvoiceButtonClicked) {
                this.commercialWorkingPageComponent.paymentComponent.contractToBeSelected(contracts);
            }
            this.commercialSummaryComponent.contractToBeSelected(contracts);
            contracts.map(function (contract) {
                _this.currencySelected = contract ? contract.currencyCode : null;
                var selectedCounterparty = contract ? contract.counterparty : null;
                _this.selectedSupplier = _this.masterData.counterparties.find(function (counterParty) { return counterParty.counterpartyCode === selectedCounterparty; });
            });
        }
        this.getDecimalandPricingOption();
    };
    CommercialComponent.prototype.getInvoiceSetupByCompany = function () {
        var _this = this;
        this.subscriptions.push(this.executionService.getInvoiceSetupByCompany()
            .subscribe(function (data) {
            if (_this.invoiceTypeId === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceTypes"].Sales || _this.invoiceTypeId === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceTypes"].Purchase) {
                _this.commercialWorkingPageComponent.selectionFormComponent.setDefaultAuthorizeForPosting(data.authorizedForPosting);
                _this.commercialWorkingPageComponent.taxesComponent.setDefaultVatCode(data.defaultVATCode);
                _this.commercialWorkingPageComponent.taxCostsComponent.setDefaultVatCode(data.defaultVATCode);
            }
        }));
    };
    CommercialComponent.prototype.onChangeStepAction = function (event) {
        this.currentStep = event.selectedIndex;
    };
    CommercialComponent.prototype.onBackButtonClicked = function (index) {
        this.isCompleted = false;
        this.stepper.selectedIndex = index;
    };
    CommercialComponent.prototype.onMoveButtonClicked = function (index) {
        var isFormValid = false;
        if (this.commercialSelectionComponent.pricingOptionsComponent.formGroup.valid) {
            if (this.isValid) {
                this.contractsSelected();
                this.isCompleted = true;
                this.stepper.selectedIndex = index;
            }
            isFormValid = true;
        }
        if (!this.isValid) {
            this.snackbarService.throwErrorSnackBar('Please select a contract to proceed.');
        }
        if (!isFormValid) {
            this.snackbarService.informationSnackBar('Form is invalid. Please resolve the errors..');
        }
    };
    CommercialComponent.prototype.nextInvoiceButtonClicked = function () {
        var searchContractRef = '';
        var searchCounterParty = '';
        var searchCharterRef = '';
        var invoiceType = 0;
        searchContractRef = this.commercialSelectionComponent.
            contractSelectionComponent.searchContractReference;
        searchCounterParty = this.commercialSelectionComponent.
            contractSelectionComponent.searchCounterParty;
        searchCharterRef = this.commercialSelectionComponent.
            contractSelectionComponent.searchCharterReference;
        invoiceType = this.commercialSelectionComponent.
            contractSelectionComponent.invoiceType;
        this.router.navigate(['/' + this.companyManager.getCurrentCompanyId() +
                '/execution/invoicing/' + encodeURIComponent(invoiceType.toString())], {
            queryParams: {
                savedContractReference: searchContractRef, savedCounterParty: searchCounterParty,
                savedCharterReference: searchCharterRef,
            },
            skipLocationChange: true,
        });
    };
    CommercialComponent.prototype.getDecimalandPricingOption = function () {
        var decimalOptionValue = this.commercialWorkingPageComponent.valueOfGoodsComponent.decimalOptionValue;
        var pricingOptionValue = this.commercialWorkingPageComponent.valueOfGoodsComponent.pricingOptionValue;
        this.commercialSummaryComponent.setDecimalAndPricingOption(decimalOptionValue, pricingOptionValue);
    };
    CommercialComponent.prototype.onPricingAndDecimalOptionSelected = function (model) {
        if (this.commercialWorkingPageComponent) {
            this.commercialWorkingPageComponent.pricingAndDecimalOptionSelected(model.pricingSelected, model.decimalOptionSelected);
        }
    };
    CommercialComponent.prototype.beforeInvoiceActions = function (invoiceRecord) {
        this.updateInvoiceLines(invoiceRecord);
    };
    CommercialComponent.prototype.afterInvoiceActions = function (invoiceRecord) {
        (this.selectedbankAccountId) ? invoiceRecord.bankAccountId = this.selectedbankAccountId : null;
        var costContracts = this.commercialWorkingPageComponent.
            addCostComponent.getAllInvoiceCostLines();
        this.commercialSummaryComponent.costContractToBeSelected(costContracts);
        this.commercialSummaryComponent.populateInvoiceRecord(invoiceRecord);
        this.stepper.next();
    };
    CommercialComponent.prototype.onContractsSelected = function (contractsSelected) {
        this.isValid = contractsSelected;
    };
    CommercialComponent.prototype.updateInvoiceLines = function (invoiceRecord) {
        var _this = this;
        invoiceRecord.invoiceLines.forEach(function (invoiceLine) {
            if (!invoiceLine.vatCode) {
                invoiceLine.vatCode =
                    _this.commercialWorkingPageComponent.taxesComponent.invoiceGoodsVatCodeCntrl.value;
            }
        });
    };
    CommercialComponent.prototype.onOpenDialogOnPreviewOrSaveClicked = function () {
        this.isLoading = true;
        if (this.commercialWorkingPageComponent.invoiceWorkingFormGroup.valid) {
            (this.invoiceTypeId === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceTypes"].Sales) ? this.getCompanyBankAccounts() :
                this.showConfirmationModal(this.hasTemplate && this.previewDocumentCtrl.value);
        }
        else {
            this.snackbarService.informationSnackBar('Form is invalid. Please resolve the errors...');
            this.isLoading = false;
        }
        this.costAndTaxRowsSelected();
    };
    CommercialComponent.prototype.costAndTaxRowsSelected = function () {
        this.commercialWorkingPageComponent.addCostComponent.setAllInvoiceCostLines();
        this.invoiceCostContracts = this.commercialWorkingPageComponent.addCostComponent
            .getAllInvoiceCostLines();
        this.getTaxRecordsForSelectedCost();
    };
    CommercialComponent.prototype.getTaxRecordsForSelectedCost = function () {
        this.taxRecords = this.commercialWorkingPageComponent.taxCostsComponent.taxesGridRows;
        this.totalData = this.commercialWorkingPageComponent.totalData;
    };
    CommercialComponent.prototype.ontotalAmountCalculated = function (model) {
        this.totalData = model;
    };
    CommercialComponent.prototype.onChangeCostContract = function (model) {
        this.invoiceCostContracts = model;
    };
    CommercialComponent.prototype.getCompanyBankAccounts = function () {
        var _this = this;
        if (this.selectedSupplier && this.currencySelected) {
            this.masterdataService.getCompanyBankAccounts(this.currencySelected)
                .subscribe(function (data) {
                if (data.value.length > 0) {
                    _this.filteredCompanyBankAccounts = data.value;
                }
                _this.showAvailableBankingOptionDialog();
            }, function (error) {
                console.error(error);
                _this.snackbarService.throwErrorSnackBar('Oops! An error ocurred');
            });
        }
    };
    CommercialComponent.prototype.showAvailableBankingOptionDialog = function () {
        var _this = this;
        if (this.filteredCompanyBankAccounts) {
            var availableBankingoptionDialog = this.dialog.open(_dialog_boxes_bank_account_dialog_bank_account_dialog_component__WEBPACK_IMPORTED_MODULE_17__["BankAccountDialogComponent"], {
                data: {
                    title: 'Bank Account',
                    okButton: 'Confirm',
                    value: this.filteredCompanyBankAccounts,
                },
            });
            availableBankingoptionDialog.afterClosed().subscribe(function (answer) {
                if (!answer) {
                    _this.isLoading = false;
                }
                else if (answer.isClose) {
                    _this.selectedbankAccountId = answer.selectedValue;
                    _this.showConfirmationModal(_this.hasTemplate && _this.previewDocumentCtrl.value);
                }
            });
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('commercialSelectionComponent'),
        __metadata("design:type", _components_commercial_selection_commercial_selection_component__WEBPACK_IMPORTED_MODULE_19__["CommercialSelectionComponent"])
    ], CommercialComponent.prototype, "commercialSelectionComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('commercialWorkingPageComponent'),
        __metadata("design:type", _components_working_page_commercial_working_page_component__WEBPACK_IMPORTED_MODULE_21__["CommercialWorkingPageComponent"])
    ], CommercialComponent.prototype, "commercialWorkingPageComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('commercialSummaryComponent'),
        __metadata("design:type", _components_summary_commercial_summary_component__WEBPACK_IMPORTED_MODULE_20__["CommercialSummaryComponent"])
    ], CommercialComponent.prototype, "commercialSummaryComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('stepper'),
        __metadata("design:type", _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatStepper"])
    ], CommercialComponent.prototype, "stepper", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"])('window:beforeunload', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], CommercialComponent.prototype, "unloadNotification", null);
    CommercialComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-commercial',
            template: __webpack_require__(/*! ./commercial.component.html */ "./Client/app/execution/execution-invoicing/commercial/commercial.component.html"),
            styles: [__webpack_require__(/*! ./commercial.component.scss */ "./Client/app/execution/execution-invoicing/commercial/commercial.component.scss")],
        }),
        __param(5, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_6__["WINDOW"])),
        __metadata("design:paramtypes", [_angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__["CompanyManagerService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_15__["SnackbarService"],
            _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_11__["DocumentService"],
            Window,
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_16__["UtilService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_12__["ExecutionService"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_13__["MasterdataService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_preaccounting_service__WEBPACK_IMPORTED_MODULE_14__["PreaccountingService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_10__["FormConfigurationProviderService"],
            _shared_services_document_popup_service__WEBPACK_IMPORTED_MODULE_9__["DocumentPopupService"]])
    ], CommercialComponent);
    return CommercialComponent;
}(_invoicing_base_form_invoicing_base_form_component__WEBPACK_IMPORTED_MODULE_18__["InvoicingBaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/commercial-selection.component.html":
/*!*********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/commercial-selection.component.html ***!
  \*********************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div>\r\n    <atlas-invoice-selection-form-component #InvoiceSelectionFormComponent>\r\n    </atlas-invoice-selection-form-component>\r\n\r\n    <atlas-contract-selection-form-component #contractSelectionComponent\r\n                                             [defaultWeightCode]=\"companyWeightCode\"\r\n                                             (contractsSelected)=\"onContractsSelected($event)\"\r\n                                             (commoditySelected)=\"onDifferentCommoditySelected($event)\">\r\n    </atlas-contract-selection-form-component>\r\n\r\n    <atlas-pricing-options #pricingOptionsComponent\r\n                           (pricingAndDecimalOptionSelected)=\"onPricingAndDecimalOptionSelected($event)\">\r\n    </atlas-pricing-options>\r\n\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/commercial-selection.component.scss":
/*!*********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/commercial-selection.component.scss ***!
  \*********************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/commercial-selection.component.ts":
/*!*******************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/commercial-selection.component.ts ***!
  \*******************************************************************************************************************************/
/*! exports provided: CommercialSelectionComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CommercialSelectionComponent", function() { return CommercialSelectionComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _components_contract_selection_form_component_contract_selection_form_component_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/contract-selection-form-component/contract-selection-form-component.component */ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/contract-selection-form-component/contract-selection-form-component.component.ts");
/* harmony import */ var _components_invoice_selection_form_component_invoice_selection_form_component_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./components/invoice-selection-form-component/invoice-selection-form-component.component */ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/invoice-selection-form-component/invoice-selection-form-component.component.ts");
/* harmony import */ var _components_pricing_options_pricing_options_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./components/pricing-options/pricing-options.component */ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/pricing-options/pricing-options.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var CommercialSelectionComponent = /** @class */ (function (_super) {
    __extends(CommercialSelectionComponent, _super);
    function CommercialSelectionComponent(formBuilder, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.pricingAndDecimalOptionSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.contractsSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.formComponents = [];
        return _this;
    }
    CommercialSelectionComponent.prototype.ngOnInit = function () {
        this.invoiceSelectionContractFormGroup = this.formBuilder.group({
            InvoiceSelectionFormComponent: this.InvoiceSelectionFormComponent.getFormGroup(),
            contractSelectionComponent: this.contractSelectionComponent.getFormGroup(),
            pricingOptionsComponent: this.pricingOptionsComponent.getFormGroup(),
        });
        this.formComponents.push(this.InvoiceSelectionFormComponent, this.pricingOptionsComponent, this.contractSelectionComponent);
    };
    CommercialSelectionComponent.prototype.onPricingAndDecimalOptionSelected = function (model) {
        this.pricingAndDecimalOptionSelected.emit({ pricingSelected: model.pricingOption, decimalOptionSelected: model.decimalOption });
    };
    CommercialSelectionComponent.prototype.onDifferentCommoditySelected = function (_a) {
        var differentCommoditySelected = _a.differentCommoditySelected, differentPricesSelected = _a.differentPricesSelected;
        this.pricingOptionsComponent.onDifferentCommoditySelected(differentCommoditySelected, differentPricesSelected);
    };
    CommercialSelectionComponent.prototype.onContractsSelected = function (contractsSelected) {
        this.contractsSelected.emit(contractsSelected);
    };
    CommercialSelectionComponent.prototype.populateEntity = function (model) {
        this.formComponents.forEach(function (comp) {
            comp.populateEntity(model);
        });
        return model;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CommercialSelectionComponent.prototype, "pricingAndDecimalOptionSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CommercialSelectionComponent.prototype, "contractsSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], CommercialSelectionComponent.prototype, "companyWeightCode", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('contractSelectionComponent'),
        __metadata("design:type", _components_contract_selection_form_component_contract_selection_form_component_component__WEBPACK_IMPORTED_MODULE_4__["ContractSelectionFormComponent"])
    ], CommercialSelectionComponent.prototype, "contractSelectionComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('pricingOptionsComponent'),
        __metadata("design:type", _components_pricing_options_pricing_options_component__WEBPACK_IMPORTED_MODULE_6__["PricingOptionsComponent"])
    ], CommercialSelectionComponent.prototype, "pricingOptionsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('InvoiceSelectionFormComponent'),
        __metadata("design:type", _components_invoice_selection_form_component_invoice_selection_form_component_component__WEBPACK_IMPORTED_MODULE_5__["InvoiceSelectionFormComponent"])
    ], CommercialSelectionComponent.prototype, "InvoiceSelectionFormComponent", void 0);
    CommercialSelectionComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-commercial-selection',
            template: __webpack_require__(/*! ./commercial-selection.component.html */ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/commercial-selection.component.html"),
            styles: [__webpack_require__(/*! ./commercial-selection.component.scss */ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/commercial-selection.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_3__["FormConfigurationProviderService"]])
    ], CommercialSelectionComponent);
    return CommercialSelectionComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/contract-selection-form-component/contract-selection-form-component.component.html":
/*!*******************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/contract-selection-form-component/contract-selection-form-component.component.html ***!
  \*******************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div fxLayout=\"column\"\r\n     fxLayoutAlign=\"start none\">\r\n    <mat-card>\r\n        <form [formGroup]=\"searchContractForm\">\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"start none\"\r\n                 class=\"search\">\r\n\r\n                <mat-form-field>\r\n                    <input matInput\r\n                           fxFlex=\"30%\"\r\n                           (keydown.enter)=\"onSearchContracts()\"\r\n                           placeholder=\"Contract Search\"\r\n                           formControlName=\"searchContractReferenceCtrl\" />\r\n                </mat-form-field>\r\n                <atlas-masterdata-user-preferences-input fxFlex=\"30%\"\r\n                                                         isEditable=\"true\"\r\n                                                         [fieldControl]=\"charterReferenceCtrl\"\r\n                                                         [options]=\"filteredCharters\"\r\n                                                         label=\"Charter Reference\"\r\n                                                         (keydown.enter)=\"onSearchContracts()\"\r\n                                                         displayProperty=\"charterCode\"\r\n                                                         [selectProperties]=\"['charterCode','description']\"\r\n                                                         [errorMap]=\"charterErrorMap\"\r\n                                                         lightBoxTitle=\"Results for charters\"\r\n                                                         gridId=\"charterGrid\"\r\n                                                         [dataLoader]=\"charterDataLoader\">\r\n                </atlas-masterdata-user-preferences-input>\r\n                <atlas-masterdata-user-preferences-input fxFlex=\"30%\"\r\n                                                         isEditable=\"true\"\r\n                                                         [fieldControl]=\"counterPartyCtrl\"\r\n                                                         [options]=\"filteredCounterPartyList\"\r\n                                                         label=\"Counter Party\"\r\n                                                         (keydown.enter)=\"onSearchContracts()\"\r\n                                                         displayProperty=\"counterpartyCode\"\r\n                                                         [selectProperties]=\"['counterpartyCode', 'description']\"\r\n                                                         [errorMap]=\"counterpartyErrorMap\"\r\n                                                         lightBoxTitle=\"Results for Counterparty\"\r\n                                                         gridId=\"counterpartiesGrid\"\r\n                                                         [dataLoader]=\"counterpartyDataLoader\">\r\n                </atlas-masterdata-user-preferences-input>\r\n                <button mat-raised-button\r\n                        (click)=\"onSearchContracts()\"\r\n                        class=\"heroGradient\">\r\n                    <mat-icon aria-label=\"Search\"\r\n                              class=\"search-icon\">search</mat-icon>\r\n                </button>\r\n            </div>\r\n        </form>\r\n    </mat-card>\r\n</div>\r\n<atlas-filter-set-display (filtersChanged)=\"onFilterSetDetailsChange($event)\"\r\n                          [columnConfiguration]=\"columnConfiguration\"\r\n                          [gridCode]=\"gridCode\"\r\n                          [company]=\"company\"\r\n                          #filterSetDisplayComponent>\r\n</atlas-filter-set-display>\r\n<div fxLayout=\"row\"\r\n     fxLayoutAlign=\"start none\">\r\n    <mat-card *ngIf=\"isLoading\"\r\n              fxFlex=\"100\">\r\n        <h2 class=\"atlas-grid-card-title\">Searching for results</h2>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"center center\"\r\n             fxLayoutWrap\r\n             class=\"loading\">\r\n            <mat-spinner color=\"accent\"></mat-spinner>\r\n        </div>\r\n    </mat-card>\r\n    <mat-card [ngClass]=\"{'hidden-during-loading':isLoading}\"\r\n              fxFlex=\"100\">\r\n        <div fxLayout=\"row\"\r\n             class=\"atlas-grid-card-header\">\r\n            <!-- Commenting the below line until Counterparty filter is completely developed -->\r\n            <!-- <h2 class=\"atlas-grid-card-title\">{{dataLength}} {{ dataLength > 1 ? \"Contracts\" : \"Contract\"}} Found</h2> -->\r\n            <span class=\"fill-space\"></span>\r\n\r\n            <atlas-ag-grid-user-preferences *ngIf=\"invoiceContractGridOptions && invoiceContractGridOptions.columnDefs\"\r\n                                            [gridOptions]=\"invoiceContractGridOptions\"\r\n                                            [company]=\"company\"\r\n                                            [gridId]=\"gridCode\"\r\n                                            [sharingEnabled]=\"hasGridSharing\"\r\n                                            #userPreferences>\r\n            </atlas-ag-grid-user-preferences>\r\n            <atlas-grid-enlargement *ngIf=\"invoiceContractGridOptions && invoiceContractGridOptions.columnDefs\"\r\n                                    [gridOptions]=\"invoiceContractGridOptions\"\r\n                                    [userPreferencesParameters]=\"gridPreferences\"\r\n                                    (cellValueChanged)=\"onCellValueChanged($event)\"\r\n                                    (rowSelected)=\"onSelectionChanged($event)\"\r\n                                    (rowDataChanged)=\"onRowDataChanged($event)\"\r\n                                    #gridZoom>\r\n            </atlas-grid-enlargement>\r\n        </div>\r\n        <div ag-grid=\"invoiceContractGridOptions\"\r\n             class=\"ag-theme-material pointer-cursor\">\r\n            <ag-grid-angular style=\"height:100%;\"\r\n                             class=\"ag-theme-material\"\r\n                             [rowData]=\"invoiceContractGridRows\"\r\n                             [gridOptions]=\"invoiceContractGridOptions\"\r\n                             [columnDefs]=\"columnDefs\"\r\n                             domLayout=\"autoHeight\"\r\n                             rowSelection=\"multiple\"\r\n                             [singleClickEdit]=\"true\"\r\n                             [suppressRowClickSelection]=\"true\"\r\n                             [pagination]=\"true\"\r\n                             [paginationPageSize]=\"10\"\r\n                             [enableSorting]=\"true\"\r\n                             [enableColResize]=\"true\"\r\n                             enableFilter\r\n                             [rowHeight]=atlasAgGridParam.rowHeight\r\n                             (gridReady)=\"onGridReady($event)\"\r\n                             (firstDataRendered)=\"onFirstDataRendered($event)\"\r\n                             (rowSelected)=\"onSelectionChanged($event)\"\r\n                             (rowDataChanged)=\"onRowDataChanged($event)\"\r\n                             (columnVisible)=\"onColumnVisibilityChanged($event)\"\r\n                             (cellValueChanged)=\"onCellValueChanged($event)\">\r\n            </ag-grid-angular>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"end center\"\r\n             class=\"total-box\">\r\n            <mat-card-subtitle class=\"total-figure\">\r\n                Total Quantity : <span class=\"total-figure-value\">\r\n                    {{totalQuantity| number:'1.3-3' }}\r\n                    {{weightCode}}\r\n                </span>\r\n            </mat-card-subtitle>\r\n        </div>\r\n    </mat-card>\r\n    <atlas-lock-interval [resourcesInformation]=\"resourcesInformation\">\r\n    </atlas-lock-interval>\r\n</div>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/contract-selection-form-component/contract-selection-form-component.component.scss":
/*!*******************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/contract-selection-form-component/contract-selection-form-component.component.scss ***!
  \*******************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".total-box {\n  margin-top: 14px; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/contract-selection-form-component/contract-selection-form-component.component.ts":
/*!*****************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/contract-selection-form-component/contract-selection-form-component.component.ts ***!
  \*****************************************************************************************************************************************************************************************/
/*! exports provided: ContractSelectionFormComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContractSelectionFormComponent", function() { return ContractSelectionFormComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component */ "./Client/app/shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _shared_dtos_list_and_search_list_and_search_filter_dto_dto__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/dtos/list-and-search/list-and-search-filter-dto.dto */ "./Client/app/shared/dtos/list-and-search/list-and-search-filter-dto.dto.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../../../shared/entities/lock-functional-context.entity */ "./Client/app/shared/entities/lock-functional-context.entity.ts");
/* harmony import */ var _shared_entities_lock_resource_information_entity__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../../../shared/entities/lock-resource-information.entity */ "./Client/app/shared/entities/lock-resource-information.entity.ts");
/* harmony import */ var _shared_entities_user_grid_preferences_parameters_entity__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../../../shared/entities/user-grid-preferences-parameters.entity */ "./Client/app/shared/entities/user-grid-preferences-parameters.entity.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_execution_charter_data_loader__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../../../shared/services/execution/charter-data-loader */ "./Client/app/shared/services/execution/charter-data-loader.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/lock.service */ "./Client/app/shared/services/http-services/lock.service.ts");
/* harmony import */ var _shared_services_masterdata_counterparty_data_loader__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../../../../shared/services/masterdata/counterparty-data-loader */ "./Client/app/shared/services/masterdata/counterparty-data-loader.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
/* harmony import */ var _services_execution_actions_service__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../../../../services/execution-actions.service */ "./Client/app/execution/services/execution-actions.service.ts");
/* harmony import */ var _shared_components_filter_set_display_filter_set_display_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./../../../../../../../shared/components/filter-set-display/filter-set-display.component */ "./Client/app/shared/components/filter-set-display/filter-set-display.component.ts");
/* harmony import */ var _shared_entities_list_and_search_list_and_search_filter_entity__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./../../../../../../../shared/entities/list-and-search/list-and-search-filter.entity */ "./Client/app/shared/entities/list-and-search/list-and-search-filter.entity.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./../../../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./../../../../../../../shared/enums/contract-type.enum */ "./Client/app/shared/enums/contract-type.enum.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./../../../../../../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_enums_list_and_search_filter_type_enum__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./../../../../../../../shared/enums/list-and-search-filter-type.enum */ "./Client/app/shared/enums/list-and-search-filter-type.enum.ts");
/* harmony import */ var _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./../../../../../../../shared/services/grid-configuration-provider.service */ "./Client/app/shared/services/grid-configuration-provider.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./../../../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __values = (undefined && undefined.__values) || function (o) {
    var m = typeof Symbol === "function" && o[Symbol.iterator], i = 0;
    if (m) return m.call(o);
    return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
};






























var ContractSelectionFormComponent = /** @class */ (function (_super) {
    __extends(ContractSelectionFormComponent, _super);
    function ContractSelectionFormComponent(formBuilder, executionService, route, snackbarService, formConfigurationProvider, uiService, lockService, dialog, gridConfigurationProvider, utilService, counterpartyDataLoader, charterDataLoader, executionActionsService, gridService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.executionService = executionService;
        _this.route = route;
        _this.snackbarService = snackbarService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.uiService = uiService;
        _this.lockService = lockService;
        _this.dialog = dialog;
        _this.gridConfigurationProvider = gridConfigurationProvider;
        _this.utilService = utilService;
        _this.counterpartyDataLoader = counterpartyDataLoader;
        _this.charterDataLoader = charterDataLoader;
        _this.executionActionsService = executionActionsService;
        _this.gridService = gridService;
        _this.commoditySelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.contractsSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.invoiceContractGridOptions = {};
        _this.isBusinessSectorPostingProcess = false;
        _this.dataLength = 0;
        _this.totalQuantity = 0;
        _this.isContractSelected = false;
        _this.subscriptions = [];
        _this.resourcesInformation = new Array();
        _this.locking = [];
        _this.unlocking = [];
        _this.columnConfiguration = [];
        _this.formatType = 'en-US';
        _this.decimalOptionValue = 2;
        _this.hasGridSharing = false;
        _this.defaultConversionFactor = 0;
        _this.additionnalColumns = [
            {
                headerName: 'Uninvoiced Quantity',
                field: 'uninvoicedQuantity',
                colId: 'uninvoicedQuantity',
                type: 'numericColumn',
                hide: false,
                valueGetter: _this.getUnInvoicedQuantity,
                valueFormatter: _this.formatValue.bind(_this),
            },
            {
                headerName: 'Quantity to invoice',
                field: 'quantityToInvoice',
                colId: 'quantityToInvoice',
                type: 'numericColumn',
                hide: false,
                editable: _this.isQuantityToInvoiceEditable.bind(_this),
                valueSetter: _this.setQuantityToInvoice.bind(_this),
                valueFormatter: _this.formatValue.bind(_this),
            },
        ];
        _this.masterdata = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_24__["MasterData"]();
        _this.counterPartyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_9__["AtlasFormControl"]('CounterPartyCommercial');
        _this.charterReferenceCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_9__["AtlasFormControl"]('CharterRefCommercial');
        _this.count = 0;
        _this.weightCode = '';
        _this.counterpartyErrorMap = new Map()
            .set('inDropdownList', 'Invalid entry. Counter Party not in the list.');
        _this.charterErrorMap = new Map();
        _this.gridPreferences = new _shared_entities_user_grid_preferences_parameters_entity__WEBPACK_IMPORTED_MODULE_12__["UserGridPreferencesParameters"]();
        _this.atlasAgGridParam = _this.gridService.getAgGridParam();
        _this.searchContractForm = _this.formBuilder.group({
            searchContractReferenceCtrl: [''],
        });
        return _this;
    }
    ContractSelectionFormComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.invoiceType = Number(decodeURIComponent(this.route.snapshot.paramMap.get('invoiceTypeId')));
        this.company = this.route.snapshot.paramMap.get('company');
        this.masterdata = this.route.snapshot.data.masterdata;
        this.isLoading = true;
        this.gridCode = this.invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_26__["InvoiceTypes"].Purchase ? 'invoicePurcGoodsSelectionGrid' : 'invoiceSaleGoodsSelectionGrid';
        this.filteredCounterPartyList = this.masterdata.counterparties;
        this.counterPartyList = this.filteredCounterPartyList;
        this.counterPartyCtrl.valueChanges.subscribe(function (input) {
            _this.filterCounterParty(input);
        });
        this.populateCharterList();
        this.charterReferenceCtrl.valueChanges.subscribe(function (input) {
            _this.filterCharterReference(input);
        });
        this.loadGridConfiguration();
        this.route.queryParams.subscribe(function (params) {
            _this.saveContractRef = params['savedContractReference'];
            _this.saveCounterparty = params['savedCounterParty'];
            _this.saveCharterReference = params['savedCharterReference'];
        });
        if (this.executionActionsService.EditCriteriaRetainFilter && this.executionActionsService.EditCriteriaRetainFilter.length > 0) {
            this.savedFilters = this.executionActionsService.EditCriteriaRetainFilter;
        }
        if (this.saveContractRef || this.saveCounterparty || this.saveCharterReference) {
            if (this.saveContractRef) {
                this.searchContractForm.controls['searchContractReferenceCtrl'].setValue(this.saveContractRef);
            }
            if (this.saveCounterparty) {
                this.counterPartyControl = this.counterPartyList.find(function (counterParty) {
                    return counterParty.counterpartyCode === _this.saveCounterparty;
                });
                this.counterPartyCtrl.patchValue(this.counterPartyControl);
            }
            if (this.saveCharterReference) {
                this.charterRefControl = this.charters.find(function (charter) {
                    return charter.charterCode === _this.saveCharterReference;
                });
                this.charterReferenceCtrl.patchValue(this.charterRefControl);
            }
        }
        this.subscriptions.push(this.lockService.cleanSessionLocks().subscribe());
        this.getBusinessSectorConfiguration();
        var defaultWeightCodeSetup = this.masterdata.weightUnits.find(function (weightUnit) {
            return weightUnit.weightCode === _this.defaultWeightCode;
        });
        if (defaultWeightCodeSetup) {
            this.weightCode = defaultWeightCodeSetup.weightCode;
            this.defaultConversionFactor = defaultWeightCodeSetup.conversionFactor;
        }
    };
    ContractSelectionFormComponent.prototype.getBusinessSectorConfiguration = function () {
        var _this = this;
        this.executionService.getBusinessSectorForPosting()
            .subscribe(function (data) {
            if (data) {
                _this.isBusinessSectorPostingProcess = data.businessSectorNominalPostingPurpose;
            }
        });
    };
    ContractSelectionFormComponent.prototype.populateCharterList = function () {
        var _this = this;
        this.charterDataLoader.getData().subscribe(function (charter) {
            _this.charters = charter;
            _this.filteredCharters = _this.charters;
        });
    };
    ContractSelectionFormComponent.prototype.filterCounterParty = function (input) {
        this.filteredCounterPartyList = this.utilService.filterListforAutocomplete(input, this.masterdata.counterparties, ['counterpartyCode', 'description']);
        if (this.counterPartyCtrl.valid || !this.counterPartyCtrl.value) {
            this.onSearchContracts();
        }
    };
    ContractSelectionFormComponent.prototype.filterCharterReference = function (input) {
        this.filteredCharters = this.utilService.filterListforAutocomplete(input, this.charters, ['charterCode', 'description']);
        if (this.charterReferenceCtrl.valid || !this.charterReferenceCtrl.value) {
            this.onSearchContracts();
        }
    };
    ContractSelectionFormComponent.prototype.formatValue = function (param) {
        if (isNaN(param.value) || param.value === null) {
            return '';
        }
        return new Intl.NumberFormat(this.formatType, { minimumFractionDigits: 3, maximumFractionDigits: 3 }).format(param.value);
    };
    ContractSelectionFormComponent.prototype.unloadNotification = function ($event) {
        if (this.searchContractForm.dirty) {
            $event.returnValue = true;
        }
    };
    ContractSelectionFormComponent.prototype.onGridReady = function (params) {
        params.columnDefs = this.invoiceContractGridColumns;
        this.gridApi = params.api;
        this.gridColumnApi = params.columnApi;
        this.gridApi.showNoRowsOverlay();
        this.gridService.sizeColumns(this.invoiceContractGridOptions);
    };
    ContractSelectionFormComponent.prototype.onFirstDataRendered = function (params) {
        if (this.gridColumnApi) {
            this.gridService.sizeColumns(this.invoiceContractGridOptions);
        }
    };
    ContractSelectionFormComponent.prototype.autoSizeContractsGrid = function () {
        if (this.gridColumnApi) {
            this.gridService.sizeColumns(this.invoiceContractGridOptions);
        }
    };
    ContractSelectionFormComponent.prototype.onGridSizeChanged = function (params) {
        this.autoSizeContractsGrid();
        this.gridService.sizeColumns(this.invoiceContractGridOptions);
    };
    ContractSelectionFormComponent.prototype.getUnInvoicedQuantity = function (params) {
        if (params.data.contractQuantity - params.data.invoicedQuantity > 0) {
            return params.data.contractQuantity - params.data.invoicedQuantity;
        }
        else if (params.data.contractQuantity - params.data.invoicedQuantity < 0) {
            return 0;
        }
    };
    ContractSelectionFormComponent.prototype.formatQuantityAndTotal = function (input) {
        var formattedInput = new Intl.NumberFormat(this.formatType, { minimumFractionDigits: this.decimalOptionValue }).format(input);
        return formattedInput.toLocaleString();
    };
    ContractSelectionFormComponent.prototype.setQuantityToInvoice = function (params) {
        var validQuantity = true;
        var invalidValue = true;
        if (params.newValue > (params.data.contractQuantity - params.data.invoicedQuantity)) {
            validQuantity = false;
            params.data.quantityToInvoice = (params.data.contractQuantity - params.data.invoicedQuantity);
        }
        else if (params.newValue <= 0) {
            invalidValue = false;
            params.data.quantityToInvoice = (params.data.contractQuantity - params.data.invoicedQuantity);
        }
        else {
            params.data.quantityToInvoice = Number(params.newValue);
        }
        if (!validQuantity) {
            this.snackbarService.informationSnackBar('Quantity cannot be greater than uninvoiced quantity');
        }
        if (!invalidValue) {
            this.snackbarService.informationSnackBar('Quantity cannot be zero or negative');
        }
        return true;
    };
    ContractSelectionFormComponent.prototype.getContractsToInvoice = function () {
        var _this = this;
        if (!this.filters || !(this.columnConfiguration)) {
            return;
        }
        else if (this.columnConfiguration.length > 0 && this.columnConfiguration) {
            var filters = this.filters.map(function (x) { return (__assign({}, x)); });
            this.isLoading = true;
            var invoiceType = this.masterdata.invoiceTypes.find(function (type) { return type.invoiceTypeId === _this.invoiceType; });
            var contractTypeCodeColumn = this.columnConfiguration
                .find(function (column) { return column.fieldName === 'ContractTypeCode'; });
            if (invoiceType && contractTypeCodeColumn && _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_25__["ContractTypes"][invoiceType.contractTypeCode]) {
                var filterContractType = new _shared_entities_list_and_search_list_and_search_filter_entity__WEBPACK_IMPORTED_MODULE_23__["ListAndSearchFilter"]();
                filterContractType.fieldId = contractTypeCodeColumn.fieldId;
                filterContractType.fieldName = contractTypeCodeColumn.fieldName;
                filterContractType.predicate = {
                    filterType: _shared_enums_list_and_search_filter_type_enum__WEBPACK_IMPORTED_MODULE_27__["ListAndSearchFilterType"].Text,
                    operator: 'eq',
                    value1: _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_25__["ContractTypes"][invoiceType.contractTypeCode],
                };
                filterContractType.isActive = true;
                filters.push(filterContractType);
            }
            if (this.invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_26__["InvoiceTypes"].Purchase) {
                this.executionService.searchContractsToPurchaseInvoiceForCommercial(filters)
                    .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["finalize"])(function () {
                    _this.isLoading = false;
                }))
                    .subscribe(function (data) {
                    _this.contractsToInvoice = data;
                    _this.getData();
                });
            }
            else if (this.invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_26__["InvoiceTypes"].Sales) {
                this.executionService.searchContractsToSaleInvoiceForCommercial(filters)
                    .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["finalize"])(function () {
                    _this.isLoading = false;
                }))
                    .subscribe(function (data) {
                    _this.contractsToInvoice = data;
                    _this.getData();
                });
            }
        }
    };
    ContractSelectionFormComponent.prototype.getData = function () {
        this.invoiceContractGridRows = this.contractsToInvoice.filter(function (contract) {
            return (contract.contractQuantity - contract.invoicedQuantity) > 0;
        });
        this.dataLength = this.invoiceContractGridRows.length;
        this.allInvoiceContractGridRows = this.invoiceContractGridRows;
        if (this.dataLength && this.dataLength > 0) {
            this.counterParty = this.invoiceContractGridRows[0].counterparty;
        }
        if (this.filters.length === 0) {
            if (this.saveContractRef || this.saveCounterparty || this.saveCharterReference) {
                this.onSearchContracts();
            }
        }
    };
    ContractSelectionFormComponent.prototype.onRowDataChanged = function (params) {
        if (this.counterParty) {
            var counterPartyFilterComponent = this.gridApi.getFilterInstance('counterparty');
            counterPartyFilterComponent.setModel({
                type: 'set',
                values: [this.counterParty],
            });
            this.gridApi.onFilterChanged();
        }
    };
    ContractSelectionFormComponent.prototype.onSearchContracts = function () {
        var _this = this;
        this.searchContractReference = this.searchContractForm.get('searchContractReferenceCtrl').value;
        if (this.counterPartyCtrl.value === '') {
            this.searchCounterParty = this.counterPartyCtrl.value;
        }
        else if (this.counterPartyCtrl.value) {
            this.searchCounterParty = this.counterPartyCtrl.value.counterpartyCode;
            if (!this.searchCounterParty) {
                this.searchCounterParty = this.counterPartyCtrl.value;
            }
        }
        if (this.charterReferenceCtrl.value === '') {
            this.searchCharterReference = this.charterReferenceCtrl.value;
        }
        else if (this.charterReferenceCtrl.value) {
            this.searchCharterReference = this.charterReferenceCtrl.value.charterCode;
            if (!this.searchCharterReference) {
                this.searchCharterReference = this.charterReferenceCtrl.value;
            }
        }
        var rows = [];
        var contractRows = 0;
        var charterRows = 0;
        this.filters = [];
        if (!this.searchContractReference && !this.searchCharterReference && !this.searchCounterParty) {
            this.invoiceContractGridRows = this.allInvoiceContractGridRows;
            return;
        }
        if (this.allInvoiceContractGridRows && this.allInvoiceContractGridRows.length > 0) {
            this.contractsToInvoice = this.allInvoiceContractGridRows;
            this.isLoading = true;
            if (this.searchContractReference) {
                this.contractsToInvoice = this.allInvoiceContractGridRows.filter(function (item) { return item.contractReference != null; });
                rows = this.contractsToInvoice.filter(function (item) {
                    return item.contractReference.toString().toUpperCase().includes(_this.searchContractReference.toUpperCase());
                });
                contractRows = -1;
            }
            if (this.searchCharterReference) {
                if (rows.length === 0 && contractRows === 0) {
                    this.contractsToInvoice = this.allInvoiceContractGridRows.filter(function (item) { return item.charter != null; });
                    rows = this.contractsToInvoice.filter(function (item) {
                        return item.charter.toString().toUpperCase().includes(_this.searchCharterReference.toUpperCase());
                    });
                }
                else if (contractRows === -1) {
                    rows = rows.filter(function (item) { return item.charter != null; });
                    rows = rows.filter(function (item) { return item.charter.toString().toUpperCase().includes(_this.searchCharterReference.toUpperCase()); });
                }
                charterRows = -1;
            }
            if (this.searchCounterParty) {
                if (rows.length === 0 && charterRows === 0 && contractRows === 0) {
                    this.contractsToInvoice = this.allInvoiceContractGridRows.filter(function (item) { return item.counterparty != null; });
                    rows = this.contractsToInvoice.filter(function (item) {
                        return item.counterparty.toString().toUpperCase().includes(_this.searchCounterParty.toUpperCase());
                    });
                }
                else {
                    rows = rows.filter(function (item) { return item.counterparty != null; });
                    rows = rows.filter(function (item) { return item.counterparty.toString().toUpperCase().
                        includes(_this.searchCounterParty.toUpperCase()); });
                }
            }
        }
        this.invoiceContractGridRows = rows;
        this.dataLength = this.invoiceContractGridRows.length;
        this.autoSizeContractsGrid();
        this.isLoading = false;
        (this.invoiceContractGridRows) ? this.gridApi.hideOverlay() : this.gridApi.showNoRowsOverlay();
        if (this.dataLength && this.dataLength > 0) {
            this.counterParty = this.invoiceContractGridRows[0].counterparty;
        }
    };
    ContractSelectionFormComponent.prototype.onSelectionChanged = function (event) {
        var _this = this;
        var e_1, _a;
        this.totalQuantity = 0;
        if (!event.node.selected) { // This condition is to make Quantity To Invoice = 0 if user unselects a row
            event.data.quantityToInvoice = 0;
        }
        var selectedRows = this.gridApi.getSelectedRows();
        var validQuantity = true;
        var valid = true;
        var validBusinessSector = true;
        if (event.node.isSelected()) {
            selectedRows.forEach(function (selectedContract) {
                if (selectedContract.contractQuantity > selectedContract.invoicedQuantity) {
                    if (selectedContract.quantityToInvoice === 0) {
                        selectedContract.quantityToInvoice =
                            (selectedContract.contractQuantity - selectedContract.invoicedQuantity);
                    }
                    _this.gridApi.refreshCells(event.data);
                    if (_this.defaultConversionFactor && _this.defaultConversionFactor != 0) {
                        _this.totalQuantity += (selectedContract.quantityToInvoice *
                            selectedContract.weightConversionFactor) / _this.defaultConversionFactor;
                    }
                    else {
                        _this.totalQuantity += selectedContract.quantityToInvoice;
                    }
                }
                else {
                    validQuantity = false;
                }
            });
        }
        else {
            event.data.quantityToInvoice = 0;
            this.gridApi.refreshCells(event.data);
        }
        if (selectedRows.length > 1) {
            var currencySelected = void 0;
            var counterpartySelected = void 0;
            var businessSectorSelected = void 0;
            try {
                for (var selectedRows_1 = __values(selectedRows), selectedRows_1_1 = selectedRows_1.next(); !selectedRows_1_1.done; selectedRows_1_1 = selectedRows_1.next()) {
                    var row = selectedRows_1_1.value;
                    if (!currencySelected) {
                        currencySelected = row.currencyCode;
                    }
                    if (!counterpartySelected) {
                        counterpartySelected = row.counterparty;
                    }
                    if (!businessSectorSelected) {
                        businessSectorSelected = row.businessSector;
                    }
                    if (currencySelected !== row.currencyCode || counterpartySelected !== row.counterparty) {
                        valid = false;
                        break;
                    }
                    if (this.isBusinessSectorPostingProcess) {
                        if (businessSectorSelected !== row.businessSector) {
                            validBusinessSector = false;
                            break;
                        }
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (selectedRows_1_1 && !selectedRows_1_1.done && (_a = selectedRows_1.return)) _a.call(selectedRows_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
        if (!valid) {
            this.snackbarService.informationSnackBar('Currency & Counterparty should be same');
        }
        if (!validBusinessSector) {
            this.snackbarService.informationSnackBar('While invoicing, Business Sector must be the same');
        }
        if (!validQuantity) {
            this.snackbarService.informationSnackBar('Value cannot be negative or more than the uninvoiced quantity');
        }
        if (!valid || !validQuantity || !validBusinessSector) {
            this.invoiceContractGridOptions.api.deselectNode(event.node);
        }
        this.checkCommoditySelected(selectedRows);
        this.isContractSelected = selectedRows.length > 0;
        this.contractsSelected.emit(this.isContractSelected);
        this.grantLock(Number(event.data.sectionId), event.node);
        this.selectedContractsToInvoice = selectedRows;
    };
    ContractSelectionFormComponent.prototype.grantLock = function (sectionId, node) {
        var _this = this;
        if (node.isSelected()) {
            if (!this.locking.includes(sectionId)) {
                this.locking.push(sectionId);
                this.subscriptions.push(this.lockService.isLockedContract(sectionId).subscribe(function (lock) {
                    if (lock.isLocked) {
                        _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_7__["ConfirmationDialogComponent"], {
                            data: {
                                title: 'Lock',
                                text: lock.message,
                                okButton: 'Got it',
                            },
                        });
                        _this.invoiceContractGridOptions.api.deselectNode(node);
                        _this.locking = _this.locking.filter(function (id) { return id !== sectionId; });
                    }
                    else {
                        _this.subscriptions.push(_this.lockService.lockContract(sectionId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_10__["LockFunctionalContext"].ContractInvoicing)
                            .subscribe(function () {
                            _this.refeshResourceInformation();
                            _this.locking = _this.locking.filter(function (id) { return id !== sectionId; });
                        }));
                    }
                }));
            }
        }
        else {
            if (!this.unlocking.includes(sectionId)) {
                this.unlocking.push(sectionId);
                this.refeshResourceInformation();
                this.subscriptions.push(this.lockService.unlockContract(sectionId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_10__["LockFunctionalContext"].ContractInvoicing)
                    .subscribe(function () {
                    node.setRowSelectable(true);
                    _this.unlocking = _this.unlocking.filter(function (id) { return id !== sectionId; });
                }));
            }
        }
    };
    ContractSelectionFormComponent.prototype.refeshResourceInformation = function () {
        var _this = this;
        this.resourcesInformation = new Array();
        this.invoiceContractGridOptions.api.forEachNode(function (node) {
            if (node.isSelected()) {
                var resourceInformation = new _shared_entities_lock_resource_information_entity__WEBPACK_IMPORTED_MODULE_11__["LockResourceInformation"]();
                resourceInformation.resourceType = 'Contract';
                resourceInformation.resourceId = node.data.sectionId;
                resourceInformation.resourceCode = node.data.contractReference;
                _this.resourcesInformation.push(resourceInformation);
            }
        });
    };
    // Check implemented for Pricing Options validation
    ContractSelectionFormComponent.prototype.checkCommoditySelected = function (selectedRows) {
        this.differentCommoditySelected = false;
        this.differentPricesSelected = false;
        if (selectedRows.length > 1) {
            var firstSelectedRow_1 = selectedRows[0];
            this.differentCommoditySelected = selectedRows.filter(function (row) { return row.commodity.trim() !== firstSelectedRow_1.commodity.trim(); }).length > 0;
            this.differentPricesSelected = selectedRows.filter(function (row) { return row.price !== firstSelectedRow_1.price; }).length > 0;
        }
        this.commoditySelected.emit({
            differentCommoditySelected: this.differentCommoditySelected, differentPricesSelected: this.differentPricesSelected,
        });
    };
    ContractSelectionFormComponent.prototype.populateEntity = function (entity) {
        this.selectedContractsToInvoice = this.gridApi.getSelectedRows();
        return this.selectedContractsToInvoice;
    };
    ContractSelectionFormComponent.prototype.onColumnVisibilityChanged = function (col) {
        this.userPreferencesComponent.onChangeColumnVisibility(col);
        this.autoSizeContractsGrid();
    };
    ContractSelectionFormComponent.prototype.onCellValueChanged = function (params) {
        if (params.oldValue < params.newValue) {
            this.totalQuantity = this.totalQuantity + (params.newValue - params.oldValue);
        }
        else if (params.oldValue > params.newValue) {
            this.totalQuantity = this.totalQuantity - (params.oldValue - params.newValue);
        }
    };
    ContractSelectionFormComponent.prototype.loadGridConfiguration = function () {
        var _this = this;
        this.gridConfigurationProvider.getConfiguration(this.company, this.gridCode)
            .subscribe(function (configuration) {
            _this.columnConfiguration = configuration.columns;
            _this.initColumns(_this.columnConfiguration);
            _this.hasGridSharing = configuration.hasMultipleViewsPerUser;
            _this.gridPreferences = {
                company: _this.company,
                gridId: _this.gridCode,
                gridOptions: _this.invoiceContractGridOptions,
                sharingEnabled: _this.hasGridSharing,
            };
        });
    };
    ContractSelectionFormComponent.prototype.initColumns = function (configuration) {
        var _this = this;
        this.columnDefs = [];
        // selection column
        this.columnDefs.push({
            headerName: '',
            colId: 'selection',
            headerCheckboxSelection: true,
            checkboxSelection: true,
            pinned: 'left',
            minWidth: 40,
            maxWidth: 40,
        });
        // grid config
        var numericColumns = [];
        configuration.forEach(function (column) {
            if (column.gridType === 'numeric') {
                numericColumns.push(column.fieldName.toLowerCase());
            }
        });
        this.columnDefs = this.columnDefs.concat(configuration.map(function (config) {
            var columnDef = {
                colId: _this.utilService.convertToCamelCase(config.fieldName),
                headerName: config.friendlyName,
                field: _this.utilService.convertToCamelCase(config.fieldName),
                hide: !config.isVisible,
            };
            var formatter = _this.uiService.getFormatterForType(config.gridType);
            if (formatter) {
                columnDef.valueFormatter = formatter;
            }
            var dateGetter = _this.uiService.getterForDateType(config.gridType);
            if (dateGetter) {
                columnDef.cellClass = 'dateFormat';
                columnDef.valueGetter = dateGetter;
            }
            var numericColumn = numericColumns.find(function (column) { return column === columnDef.field.toLowerCase(); });
            if (numericColumn) {
                columnDef.type = 'numericColumn';
                columnDef.valueFormatter = _this.numberFormatter;
            }
            return columnDef;
        }));
        // calculated columns
        this.columnDefs = this.columnDefs.concat(this.additionnalColumns);
        if (this.invoiceContractGridOptions) {
            this.invoiceContractGridOptions.columnDefs = this.columnDefs;
            if (this.invoiceContractGridOptions.columnApi) {
                this.invoiceContractGridOptions.columnApi.autoSizeAllColumns();
            }
        }
    };
    ContractSelectionFormComponent.prototype.isQuantityToInvoiceEditable = function (param) {
        return param.node.selected;
    };
    ContractSelectionFormComponent.prototype.onFilterSetDetailsChange = function (filters) {
        this.executionActionsService.EditCriteriaRetainFilter = filters;
        this.filters = filters;
        if (this.count === 1) {
            this.filters = this.savedFilters;
            this.savedFilters = null;
            this.count = 0;
        }
        if (this.savedFilters && this.count === 0) {
            if (this.filterSetDisplayComponent) {
                this.count = 1;
                var localFilters = this.savedFilters.map(function (filter) {
                    return new _shared_dtos_list_and_search_list_and_search_filter_dto_dto__WEBPACK_IMPORTED_MODULE_8__["ListAndSearchFilterDto"](filter);
                });
                this.filterSetDisplayComponent.loadFilters(localFilters);
            }
        }
        else {
            this.getContractsToInvoice();
        }
    };
    ContractSelectionFormComponent.prototype.numberFormatter = function (params) {
        if (params && params.value && !isNaN(params.value)) {
            if (params.colDef.colId.toLowerCase() === 'contractquantity' || params.colDef.colId.toLowerCase() === 'price' ||
                params.colDef.colId.toLowerCase() === 'invoicedquantity') {
                if (params.colDef.colId.toLowerCase() === 'price') {
                    return new Intl.NumberFormat('en-US', { minimumFractionDigits: 4, maximumFractionDigits: 4 }).format(params.value);
                }
                else {
                    return new Intl.NumberFormat('en-US', { minimumFractionDigits: 3, maximumFractionDigits: 3 }).format(params.value);
                }
            }
        }
    };
    ContractSelectionFormComponent.prototype.ngOnDestroy = function () {
        var _this = this;
        this.subscriptions.push(this.lockService.cleanSessionLocks().subscribe(function () {
            _this.subscriptions.forEach(function (subscription) {
                subscription.unsubscribe();
            });
        }));
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('userPreferences'),
        __metadata("design:type", _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_5__["AgGridUserPreferencesComponent"])
    ], ContractSelectionFormComponent.prototype, "userPreferencesComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('filterSetDisplayComponent'),
        __metadata("design:type", _shared_components_filter_set_display_filter_set_display_component__WEBPACK_IMPORTED_MODULE_22__["FilterSetDisplayComponent"])
    ], ContractSelectionFormComponent.prototype, "filterSetDisplayComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], ContractSelectionFormComponent.prototype, "commoditySelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], ContractSelectionFormComponent.prototype, "contractsSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], ContractSelectionFormComponent.prototype, "defaultWeightCode", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"])('window:beforeunload', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], ContractSelectionFormComponent.prototype, "unloadNotification", null);
    ContractSelectionFormComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-contract-selection-form-component',
            template: __webpack_require__(/*! ./contract-selection-form-component.component.html */ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/contract-selection-form-component/contract-selection-form-component.component.html"),
            styles: [__webpack_require__(/*! ./contract-selection-form-component.component.scss */ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/contract-selection-form-component/contract-selection-form-component.component.scss")],
            providers: [_shared_services_masterdata_counterparty_data_loader__WEBPACK_IMPORTED_MODULE_18__["CounterPartyDataLoader"], _shared_services_execution_charter_data_loader__WEBPACK_IMPORTED_MODULE_14__["CharterDataLoader"]],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"], _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_16__["ExecutionService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"], _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_19__["SnackbarService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_15__["FormConfigurationProviderService"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_20__["UiService"],
            _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_17__["LockService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"],
            _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_28__["GridConfigurationProviderService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_29__["UtilService"],
            _shared_services_masterdata_counterparty_data_loader__WEBPACK_IMPORTED_MODULE_18__["CounterPartyDataLoader"],
            _shared_services_execution_charter_data_loader__WEBPACK_IMPORTED_MODULE_14__["CharterDataLoader"],
            _services_execution_actions_service__WEBPACK_IMPORTED_MODULE_21__["ExecutionActionsService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_13__["AgGridService"]])
    ], ContractSelectionFormComponent);
    return ContractSelectionFormComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_6__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/invoice-selection-form-component/invoice-selection-form-component.component.html":
/*!*****************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/invoice-selection-form-component/invoice-selection-form-component.component.html ***!
  \*****************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"card-header-luke\">\r\n    <mat-card-title>\r\n        <h2> Invoice Selection</h2>\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div>\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"none center\"\r\n                 fxLayoutGap=\"10px\">\r\n                <div fxFlex=\"33%\"\r\n                     fxFlex.xs=\"33%\"\r\n                     fxFlex.sm=\"33%\">\r\n                    <mat-form-field class=\"mat-read-only-field\">\r\n                        <input matInput\r\n                               placeholder=\"Invoice type\"\r\n                               [matTooltip]=\"'Invoice Type'\"\r\n                               [formControl]=\"invoiceTypeSelectedCtrl\"\r\n                               autocomplete=\"off\"\r\n                               readonly>\r\n                    </mat-form-field>\r\n                </div>\r\n                <div fxFlex=\"33%\"\r\n                     fxFlex.xs=\"33%\"\r\n                     fxFlex.sm=\"33%\">\r\n                    <mat-form-field>\r\n                        <input matInput\r\n                               placeholder=\"Costs/Commission\"\r\n                               [matTooltip]=\"'Costs/Commission'\"\r\n                               [formControl]=\"costsCommissionTypeCtrl\"\r\n                               autocomplete=\"off\">\r\n                    </mat-form-field>\r\n                </div>\r\n                <div fxFlex=\"33%\"\r\n                     fxFlex.xs=\"33%\"\r\n                     fxFlex.sm=\"33%\">\r\n                    <mat-form-field class=\"mat-read-only-field\">\r\n                        <input matInput\r\n                               placeholder=\"Quantity to Invoice\"\r\n                               [matTooltip]=\"'Quantity to Invoice'\"\r\n                               [formControl]=\"quantityToInvoiceCtrl\"\r\n                               autocomplete=\"off\"\r\n                               readonly>\r\n                    </mat-form-field>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/invoice-selection-form-component/invoice-selection-form-component.component.scss":
/*!*****************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/invoice-selection-form-component/invoice-selection-form-component.component.scss ***!
  \*****************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".card-header-luke {\n  min-height: auto; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/invoice-selection-form-component/invoice-selection-form-component.component.ts":
/*!***************************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/invoice-selection-form-component/invoice-selection-form-component.component.ts ***!
  \***************************************************************************************************************************************************************************************/
/*! exports provided: InvoiceSelectionFormComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InvoiceSelectionFormComponent", function() { return InvoiceSelectionFormComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var InvoiceSelectionFormComponent = /** @class */ (function (_super) {
    __extends(InvoiceSelectionFormComponent, _super);
    function InvoiceSelectionFormComponent(route, formBuilder, utilService, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.utilService = utilService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.invoiceTypeSelectedCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('invoiceTypeSelected');
        _this.costsCommissionTypeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('costsCommissionSelection');
        _this.quantityToInvoiceCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('quantityToInvoiceSelection');
        _this.selectedInvoiceTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('invoiceTypeId')));
        _this.contract = 'Contract';
        _this.masterdata = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__["MasterData"]();
        return _this;
    }
    InvoiceSelectionFormComponent.prototype.ngOnInit = function () {
        this.invoiceTypeId = Number(decodeURIComponent(this.route.snapshot.paramMap.get('invoiceTypeId')));
        this.masterdata = this.route.snapshot.data.masterdata;
        this.getData();
    };
    InvoiceSelectionFormComponent.prototype.getData = function () {
        var _this = this;
        this.invoiceTypeDescription = this.masterdata.
            invoiceTypes.find(function (x) { return x.invoiceTypeId === _this.invoiceTypeId; }).description;
        this.invoiceTypeSelectedCtrl.patchValue(this.invoiceTypeDescription);
        this.costsCommissionTypeCtrl.disable();
        this.quantityToInvoiceCtrl.setValue(this.contract);
    };
    InvoiceSelectionFormComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            invoiceTypeSelectedCtrl: this.invoiceTypeSelectedCtrl,
            costsCommissionTypeCtrl: this.costsCommissionTypeCtrl,
            quantityToInvoiceCtrl: this.quantityToInvoiceCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    InvoiceSelectionFormComponent.prototype.populateEntity = function (entity) {
        var invoiceType = entity;
        invoiceType.invoiceType = this.invoiceTypeId;
        invoiceType.quantityToInvoice = this.quantityToInvoiceCtrl.value;
        return invoiceType;
    };
    InvoiceSelectionFormComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-invoice-selection-form-component',
            template: __webpack_require__(/*! ./invoice-selection-form-component.component.html */ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/invoice-selection-form-component/invoice-selection-form-component.component.html"),
            styles: [__webpack_require__(/*! ./invoice-selection-form-component.component.scss */ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/invoice-selection-form-component/invoice-selection-form-component.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__["UtilService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__["FormConfigurationProviderService"]])
    ], InvoiceSelectionFormComponent);
    return InvoiceSelectionFormComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/pricing-options/pricing-options.component.html":
/*!*******************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/pricing-options/pricing-options.component.html ***!
  \*******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"invoice-creation-card\">\r\n    <mat-card-header>\r\n        <mat-card-title>\r\n            <h2>Pricing Options</h2>\r\n        </mat-card-title>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <mat-form-field fxFlex=\"20%\">\r\n                <mat-select placeholder=\"Pricing option\"\r\n                            [matTooltip]=\"'Pricing option'\"\r\n                            [formControl]=\"pricingOptionsCtrl\"\r\n                            (selectionChange)='onPricingDecimalOptionSelected()'>\r\n                    <mat-option *ngFor=\"let pricing of masterdata.pricingOptions\"\r\n                                [value]=\"pricing.code\">{{pricing.description}}</mat-option>\r\n                </mat-select>\r\n                <mat-error *ngIf=\"pricingOptionsCtrl.hasError('required')\">\r\n                    Pricing Option is required\r\n                </mat-error>\r\n            </mat-form-field>\r\n            <mat-form-field fxFlex=\"20%\">\r\n                <mat-select placeholder=\"Decimals\"\r\n                            [matTooltip]=\"'Decimals'\"\r\n                            [formControl]=\"decimalOptionsCtrl\"\r\n                            (selectionChange)='onPricingDecimalOptionSelected()'>\r\n                    <mat-option *ngFor=\"let decimal of decimalOptions\"\r\n                                [value]=\"decimal\">{{decimal}}</mat-option>\r\n                </mat-select>\r\n            </mat-form-field>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/pricing-options/pricing-options.component.scss":
/*!*******************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/pricing-options/pricing-options.component.scss ***!
  \*******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/pricing-options/pricing-options.component.ts":
/*!*****************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/pricing-options/pricing-options.component.ts ***!
  \*****************************************************************************************************************************************************/
/*! exports provided: PricingOptionsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PricingOptionsComponent", function() { return PricingOptionsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var PricingOptionsComponent = /** @class */ (function (_super) {
    __extends(PricingOptionsComponent, _super);
    function PricingOptionsComponent(route, formBuilder, masterdataService, utilService, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.masterdataService = masterdataService;
        _this.utilService = utilService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.pricingAndDecimalOptionSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.pricingOptionsCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('pricingOptions');
        _this.decimalOptionsCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('decimalOptions', 2);
        _this.decimalOptions = [2, 3, 4, 5, 6, 7, 8, 9, 10];
        return _this;
    }
    PricingOptionsComponent.prototype.ngOnInit = function () {
        this.masterdata = this.route.snapshot.data.masterdata;
        this.bindConfiguration();
        this.emitPricingAndDecimalOptions();
    };
    PricingOptionsComponent.prototype.onPricingDecimalOptionSelected = function () {
        this.emitPricingAndDecimalOptions();
    };
    PricingOptionsComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            pricingOptionsCtrl: this.pricingOptionsCtrl,
            decimalOptionsCtrl: this.decimalOptionsCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    PricingOptionsComponent.prototype.emitPricingAndDecimalOptions = function () {
        this.pricingAndDecimalOptionSelected.emit({
            pricingOption: Number(this.pricingOptionsCtrl.value),
            decimalOption: Number(this.decimalOptionsCtrl.value),
        });
    };
    PricingOptionsComponent.prototype.onDifferentCommoditySelected = function (differentCommoditySelected, differentPricesSelected) {
        if (differentCommoditySelected) {
            this.setValidators();
        }
        else if (differentPricesSelected) {
            this.setValidators();
        }
        else {
            this.clearValidators();
        }
    };
    PricingOptionsComponent.prototype.setValidators = function () {
        this.pricingOptionsCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]));
        this.pricingOptionsCtrl.updateValueAndValidity();
    };
    PricingOptionsComponent.prototype.clearValidators = function () {
        this.pricingOptionsCtrl.clearValidators();
        this.pricingOptionsCtrl.updateValueAndValidity();
    };
    PricingOptionsComponent.prototype.populateEntity = function (entity) {
        var invoiceType = entity;
        invoiceType.pricingOptionId = this.pricingOptionsCtrl.value ? Number(this.pricingOptionsCtrl.value) : null;
        invoiceType.decimalOption = Number(this.decimalOptionsCtrl.value);
        return invoiceType;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], PricingOptionsComponent.prototype, "pricingAndDecimalOptionSelected", void 0);
    PricingOptionsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-pricing-options',
            template: __webpack_require__(/*! ./pricing-options.component.html */ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/pricing-options/pricing-options.component.html"),
            styles: [__webpack_require__(/*! ./pricing-options.component.scss */ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/pricing-options/pricing-options.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"], _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_6__["MasterdataService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__["UtilService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_5__["FormConfigurationProviderService"]])
    ], PricingOptionsComponent);
    return PricingOptionsComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/summary/commercial-summary.component.html":
/*!******************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/summary/commercial-summary.component.html ***!
  \******************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<atlas-execution-invoicing-summary-header #summaryHeaderComponent\r\n                                          [isCreationMode]=isCreationMode></atlas-execution-invoicing-summary-header>\r\n<div class=\"main-container\">\r\n\r\n    <atlas-value-of-goods-component #valueOfGoodsComponent></atlas-value-of-goods-component>\r\n    <atlas-add-cost #summaryAddCostComponent\r\n                    (onCostContractChanged)=\"onChangedCostContract($event)\">\r\n    </atlas-add-cost>\r\n    <atlas-taxes-component #taxesComponent></atlas-taxes-component>\r\n\r\n    <div fxLayout=\"row wrap\"\r\n         fxLayoutAlign=\"space-between\"\r\n         fxLayoutAlign.lt-md=\"space-around center\"\r\n         class=\"payment-total-amount-section\">\r\n        <div fxLayout=\"column\"\r\n             fxLayoutAlign=\"start\"\r\n             fxFlex=\"49\">\r\n            <atlas-payments-component #paymentComponent\r\n                                      fxFlex=\"100\"\r\n                                      fxFlex.lt-md=\"92\">\r\n            </atlas-payments-component>\r\n        </div>\r\n        <atlas-tax-costs fxFlex=\"50%\"\r\n                         (totalCostTaxCalculated)=\"onTotalCostTaxCalculated($event)\"\r\n                         #summaryTaxCostsComponent>\r\n        </atlas-tax-costs>\r\n        <div fxLayout=\"column\"\r\n             fxLayoutAlign=\"start\"\r\n             fxFlex=\"100\">\r\n            <atlas-add-cost-total #summaryCostTotalAmountComponent\r\n                                  fxFlex=\"100\"\r\n                                  fxFlex.lt-md=\"92\"></atlas-add-cost-total>\r\n        </div>\r\n    </div>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/summary/commercial-summary.component.scss":
/*!******************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/summary/commercial-summary.component.scss ***!
  \******************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/summary/commercial-summary.component.ts":
/*!****************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/summary/commercial-summary.component.ts ***!
  \****************************************************************************************************************/
/*! exports provided: CommercialSummaryComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CommercialSummaryComponent", function() { return CommercialSummaryComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/enums/cost-direction-type.enum */ "./Client/app/shared/enums/cost-direction-type.enum.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/enums/cost-sign.enum */ "./Client/app/shared/enums/cost-sign.enum.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_services_execution_dtos_invoice_record__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/services/execution/dtos/invoice-record */ "./Client/app/shared/services/execution/dtos/invoice-record.ts");
/* harmony import */ var _shared_services_execution_dtos_invoice_summary_record__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/services/execution/dtos/invoice-summary-record */ "./Client/app/shared/services/execution/dtos/invoice-summary-record.ts");
/* harmony import */ var _shared_services_execution_dtos_tax_record__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/services/execution/dtos/tax-record */ "./Client/app/shared/services/execution/dtos/tax-record.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _header_header_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../header/header.component */ "./Client/app/execution/execution-invoicing/header/header.component.ts");
/* harmony import */ var _working_page_components_add_cost_tax_add_cost_tax_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../working-page/components/add-cost-tax/add-cost-tax.component */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost-tax/add-cost-tax.component.ts");
/* harmony import */ var _working_page_components_add_cost_total_add_cost_total_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../working-page/components/add-cost-total/add-cost-total.component */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost-total/add-cost-total.component.ts");
/* harmony import */ var _working_page_components_add_cost_add_cost_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../working-page/components/add-cost/add-cost.component */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost/add-cost.component.ts");
/* harmony import */ var _working_page_components_payments_component_payments_component_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../working-page/components/payments-component/payments-component.component */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/payments-component/payments-component.component.ts");
/* harmony import */ var _working_page_components_taxes_component_taxes_component_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../working-page/components/taxes-component/taxes-component.component */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/taxes-component/taxes-component.component.ts");
/* harmony import */ var _working_page_components_value_of_goods_component_value_of_goods_component_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../working-page/components/value-of-goods-component/value-of-goods-component.component */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/value-of-goods-component/value-of-goods-component.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


















var CommercialSummaryComponent = /** @class */ (function (_super) {
    __extends(CommercialSummaryComponent, _super);
    function CommercialSummaryComponent(formBuilder, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.formComponents = [];
        _this.decimalOptionValue = 0;
        _this.pricingOptionValue = 0;
        _this.defaultDecimalOption = 2;
        _this.contractType = 'Contract';
        _this.additionalCostRate = 0;
        _this.valueOfGoodsDecimalOption = 2;
        _this.valueOfGoodsTotal = 0;
        _this.totalRecordForGoods = new _shared_services_execution_dtos_invoice_record__WEBPACK_IMPORTED_MODULE_7__["InvoiceRecord"]();
        return _this;
    }
    CommercialSummaryComponent.prototype.ngOnInit = function () {
        this.invoiceSummaryFormGroup = this.formBuilder.group({
            paymentComponent: this.paymentComponent.getFormGroup(),
            taxesComponent: this.taxesComponent.getFormGroup(),
            valueOfGoodsComponent: this.valueOfGoodsComponent.getFormGroup(),
            summaryHeaderComponent: this.summaryHeaderComponent.getFormGroup(),
            summaryAddCostComponent: this.summaryAddCostComponent.getFormGroup(),
            summaryTaxCostsComponent: this.summaryTaxCostsComponent.getFormGroup(),
        });
        this.invoiceSummaryFormGroup.disable();
        this.formComponents.push(this.paymentComponent, this.taxesComponent, this.valueOfGoodsComponent, this.summaryHeaderComponent, this.summaryAddCostComponent, this.summaryTaxCostsComponent);
        this.summaryAddCostComponent.isAdditionalCostForSummary = true;
    };
    CommercialSummaryComponent.prototype.contractToBeSelected = function (contracts) {
        this.contracts = contracts;
    };
    CommercialSummaryComponent.prototype.costContractToBeSelected = function (costContracts) {
        this.costContracts = costContracts;
    };
    CommercialSummaryComponent.prototype.setDecimalAndPricingOption = function (decimalOptionValue, pricingOptionValue) {
        this.decimalOptionValue = decimalOptionValue;
        this.pricingOptionValue = pricingOptionValue;
    };
    CommercialSummaryComponent.prototype.populateInvoiceRecord = function (record) {
        this.model = record;
        // this.costContracts = this.invoiceCostContracts;
        this.costTaxes = this.invoiceTaxContracts;
        this.totalData = this.invoiceTaxTotal;
        this.populateSummaryFields();
    };
    CommercialSummaryComponent.prototype.populateSummaryFields = function () {
        this.valueOfGoodsComponent.pricingAndDecimalOptionSelected(this.pricingOptionValue, this.decimalOptionValue);
        if (this.contracts) {
            this.valueOfGoodsComponent.contractToBeSelected(this.contracts);
        }
        if (this.costContracts) {
            this.summaryAddCostComponent.contractToBeSelected(this.costContracts);
        }
        if (this.costTaxes) {
            this.summaryTaxCostsComponent.taxRecordsSelected(this.costTaxes);
        }
        if (this.model) {
            this.paymentComponent.invoicePayTermsCntrl.patchValue(this.model.paymentTerms);
            this.paymentComponent.invoiceDueDateCntrl.patchValue(this.model.dueDate);
            this.summaryCostTotalAmountComponent.amount = this.model.totalInvoiceValue;
            this.summaryCostTotalAmountComponent.currencyCode = this.model.currency;
            this.summaryCostTotalAmountComponent.costDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_5__["CostSigns"][this.model.costDirection];
            this.summaryTaxCostsComponent.currencyCode = this.model.currency;
            this.summaryAddCostComponent.currencyCodeSelected = this.model.currency;
            this.summaryCostTotalAmountComponent.decimalOption = this.decimalOptionValue;
            this.summaryCostTotalAmountComponent.totalCostDirectionSign = (this.model.invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_6__["InvoiceTypes"].Purchase) ?
                _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_5__["CostSigns"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirectionType"].Cr] : _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_5__["CostSigns"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirectionType"].Dr];
            this.summaryHeaderComponent.setHeaderFieldsForSummary(this.model, this.filteredCompanyBankAccounts);
            if (this.model.invoiceLines.length > 0) {
                if (this.model.invoiceLines[0].vatCode) {
                    this.taxesComponent.currencyCode = this.model.invoiceLines[0].currencyCode;
                    this.taxesComponent.setDefaultVatCode(this.model.invoiceLines[0].vatCode);
                }
            }
        }
        this.summaryAddCostComponent.isAdditionalCostForSummary = true;
        this.summaryCostTotalAmountComponent.summaryTotalCalculated();
    };
    CommercialSummaryComponent.prototype.setSummaryFieldsFromGrid = function (summaryRecord) {
        this.summaryAddCostComponent.contractToBeSelectedFromGrid(summaryRecord);
        this.valueOfGoodsComponent.pricingAndDecimalOptionSelected(this.pricingOptionValue, this.defaultDecimalOption);
        this.valueOfGoodsComponent.contractToBeSelectedFromGrid(summaryRecord);
        this.paymentComponent.setValuesForSummaryFromGrid(summaryRecord);
        this.taxesComponent.setDataForTaxGoods(summaryRecord, this.defaultVATCode);
        this.summaryCostTotalAmountComponent.setValuesForTotalFromGrid(summaryRecord);
        this.summaryHeaderComponent.setHeaderFieldsFromGrid(summaryRecord);
        this.summaryAddCostComponent.isAdditionalCostForSummary = true;
    };
    CommercialSummaryComponent.prototype.onTotalCostTaxCalculated = function (model) {
        this.totalData = model;
        this.calculateTaxTotal(model);
    };
    CommercialSummaryComponent.prototype.calculateTaxTotal = function (model) {
        this.summaryCostTotalAmountComponent.setValuesForTotalTax(model);
    };
    CommercialSummaryComponent.prototype.calculateTotalWithoutTax = function () {
        this.totalRecordForGoods.totalInvoiceValue = this.additionalCostRate + this.valueOfGoodsTotal;
        this.totalRecordForGoods.decimalOption = this.valueOfGoodsDecimalOption;
        this.totalRecordForGoods.currency = this.valueOfGoodsCurrency;
        if (this.valueOfGoodsCostDirection === this.additionalCostCostDirection) {
            this.totalRecordForGoods.costDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][this.additionalCostCostDirection];
        }
        else {
            this.setCostDirection();
        }
        this.summaryCostTotalAmountComponent.setValuesForTotalWithoutTax(this.totalRecordForGoods);
    };
    CommercialSummaryComponent.prototype.setCostDirection = function () {
        this.totalRecordForGoods.costDirection = (Math.abs(this.additionalCostRate) > Math.abs(this.valueOfGoodsTotal)) ?
            _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][this.additionalCostCostDirection] : _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][this.valueOfGoodsCostDirection];
    };
    CommercialSummaryComponent.prototype.onChangedCostContract = function (model) {
        if (model) {
            this.additionalCostRate = model.rate;
            this.additionalCostCostDirection = model.costDirection;
            if (this.additionalCostCostDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"].Payable]) {
                this.additionalCostRate = -(this.additionalCostRate);
            }
            this.summaryTaxCostsComponent.getTaxesForSelectedVat(model);
            this.calculateTotalWithoutTax();
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('paymentComponent'),
        __metadata("design:type", _working_page_components_payments_component_payments_component_component__WEBPACK_IMPORTED_MODULE_15__["CommercialPaymentsComponent"])
    ], CommercialSummaryComponent.prototype, "paymentComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('taxesComponent'),
        __metadata("design:type", _working_page_components_taxes_component_taxes_component_component__WEBPACK_IMPORTED_MODULE_16__["TaxesComponent"])
    ], CommercialSummaryComponent.prototype, "taxesComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('valueOfGoodsComponent'),
        __metadata("design:type", _working_page_components_value_of_goods_component_value_of_goods_component_component__WEBPACK_IMPORTED_MODULE_17__["CommercialValueOfGoodsComponent"])
    ], CommercialSummaryComponent.prototype, "valueOfGoodsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('summaryHeaderComponent'),
        __metadata("design:type", _header_header_component__WEBPACK_IMPORTED_MODULE_11__["HeaderComponent"])
    ], CommercialSummaryComponent.prototype, "summaryHeaderComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('summaryAddCostComponent'),
        __metadata("design:type", _working_page_components_add_cost_add_cost_component__WEBPACK_IMPORTED_MODULE_14__["AddCostComponent"])
    ], CommercialSummaryComponent.prototype, "summaryAddCostComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('summaryTaxCostsComponent'),
        __metadata("design:type", _working_page_components_add_cost_tax_add_cost_tax_component__WEBPACK_IMPORTED_MODULE_12__["AddCostTaxComponent"])
    ], CommercialSummaryComponent.prototype, "summaryTaxCostsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('summaryCostTotalAmountComponent'),
        __metadata("design:type", _working_page_components_add_cost_total_add_cost_total_component__WEBPACK_IMPORTED_MODULE_13__["AddCostTotalComponent"])
    ], CommercialSummaryComponent.prototype, "summaryCostTotalAmountComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _shared_services_execution_dtos_invoice_summary_record__WEBPACK_IMPORTED_MODULE_8__["InvoiceSummaryRecord"])
    ], CommercialSummaryComponent.prototype, "invoiceRecordFromGrid", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], CommercialSummaryComponent.prototype, "defaultVATCode", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Boolean)
    ], CommercialSummaryComponent.prototype, "isCreationMode", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], CommercialSummaryComponent.prototype, "filteredCompanyBankAccounts", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], CommercialSummaryComponent.prototype, "invoiceCostContracts", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], CommercialSummaryComponent.prototype, "invoiceTaxContracts", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _shared_services_execution_dtos_tax_record__WEBPACK_IMPORTED_MODULE_9__["TaxRecord"])
    ], CommercialSummaryComponent.prototype, "invoiceTaxTotal", void 0);
    CommercialSummaryComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-commercial-summary',
            template: __webpack_require__(/*! ./commercial-summary.component.html */ "./Client/app/execution/execution-invoicing/commercial/components/summary/commercial-summary.component.html"),
            styles: [__webpack_require__(/*! ./commercial-summary.component.scss */ "./Client/app/execution/execution-invoicing/commercial/components/summary/commercial-summary.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_10__["FormConfigurationProviderService"]])
    ], CommercialSummaryComponent);
    return CommercialSummaryComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/commercial-working-page.component.html":
/*!****************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/commercial-working-page.component.html ***!
  \****************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div fxLayout=\"row wrap\"\r\n     fxLayoutAlign=\"space-between\"\r\n     fxLayoutAlign.lt-md=\"space-around center\">\r\n    <div fxLayout=\"column\"\r\n         fxLayoutAlign=\"start\"\r\n         fxFlex=\"49\">\r\n        <atlas-selection-form-component #selectionFormComponent\r\n                                        fxFlex=\"100\"\r\n                                        fxFlex.lt-md=\"92\"\r\n                                        (invoiceDateSelected)=\"onInvoiceDateSelected($event)\">\r\n        </atlas-selection-form-component>\r\n    </div>\r\n    <div fxLayout=\"column\"\r\n         fxLayoutAlign=\"start\"\r\n         fxFlex=\"49\">\r\n        <atlas-document-template #documentTemplateComponent\r\n                                 (templateSelected)=\"onTemplateSelected($event)\"\r\n                                 fxFlex=\"100\"\r\n                                 fxFlex.lt-md=\"92\"\r\n                                 [documentType]=\"DocumentTypes.InvoiceGoodsInvoice\">\r\n        </atlas-document-template>\r\n    </div>\r\n</div>\r\n<div fxLayout=\"row\"\r\n     fxLayoutAlign=\"start\"\r\n     fxLayoutAlign.lt-md=\"start center\">\r\n    <atlas-value-of-goods-component #valueOfGoodsComponent\r\n                                    [defaultWeightCode]=\"companyWeightCode\"\r\n                                    (totalAmountCalculated)=\"ontotalAmountCalculated($event)\"\r\n                                    (costCurrency)=\"onCostCurrency($event)\"\r\n                                    fxFlex=\"100\"></atlas-value-of-goods-component>\r\n</div>\r\n<atlas-add-cost #addCostComponent\r\n                [selectedGoodsVat]=\"selectedGoodsVatCode\"\r\n                (totalCostAndVatCode)=\"onChangeCostContract($event)\"\r\n                (narrativeLength)=\"onNarrativeValueChanged($event)\">\r\n</atlas-add-cost>\r\n\r\n<div fxLayout=\"row\"\r\n     fxLayoutAlign=\"start\"\r\n     fxLayoutAlign.lt-md=\"start center\">\r\n    <atlas-taxes-component #taxesComponent\r\n                           (selectedGoodsTaxCode)=\"onChangeGoodsTaxCode($event)\"\r\n                           fxFlex=\"100\"></atlas-taxes-component>\r\n</div>\r\n\r\n<div fxLayout=\"row wrap\"\r\n     fxLayoutAlign=\"space-between\"\r\n     fxLayoutAlign.lt-md=\"space-around center\"\r\n     class=\"payment-total-amount-section\">\r\n    <div fxLayout=\"column\"\r\n         fxLayoutAlign=\"start\"\r\n         fxFlex=\"49\">\r\n        <atlas-payments-component #paymentComponent\r\n                                  fxFlex=\"100\"\r\n                                  fxFlex.lt-md=\"92\">\r\n        </atlas-payments-component>\r\n    </div>\r\n    <atlas-tax-costs fxFlex=\"50%\"\r\n                     (totalCostTaxCalculated)=\"onTotalCostTaxCalculated($event)\"\r\n                     #taxCostsComponent>\r\n    </atlas-tax-costs>\r\n    <div fxLayout=\"column\"\r\n         fxLayoutAlign=\"start\"\r\n         fxFlex=\"100\">\r\n        <atlas-add-cost-total #totalComponent\r\n                              fxFlex=\"100\"\r\n                              fxFlex.lt-md=\"92\"></atlas-add-cost-total>\r\n    </div>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/commercial-working-page.component.scss":
/*!****************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/commercial-working-page.component.scss ***!
  \****************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".invoice-creation-margin {\n  margin-left: 24px;\n  margin-right: 24px; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/commercial-working-page.component.ts":
/*!**************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/commercial-working-page.component.ts ***!
  \**************************************************************************************************************************/
/*! exports provided: CommercialWorkingPageComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CommercialWorkingPageComponent", function() { return CommercialWorkingPageComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/enums/cost-direction-type.enum */ "./Client/app/shared/enums/cost-direction-type.enum.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/enums/cost-sign.enum */ "./Client/app/shared/enums/cost-sign.enum.ts");
/* harmony import */ var _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/enums/document-type.enum */ "./Client/app/shared/enums/document-type.enum.ts");
/* harmony import */ var _shared_enums_invoice_payment_type__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/enums/invoice-payment-type */ "./Client/app/shared/enums/invoice-payment-type.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_services_execution_dtos_invoice_record__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/services/execution/dtos/invoice-record */ "./Client/app/shared/services/execution/dtos/invoice-record.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _components_document_template_document_template_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../components/document-template/document-template.component */ "./Client/app/execution/execution-invoicing/components/document-template/document-template.component.ts");
/* harmony import */ var _total_amount_total_amount_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../total-amount/total-amount.component */ "./Client/app/execution/execution-invoicing/total-amount/total-amount.component.ts");
/* harmony import */ var _components_add_cost_tax_add_cost_tax_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./components/add-cost-tax/add-cost-tax.component */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost-tax/add-cost-tax.component.ts");
/* harmony import */ var _components_add_cost_total_add_cost_total_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./components/add-cost-total/add-cost-total.component */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost-total/add-cost-total.component.ts");
/* harmony import */ var _components_add_cost_add_cost_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./components/add-cost/add-cost.component */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost/add-cost.component.ts");
/* harmony import */ var _components_payments_component_payments_component_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./components/payments-component/payments-component.component */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/payments-component/payments-component.component.ts");
/* harmony import */ var _components_selection_form_component_selection_form_component_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./components/selection-form-component/selection-form-component.component */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/selection-form-component/selection-form-component.component.ts");
/* harmony import */ var _components_taxes_component_taxes_component_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./components/taxes-component/taxes-component.component */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/taxes-component/taxes-component.component.ts");
/* harmony import */ var _components_value_of_goods_component_value_of_goods_component_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./components/value-of-goods-component/value-of-goods-component.component */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/value-of-goods-component/value-of-goods-component.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




















var CommercialWorkingPageComponent = /** @class */ (function (_super) {
    __extends(CommercialWorkingPageComponent, _super);
    function CommercialWorkingPageComponent(formBuilder, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.totalAmountCalculated = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.templateSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.totalCostTaxCalculated = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.totalCostAndVatCode = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.narrativeLength = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.formComponents = [];
        _this.DocumentTypes = _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_6__["DocumentTypes"];
        _this.InvoiceTypes = _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_8__["InvoiceTypes"];
        _this.additionalCostRate = 0;
        _this.totalRecordForWashout = new _shared_services_execution_dtos_invoice_record__WEBPACK_IMPORTED_MODULE_9__["InvoiceRecord"]();
        _this.valueOfGoodsDecimalOption = 2;
        _this.valueOfGoodsTotal = 0;
        return _this;
    }
    CommercialWorkingPageComponent.prototype.ngOnInit = function () {
        this.invoiceWorkingFormGroup = this.formBuilder.group({
            selectionFormComponent: this.selectionFormComponent.getFormGroup(),
            paymentComponent: this.paymentComponent.getFormGroup(),
            taxesComponent: this.taxesComponent.getFormGroup(),
            documentTemplateComponent: this.documentTemplateComponent.getFormGroup(),
            totalComponent: this.totalComponent.getFormGroup(),
            addCostComponent: this.addCostComponent.getFormGroup(),
            taxCostsComponent: this.taxCostsComponent.getFormGroup(),
        });
        this.formComponents.push(this.paymentComponent, this.taxesComponent, this.documentTemplateComponent, this.selectionFormComponent, this.valueOfGoodsComponent, this.totalComponent, this.addCostComponent, this.taxCostsComponent);
    };
    CommercialWorkingPageComponent.prototype.contractsSelected = function (contracts) {
        this.selectionFormComponent.contractToBeSelected(contracts);
        this.valueOfGoodsComponent.contractToBeSelected(contracts);
        if (contracts && contracts.length > 0) {
            this.addCostComponent.setDefaultCurrency(contracts[0].currencyCode);
        }
    };
    CommercialWorkingPageComponent.prototype.pricingAndDecimalOptionSelected = function (pricingOption, decimalOption) {
        this.valueOfGoodsComponent.pricingAndDecimalOptionSelected(pricingOption, decimalOption);
    };
    CommercialWorkingPageComponent.prototype.onInvoiceDateSelected = function (invoiceDate) {
        this.paymentComponent.setinvoiceDateSelected(invoiceDate);
    };
    CommercialWorkingPageComponent.prototype.ontotalAmountCalculated = function (model) {
        if (model) {
            this.totalComponent.amount = model.amount;
            this.valueOfGoodsTotal = model.amount;
            this.valueOfGoodsCurrency = model.currencyCode;
            this.valueOfGoodsCostDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirectionType"][model.debitCredit]];
            this.totalComponent.decimalOption = model.decimalOption;
            this.totalComponent.currencyCode = model.currencyCode;
            this.totalComponent.totalCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_5__["CostSigns"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirectionType"][model.debitCredit]];
            this.totalComponent.invoiceLabel = _shared_enums_invoice_payment_type__WEBPACK_IMPORTED_MODULE_7__["InvoicePaymentType"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirectionType"][model.debitCredit]];
            this.taxesComponent.currencyCode = model.currencyCode;
            if (this.valueOfGoodsCostDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"].Payable]) {
                this.valueOfGoodsTotal = -(this.valueOfGoodsTotal);
            }
            this.calculateTotalWithoutTax();
        }
    };
    CommercialWorkingPageComponent.prototype.onTemplateSelected = function (event) {
        this.templateSelected.emit(event);
    };
    CommercialWorkingPageComponent.prototype.onCostCurrency = function (currency) {
        this.addCostComponent.currencyCodeSelected = currency;
        this.taxCostsComponent.currencyCode = currency;
    };
    CommercialWorkingPageComponent.prototype.populateEntity = function (model) {
        this.formComponents.forEach(function (comp) {
            comp.populateEntity(model);
        });
        return model;
    };
    CommercialWorkingPageComponent.prototype.onChangeCostContract = function (model) {
        if (model) {
            this.additionalCostRate = model.rate;
            this.additionalCostCostDirection = model.costDirection;
            if (this.additionalCostCostDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"].Payable]) {
                this.additionalCostRate = -(this.additionalCostRate);
            }
            this.taxCostsComponent.getTaxesForSelectedVat(model);
            this.totalCostAndVatCode.emit(model);
            this.calculateTotalWithoutTax();
        }
    };
    CommercialWorkingPageComponent.prototype.onChangeGoodsTaxCode = function (vatCode) {
        this.selectedGoodsVatCode = vatCode;
    };
    CommercialWorkingPageComponent.prototype.onTotalCostTaxCalculated = function (model) {
        this.totalData = model;
        this.calculateTaxTotal(model);
        this.totalCostTaxCalculated.emit(model);
    };
    CommercialWorkingPageComponent.prototype.calculateTaxTotal = function (model) {
        this.totalComponent.setValuesForTotalTax(model);
    };
    CommercialWorkingPageComponent.prototype.calculateTotalWithoutTax = function () {
        this.totalRecordForWashout.totalInvoiceValue = this.additionalCostRate + this.valueOfGoodsTotal;
        this.totalRecordForWashout.decimalOption = this.valueOfGoodsDecimalOption;
        this.totalRecordForWashout.currency = this.valueOfGoodsCurrency;
        if (this.valueOfGoodsCostDirection === this.additionalCostCostDirection) {
            this.totalRecordForWashout.costDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][this.additionalCostCostDirection];
        }
        else {
            if (Math.abs(this.additionalCostRate) > Math.abs(this.valueOfGoodsTotal)) {
                this.totalRecordForWashout.costDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][this.additionalCostCostDirection];
            }
            else {
                this.totalRecordForWashout.costDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][this.valueOfGoodsCostDirection];
            }
        }
        this.totalComponent.setValuesForTotalWithoutTax(this.totalRecordForWashout);
    };
    CommercialWorkingPageComponent.prototype.onNarrativeValueChanged = function (maxLength) {
        this.narrativeLength.emit(maxLength);
    };
    CommercialWorkingPageComponent.prototype.validateCostGrid = function () {
        // calling the costgrid component to set the required field validation
        return this.addCostComponent.validate();
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CommercialWorkingPageComponent.prototype, "totalAmountCalculated", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CommercialWorkingPageComponent.prototype, "templateSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CommercialWorkingPageComponent.prototype, "totalCostTaxCalculated", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CommercialWorkingPageComponent.prototype, "totalCostAndVatCode", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CommercialWorkingPageComponent.prototype, "narrativeLength", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('paymentComponent'),
        __metadata("design:type", _components_payments_component_payments_component_component__WEBPACK_IMPORTED_MODULE_16__["CommercialPaymentsComponent"])
    ], CommercialWorkingPageComponent.prototype, "paymentComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('taxesComponent'),
        __metadata("design:type", _components_taxes_component_taxes_component_component__WEBPACK_IMPORTED_MODULE_18__["TaxesComponent"])
    ], CommercialWorkingPageComponent.prototype, "taxesComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('totalAmountComponent'),
        __metadata("design:type", _total_amount_total_amount_component__WEBPACK_IMPORTED_MODULE_12__["TotalAmountComponent"])
    ], CommercialWorkingPageComponent.prototype, "totalAmountComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('documentTemplateComponent'),
        __metadata("design:type", _components_document_template_document_template_component__WEBPACK_IMPORTED_MODULE_11__["DocumentTemplateComponent"])
    ], CommercialWorkingPageComponent.prototype, "documentTemplateComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('selectionFormComponent'),
        __metadata("design:type", _components_selection_form_component_selection_form_component_component__WEBPACK_IMPORTED_MODULE_17__["SelectionFormComponentComponent"])
    ], CommercialWorkingPageComponent.prototype, "selectionFormComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('valueOfGoodsComponent'),
        __metadata("design:type", _components_value_of_goods_component_value_of_goods_component_component__WEBPACK_IMPORTED_MODULE_19__["CommercialValueOfGoodsComponent"])
    ], CommercialWorkingPageComponent.prototype, "valueOfGoodsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('addCostComponent'),
        __metadata("design:type", _components_add_cost_add_cost_component__WEBPACK_IMPORTED_MODULE_15__["AddCostComponent"])
    ], CommercialWorkingPageComponent.prototype, "addCostComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('taxCostsComponent'),
        __metadata("design:type", _components_add_cost_tax_add_cost_tax_component__WEBPACK_IMPORTED_MODULE_13__["AddCostTaxComponent"])
    ], CommercialWorkingPageComponent.prototype, "taxCostsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('totalComponent'),
        __metadata("design:type", _components_add_cost_total_add_cost_total_component__WEBPACK_IMPORTED_MODULE_14__["AddCostTotalComponent"])
    ], CommercialWorkingPageComponent.prototype, "totalComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], CommercialWorkingPageComponent.prototype, "companyWeightCode", void 0);
    CommercialWorkingPageComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-commercial-working-page',
            template: __webpack_require__(/*! ./commercial-working-page.component.html */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/commercial-working-page.component.html"),
            styles: [__webpack_require__(/*! ./commercial-working-page.component.scss */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/commercial-working-page.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_10__["FormConfigurationProviderService"]])
    ], CommercialWorkingPageComponent);
    return CommercialWorkingPageComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost-tax/add-cost-tax.component.html":
/*!*****************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost-tax/add-cost-tax.component.html ***!
  \*****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-title>\r\n        Taxes for Cost\r\n\r\n    </mat-card-title>\r\n\r\n    <mat-card-content>\r\n\r\n        <ag-grid-angular class=\"ag-theme-material\"\r\n                         [rowData]=\"taxesGridRows\"\r\n                         [columnDefs]=\"taxesGridColumns\"\r\n                         domLayout=\"autoHeight\"\r\n                         (gridReady)=\"onGridReady($event)\"\r\n                         [pagination]=\"false\"\r\n                         [paginationPageSize]=\"10\"\r\n                         [enableSorting]=\"true\"\r\n                         [enableColResize]=\"true\"\r\n                         enableFilter\r\n                         [rowHeight]=atlasAgGridParam.rowHeight>\r\n        </ag-grid-angular>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"end\">\r\n            <h2 class=\"no-margin total-figure\">Total Tax Amount: <span\r\n                      class=\"total-figure-value\">{{defaultTaxDirectionSign}}{{formatQuantityAndTotal(this.taxTotal)}}\r\n                    {{currencyCode}}</span>\r\n            </h2>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost-tax/add-cost-tax.component.scss":
/*!*****************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost-tax/add-cost-tax.component.scss ***!
  \*****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".ag-theme-material {\n  margin-bottom: 0px; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost-tax/add-cost-tax.component.ts":
/*!***************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost-tax/add-cost-tax.component.ts ***!
  \***************************************************************************************************************************************/
/*! exports provided: AddCostTaxComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddCostTaxComponent", function() { return AddCostTaxComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../../../core/services/authorization.service */ "./Client/app/core/services/authorization.service.ts");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-sign.enum */ "./Client/app/shared/enums/cost-sign.enum.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_execution_dtos_tax_record__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/services/execution/dtos/tax-record */ "./Client/app/shared/services/execution/dtos/tax-record.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};












var AddCostTaxComponent = /** @class */ (function (_super) {
    __extends(AddCostTaxComponent, _super);
    function AddCostTaxComponent(route, formConfigurationProvider, uiService, authorizationService, companyManagerService, gridService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.uiService = uiService;
        _this.authorizationService = authorizationService;
        _this.companyManagerService = companyManagerService;
        _this.gridService = gridService;
        _this.totalCostTaxCalculated = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.taxesGridOptions = {};
        _this.isGroupingEnabled = false;
        _this.costDirectionDisplay = '';
        _this.debit = 'Dr';
        _this.credit = 'Cr';
        _this.masterdata = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__["MasterData"]();
        _this.costTotal = 0;
        _this.total = 0;
        _this.taxTotal = 0;
        _this.currencyCode = '';
        _this.pricingOptionValue = 0;
        _this.decimalOptionValue = 2;
        _this.formatType = 'en-US';
        _this.costDirectionPay = 'Pay';
        _this.defaultTaxDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_7__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_6__["CostDirections"].Payable];
        _this.atlasAgGridParam = _this.gridService.getAgGridParam();
        _this.userActiveDirectoryName = _this.authorizationService.getCurrentUser().samAccountName;
        _this.company = _this.companyManagerService.getCurrentCompanyId();
        return _this;
    }
    AddCostTaxComponent.prototype.ngOnInit = function () {
        this.initializeGridColumns();
        this.masterdata = this.route.snapshot.data.masterdata;
    };
    AddCostTaxComponent.prototype.onGridReady = function (params) {
        var _this = this;
        params.columnDefs = this.taxesGridColumns;
        this.taxesGridOptions = params;
        this.gridApi = params.api;
        this.gridColumnApi = params.columnApi;
        this.gridColumnApi.autoSizeAllColumns();
        window.onresize = function () {
            _this.gridColumnApi.autoSizeAllColumns();
        };
    };
    AddCostTaxComponent.prototype.initializeGridColumns = function () {
        this.taxesGridColumns = [
            {
                headerName: 'VAT Code',
                field: 'vatCode',
                colId: 'vatCode',
                hide: false,
            },
            {
                headerName: 'Description',
                field: 'vatDescription',
                colId: 'vatDescription',
                hide: false,
            },
            {
                headerName: 'VAT Amount',
                field: 'rate',
                colId: 'rate',
                hide: false,
                valueFormatter: this.vatAmountFormatter.bind(this),
            },
        ];
    };
    AddCostTaxComponent.prototype.vatAmountFormatter = function (param) {
        return Math.abs(param.value);
    };
    AddCostTaxComponent.prototype.setDefaultVatCode = function (defaultVatCode) {
        var _this = this;
        this.vatCode = this.masterdata.vats.filter(function (option) { return option.vatCode === defaultVatCode; });
        var defaultTaxRecord = [];
        this.vatCode.forEach(function (data) {
            var taxLine = new _shared_services_execution_dtos_tax_record__WEBPACK_IMPORTED_MODULE_9__["TaxRecord"]();
            taxLine.vatCode = data.vatCode;
            taxLine.vatDescription = data.vatDescription;
            taxLine.rate = data.rate;
            taxLine.costDirection = _this.credit;
            defaultTaxRecord.push(taxLine);
        });
        if (defaultTaxRecord) {
            this.taxRecordsSelected(defaultTaxRecord);
        }
    };
    AddCostTaxComponent.prototype.taxRecordsSelected = function (taxesRecord) {
        if (taxesRecord.length > 0) {
            this.initializeGridColumns();
            this.taxesGridRows = taxesRecord;
            this.calculateTotalAmount(taxesRecord);
            if (this.gridApi) {
                this.gridApi.hideOverlay();
            }
        }
    };
    AddCostTaxComponent.prototype.setDirectionAndCurrency = function (data) {
        this.costDirectionDisplay = data.costDirection;
        this.currencyCode = data.currencyCode;
    };
    AddCostTaxComponent.prototype.calculateTotalAmount = function (taxes) {
        var _this = this;
        this.total = 0;
        this.taxTotal = 0;
        taxes.forEach(function (tax) {
            _this.taxTotal = _this.taxTotal + Math.abs(tax.rate);
        });
        this.totalCostTaxCalculated.emit({
            amount: this.taxTotal,
            decimalOption: this.decimalOptionValue,
            currencyCode: this.currencyCode,
            costDirection: this.costDirectionDisplay,
        });
    };
    AddCostTaxComponent.prototype.formatQuantityAndTotal = function (input) {
        var formattedInput = new Intl.NumberFormat(this.formatType, { minimumFractionDigits: this.decimalOptionValue }).format(input);
        return formattedInput.toLocaleString();
    };
    AddCostTaxComponent.prototype.calculateTotalForSummary = function (costInvoiceRecord) {
        this.total = costInvoiceRecord.totalVatAmount;
        this.currencyCode = costInvoiceRecord.currencyCode;
    };
    AddCostTaxComponent.prototype.getTaxesForSelectedVat = function (model) {
        if (model) {
            this.costTotal = model.rate;
            this.decimalOptionValue = model.decimalOption;
            this.currencyCode = model.currencyCode;
            this.totalCostDirection = model.costDirection;
            if (model.costDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_6__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_6__["CostDirections"].Payable]) {
                this.costDirectionDisplay = this.credit;
            }
            else if (model.costDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_6__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_6__["CostDirections"].Receivable]) {
                this.costDirectionDisplay = this.debit;
            }
            this.taxRecordsSelected(model.vatAvailable);
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], AddCostTaxComponent.prototype, "totalCostTaxCalculated", void 0);
    AddCostTaxComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-add-cost-tax',
            template: __webpack_require__(/*! ./add-cost-tax.component.html */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost-tax/add-cost-tax.component.html"),
            styles: [__webpack_require__(/*! ./add-cost-tax.component.scss */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost-tax/add-cost-tax.component.scss")]
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"], _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_10__["FormConfigurationProviderService"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_11__["UiService"],
            _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_2__["AuthorizationService"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_3__["CompanyManagerService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_8__["AgGridService"]])
    ], AddCostTaxComponent);
    return AddCostTaxComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost-total/add-cost-total.component.html":
/*!*********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost-total/add-cost-total.component.html ***!
  \*********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"invoice-creation-card\">\r\n    <mat-card-header>\r\n        <mat-card-title>\r\n            <h2>Total Amount</h2>\r\n        </mat-card-title>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n        <div fxLayout=\"column\"\r\n             fxLayoutAlign=\"end end\"\r\n             class=\"total-amount-content\">\r\n            <h2 class=\"no-margin total-figure\">Invoice Total Without Taxes: <span\r\n                      class=\"total-figure-value\">{{costDirectionSign}}{{formatAmount(amount)}}\r\n                    {{currencyCode}}</span> </h2>\r\n            <h2 class=\"no-margin total-figure\">Total Taxes: <span\r\n                      class=\"total-figure-value\">{{taxCostDirectionSign}}{{formatAmount(this.taxTotal)}}\r\n                    {{currencyCode}}</span> </h2>\r\n            <h2 class=\"no-margin total-figure\">Total Invoice Value: Amount to {{invoiceLabel}} <span\r\n                      class=\"total-figure-value\">{{totalCostDirectionSign}}{{formatAmount(this.total)}}\r\n                    {{currencyCode}}</span> </h2>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost-total/add-cost-total.component.scss":
/*!*********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost-total/add-cost-total.component.scss ***!
  \*********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "mat-card-content {\n  height: 50%; }\n  mat-card-content .total-amount-content {\n    height: 100%; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost-total/add-cost-total.component.ts":
/*!*******************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost-total/add-cost-total.component.ts ***!
  \*******************************************************************************************************************************************/
/*! exports provided: AddCostTotalComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddCostTotalComponent", function() { return AddCostTotalComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-direction-type.enum */ "./Client/app/shared/enums/cost-direction-type.enum.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-sign.enum */ "./Client/app/shared/enums/cost-sign.enum.ts");
/* harmony import */ var _shared_enums_invoice_payment_type__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/enums/invoice-payment-type */ "./Client/app/shared/enums/invoice-payment-type.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var AddCostTotalComponent = /** @class */ (function (_super) {
    __extends(AddCostTotalComponent, _super);
    function AddCostTotalComponent(formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.total = 0;
        _this.amount = 0;
        _this.taxTotal = 0;
        _this.formatType = 'en-US';
        _this.defaultDecimalOption = 2;
        _this.debit = 'Dr';
        _this.credit = 'Cr';
        _this.taxCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_4__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable];
        return _this;
    }
    AddCostTotalComponent.prototype.ngOnInit = function () {
        this.costDirections = [
            {
                costDirectionId: _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable,
                costDirection: 'Pay',
            },
            {
                costDirectionId: _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Receivable,
                costDirection: 'Receive',
            },
        ];
    };
    AddCostTotalComponent.prototype.formatAmount = function (input) {
        var formattedInput = new Intl.NumberFormat(this.formatType, { minimumFractionDigits: this.decimalOption }).format(input);
        return formattedInput.toLocaleString();
    };
    AddCostTotalComponent.prototype.setValuesForTotalWithoutTax = function (model) {
        this.amount = Math.abs(model.totalInvoiceValue);
        this.decimalOption = model.decimalOption;
        this.currencyCode = model.currency;
        if (model.costDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable) {
            this.costDirectionDisplay = this.credit;
        }
        else if (model.costDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Receivable) {
            this.costDirectionDisplay = this.debit;
        }
        this.costDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_4__["CostSigns"][model.costDirection];
        this.setTotalForGoodCost();
    };
    AddCostTotalComponent.prototype.setTotalForGoodCost = function () {
        if (this.costDirectionDisplay) {
            if (this.costDirectionDisplay === this.credit) {
                this.total = this.taxTotal + this.amount;
                this.totalCostDirection = this.credit;
            }
            else {
                this.total = this.amount - this.taxTotal;
                this.totalCostDirection = this.debit;
            }
            this.invoiceLabel = _shared_enums_invoice_payment_type__WEBPACK_IMPORTED_MODULE_5__["InvoicePaymentType"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__["CostDirectionType"][this.costDirectionDisplay]];
            this.totalCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_4__["CostSigns"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__["CostDirectionType"][this.costDirectionDisplay]];
        }
        else {
            this.total = this.taxTotal;
            this.totalCostDirection = this.credit;
            this.totalCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_4__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable];
            this.invoiceLabel = _shared_enums_invoice_payment_type__WEBPACK_IMPORTED_MODULE_5__["InvoicePaymentType"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable];
        }
    };
    AddCostTotalComponent.prototype.setValuesForTotalTax = function (model) {
        this.taxTotal = Math.abs(model.amount);
        this.decimalOption = model.decimalOption;
        this.currencyCode = model.currencyCode;
        this.total = this.taxTotal + this.amount;
        if (this.taxTotal) {
            this.setTotalForGoodCost();
        }
    };
    AddCostTotalComponent.prototype.setValuesForTotalFromGrid = function (summaryRecord) {
        var invoiceLines = summaryRecord.summaryLines;
        var total = 0;
        invoiceLines.forEach(function (tax) {
            total = total + tax.vatAmount;
        });
        this.taxTotal = total;
        this.decimalOption = this.defaultDecimalOption;
        this.currencyCode = summaryRecord.currency;
        this.amount = summaryRecord.totalInvoiceValue;
        this.calculateCostDirection(invoiceLines);
        this.setTotalForGoodCost();
    };
    AddCostTotalComponent.prototype.summaryTotalCalculated = function () {
        this.total = this.taxTotal + this.amount;
    };
    AddCostTotalComponent.prototype.calculateCostDirection = function (contracts) {
        var _this = this;
        var totalCR = 0;
        var totalDR = 0;
        var costDirectionId;
        contracts.forEach(function (contract) {
            costDirectionId = _this.getCostDirectionIdFromCode(contract.costDirection);
            if (costDirectionId === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable) {
                totalCR = totalCR + contract.lineAmount;
            }
            else {
                totalDR = totalDR + contract.lineAmount;
            }
        });
        this.costDirectionDisplay = (totalCR > totalDR) ? _shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__["CostDirectionType"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__["CostDirectionType"].Cr] : _shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__["CostDirectionType"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__["CostDirectionType"].Dr];
    };
    AddCostTotalComponent.prototype.getCostDirectionIdFromCode = function (code) {
        if (code) {
            var selectedCostDirection = this.costDirections.find(function (e) { return e.costDirection === code; });
            if (selectedCostDirection) {
                return selectedCostDirection.costDirectionId;
            }
        }
    };
    AddCostTotalComponent.prototype.populateEntity = function (entity) {
        var invoiceDetails = entity;
        invoiceDetails.costDirection = (this.totalCostDirectionSign === _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_4__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable])
            ? _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable : _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Receivable;
        return invoiceDetails;
    };
    AddCostTotalComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-add-cost-total',
            template: __webpack_require__(/*! ./add-cost-total.component.html */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost-total/add-cost-total.component.html"),
            styles: [__webpack_require__(/*! ./add-cost-total.component.scss */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost-total/add-cost-total.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__["FormConfigurationProviderService"]])
    ], AddCostTotalComponent);
    return AddCostTotalComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_1__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost/add-cost.component.html":
/*!*********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost/add-cost.component.html ***!
  \*********************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-content>\r\n        <div fxLayout=\"column\">\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutGap=\"90%\">\r\n                <h2>Cost</h2>\r\n            </div>\r\n        </div>\r\n        <div [hidden]=\"isAdditionalCostForSummary\"\r\n             fxLayout=\"row\"\r\n             fxLayoutAlign=\"start center\"\r\n             fxLayoutGap=\"10px\"\r\n             class=\"add-line-container\">\r\n            <div fxLayout=\"column\"\r\n                 fxLayoutAlign=\"start start\">\r\n                <h4>Add new lines:</h4>\r\n            </div>\r\n            <div fxLayout=\"column\"\r\n                 fxLayoutAlign=\"start start\"\r\n                 fxFlex=\"2\">\r\n                <mat-form-field>\r\n                    <input matInput\r\n                           [formControl]=\"addNewLineCtrl\">\r\n                </mat-form-field>\r\n            </div>\r\n            <div fxLayout=\"column\"\r\n                 fxLayoutAlign=\"start start\">\r\n                <button mat-button\r\n                        (click)=\"onAddRowButtonClicked(addNewLineCtrl.value)\">PROCEED</button>\r\n            </div>\r\n        </div>\r\n\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"end\"\r\n             class=\"use-goods-tax-code\"\r\n             fxLayoutGap=\"16px\">\r\n            <span class=\"fill-space\"></span>\r\n\r\n            <mat-slide-toggle [formControl]=\"useGoodsTaxCodeCtrl\"> Use Goods Tax Code</mat-slide-toggle>\r\n\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"end\"\r\n                 fxFlex=\"10%\"\r\n                 [hidden]=\"isAdditionalCostForSummary\">\r\n                <mat-form-field fxFlex=\"90%\">\r\n                    <mat-select placeholder=\"Cost VAT Code\"\r\n                                [formControl]=\"costVatCodeCtrl\"\r\n                                matTooltip=\"Cost VAT Code\"\r\n                                (selectionChange)='onCostVatCodeSelected()'>\r\n                        <mat-option *ngFor=\"let code of costVatCodeOptions\"\r\n                                    [value]=\"code.vatCode\">\r\n                            {{code.vatCode}}\r\n                        </mat-option>\r\n                    </mat-select>\r\n                </mat-form-field>\r\n            </div>\r\n        </div>\r\n        <div ag-grid=\"selectedCostGridOptions\"\r\n             class=\"ag-theme-material pointer-cursor\">\r\n            <ag-grid-angular class=\"ag-theme-material\"\r\n                             [rowData]=\"selectedCostGridRows\"\r\n                             [columnDefs]=\"selectedCostGridColumns\"\r\n                             [gridOptions]=\"selectedCostGridOptions\"\r\n                             domLayout=\"autoHeight\"\r\n                             (gridReady)=\"onGridReady($event)\"\r\n                             [pagination]=\"true\"\r\n                             [paginationPageSize]=\"10\"\r\n                             [enableSorting]=\"true\"\r\n                             [enableColResize]=\"true\"\r\n                             [enableFilter]=\"true\"\r\n                             [rowSelection]=\"rowSelection\"\r\n                             [frameworkComponents]=\"gridComponents\"\r\n                             enableFilter\r\n                             [rowHeight]=atlasAgGridParam.rowHeight\r\n                             [singleClickEdit]=true>\r\n            </ag-grid-angular>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"end\">\r\n            <h2 class=\"no-margin total-figure\">\r\n                Total Cost:<span class=\"total-figure-value\">\r\n                    {{this.totalCostDirectionSign}}{{formatQuantityAndTotal(this.total)}}\r\n                    {{this.currencyCodeSelected}} </span>\r\n            </h2>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost/add-cost.component.scss":
/*!*********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost/add-cost.component.scss ***!
  \*********************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost/add-cost.component.ts":
/*!*******************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost/add-cost.component.ts ***!
  \*******************************************************************************************************************************/
/*! exports provided: AddCostComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddCostComponent", function() { return AddCostComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../core/services/authorization.service */ "./Client/app/core/services/authorization.service.ts");
/* harmony import */ var _shared_components_ag_contextual_menu_ag_contextual_menu_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/components/ag-contextual-menu/ag-contextual-menu.component */ "./Client/app/shared/components/ag-contextual-menu/ag-contextual-menu.component.ts");
/* harmony import */ var _shared_components_ag_grid_autocomplete_ag_grid_autocomplete_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/components/ag-grid/autocomplete/ag-grid-autocomplete.component */ "./Client/app/shared/components/ag-grid/autocomplete/ag-grid-autocomplete.component.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_components_cell_editor_select_cell_editor_select_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/components/cell-editor-select/cell-editor-select.component */ "./Client/app/shared/components/cell-editor-select/cell-editor-select.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_invoice_line_record_entity__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/entities/invoice-line-record.entity */ "./Client/app/shared/entities/invoice-line-record.entity.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-sign.enum */ "./Client/app/shared/enums/cost-sign.enum.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../../../shared/services/execution/dtos/contracts-to-cost-invoice */ "./Client/app/shared/services/execution/dtos/contracts-to-cost-invoice.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

// import { DatePipe } from '@angular/common';

















var AddCostComponent = /** @class */ (function (_super) {
    __extends(AddCostComponent, _super);
    function AddCostComponent(executionService, formBuilder, formConfigurationProvider, route, uiService, 
    // private datePipe: DatePipe,
    authorizationService, snackbar, gridService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.executionService = executionService;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.route = route;
        _this.uiService = uiService;
        _this.authorizationService = authorizationService;
        _this.snackbar = snackbar;
        _this.gridService = gridService;
        _this.invoiceCostMenuActions = {
            deleteInvoiceCost: 'delete',
        };
        _this.totalCostAndVatCode = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.costVatCodeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__["AtlasFormControl"]('CostVatCode');
        _this.useGoodsTaxCodeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__["AtlasFormControl"]('UseGoodsTaxCode');
        _this.narrativeLength = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.selectedCostGridOptions = {};
        _this.selectedCostGridRows = [];
        _this.componentId = 'selectedCost';
        _this.invoicedPercentage = 100;
        _this.gridComponents = {
            atlasSelect: _shared_components_cell_editor_select_cell_editor_select_component__WEBPACK_IMPORTED_MODULE_7__["CellEditorSelectComponent"],
        };
        _this.gridContext = {
            gridEditable: false,
        };
        _this.taxRateCalculated = 0;
        _this.total = 0;
        _this.taxTotal = 0;
        _this.costDirectionDisplay = '';
        _this.debit = 'Dr';
        _this.credit = 'Cr';
        _this.currencyCode = '';
        _this.pricingOptionValue = 0;
        _this.decimalOptionValue = 2;
        _this.formatType = 'en-US';
        _this.isAdditionalCostForSummary = false;
        _this.costNarrativePrefix = 'ADD ';
        _this.addNewLineCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__["AtlasFormControl"]('addNewLineCtrl');
        _this.inPNL = false;
        _this.noAction = false;
        _this.atlasAgGridParam = _this.gridService.getAgGridParam();
        _this.userActiveDirectoryName = _this.authorizationService.getCurrentUser().samAccountName;
        return _this;
    }
    AddCostComponent.prototype.ngOnInit = function () {
        this.invoiceType = Number(decodeURIComponent(this.route.snapshot.paramMap.get('invoiceTypeId')));
        this.company = this.route.snapshot.paramMap.get('company');
        this.masterData = this.route.snapshot.data.masterdata;
        this.costDirections = [
            {
                costDirectionId: _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"].Payable,
                costDirection: 'Pay',
            },
            {
                costDirectionId: _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"].Receivable,
                costDirection: 'Receive',
            },
        ];
        this.gridContext.gridEditable = false;
        this.costVatCodeOptions = this.masterData.vats;
        this.costVatCodeCtrl.patchValue(this.masterData.vats[0].vatCode);
        this.selectedCostVat = this.costVatCodeCtrl.value;
        this.init();
        this.initializeGridColumns();
        this.addNewLineCtrl.patchValue(1);
        this.useGoodsTaxCodeCtrl.patchValue(true);
        this.onChanges();
    };
    AddCostComponent.prototype.init = function () {
        this.invoiceCostGridContextualMenuActions = [
            {
                icon: 'delete',
                text: 'Delete',
                action: this.invoiceCostMenuActions.deleteInvoiceCost,
            },
        ];
    };
    AddCostComponent.prototype.handleAction = function (action, costLine) {
        switch (action) {
            case this.invoiceCostMenuActions.deleteInvoiceCost:
                this.onDeleteSelectedButtonClicked(costLine);
                break;
            default:
                break;
        }
    };
    AddCostComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            costVatCodeCtrl: this.costVatCodeCtrl,
            useGoodsTaxCodeCtrl: this.useGoodsTaxCodeCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    AddCostComponent.prototype.onChanges = function () {
        var _this = this;
        this.useGoodsTaxCodeCtrl.valueChanges.subscribe(function (val) {
            if (val) {
                _this.onUseGoodsTaxCodeToggleChange(_this.selectedGoodsVat);
            }
            else {
                _this.onUseGoodsTaxCodeToggleChange(_this.selectedCostVat);
            }
        });
    };
    AddCostComponent.prototype.onUseGoodsTaxCodeToggleChange = function (value) {
        if (value) {
            this.costVatCodeCtrl.patchValue(value);
            var changedVatCode_1 = [];
            this.gridApi.forEachNode(function (rowNode) {
                if (rowNode.data) {
                    var data = rowNode.data;
                    data.vatCode = value;
                    changedVatCode_1.push(data);
                }
            });
            this.gridApi.updateRowData({ update: changedVatCode_1 });
            this.calculateTotalOnUpdateGrid();
        }
    };
    AddCostComponent.prototype.setVatCodeAvailable = function () {
        var _this = this;
        if (this.selectedGoodsVat) {
            this.costVatCodeCtrl.patchValue(this.selectedGoodsVat);
            this.vatCodeAvailable = this.masterData.vats.filter(function (option) { return option.vatCode === _this.selectedGoodsVat; });
            this.totalCostAndVatDetails();
        }
    };
    AddCostComponent.prototype.onGridReady = function (params) {
        var _this = this;
        this.gridApi = params.api;
        params.columnDefs = this.selectedCostGridColumns;
        this.selectedCostGridOptions = params;
        this.gridColumnApi = params.columnApi;
        this.autoSizeGridHeader();
        this.gridColumnApi.autoSizeAllColumns();
        window.onresize = function () {
            _this.gridColumnApi.autoSizeAllColumns();
        };
    };
    AddCostComponent.prototype.autoSizeGridHeader = function () {
        var allColumnIds = [];
        this.selectedCostGridColumns.forEach(function (columnDefs) {
            allColumnIds.push(columnDefs.field);
        });
        this.gridColumnApi.autoSizeColumns(allColumnIds);
    };
    AddCostComponent.prototype.onGridSizeChanged = function (params) {
        this.autoSizeGridHeader();
    };
    AddCostComponent.prototype.initializeGridColumns = function () {
        this.selectedCostGridOptions = {
            context: this.gridContext,
        };
        this.selectedCostGridColumns = [
            {
                headerName: 'Cost Type',
                field: 'costTypeCode',
                colId: 'costTypeCode',
                hide: false,
                width: 250,
                minWidth: 250,
                maxWidth: 250,
                suppressSizeToFit: true,
                cellRendererFramework: _shared_components_ag_grid_autocomplete_ag_grid_autocomplete_component__WEBPACK_IMPORTED_MODULE_5__["AgGridAutocompleteComponent"],
                cellRendererParams: {
                    context: this.masterData,
                    options: this.masterData.costTypes.filter(function (cost) { return cost.isATradeCost === true; })
                        .sort(function (a, b) { return a.costTypeCode.localeCompare(b.costTypeCode); }),
                    valueProperty: 'costTypeCode',
                    codeProperty: 'costTypeCode',
                    isRequired: true,
                    displayProperty: 'name',
                },
                onCellValueChanged: this.onCostTypeChange.bind(this),
            },
            {
                headerName: '%Invoiced',
                field: 'percentageInvoiced',
                colId: 'percentageInvoiced',
                valueGetter: this.getpercentageInvoiced.bind(this),
                hide: false,
            },
            {
                headerName: 'Currency',
                field: 'currencyCode',
                colId: 'currencyCode',
                hide: false,
            },
            {
                headerName: 'Pay/Rec',
                field: 'costDirection',
                colId: 'costDirection',
                hide: false,
                editable: this.isGridEditable,
                cellRenderer: this.requiredCell.bind(this),
                cellEditor: 'agRichSelectCellEditor',
                cellEditorParams: {
                    values: this.costDirections.map(function (costDirection) { return costDirection.costDirection; }),
                    displayPropertyName: 'costDirection',
                    valuePropertyName: 'costDirection',
                    displayFormat: 'costDirection',
                },
                onCellValueChanged: this.onCostDirectionChange.bind(this),
            },
            {
                headerName: 'VAT Code',
                field: 'vatCode',
                colId: 'vatCode',
                hide: false,
                editable: true,
                cellRenderer: this.requiredCell.bind(this),
                cellEditor: 'agRichSelectCellEditor',
                cellEditorParams: {
                    values: this.masterData.vats.map(function (vat) { return vat.vatCode; }),
                    displayPropertyName: 'vatCode',
                    valuePropertyName: 'vatCode',
                    displayFormat: 'vatCode',
                    context: this.masterData,
                },
                onCellValueChanged: this.onVatCodeChange.bind(this),
            },
            {
                headerName: 'Cost Amount',
                field: 'costAmountToInvoice',
                colId: 'costAmountToInvoice',
                hide: false,
                editable: this.isGridEditable,
                cellRenderer: this.requiredCell.bind(this),
                valueSetter: this.setCostAmountToInvoice,
                onCellValueChanged: this.onCostAmountToInvoiceChange.bind(this),
            },
            {
                headerName: 'Cost Narrative',
                field: 'narrative',
                colId: 'narrative',
                hide: false,
                editable: this.isGridEditable,
                valueSetter: this.setCostNarrative.bind(this),
                cellStyle: this.narrativeMaxLength.bind(this),
            },
            {
                headerName: '',
                cellRendererFramework: _shared_components_ag_contextual_menu_ag_contextual_menu_component__WEBPACK_IMPORTED_MODULE_4__["AgContextualMenuComponent"],
                cellRendererParams: {
                    context: {
                        componentParent: this,
                        actionContext: this.gridContext,
                    },
                    menuActions: this.invoiceCostGridContextualMenuActions,
                },
                hide: this.isAdditionalCostForSummary === true,
                maxWidth: 80,
            },
        ];
        this.rowSelection = 'multiple';
    };
    AddCostComponent.prototype.isGridEditable = function (params) {
        if (!params.data.contractReference) {
            return params.context.gridEditable;
        }
        else {
            return false;
        }
    };
    AddCostComponent.prototype.setCostAmountToInvoice = function (params) {
        params.data.costAmountToInvoice = (params.newValue <= 0) ? 0 : params.newValue;
        return true;
    };
    AddCostComponent.prototype.setCostNarrative = function (params) {
        if (params.newValue.length <= 0) {
            params.data.narrative = this.costNarrativePrefix;
        }
        else {
            var narrativeText = params.newValue;
            params.data.narrative = (narrativeText).startsWith('ADD') ? params.newValue :
                this.costNarrativePrefix.concat(params.newValue);
        }
        return true;
    };
    AddCostComponent.prototype.onCostTypeChange = function (params) {
        var filteredCostType = params.colDef.cellRendererParams.context.costTypes.find(function (e) { return e.costTypeCode === params.data.costTypeCode; });
        if (filteredCostType) {
            this.inPNL = filteredCostType.inPNL;
            this.noAction = filteredCostType.noAction;
        }
    };
    AddCostComponent.prototype.narrativeMaxLength = function (params) {
        if (params.data && params.value) {
            if (params.value.length > 30) {
                this.narrativeLength.emit(true);
                this.snackbar.informationSnackBar('Narrative length should be less than 30');
                return { color: 'red' };
            }
            else {
                this.narrativeLength.emit(false);
                return { color: 'black' };
            }
        }
        return params.value;
    };
    AddCostComponent.prototype.validate = function () {
        var isValid = true;
        if (this.isAddRow) {
            this.gridApi.forEachNode(function (rowData) {
                if (!(rowData.data.costTypeCode && rowData.data.costDirection && rowData.data.vatCode
                    && rowData.data.costAmountToInvoice)) {
                    isValid = false;
                }
            });
        }
        return isValid;
    };
    AddCostComponent.prototype.contractToBeSelected = function (costContracts) {
        var _this = this;
        if (costContracts.length > 0) {
            this.initializeGridColumns();
            if (this.defaultVatCode) {
                costContracts.map(function (costContract) { return costContract.vatCode = _this.defaultVatCode; });
            }
            this.selectedCostGridRows = costContracts;
            this.selectedCostGridOptions.pagination = (costContracts.length > 10) ? true : false;
            if (this.masterData.vats.length > 0) {
                this.costVatCodeCtrl.patchValue(this.masterData.vats[0].vatCode);
            }
            this.calculateTotalAmountAndGetVatCode(costContracts);
        }
    };
    AddCostComponent.prototype.setDefaultCurrency = function (currency) {
        if (currency) {
            this.currencyCodeSelected = currency;
        }
    };
    AddCostComponent.prototype.getpercentageInvoiced = function (params) {
        params.data.percentageInvoiced = this.invoicedPercentage;
        return params.data.percentageInvoiced;
    };
    AddCostComponent.prototype.onCostDirectionChange = function (params) {
        if (params.data.costAmountToInvoice) {
            this.calculateTotalOnUpdateGrid();
        }
        return true;
    };
    AddCostComponent.prototype.onCostAmountToInvoiceChange = function (params) {
        if (params.data.costDirection) {
            this.calculateTotalOnUpdateGrid();
        }
        return true;
    };
    AddCostComponent.prototype.onAddRowButtonClicked = function (numberOfLines) {
        this.isAddRow = true;
        this.gridContext.gridEditable = true;
        this.gridApi.onFilterChanged();
        for (var count = 1; count <= numberOfLines; count++) {
            var newItem = this.createNewCostRowData();
            this.gridApi.updateRowData({ add: [newItem], addIndex: 0 });
        }
    };
    AddCostComponent.prototype.onDeleteSelectedButtonClicked = function (costLine) {
        if (!costLine.contractReference) {
            this.total = 0;
            this.gridApi.updateRowData({ remove: [costLine] });
            this.calculationOfCRAndDR();
            this.calculateTotalOnUpdateGrid();
        }
        else {
            this.snackbar.informationSnackBar('You cannot delete a cost which is not added in Invoice Working Page');
        }
    };
    AddCostComponent.prototype.calculationOfCRAndDR = function () {
        var totalCR = 0;
        var totalDR = 0;
        var costDirectionPay = 'Pay';
        this.gridApi.forEachNode(function (rowNode) {
            if (rowNode.data) {
                if (rowNode.data.costDirection === costDirectionPay) {
                    totalCR = totalCR + Number(rowNode.data.costAmountToInvoice);
                }
                else {
                    totalDR = totalDR + Number(rowNode.data.costAmountToInvoice);
                }
            }
        });
        this.updateTotals(totalCR, totalDR);
        this.totalCostAndVatDetails();
    };
    AddCostComponent.prototype.updateTotals = function (totalCR, totalDR) {
        if (totalCR > totalDR) {
            this.total = totalCR - totalDR;
            this.costDirectionDisplay = this.credit;
            this.totalCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_11__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"].Payable];
            this.totalCostDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"].Payable];
        }
        else {
            this.total = totalDR - totalCR;
            this.costDirectionDisplay = this.debit;
            this.totalCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_11__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"].Receivable];
            this.totalCostDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"].Receivable];
        }
    };
    AddCostComponent.prototype.totalCostAndVatDetails = function () {
        var _this = this;
        this.totalCostAndVatCode.emit({
            rate: this.total,
            decimalOption: this.decimalOptionValue,
            costDirection: this.totalCostDirection,
            currencyCode: this.currencyCodeSelected,
            vatAvailable: this.vatCodeAvailable,
        });
        this.vatCodeAvailable.forEach(function (tax) {
            _this.taxTotal = _this.taxTotal + Math.abs(tax.rate);
        });
    };
    AddCostComponent.prototype.createNewCostRowData = function () {
        var newData = new _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_13__["ContractsToCostInvoice"]();
        newData.invoicePercent = this.invoicedPercentage;
        newData.currencyCode = this.currencyCodeSelected;
        newData.narrative = this.costNarrativePrefix;
        newData.vatCode = this.defaultVatCode;
        return newData;
    };
    AddCostComponent.prototype.setDefaultVatCode = function (defaultVatCode) {
        this.defaultVatCode = defaultVatCode;
    };
    AddCostComponent.prototype.setTaxDataForSummary = function (costInvoiceRecord) {
        this.selectedCostGridRows = this.getCostContractsForSummary(costInvoiceRecord);
        this.initializeGridColumns();
        this.calculateTotalForSummary(costInvoiceRecord);
    };
    AddCostComponent.prototype.getCostContractsForSummary = function (costInvoiceRecord) {
        var contracts = [];
        if (costInvoiceRecord) {
            var contract = new _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_13__["ContractsToCostInvoice"]();
            contract.vatCode = costInvoiceRecord.vatCode;
            contract.principalCommodity = costInvoiceRecord.principalCommodity;
            contract.rate = costInvoiceRecord.price;
            contract.quantity = costInvoiceRecord.quantity;
            contract.costAmountToInvoice = costInvoiceRecord.lineAmount;
            contract.invoicePercent = costInvoiceRecord.totalInvoiceValue;
            contracts.push(contract);
        }
        return contracts;
    };
    AddCostComponent.prototype.getCostDirectionIdFromCode = function (code) {
        if (code) {
            var selectedCostDirection = this.costDirections.find(function (e) { return e.costDirection === code; });
            return selectedCostDirection.costDirectionId;
        }
    };
    AddCostComponent.prototype.calculateTotalAmountAndGetVatCode = function (contracts) {
        var _this = this;
        this.total = 0;
        var totalCR = 0;
        var totalDR = 0;
        var costDirectionId;
        this.vatCodeAvailable = [];
        contracts.forEach(function (contract) {
            var vatCode;
            // creating copy of selected vatCode, so the calculations are not impacting the original data
            vatCode = _this.masterData.vats
                .filter(function (vat) { return (vat.vatCode === contract.vatCode); }).map(function (x) { return (__assign({}, x)); });
            if (vatCode.length > 0) {
                vatCode.map(function (code) {
                    return code.rate = code.rate / 100 * contract.costAmountToInvoice;
                });
                if (_this.vatCodeAvailable.length === 0) {
                    _this.vatCodeAvailable.push(vatCode[0]);
                }
                else {
                    _this.vatCodeAvailable.map(function (code) {
                        return (code.vatCode === vatCode[0].vatCode) ? (code.rate = code.rate + vatCode[0].rate) :
                            _this.vatCodeAvailable.push(vatCode[0]);
                    });
                }
            }
            costDirectionId = _this.getCostDirectionIdFromCode(contract.costDirection);
            if (costDirectionId === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"].Payable) {
                totalCR = totalCR + contract.costAmountToInvoice;
            }
            else {
                totalDR = totalDR + contract.costAmountToInvoice;
            }
        });
        if (contracts.length > 0) {
            this.currencyCode = contracts[0].currencyCode;
        }
        this.updateTotals(totalCR, totalDR);
        this.totalCostAndVatDetails();
    };
    AddCostComponent.prototype.calculateTotalOnUpdateGrid = function () {
        var totalCR = 0;
        var totalDR = 0;
        var costDirectionPay = 'Pay';
        var vatMasterData = this.masterData.vats;
        var vatCodeAvailable = [];
        this.gridApi.forEachNode(function (rowNode) {
            if (rowNode.data) {
                var vatCode_1 = [];
                if (rowNode.data.costDirection === costDirectionPay) {
                    totalCR = totalCR + Number(rowNode.data.costAmountToInvoice);
                }
                else {
                    totalDR = totalDR + Number(rowNode.data.costAmountToInvoice);
                }
                vatCode_1 = vatMasterData
                    .filter(function (vat) { return (vat.vatCode === rowNode.data.vatCode); }).map(function (x) { return (__assign({}, x)); });
                if (vatCode_1.length > 0) {
                    vatCode_1.map(function (code) {
                        return code.rate = code.rate / 100 * rowNode.data.costAmountToInvoice;
                    });
                    if (vatCodeAvailable.length === 0) {
                        if (rowNode.data.costDirection === costDirectionPay) {
                            vatCode_1[0].rate = -(vatCode_1[0].rate);
                        }
                        vatCodeAvailable.push(vatCode_1[0]);
                    }
                    else {
                        var isAvailable_1 = false;
                        vatCodeAvailable.map(function (code) {
                            if (code.vatCode === vatCode_1[0].vatCode) {
                                if (vatCodeAvailable.filter(function (selectedVatCode) { return selectedVatCode.vatCode === vatCode_1[0].vatCode; })) {
                                    if (rowNode.data.costDirection === costDirectionPay) {
                                        vatCode_1[0].rate = -(vatCode_1[0].rate);
                                    }
                                    code.rate = code.rate + vatCode_1[0].rate;
                                    isAvailable_1 = true;
                                }
                            }
                        });
                        if (!isAvailable_1) {
                            vatCodeAvailable = vatCodeAvailable.filter(function (code) { return code.vatCode !== vatCode_1[0].vatCode; });
                            if (rowNode.data.costDirection === costDirectionPay) {
                                vatCode_1[0].rate = -(vatCode_1[0].rate);
                            }
                            vatCodeAvailable.push(vatCode_1[0]);
                        }
                    }
                }
            }
        });
        this.updateTotals(totalCR, totalDR);
        if (this.useGoodsTaxCodeCtrl.value) {
            this.setVatCodeAvailable();
        }
        else {
            this.vatCodeAvailable = vatCodeAvailable.map(function (x) { return (__assign({}, x)); });
            this.totalCostAndVatDetails();
        }
    };
    AddCostComponent.prototype.formatQuantityAndTotal = function (input) {
        var formattedInput = new Intl.NumberFormat(this.formatType, { minimumFractionDigits: this.decimalOptionValue }).format(input);
        return formattedInput.toLocaleString();
    };
    AddCostComponent.prototype.calculateTotalForSummary = function (costInvoiceRecord) {
        this.total = costInvoiceRecord.totalVatAmount;
        this.currencyCode = costInvoiceRecord.currencyCode;
    };
    AddCostComponent.prototype.onVatCodeChange = function (params) {
        if (params.data.costAmountToInvoice) {
            this.calculateTotalOnUpdateGrid();
        }
    };
    AddCostComponent.prototype.requiredCell = function (params) {
        if (params.data && params.context.gridEditable) {
            if (!params.value || params.value === '') {
                return '<div class=\'cost-cell-value-required\'>Required*</div>';
            }
        }
        return params.value;
    };
    AddCostComponent.prototype.onCostVatCodeSelected = function () {
        if (!this.useGoodsTaxCodeCtrl.value) {
            var vat_1 = this.costVatCodeCtrl.value;
            this.selectedCostVat = vat_1;
            var changedVatCode_2 = [];
            this.gridApi.forEachNode(function (rowNode) {
                if (rowNode.data) {
                    var data = rowNode.data;
                    data.vatCode = vat_1;
                    changedVatCode_2.push(data);
                }
            });
            this.gridApi.updateRowData({ update: changedVatCode_2 });
            this.calculateTotalOnUpdateGrid();
        }
    };
    AddCostComponent.prototype.populateEntity = function (entity) {
        var selectedInvoiceCosts = entity;
        selectedInvoiceCosts.currency = this.currencyCodeSelected;
        selectedInvoiceCosts.totalInvoiceValue = this.total;
        if (selectedInvoiceCosts.invoiceLines && selectedInvoiceCosts.invoiceLines.length > 0) {
            var invoiceLines = this.getInvoiceCostLines(selectedInvoiceCosts.invoiceLines.length);
            invoiceLines.forEach(function (line) {
                selectedInvoiceCosts.invoiceLines.push(line);
            });
        }
        else {
            selectedInvoiceCosts.invoiceLines = this.getInvoiceCostLines();
        }
        return selectedInvoiceCosts;
    };
    AddCostComponent.prototype.getAllInvoiceCostLines = function () {
        var _this = this;
        var selectedCostRows = [];
        this.gridApi.forEachNode(function (rowData) {
            if (rowData.data) {
                var costInvoiceline = new _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_13__["ContractsToCostInvoice"]();
                costInvoiceline.costId = rowData.data.costId;
                costInvoiceline.sectionId = rowData.data.sectionId;
                costInvoiceline.costAmountToInvoice = rowData.data.costAmountToInvoice;
                costInvoiceline.quantity = rowData.data.quantity;
                costInvoiceline.costTypeCode = rowData.data.costTypeCode;
                costInvoiceline.currencyCode = rowData.data.currencyCode;
                costInvoiceline.vatCode = rowData.data.vatCode;
                costInvoiceline.narrative = rowData.data.narrative;
                costInvoiceline.invoicePercent = _this.invoicedPercentage;
                costInvoiceline.rateTypeCode = rowData.data.rateTypeCode;
                costInvoiceline.costDirection = rowData.data.costDirection;
                selectedCostRows.push(costInvoiceline);
            }
        });
        return selectedCostRows;
    };
    AddCostComponent.prototype.getInvoiceCostLines = function (index) {
        var _this = this;
        if (index === void 0) { index = 0; }
        var invoiceLines = [];
        this.selectedCostGridRows = this.getAllInvoiceCostLines();
        this.selectedCostGridRows.map(function (data) {
            var invoiceLine = new _shared_entities_invoice_line_record_entity__WEBPACK_IMPORTED_MODULE_9__["InvoiceLineRecord"]();
            invoiceLine.costID = data.costId;
            invoiceLine.sectionID = data.sectionId;
            invoiceLine.lineAmount = data.costAmountToInvoice;
            var selectedCostDirection = _this.costDirections.find(function (e) { return e.costDirection === data.costDirection; });
            invoiceLine.costDirectionId = selectedCostDirection ? selectedCostDirection.costDirectionId : null;
            invoiceLine.costTypeCode = data.costTypeCode;
            invoiceLine.currencyCode = data.currencyCode;
            invoiceLine.rateTypeId = 1; // RateType to be defaulted as Amount as per the FS.
            invoiceLine.vatCode = data.vatCode;
            invoiceLine.vatAmount = data.vatAmount;
            invoiceLine.invoicePercent = _this.invoicedPercentage;
            invoiceLine.narrative = data.narrative;
            invoiceLine.inPL = _this.inPNL;
            invoiceLine.noAct = _this.noAction;
            invoiceLines.push(invoiceLine);
            index++;
        });
        return invoiceLines;
    };
    /* Code for home grid to summary redirection */
    AddCostComponent.prototype.contractToBeSelectedFromGrid = function (summaryRecord) {
        var _this = this;
        if (summaryRecord) {
            this.selectedCostGridRows = this.getCostContractsForSummaryFromGrid(summaryRecord.summaryLines);
            this.initializeGridColumnsFromSummary();
            if (this.selectedCostGridRows.length > 0) {
                this.calculateTotalAmountAndGetVatCode(this.selectedCostGridRows);
            }
            else {
                this.currencyCodeSelected = summaryRecord.currency;
                summaryRecord.summaryLines.forEach(function (record) {
                    if (record.vatCode) {
                        _this.vatCodeAvailable = _this.masterData.vats.filter(function (option) { return option.vatCode === record.vatCode; });
                    }
                });
                this.totalCostAndVatCode.emit({
                    rate: this.total,
                    decimalOption: this.decimalOptionValue,
                    costDirection: this.totalCostDirection,
                    currencyCode: this.currencyCodeSelected,
                    vatAvailable: this.vatCodeAvailable,
                });
            }
        }
    };
    AddCostComponent.prototype.initializeGridColumnsFromSummary = function () {
        this.selectedCostGridColumns = [
            {
                headerName: 'Cost Type',
                field: 'costTypeCode',
                colId: 'costTypeCode',
                hide: false,
            },
            {
                headerName: 'Cost Amount',
                field: 'costAmountToInvoice',
                colId: 'costAmountToInvoice',
                hide: false,
            },
            {
                headerName: 'Contract Commodity',
                field: 'principalCommodity',
                colId: 'principalCommodity',
                hide: false,
            },
            {
                headerName: 'Quantity',
                field: 'quantity',
                colId: 'quantity',
                hide: false,
            },
            {
                headerName: 'Price',
                field: 'rate',
                colId: 'rate',
                hide: false,
            },
            {
                headerName: '% Invoiced',
                field: 'percentageInvoiced',
                colId: 'percentageInvoiced',
                hide: false,
            },
            {
                headerName: 'Pay/Rec',
                field: 'costDirection',
                colId: 'costDirection',
                hide: false,
            },
            {
                headerName: 'VAT Code',
                field: 'vatCode',
                colId: 'vatCode',
                hide: false,
            },
        ];
    };
    AddCostComponent.prototype.getCostContractsForSummaryFromGrid = function (summaryLines) {
        var contracts = [];
        summaryLines.map(function (record) {
            if (record.costId > 0) {
                var contract = new _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_13__["ContractsToCostInvoice"]();
                contract.costTypeCode = record.costTypeCode;
                contract.principalCommodity = record.principalCommodity;
                contract.rate = record.price;
                contract.quantity = record.quantity.toString();
                contract.weightCode = record.weightCode;
                contract.costAmountToInvoice = record.lineAmount;
                contract.costDirection = record.costDirection;
                contract.vatCode = record.vatCode;
                contract.invoicePercent = record.invoicePercent;
                contracts.push(contract);
            }
        });
        return contracts;
    };
    AddCostComponent.prototype.setAllInvoiceCostLines = function () {
        var _this = this;
        this.selectedCostGridRows = [];
        this.gridApi.forEachNode(function (rowData) {
            if (rowData.data) {
                var costInvoiceline = new _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_13__["ContractsToCostInvoice"]();
                costInvoiceline.costId = rowData.data.costId;
                costInvoiceline.sectionId = rowData.data.sectionId;
                costInvoiceline.costAmountToInvoice = rowData.data.costAmountToInvoice;
                costInvoiceline.quantity = rowData.data.quantity;
                costInvoiceline.costTypeCode = rowData.data.costTypeCode;
                costInvoiceline.currencyCode = rowData.data.currencyCode;
                costInvoiceline.vatCode = rowData.data.vatCode;
                costInvoiceline.invoicePercent = _this.invoicedPercentage;
                costInvoiceline.narrative = rowData.data.narrative;
                costInvoiceline.costDirection = rowData.data.costDirection;
                _this.selectedCostGridRows.push(costInvoiceline);
            }
        });
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], AddCostComponent.prototype, "totalCostAndVatCode", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], AddCostComponent.prototype, "narrativeLength", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Object)
    ], AddCostComponent.prototype, "invoiceSetupData", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], AddCostComponent.prototype, "selectedGoodsVat", void 0);
    AddCostComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-add-cost',
            template: __webpack_require__(/*! ./add-cost.component.html */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost/add-cost.component.html"),
            styles: [__webpack_require__(/*! ./add-cost.component.scss */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost/add-cost.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_15__["ExecutionService"], _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_14__["FormConfigurationProviderService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_17__["UiService"],
            _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_3__["AuthorizationService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_16__["SnackbarService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_12__["AgGridService"]])
    ], AddCostComponent);
    return AddCostComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_6__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/payments-component/payments-component.component.html":
/*!*****************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/components/payments-component/payments-component.component.html ***!
  \*****************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"invoice-creation-card\"\r\n          fxFlex=\"100\">\r\n    <mat-card-title>\r\n        <h2> Payments</h2>\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div>\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"left start\"\r\n                 fxLayoutGap=\"5%\">\r\n                <mat-form-field fxFlex=\"30%\"\r\n                                class=\"mat-read-only-field\">\r\n                    <input matInput\r\n                           placeholder=\"Payment Terms\"\r\n                           [formControl]=\"invoicePayTermsCntrl\"\r\n                           [matTooltip]=\"'Payment Terms'\"\r\n                           autocomplete=\"off\"\r\n                           readonly>\r\n                </mat-form-field>\r\n                <mat-form-field fxFlex=\"30%\"\r\n                                class=\"mandatory\">\r\n                    <input matInput\r\n                           placeholder=\"Due Date\"\r\n                           [formControl]=\"invoiceDueDateCntrl\"\r\n                           [matDatepicker]=\"invoiceDueDatePicker\"\r\n                           [matTooltip]=\"'Due Date'\"\r\n                           autocomplete=\"off\"\r\n                           (dateChange)='onInvoiceDueDateSelected()'>\r\n                    <mat-datepicker-toggle matSuffix\r\n                                           [for]=\"invoiceDueDatePicker\"></mat-datepicker-toggle>\r\n                    <mat-datepicker #invoiceDueDatePicker></mat-datepicker>\r\n                    <mat-hint *ngIf=\"!invoiceDueDateCntrl.hasError('isDateBeforeValid' || 'required') && !invoiceDueDateCntrl.disabled\"\r\n                              class=\"invoice-creation-required-fields\">Required*</mat-hint>\r\n                    <mat-error *ngIf=\"invoiceDueDateCntrl.hasError('required')\">\r\n                        Required*\r\n                    </mat-error>\r\n                    <mat-error *ngIf=\"invoiceDueDateCntrl.hasError('isDateBeforeValid')\">\r\n                        Can't be before invoice date\r\n                    </mat-error>\r\n                </mat-form-field>\r\n            </div>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/payments-component/payments-component.component.scss":
/*!*****************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/components/payments-component/payments-component.component.scss ***!
  \*****************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/payments-component/payments-component.component.ts":
/*!***************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/components/payments-component/payments-component.component.ts ***!
  \***************************************************************************************************************************************************/
/*! exports provided: CommercialPaymentsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CommercialPaymentsComponent", function() { return CommercialPaymentsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/validators/date-validators.validator */ "./Client/app/shared/validators/date-validators.validator.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_enums_credit_against_type_enum__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/enums/credit-against-type.enum */ "./Client/app/shared/enums/credit-against-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};












var moment = moment__WEBPACK_IMPORTED_MODULE_3__;
var CommercialPaymentsComponent = /** @class */ (function (_super) {
    __extends(CommercialPaymentsComponent, _super);
    function CommercialPaymentsComponent(formBuilder, masterdataService, utilService, companyManager, route, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.masterdataService = masterdataService;
        _this.utilService = utilService;
        _this.companyManager = companyManager;
        _this.route = route;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.invoiceDueDateCntrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_7__["AtlasFormControl"]('invoiceCreationPaymentDueDate');
        _this.invoicePayTermsCntrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_7__["AtlasFormControl"]('invoiceCreationPaymentTerms');
        _this.invoiceDateSelected = _this.companyManager.getCurrentCompanyDate().toDate();
        return _this;
    }
    CommercialPaymentsComponent.prototype.ngOnInit = function () {
        this.masterDataPaymentTerms = this.route.snapshot.data.masterdata.paymentTerms;
    };
    CommercialPaymentsComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            invoiceDueDateCntrl: this.invoiceDueDateCntrl,
            invoicePayTermsCntrl: this.invoicePayTermsCntrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    CommercialPaymentsComponent.prototype.contractToBeSelected = function (contracts) {
        this.contracts = contracts;
        if (this.masterDataPaymentTerms && this.contracts) {
            this.setPaymentTerm();
        }
    };
    CommercialPaymentsComponent.prototype.setinvoiceDateSelected = function (invoiceDate) {
        this.invoiceDateChanged = invoiceDate;
        this.invoiceDateSelected = moment(invoiceDate).toDate();
        if (this.contracts) {
            this.setPaymentTerm();
        }
    };
    CommercialPaymentsComponent.prototype.setPaymentTerm = function () {
        var _this = this;
        var paymentDateToSet = this.companyManager.getCurrentCompanyDate().toDate();
        var paymentTermToSet;
        var dateDiff;
        var canUpdatePayTermValue = true;
        if (!this.invoiceDateSelected) {
            this.invoiceDateSelected = paymentDateToSet;
        }
        this.contracts.forEach(function (contract, index) {
            var calculateDate;
            var selectedPaymentTerms = _this.masterDataPaymentTerms.filter(function (payTerms) { return payTerms.paymentTermCode === contract.paymentTermCode; });
            var selectedPaymentTerm = selectedPaymentTerms.length ? selectedPaymentTerms[0] : undefined;
            if (selectedPaymentTerm) {
                if (selectedPaymentTerm.creditAgainst === _shared_enums_credit_against_type_enum__WEBPACK_IMPORTED_MODULE_8__["CreditAgainstTypes"].ArrivalDate) {
                    calculateDate = moment(contract.arrivalDate);
                }
                else if (selectedPaymentTerm.creditAgainst === _shared_enums_credit_against_type_enum__WEBPACK_IMPORTED_MODULE_8__["CreditAgainstTypes"].BLDate) {
                    calculateDate = moment(contract.bLDate);
                }
                else if (selectedPaymentTerm.creditAgainst === _shared_enums_credit_against_type_enum__WEBPACK_IMPORTED_MODULE_8__["CreditAgainstTypes"].CurrentDate) {
                    calculateDate = _this.companyManager.getCurrentCompanyDate();
                }
                else if (selectedPaymentTerm.creditAgainst === _shared_enums_credit_against_type_enum__WEBPACK_IMPORTED_MODULE_8__["CreditAgainstTypes"].InvoiceDate) {
                    calculateDate = moment(_this.invoiceDateSelected);
                }
                calculateDate = moment(calculateDate).add('days', selectedPaymentTerm.creditDays);
                if (dateDiff) {
                    canUpdatePayTermValue = dateDiff > moment(calculateDate).diff(_this.invoiceDateSelected) ? true : false;
                }
                if (canUpdatePayTermValue) {
                    paymentDateToSet = calculateDate.toDate();
                    paymentTermToSet = contract.paymentTermCode;
                    dateDiff = moment(calculateDate).diff(_this.invoiceDateSelected);
                    _this.paymentTermsDescription = selectedPaymentTerm.description;
                }
            }
        });
        if (paymentDateToSet) {
            this.invoiceDueDateCntrl.patchValue(paymentDateToSet);
            this.invoicePayTermsCntrl.patchValue(paymentTermToSet);
        }
    };
    CommercialPaymentsComponent.prototype.onInvoiceDueDateSelected = function () {
        this.invoiceDueDateCntrl.clearValidators();
        this.invoiceDueDateCntrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([Object(_shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_6__["invoiceDateValidation"])(this.invoiceDueDateCntrl.value, moment(this.invoiceDateChanged)), _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]));
        this.invoiceDueDateCntrl.updateValueAndValidity();
    };
    CommercialPaymentsComponent.prototype.populateEntity = function (entity) {
        var payments = entity;
        payments.paymentTerms = this.invoicePayTermsCntrl.value;
        payments.dueDate = this.invoiceDueDateCntrl.value;
        return payments;
    };
    CommercialPaymentsComponent.prototype.setValuesForSummaryFromGrid = function (summaryRecord) {
        this.invoicePayTermsCntrl.patchValue(summaryRecord.paymentTermsCode);
        this.invoiceDueDateCntrl.patchValue(summaryRecord.dueDate);
    };
    CommercialPaymentsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-payments-component',
            template: __webpack_require__(/*! ./payments-component.component.html */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/payments-component/payments-component.component.html"),
            styles: [__webpack_require__(/*! ./payments-component.component.scss */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/payments-component/payments-component.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_10__["MasterdataService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_11__["UtilService"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__["CompanyManagerService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_9__["FormConfigurationProviderService"]])
    ], CommercialPaymentsComponent);
    return CommercialPaymentsComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/selection-form-component/selection-form-component.component.html":
/*!*****************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/components/selection-form-component/selection-form-component.component.html ***!
  \*****************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"invoice-creation-card\"\r\n          fxFlex=\"100\">\r\n    <mat-card-title>\r\n        Invoice Selection\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <mat-form-field fxFlex=\"49%\"\r\n                            class=\"margin-bottom\">\r\n                <input matInput\r\n                       [matDatepicker]=\"invoiceDatePicker\"\r\n                       placeholder=\"Invoice date\"\r\n                       [matTooltip]=\"'Invoice date'\"\r\n                       [formControl]='invoiceDateCtrl'\r\n                       autocomplete=\"off\"\r\n                       (dateChange)='onInvoiceDateSelected()'>\r\n                <mat-hint style=\"color:orange\"\r\n                          *ngIf=\"isDateAfterValid\"> Invoice Date is in Future</mat-hint>\r\n                <mat-datepicker-toggle matSuffix\r\n                                       [for]=\"invoiceDatePicker\"></mat-datepicker-toggle>\r\n                <mat-datepicker #invoiceDatePicker></mat-datepicker>\r\n                <mat-error *ngIf=\"invoiceDateCtrl.hasError('isDateBeforeValid')\">\r\n                    Invoice Date can be equal to or after the contract date\r\n                </mat-error>\r\n            </mat-form-field>\r\n            <mat-form-field class=\"mat-read-only-field\"\r\n                            fxFlex=\"49%\">\r\n                <input matInput\r\n                       placeholder=\"Counterparty\"\r\n                       [matTooltip]=\"'Counterparty'\"\r\n                       [formControl]=\"counterpartyCtrl\"\r\n                       autocomplete=\"off\"\r\n                       readonly>\r\n            </mat-form-field>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <mat-form-field class=\"mat-read-only-field\"\r\n                            fxFlex=\"32%\">\r\n                <input matInput\r\n                       placeholder=\"Invoice type\"\r\n                       [matTooltip]=\"'Invoice Type'\"\r\n                       [formControl]=\"invoiceTypeCtrl\"\r\n                       autocomplete=\"off\"\r\n                       readonly>\r\n            </mat-form-field>\r\n            <mat-form-field class=\"mat-read-only-field\"\r\n                            fxFlex=\"32%\">\r\n                <input matInput\r\n                       placeholder=\"Costs/Commission\"\r\n                       [matTooltip]=\"'Costs/Commission'\"\r\n                       [formControl]=\"costCommissionCtrl\"\r\n                       autocomplete=\"off\"\r\n                       readonly>\r\n            </mat-form-field>\r\n            <mat-form-field class=\"mat-read-only-field\"\r\n                            fxFlex=\"25%\">\r\n                <input matInput\r\n                       placeholder=\"Quantity to Invoice\"\r\n                       [matTooltip]=\"'Quantity to Invoice'\"\r\n                       value=\"Contract\"\r\n                       [formControl]=\"quantityInvoiceCtrl\"\r\n                       autocomplete=\"off\"\r\n                       readonly>\r\n            </mat-form-field>\r\n        </div>\r\n        <mat-divider></mat-divider>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <mat-slide-toggle [checked]=\"true\"\r\n                              [formControl]=\"authorizePostingCtrl\">Authorize for posting</mat-slide-toggle>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/selection-form-component/selection-form-component.component.scss":
/*!*****************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/components/selection-form-component/selection-form-component.component.scss ***!
  \*****************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "mat-slide-toggle {\n  margin-top: 2%; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/selection-form-component/selection-form-component.component.ts":
/*!***************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/components/selection-form-component/selection-form-component.component.ts ***!
  \***************************************************************************************************************************************************************/
/*! exports provided: SelectionFormComponentComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SelectionFormComponentComponent", function() { return SelectionFormComponentComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/validators/date-validators.validator */ "./Client/app/shared/validators/date-validators.validator.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var moment = moment__WEBPACK_IMPORTED_MODULE_3__;
var SelectionFormComponentComponent = /** @class */ (function (_super) {
    __extends(SelectionFormComponentComponent, _super);
    function SelectionFormComponentComponent(route, formBuilder, companyManager, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.companyManager = companyManager;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.invoiceDateSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.invoiceDateCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_7__["AtlasFormControl"]('InvoiceSelectionDate');
        _this.invoiceTypeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_7__["AtlasFormControl"]('InvoiceSelected');
        _this.counterpartyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_7__["AtlasFormControl"]('Counterparty');
        _this.costCommissionCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_7__["AtlasFormControl"]('CostCommission');
        _this.quantityInvoiceCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_7__["AtlasFormControl"]('QuantityInvoice');
        _this.authorizePostingCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_7__["AtlasFormControl"]('AuthorizePosting');
        _this.masterdata = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_8__["MasterData"]();
        _this.invoiceDate = _this.companyManager.getCurrentCompanyDate().toDate();
        return _this;
    }
    SelectionFormComponentComponent.prototype.ngOnInit = function () {
        this.invoiceDateCtrl.setValue(this.companyManager.getCurrentCompanyDate().toDate());
        this.invoiceDateSelected.emit(this.invoiceDateCtrl.value);
        this.invoiceTypeId = Number(decodeURIComponent(this.route.snapshot.paramMap.get('invoiceTypeId')));
        this.company = this.route.snapshot.paramMap.get('company');
        this.masterdata = this.route.snapshot.data.masterdata;
        this.getData();
    };
    SelectionFormComponentComponent.prototype.getData = function () {
        var _this = this;
        this.invoiceTypeDescription = this.masterdata.
            invoiceTypes.find(function (x) { return x.invoiceTypeId === _this.invoiceTypeId; }).description;
        this.invoiceTypeCtrl.patchValue(this.invoiceTypeDescription);
        this.authorizePostingCtrl.setValue(this.isAuthorizeForPosting);
    };
    SelectionFormComponentComponent.prototype.setDefaultAuthorizeForPosting = function (defaultAuthorizeForPosting) {
        this.isAuthorizeForPosting = defaultAuthorizeForPosting;
        this.authorizePostingCtrl.setValue(this.isAuthorizeForPosting);
    };
    SelectionFormComponentComponent.prototype.contractToBeSelected = function (contracts) {
        if (contracts.length > 0) {
            this.counterpartyCtrl.patchValue(contracts[0].counterparty);
        }
        this.setInvoiceDate(contracts);
    };
    SelectionFormComponentComponent.prototype.setInvoiceDate = function (contracts) {
        this.dates = Array.from(contracts, function (x) { return x.contractDate; });
        var moments = this.dates.map(function (d) { return moment(d); }), maxDate = moment.max(moments);
        this.maxDate = maxDate;
    };
    SelectionFormComponentComponent.prototype.onInvoiceDateSelected = function () {
        this.invoiceDate = new Date(this.invoiceDateCtrl.value);
        this.invoiceDateCtrl.clearValidators();
        this.isDateAfterValid = false;
        this.invoiceFutureValidation(this.invoiceDate);
        this.invoiceDateCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([Object(_shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_6__["invoiceDateValidation"])(this.invoiceDate, this.maxDate)]));
        this.invoiceDateCtrl.updateValueAndValidity();
        this.invoiceDateSelected.emit(this.invoiceDate);
    };
    SelectionFormComponentComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            invoiceDateCtrl: this.invoiceDateCtrl,
            authorizePostingCtrl: this.authorizePostingCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    SelectionFormComponentComponent.prototype.invoiceFutureValidation = function (invoiceDate) {
        var invoiceMoment = moment(invoiceDate);
        if (invoiceMoment.isAfter(this.companyManager.getCurrentCompanyDate())) {
            this.isDateAfterValid = true;
        }
    };
    SelectionFormComponentComponent.prototype.populateEntity = function (entity) {
        var invoiceSelection = entity;
        invoiceSelection.invoiceDate = this.invoiceDateCtrl.value;
        invoiceSelection.counterpartyCode = this.counterpartyCtrl.value;
        invoiceSelection.authorizedForPosting = this.authorizePostingCtrl.value;
        return invoiceSelection;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], SelectionFormComponentComponent.prototype, "invoiceDateSelected", void 0);
    SelectionFormComponentComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-selection-form-component',
            template: __webpack_require__(/*! ./selection-form-component.component.html */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/selection-form-component/selection-form-component.component.html"),
            styles: [__webpack_require__(/*! ./selection-form-component.component.scss */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/selection-form-component/selection-form-component.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__["CompanyManagerService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_9__["FormConfigurationProviderService"]])
    ], SelectionFormComponentComponent);
    return SelectionFormComponentComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/taxes-component/taxes-component.component.html":
/*!***********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/components/taxes-component/taxes-component.component.html ***!
  \***********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"invoice-creation-card\">\r\n    <mat-card-title>\r\n        Taxes\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"none center\"\r\n             fxLayoutGap=\"10px\">\r\n            <div fxFlex=\"25\">\r\n                <mat-form-field>\r\n                    <mat-select placeholder=\"Goods VAT Code\"\r\n                                [formControl]=\"invoiceGoodsVatCodeCntrl\"\r\n                                [matTooltip]=\"'VAT Code'\"\r\n                                [panelWidth]=\"panelSize\"\r\n                                (optionSelected)=\"vatCodeSelected($event.option.value)\">\r\n                        <mat-option *ngFor=\"let vatCode of filteredVatCodes\"\r\n                                    [value]=\"vatCode.vatCode\">\r\n                            {{vatCode.vatCode}} | {{vatCode.vatDescription}}\r\n                        </mat-option>\r\n                    </mat-select>\r\n                </mat-form-field>\r\n            </div>\r\n            <div fxFlex=\"25\">\r\n                <atlas-form-input [fieldControl]=\"invoiceVatRateCntrl\"\r\n                                  [isEditable]=\"isInputField\"\r\n                                  [label]=\"'VAT Rate'\">\r\n                </atlas-form-input>\r\n            </div>\r\n            <div fxFlex=\"25\">\r\n                <atlas-form-input [fieldControl]=\"invoiceVatAmountCntrl\"\r\n                                  [isEditable]=\"isInputField\"\r\n                                  [label]=\"'Vat Amount'\">\r\n                </atlas-form-input>\r\n            </div>\r\n            <div fxFlex=\"fill\"\r\n                 class=\"total-box\">\r\n                <mat-card-subtitle class=\"total-figure\">Total Taxes:\r\n                    <span class=\"total-figure-value\">0 {{currencyCode}}</span></mat-card-subtitle>\r\n            </div>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/taxes-component/taxes-component.component.scss":
/*!***********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/components/taxes-component/taxes-component.component.scss ***!
  \***********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/taxes-component/taxes-component.component.ts":
/*!*********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/components/taxes-component/taxes-component.component.ts ***!
  \*********************************************************************************************************************************************/
/*! exports provided: TaxesComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaxesComponent", function() { return TaxesComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/entities/masterdata-props.entity */ "./Client/app/shared/entities/masterdata-props.entity.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var TaxesComponent = /** @class */ (function (_super) {
    __extends(TaxesComponent, _super);
    function TaxesComponent(formBuilder, masterdataService, utilService, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.masterdataService = masterdataService;
        _this.utilService = utilService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.selectedGoodsTaxCode = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.invoiceGoodsVatCodeCntrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_3__["AtlasFormControl"]('invoiceCreationGoodsVatCode');
        _this.invoiceVatRateCntrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_3__["AtlasFormControl"]('invoiceCreationVatRate');
        _this.invoiceVatAmountCntrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_3__["AtlasFormControl"]('invoiceCreationVatAmount');
        _this.masterdataList = [
            _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_4__["MasterDataProps"].Vats,
        ];
        _this.isInputField = false;
        return _this;
    }
    TaxesComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.masterdataService.getMasterData(this.masterdataList).subscribe(function (data) {
            _this.masterdata = data;
            _this.filteredVatCodes = _this.masterdata.vats;
            _this.invoiceGoodsVatCodeCntrl.valueChanges.subscribe(function (input) {
                _this.filteredVatCodes =
                    _this.utilService.filterListforAutocomplete(input, _this.masterdata.vats, ['vatCode', 'vatDescription']);
            });
            _this.bindConfiguration();
        });
        this.onChanges();
    };
    TaxesComponent.prototype.onChanges = function () {
        var _this = this;
        this.invoiceGoodsVatCodeCntrl.valueChanges.subscribe(function (val) {
            _this.selectedGoodsTaxCode.emit(_this.invoiceGoodsVatCodeCntrl.value);
        });
    };
    TaxesComponent.prototype.setDefaultVatCode = function (defaultVatCode) {
        var _this = this;
        this.defaultVatCode = defaultVatCode;
        if (this.defaultVatCode) {
            var vatCode = this.masterdata.vats.filter(function (option) { return option.vatCode === _this.defaultVatCode; });
            if (vatCode.length > 0) {
                this.invoiceGoodsVatCodeCntrl.patchValue(vatCode[0].vatCode);
                this.invoiceVatRateCntrl.patchValue(vatCode[0].rate);
                this.invoiceVatAmountCntrl.patchValue(vatCode[0].rate);
            }
        }
    };
    TaxesComponent.prototype.setDataForTaxGoods = function (summaryRecord, defaultVATCode) {
        var _this = this;
        summaryRecord.summaryLines.map(function (record) {
            (record.sectionId) ? _this.defaultVatCode = record.vatCode : null;
        });
        (!this.defaultVatCode) ? this.defaultVatCode = defaultVATCode : null;
        (summaryRecord.currency) ? this.currencyCode = summaryRecord.currency : null;
        this.setDefaultVatCode(this.defaultVatCode);
    };
    TaxesComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            invoiceGoodsVatCodeCntrl: this.invoiceGoodsVatCodeCntrl,
            invoiceVatRateCntrl: this.invoiceVatRateCntrl,
            invoiceVatAmountCntrl: this.invoiceVatAmountCntrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    TaxesComponent.prototype.vatCodeSelected = function (vatCode) {
        var selectedVatCode = this.masterdata.vats.find(function (x) { return x.vatCode === vatCode; });
        this.invoiceVatRateCntrl.patchValue(selectedVatCode.rate);
        this.invoiceVatAmountCntrl.patchValue(selectedVatCode.vatDescription);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], TaxesComponent.prototype, "selectedGoodsTaxCode", void 0);
    TaxesComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-taxes-component',
            template: __webpack_require__(/*! ./taxes-component.component.html */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/taxes-component/taxes-component.component.html"),
            styles: [__webpack_require__(/*! ./taxes-component.component.scss */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/taxes-component/taxes-component.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_6__["MasterdataService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__["UtilService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_5__["FormConfigurationProviderService"]])
    ], TaxesComponent);
    return TaxesComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/value-of-goods-component/value-of-goods-component.component.html":
/*!*****************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/components/value-of-goods-component/value-of-goods-component.component.html ***!
  \*****************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"space-between start\"\r\n         class=\" table-title\">\r\n        <h2 class=\"no-margin\">Value Of Goods</h2>\r\n        <span class=\"fill-space\"></span>\r\n        <atlas-ag-grid-user-preferences *ngIf=\"valueOfGoodsGridOptions && valueOfGoodsGridOptions.columnDefs\"\r\n                                        [gridOptions]=\"valueOfGoodsGridOptions\"\r\n                                        [company]=\"company\"\r\n                                        [gridId]=\"componentId\"\r\n                                        [sharingEnabled]=\"hasGridSharing\"\r\n                                        #userPreferences>\r\n        </atlas-ag-grid-user-preferences>\r\n    </div>\r\n    <mat-card-content>\r\n\r\n        <div ag-grid=\"valueOfGoodsGridOptions\"\r\n             class=\"ag-theme-material pointer-cursor\">\r\n            <ag-grid-angular class=\"ag-theme-material\"\r\n                             [rowData]=\"valueOfGoodsGridRows\"\r\n                             [columnDefs]=\"valueOfGoodsGridColumns\"\r\n                             domLayout=\"autoHeight\"\r\n                             (gridReady)=\"onGridReady($event)\"\r\n                             [pagination]=\"false\"\r\n                             [paginationPageSize]=\"10\"\r\n                             [enableSorting]=\"true\"\r\n                             [enableColResize]=\"true\"\r\n                             [animateRows]=\"true\"\r\n                             [groupUseEntireRow]=\"false\"\r\n                             [rowGroupPanelShow]=\"rowGroupPanelShow\"\r\n                             [suppressDragLeaveHidesColumns]=\"true\"\r\n                             [suppressMakeColumnVisibleAfterUnGroup]=\"true\"\r\n                             (columnVisible)=\"onColumnVisibilityChanged($event)\"\r\n                             enableFilter\r\n                             [suppressAggFuncInHeader]=\"true\"\r\n                             [rowHeight]=atlasAgGridParam.rowHeight>\r\n            </ag-grid-angular>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"end\">\r\n            <div class=\"total-box\">\r\n                <mat-card-subtitle class=\"total-figure\">Total Invoiced Quantity :\r\n                    <span class=\"total-figure-value\">{{formatQuantityAndTotal(totalQuantity)}}\r\n                        {{weightCode}}</span>\r\n                </mat-card-subtitle>\r\n                <mat-card-subtitle class=\"total-figure\">Sub Total :\r\n                    <span class=\"total-figure-value\">{{debitCreditSign}}{{formatQuantityAndTotal(this.total)}}\r\n                        {{currencyCode}}</span>\r\n                </mat-card-subtitle>\r\n                <mat-card-subtitle class=\"total-figure\">Total :\r\n                    <span class=\"total-figure-value\">{{debitCreditSign}}{{formatQuantityAndTotal(this.total)}}\r\n                        {{currencyCode}}</span>\r\n                </mat-card-subtitle>\r\n            </div>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/value-of-goods-component/value-of-goods-component.component.scss":
/*!*****************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/components/value-of-goods-component/value-of-goods-component.component.scss ***!
  \*****************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".total-box {\n  margin-top: 28px; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/value-of-goods-component/value-of-goods-component.component.ts":
/*!***************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/commercial/components/working-page/components/value-of-goods-component/value-of-goods-component.component.ts ***!
  \***************************************************************************************************************************************************************/
/*! exports provided: CommercialValueOfGoodsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CommercialValueOfGoodsComponent", function() { return CommercialValueOfGoodsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component */ "./Client/app/shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_invoice_line_record_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/entities/invoice-line-record.entity */ "./Client/app/shared/entities/invoice-line-record.entity.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-direction-type.enum */ "./Client/app/shared/enums/cost-direction-type.enum.ts");
/* harmony import */ var _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-sign.enum */ "./Client/app/shared/enums/cost-sign.enum.ts");
/* harmony import */ var _shared_enums_discount_basis_enum__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/enums/discount-basis.enum */ "./Client/app/shared/enums/discount-basis.enum.ts");
/* harmony import */ var _shared_enums_discount_type_enum__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../../../shared/enums/discount-type.enum */ "./Client/app/shared/enums/discount-type.enum.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_enums_pricing_options_enum__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../../../shared/enums/pricing-options.enum */ "./Client/app/shared/enums/pricing-options.enum.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_execution_dtos_contracts_to_invoice__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../../../shared/services/execution/dtos/contracts-to-invoice */ "./Client/app/shared/services/execution/dtos/contracts-to-invoice.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../../../shared/services/grid-configuration-provider.service */ "./Client/app/shared/services/grid-configuration-provider.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


















var CommercialValueOfGoodsComponent = /** @class */ (function (_super) {
    __extends(CommercialValueOfGoodsComponent, _super);
    function CommercialValueOfGoodsComponent(formConfigurationProvider, route, uiService, gridConfigurationProvider, gridService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.route = route;
        _this.uiService = uiService;
        _this.gridConfigurationProvider = gridConfigurationProvider;
        _this.gridService = gridService;
        _this.totalAmountCalculated = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.costCurrency = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.valueOfGoodsGridOptions = {};
        _this.isGroupingEnabled = false;
        _this.totalQuantity = 0;
        _this.total = 0;
        _this.weightCode = '';
        _this.currencyCode = '';
        _this.pricingOptionValue = 0;
        _this.decimalOptionValue = 2;
        _this.weightedAverage = 0;
        _this.debitCredit = '';
        _this.componentId = 'valueOfGoodsGrid';
        _this.hasGridSharing = false;
        _this.formatType = 'en-US';
        _this.defaultConversionFactor = 0;
        _this.masterdata = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_6__["MasterData"]();
        _this.atlasAgGridParam = _this.gridService.getAgGridParam();
        return _this;
    }
    CommercialValueOfGoodsComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.masterdata = this.route.snapshot.data.masterdata;
        this.invoiceType = Number(decodeURIComponent(this.route.snapshot.paramMap.get('invoiceTypeId')));
        this.route.paramMap
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["map"])(function (params) { return params.get('company'); }))
            .subscribe(function (company) {
            _this.company = company;
        });
        this.gridConfigurationProvider.getConfiguration(this.company, this.componentId)
            .subscribe(function (configuration) {
            _this.initializeGridColumns();
            // -- used later if this will become L&S maybe
            // this.columnConfiguration = configuration.columns;
            // this.configurationLoaded.emit();
            // this.initColumns(this.columnConfiguration);
            _this.hasGridSharing = configuration.hasMultipleViewsPerUser;
        });
        var defaultWeightCodeSetup = this.masterdata.weightUnits.find(function (weightUnit) {
            return weightUnit.weightCode === _this.defaultWeightCode;
        });
        if (defaultWeightCodeSetup) {
            this.defaultConversionFactor = defaultWeightCodeSetup.conversionFactor;
        }
    };
    CommercialValueOfGoodsComponent.prototype.onGridReady = function (params) {
        params.columnDefs = this.valueOfGoodsGridColumns;
        this.valueOfGoodsGridOptions = params;
        this.gridColumnApi = params.columnApi;
        this.autoSizeGridHeader();
    };
    CommercialValueOfGoodsComponent.prototype.autoSizeGridHeader = function () {
        var allColumnIds = [];
        if (this.valueOfGoodsGridColumns) {
            this.valueOfGoodsGridColumns.forEach(function (columnDefs) {
                allColumnIds.push(columnDefs.field);
            });
            this.gridColumnApi.autoSizeColumns(allColumnIds);
        }
    };
    CommercialValueOfGoodsComponent.prototype.onGridSizeChanged = function (params) {
        this.autoSizeGridHeader();
    };
    CommercialValueOfGoodsComponent.prototype.initializeGridColumns = function () {
        var _this = this;
        this.valueOfGoodsGridColumns = [
            {
                headerName: 'Contract Commodity',
                field: 'commodity',
                colId: 'commodity',
                hide: false,
                rowGroup: this.isGroupingEnabled,
                enableRowGroup: this.isGroupingEnabled,
            },
            {
                headerName: 'Price',
                field: 'price',
                colId: 'price',
                type: 'numericColumn',
                hide: false,
                valueFormatter: function (params) { return (_this.decimalFormatter((!params.node.group ? params.data.price : params.value), _this.decimalOptionValue, _this.formatType)); },
                rowGroup: this.isGroupingEnabled,
                enableRowGroup: this.isGroupingEnabled,
                aggFunc: 'sum',
                enableValue: true,
            },
            {
                headerName: 'Premium/Discount',
                field: 'premiumDiscountValue',
                colId: 'premiumDiscountValue',
                valueFormatter: this.formatPremiumDiscount,
                hide: false,
            },
            {
                headerName: 'Contract Reference',
                field: 'contractReference',
                colId: 'contractReference',
                hide: false,
            },
            {
                headerName: 'Quantity To Invoice',
                field: 'quantityToInvoice',
                colId: 'quantityToInvoice',
                type: 'numericColumn',
                hide: false,
                aggFunc: 'sum',
                enableValue: true,
                valueFormatter: function (params) { return (_this.decimalFormatter((!params.node.group ? params.data.quantityToInvoice : params.value), _this.decimalOptionValue, _this.formatType)); },
            },
            {
                headerName: 'Quantity Code',
                field: 'quantityCode',
                colId: 'quantityCode',
                hide: true,
            },
            {
                headerName: 'Currency Code',
                field: 'currencyCode',
                colId: 'currencyCode',
                hide: true,
            },
            {
                headerName: 'Invoice Value',
                field: 'totalInvoiceValue',
                colId: 'totalInvoiceValue',
                type: 'numericColumn',
                hide: false,
                valueFormatter: function (params) { return (_this.decimalFormatter((!params.node.group ? params.data.totalInvoiceValue : params.value), _this.decimalOptionValue, _this.formatType)); },
                aggFunc: 'sum',
                enableValue: true,
                valueGetter: this.getInvoiceValue.bind(this),
            },
            {
                headerName: 'Contract Quantity',
                field: 'contractQuantity',
                colId: 'contractQuantity',
                type: 'numericColumn',
                hide: false,
                valueFormatter: function (params) { return (_this.decimalFormatter((!params.node.group ? params.data.contractQuantity : params.value), _this.decimalOptionValue, _this.formatType)); },
            },
        ];
        this.rowGroupPanelShow = this.isGroupingEnabled ? 'always' : '';
    };
    CommercialValueOfGoodsComponent.prototype.formatPremiumDiscount = function (params) {
        if (params.data.premiumDiscountType === _shared_enums_discount_type_enum__WEBPACK_IMPORTED_MODULE_10__["DiscountTypes"].Premium) {
            return '+' + params.data.premiumDiscountValue;
        }
        else if (params.data.premiumDiscountType === _shared_enums_discount_type_enum__WEBPACK_IMPORTED_MODULE_10__["DiscountTypes"].Discount) {
            return '-' + params.data.premiumDiscountValue;
        }
        else {
            return params.data.premiumDiscountValue;
        }
    };
    CommercialValueOfGoodsComponent.prototype.getInvoiceValue = function (params) {
        if (params.data.quantityToInvoice && params.data.price &&
            params.data.priceConversionFactor && params.data.weightConversionFactor) {
            if (params.data.premiumDiscountType === _shared_enums_discount_type_enum__WEBPACK_IMPORTED_MODULE_10__["DiscountTypes"].Premium) {
                params.data.totalInvoiceValue = this.SetInvoiceValueForPremium(params.data);
            }
            else if (params.data.premiumDiscountType === _shared_enums_discount_type_enum__WEBPACK_IMPORTED_MODULE_10__["DiscountTypes"].Discount) {
                params.data.totalInvoiceValue = this.setInvoiceValueForDiscount(params.data);
            }
        }
        this.calculateTotalAndTotalQuantity();
        return params.data.totalInvoiceValue;
    };
    CommercialValueOfGoodsComponent.prototype.setInvoiceValueForDiscount = function (params) {
        if (params) {
            if (params.premiumDiscountBasis === _shared_enums_discount_basis_enum__WEBPACK_IMPORTED_MODULE_9__["DiscountBasis"].Rate) {
                return params.quantityToInvoice *
                    (params.price - params.premiumDiscountValue) *
                    params.priceConversionFactor * params.weightConversionFactor;
            }
            else if (params.premiumDiscountBasis === _shared_enums_discount_basis_enum__WEBPACK_IMPORTED_MODULE_9__["DiscountBasis"].Percent) {
                return params.quantityToInvoice *
                    (params.price * (1 - (params.premiumDiscountValue / 100))) *
                    params.priceConversionFactor * params.weightConversionFactor;
            }
            else {
                return params.quantityToInvoice * params.price *
                    params.priceConversionFactor * params.weightConversionFactor;
            }
        }
    };
    CommercialValueOfGoodsComponent.prototype.SetInvoiceValueForPremium = function (params) {
        if (params) {
            if (params.premiumDiscountBasis === _shared_enums_discount_basis_enum__WEBPACK_IMPORTED_MODULE_9__["DiscountBasis"].Rate) {
                return params.quantityToInvoice *
                    (params.price + params.premiumDiscountValue) *
                    params.priceConversionFactor * params.weightConversionFactor;
            }
            else if (params.premiumDiscountBasis === _shared_enums_discount_basis_enum__WEBPACK_IMPORTED_MODULE_9__["DiscountBasis"].Percent) {
                return params.quantityToInvoice *
                    (params.price * (1 + (params.premiumDiscountValue / 100))) *
                    params.priceConversionFactor * params.weightConversionFactor;
            }
            else {
                return params.quantityToInvoice * params.price *
                    params.priceConversionFactor * params.weightConversionFactor;
            }
        }
    };
    CommercialValueOfGoodsComponent.prototype.decimalFormatter = function (input, decimaloption, format) {
        var formattedInput = new Intl.NumberFormat(format, { minimumFractionDigits: decimaloption }).format(input);
        return formattedInput.toLocaleString();
    };
    CommercialValueOfGoodsComponent.prototype.calculateWeightedAverage = function () {
        var _this = this;
        // calculating the weighted average of each selected contract
        this.contractsForWeightedAverage.forEach(function (contract) {
            _this.weightedAverage += contract.price * contract.quantityToInvoice;
        });
        // Assigning the calculated weighted average to the price of each selected contract
        this.contractsForWeightedAverage.forEach(function (contract) {
            contract.price = _this.weightedAverage / _this.totalQuantity;
        });
        this.initializeGridColumns();
        this.valueOfGoodsGridRows = this.contractsForWeightedAverage;
    };
    CommercialValueOfGoodsComponent.prototype.formatQuantityAndTotal = function (input) {
        var formattedInput = new Intl.NumberFormat(this.formatType, { minimumFractionDigits: this.decimalOptionValue }).format(input);
        return formattedInput.toLocaleString();
    };
    CommercialValueOfGoodsComponent.prototype.contractToBeSelected = function (contracts) {
        if (contracts.length > 0) {
            this.calculateTotalQuantity(contracts);
            this.isGroupingEnabled = (this.pricingOptionValue === _shared_enums_pricing_options_enum__WEBPACK_IMPORTED_MODULE_12__["PricingOptions"].GroupbycommodityPrice);
            if (this.pricingOptionValue === _shared_enums_pricing_options_enum__WEBPACK_IMPORTED_MODULE_12__["PricingOptions"].OutrightAverage) {
                // creating copy of selected contracts, so the calculations are not impacting the original price
                this.contractsForWeightedAverage = contracts.map(function (x) { return (__assign({}, x)); });
                this.calculateWeightedAverage();
            }
            else {
                this.valueOfGoodsGridRows = contracts;
                this.initializeGridColumns();
            }
        }
    };
    CommercialValueOfGoodsComponent.prototype.calculateTotalAndTotalQuantity = function () {
        var _this = this;
        this.totalQuantity = 0;
        this.total = 0;
        this.valueOfGoodsGridOptions.api.forEachNode(function (rowNode) {
            if (rowNode.data.totalInvoiceValue) {
                _this.total += rowNode.data.totalInvoiceValue;
                if (_this.defaultConversionFactor && _this.defaultConversionFactor != 0) {
                    _this.totalQuantity += (rowNode.data.quantityToInvoice *
                        rowNode.data.weightConversionFactor) / _this.defaultConversionFactor;
                }
                else {
                    _this.totalQuantity += rowNode.data.quantityToInvoice;
                }
            }
        });
        if (this.valueOfGoodsGridRows.length > 0) {
            this.weightCode = this.defaultWeightCode ? this.defaultWeightCode : this.valueOfGoodsGridRows[0].quantityCode;
            this.currencyCode = this.valueOfGoodsGridRows[0].currencyCode;
            this.costCurrency.emit(this.currencyCode);
        }
        this.debitCredit = (this.invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_11__["InvoiceTypes"].Purchase) ? 'Cr' : 'Dr';
        this.debitCreditSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_8__["CostSigns"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_7__["CostDirectionType"][this.debitCredit]];
        this.totalAmountCalculated.emit({
            amount: this.total,
            decimalOption: this.decimalOptionValue,
            currencyCode: this.currencyCode,
            debitCredit: this.debitCredit,
        });
    };
    CommercialValueOfGoodsComponent.prototype.calculateTotalQuantity = function (contracts) {
        var _this = this;
        this.totalQuantity = 0;
        contracts.forEach(function (contract) {
            _this.totalQuantity = _this.totalQuantity + contract.quantityToInvoice;
        });
    };
    CommercialValueOfGoodsComponent.prototype.pricingAndDecimalOptionSelected = function (pricingOption, decimalOption) {
        this.pricingOptionValue = pricingOption;
        this.decimalOptionValue = decimalOption;
    };
    CommercialValueOfGoodsComponent.prototype.populateEntity = function (entity) {
        var valueOfGoods = entity;
        valueOfGoods.currency = this.currencyCode;
        valueOfGoods.totalGoodsValue = this.totalQuantity;
        valueOfGoods.totalInvoiceValue = this.total;
        valueOfGoods.invoiceLines = this.getInvoiceLines();
        return valueOfGoods;
    };
    CommercialValueOfGoodsComponent.prototype.onColumnVisibilityChanged = function (col) {
        this.userPreferencesComponent.onChangeColumnVisibility(col);
        this.autoSizeGridHeader();
    };
    CommercialValueOfGoodsComponent.prototype.getInvoiceLines = function () {
        var invoiceLines = [];
        this.valueOfGoodsGridRows.map(function (data, index) {
            var invoiceLine = new _shared_entities_invoice_line_record_entity__WEBPACK_IMPORTED_MODULE_5__["InvoiceLineRecord"]();
            invoiceLine.lineNumber = index + 1;
            invoiceLine.sectionID = data.sectionId;
            invoiceLine.price = data.price;
            invoiceLine.quantity = data.quantityToInvoice.toString();
            invoiceLine.priceUnitId = data.priceUnitId;
            invoiceLine.weightUnitId = data.quantityUnitId;
            invoiceLine.currencyCode = data.currencyCode;
            invoiceLine.lineAmount = data.totalInvoiceValue;
            invoiceLine.invoicePercent = (data.quantityToInvoice / data.contractQuantity) * 100;
            invoiceLines.push(invoiceLine);
        });
        return invoiceLines;
    };
    /* summary redirection code */
    CommercialValueOfGoodsComponent.prototype.contractToBeSelectedFromGrid = function (summaryRecord) {
        if (summaryRecord.summaryLines) {
            this.isGroupingEnabled = false;
            this.invoiceType = summaryRecord.invoiceType;
            this.currencyCode = summaryRecord.currency;
            this.valueOfGoodsGridRows = this.getContractsForSummary(summaryRecord.summaryLines, this.currencyCode);
            this.initializeGridColumnsFromSummary();
            this.calculateTotalForSummary(summaryRecord.summaryLines);
        }
    };
    CommercialValueOfGoodsComponent.prototype.contractToBeSelectedForSummary = function (contracts, summaryRecord) {
        this.valueOfGoodsGridRows = this.getContractsForSummary(summaryRecord, this.currencyCode);
        this.initializeGridColumnsFromSummary();
        this.calculateTotalForSummary(summaryRecord);
    };
    CommercialValueOfGoodsComponent.prototype.calculateTotalForSummary = function (summaryLines) {
        var _this = this;
        this.total = 0;
        this.totalQuantity = 0;
        summaryLines.forEach(function (line) {
            _this.total = line.lineAmount + _this.total;
            _this.totalQuantity = _this.totalQuantity + line.quantity;
            _this.weightCode = line.weightCode;
        });
        this.debitCredit = (this.invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_11__["InvoiceTypes"].Purchase) ? 'Cr' : 'Dr';
        this.debitCreditSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_8__["CostSigns"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_7__["CostDirectionType"][this.debitCredit]];
    };
    CommercialValueOfGoodsComponent.prototype.initializeGridColumnsFromSummary = function () {
        this.valueOfGoodsGridColumns = [
            {
                headerName: 'Contract Commodity',
                field: 'commodity',
                colId: 'commodity',
                hide: false,
                rowGroup: this.isGroupingEnabled,
                enableRowGroup: this.isGroupingEnabled,
            },
            {
                headerName: 'Price',
                field: 'price',
                colId: 'price',
                hide: false,
                valueFormatter: this.decimalFormatterForSummary.bind(this),
                aggFunc: 'sum',
                enableValue: true,
            },
            {
                headerName: 'Contract Reference',
                field: 'contractReference',
                colId: 'contractReference',
                hide: false,
            },
            {
                headerName: 'Invoiced Quantity',
                field: 'invoicedQuantity',
                colId: 'invoicedQuantity',
                type: 'numericColumn',
                hide: false,
                aggFunc: 'sum',
                enableValue: true,
                valueFormatter: this.decimalFormatterForSummary.bind(this),
            },
            {
                headerName: 'Quantity Code',
                field: 'quantityCode',
                colId: 'quantityCode',
                hide: false,
            },
            {
                headerName: 'Currency Code',
                field: 'currencyCode',
                colId: 'currencyCode',
                hide: false,
            },
            {
                headerName: 'Invoice Value',
                field: 'totalInvoiceValue',
                colId: 'totalInvoiceValue',
                hide: false,
                valueFormatter: this.decimalFormatterForSummary.bind(this),
            },
            {
                headerName: 'Contract Quantity',
                field: 'contractQuantity',
                colId: 'contractQuantity',
                type: 'numericColumn',
                hide: false,
            },
        ];
    };
    CommercialValueOfGoodsComponent.prototype.decimalFormatterForSummary = function (params) {
        var formattedInput = new Intl.NumberFormat(this.formatType, { minimumFractionDigits: this.decimalOptionValue }).format(params.value);
        return formattedInput.toLocaleString();
    };
    CommercialValueOfGoodsComponent.prototype.getContractsForSummary = function (summaryLines, currencyCode) {
        var contracts = [];
        summaryLines.map(function (record) {
            if (record.sectionId) {
                var contract = new _shared_services_execution_dtos_contracts_to_invoice__WEBPACK_IMPORTED_MODULE_14__["ContractsToInvoice"]();
                contract.commodity = record.principalCommodity;
                contract.price = record.price;
                contract.contractReference = record.contractReference;
                contract.invoicedQuantity = record.quantity;
                contract.quantityCode = record.weightCode;
                contract.currencyCode = currencyCode;
                contract.totalInvoiceValue = record.lineAmount;
                contract.contractQuantity = record.contractQuantity;
                contract.quantityToInvoice = record.quantity;
                contracts.push(contract);
            }
        });
        return contracts;
    };
    CommercialValueOfGoodsComponent.prototype.getInvoiceValueForSummary = function (params) {
        return params.data.invoicedQuantity;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('userPreferences'),
        __metadata("design:type", _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_3__["AgGridUserPreferencesComponent"])
    ], CommercialValueOfGoodsComponent.prototype, "userPreferencesComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CommercialValueOfGoodsComponent.prototype, "totalAmountCalculated", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CommercialValueOfGoodsComponent.prototype, "costCurrency", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], CommercialValueOfGoodsComponent.prototype, "defaultWeightCode", void 0);
    CommercialValueOfGoodsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-value-of-goods-component',
            template: __webpack_require__(/*! ./value-of-goods-component.component.html */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/value-of-goods-component/value-of-goods-component.component.html"),
            styles: [__webpack_require__(/*! ./value-of-goods-component.component.scss */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/value-of-goods-component/value-of-goods-component.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_15__["FormConfigurationProviderService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_17__["UiService"],
            _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_16__["GridConfigurationProviderService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_13__["AgGridService"]])
    ], CommercialValueOfGoodsComponent);
    return CommercialValueOfGoodsComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/components/document-template/document-template.component.html":
/*!****************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/components/document-template/document-template.component.html ***!
  \****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"invoice-creation-card\"\r\n          fxFlex=\"100\">\r\n    <mat-card-title>\r\n        <h2>Invoice Document</h2>\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <mat-form-field fxFlex=\"30%\">\r\n                <mat-select [panelWidth]=\"panelSize\"\r\n                            (optionSelected)=\"onExternalInHouseSelected()\"\r\n                            placeholder=\"External/InHouse\"\r\n                            [formControl]=\"invoiceExtInHouseCtrl\"\r\n                            [matTooltip]=\"'External/InHouse'\">\r\n\r\n                    <mat-option *ngFor=\"let info of invoiceSourceType\"\r\n                                [value]=\"info.viewValue\">\r\n                        {{info.viewValue}}\r\n                    </mat-option>\r\n                </mat-select>\r\n\r\n            </mat-form-field>\r\n            <mat-form-field fxFlex=\"60%\">\r\n                <input matInput\r\n                       placeholder=\"External Invoice Reference\"\r\n                       [formControl]=\"invoiceExtRefCtrl\"\r\n                       autocomplete=\"off\">\r\n                <mat-error *ngIf=\"invoiceExtRefCtrl.hasError('required')\">\r\n                    Reference is required\r\n                </mat-error>\r\n                <mat-error *ngIf=\"invoiceExtRefCtrl.hasError('maxlength')\">\r\n                    Must be less than 25 characters\r\n                </mat-error>\r\n                <mat-hint align=\"end\">{{invoiceExtRefCtrl.value.length}} / 25</mat-hint>\r\n                <mat-hint style=\"color:orange\"\r\n                          *ngIf=\"!isUnique\">\r\n                    Reference Number already used\r\n                </mat-hint>\r\n            </mat-form-field>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <mat-form-field fxFlex=\"30%\">\r\n                <mat-select [panelWidth]=\"panelSize\"\r\n                            placeholder=\"Template\"\r\n                            [formControl]=\"invoiceTemplatesCtrl\"\r\n                            (selectionChange)=\"onInvoiceTemplateSelected()\"\r\n                            matTooltip=\"Template\"\r\n                            [required]=\"invoiceTemplatesCtrl.isRequired\">\r\n                    <mat-option></mat-option>\r\n                    <mat-option *ngFor=\"let template of filteredTemplates\"\r\n                                [value]=\"template\">\r\n                        {{template.name}}\r\n                    </mat-option>\r\n                </mat-select>\r\n                <mat-error *ngIf=\"invoiceTemplatesCtrl.hasError('required')\">\r\n                    Template is required\r\n                </mat-error>\r\n            </mat-form-field>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/components/document-template/document-template.component.scss":
/*!****************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/components/document-template/document-template.component.scss ***!
  \****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/components/document-template/document-template.component.ts":
/*!**************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/components/document-template/document-template.component.ts ***!
  \**************************************************************************************************************/
/*! exports provided: DocumentTemplateComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DocumentTemplateComponent", function() { return DocumentTemplateComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../shared/enums/document-type.enum */ "./Client/app/shared/enums/document-type.enum.ts");
/* harmony import */ var _shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../shared/enums/invoice-source-type.enum */ "./Client/app/shared/enums/invoice-source-type.enum.ts");
/* harmony import */ var _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../shared/services/http-services/document.service */ "./Client/app/shared/services/http-services/document.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _invoicing_base_form_document_template_base_document_template_base_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../invoicing-base-form/document-template-base/document-template-base.component */ "./Client/app/execution/execution-invoicing/invoicing-base-form/document-template-base/document-template-base.component.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var DocumentTemplateComponent = /** @class */ (function (_super) {
    __extends(DocumentTemplateComponent, _super);
    function DocumentTemplateComponent(formBuilder, route, documentService, utilService, executionService, formConfigurationProvider) {
        var _this = _super.call(this, executionService, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.route = route;
        _this.documentService = documentService;
        _this.utilService = utilService;
        _this.executionService = executionService;
        _this.formConfigurationProvider = formConfigurationProvider;
        return _this;
    }
    DocumentTemplateComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.subscriptions.push(this.documentService.getTemplates(this.documentType).subscribe(function (templates) {
            _this.filteredTemplates = templates.value;
            _this.invoiceTemplatesCtrl.valueChanges.subscribe(function (input) {
                _this.filteredTemplates =
                    _this.utilService.filterListforAutocomplete(input, templates.value, ['documentTemplateId', 'name']);
            });
            _this.setValidators();
            _this.onExternalInHouseSelected();
            _this.bindConfiguration();
            if ((_this.filteredTemplates.length === 1) &&
                (_this.invoiceExtInHouseCtrl.value === (_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_4__["InvoiceSourceType"][_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_4__["InvoiceSourceType"].Inhouse]))) {
                _this.invoiceTemplatesCtrl.patchValue(_this.filteredTemplates[0]);
                _this.onInvoiceTemplateSelected();
            }
        }));
        this.onChanges();
        this.invoiceSourceType = this.getInvoiceSourceTypeEnum();
        this.getData();
    };
    DocumentTemplateComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            invoiceTemplatesCtrl: this.invoiceTemplatesCtrl,
            invoiceExtRefCtrl: this.invoiceExtRefCtrl,
            invoiceExtInHouseCtrl: this.invoiceExtInHouseCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    DocumentTemplateComponent.prototype.populateEntity = function (entity) {
        var invoiceDocumentTemplate = entity;
        invoiceDocumentTemplate.template = this.invoiceTemplatesCtrl.value ?
            this.invoiceTemplatesCtrl.value.path : null;
        invoiceDocumentTemplate.externalInhouse = this.invoiceExtInHouseCtrl.value;
        invoiceDocumentTemplate.externalInvoiceRef = this.invoiceExtRefCtrl.value;
        return invoiceDocumentTemplate;
    };
    DocumentTemplateComponent.prototype.getData = function () {
        var invoiceTypeId = Number(decodeURIComponent(this.route.snapshot.paramMap.get('invoiceTypeId')));
        this.updateInhouseExternalStatus(invoiceTypeId);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Number)
    ], DocumentTemplateComponent.prototype, "documentType", void 0);
    DocumentTemplateComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-document-template',
            template: __webpack_require__(/*! ./document-template.component.html */ "./Client/app/execution/execution-invoicing/components/document-template/document-template.component.html"),
            styles: [__webpack_require__(/*! ./document-template.component.scss */ "./Client/app/execution/execution-invoicing/components/document-template/document-template.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_5__["DocumentService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_6__["UtilService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_9__["ExecutionService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationProviderService"]])
    ], DocumentTemplateComponent);
    return DocumentTemplateComponent;
}(_invoicing_base_form_document_template_base_document_template_base_component__WEBPACK_IMPORTED_MODULE_7__["DocumentTemplateBaseComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/contract-search/contract-search.component.html":
/*!*******************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/contract-search/contract-search.component.html ***!
  \*******************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div fxLayout=\"column\"\r\n     fxLayoutAlign=\"start none\">\r\n    <mat-card>\r\n        <form [formGroup]=\"searchForm\">\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"start none\"\r\n                 class=\"search\">\r\n                <mat-form-field>\r\n                    <input matInput\r\n                           formControlName=\"searchContractCtrl\"\r\n                           (keydown.enter)=\"onSearchCostContracts()\"\r\n                           placeholder=\"Contract Search\" />\r\n                    <mat-error *ngIf=\"searchForm.get('searchContractCtrl').hasError('required')\">\r\n                        Contract reference is required\r\n                    </mat-error>\r\n                </mat-form-field>\r\n                <atlas-masterdata-user-preferences-input isEditable=\"true\"\r\n                                                         [fieldControl]=\"charterReferenceCtrl\"\r\n                                                         [options]=\"filteredCharters\"\r\n                                                         label=\"Charter Reference\"\r\n                                                         displayProperty=\"charterCode\"\r\n                                                         [selectProperties]=\"['charterCode','description']\"\r\n                                                         [errorMap]=\"charterErrorMap\"\r\n                                                         lightBoxTitle=\"Results for charters\"\r\n                                                         gridId=\"charterGrid\"\r\n                                                         [dataLoader]=\"charterDataLoader\">\r\n                </atlas-masterdata-user-preferences-input>\r\n                <atlas-masterdata-user-preferences-input isEditable=\"true\"\r\n                                                         [fieldControl]=\"costTypeCtrl\"\r\n                                                         [options]=\"filteredcostTypes\"\r\n                                                         label=\"Cost Type\"\r\n                                                         (keydown.enter)=\"onSearchCostContracts()\"\r\n                                                         displayProperty=\"costTypeCode\"\r\n                                                         [selectProperties]=\"['costTypeCode', 'name']\"\r\n                                                         [errorMap]=\"costTypeErrorMap\"\r\n                                                         lightBoxTitle=\"Results for Cost Type\"\r\n                                                         gridId=\"costTypesGrid\"\r\n                                                         [dataLoader]=\"costTypeDataLoader\">\r\n                </atlas-masterdata-user-preferences-input>\r\n                <atlas-masterdata-user-preferences-input isEditable=\"true\"\r\n                                                         [fieldControl]=\"supplierCodeCtrl\"\r\n                                                         [options]=\"filteredSupplier\"\r\n                                                         label=\"Supplier\"\r\n                                                         displayProperty=\"counterpartyCode\"\r\n                                                         (keydown.enter)=\"onSearchCostContracts()\"\r\n                                                         [selectProperties]=\"['counterpartyCode', 'description']\"\r\n                                                         [errorMap]=\"counterpartyErrorMap\"\r\n                                                         lightBoxTitle=\"Results for Counterparty\"\r\n                                                         gridId=\"counterpartiesGrid\"\r\n                                                         [dataLoader]=\"counterpartyDataLoader\">\r\n                </atlas-masterdata-user-preferences-input>\r\n                <button mat-raised-button\r\n                        (click)=\"onSearchCostContracts()\"\r\n                        class=\"heroGradient\"\r\n                        id=\"search-button\">\r\n                    <mat-icon aria-label=\"Search\"\r\n                              class=\"search-icon\">search</mat-icon>\r\n                </button>\r\n            </div>\r\n        </form>\r\n    </mat-card>\r\n</div>\r\n\r\n\r\n<atlas-filter-set-display (filtersChanged)=onFilterSetDetailsChange($event)\r\n                          [columnConfiguration]=\"columnConfiguration\"\r\n                          [gridCode]=\"gridCode\"\r\n                          [company]=\"company\"\r\n                          #filterSetDisplayComponent>\r\n</atlas-filter-set-display>\r\n<mat-card>\r\n\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"space-between start\"\r\n         class=\"atlas-grid-card-header\">\r\n        <h2 class=\"no-margin\">{{gridTitle}}</h2>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"end start\">\r\n            <button mat-raised-button\r\n                    class=\"apportion-button\"\r\n                    (click)=\"onApportionButtonClicked()\"\r\n                    [disabled]=\"isApportionDisable\">APPORTION</button>\r\n            <div>\r\n                <atlas-ag-grid-user-preferences *ngIf=\"costContractGridOptions && costContractGridOptions.columnDefs\"\r\n                                                [gridOptions]=\"costContractGridOptions\"\r\n                                                [company]=\"company\"\r\n                                                [gridId]=\"gridCode\"\r\n                                                [sharingEnabled]=\"hasGridSharing\"\r\n                                                #userPreferences>\r\n                </atlas-ag-grid-user-preferences>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div ag-grid=\"costContractGridOptions\"\r\n         class=\"ag-theme-material pointer-cursor\"\r\n         style=\"height: 100%\">\r\n        <ag-grid-angular style=\"width: 100%; height:100%;\"\r\n                         class=\"ag-theme-material\"\r\n                         [rowData]=\"contractsToInvoice\"\r\n                         [columnDefs]=\"columnDefs\"\r\n                         domLayout=\"autoHeight\"\r\n                         rowSelection=\"multiple\"\r\n                         rowMultiSelectWithClick=true\r\n                         singleClickEdit=true\r\n                         suppressRowClickSelection=true\r\n                         [pagination]=\"true\"\r\n                         [paginationPageSize]=\"10\"\r\n                         [enableSorting]=\"true\"\r\n                         [enableColResize]=\"true\"\r\n                         enableFilter\r\n                         [rowHeight]=atlasAgGridParam.rowHeight\r\n                         (gridReady)=\"onGridReady($event)\"\r\n                         (firstDataRendered)=\"onFirstDataRendered($event)\"\r\n                         (rowSelected)=\"onSelectionChanged($event)\"\r\n                         (columnVisible)=\"onColumnVisibilityChanged($event)\">\r\n        </ag-grid-angular>\r\n    </div>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"end center\">\r\n        <mat-card-subtitle class=\"total-figure\">\r\n            Total Quantity : <span class=\"total-figure-value\">\r\n                {{formatQuantityAndTotal(this.totalQuantity)}}\r\n            </span>\r\n        </mat-card-subtitle>\r\n    </div>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"end\">\r\n        <mat-card-subtitle class=\"total-figure\">\r\n            Total Cost :\r\n            <span class=\"total-figure-value\">\r\n                {{formatQuantityAndTotal(this.totalCostAmount)}}\r\n                {{this.currencyCodeSelected}}\r\n            </span>\r\n        </mat-card-subtitle>\r\n    </div>\r\n</mat-card>\r\n<atlas-lock-interval [resourcesInformation]=\"resourcesInformation\">\r\n</atlas-lock-interval>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/contract-search/contract-search.component.scss":
/*!*******************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/contract-search/contract-search.component.scss ***!
  \*******************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".container-height {\n  height: 100%; }\n\n.atr-ag-grid {\n  width: 100%;\n  height: 100%; }\n\n.ag-theme-material .ag-header-select-all {\n  width: 100% !important;\n  text-align: center !important; }\n\n.atr-grid-left-margin {\n  left: 20px; }\n\n.margin-content {\n  margin-bottom: 2%; }\n\n.apportion-button.mat-raised-button {\n  margin-top: 0 !important; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/contract-search/contract-search.component.ts":
/*!*****************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/contract-search/contract-search.component.ts ***!
  \*****************************************************************************************************************************************/
/*! exports provided: ContractSearchComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContractSearchComponent", function() { return ContractSearchComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component */ "./Client/app/shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _shared_dtos_list_and_search_list_and_search_filter_dto_dto__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/dtos/list-and-search/list-and-search-filter-dto.dto */ "./Client/app/shared/dtos/list-and-search/list-and-search-filter-dto.dto.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../../../shared/entities/lock-functional-context.entity */ "./Client/app/shared/entities/lock-functional-context.entity.ts");
/* harmony import */ var _shared_entities_lock_resource_information_entity__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../../../shared/entities/lock-resource-information.entity */ "./Client/app/shared/entities/lock-resource-information.entity.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../../../shared/enums/rate-type.enum */ "./Client/app/shared/enums/rate-type.enum.ts");
/* harmony import */ var _shared_enums_tolerance_type_enum__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../../../shared/enums/tolerance-type.enum */ "./Client/app/shared/enums/tolerance-type.enum.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_execution_charter_data_loader__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../../../shared/services/execution/charter-data-loader */ "./Client/app/shared/services/execution/charter-data-loader.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../../../../shared/services/grid-configuration-provider.service */ "./Client/app/shared/services/grid-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/lock.service */ "./Client/app/shared/services/http-services/lock.service.ts");
/* harmony import */ var _shared_services_masterdata_costType_data_loader__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../../../../../shared/services/masterdata/costType-data-loader */ "./Client/app/shared/services/masterdata/costType-data-loader.ts");
/* harmony import */ var _shared_services_masterdata_counterparty_data_loader__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../../../../../shared/services/masterdata/counterparty-data-loader */ "./Client/app/shared/services/masterdata/counterparty-data-loader.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _services_execution_actions_service__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../../../../../services/execution-actions.service */ "./Client/app/execution/services/execution-actions.service.ts");
/* harmony import */ var _dialog_boxes_apportion_dialog_apportion_dialog_component__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../../../../dialog-boxes/apportion-dialog/apportion-dialog.component */ "./Client/app/execution/execution-invoicing/dialog-boxes/apportion-dialog/apportion-dialog.component.ts");
/* harmony import */ var _shared_components_filter_set_display_filter_set_display_component__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./../../../../../../../shared/components/filter-set-display/filter-set-display.component */ "./Client/app/shared/components/filter-set-display/filter-set-display.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __values = (undefined && undefined.__values) || function (o) {
    var m = typeof Symbol === "function" && o[Symbol.iterator], i = 0;
    if (m) return m.call(o);
    return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
};






























var ContractSearchComponent = /** @class */ (function (_super) {
    __extends(ContractSearchComponent, _super);
    function ContractSearchComponent(formBuilder, executionService, route, snackbarService, formConfigurationProvider, uiService, dialog, lockService, costTypeDataLoader, counterpartyDataLoader, utilService, gridConfigurationProvider, charterDataLoader, gridService, executionActionsService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.executionService = executionService;
        _this.route = route;
        _this.snackbarService = snackbarService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.uiService = uiService;
        _this.dialog = dialog;
        _this.lockService = lockService;
        _this.costTypeDataLoader = costTypeDataLoader;
        _this.counterpartyDataLoader = counterpartyDataLoader;
        _this.utilService = utilService;
        _this.gridConfigurationProvider = gridConfigurationProvider;
        _this.charterDataLoader = charterDataLoader;
        _this.gridService = gridService;
        _this.executionActionsService = executionActionsService;
        _this.supplier = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.costContractsSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.dataLength = 0;
        _this.totalQuantity = 0;
        _this.componentId = 'costInvoiceContract';
        _this.isContractSelected = false;
        _this.isApportionDisable = true;
        _this.isApportion = true;
        _this.totalInvocieValue = 0;
        _this.isCostAmountChanged = true;
        _this.rowSelected = false;
        _this.resourcesInformation = new Array();
        _this.locking = [];
        _this.unlocking = [];
        _this.decimalOptionValue = 2;
        _this.formatType = 'en-US';
        _this.gridTitle = 'Cost Contracts to Invoice';
        _this.gridCode = 'invoiceCostSelectionGrid';
        _this.columnConfiguration = [];
        _this.hasGridSharing = false;
        _this.costContractGridOptions = {};
        _this.costTypeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_10__["AtlasFormControl"]('CostType');
        _this.masterdata = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_13__["MasterData"]();
        _this.supplierCodeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_10__["AtlasFormControl"]('Supplier');
        _this.charterReferenceCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_10__["AtlasFormControl"]('CharterRef');
        _this.destroy$ = new rxjs__WEBPACK_IMPORTED_MODULE_4__["Subject"]();
        _this.costIds = [];
        _this.totalCostAmount = 0;
        _this.additionnalColumns = [
            {
                headerName: 'Cost Amount',
                field: 'costAmount',
                colId: 'costAmount',
                valueGetter: _this.calculateCostAmount.bind(_this),
                valueFormatter: _this.formatValue.bind(_this),
                type: 'numericColumn',
                hide: false,
            },
            {
                headerName: 'Cost Amount to Invoice',
                field: 'costAmountToInvoice',
                colId: 'costAmountToInvoice',
                type: 'numericColumn',
                editable: _this.isGridEditable.bind(_this),
                valueSetter: _this.setCostAmountToInvoice.bind(_this),
                valueFormatter: _this.formatValue.bind(_this),
                hide: false,
            },
            {
                headerName: '%Invoiced',
                field: 'invoicePercent',
                colId: 'invoicePercent',
                valueSetter: _this.setInvoicePercent.bind(_this),
                valueFormatter: _this.formatValue.bind(_this),
                type: 'numericColumn',
                hide: false,
                editable: _this.onRowSelectionChanged.bind(_this),
            },
            {
                headerName: 'Contract Quantity',
                field: 'quantity',
                colId: 'quantity',
                hide: false,
                editable: true,
                type: 'numericColumn',
                valueSetter: _this.setContractQuantity.bind(_this),
                onCellValueChanged: _this.onQuantityChanged.bind(_this),
            },
        ];
        _this.costTypeErrorMap = new Map()
            .set('inDropdownList', 'Invalid entry. Cost Type not in the list.');
        _this.counterpartyErrorMap = new Map()
            .set('inDropdownList', 'Invalid entry. Supplier not in the list.');
        _this.charterErrorMap = new Map();
        _this.count = 0;
        _this.atlasAgGridParam = _this.gridService.getAgGridParam();
        _this.searchForm = _this.formBuilder.group({
            searchContractCtrl: [''],
        });
        return _this;
    }
    ContractSearchComponent.prototype.populateCharterList = function () {
        var _this = this;
        this.charterDataLoader.getData().subscribe(function (charter) {
            _this.charters = charter;
            _this.filteredCharters = _this.charters;
        });
    };
    ContractSearchComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.masterdata = this.route.snapshot.data['masterdata'];
        this.invoiceType = Number(decodeURIComponent(this.route.snapshot.paramMap.get('invoiceTypeId')));
        this.company = this.route.snapshot.paramMap.get('company');
        this.route.queryParams.subscribe(function (params) {
            _this.selectedCostIds = params['costIds'];
        });
        this.filteredcostTypes = this.masterdata.costTypes;
        this.filteredSupplier = this.masterdata.counterparties;
        this.counterPartyList = this.filteredSupplier;
        this.costList = this.filteredcostTypes;
        this.costTypeCtrl.valueChanges.subscribe(function (input) {
            _this.filterCostTypes(input);
        });
        this.supplierCodeCtrl.valueChanges.subscribe(function (input) {
            _this.filterSupplier(input);
        });
        this.populateCharterList();
        this.charterReferenceCtrl.valueChanges.subscribe(function (input) {
            _this.filterCharterReference(input);
        });
        this.loadGridConfiguration();
        this.route.queryParams.subscribe(function (params) {
            _this.saveContractRef = params['savedContractRefCost'];
            _this.saveCounterparty = params['savedCounterPartyCost'];
            _this.saveCharterReference = params['savedCharterRefCost'];
            _this.saveCost = params['savedCost'];
        });
        if (this.executionActionsService.EditCriteriaRetainFilter && this.executionActionsService.EditCriteriaRetainFilter.length > 0) {
            this.savedFilters = this.executionActionsService.EditCriteriaRetainFilter;
        }
        if (this.saveContractRef || this.saveCounterparty || this.saveCharterReference || this.saveCost) {
            if (this.saveContractRef) {
                this.searchForm.controls['searchContractCtrl'].setValue(this.saveContractRef);
            }
            if (this.saveCounterparty) {
                this.counterPartyControl = this.counterPartyList.find(function (counterParty) {
                    return counterParty.counterpartyCode === _this.saveCounterparty;
                });
                this.supplierCodeCtrl.patchValue(this.counterPartyControl);
            }
            if (this.saveCharterReference) {
                this.charterRefControl = this.charters.find(function (charter) {
                    return charter.charterCode === _this.saveCharterReference;
                });
                this.charterReferenceCtrl.patchValue(this.charterRefControl);
            }
            if (this.saveCost) {
                this.costControl = this.costList.find(function (cost) {
                    return cost.costTypeCode === _this.saveCost;
                });
                this.costTypeCtrl.patchValue(this.costControl);
            }
        }
    };
    ContractSearchComponent.prototype.onRowSelectionChanged = function (event) {
        if (event.data.invoicePercent > 0 && event.data.invoicePercent <= 100) {
            this.rowSelected = true;
            return this.rowSelected;
        }
        else {
            this.rowSelected = false;
            return this.rowSelected;
        }
    };
    ContractSearchComponent.prototype.setContractQuantity = function (params) {
        var validQuantity = true;
        if (params && params.data) {
            if (params.newValue > params.data.quantityToInvoice) {
                validQuantity = false;
                params.data.quantity = Number(params.oldValue);
            }
            else {
                params.data.quantity = Number(params.newValue);
            }
            if (!validQuantity) {
                this.snackbarService.informationSnackBar('Quantity cannot be greater than contract quantity');
            }
            return true;
        }
    };
    ContractSearchComponent.prototype.onQuantityChanged = function (params) {
        if (params && params.data) {
            var invoicePercercentage = (100 * params.newValue) / params.oldValue;
            params.data.invoicePercent = (params.data.invoicePercent * invoicePercercentage) / 100;
            params.data.costAmount = (params.data.costAmount * invoicePercercentage) / 100;
            params.data.costAmountToInvoice = (params.data.costAmountToInvoice * invoicePercercentage) / 100;
            if (this.gridApi) {
                this.gridApi.refreshCells(params.data);
            }
        }
    };
    ContractSearchComponent.prototype.filterCostTypes = function (input) {
        this.filteredcostTypes = this.utilService.filterListforAutocomplete(input, this.masterdata.costTypes, ['costTypeCode', 'name']);
        if (this.costTypeCtrl.valid || !this.costTypeCtrl.value.costTypeCode) {
            this.onSearchCostContracts();
        }
    };
    ContractSearchComponent.prototype.filterSupplier = function (input) {
        this.filteredSupplier = this.utilService.filterListforAutocomplete(input, this.masterdata.counterparties, ['counterpartyCode', 'description']);
        if (this.supplierCodeCtrl.valid || !this.supplierCodeCtrl.value) {
            this.onSearchCostContracts();
        }
    };
    ContractSearchComponent.prototype.filterCharterReference = function (input) {
        this.filteredCharters = this.utilService.filterListforAutocomplete(input, this.charters, ['charterCode', 'description']);
        if (this.charterReferenceCtrl.valid || !this.charterReferenceCtrl.value) {
            this.onSearchCostContracts();
        }
    };
    ContractSearchComponent.prototype.loadGridConfiguration = function () {
        var _this = this;
        this.gridConfigurationProvider.getConfiguration(this.company, this.gridCode)
            .subscribe(function (configuration) {
            _this.columnConfiguration = configuration.columns;
            _this.initColumns(_this.columnConfiguration);
            _this.hasGridSharing = configuration.hasMultipleViewsPerUser;
        });
    };
    ContractSearchComponent.prototype.isGridEditable = function (params) {
        // cannot edit the column, if row is not selected
        return params.node.selected;
    };
    ContractSearchComponent.prototype.onFirstDataRendered = function (params) {
        if (this.gridColumnApi) {
            this.gridColumnApi.autoSizeAllColumns();
        }
    };
    ContractSearchComponent.prototype.initColumns = function (configuration) {
        var _this = this;
        this.columnDefs = [];
        // selection column
        this.columnDefs.push({
            headerName: '',
            colId: 'selection',
            headerCheckboxSelection: true,
            checkboxSelection: true,
            minWidth: 40,
            maxWidth: 40,
            pinned: 'left',
        });
        // grid config
        var numericColumns = [];
        configuration.forEach(function (column) {
            if (column.gridType === 'numeric') {
                numericColumns.push(column.fieldName.toLowerCase());
            }
        });
        this.columnDefs = this.columnDefs.concat(configuration.map(function (config) {
            var columnDef = {
                colId: _this.utilService.convertToCamelCase(config.fieldName),
                headerName: config.friendlyName,
                field: _this.utilService.convertToCamelCase(config.fieldName),
                width: 100,
                hide: !config.isVisible,
            };
            var formatter = _this.uiService.getFormatterForType(config.gridType);
            if (formatter) {
                columnDef.valueFormatter = formatter;
            }
            var dateGetter = _this.uiService.getterForDateType(config.gridType);
            if (dateGetter) {
                columnDef.cellClass = 'dateFormat';
                columnDef.valueGetter = dateGetter;
            }
            var numericColumn = numericColumns.find(function (column) { return column === columnDef.field.toLowerCase(); });
            if (numericColumn) {
                columnDef.type = 'numericColumn';
                columnDef.valueFormatter = _this.numberFormatter;
            }
            return columnDef;
        }));
        // calculated columns
        this.columnDefs = this.columnDefs.concat(this.additionnalColumns);
        if (this.gridApi) {
            if (this.gridApi) {
                this.gridApi.sizeColumnsToFit();
            }
        }
        if (this.costContractGridOptions) {
            this.costContractGridOptions.columnDefs = this.columnDefs;
        }
    };
    ContractSearchComponent.prototype.onFilterSetDetailsChange = function (filters) {
        this.executionActionsService.EditCriteriaRetainFilter = filters;
        this.filters = filters;
        if (this.count === 1) {
            this.filters = this.savedFilters;
            this.savedFilters = null;
            this.count = 0;
        }
        if (this.savedFilters && this.count === 0) {
            if (this.filterSetDisplayComponent) {
                this.count = 1;
                var localFilters = this.savedFilters.map(function (filter) {
                    return new _shared_dtos_list_and_search_list_and_search_filter_dto_dto__WEBPACK_IMPORTED_MODULE_9__["ListAndSearchFilterDto"](filter);
                });
                this.filterSetDisplayComponent.loadFilters(localFilters);
            }
        }
        else {
            this.loadData();
        }
    };
    ContractSearchComponent.prototype.loadData = function (emitResult) {
        var _this = this;
        if (emitResult === void 0) { emitResult = false; }
        if (!this.filters) {
            return;
        }
        var filters = this.filters.map(function (filter) {
            return new _shared_dtos_list_and_search_list_and_search_filter_dto_dto__WEBPACK_IMPORTED_MODULE_9__["ListAndSearchFilterDto"](filter);
        });
        this.isLoading = true;
        var request = {
            clauses: { clauses: filters },
        };
        this.executionService.searchContractsForCostInvoice(request).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["takeUntil"])(this.destroy$)).subscribe(function (data) {
            _this.isLoading = false;
            if (_this.selectedCostIds) {
                if (_this.selectedCostIds.toString().includes(',')) {
                    _this.costIds = _this.selectedCostIds.toString().split(',');
                    if (_this.costIds && _this.costIds.length > 0) {
                        var costContracts_1 = [];
                        _this.costIds.forEach(function (costId) {
                            data.value.forEach(function (contract) {
                                if (Number(costId) === contract.costId && contract) {
                                    costContracts_1.push(contract);
                                }
                            });
                        });
                        _this.contractsToInvoice = costContracts_1;
                    }
                }
                else {
                    _this.contractsToInvoice = data.value.filter(function (contract) {
                        return contract.costId === Number(_this.selectedCostIds);
                    });
                }
            }
            else {
                _this.contractsToInvoice = data.value;
            }
            _this.allContracts = _this.contractsToInvoice;
            _this.gridApi.hideOverlay();
            _this.gridColumnApi.autoSizeAllColumns();
            if (_this.filters.length === 0) {
                if (_this.saveContractRef || _this.saveCounterparty || _this.saveCharterReference || _this.saveCost) {
                    _this.onSearchCostContracts();
                }
            }
        });
    };
    ContractSearchComponent.prototype.onGridReady = function (params) {
        params.columnDefs = this.columnDefs;
        this.costContractGridOptions = params;
        this.gridApi = params.api;
        this.gridColumnApi = params.columnApi;
        this.gridApi.showNoRowsOverlay();
        this.gridColumnApi.autoSizeAllColumns();
    };
    ContractSearchComponent.prototype.autoSizeContractsGrid = function () {
        if (this.gridColumnApi) {
            this.gridColumnApi.autoSizeAllColumns();
        }
    };
    ContractSearchComponent.prototype.onGridSizeChanged = function (params) {
        this.autoSizeContractsGrid();
    };
    ContractSearchComponent.prototype.setCostAmountToInvoice = function (params) {
        params.data.costAmountToInvoice = Number(params.newValue);
        if (params.newValue <= 0 || !params.data.costAmountToInvoice) {
            this.snackbarService.informationSnackBar('0 or negative cost cannot be invoiced');
            params.data.costAmountToInvoice = params.data.costAmount;
        }
        else {
            var tolerance = this.tolerancePercentage * 100;
            if (this.tolerancePercentage !== _shared_enums_tolerance_type_enum__WEBPACK_IMPORTED_MODULE_15__["ToleranceTypes"].Percentage) {
                var minToleranceBand = params.data.costAmount -
                    (params.data.costAmount * this.tolerancePercentage);
                var maxToleranceBand = params.data.costAmount +
                    (params.data.costAmount * this.tolerancePercentage);
                if (params.newValue < minToleranceBand || params.newValue > maxToleranceBand) {
                    this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_8__["ConfirmationDialogComponent"], {
                        data: {
                            title: 'Tolerance Information',
                            text: 'Cost Amount to Invoice is greater/less than ' + tolerance + '% – than the cost originally estimated',
                            okButton: 'Ok',
                        },
                    });
                }
            }
        }
        this.calculateTotalCost();
        return true;
    };
    ContractSearchComponent.prototype.calculateTotalCost = function () {
        var _this = this;
        this.totalCostAmount = 0;
        this.totalQuantity = 0;
        var selectedRows = this.gridApi.getSelectedRows();
        if (selectedRows && selectedRows.length > 0) {
            this.currencyCodeSelected = selectedRows[0].currencyCode;
            selectedRows.forEach(function (selectedContract) {
                _this.totalCostAmount += selectedContract.costAmountToInvoice;
            });
        }
    };
    ContractSearchComponent.prototype.calculateCostAmount = function (params) {
        if (this.isCostAmountChanged) {
            if (params.data.rateTypeCode === _shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_14__["RateTypes"][_shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_14__["RateTypes"].Amount]) {
                params.data.costAmount = params.data.rate;
            }
            else if (params.data.rateTypeCode === _shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_14__["RateTypes"][_shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_14__["RateTypes"].Percent]) {
                params.data.costAmount = (Number(params.data.quantity) * params.data.price *
                    (params.data.rate / 100) * params.data.priceConversionFactor * params.data.weightConversionFactor);
            }
            else if (params.data.rateTypeCode === _shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_14__["RateTypes"][_shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_14__["RateTypes"].Rate]) {
                params.data.costAmount =
                    Number(params.data.quantity) * params.data.rateConversionFactor * (params.data.weightConversionFactor) * params.data.rate;
            }
        }
        return params.data.costAmount;
    };
    ContractSearchComponent.prototype.formatValue = function (param) {
        if (isNaN(param.value) || param.value === null) {
            return '';
        }
        return new Intl.NumberFormat(this.formatType, { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(param.value);
    };
    ContractSearchComponent.prototype.onSearchCostContracts = function () {
        var _this = this;
        this.searchTerm = this.searchForm.get('searchContractCtrl').value;
        this.searchCostTerm = this.costTypeCtrl.value.costTypeCode;
        this.searchSupplierTerm = this.supplierCodeCtrl.value.counterpartyCode;
        this.searchCharterTerm = this.charterReferenceCtrl.value.charterCode;
        var rows = [];
        var contractRows = 0;
        var charterRows = 0;
        var costRows = 0;
        if ((!this.searchTerm || this.searchTerm === '') && (!this.searchCostTerm || this.searchCostTerm === '')
            && (!this.searchCharterTerm || this.searchCharterTerm === '')
            && (!this.searchSupplierTerm || this.searchSupplierTerm === '')) {
            return;
        }
        else {
            this.isLoading = true;
            this.filters = [];
            // added check to avoid runtime error with Array.Find
            if (this.allContracts.length > 0) {
                // sanity check to confirm corresponding fields in array is not null
                this.contractsToInvoice = this.allContracts;
                if (this.searchTerm) {
                    this.contractsToInvoice = this.allContracts.filter(function (item) { return item.contractReference != null; });
                    rows = this.contractsToInvoice.filter(function (item) {
                        return item.contractReference.toString().toUpperCase().includes(_this.searchTerm.toUpperCase());
                    });
                    contractRows = -1;
                }
                if (this.searchCharterTerm) {
                    if (rows.length === 0 && contractRows === 0) {
                        this.contractsToInvoice = this.allContracts.filter(function (item) { return item.charterReference != null; });
                        rows = this.contractsToInvoice.filter(function (item) {
                            return item.charterReference.toString().toUpperCase().includes(_this.searchCharterTerm.toUpperCase());
                        });
                    }
                    else if (contractRows === -1) {
                        rows = rows.filter(function (item) { return item.charterReference != null; });
                        rows = rows.filter(function (item) { return item.charterReference.toString().toUpperCase().
                            includes(_this.searchCharterTerm.toUpperCase()); });
                    }
                    charterRows = -1;
                }
                if (this.searchCostTerm) {
                    if (rows.length === 0 && charterRows === 0 && contractRows === 0) {
                        this.contractsToInvoice = this.allContracts.filter(function (item) { return item.costTypeCode != null; });
                        rows = this.contractsToInvoice.filter(function (item) {
                            return item.costTypeCode.toString().toUpperCase().includes(_this.searchCostTerm.toUpperCase());
                        });
                    }
                    else {
                        rows = rows.filter(function (item) { return item.costTypeCode != null; });
                        rows = rows.filter(function (item) { return item.costTypeCode.toString().toUpperCase().
                            includes(_this.searchCostTerm.toUpperCase()); });
                    }
                    costRows = -1;
                }
                if (this.searchSupplierTerm) {
                    if (rows.length === 0 && charterRows === 0 && contractRows === 0 && costRows === 0) {
                        this.contractsToInvoice = this.allContracts.filter(function (item) { return item.supplierCode != null; });
                        rows = this.contractsToInvoice.filter(function (item) {
                            return item.supplierCode.toString().toUpperCase().includes(_this.searchSupplierTerm.toUpperCase());
                        });
                    }
                    else {
                        rows = rows.filter(function (item) { return item.supplierCode != null; });
                        rows = rows.filter(function (item) { return item.supplierCode.toString().toUpperCase().
                            includes(_this.searchSupplierTerm.toUpperCase()); });
                    }
                }
            }
            this.contractsToInvoice = rows;
            this.dataLength = this.contractsToInvoice.length;
            this.autoSizeContractsGrid();
            this.isLoading = false;
            (this.contractsToInvoice) ? this.gridApi.hideOverlay() : this.gridApi.showNoRowsOverlay();
        }
    };
    ContractSearchComponent.prototype.onSelectionChanged = function (event) {
        var _this = this;
        var e_1, _a, e_2, _b, e_3, _c;
        var invoicedPercentage = 100;
        var selectedNodes = this.gridApi.getSelectedNodes();
        var selectedNodesToApprotionEnabled = this.gridApi.getSelectedRows();
        var currentRowIndex = event.rowIndex;
        this.totalQuantity = 0;
        // calculate total quantity for the selected nodes
        if (selectedNodes) {
            var selectedSectionIds = selectedNodes.map(function (item) { return item.data.sectionId; }).
                filter(function (value, index, self) { return self.indexOf(value) === index; });
            if (selectedSectionIds && selectedSectionIds.length > 0) {
                var _loop_1 = function (val) {
                    this_1.totalQuantity += selectedNodes.filter(function (item) { return item.data.sectionId === val; })[0].data.quantity;
                };
                var this_1 = this;
                try {
                    for (var selectedSectionIds_1 = __values(selectedSectionIds), selectedSectionIds_1_1 = selectedSectionIds_1.next(); !selectedSectionIds_1_1.done; selectedSectionIds_1_1 = selectedSectionIds_1.next()) {
                        var val = selectedSectionIds_1_1.value;
                        _loop_1(val);
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (selectedSectionIds_1_1 && !selectedSectionIds_1_1.done && (_a = selectedSectionIds_1.return)) _a.call(selectedSectionIds_1);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
            }
        }
        this.isApportionDisable = true;
        this.isApportion = true;
        if (selectedNodes.length === 0) {
            this.selectSupplier(null, false);
        }
        else if (selectedNodes.length === 1) {
            if (selectedNodes[0].data.supplierCode && !this.supplierSelected) {
                this.supplierSelected = selectedNodes[0].data.supplierCode;
            }
            this.selectSupplier(this.supplierSelected);
        }
        else if (selectedNodes.length > 1) {
            var valid = true;
            var currencySelected = void 0;
            var costDirection = void 0;
            var costTypeCode = void 0;
            var firstSelectedNode_1 = selectedNodes.map(function (node) { return node.data; })[0];
            var filteredSelectedSectionIds = selectedNodesToApprotionEnabled.filter(function (contract) {
                return contract.sectionId !== firstSelectedNode_1.sectionId && contract.weightCode !== firstSelectedNode_1.weightCode;
            });
            if (filteredSelectedSectionIds && filteredSelectedSectionIds.length > 0) {
                this.isApportionDisable = false;
            }
            else {
                this.isApportionDisable = true;
            }
            try {
                for (var selectedNodes_1 = __values(selectedNodes), selectedNodes_1_1 = selectedNodes_1.next(); !selectedNodes_1_1.done; selectedNodes_1_1 = selectedNodes_1.next()) {
                    var node = selectedNodes_1_1.value;
                    if (!currencySelected) {
                        currencySelected = node.data.currencyCode;
                    }
                    if (currencySelected !== node.data.currencyCode) {
                        valid = false;
                        break;
                    }
                    if (!costDirection && node.data) {
                        costDirection = node.data.costDirection;
                    }
                    if (!costTypeCode && node.data) {
                        costTypeCode = node.data.costTypeCode;
                    }
                    if (node.data && ((costDirection !== node.data.costDirection)
                        || (costTypeCode !== node.data.costTypeCode))) {
                        this.isApportion = false;
                    }
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (selectedNodes_1_1 && !selectedNodes_1_1.done && (_b = selectedNodes_1.return)) _b.call(selectedNodes_1);
                }
                finally { if (e_2) throw e_2.error; }
            }
            if (!valid) {
                this.snackbarService.informationSnackBar('Different currency types cannot be invoiced together');
                this.deselectNode(currentRowIndex);
            }
            if (valid && !this.supplierSelected) {
                try {
                    for (var selectedNodes_2 = __values(selectedNodes), selectedNodes_2_1 = selectedNodes_2.next(); !selectedNodes_2_1.done; selectedNodes_2_1 = selectedNodes_2.next()) {
                        var node = selectedNodes_2_1.value;
                        if (!this.supplierSelected) {
                            this.supplierSelected = node.data.supplierCode;
                            this.selectSupplier(this.supplierSelected);
                        }
                    }
                }
                catch (e_3_1) { e_3 = { error: e_3_1 }; }
                finally {
                    try {
                        if (selectedNodes_2_1 && !selectedNodes_2_1.done && (_c = selectedNodes_2.return)) _c.call(selectedNodes_2);
                    }
                    finally { if (e_3) throw e_3.error; }
                }
            }
        }
        if (event.node.isSelected()) {
            if (event.node) {
                if (!event.node.data.costAmount) {
                    event.node.data.costAmountToInvoice = this.calculateCostAmountOnSelection(event.node.data)
                        - (event.node.data.invoicedAmount);
                    this.gridApi.refreshCells(event.data);
                }
                else {
                    var unInvoicedAmount = event.node.data.costAmount - event.node.data.invoicedAmount;
                    event.node.data.costAmountToInvoice = (unInvoicedAmount > 0) ? unInvoicedAmount : 0;
                    this.gridApi.refreshCells(event.data);
                }
                if (!event.node.data.invoicedPercentage) {
                    event.node.data.invoicePercent = invoicedPercentage;
                }
                else if (event.node.data.invoicedPercentage > 0 && event.node.data.invoicedPercentage < 100) {
                    event.node.data.invoicePercent = invoicedPercentage - event.node.data.invoicedPercentage;
                }
            }
            var currentSupplierNode = event.node.data.supplierCode;
            if ((this.supplierSelected !== currentSupplierNode) && currentSupplierNode) {
                var confirmDialog = this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_8__["ConfirmationDialogComponent"], {
                    data: {
                        title: 'Confirmation of Supplier',
                        text: 'You have selected an estimate line which is different to Previous Supplier. ' +
                            'Do you wish to update this estimate with the same supplier ? ',
                        okButton: 'Proceed',
                        cancelButton: 'Cancel',
                    },
                });
                confirmDialog.afterClosed().subscribe(function (answer) {
                    if (!answer) {
                        _this.deselectNode(currentRowIndex);
                    }
                });
            }
            this.gridApi.refreshCells();
        }
        else {
            event.data.costAmountToInvoice = null;
            event.data.invoicePercent = event.data.invoicedPercentage;
            event.data.quantity = event.data.quantityToInvoice;
            this.gridApi.refreshCells(event.data);
        }
        this.calculateTotalCost();
        this.isContractSelected = selectedNodes.length > 0;
        this.costContractsSelected.emit(this.isContractSelected);
        this.grantLock(Number(event.data.sectionId), event.node);
        this.selectedCostContracts = selectedNodes.map(function (node) { return node.data; });
    };
    ContractSearchComponent.prototype.calculateCostAmountOnSelection = function (contract) {
        if (contract.rateTypeCode === _shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_14__["RateTypes"][_shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_14__["RateTypes"].Amount]) {
            contract.costAmount = contract.rate;
        }
        else if (contract.rateTypeCode === _shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_14__["RateTypes"][_shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_14__["RateTypes"].Percent]) {
            contract.costAmount = (Number(contract.quantity) * contract.price *
                (contract.rate / 100) * contract.weightConversionFactor * contract.priceConversionFactor);
        }
        else if (contract.rateTypeCode === _shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_14__["RateTypes"][_shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_14__["RateTypes"].Rate]) {
            contract.costAmount =
                Number(contract.quantity) * contract.rateConversionFactor * (contract.weightConversionFactor) * contract.rate;
        }
        return contract.costAmount;
    };
    ContractSearchComponent.prototype.grantLock = function (sectionId, node) {
        var _this = this;
        if (node.isSelected()) {
            if (!this.locking.includes(sectionId)) {
                this.locking.push(sectionId);
                this.subscriptions.push(this.lockService.isLockedContract(sectionId).subscribe(function (lock) {
                    if (lock.isLocked) {
                        _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_8__["ConfirmationDialogComponent"], {
                            data: {
                                title: 'Lock',
                                text: lock.message,
                                okButton: 'Got it',
                            },
                        });
                        _this.costContractGridOptions.api.deselectNode(node);
                        _this.locking = _this.locking.filter(function (id) { return id !== sectionId; });
                    }
                    else {
                        _this.subscriptions.push(_this.lockService.lockContract(sectionId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_11__["LockFunctionalContext"].CostInvoicing)
                            .subscribe(function () {
                            _this.refeshResourceInformation();
                            _this.locking = _this.locking.filter(function (id) { return id !== sectionId; });
                        }));
                    }
                }));
            }
        }
        else {
            if (!this.unlocking.includes(sectionId)) {
                this.unlocking.push(sectionId);
                this.refeshResourceInformation();
                if (this.resourcesInformation.filter(function (rsc) { return rsc.resourceId === sectionId; }).length === 0) {
                    this.subscriptions.push(this.lockService.unlockContract(sectionId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_11__["LockFunctionalContext"].CostInvoicing)
                        .subscribe(function () {
                        node.setRowSelectable(true);
                        _this.unlocking = _this.unlocking.filter(function (id) { return id !== sectionId; });
                    }));
                }
                else {
                    node.setRowSelectable(true);
                    this.unlocking = this.unlocking.filter(function (id) { return id !== sectionId; });
                }
            }
        }
    };
    ContractSearchComponent.prototype.refeshResourceInformation = function () {
        var _this = this;
        this.resourcesInformation = new Array();
        this.costContractGridOptions.api.forEachNode(function (node) {
            if (node.isSelected()) {
                var resourceInformation = new _shared_entities_lock_resource_information_entity__WEBPACK_IMPORTED_MODULE_12__["LockResourceInformation"]();
                resourceInformation.resourceType = 'Contract';
                resourceInformation.resourceId = node.data.sectionId;
                resourceInformation.resourceCode = node.data.contractReference;
                _this.resourcesInformation.push(resourceInformation);
            }
        });
    };
    ContractSearchComponent.prototype.onColumnVisibilityChanged = function (col) {
        this.userPreferencesComponent.onChangeColumnVisibility(col);
        this.autoSizeContractsGrid();
    };
    ContractSearchComponent.prototype.deselectNode = function (currentRowIndex) {
        var _this = this;
        this.costContractGridOptions.api.forEachNode(function (node) {
            if (Number(node.id) === currentRowIndex) {
                _this.costContractGridOptions.api.deselectNode(node);
                node.data.costAmountToInvoice = null;
                node.data.invoicePercent = null;
            }
        });
    };
    ContractSearchComponent.prototype.selectSupplier = function (supplierSelected, isLineSelected) {
        if (isLineSelected === void 0) { isLineSelected = true; }
        this.supplier.emit({
            supplierSelected: supplierSelected,
            isLineSelected: isLineSelected,
        });
        this.supplierSelected = supplierSelected;
    };
    ContractSearchComponent.prototype.setTolerancePercentage = function (tolerancePercentage) {
        this.tolerancePercentage = tolerancePercentage;
    };
    // Commenting this until the counterparty/supplier filter is completely developed
    // onRowDataChanged(params) {
    //     if (this.counterParty) {
    //         const counterPartyFilterComponent = this.gridApi.getFilterInstance('supplierCode');
    //         counterPartyFilterComponent.setModel({
    //             type: 'set',
    //             values: [this.counterParty],
    //         });
    //         this.gridApi.onFilterChanged();
    //     }
    // }
    ContractSearchComponent.prototype.numberFormatter = function (params) {
        if (params && params.value && !isNaN(params.value)) {
            if (params.colDef.colId.toLowerCase() === 'quantity' || params.colDef.colId.toLowerCase() === 'rate') {
                if (params.colDef.colId.toLowerCase() === 'rate') {
                    return new Intl.NumberFormat('en-US', { minimumFractionDigits: 4, maximumFractionDigits: 4 }).format(params.value);
                }
                else {
                    return new Intl.NumberFormat('en-US', { minimumFractionDigits: 3, maximumFractionDigits: 3 }).format(params.value);
                }
            }
        }
    };
    ContractSearchComponent.prototype.onApportionButtonClicked = function () {
        var _this = this;
        if (this.isApportion) {
            this.getTotalQuantityAndTotalInvoiceValue();
            var openApportiontDialog = this.dialog.open(_dialog_boxes_apportion_dialog_apportion_dialog_component__WEBPACK_IMPORTED_MODULE_28__["ApportionDialogComponent"], {
                width: '40%',
                height: '60%',
                data: {
                    selectedRows: this.selectedCostContracts,
                    totalQuantity: this.totalQuantity,
                    totalInvoiceValue: this.totalInvocieValue,
                },
            });
            openApportiontDialog.afterClosed().subscribe(function (updatedCostContracts) {
                _this.updateSelectedCostRows(updatedCostContracts);
                _this.isCostAmountChanged = false;
            });
        }
        else {
            this.snackbarService.informationSnackBar('Apportion Cannot be done for multiple costs types or if there is a mix of Pay/Rec');
        }
    };
    ContractSearchComponent.prototype.setInvoicePercent = function (params) {
        if (params.newValue <= 0 || !params.data.invoicePercent) {
            this.snackbarService.informationSnackBar('Invoice Percentage cannot be 0 or negative');
            params.data.invoicePercent = params.oldValue < 1 ? 1 : params.oldValue;
        }
        else if (params.newValue > 100) {
            this.snackbarService.informationSnackBar('Invoice Percentage cannot be greater than 100');
            params.data.invoicePercent = params.oldValue < 100 ? params.oldValue : 100;
        }
        else if ((params.newValue > params.oldValue)) {
            this.snackbarService.informationSnackBar('Invoice Percentage cannot be greater available percentage');
            params.data.invoicePercent = params.oldValue;
        }
        else {
            params.data.invoicePercent = params.newValue;
        }
        return true;
    };
    ContractSearchComponent.prototype.getTotalQuantityAndTotalInvoiceValue = function () {
        var _this = this;
        this.totalQuantity = 0;
        this.totalInvocieValue = 0;
        if (this.selectedCostContracts) {
            this.selectedCostContracts.forEach(function (costContract) {
                _this.totalQuantity += Number(costContract.quantity);
                _this.totalInvocieValue += costContract.costAmountToInvoice;
            });
        }
    };
    ContractSearchComponent.prototype.updateSelectedCostRows = function (updatedCostContracts) {
        if (updatedCostContracts) {
            this.gridApi.updateRowData({ update: updatedCostContracts });
        }
    };
    ContractSearchComponent.prototype.ngOnDestroy = function () {
        var _this = this;
        this.destroy$.next();
        this.destroy$.complete();
        this.subscriptions.push(this.lockService.cleanSessionLocks().subscribe(function () {
            _this.subscriptions.forEach(function (subscription) {
                subscription.unsubscribe();
            });
        }));
    };
    ContractSearchComponent.prototype.formatQuantityAndTotal = function (input) {
        var formattedInput = new Intl.NumberFormat(this.formatType, { minimumFractionDigits: this.decimalOptionValue }).format(input);
        return formattedInput.toLocaleString();
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('userPreferences'),
        __metadata("design:type", _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_6__["AgGridUserPreferencesComponent"])
    ], ContractSearchComponent.prototype, "userPreferencesComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('filterSetDisplayComponent'),
        __metadata("design:type", _shared_components_filter_set_display_filter_set_display_component__WEBPACK_IMPORTED_MODULE_29__["FilterSetDisplayComponent"])
    ], ContractSearchComponent.prototype, "filterSetDisplayComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], ContractSearchComponent.prototype, "supplier", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], ContractSearchComponent.prototype, "costContractsSelected", void 0);
    ContractSearchComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-contract-search',
            template: __webpack_require__(/*! ./contract-search.component.html */ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/contract-search/contract-search.component.html"),
            styles: [__webpack_require__(/*! ./contract-search.component.scss */ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/contract-search/contract-search.component.scss")],
            providers: [_shared_services_masterdata_costType_data_loader__WEBPACK_IMPORTED_MODULE_22__["CostTypeDataLoader"], _shared_services_masterdata_counterparty_data_loader__WEBPACK_IMPORTED_MODULE_23__["CounterPartyDataLoader"], _shared_services_execution_charter_data_loader__WEBPACK_IMPORTED_MODULE_17__["CharterDataLoader"]],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"], _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_20__["ExecutionService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"], _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_24__["SnackbarService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_18__["FormConfigurationProviderService"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_25__["UiService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"],
            _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_21__["LockService"],
            _shared_services_masterdata_costType_data_loader__WEBPACK_IMPORTED_MODULE_22__["CostTypeDataLoader"],
            _shared_services_masterdata_counterparty_data_loader__WEBPACK_IMPORTED_MODULE_23__["CounterPartyDataLoader"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_26__["UtilService"],
            _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_19__["GridConfigurationProviderService"],
            _shared_services_execution_charter_data_loader__WEBPACK_IMPORTED_MODULE_17__["CharterDataLoader"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_16__["AgGridService"],
            _services_execution_actions_service__WEBPACK_IMPORTED_MODULE_27__["ExecutionActionsService"]])
    ], ContractSearchComponent);
    return ContractSearchComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_7__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/cost-invoicee-options/cost-invoicee-options.component.html":
/*!*******************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/cost-invoicee-options/cost-invoicee-options.component.html ***!
  \*******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-header>\r\n        <mat-card-title fxFlex=\"5%\">\r\n            Invoicee\r\n        </mat-card-title>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <div class=\"custom-form\"\r\n                 fxFlex=\"30%\">\r\n                <mat-form-field fxFlex=\"70%\">\r\n                    <input matInput\r\n                           placeholder=\"Invoicee\"\r\n                           [required]=\"invoiceeCtrl.isRequired\"\r\n                           [matAutocomplete]=\"invoicee\"\r\n                           [formControl]=\"invoiceeCtrl\"\r\n                           [matTooltip]=\"'Invoicee'\"\r\n                           autocomplete=\"off\">\r\n                    <mat-autocomplete #invoicee=\"matAutocomplete\"\r\n                                      [panelWidth]=\"panelSize\"\r\n                                      (optionSelected)=\"onSelectionChange($event.option.value)\">\r\n                        <mat-option *ngFor=\"let counterparty of filteredCounterPartyList\"\r\n                                    [value]=\"counterparty.counterpartyCode\">\r\n                            {{counterparty.counterpartyCode}} | {{counterparty.description}}</mat-option>\r\n                    </mat-autocomplete>\r\n                    <mat-error *ngIf=\"invoiceeCtrl.hasError('required')\">\r\n                        Invoicee is required\r\n                    </mat-error>\r\n                    <mat-error *ngIf=\"invoiceeCtrl.hasError('inDropdownList')\">\r\n                        Value not in list\r\n                    </mat-error>\r\n                </mat-form-field>\r\n            </div>\r\n            <mat-form-field fxFlex=\"70%\"\r\n                            class=\"mat-read-only-field\">\r\n                <input matInput\r\n                       placeholder=\"Invoicee Description\"\r\n                       [matTooltip]=\"'Invoicee Description'\"\r\n                       [formControl]=\"invoiceeDescriptionCtrl\"\r\n                       autocomplete=\"off\"\r\n                       readonly>\r\n            </mat-form-field>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/cost-invoicee-options/cost-invoicee-options.component.scss":
/*!*******************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/cost-invoicee-options/cost-invoicee-options.component.scss ***!
  \*******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "label {\n  font-family: 'Khula', sans-serif !important;\n  font-weight: bold;\n  font-size: 20px;\n  line-height: 22px; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/cost-invoicee-options/cost-invoicee-options.component.ts":
/*!*****************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/cost-invoicee-options/cost-invoicee-options.component.ts ***!
  \*****************************************************************************************************************************************************/
/*! exports provided: CostInvoiceeOptionsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CostInvoiceeOptionsComponent", function() { return CostInvoiceeOptionsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/directives/autocomplete-dropdown.directive */ "./Client/app/shared/directives/autocomplete-dropdown.directive.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var CostInvoiceeOptionsComponent = /** @class */ (function (_super) {
    __extends(CostInvoiceeOptionsComponent, _super);
    function CostInvoiceeOptionsComponent(route, formBuilder, utilService, formConfigurationProvider, masterdataService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.utilService = utilService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.masterdataService = masterdataService;
        _this.invoiceeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__["AtlasFormControl"]('invoiceeCtrl');
        _this.invoiceeDescriptionCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__["AtlasFormControl"]('invoiceeDescriptionCtrl');
        _this.userSupplier = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.supplier = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        return _this;
    }
    CostInvoiceeOptionsComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.masterdata = this.route.snapshot.data.masterdata;
        this.filteredCounterPartyList = this.masterdata.counterparties;
        this.invoiceeCtrl.valueChanges.subscribe(function (input) {
            _this.filteredCounterPartyList = _this.utilService.filterListforAutocomplete(input, _this.masterdata.counterparties, ['counterpartyCode', 'description']);
        });
        this.setValidators();
        this.bindConfiguration();
    };
    CostInvoiceeOptionsComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            invoiceeCtrl: this.invoiceeCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    CostInvoiceeOptionsComponent.prototype.onSupplierSelected = function (supplier) {
        if (!supplier.isLineSelected) {
            this.clearValidators();
        }
        else if (!supplier.supplierSelected) {
            this.setValidators();
        }
        else {
            this.invoiceeCtrl.patchValue(supplier.supplierSelected);
            this.supplierDescription = this.filteredCounterPartyList.find(function (counterparty) { return counterparty.counterpartyCode === supplier.supplierSelected; });
            if (this.supplierDescription) {
                this.invoiceeDescriptionCtrl.patchValue(this.supplierDescription.description);
            }
            if (this.masterdata.counterparties) {
                var invoicee = this.masterdata.counterparties.find(function (counterParty) { return counterParty.counterpartyCode === supplier.supplierSelected; });
                if (invoicee) {
                    this.userSupplier.emit(invoicee.counterpartyCode);
                }
            }
        }
    };
    CostInvoiceeOptionsComponent.prototype.onSelectionChange = function (value) {
        var selectedCounterparty = this.masterdata.counterparties.find(function (counterparty) { return counterparty.counterpartyCode === value; });
        if (selectedCounterparty) {
            var cpDescription = selectedCounterparty.description;
            this.invoiceeDescriptionCtrl.patchValue(cpDescription);
        }
        this.userSupplier.emit(value);
    };
    CostInvoiceeOptionsComponent.prototype.setValidators = function () {
        this.invoiceeCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([
            Object(_shared_directives_autocomplete_dropdown_directive__WEBPACK_IMPORTED_MODULE_4__["inDropdownListValidator"])(this.masterdata.counterparties, Object(_shared_services_util_service__WEBPACK_IMPORTED_MODULE_8__["nameof"])('counterpartyCode')),
        ]));
        this.invoiceeCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]));
        this.invoiceeCtrl.updateValueAndValidity();
    };
    CostInvoiceeOptionsComponent.prototype.clearValidators = function () {
        this.invoiceeCtrl.patchValue('');
        this.invoiceeDescriptionCtrl.patchValue('');
        this.invoiceeCtrl.clearValidators();
        this.invoiceeCtrl.updateValueAndValidity();
    };
    CostInvoiceeOptionsComponent.prototype.populateEntity = function (entity) {
        var invoiceeOption = entity;
        invoiceeOption.counterpartyCode = this.invoiceeCtrl.value;
        return invoiceeOption;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CostInvoiceeOptionsComponent.prototype, "userSupplier", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CostInvoiceeOptionsComponent.prototype, "supplier", void 0);
    CostInvoiceeOptionsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-cost-invoicee-options',
            template: __webpack_require__(/*! ./cost-invoicee-options.component.html */ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/cost-invoicee-options/cost-invoicee-options.component.html"),
            styles: [__webpack_require__(/*! ./cost-invoicee-options.component.scss */ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/cost-invoicee-options/cost-invoicee-options.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_8__["UtilService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__["FormConfigurationProviderService"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_7__["MasterdataService"]])
    ], CostInvoiceeOptionsComponent);
    return CostInvoiceeOptionsComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/invoice-selection/invoice-selection.component.html":
/*!***********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/invoice-selection/invoice-selection.component.html ***!
  \***********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"card-header-luke\">\r\n    <mat-card-title>Invoice Selection</mat-card-title>\r\n    <mat-card-content>\r\n        <div>\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"none center\"\r\n                 fxLayoutGap=\"10px\">\r\n                <div fxFlex=\"33%\"\r\n                     fxFlex.xs=\"33%\"\r\n                     fxFlex.sm=\"33%\">\r\n                    <mat-form-field class=\"mat-read-only-field\">\r\n                        <input matInput\r\n                               placeholder=\"Invoice type\"\r\n                               [matTooltip]=\"'Invoice Type'\"\r\n                               [formControl]=\"invoiceTypeSelectedCtrl\"\r\n                               autocomplete=\"off\"\r\n                               readonly>\r\n                    </mat-form-field>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/invoice-selection/invoice-selection.component.scss":
/*!***********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/invoice-selection/invoice-selection.component.scss ***!
  \***********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".card-header-luke {\n  min-height: auto; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/invoice-selection/invoice-selection.component.ts":
/*!*********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/invoice-selection/invoice-selection.component.ts ***!
  \*********************************************************************************************************************************************/
/*! exports provided: InvoiceSelectionComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InvoiceSelectionComponent", function() { return InvoiceSelectionComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var InvoiceSelectionComponent = /** @class */ (function (_super) {
    __extends(InvoiceSelectionComponent, _super);
    function InvoiceSelectionComponent(formBuilder, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.invoiceTypeSelectedCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_3__["AtlasFormControl"]('invoiceCostTypeSelected');
        _this.costInvoiceTypeName = 'Cost';
        return _this;
    }
    InvoiceSelectionComponent.prototype.ngOnInit = function () {
        this.getData();
    };
    InvoiceSelectionComponent.prototype.getData = function () {
        this.invoiceTypeSelectedCtrl.patchValue(this.costInvoiceTypeName);
    };
    InvoiceSelectionComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            invoiceTypeSelectedCtrl: this.invoiceTypeSelectedCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    InvoiceSelectionComponent.prototype.populateEntity = function (entity) {
        var invoiceType = entity;
        invoiceType.invoiceType = this.invoiceTypeSelectedCtrl.value;
        return invoiceType;
    };
    InvoiceSelectionComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-invoice-selection',
            template: __webpack_require__(/*! ./invoice-selection.component.html */ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/invoice-selection/invoice-selection.component.html"),
            styles: [__webpack_require__(/*! ./invoice-selection.component.scss */ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/invoice-selection/invoice-selection.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_4__["FormConfigurationProviderService"]])
    ], InvoiceSelectionComponent);
    return InvoiceSelectionComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/cost-selection.component.html":
/*!***************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-selection/cost-selection.component.html ***!
  \***************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div>\r\n    <atlas-invoice-selection #invoiceSelectionComponent>\r\n    </atlas-invoice-selection>\r\n    <atlas-contract-search #contractSearchComponent\r\n                           (costContractsSelected)=\"onCostContractsSelected($event)\"\r\n                           (supplier)=\"onSupplierSelected($event)\">\r\n    </atlas-contract-search>\r\n    <atlas-cost-invoicee-options #costInvoiceeOptionsComponent\r\n                                 (userSupplier)=\"onUserSupplierValueChanged($event)\">\r\n    </atlas-cost-invoicee-options>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/cost-selection.component.scss":
/*!***************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-selection/cost-selection.component.scss ***!
  \***************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/cost-selection.component.ts":
/*!*************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-selection/cost-selection.component.ts ***!
  \*************************************************************************************************************/
/*! exports provided: CostSelectionComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CostSelectionComponent", function() { return CostSelectionComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _cost_selection_components_contract_search_contract_search_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../cost-selection/components/contract-search/contract-search.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/contract-search/contract-search.component.ts");
/* harmony import */ var _cost_selection_components_invoice_selection_invoice_selection_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../cost-selection/components/invoice-selection/invoice-selection.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/invoice-selection/invoice-selection.component.ts");
/* harmony import */ var _components_cost_invoicee_options_cost_invoicee_options_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./components/cost-invoicee-options/cost-invoicee-options.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/cost-invoicee-options/cost-invoicee-options.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var CostSelectionComponent = /** @class */ (function (_super) {
    __extends(CostSelectionComponent, _super);
    function CostSelectionComponent(formBuilder, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.formComponents = [];
        _this.costContractsSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.userSupplier = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        return _this;
    }
    CostSelectionComponent.prototype.ngOnInit = function () {
        this.invoiceSelectionFormGroup = this.formBuilder.group({
            invoiceSelectionComponent: this.invoiceSelectionComponent.getFormGroup(),
            contractSearchComponent: this.contractSearchComponent.getFormGroup(),
            costInvoiceeOptionsComponent: this.costInvoiceeOptionsComponent.getFormGroup(),
        });
        this.formComponents.push(this.invoiceSelectionComponent, this.contractSearchComponent, this.costInvoiceeOptionsComponent);
    };
    CostSelectionComponent.prototype.onSupplierSelected = function (supplier) {
        this.costInvoiceeOptionsComponent.onSupplierSelected(supplier);
    };
    CostSelectionComponent.prototype.onCostContractsSelected = function (costContractsSelected) {
        this.costContractsSelected.emit(costContractsSelected);
    };
    CostSelectionComponent.prototype.populateEntity = function (model) {
        this.formComponents.forEach(function (comp) {
            comp.populateEntity(model);
        });
        return model;
    };
    CostSelectionComponent.prototype.onUserSupplierValueChanged = function (userSupplier) {
        this.userSupplier.emit(userSupplier);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('invoiceSelectionComponent'),
        __metadata("design:type", _cost_selection_components_invoice_selection_invoice_selection_component__WEBPACK_IMPORTED_MODULE_5__["InvoiceSelectionComponent"])
    ], CostSelectionComponent.prototype, "invoiceSelectionComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('contractSearchComponent'),
        __metadata("design:type", _cost_selection_components_contract_search_contract_search_component__WEBPACK_IMPORTED_MODULE_4__["ContractSearchComponent"])
    ], CostSelectionComponent.prototype, "contractSearchComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('costInvoiceeOptionsComponent'),
        __metadata("design:type", _components_cost_invoicee_options_cost_invoicee_options_component__WEBPACK_IMPORTED_MODULE_6__["CostInvoiceeOptionsComponent"])
    ], CostSelectionComponent.prototype, "costInvoiceeOptionsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CostSelectionComponent.prototype, "costContractsSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CostSelectionComponent.prototype, "userSupplier", void 0);
    CostSelectionComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-cost-selection',
            template: __webpack_require__(/*! ./cost-selection.component.html */ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/cost-selection.component.html"),
            styles: [__webpack_require__(/*! ./cost-selection.component.scss */ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/cost-selection.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_3__["FormConfigurationProviderService"]])
    ], CostSelectionComponent);
    return CostSelectionComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/document-template/cost-document-template.component.html":
/*!*******************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/document-template/cost-document-template.component.html ***!
  \*******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-title>\r\n        Invoice Document\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"2%\">\r\n            <mat-form-field>\r\n                <mat-select placeholder=\"External/InHouse\"\r\n                            [formControl]=\"invoiceExtInHouseCtrl\"\r\n                            matTooltip=\"External/InHouse\">\r\n                    <mat-option *ngFor=\"let info of invoiceSourceType\"\r\n                                [value]=\"info.viewValue\">\r\n                        {{info.viewValue}}\r\n                    </mat-option>\r\n                </mat-select>\r\n            </mat-form-field>\r\n            <mat-form-field>\r\n                <input matInput\r\n                       placeholder=\"External Invoice Reference\"\r\n                       [formControl]=\"invoiceExtRefCtrl\"\r\n                       autocomplete=\"off\">\r\n                <mat-error *ngIf=\"invoiceExtRefCtrl.hasError('required')\">\r\n                    Reference is required\r\n                </mat-error>\r\n                <mat-error *ngIf=\"invoiceExtRefCtrl.hasError('maxlength')\">\r\n                    Must be less than 25 characters\r\n                </mat-error>\r\n                <mat-hint style=\"color:orange\"\r\n                          *ngIf=\"!isUnique\">\r\n                    Reference Number already used\r\n                </mat-hint>\r\n            </mat-form-field>\r\n        </div>\r\n\r\n        <div fxLayout=\"row\">\r\n            <mat-form-field fxFlex=\"32%\">\r\n                <mat-select placeholder=\"Document Template\"\r\n                            [formControl]=\"invoiceTemplatesCtrl\"\r\n                            (selectionChange)=\"onInvoiceTemplateSelected()\">\r\n                    <mat-option></mat-option>\r\n                    <mat-option *ngFor=\"let template of filteredTemplates\"\r\n                                [value]=\"template\">\r\n                        {{template.name}}\r\n                    </mat-option>\r\n                </mat-select>\r\n                <mat-error *ngIf=\"invoiceTemplatesCtrl.hasError('required')\">\r\n                    Template is required\r\n                </mat-error>\r\n            </mat-form-field>\r\n        </div>\r\n\r\n        <div fxLayout=\"row\">\r\n            <mat-form-field fxFlex=\"32%\">\r\n                <mat-select placeholder=\"Doc Type\"\r\n                            [formControl]=\"docTypeCtrl\">\r\n                    <mat-option *ngFor=\"let info of transactionDocumentType\"\r\n                                [value]=\"info.value\">\r\n                        {{info.viewValue}}\r\n                    </mat-option>\r\n                </mat-select>\r\n            </mat-form-field>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/document-template/cost-document-template.component.scss":
/*!*******************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/document-template/cost-document-template.component.scss ***!
  \*******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/document-template/cost-document-template.component.ts":
/*!*****************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/document-template/cost-document-template.component.ts ***!
  \*****************************************************************************************************************************************************/
/*! exports provided: CostDocumentTemplateComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CostDocumentTemplateComponent", function() { return CostDocumentTemplateComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/enums/document-type.enum */ "./Client/app/shared/enums/document-type.enum.ts");
/* harmony import */ var _shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/enums/invoice-source-type.enum */ "./Client/app/shared/enums/invoice-source-type.enum.ts");
/* harmony import */ var _shared_enums_transaction_document_type_enum__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/enums/transaction-document-type.enum */ "./Client/app/shared/enums/transaction-document-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/document.service */ "./Client/app/shared/services/http-services/document.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _invoicing_base_form_document_template_base_document_template_base_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../invoicing-base-form/document-template-base/document-template-base.component */ "./Client/app/execution/execution-invoicing/invoicing-base-form/document-template-base/document-template-base.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};












var CostDocumentTemplateComponent = /** @class */ (function (_super) {
    __extends(CostDocumentTemplateComponent, _super);
    function CostDocumentTemplateComponent(formBuilder, documentService, utilService, executionService, formConfigurationProvider) {
        var _this = _super.call(this, executionService, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.documentService = documentService;
        _this.utilService = utilService;
        _this.executionService = executionService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.docTypeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_2__["AtlasFormControl"]('DocType');
        return _this;
    }
    CostDocumentTemplateComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.subscriptions.push(this.documentService.
            getTemplates(_shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_4__["DocumentTypes"].InvoiceCostsInvoice)
            .subscribe(function (templates) {
            _this.filteredTemplates = templates.value;
            _this.invoiceTemplatesCtrl.valueChanges.subscribe(function (input) {
                _this.filteredTemplates =
                    _this.utilService.filterListforAutocomplete(input, templates.value, ['documentTemplateId', 'name']);
            });
            _this.setValidators();
            _this.onExternalInHouseSelected();
            _this.bindConfiguration();
            if ((_this.filteredTemplates.length === 1) &&
                (_this.invoiceExtInHouseCtrl.value === (_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceSourceType"][_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceSourceType"].Inhouse]))) {
                _this.invoiceTemplatesCtrl.patchValue(_this.filteredTemplates[0]);
                _this.onInvoiceTemplateSelected();
            }
        }));
        this.onChanges();
        this.invoiceSourceType = this.getInvoiceSourceTypeEnum();
        this.transactionDocumentType = this.getTransactionDocumentTypeEnum();
        this.getData();
        this.docTypeCtrl.patchValue(_shared_enums_transaction_document_type_enum__WEBPACK_IMPORTED_MODULE_6__["TransactionDocumentTypes"]['PI/SI']);
    };
    CostDocumentTemplateComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            invoiceExtInHouseCtrl: this.invoiceExtInHouseCtrl,
            invoiceExtRefCtrl: this.invoiceExtRefCtrl,
            documentTemplateCtrl: this.invoiceTemplatesCtrl,
            docTypeCtrl: this.docTypeCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    CostDocumentTemplateComponent.prototype.getData = function () {
        if (this.costDirections === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable) {
            this.invoiceExtInHouseCtrl.patchValue(_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceSourceType"][_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceSourceType"].External]);
        }
        else if (this.costDirections === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Receivable) {
            this.invoiceExtInHouseCtrl.patchValue(_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceSourceType"][_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceSourceType"].Inhouse]);
        }
    };
    CostDocumentTemplateComponent.prototype.getTransactionDocumentTypeEnum = function () {
        var transactionDocumentTypeEnum = [];
        var objectEnum = Object.keys(_shared_enums_transaction_document_type_enum__WEBPACK_IMPORTED_MODULE_6__["TransactionDocumentTypes"]);
        var values = objectEnum.slice(0, objectEnum.length / 2);
        var keys = objectEnum.slice(objectEnum.length / 2);
        for (var i = 0; i < objectEnum.length / 2; i++) {
            if (Number(values[i]) !== _shared_enums_transaction_document_type_enum__WEBPACK_IMPORTED_MODULE_6__["TransactionDocumentTypes"].Original) {
                transactionDocumentTypeEnum.push({ viewValue: keys[i], value: Number(values[i]) });
            }
        }
        return transactionDocumentTypeEnum;
    };
    CostDocumentTemplateComponent.prototype.populateEntity = function (entity) {
        var invoiceDocumentTemplate = entity;
        invoiceDocumentTemplate.template = this.invoiceTemplatesCtrl.value ?
            this.invoiceTemplatesCtrl.value.path : null;
        invoiceDocumentTemplate.externalInhouse = this.invoiceExtInHouseCtrl.value;
        invoiceDocumentTemplate.externalInvoiceRef = this.invoiceExtRefCtrl.value;
        invoiceDocumentTemplate.documentType = this.docTypeCtrl.value;
        return invoiceDocumentTemplate;
    };
    CostDocumentTemplateComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-cost-document-template',
            template: __webpack_require__(/*! ./cost-document-template.component.html */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/document-template/cost-document-template.component.html"),
            styles: [__webpack_require__(/*! ./cost-document-template.component.scss */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/document-template/cost-document-template.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_8__["DocumentService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_10__["UtilService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_9__["ExecutionService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__["FormConfigurationProviderService"]])
    ], CostDocumentTemplateComponent);
    return CostDocumentTemplateComponent;
}(_invoicing_base_form_document_template_base_document_template_base_component__WEBPACK_IMPORTED_MODULE_11__["DocumentTemplateBaseComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/payments/cost-payments.component.html":
/*!*************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/payments/cost-payments.component.html ***!
  \*************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-title>\r\n        Payments\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"2%\">\r\n            <mat-form-field fxFlex=\"30%\">\r\n                <mat-select placeholder=\"Payment Terms\"\r\n                            [formControl]=\"costPaymentTermsCtrl\"\r\n                            matTooltip=\"Payment Terms\">\r\n                    <mat-option *ngFor=\"let terms of paymentTermsOption\"\r\n                                [value]=\"terms.paymentTermCode\">{{terms.paymentTermCode}}</mat-option>\r\n                </mat-select>\r\n            </mat-form-field>\r\n            <mat-form-field fxFlex=\"30%\"\r\n                            class=\"mandatory\">\r\n                <input matInput\r\n                       placeholder=\"Due Date\"\r\n                       [formControl]=\"costDueDateCtrl\"\r\n                       [matDatepicker]=\"costDueDatePicker\"\r\n                       matTooltip=\"Due Date\"\r\n                       autocomplete=\"off\"\r\n                       (dateChange)='onInvoiceDueDateSelected()'>\r\n                <mat-datepicker-toggle matSuffix\r\n                                       [for]=\"costDueDatePicker\"></mat-datepicker-toggle>\r\n                <mat-datepicker #costDueDatePicker></mat-datepicker>\r\n                <mat-hint *ngIf=\"!costDueDateCtrl.hasError('isDateBeforeValid' || 'required') && !costDueDateCtrl.disabled\"\r\n                          class=\"invoice-creation-required-fields\">Required*</mat-hint>\r\n                <mat-error *ngIf=\"costDueDateCtrl.hasError('required')\">\r\n                    Required*\r\n                </mat-error>\r\n                <mat-error *ngIf=\"costDueDateCtrl.hasError('isDateBeforeValid')\">\r\n                    Value Date should be equal to or after the invoice date\r\n                </mat-error>\r\n            </mat-form-field>\r\n\r\n\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/payments/cost-payments.component.scss":
/*!*************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/payments/cost-payments.component.scss ***!
  \*************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/payments/cost-payments.component.ts":
/*!***********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/payments/cost-payments.component.ts ***!
  \***********************************************************************************************************************************/
/*! exports provided: CostPaymentsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CostPaymentsComponent", function() { return CostPaymentsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/validators/date-validators.validator */ "./Client/app/shared/validators/date-validators.validator.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var moment = moment__WEBPACK_IMPORTED_MODULE_3__;
var CostPaymentsComponent = /** @class */ (function (_super) {
    __extends(CostPaymentsComponent, _super);
    function CostPaymentsComponent(formBuilder, route, companyManager, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.route = route;
        _this.companyManager = companyManager;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.costPaymentTermsCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_7__["AtlasFormControl"]('costPaymentTerms');
        _this.costDueDateCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_7__["AtlasFormControl"]('costDueDate');
        _this.masterdata = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_8__["MasterData"]();
        return _this;
    }
    CostPaymentsComponent.prototype.ngOnInit = function () {
        this.masterdata = this.route.snapshot.data.masterdata;
        this.paymentTermsOption = this.masterdata.paymentTerms;
        this.onChanges();
        this.onInvoiceDueDateSelected();
    };
    CostPaymentsComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            costPaymentTermsCtrl: this.costPaymentTermsCtrl,
            costDueDatePickerCtrl: this.costDueDateCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    CostPaymentsComponent.prototype.onInvoiceDueDateSelected = function () {
        this.costDueDateCtrl.clearValidators();
        this.costDueDateCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([Object(_shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_6__["invoiceDateValidation"])(this.costDueDateCtrl.value, moment(this.invoiceDateChanged)), _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]));
        this.costDueDateCtrl.updateValueAndValidity();
    };
    CostPaymentsComponent.prototype.populateEntity = function (entity) {
        var payments = entity;
        payments.paymentTerms = this.costPaymentTermsCtrl.value;
        payments.dueDate = this.costDueDateCtrl.value;
        return payments;
    };
    CostPaymentsComponent.prototype.getPaymentTermsCreditDays = function (paymentTerm) {
        if (this.masterdata.paymentTerms) {
            var selectedPaymentTerms = this.masterdata.paymentTerms.find(function (payTerms) { return payTerms.paymentTermCode === paymentTerm; });
            return selectedPaymentTerms.creditDays;
        }
    };
    CostPaymentsComponent.prototype.onChanges = function () {
        var _this = this;
        this.costPaymentTermsCtrl.valueChanges.subscribe(function (input) {
            _this.costDueDateCtrl.patchValue(_this.companyManager.getCurrentCompanyDate().add('days', _this.getPaymentTermsCreditDays(input)));
        });
    };
    CostPaymentsComponent.prototype.setPaymentTerms = function (paymentTerm) {
        this.costPaymentTermsCtrl.patchValue(paymentTerm);
    };
    CostPaymentsComponent.prototype.setPaymentFieldsForSummary = function (model) {
        this.costPaymentTermsCtrl.patchValue(model.paymentTerms);
        this.costDueDateCtrl.patchValue(model.dueDate);
    };
    CostPaymentsComponent.prototype.setValuesForSummaryFromGrid = function (summaryRecord) {
        this.costPaymentTermsCtrl.patchValue(summaryRecord.paymentTermsCode);
        this.costDueDateCtrl.patchValue(summaryRecord.dueDate);
    };
    CostPaymentsComponent.prototype.setinvoiceDateSelected = function (invoiceDate) {
        this.invoiceDateChanged = invoiceDate;
    };
    CostPaymentsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-cost-payments',
            template: __webpack_require__(/*! ./cost-payments.component.html */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/payments/cost-payments.component.html"),
            styles: [__webpack_require__(/*! ./cost-payments.component.scss */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/payments/cost-payments.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__["CompanyManagerService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_9__["FormConfigurationProviderService"]])
    ], CostPaymentsComponent);
    return CostPaymentsComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/selected-cost/invoice-cost-selected-cost.component.html":
/*!*******************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/selected-cost/invoice-cost-selected-cost.component.html ***!
  \*******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <h2 class=\"atlas-grid-card-title\">Selected Cost</h2>\r\n    <mat-card-content>\r\n        <div [hidden]=\"isAddDeleteButtonInvisible\"\r\n             fxLayout=\"row\"\r\n             fxLayoutAlign=\"start center\"\r\n             fxLayoutGap=\"10px\"\r\n             class=\"add-line-container\">\r\n            <div fxLayout=\"column\"\r\n                 fxLayoutAlign=\"start start\">\r\n                <h6>Add new lines:</h6>\r\n            </div>\r\n            <div fxLayout=\"column\"\r\n                 fxLayoutAlign=\"start start\"\r\n                 fxFlex=\"2\">\r\n                <mat-form-field>\r\n                    <input matInput\r\n                           [formControl]=\"addNewLineCtrl\">\r\n                </mat-form-field>\r\n            </div>\r\n            <div fxLayout=\"column\"\r\n                 fxLayoutAlign=\"start start\">\r\n                <button mat-button\r\n                        (click)=\"onAddRowButtonClicked(addNewLineCtrl.value)\">PROCEED</button>\r\n            </div>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             class=\" table-title\">\r\n            <span class=\"fill-space\"></span>\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"end\"\r\n                 fxLayoutGap=\"2%\">\r\n                <mat-form-field fxFlex=\"40%\">\r\n                    <mat-select placeholder=\"Cost VAT Code\"\r\n                                [formControl]=\"costVatCodeCtrl\"\r\n                                matTooltip=\"Cost VAT Code\"\r\n                                (selectionChange)='onCostVatCodeSelected()'>\r\n                        <mat-option *ngFor=\"let code of costVatCodeOptions\"\r\n                                    [value]=\"code.vatCode\">\r\n                            {{code.vatCode}}\r\n                        </mat-option>\r\n                    </mat-select>\r\n                </mat-form-field>\r\n            </div>\r\n        </div>\r\n        <div ag-grid=\"selectedCostGridOptions\"\r\n             class=\"ag-theme-material pointer-cursor\">\r\n            <ag-grid-angular class=\"ag-theme-material\"\r\n                             [rowData]=\"selectedCostGridRows\"\r\n                             [columnDefs]=\"selectedCostGridColumns\"\r\n                             [gridOptions]=\"selectedCostGridOptions\"\r\n                             domLayout=\"autoHeight\"\r\n                             (gridReady)=\"onGridReady($event)\"\r\n                             [pagination]=\"true\"\r\n                             [paginationPageSize]=\"10\"\r\n                             [enableSorting]=\"true\"\r\n                             [enableColResize]=\"true\"\r\n                             [enableFilter]=\"true\"\r\n                             [rowSelection]=\"rowSelection\"\r\n                             [frameworkComponents]=\"gridComponents\"\r\n                             enableFilter\r\n                             [rowHeight]=atlasAgGridParam.rowHeight\r\n                             [groupUseEntireRow]=\"false\"\r\n                             [suppressMakeColumnVisibleAfterUnGroup]=\"true\"\r\n                             [singleClickEdit]=true>\r\n                <!-- [rowGroupPanelShow]=\"rowGroupPanelShow\" -->\r\n            </ag-grid-angular>\r\n        </div>\r\n\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"end center\">\r\n            <mat-card-subtitle class=\"total-figure\">\r\n                Total Cost:\r\n                <span class=\"total-figure-value\">\r\n                    {{this.totalCostDirectionSign}}{{formatQuantityAndTotal(this.total)}} {{this.currencyCodeSelected}}\r\n                </span>\r\n            </mat-card-subtitle>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/selected-cost/invoice-cost-selected-cost.component.scss":
/*!*******************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/selected-cost/invoice-cost-selected-cost.component.scss ***!
  \*******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".margin-buttons {\n  margin-bottom: 1%; }\n  .margin-buttons button {\n    margin-top: 0; }\n  .padding-content {\n  padding: 20px; }\n  .atlas-grid-card-title {\n  margin-bottom: 0; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/selected-cost/invoice-cost-selected-cost.component.ts":
/*!*****************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/selected-cost/invoice-cost-selected-cost.component.ts ***!
  \*****************************************************************************************************************************************************/
/*! exports provided: InvoiceCostSelectedCostComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InvoiceCostSelectedCostComponent", function() { return InvoiceCostSelectedCostComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _shared_components_ag_contextual_menu_ag_contextual_menu_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/components/ag-contextual-menu/ag-contextual-menu.component */ "./Client/app/shared/components/ag-contextual-menu/ag-contextual-menu.component.ts");
/* harmony import */ var _shared_components_ag_grid_autocomplete_ag_grid_autocomplete_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/components/ag-grid/autocomplete/ag-grid-autocomplete.component */ "./Client/app/shared/components/ag-grid/autocomplete/ag-grid-autocomplete.component.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_components_cell_editor_select_cell_editor_select_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/components/cell-editor-select/cell-editor-select.component */ "./Client/app/shared/components/cell-editor-select/cell-editor-select.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_invoice_line_record_entity__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/entities/invoice-line-record.entity */ "./Client/app/shared/entities/invoice-line-record.entity.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-sign.enum */ "./Client/app/shared/enums/cost-sign.enum.ts");
/* harmony import */ var _shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../../../shared/enums/rate-type.enum */ "./Client/app/shared/enums/rate-type.enum.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../../../shared/services/execution/dtos/contracts-to-cost-invoice */ "./Client/app/shared/services/execution/dtos/contracts-to-cost-invoice.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


















var InvoiceCostSelectedCostComponent = /** @class */ (function (_super) {
    __extends(InvoiceCostSelectedCostComponent, _super);
    function InvoiceCostSelectedCostComponent(formBuilder, formConfigurationProvider, route, uiService, snackbar, gridService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.route = route;
        _this.uiService = uiService;
        _this.snackbar = snackbar;
        _this.gridService = gridService;
        _this.totalCostAndVatCode = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.costVatCodeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__["AtlasFormControl"]('CostVatCode');
        _this.narrativeLength = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.costDirectionPay = 'Pay';
        _this.selectedCostGridOptions = {};
        _this.componentId = 'selectedCost';
        _this.gridComponents = {
            atlasSelect: _shared_components_cell_editor_select_cell_editor_select_component__WEBPACK_IMPORTED_MODULE_7__["CellEditorSelectComponent"],
        };
        _this.gridContext = {
            gridEditable: false,
        };
        _this.taxRateCalculated = 0;
        _this.total = 0;
        _this.costDirectionDisplay = '';
        _this.debit = 'Dr';
        _this.credit = 'Cr';
        _this.currencyCode = '';
        _this.pricingOptionValue = 0;
        _this.decimalOptionValue = 2;
        _this.formatType = 'en-US';
        _this.isAddDeleteButtonInvisible = false;
        _this.costNarrativePrefix = 'ADD ';
        _this.addNewLineCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__["AtlasFormControl"]('addNewLineCtrl');
        _this.invoiceCostMenuActions = {
            deleteinvoiceCost: 'delete',
        };
        _this.inPNL = false;
        _this.noAction = false;
        _this.atlasAgGridParam = _this.gridService.getAgGridParam();
        return _this;
    }
    InvoiceCostSelectedCostComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.invoiceType = Number(decodeURIComponent(this.route.snapshot.paramMap.get('invoiceTypeId')));
        this.route.paramMap
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__["map"])(function (params) { return params.get('company'); }))
            .subscribe(function (company) {
            _this.company = company;
        });
        this.masterData = this.route.snapshot.data.masterdata;
        this.costDirections = [
            {
                costDirectionId: _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"].Payable,
                costDirection: 'Pay',
            },
            {
                costDirectionId: _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"].Receivable,
                costDirection: 'Receive',
            },
        ];
        this.gridContext.gridEditable = false;
        this.costVatCodeOptions = this.masterData.vats;
        this.costVatCodeCtrl.patchValue(this.masterData.vats[0].vatCode);
        this.initializeGridColumns();
        this.addNewLineCtrl.patchValue(1);
        this.init();
    };
    InvoiceCostSelectedCostComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            costVatCodeCtrl: this.costVatCodeCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    InvoiceCostSelectedCostComponent.prototype.onGridReady = function (params) {
        var _this = this;
        this.gridApi = params.api;
        params.columnDefs = this.selectedCostGridColumns;
        this.selectedCostGridOptions = params;
        this.gridColumnApi = params.columnApi;
        this.autoSizeGridHeader();
        this.gridColumnApi.autoSizeAllColumns();
        window.onresize = function () {
            _this.gridColumnApi.autoSizeAllColumns();
        };
    };
    InvoiceCostSelectedCostComponent.prototype.autoSizeGridHeader = function () {
        var allColumnIds = [];
        this.selectedCostGridColumns.forEach(function (columnDefs) {
            allColumnIds.push(columnDefs.field);
        });
        this.gridColumnApi.autoSizeColumns(allColumnIds);
    };
    InvoiceCostSelectedCostComponent.prototype.onGridSizeChanged = function (params) {
        this.autoSizeGridHeader();
    };
    InvoiceCostSelectedCostComponent.prototype.initializeGridColumns = function () {
        this.selectedCostGridOptions = {
            context: this.gridContext,
        };
        this.selectedCostGridColumns = [
            {
                headerName: 'Cost Type',
                field: 'costTypeCode',
                colId: 'costTypeCode',
                hide: false,
                width: 250,
                minWidth: 250,
                maxWidth: 250,
                suppressSizeToFit: true,
                cellRendererFramework: _shared_components_ag_grid_autocomplete_ag_grid_autocomplete_component__WEBPACK_IMPORTED_MODULE_5__["AgGridAutocompleteComponent"],
                cellRendererParams: {
                    context: this.masterData,
                    options: this.masterData.costTypes.filter(function (cost) { return cost.isATradeCost === true; })
                        .sort(function (a, b) { return a.costTypeCode.localeCompare(b.costTypeCode); }),
                    valueProperty: 'costTypeCode',
                    codeProperty: 'costTypeCode',
                    displayProperty: 'name',
                    isRequired: true,
                },
                onCellValueChanged: this.onCostTypeChange.bind(this),
            },
            {
                headerName: '%Invoiced',
                field: 'invoicePercent',
                colId: 'invoicePercent',
                type: 'numericColumn',
                hide: false,
            },
            {
                headerName: 'Currency',
                field: 'currencyCode',
                colId: 'currencyCode',
                hide: false,
            },
            {
                headerName: 'Pay/Rec',
                field: 'costDirection',
                colId: 'costDirection',
                hide: false,
                editable: this.isGridEditable,
                cellRenderer: this.requiredCell.bind(this),
                cellEditor: 'agRichSelectCellEditor',
                cellEditorParams: {
                    values: this.costDirections.map(function (costDirection) { return costDirection.costDirection; }),
                    displayPropertyName: 'costDirection',
                    valuePropertyName: 'costDirection',
                    displayFormat: 'costDirection',
                },
                onCellValueChanged: this.onCostDirectionChange.bind(this),
            },
            {
                headerName: 'VAT Code',
                field: 'vatCode',
                colId: 'vatCode',
                hide: false,
                editable: true,
                cellRenderer: this.requiredCell.bind(this),
                cellEditor: 'agRichSelectCellEditor',
                cellEditorParams: {
                    values: this.masterData.vats.map(function (vat) { return vat.vatCode; }),
                    displayPropertyName: 'vatCode',
                    valuePropertyName: 'vatCode',
                    displayFormat: 'vatCode',
                    context: this.masterData,
                },
                onCellValueChanged: this.onVatCodeChange.bind(this),
            },
            {
                headerName: 'Cost Amount',
                field: 'costAmountToInvoice',
                colId: 'costAmountToInvoice',
                type: 'numericColumn',
                hide: false,
                editable: this.isGridEditable,
                cellRenderer: this.requiredCellForCostAmount.bind(this),
                valueSetter: this.setCostAmountToInvoice,
                onCellValueChanged: this.onCostAmountToInvoiceChange.bind(this),
            },
            {
                headerName: 'Cost Narrative',
                field: 'narrative',
                colId: 'narrative',
                hide: false,
                editable: this.isGridEditable,
                valueSetter: this.setCostNarrative.bind(this),
                cellStyle: this.narrativeMaxLength.bind(this),
            },
            {
                headerName: '',
                cellRendererFramework: _shared_components_ag_contextual_menu_ag_contextual_menu_component__WEBPACK_IMPORTED_MODULE_4__["AgContextualMenuComponent"],
                cellRendererParams: {
                    context: {
                        componentParent: this,
                        actionContext: this.gridContext,
                    },
                    menuActions: this.invoiceCostGridContextualMenuActions,
                },
                cellClass: 'ag-contextual-menu',
                hide: this.isAddDeleteButtonInvisible === true,
                maxWidth: 80,
            },
        ];
        this.rowSelection = 'multiple';
    };
    InvoiceCostSelectedCostComponent.prototype.isGridEditable = function (params) {
        if (!params.data.contractReference) {
            return params.context.gridEditable;
        }
        else {
            return false;
        }
    };
    InvoiceCostSelectedCostComponent.prototype.setCostAmountToInvoice = function (params) {
        params.data.costAmountToInvoice = (params.newValue <= 0) ? 0 : params.newValue;
        return true;
    };
    InvoiceCostSelectedCostComponent.prototype.setCostNarrative = function (params) {
        if (params.newValue.length <= 0) {
            params.data.narrative = this.costNarrativePrefix;
        }
        else {
            var narrativeText = params.newValue;
            params.data.narrative = (narrativeText).startsWith('ADD') ? params.newValue :
                this.costNarrativePrefix.concat(params.newValue);
        }
        return true;
    };
    InvoiceCostSelectedCostComponent.prototype.onCostDirectionChange = function (params) {
        if (params.data.costAmountToInvoice) {
            this.calculateTotalOnUpdateGrid();
        }
        return true;
    };
    InvoiceCostSelectedCostComponent.prototype.onCostAmountToInvoiceChange = function (params) {
        if (params.data.costDirection) {
            this.calculateTotalOnUpdateGrid();
        }
        return true;
    };
    InvoiceCostSelectedCostComponent.prototype.onCostTypeChange = function (params) {
        var filteredCostType = params.colDef.cellRendererParams.context.costTypes.find(function (e) { return e.costTypeCode === params.data.costTypeCode; });
        if (filteredCostType) {
            this.inPNL = filteredCostType.inPNL;
            this.noAction = filteredCostType.noAction;
        }
    };
    InvoiceCostSelectedCostComponent.prototype.contractToBeSelected = function (costContracts) {
        var _this = this;
        if (costContracts.length > 0) {
            this.initializeGridColumns();
            if (this.defaultVatCode) {
                costContracts.map(function (costContract) { return costContract.vatCode = _this.defaultVatCode; });
            }
            this.selectedCostGridRows = costContracts;
            this.selectedCostGridOptions.pagination = (costContracts.length > 10) ? true : false;
            this.currencyCodeSelected = this.selectedCostGridRows[0].currencyCode;
            this.calculateTotalAmountAndGetVatCode(costContracts);
            if (this.masterData.vats.length > 0) {
                this.costVatCodeCtrl.patchValue(this.masterData.vats[0].vatCode);
            }
        }
        else {
            this.initializeGridColumns();
        }
    };
    InvoiceCostSelectedCostComponent.prototype.onAddRowButtonClicked = function (numberOfLines) {
        this.isAddRow = true;
        this.gridContext.gridEditable = true;
        this.gridApi.onFilterChanged();
        for (var count = 1; count <= numberOfLines; count++) {
            var newItem = this.createNewCostRowData();
            this.gridApi.updateRowData({ add: [newItem], addIndex: 0 });
        }
    };
    InvoiceCostSelectedCostComponent.prototype.init = function () {
        this.invoiceCostGridContextualMenuActions = [
            {
                icon: 'delete',
                text: 'Delete',
                action: this.invoiceCostMenuActions.deleteInvoiceCost,
            },
        ];
    };
    InvoiceCostSelectedCostComponent.prototype.handleAction = function (action, contractsToCostInvoices) {
        switch (action) {
            case this.invoiceCostMenuActions.deleteInvoiceCost:
                this.onDeleteSelectedButtonClicked(contractsToCostInvoices);
                break;
            default:
                break;
        }
    };
    InvoiceCostSelectedCostComponent.prototype.onDeleteSelectedButtonClicked = function (contractsToCostInvoices) {
        if (!contractsToCostInvoices.contractReference) {
            this.total = 0;
            this.gridApi.updateRowData({ remove: [contractsToCostInvoices] });
            var index = this.selectedCostGridRows.indexOf(contractsToCostInvoices, 0);
            if (index > -1) {
                this.selectedCostGridRows.splice(index, 1);
            }
            this.calculationOfCRAndDR();
            this.calculateTotalOnUpdateGrid();
        }
        else {
            this.snackbar.informationSnackBar('You cannot delete a cost which is not added in Invoice Working Page');
        }
    };
    InvoiceCostSelectedCostComponent.prototype.calculationOfCRAndDR = function () {
        var totalCR = 0;
        var totalDR = 0;
        var costDirectionPay = 'Pay';
        this.gridApi.forEachNode(function (rowNode) {
            if (rowNode.data) {
                if (rowNode.data.costDirection === costDirectionPay) {
                    totalCR = totalCR + Number(rowNode.data.costAmountToInvoice);
                }
                else {
                    totalDR = totalDR + Number(rowNode.data.costAmountToInvoice);
                }
            }
        });
        this.updateTotals(totalCR, totalDR);
        this.totalCostAndVatDetails();
    };
    InvoiceCostSelectedCostComponent.prototype.updateTotals = function (totalCR, totalDR) {
        if (totalCR > totalDR) {
            this.total = totalCR - totalDR;
            this.costDirectionDisplay = this.credit;
            this.totalCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_11__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"].Payable];
            this.totalCostDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"].Payable];
        }
        else {
            this.total = totalDR - totalCR;
            this.costDirectionDisplay = this.debit;
            this.totalCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_11__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"].Receivable];
            this.totalCostDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"].Receivable];
        }
    };
    InvoiceCostSelectedCostComponent.prototype.totalCostAndVatDetails = function () {
        this.totalCostAndVatCode.emit({
            rate: this.total,
            decimalOption: this.decimalOptionValue,
            costDirection: this.totalCostDirection,
            currencyCode: this.currencyCodeSelected,
            vatAvailable: this.vatCodeAvailable,
        });
    };
    InvoiceCostSelectedCostComponent.prototype.createNewCostRowData = function () {
        var newData = new _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_14__["ContractsToCostInvoice"]();
        newData.invoicePercent = 100;
        newData.currencyCode = this.currencyCodeSelected;
        newData.narrative = this.costNarrativePrefix;
        return newData;
    };
    InvoiceCostSelectedCostComponent.prototype.setDefaultVatCode = function (defaultVatCode) {
        this.defaultVatCode = defaultVatCode;
    };
    InvoiceCostSelectedCostComponent.prototype.setTaxDataForSummary = function (costInvoiceRecord) {
        this.selectedCostGridRows = this.getCostContractsForSummary(costInvoiceRecord);
        this.initializeGridColumns();
        this.calculateTotalForSummary(costInvoiceRecord);
    };
    InvoiceCostSelectedCostComponent.prototype.getCostContractsForSummary = function (costInvoiceRecord) {
        var contracts = [];
        if (costInvoiceRecord) {
            var contract = new _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_14__["ContractsToCostInvoice"]();
            contract.vatCode = costInvoiceRecord.vatCode;
            contract.principalCommodity = costInvoiceRecord.principalCommodity;
            contract.rate = costInvoiceRecord.price;
            contract.quantity = costInvoiceRecord.quantity;
            contract.costAmountToInvoice = costInvoiceRecord.lineAmount;
            contract.invoicePercent = costInvoiceRecord.totalInvoiceValue;
            contracts.push(contract);
        }
        return contracts;
    };
    InvoiceCostSelectedCostComponent.prototype.getCostDirectionIdFromCode = function (code) {
        if (code) {
            var selectedCostDirection = this.costDirections.find(function (e) { return e.costDirection === code; });
            return selectedCostDirection.costDirectionId;
        }
    };
    InvoiceCostSelectedCostComponent.prototype.calculateTotalAmountAndGetVatCode = function (contracts) {
        var _this = this;
        this.total = 0;
        var totalCR = 0;
        var totalDR = 0;
        var costDirectionId;
        this.vatCodeAvailable = [];
        contracts.forEach(function (contract) {
            var vatCode;
            // creating copy of selected vatCode, so the calculations are not impacting the original data
            vatCode = _this.masterData.vats
                .filter(function (vat) { return (vat.vatCode === contract.vatCode); }).map(function (x) { return (__assign({}, x)); });
            if (vatCode.length > 0) {
                vatCode.map(function (code) {
                    return code.rate = code.rate / 100 * contract.costAmountToInvoice;
                });
                if (_this.vatCodeAvailable.length === 0) {
                    _this.vatCodeAvailable.push(vatCode[0]);
                }
                else {
                    _this.vatCodeAvailable.map(function (code) {
                        return (code.vatCode === vatCode[0].vatCode) ? (code.rate = code.rate + vatCode[0].rate) :
                            _this.vatCodeAvailable.push(vatCode[0]);
                    });
                }
            }
            costDirectionId = _this.getCostDirectionIdFromCode(contract.costDirection);
            if (costDirectionId === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"].Payable) {
                totalCR = Number(totalCR) + Number(contract.costAmountToInvoice);
            }
            else {
                totalDR = Number(totalDR) + Number(contract.costAmountToInvoice);
            }
        });
        if (contracts.length > 0) {
            this.currencyCode = contracts[0].currencyCode;
        }
        this.updateTotals(totalCR, totalDR);
        this.totalCostAndVatDetails();
    };
    InvoiceCostSelectedCostComponent.prototype.calculateTotalOnUpdateGrid = function () {
        var totalCR = 0;
        var totalDR = 0;
        var costDirectionPay = 'Pay';
        var vatMasterData = this.masterData.vats;
        var vatCodeAvailable = [];
        this.gridApi.forEachNode(function (rowNode) {
            if (rowNode.data) {
                var vatCode_1 = [];
                if (rowNode.data.costDirection === costDirectionPay) {
                    totalCR = totalCR + Number(rowNode.data.costAmountToInvoice);
                }
                else {
                    totalDR = totalDR + Number(rowNode.data.costAmountToInvoice);
                }
                vatCode_1 = vatMasterData
                    .filter(function (vat) { return (vat.vatCode === rowNode.data.vatCode); }).map(function (x) { return (__assign({}, x)); });
                if (vatCode_1.length > 0) {
                    vatCode_1.map(function (code) {
                        return code.rate = code.rate / 100 * rowNode.data.costAmountToInvoice;
                    });
                    if (vatCodeAvailable.length === 0) {
                        if (rowNode.data.costDirection === costDirectionPay) {
                            vatCode_1[0].rate = -(vatCode_1[0].rate);
                        }
                        vatCodeAvailable.push(vatCode_1[0]);
                    }
                    else {
                        var isAvailable_1 = false;
                        vatCodeAvailable.map(function (code) {
                            if (code.vatCode === vatCode_1[0].vatCode) {
                                if (vatCodeAvailable.filter(function (selectedVatCode) { return selectedVatCode.vatCode === vatCode_1[0].vatCode; })) {
                                    if (rowNode.data.costDirection === costDirectionPay) {
                                        vatCode_1[0].rate = -(vatCode_1[0].rate);
                                    }
                                    code.rate = code.rate + vatCode_1[0].rate;
                                    isAvailable_1 = true;
                                }
                            }
                        });
                        if (!isAvailable_1) {
                            vatCodeAvailable = vatCodeAvailable.filter(function (code) { return code.vatCode !== vatCode_1[0].vatCode; });
                            if (rowNode.data.costDirection === costDirectionPay) {
                                vatCode_1[0].rate = -(vatCode_1[0].rate);
                            }
                            vatCodeAvailable.push(vatCode_1[0]);
                        }
                    }
                }
            }
        });
        this.vatCodeAvailable = vatCodeAvailable.map(function (x) { return (__assign({}, x)); });
        this.updateTotals(totalCR, totalDR);
        this.totalCostAndVatDetails();
    };
    InvoiceCostSelectedCostComponent.prototype.formatQuantityAndTotal = function (input) {
        var formattedInput = new Intl.NumberFormat(this.formatType, { minimumFractionDigits: this.decimalOptionValue }).format(input);
        return formattedInput.toLocaleString();
    };
    InvoiceCostSelectedCostComponent.prototype.calculateTotalForSummary = function (costInvoiceRecord) {
        this.total = costInvoiceRecord.totalVatAmount;
        this.currencyCode = costInvoiceRecord.currencyCode;
    };
    InvoiceCostSelectedCostComponent.prototype.onVatCodeChange = function (params) {
        if (params.data.costAmountToInvoice) {
            this.calculateTotalOnUpdateGrid();
        }
        this.initializeGridColumns();
    };
    InvoiceCostSelectedCostComponent.prototype.requiredCell = function (params) {
        if (params.data && params.context.gridEditable) {
            if (!params.value || params.value === '') {
                return '<div class=\'cost-cell-value-required\'>Required*</div>';
            }
        }
        return params.value;
    };
    InvoiceCostSelectedCostComponent.prototype.requiredCellForCostAmount = function (params) {
        if (params.data && params.context.gridEditable) {
            if (!params.value || params.value === '') {
                return '<div class=\'cost-cell-value-required\'>Required*</div>';
            }
        }
        params.value = (this.decimalFormatter(params.value, this.decimalOptionValue, this.formatType));
        return params.value;
    };
    InvoiceCostSelectedCostComponent.prototype.decimalFormatter = function (input, decimaloption, format) {
        var formattedInput = new Intl.NumberFormat(format, { minimumFractionDigits: 2, maximumFractionDigits: decimaloption }).format(input);
        return formattedInput.toLocaleString();
    };
    InvoiceCostSelectedCostComponent.prototype.narrativeMaxLength = function (params) {
        if (params.data && params.value) {
            if (params.value.length > 30) {
                this.narrativeLength.emit(true);
                this.snackbar.informationSnackBar('Narrative length should be less than 30');
                return { color: 'red' };
            }
            else {
                this.narrativeLength.emit(false);
                return { color: 'black' };
            }
        }
        return params.value;
    };
    InvoiceCostSelectedCostComponent.prototype.validate = function () {
        var isValid = true;
        if (this.isAddRow) {
            this.gridApi.forEachNode(function (rowData) {
                if (!(rowData.data.costTypeCode && rowData.data.costDirection && rowData.data.vatCode
                    && rowData.data.costAmountToInvoice)) {
                    isValid = false;
                }
            });
        }
        return isValid;
    };
    InvoiceCostSelectedCostComponent.prototype.onCostVatCodeSelected = function () {
        var vat = this.costVatCodeCtrl.value;
        var changedVatCode = [];
        this.gridApi.forEachNode(function (rowNode) {
            if (rowNode.data) {
                var data = rowNode.data;
                data.vatCode = vat;
                changedVatCode.push(data);
            }
        });
        this.gridApi.updateRowData({ update: changedVatCode });
        this.calculateTotalOnUpdateGrid();
    };
    InvoiceCostSelectedCostComponent.prototype.populateEntity = function (entity) {
        var selectedInvoiceCosts = entity;
        selectedInvoiceCosts.currency = this.currencyCodeSelected;
        selectedInvoiceCosts.totalInvoiceValue = this.total;
        selectedInvoiceCosts.invoiceLines = this.getInvoiceCostLines();
        selectedInvoiceCosts.costDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"][this.totalCostDirection];
        return selectedInvoiceCosts;
    };
    InvoiceCostSelectedCostComponent.prototype.getAllInvoiceCostLines = function () {
        var _this = this;
        var selectedCostRows = [];
        this.gridApi.forEachNode(function (rowData) {
            if (rowData.data) {
                var costInvoiceline = new _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_14__["ContractsToCostInvoice"]();
                costInvoiceline.costId = rowData.data.costId;
                costInvoiceline.sectionId = rowData.data.sectionId;
                costInvoiceline.costAmountToInvoice = rowData.data.costAmountToInvoice;
                costInvoiceline.quantity = rowData.data.quantity;
                costInvoiceline.costTypeCode = rowData.data.costTypeCode;
                costInvoiceline.currencyCode = rowData.data.currencyCode;
                costInvoiceline.invoicePercent = rowData.data.invoicePercent;
                costInvoiceline.vatCode = rowData.data.vatCode;
                costInvoiceline.narrative = rowData.data.narrative;
                costInvoiceline.rateTypeCode = rowData.data.rateTypeCode;
                costInvoiceline.costDirection = rowData.data.costDirection;
                var vatCode = _this.masterData.vats.find(function (vat) { return (vat.vatCode === rowData.data.vatCode); });
                if (vatCode) {
                    costInvoiceline.vatAmount = vatCode.rate / 100 * rowData.data.costAmountToInvoice;
                }
                selectedCostRows.push(costInvoiceline);
            }
        });
        return selectedCostRows;
    };
    InvoiceCostSelectedCostComponent.prototype.getInvoiceCostLines = function () {
        var _this = this;
        var invoiceLines = [];
        this.selectedCostGridRows = this.getAllInvoiceCostLines();
        this.selectedCostGridRows.map(function (data, index) {
            var invoiceLine = new _shared_entities_invoice_line_record_entity__WEBPACK_IMPORTED_MODULE_9__["InvoiceLineRecord"]();
            invoiceLine.costID = data.costId;
            invoiceLine.sectionID = data.sectionId;
            invoiceLine.lineAmount = data.costAmountToInvoice;
            invoiceLine.quantity = data.quantity;
            invoiceLine.costTypeCode = data.costTypeCode;
            invoiceLine.currencyCode = data.currencyCode;
            invoiceLine.vatCode = data.vatCode;
            invoiceLine.invoicePercent = data.invoicePercent;
            invoiceLine.narrative = data.narrative;
            invoiceLine.inPL = _this.inPNL;
            invoiceLine.noAct = _this.noAction;
            var vatCode = _this.masterData.vats.find(function (vat) { return (vat.vatCode === data.vatCode); });
            if (vatCode) {
                invoiceLine.vatAmount = vatCode.rate / 100 * data.costAmountToInvoice;
            }
            invoiceLine.rateTypeId = (!data.costId) ? 1 : _shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_12__["RateTypes"][data.rateTypeCode];
            var selectedCostDirection = _this.costDirections.find(function (e) { return e.costDirection === data.costDirection; });
            invoiceLine.costDirectionId = selectedCostDirection.costDirectionId;
            invoiceLines.push(invoiceLine);
        });
        return invoiceLines;
    };
    /* Code for home grid to summary redirection */
    InvoiceCostSelectedCostComponent.prototype.contractToBeSelectedFromGrid = function (summaryRecord) {
        if (summaryRecord) {
            this.selectedCostGridRows = this.getCostContractsForSummaryFromGrid(summaryRecord.summaryLines, summaryRecord.currency);
            this.initializeGridColumnsFromSummary();
            this.calculateTotalForSummaryFromGrid(summaryRecord);
        }
    };
    InvoiceCostSelectedCostComponent.prototype.calculateTotalForSummaryFromGrid = function (summaryRecord) {
        var _this = this;
        this.total = 0;
        var contracts = summaryRecord.summaryLines;
        var costDirectionId;
        var totalCR = 0;
        var totalDR = 0;
        contracts.forEach(function (contract) {
            costDirectionId = _this.getCostDirectionIdFromCode(contract.costDirection);
            if (costDirectionId === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"].Payable) {
                totalCR = totalCR + contract.lineAmount;
            }
            else {
                totalDR = totalDR + contract.lineAmount;
            }
        });
        if (contracts.length > 0) {
            this.currencyCodeSelected = summaryRecord.currency;
        }
        this.updateTotals(totalCR, totalDR);
    };
    InvoiceCostSelectedCostComponent.prototype.initializeGridColumnsFromSummary = function () {
        this.selectedCostGridColumns = [
            {
                headerName: 'Cost Type',
                field: 'costTypeCode',
                colId: 'costTypeCode',
                hide: false,
            },
            {
                headerName: 'Cost Amount',
                field: 'costAmountToInvoice',
                colId: 'costAmountToInvoice',
                hide: false,
            },
            {
                headerName: 'Contract Commodity',
                field: 'principalCommodity',
                colId: 'principalCommodity',
                hide: false,
            },
            {
                headerName: 'Quantity',
                field: 'quantity',
                colId: 'quantity',
                hide: false,
            },
            {
                headerName: 'Price',
                field: 'rate',
                colId: 'rate',
                hide: true,
            },
            {
                headerName: '% Invoiced',
                field: 'invoicePercent',
                colId: 'invoicePercent',
                hide: false,
            },
            {
                headerName: 'Pay/Rec',
                field: 'costDirection',
                colId: 'costDirection',
                hide: false,
            },
            {
                headerName: 'Currency',
                field: 'currencyCode',
                colId: 'currencyCode',
                hide: false,
            },
            {
                headerName: 'VAT Code',
                field: 'vatCode',
                colId: 'vatCode',
                hide: false,
            },
        ];
    };
    InvoiceCostSelectedCostComponent.prototype.getCostContractsForSummaryFromGrid = function (summaryLines, currency) {
        var contracts = [];
        summaryLines.map(function (record) {
            if (record.costId > 0) {
                var contract = new _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_14__["ContractsToCostInvoice"]();
                contract.costTypeCode = record.costTypeCode;
                contract.principalCommodity = record.principalCommodity;
                contract.rate = record.price;
                contract.currencyCode = currency;
                contract.quantity = record.quantity.toString();
                contract.weightCode = record.weightCode;
                contract.costAmountToInvoice = record.lineAmount;
                contract.costDirection = record.costDirection;
                contract.vatCode = record.vatCode;
                contract.invoicePercent = record.invoicePercent;
                contracts.push(contract);
            }
        });
        return contracts;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], InvoiceCostSelectedCostComponent.prototype, "totalCostAndVatCode", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Object)
    ], InvoiceCostSelectedCostComponent.prototype, "invoiceSetupData", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], InvoiceCostSelectedCostComponent.prototype, "narrativeLength", void 0);
    InvoiceCostSelectedCostComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-invoice-cost-selected-cost',
            template: __webpack_require__(/*! ./invoice-cost-selected-cost.component.html */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/selected-cost/invoice-cost-selected-cost.component.html"),
            styles: [__webpack_require__(/*! ./invoice-cost-selected-cost.component.scss */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/selected-cost/invoice-cost-selected-cost.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_15__["FormConfigurationProviderService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_17__["UiService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_16__["SnackbarService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_13__["AgGridService"]])
    ], InvoiceCostSelectedCostComponent);
    return InvoiceCostSelectedCostComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_6__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/selection/cost-invoice-selection.component.html":
/*!***********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/selection/cost-invoice-selection.component.html ***!
  \***********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-title>Invoice Selection</mat-card-title>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <mat-form-field fxFlex=\"49\"\r\n                            class=\"margin-bottom\">\r\n                <input matInput\r\n                       [matDatepicker]=\"costInvoiceDatePicker\"\r\n                       placeholder=\"Invoice date\"\r\n                       [matTooltip]=\"'Invoice date'\"\r\n                       [formControl]='costInvoiceDateCtrl'\r\n                       autocomplete=\"off\"\r\n                       (dateChange)='onCostInvoiceDateSelected()'>\r\n                <mat-hint style=\"color:orange\"\r\n                          *ngIf=\"isDateAfterValid\">Invoice Date is in Future</mat-hint>\r\n                <mat-datepicker-toggle matSuffix\r\n                                       [for]=\"costInvoiceDatePicker\"></mat-datepicker-toggle>\r\n                <mat-datepicker #costInvoiceDatePicker></mat-datepicker>\r\n                <mat-error *ngIf=\"costInvoiceDateCtrl.hasError('isDateBeforeValid')\">\r\n                    Invoice Date can be equal to or after the contract date\r\n                </mat-error>\r\n            </mat-form-field>\r\n            <mat-form-field fxFlex=\"70%\"\r\n                            class=\"mat-read-only-field\">\r\n                <input matInput\r\n                       placeholder=\"Counterparty\"\r\n                       [matTooltip]=\"'Counterparty'\"\r\n                       [formControl]=\"counterpartyCtrl\"\r\n                       autocomplete=\"off\"\r\n                       (userSupplier)=\"onUserSupplierValueChanged($event)\"\r\n                       readonly>\r\n            </mat-form-field>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\">\r\n            <mat-form-field fxFlex=\"49\"\r\n                            class=\"mat-read-only-field\">\r\n                <input matInput\r\n                       placeholder=\"Invoice Type\"\r\n                       [formControl]='costInvoiceTypeCtrl'\r\n                       autocomplete=\"off\"\r\n                       readonly>\r\n            </mat-form-field>\r\n        </div>\r\n\r\n        <mat-divider class=\"mat-divider-cost\"></mat-divider>\r\n        <div class=\"toggle-cost\"\r\n             fxLayoutAlign=\"left start\">\r\n            <mat-slide-toggle [checked]=\"true\"\r\n                              [formControl]=\"authorizePostingCtrl\">Authorize for posting</mat-slide-toggle>\r\n        </div>\r\n    </mat-card-content>\r\n\r\n\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/selection/cost-invoice-selection.component.scss":
/*!***********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/selection/cost-invoice-selection.component.scss ***!
  \***********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".mat-divider-cost {\n  margin-top: 2%; }\n\n.toggle-cost {\n  margin-top: 5.7%; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/selection/cost-invoice-selection.component.ts":
/*!*********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/selection/cost-invoice-selection.component.ts ***!
  \*********************************************************************************************************************************************/
/*! exports provided: CostInvoiceSelectionComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CostInvoiceSelectionComponent", function() { return CostInvoiceSelectionComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/validators/date-validators.validator */ "./Client/app/shared/validators/date-validators.validator.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var moment = moment__WEBPACK_IMPORTED_MODULE_3__;
var CostInvoiceSelectionComponent = /** @class */ (function (_super) {
    __extends(CostInvoiceSelectionComponent, _super);
    function CostInvoiceSelectionComponent(route, formBuilder, companyManager, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.companyManager = companyManager;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.invoiceDateSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.costInvoiceDateCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('CostInvoiceDateCtrl');
        _this.counterpartyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('CounterParty');
        _this.costInvoiceTypeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('InvoiceType');
        _this.authorizePostingCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('AuthorizeForPosting');
        _this.masterdata = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_7__["MasterData"]();
        _this.costInvoiceTypeName = 'Cost';
        _this.invoiceDate = _this.companyManager.getCurrentCompanyDate().toDate();
        return _this;
    }
    CostInvoiceSelectionComponent.prototype.ngOnInit = function () {
        this.costInvoiceDateCtrl.setValue(this.companyManager.getCurrentCompanyDate().toDate());
        this.invoiceDateSelected.emit(this.costInvoiceDateCtrl.value);
        this.masterdata = this.route.snapshot.data.masterdata;
        this.getData();
    };
    CostInvoiceSelectionComponent.prototype.getData = function () {
        this.costInvoiceTypeCtrl.patchValue(this.costInvoiceTypeName);
    };
    CostInvoiceSelectionComponent.prototype.setDefaultAuthorizeForPosting = function (defaultAuthorizeForPosting) {
        this.authorizePostingCtrl.setValue(defaultAuthorizeForPosting);
    };
    CostInvoiceSelectionComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            costInvoiceDateCtrl: this.costInvoiceDateCtrl,
            counterpartyCtrl: this.counterpartyCtrl,
            costInvoiceTypeCtrl: this.costInvoiceTypeCtrl,
            authorizePostingCtrl: this.authorizePostingCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    CostInvoiceSelectionComponent.prototype.contractToBeSelected = function (costContracts) {
        this.setInvoiceDate(costContracts);
    };
    CostInvoiceSelectionComponent.prototype.setInvoiceDate = function (costContracts) {
        this.dates = Array.from(costContracts, function (contracts) { return contracts.contractDate; });
        var moments = this.dates.map(function (date) { return moment(date); }), maxDate = moment.max(moments);
        this.maxDate = maxDate;
    };
    CostInvoiceSelectionComponent.prototype.onCostInvoiceDateSelected = function () {
        this.invoiceDate = new Date(this.costInvoiceDateCtrl.value);
        this.costInvoiceDateCtrl.clearValidators();
        this.isDateAfterValid = false;
        this.invoiceFutureValidation(this.invoiceDate);
        this.costInvoiceDateCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([Object(_shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_9__["invoiceDateValidation"])(this.invoiceDate, this.maxDate)]));
        this.costInvoiceDateCtrl.updateValueAndValidity();
        this.invoiceDateSelected.emit(this.invoiceDate);
    };
    CostInvoiceSelectionComponent.prototype.invoiceFutureValidation = function (invoiceDate) {
        var invoiceMoment = moment(invoiceDate);
        if (invoiceMoment.isAfter(this.companyManager.getCurrentCompanyDate())) {
            this.isDateAfterValid = true;
        }
    };
    CostInvoiceSelectionComponent.prototype.populateEntity = function (entity) {
        var invoiceSelection = entity;
        invoiceSelection.invoiceDate = this.costInvoiceDateCtrl.value;
        invoiceSelection.authorizedForPosting = this.authorizePostingCtrl.value;
        return invoiceSelection;
    };
    CostInvoiceSelectionComponent.prototype.onUserSupplierValueChanged = function (userSupplier) {
        var selectedCounterparty = this.masterdata.counterparties.find(function (counterparty) { return counterparty.counterpartyCode === userSupplier; });
        if (selectedCounterparty) {
            var cpDescription = selectedCounterparty.description;
            var cpSelected = userSupplier.concat('|').concat(cpDescription);
            this.counterpartyCtrl.setValue(cpSelected);
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CostInvoiceSelectionComponent.prototype, "invoiceDateSelected", void 0);
    CostInvoiceSelectionComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-cost-invoice-selection',
            template: __webpack_require__(/*! ./cost-invoice-selection.component.html */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/selection/cost-invoice-selection.component.html"),
            styles: [__webpack_require__(/*! ./cost-invoice-selection.component.scss */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/selection/cost-invoice-selection.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__["CompanyManagerService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationProviderService"]])
    ], CostInvoiceSelectionComponent);
    return CostInvoiceSelectionComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/taxes/invoicing-cost-taxes.component.html":
/*!*****************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/taxes/invoicing-cost-taxes.component.html ***!
  \*****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <h2 class=\"atlas-grid-card-title\">\r\n        Taxes\r\n    </h2>\r\n    <mat-card-content>\r\n        <ag-grid-angular style=\" height:100%;\"\r\n                         class=\"ag-theme-material\"\r\n                         [rowData]=\"taxesGridRows\"\r\n                         [columnDefs]=\"taxesGridColumns\"\r\n                         domLayout=\"autoHeight\"\r\n                         (gridReady)=\"onGridReady($event)\"\r\n                         [pagination]=\"false\"\r\n                         [paginationPageSize]=\"10\"\r\n                         [enableSorting]=\"true\"\r\n                         [enableColResize]=\"true\"\r\n                         enableFilter\r\n                         [rowHeight]=atlasAgGridParam.rowHeight>\r\n        </ag-grid-angular>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"end center\">\r\n            <mat-card-subtitle class=\"total-figure\">\r\n                Total Tax Amount:\r\n                <span class=\"total-figure-value\">\r\n                    {{taxCostDirectionSign}}{{formatQuantityAndTotal(this.taxTotal)}} {{currencyCode}}\r\n                </span>\r\n            </mat-card-subtitle>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/taxes/invoicing-cost-taxes.component.scss":
/*!*****************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/taxes/invoicing-cost-taxes.component.scss ***!
  \*****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".ag-theme-material {\n  margin-bottom: 20px; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/taxes/invoicing-cost-taxes.component.ts":
/*!***************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/taxes/invoicing-cost-taxes.component.ts ***!
  \***************************************************************************************************************************************/
/*! exports provided: InvoicingCostTaxesComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InvoicingCostTaxesComponent", function() { return InvoicingCostTaxesComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-sign.enum */ "./Client/app/shared/enums/cost-sign.enum.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/services/execution/dtos/contracts-to-cost-invoice */ "./Client/app/shared/services/execution/dtos/contracts-to-cost-invoice.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var InvoicingCostTaxesComponent = /** @class */ (function (_super) {
    __extends(InvoicingCostTaxesComponent, _super);
    function InvoicingCostTaxesComponent(formConfigurationProvider, route, uiService, gridService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.route = route;
        _this.uiService = uiService;
        _this.gridService = gridService;
        _this.totalCostTaxCalculated = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.taxesGridOptions = {};
        _this.isGroupingEnabled = false;
        _this.costDirectionDisplay = '';
        _this.debit = 'Dr';
        _this.credit = 'Cr';
        _this.masterdata = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_3__["MasterData"]();
        _this.costDirectionPay = 'Pay';
        _this.costTotal = 0;
        _this.total = 0;
        _this.taxTotal = 0;
        _this.currencyCode = '';
        _this.pricingOptionValue = 0;
        _this.decimalOptionValue = 2;
        _this.formatType = 'en-US';
        _this.taxCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_5__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"].Payable];
        _this.atlasAgGridParam = _this.gridService.getAgGridParam();
        return _this;
    }
    InvoicingCostTaxesComponent.prototype.ngOnInit = function () {
        this.initializeGridColumns();
        this.masterdata = this.route.snapshot.data.masterdata;
    };
    InvoicingCostTaxesComponent.prototype.onGridReady = function (params) {
        var _this = this;
        params.columnDefs = this.taxesGridColumns;
        this.taxesGridOptions = params;
        this.gridColumnApi = params.columnApi;
        this.gridColumnApi.autoSizeAllColumns();
        window.onresize = function () {
            _this.gridColumnApi.autoSizeAllColumns();
        };
    };
    InvoicingCostTaxesComponent.prototype.initializeGridColumns = function () {
        this.taxesGridColumns = [
            {
                headerName: 'VAT Code',
                field: 'vatCode',
                colId: 'vatCode',
                hide: false,
            },
            {
                headerName: 'Description',
                field: 'vatDescription',
                colId: 'vatDescription',
                hide: false,
            },
            {
                headerName: 'VAT Amount',
                field: 'rate',
                colId: 'rate',
                type: 'numericColumn',
                hide: false,
                valueFormatter: this.vatAmountFormatter.bind(this),
            },
        ];
    };
    InvoicingCostTaxesComponent.prototype.vatAmountFormatter = function (param) {
        return Math.abs(param.value);
    };
    InvoicingCostTaxesComponent.prototype.taxRecordsSelected = function (taxesRecord) {
        if (taxesRecord.length > 0) {
            this.initializeGridColumns();
            this.taxesGridRows = taxesRecord;
            this.calculateTotalAmount(taxesRecord);
        }
    };
    InvoicingCostTaxesComponent.prototype.setDirectionAndCurrency = function (data) {
        this.costDirectionDisplay = data.costDirection;
        this.currencyCode = data.currencyCode;
    };
    InvoicingCostTaxesComponent.prototype.calculateTotalAmount = function (taxes) {
        var _this = this;
        this.total = 0;
        this.taxTotal = 0;
        taxes.forEach(function (tax) {
            _this.taxTotal = _this.taxTotal + Math.abs(tax.rate);
        });
        if (this.costTotal) {
            this.total = (this.costDirectionDisplay === this.credit) ? this.taxTotal + this.costTotal : this.costTotal - this.taxTotal;
        }
        this.totalCostTaxCalculated.emit({
            amount: this.total,
            decimalOption: this.decimalOptionValue,
            currencyCode: this.currencyCode,
            costDirection: this.costDirectionDisplay,
        });
    };
    InvoicingCostTaxesComponent.prototype.formatQuantityAndTotal = function (input) {
        var formattedInput = new Intl.NumberFormat(this.formatType, { minimumFractionDigits: this.decimalOptionValue }).format(input);
        return formattedInput.toLocaleString();
    };
    InvoicingCostTaxesComponent.prototype.calculateTotalForSummary = function (costInvoiceRecord) {
        this.total = costInvoiceRecord.totalVatAmount;
        this.currencyCode = costInvoiceRecord.currencyCode;
    };
    InvoicingCostTaxesComponent.prototype.getTaxesForSelectedVat = function (model) {
        if (model) {
            this.costTotal = model.rate;
            this.decimalOptionValue = model.decimalOption;
            this.currencyCode = model.currencyCode;
            this.totalCostDirection = model.costDirection;
            if (model.costDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"].Payable]) {
                this.costDirectionDisplay = this.credit;
            }
            else if (model.costDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"].Receivable]) {
                this.costDirectionDisplay = this.debit;
            }
            this.taxRecordsSelected(model.vatAvailable);
        }
    };
    /* redirection from invoice home grid*/
    InvoicingCostTaxesComponent.prototype.setDataForTaxCostGrid = function (summaryRecord) {
        if (summaryRecord) {
            this.getCostContractsForSummary(summaryRecord.summaryLines);
            this.currencyCode = summaryRecord.currency;
        }
    };
    InvoicingCostTaxesComponent.prototype.getCostContractsForSummary = function (summaryLines) {
        var contracts = [];
        summaryLines.map(function (record) {
            if (record.costId) {
                var contract = new _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_7__["ContractsToCostInvoice"]();
                contract.costTypeCode = record.costTypeCode;
                contract.principalCommodity = record.principalCommodity;
                contract.rate = record.price;
                contract.quantity = record.quantity.toString();
                contract.weightCode = record.weightCode;
                contract.costAmountToInvoice = record.lineAmount;
                contract.costDirection = record.costDirection;
                contract.vatCode = record.vatCode;
                contract.invoicePercent = record.invoicePercent;
                contracts.push(contract);
            }
        });
        this.calculateTotalAmountAndGetVatCode(contracts);
    };
    InvoicingCostTaxesComponent.prototype.calculateTotalAmountAndGetVatCode = function (contracts) {
        var _this = this;
        var vatMasterData = this.masterdata.vats;
        var vatCodeAvailable = [];
        contracts.forEach(function (contract) {
            var vatCode = [];
            vatCode = vatMasterData
                .filter(function (vat) { return (vat.vatCode === contract.vatCode); }).map(function (x) { return (__assign({}, x)); });
            if (vatCode.length > 0) {
                vatCode.map(function (code) {
                    return code.rate = code.rate / 100 * contract.costAmountToInvoice;
                });
                if (vatCodeAvailable.length === 0) {
                    if (contract.costDirection === _this.costDirectionPay) {
                        vatCode[0].rate = -(vatCode[0].rate);
                    }
                    vatCodeAvailable.push(vatCode[0]);
                }
                else {
                    var isAvailable_1 = false;
                    vatCodeAvailable.map(function (code) {
                        if (code.vatCode === vatCode[0].vatCode) {
                            if (vatCodeAvailable.filter(function (selectedVatCode) { return selectedVatCode.vatCode === vatCode[0].vatCode; })) {
                                if (contract.costDirection === _this.costDirectionPay) {
                                    vatCode[0].rate = -(vatCode[0].rate);
                                }
                                code.rate = code.rate + vatCode[0].rate;
                                isAvailable_1 = true;
                            }
                        }
                    });
                    if (!isAvailable_1) {
                        vatCodeAvailable = vatCodeAvailable.filter(function (code) { return code.vatCode !== vatCode[0].vatCode; });
                        if (contract.costDirection === _this.costDirectionPay) {
                            vatCode[0].rate = -(vatCode[0].rate);
                        }
                        vatCodeAvailable.push(vatCode[0]);
                    }
                }
            }
        });
        this.vatCodeAvailable = vatCodeAvailable.map(function (x) { return (__assign({}, x)); });
        this.taxesGridRows = this.vatCodeAvailable;
        this.initializeGridColumns();
        this.calculateTotalTaxForSummary(this.vatCodeAvailable);
    };
    InvoicingCostTaxesComponent.prototype.calculateTotalTaxForSummary = function (taxes) {
        var _this = this;
        this.taxTotal = 0;
        taxes.forEach(function (tax) {
            _this.taxTotal = _this.taxTotal + Math.abs(tax.rate);
        });
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], InvoicingCostTaxesComponent.prototype, "totalCostTaxCalculated", void 0);
    InvoicingCostTaxesComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-invoicing-cost-taxes',
            template: __webpack_require__(/*! ./invoicing-cost-taxes.component.html */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/taxes/invoicing-cost-taxes.component.html"),
            styles: [__webpack_require__(/*! ./invoicing-cost-taxes.component.scss */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/taxes/invoicing-cost-taxes.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationProviderService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_9__["UiService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_6__["AgGridService"]])
    ], InvoicingCostTaxesComponent);
    return InvoicingCostTaxesComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/cost-working-page.component.html":
/*!*********************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-working-page/cost-working-page.component.html ***!
  \*********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div fxLayout=\"column\">\r\n    <div fxLayout=\"row\"\r\n         fxLayoutGap=\"2%\">\r\n        <atlas-cost-invoice-selection #costInvoiceSelectionComponent\r\n                                      fxFlex=\"49%\"\r\n                                      (invoiceDateSelected)=\"onInvoiceDateSelected($event)\">\r\n\r\n        </atlas-cost-invoice-selection>\r\n        <atlas-cost-document-template #costDocumentTemplateComponent\r\n                                      fxFlex=\"49%\"\r\n                                      (templateSelected)=\"onDocumentTemplateSelected($event)\">\r\n\r\n        </atlas-cost-document-template>\r\n    </div>\r\n    <atlas-invoice-cost-selected-cost (totalCostAndVatCode)=\"onChangeCostContract($event)\"\r\n                                      (narrativeLength)=\"onNarrativeValueChange($event)\"\r\n                                      #invoiceCostSelectedCostComponent>\r\n    </atlas-invoice-cost-selected-cost>\r\n    <atlas-invoicing-cost-taxes (totalCostTaxCalculated)=\"onTotalCostTaxCalculated($event)\"\r\n                                #invoicingCostTaxesComponent></atlas-invoicing-cost-taxes>\r\n    <div class=\"payment-total-amount-section\"\r\n         fxLayout=\"row\"\r\n         fxLayoutGap=\"2%\">\r\n        <atlas-cost-payments #costPaymentsComponent\r\n                             fxFlex=\"50%\"></atlas-cost-payments>\r\n        <atlas-total-amount #totalAmountComponent\r\n                            fxFlex=\"50%\"></atlas-total-amount>\r\n\r\n    </div>\r\n</div>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/cost-working-page.component.scss":
/*!*********************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-working-page/cost-working-page.component.scss ***!
  \*********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/cost-working-page.component.ts":
/*!*******************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/cost-working-page/cost-working-page.component.ts ***!
  \*******************************************************************************************************************/
/*! exports provided: CostWorkingPageComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CostWorkingPageComponent", function() { return CostWorkingPageComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/enums/cost-direction-type.enum */ "./Client/app/shared/enums/cost-direction-type.enum.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/enums/cost-sign.enum */ "./Client/app/shared/enums/cost-sign.enum.ts");
/* harmony import */ var _shared_enums_invoice_payment_type__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/enums/invoice-payment-type */ "./Client/app/shared/enums/invoice-payment-type.ts");
/* harmony import */ var _shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/enums/invoice-source-type.enum */ "./Client/app/shared/enums/invoice-source-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _dialog_boxes_bank_account_dialog_bank_account_dialog_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../dialog-boxes/bank-account-dialog/bank-account-dialog.component */ "./Client/app/execution/execution-invoicing/dialog-boxes/bank-account-dialog/bank-account-dialog.component.ts");
/* harmony import */ var _total_amount_total_amount_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../total-amount/total-amount.component */ "./Client/app/execution/execution-invoicing/total-amount/total-amount.component.ts");
/* harmony import */ var _cost_selection_components_cost_invoicee_options_cost_invoicee_options_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../cost-selection/components/cost-invoicee-options/cost-invoicee-options.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/cost-invoicee-options/cost-invoicee-options.component.ts");
/* harmony import */ var _components_document_template_cost_document_template_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./components/document-template/cost-document-template.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/document-template/cost-document-template.component.ts");
/* harmony import */ var _components_payments_cost_payments_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./components/payments/cost-payments.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/payments/cost-payments.component.ts");
/* harmony import */ var _components_selected_cost_invoice_cost_selected_cost_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./components/selected-cost/invoice-cost-selected-cost.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/selected-cost/invoice-cost-selected-cost.component.ts");
/* harmony import */ var _components_selection_cost_invoice_selection_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./components/selection/cost-invoice-selection.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/selection/cost-invoice-selection.component.ts");
/* harmony import */ var _components_taxes_invoicing_cost_taxes_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./components/taxes/invoicing-cost-taxes.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/taxes/invoicing-cost-taxes.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

















var CostWorkingPageComponent = /** @class */ (function (_super) {
    __extends(CostWorkingPageComponent, _super);
    function CostWorkingPageComponent(formBuilder, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.formComponents = [];
        _this.totalCostAndVatCode = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.totalCostTaxCalculated = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.documentTemplateSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.narrativeLength = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.decimalOption = 2;
        _this.isSave = false;
        return _this;
    }
    CostWorkingPageComponent.prototype.ngOnInit = function () {
        this.invoiceCostWorkingFormGroup = this.formBuilder.group({
            costDocumentTemplateComponent: this.costDocumentTemplateComponent.getFormGroup(),
            costInvoiceSelectionComponent: this.costInvoiceSelectionComponent.getFormGroup(),
            costPaymentsComponent: this.costPaymentsComponent.getFormGroup(),
            totalAmountComponent: this.totalAmountComponent.getFormGroup(),
        });
        this.formComponents.push(this.costDocumentTemplateComponent, this.costInvoiceSelectionComponent, this.costPaymentsComponent, this.invoiceCostSelectedCostComponent, this.totalAmountComponent);
    };
    CostWorkingPageComponent.prototype.onSupplierSelected = function (supplier) {
        this.costInvoiceeOptionsComponent.onSupplierSelected(supplier);
    };
    CostWorkingPageComponent.prototype.onChangeCostContract = function (model) {
        this.invoicingCostTaxesComponent.getTaxesForSelectedVat(model);
    };
    CostWorkingPageComponent.prototype.onNarrativeValueChange = function (maxLength) {
        this.narrativeLength.emit(maxLength);
    };
    CostWorkingPageComponent.prototype.onTotalCostTaxCalculated = function (model) {
        this.totalData = model;
        this.totalAmountComponent.amount = model.amount;
        this.totalAmountComponent.decimalOption = model.decimalOption;
        this.totalAmountComponent.currencyCode = model.currencyCode;
        this.totalAmountComponent.totalCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_5__["CostSigns"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirectionType"][model.costDirection]];
        this.totalAmountComponent.invoiceLabel = _shared_enums_invoice_payment_type__WEBPACK_IMPORTED_MODULE_6__["InvoicePaymentType"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirectionType"][model.costDirection]];
        if (this.invoicingCostTaxesComponent.totalCostDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"].Payable]) {
            this.costDocumentTemplateComponent.invoiceExtInHouseCtrl.patchValue((_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceSourceType"][_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceSourceType"].External]));
        }
        else {
            this.costDocumentTemplateComponent.invoiceExtInHouseCtrl.patchValue((_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceSourceType"][_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceSourceType"].Inhouse]));
        }
    };
    CostWorkingPageComponent.prototype.onDocumentTemplateSelected = function (event) {
        this.documentTemplateSelected.emit(event);
    };
    CostWorkingPageComponent.prototype.populateEntity = function (model) {
        this.formComponents.forEach(function (comp) {
            comp.populateEntity(model);
        });
        return model;
    };
    CostWorkingPageComponent.prototype.validateCostGrid = function () {
        //  calling the costgrid component to set the required field validation
        return this.invoiceCostSelectedCostComponent.validate();
    };
    CostWorkingPageComponent.prototype.onInvoiceDateSelected = function (invoiceDate) {
        this.costPaymentsComponent.setinvoiceDateSelected(invoiceDate);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('costDocumentTemplateComponent'),
        __metadata("design:type", _components_document_template_cost_document_template_component__WEBPACK_IMPORTED_MODULE_12__["CostDocumentTemplateComponent"])
    ], CostWorkingPageComponent.prototype, "costDocumentTemplateComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('costInvoiceSelectionComponent'),
        __metadata("design:type", _components_selection_cost_invoice_selection_component__WEBPACK_IMPORTED_MODULE_15__["CostInvoiceSelectionComponent"])
    ], CostWorkingPageComponent.prototype, "costInvoiceSelectionComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('invoiceCostSelectedCostComponent'),
        __metadata("design:type", _components_selected_cost_invoice_cost_selected_cost_component__WEBPACK_IMPORTED_MODULE_14__["InvoiceCostSelectedCostComponent"])
    ], CostWorkingPageComponent.prototype, "invoiceCostSelectedCostComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('invoicingCostTaxesComponent'),
        __metadata("design:type", _components_taxes_invoicing_cost_taxes_component__WEBPACK_IMPORTED_MODULE_16__["InvoicingCostTaxesComponent"])
    ], CostWorkingPageComponent.prototype, "invoicingCostTaxesComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('costPaymentsComponent'),
        __metadata("design:type", _components_payments_cost_payments_component__WEBPACK_IMPORTED_MODULE_13__["CostPaymentsComponent"])
    ], CostWorkingPageComponent.prototype, "costPaymentsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('costInvoiceeOptionsComponent'),
        __metadata("design:type", _cost_selection_components_cost_invoicee_options_cost_invoicee_options_component__WEBPACK_IMPORTED_MODULE_11__["CostInvoiceeOptionsComponent"])
    ], CostWorkingPageComponent.prototype, "costInvoiceeOptionsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('totalAmountComponent'),
        __metadata("design:type", _total_amount_total_amount_component__WEBPACK_IMPORTED_MODULE_10__["TotalAmountComponent"])
    ], CostWorkingPageComponent.prototype, "totalAmountComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('bankAccountDialogComponent'),
        __metadata("design:type", _dialog_boxes_bank_account_dialog_bank_account_dialog_component__WEBPACK_IMPORTED_MODULE_9__["BankAccountDialogComponent"])
    ], CostWorkingPageComponent.prototype, "bankAccountDialogComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CostWorkingPageComponent.prototype, "totalCostAndVatCode", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CostWorkingPageComponent.prototype, "totalCostTaxCalculated", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CostWorkingPageComponent.prototype, "documentTemplateSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CostWorkingPageComponent.prototype, "narrativeLength", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Object)
    ], CostWorkingPageComponent.prototype, "invoiceSetupData", void 0);
    CostWorkingPageComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-cost-working-page',
            template: __webpack_require__(/*! ./cost-working-page.component.html */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/cost-working-page.component.html"),
            styles: [__webpack_require__(/*! ./cost-working-page.component.scss */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/cost-working-page.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationProviderService"]])
    ], CostWorkingPageComponent);
    return CostWorkingPageComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/summary/cost-summary.component.html":
/*!******************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/summary/cost-summary.component.html ***!
  \******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<atlas-execution-invoicing-summary-header #summaryHeaderComponent></atlas-execution-invoicing-summary-header>\r\n\r\n<div>\r\n    <atlas-invoice-cost-selected-cost #invoiceCostSelectedCostComponent></atlas-invoice-cost-selected-cost>\r\n    <atlas-invoicing-cost-taxes #invoicingCostTaxesComponent></atlas-invoicing-cost-taxes>\r\n\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"start\"\r\n         fxLayoutAlign.lt-md=\"space-around center\"\r\n         fxLayoutGap=\"16px\"\r\n         class=\"payment-total-amount-section\">\r\n\r\n        <atlas-cost-payments #costPaymentsComponent\r\n                             fxFlex=\"50%\"\r\n                             fxFlex.lt-md=\"92\"></atlas-cost-payments>\r\n        <atlas-total-amount #totalAmountComponent\r\n                            fxFlex=\"50%\"\r\n                            fxFlex.lt-md=\"92\"></atlas-total-amount>\r\n    </div>\r\n</div>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/summary/cost-summary.component.scss":
/*!******************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/summary/cost-summary.component.scss ***!
  \******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/components/summary/cost-summary.component.ts":
/*!****************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/components/summary/cost-summary.component.ts ***!
  \****************************************************************************************************/
/*! exports provided: CostSummaryComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CostSummaryComponent", function() { return CostSummaryComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_services_execution_dtos_tax_record__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/services/execution/dtos/tax-record */ "./Client/app/shared/services/execution/dtos/tax-record.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _header_header_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../header/header.component */ "./Client/app/execution/execution-invoicing/header/header.component.ts");
/* harmony import */ var _total_amount_total_amount_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../total-amount/total-amount.component */ "./Client/app/execution/execution-invoicing/total-amount/total-amount.component.ts");
/* harmony import */ var _cost_working_page_components_payments_cost_payments_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../cost-working-page/components/payments/cost-payments.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/payments/cost-payments.component.ts");
/* harmony import */ var _cost_working_page_components_selected_cost_invoice_cost_selected_cost_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../cost-working-page/components/selected-cost/invoice-cost-selected-cost.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/selected-cost/invoice-cost-selected-cost.component.ts");
/* harmony import */ var _cost_working_page_components_taxes_invoicing_cost_taxes_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../cost-working-page/components/taxes/invoicing-cost-taxes.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/taxes/invoicing-cost-taxes.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var CostSummaryComponent = /** @class */ (function (_super) {
    __extends(CostSummaryComponent, _super);
    function CostSummaryComponent(formBuilder, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.formComponents = [];
        _this.decimalOptionValue = 0;
        _this.pricingOptionValue = 0;
        _this.defaultDecimalOption = 2;
        _this.contractType = 'Contract';
        return _this;
    }
    CostSummaryComponent.prototype.ngOnInit = function () {
        this.invoiceSummaryFormGroup = this.formBuilder.group({
            costPaymentsComponent: this.costPaymentsComponent.getFormGroup(),
            invoicingCostTaxesComponent: this.invoicingCostTaxesComponent.getFormGroup(),
            invoiceCostSelectedCostComponent: this.invoiceCostSelectedCostComponent.getFormGroup(),
            summaryHeaderComponent: this.summaryHeaderComponent.getFormGroup(),
        });
        this.invoiceSummaryFormGroup.disable();
        this.formComponents.push(this.costPaymentsComponent, this.invoicingCostTaxesComponent, this.invoiceCostSelectedCostComponent, this.summaryHeaderComponent);
        this.invoiceCostSelectedCostComponent.isAddDeleteButtonInvisible = true;
    };
    CostSummaryComponent.prototype.contractToBeSelected = function (contracts) {
        this.contracts = contracts;
    };
    CostSummaryComponent.prototype.setDecimalAndPricingOption = function (decimalOptionValue, pricingOptionValue) {
        this.decimalOptionValue = decimalOptionValue;
        this.pricingOptionValue = pricingOptionValue;
    };
    CostSummaryComponent.prototype.populateInvoiceRecord = function (record) {
        this.contracts = this.invoiceCostContracts;
        this.taxes = this.invoiceTaxContracts;
        this.totalData = this.invoiceTaxTotal;
        this.model = record;
        this.populateSummaryFields();
    };
    CostSummaryComponent.prototype.populateSummaryFields = function () {
        this.invoiceCostSelectedCostComponent.contractToBeSelected(this.contracts);
        this.invoicingCostTaxesComponent.taxRecordsSelected(this.taxes);
        if (this.totalData) {
            this.invoicingCostTaxesComponent.setDirectionAndCurrency(this.totalData);
            this.totalAmountComponent.setTotalAmountForSummary(this.totalData);
        }
        if (this.model) {
            this.costPaymentsComponent.setPaymentFieldsForSummary(this.model);
            this.summaryHeaderComponent.setHeaderFieldsForSummary(this.model, this.filteredCompanyBankAccounts);
        }
    };
    CostSummaryComponent.prototype.populateInvoiceRecordFromGrid = function (record) {
        if (this.contract) {
            this.contract.principalCommodity = record.principalCommodity;
            this.contract.rate = record.price;
            this.contract.quantity = record.quantity;
            this.contracts.push(this.contract);
        }
    };
    CostSummaryComponent.prototype.setSummaryFieldsFromGrid = function (summaryRecord) {
        if (summaryRecord) {
            this.invoiceCostSelectedCostComponent.contractToBeSelectedFromGrid(summaryRecord);
            this.invoicingCostTaxesComponent.setDataForTaxCostGrid(summaryRecord);
            this.costPaymentsComponent.setValuesForSummaryFromGrid(summaryRecord);
            this.totalAmountComponent.setValuesForTotalFromGrid(summaryRecord);
            this.summaryHeaderComponent.setHeaderFieldsFromGrid(summaryRecord);
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('costPaymentsComponent'),
        __metadata("design:type", _cost_working_page_components_payments_cost_payments_component__WEBPACK_IMPORTED_MODULE_7__["CostPaymentsComponent"])
    ], CostSummaryComponent.prototype, "costPaymentsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('invoicingCostTaxesComponent'),
        __metadata("design:type", _cost_working_page_components_taxes_invoicing_cost_taxes_component__WEBPACK_IMPORTED_MODULE_9__["InvoicingCostTaxesComponent"])
    ], CostSummaryComponent.prototype, "invoicingCostTaxesComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('totalAmountComponent'),
        __metadata("design:type", _total_amount_total_amount_component__WEBPACK_IMPORTED_MODULE_6__["TotalAmountComponent"])
    ], CostSummaryComponent.prototype, "totalAmountComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('invoiceCostSelectedCostComponent'),
        __metadata("design:type", _cost_working_page_components_selected_cost_invoice_cost_selected_cost_component__WEBPACK_IMPORTED_MODULE_8__["InvoiceCostSelectedCostComponent"])
    ], CostSummaryComponent.prototype, "invoiceCostSelectedCostComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('summaryHeaderComponent'),
        __metadata("design:type", _header_header_component__WEBPACK_IMPORTED_MODULE_5__["HeaderComponent"])
    ], CostSummaryComponent.prototype, "summaryHeaderComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], CostSummaryComponent.prototype, "invoiceTaxContracts", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _shared_services_execution_dtos_tax_record__WEBPACK_IMPORTED_MODULE_3__["TaxRecord"])
    ], CostSummaryComponent.prototype, "invoiceTaxTotal", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], CostSummaryComponent.prototype, "invoiceCostContracts", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], CostSummaryComponent.prototype, "filteredCompanyBankAccounts", void 0);
    CostSummaryComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-cost-summary',
            template: __webpack_require__(/*! ./cost-summary.component.html */ "./Client/app/execution/execution-invoicing/cost/components/summary/cost-summary.component.html"),
            styles: [__webpack_require__(/*! ./cost-summary.component.scss */ "./Client/app/execution/execution-invoicing/cost/components/summary/cost-summary.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_4__["FormConfigurationProviderService"]])
    ], CostSummaryComponent);
    return CostSummaryComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/cost.component.html":
/*!***************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/cost.component.html ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<form [formGroup]=\"costInvoiceFormGroup\">\r\n    <div class=\"main-container\">\r\n        <mat-horizontal-stepper [linear]\r\n                                (selectionChange)=\"onChangeStepAction($event)\"\r\n                                #stepper>\r\n            <ng-template matStepperIcon=\"edit\">\r\n                <mat-icon>check</mat-icon>\r\n            </ng-template>\r\n            <mat-step>\r\n                <ng-template matStepLabel>Contract Selection Screen</ng-template>\r\n                <atlas-cost-selection #costSelectionComponent\r\n                                      (costContractsSelected)=\"onCostContractsSelected($event)\"\r\n                                      (userSupplier)=\"onUserSupplierValueChanged($event)\"></atlas-cost-selection>\r\n                <div fxLayout=\"row \"\r\n                     fxLayoutAlign=\"space-between start\"\r\n                     class=\"button-details\">\r\n                    <div fxLayout=\"column \"\r\n                         fxLayoutAlign=\"start\">\r\n                        <button (click)=\"onDiscardButtonClicked()\"\r\n                                mat-button>\r\n                            DISCARD\r\n                        </button>\r\n                    </div>\r\n                    <div fxLayout=\"column \"\r\n                         fxLayoutAlign=\"start\">\r\n                        <button mat-raised-button\r\n                                (click)=\"onMoveButtonClicked(invoicingSteps.workingStep)\">\r\n                            NEXT\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </mat-step>\r\n            <mat-step [completed]=\"isCompleted\">\r\n                <ng-template matStepLabel>Invoice Working Page</ng-template>\r\n                <atlas-cost-working-page #costWorkingPageComponent\r\n                                         [invoiceSetupData]=\"invoiceSetupDataResult\"\r\n                                         (narrativeLength)=\"onNarrativeValueChanged($event)\"\r\n                                         (documentTemplateSelected)=\"onDocumentTemplateSelected($event)\">\r\n                </atlas-cost-working-page>\r\n                <div fxLayout=\"row\"\r\n                     fxLayoutAlign=\"end start\">\r\n                    <mat-slide-toggle *ngIf=\"hasTemplate\"\r\n                                      [formControl]=\"previewDocumentCtrl\">Preview Document</mat-slide-toggle>\r\n                </div>\r\n                <div fxLayout=\"row \"\r\n                     fxLayoutAlign=\"space-between start\"\r\n                     class=\"button-details\">\r\n                    <button (click)=\"onDiscardButtonClicked()\"\r\n                            [disabled]=\"isLoading\"\r\n                            mat-button>\r\n                        DISCARD\r\n                    </button>\r\n                    <div fxLayout=\"column \"\r\n                         fxLayoutAlign=\"start end \">\r\n                        <div fxLayout=\"row \"\r\n                             fxLayoutAlign=\"end start \">\r\n                            <button mat-button\r\n                                    (click)=\"onBackButtonClicked(invoicingSteps.invoiceCreationStep)\"\r\n                                    [disabled]=\"isLoading\">\r\n                                BACK\r\n                            </button>\r\n                            <div\r\n                                 *ifAuthorized=\"'Invoices.InvoiceCreation', company:company, level: PermissionLevels.ReadWrite\">\r\n                                <button mat-raised-button\r\n                                        (click)=\"onOpenDialogOnPreviewOrSaveClicked()\"\r\n                                        [disabled]=\"isLoading\">\r\n                                    {{ previewDocumentCtrl.value ? \"Preview and Invoice\" : \"Create Invoice\" }}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </mat-step>\r\n            <mat-step>\r\n                <ng-template matStepLabel>Invoice Summary Page</ng-template>\r\n                <atlas-cost-summary #costSummaryComponent\r\n                                    [invoiceTaxContracts]=\"taxRecords\"\r\n                                    [invoiceTaxTotal]=\"totalData\"\r\n                                    [invoiceCostContracts]=\"invoiceCostContracts\"\r\n                                    [filteredCompanyBankAccounts]=\"filteredCompanyBankAccounts\">\r\n                </atlas-cost-summary>\r\n                <div class=\"btn-container\"\r\n                     *ngIf=\"!isFromGrid\">\r\n                    <div fxLayout=\"row\"\r\n                         fxAlignLayout=\"start end\">\r\n                        <span class=\"fill-space\"></span>\r\n                        <button mat-button\r\n                                (click)=\"newSearchButtonClicked()\">\r\n                            New Search\r\n                        </button>\r\n                        <button mat-raised-button\r\n                                (click)=\"nextInvoiceButtonClicked(stepper)\">\r\n                            Next Invoice\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </mat-step>\r\n        </mat-horizontal-stepper>\r\n    </div>\r\n</form>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/cost.component.scss":
/*!***************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/cost.component.scss ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".mat-column-selection {\n  overflow: initial; }\n\n.mat-button-toggle {\n  text-align: center;\n  min-width: 88px; }\n\nlabel {\n  font-size: 14px;\n  font-family: Roboto;\n  color: black; }\n\nlabel.no-data-message {\n  font-weight: bold; }\n\n.highlight {\n  background: #A7C5E2; }\n\n.label-search {\n  font-size: 11px;\n  font-family: Roboto;\n  color: rgba(0, 0, 0, 0.54); }\n\n.label-summary {\n  font-weight: bold; }\n\nmat-radio-button {\n  margin: 5px; }\n\n.mat-stepper-horizontal {\n  background-color: transparent; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/cost/cost.component.ts":
/*!*************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/cost/cost.component.ts ***!
  \*************************************************************************/
/*! exports provided: CostComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CostComponent", function() { return CostComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/entities/window-injection-token */ "./Client/app/shared/entities/window-injection-token.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../shared/enums/permission-level.enum */ "./Client/app/shared/enums/permission-level.enum.ts");
/* harmony import */ var _shared_services_document_popup_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../shared/services/document-popup.service */ "./Client/app/shared/services/document-popup.service.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../shared/services/http-services/document.service */ "./Client/app/shared/services/http-services/document.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_http_services_preaccounting_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../shared/services/http-services/preaccounting.service */ "./Client/app/shared/services/http-services/preaccounting.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _dialog_boxes_bank_account_dialog_bank_account_dialog_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../dialog-boxes/bank-account-dialog/bank-account-dialog.component */ "./Client/app/execution/execution-invoicing/dialog-boxes/bank-account-dialog/bank-account-dialog.component.ts");
/* harmony import */ var _invoicing_base_form_invoicing_base_form_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../invoicing-base-form/invoicing-base-form.component */ "./Client/app/execution/execution-invoicing/invoicing-base-form/invoicing-base-form.component.ts");
/* harmony import */ var _components_cost_selection_cost_selection_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./components/cost-selection/cost-selection.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/cost-selection.component.ts");
/* harmony import */ var _components_cost_working_page_cost_working_page_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./components/cost-working-page/cost-working-page.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/cost-working-page.component.ts");
/* harmony import */ var _components_summary_cost_summary_component__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./components/summary/cost-summary.component */ "./Client/app/execution/execution-invoicing/cost/components/summary/cost-summary.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
























var CostComponent = /** @class */ (function (_super) {
    __extends(CostComponent, _super);
    function CostComponent(dialog, router, companyManager, snackbarService, documentService, window, utilService, executionService, masterdataService, route, formBuilder, preaccountingService, formConfigurationProvider, documentPopupService) {
        var _this = _super.call(this, dialog, router, companyManager, snackbarService, documentService, window, utilService, executionService, route, formBuilder, preaccountingService, formConfigurationProvider, documentPopupService) || this;
        _this.dialog = dialog;
        _this.router = router;
        _this.companyManager = companyManager;
        _this.snackbarService = snackbarService;
        _this.documentService = documentService;
        _this.window = window;
        _this.utilService = utilService;
        _this.executionService = executionService;
        _this.masterdataService = masterdataService;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.preaccountingService = preaccountingService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.documentPopupService = documentPopupService;
        _this.filteredCompanyBankAccounts = [];
        _this.InvoiceTypes = _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_9__["InvoiceTypes"];
        _this.currentStep = 0;
        _this.PermissionLevels = _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_10__["PermissionLevels"];
        _this.isFromGrid = false;
        _this.isSave = false;
        _this.invoicingSteps = {
            templateStep: -1,
            invoiceCreationStep: 0,
            workingStep: 1,
            summaryStep: 2,
        };
        _this.isValid = false;
        _this.previewDocumentCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__["AtlasFormControl"]('previewDocumentCtrl');
        _this.masterData = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_6__["MasterData"]();
        _this.isCompleted = false;
        _this.invoiceTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('invoiceTypeId')));
        _this.company = _this.companyManager.getCurrentCompanyId();
        return _this;
    }
    CostComponent.prototype.ngOnInit = function () {
        this.company = this.route.snapshot.paramMap.get('company');
        this.costInvoiceFormGroup = this.formBuilder.group({
            costSelectionComponent: this.costSelectionComponent.getFormGroup(),
            costWorkingPageComponent: this.costWorkingPageComponent.getFormGroup(),
        });
        this.formComponents.push(this.costSelectionComponent, this.costWorkingPageComponent);
        this.getInvoiceSetupByCompany();
        this.masterData = this.route.snapshot.data.masterdata;
    };
    CostComponent.prototype.unloadNotification = function ($event) {
        if ((this.costWorkingPageComponent.invoiceCostWorkingFormGroup.dirty ||
            this.costSelectionComponent.invoiceSelectionFormGroup.dirty) &&
            this.isSave === false) {
            $event.returnValue = true;
        }
    };
    CostComponent.prototype.nextInvoiceButtonClicked = function () {
        var searchContractRef = '';
        var searchCounterParty = '';
        var searchCharterRef = '';
        var searchCost = '';
        var invoiceType = 0;
        searchContractRef = this.costSelectionComponent.contractSearchComponent.searchTerm;
        searchCounterParty = this.costSelectionComponent.contractSearchComponent.searchSupplierTerm;
        searchCharterRef = this.costSelectionComponent.contractSearchComponent.searchCharterTerm;
        searchCost = this.costSelectionComponent.contractSearchComponent.searchCostTerm;
        invoiceType = this.costSelectionComponent.contractSearchComponent.invoiceType;
        this.router.navigate(['/' + this.companyManager.getCurrentCompanyId() +
                '/execution/invoicing/' + encodeURIComponent(invoiceType.toString())], {
            queryParams: {
                savedContractRefCost: searchContractRef, savedCounterPartyCost: searchCounterParty,
                savedCharterRefCost: searchCharterRef, savedCost: searchCost,
            },
            skipLocationChange: true,
        });
    };
    CostComponent.prototype.beforeInvoiceActions = function (invoiceRecord) { };
    CostComponent.prototype.afterInvoiceActions = function (invoiceRecord) {
        (this.selectedbankAccountId) ? invoiceRecord.bankAccountId = this.selectedbankAccountId : null;
        this.costSummaryComponent.populateInvoiceRecord(invoiceRecord);
        this.stepper.next();
    };
    CostComponent.prototype.onMoveButtonClicked = function (index) {
        var isFormValid = false;
        if (this.costSelectionComponent.costInvoiceeOptionsComponent.formGroup.valid) {
            if (this.isValid) {
                this.costContractsSelected();
                this.isCompleted = true;
                this.stepper.selectedIndex = index;
            }
            isFormValid = true;
        }
        if (!this.isValid) {
            this.snackbarService.throwErrorSnackBar('Please select a contract to proceed.');
        }
        if (!isFormValid) {
            this.snackbarService.informationSnackBar('Form is invalid. Please resolve the errors..');
        }
    };
    CostComponent.prototype.onNarrativeValueChanged = function (maxLength) {
        this.isCostNarrativeMaxLength = maxLength;
    };
    CostComponent.prototype.checkForTotalCostDirection = function () {
        if (this.costWorkingPageComponent
            .invoicingCostTaxesComponent.totalCostDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_8__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_8__["CostDirections"].Payable]) {
            this.showConfirmationModal(this.hasTemplate && this.previewDocumentCtrl.value);
        }
        else if (this.costWorkingPageComponent
            .invoicingCostTaxesComponent.totalCostDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_8__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_8__["CostDirections"].Receivable]) {
            this.getCompanyBankAccounts();
        }
    };
    CostComponent.prototype.onOpenDialogOnPreviewOrSaveClicked = function (createOrPreview) {
        this.isLoading = true;
        this.isSave = true;
        if (this.costWorkingPageComponent.invoiceCostWorkingFormGroup.valid &&
            this.costWorkingPageComponent.validateCostGrid()) {
            if (this.isCostNarrativeMaxLength) {
                this.snackbarService.informationSnackBar('Narrative length should be less than 30');
                return;
            }
            this.checkForTotalCostDirection();
        }
        else {
            this.snackbarService.informationSnackBar('Form is invalid. Please resolve the errors...');
            this.isLoading = false;
        }
        this.costAndTaxRowsSelected();
    };
    CostComponent.prototype.costContractsSelected = function () {
        var _this = this;
        var costContracts = this.costSelectionComponent.
            contractSearchComponent.selectedCostContracts;
        if (costContracts) {
            this.costWorkingPageComponent.invoiceCostSelectedCostComponent.contractToBeSelected(costContracts);
            this.costWorkingPageComponent.costInvoiceSelectionComponent.contractToBeSelected(costContracts);
            costContracts.map(function (contract) {
                _this.currencySelected = contract ? contract.currencyCode : null;
            });
        }
    };
    CostComponent.prototype.getTaxRecordsForSelectedCost = function () {
        this.taxRecords = this.costWorkingPageComponent.invoicingCostTaxesComponent.taxesGridRows;
        this.totalData = this.costWorkingPageComponent.totalData;
    };
    CostComponent.prototype.costAndTaxRowsSelected = function () {
        this.invoiceCostContracts = this.costWorkingPageComponent.invoiceCostSelectedCostComponent
            .getAllInvoiceCostLines();
        this.getTaxRecordsForSelectedCost();
    };
    CostComponent.prototype.getCompanyBankAccounts = function () {
        var _this = this;
        if (this.selectedSupplier && this.currencySelected) {
            this.masterdataService.getCompanyBankAccounts(this.currencySelected)
                .subscribe(function (data) {
                if (data.value.length > 0) {
                    _this.filteredCompanyBankAccounts = data.value;
                }
                _this.showAvailableBankingOptionDialog();
            }, function (error) {
                console.error(error);
                _this.snackbarService.throwErrorSnackBar('Oops! An error ocurred');
            });
        }
        else {
            if (!this.selectedSupplier) {
                this.snackbarService.throwErrorSnackBar('The invoicee is incorrect');
            }
            else if (!this.currencySelected) {
                this.snackbarService.throwErrorSnackBar('The currency is incorrect');
            }
            this.isLoading = false;
            this.isSave = false;
        }
    };
    CostComponent.prototype.showAvailableBankingOptionDialog = function () {
        var _this = this;
        if (this.filteredCompanyBankAccounts) {
            var availableBankingoptionDialog = this.dialog.open(_dialog_boxes_bank_account_dialog_bank_account_dialog_component__WEBPACK_IMPORTED_MODULE_19__["BankAccountDialogComponent"], {
                data: {
                    title: 'Bank Account',
                    okButton: 'Confirm',
                    value: this.filteredCompanyBankAccounts,
                },
            });
            availableBankingoptionDialog.afterClosed().subscribe(function (answer) {
                if (!answer) {
                    _this.isLoading = false;
                }
                else if (answer.isClose) {
                    _this.selectedbankAccountId = answer.selectedValue;
                    _this.showConfirmationModal(_this.hasTemplate && _this.previewDocumentCtrl.value);
                }
            });
        }
    };
    CostComponent.prototype.onCostContractsSelected = function (costContractsSelected) {
        this.isValid = costContractsSelected;
    };
    CostComponent.prototype.onUserSupplierValueChanged = function (userSupplier) {
        if (userSupplier) {
            this.costWorkingPageComponent.costInvoiceSelectionComponent.onUserSupplierValueChanged(userSupplier);
            this.selectedSupplier = this.masterData.counterparties.find(function (counterParty) { return counterParty.description === userSupplier; });
        }
    };
    CostComponent.prototype.getInvoiceSetupByCompany = function () {
        var _this = this;
        this.subscriptions.push(this.executionService.getInvoiceSetupByCompany()
            .subscribe(function (data) {
            _this.invoiceSetupDataResult = data;
            _this.costSelectionComponent.contractSearchComponent.setTolerancePercentage(data.tolerancePercentage);
            _this.costWorkingPageComponent.invoiceCostSelectedCostComponent.setDefaultVatCode(data.defaultVATCode);
            _this.costWorkingPageComponent.costPaymentsComponent.setPaymentTerms(data.paymentTermCode);
            _this.costWorkingPageComponent.costInvoiceSelectionComponent.
                setDefaultAuthorizeForPosting(data.authorizedForPosting);
        }));
    };
    CostComponent.prototype.onBackButtonClicked = function (index) {
        this.isCompleted = false;
        this.stepper.selectedIndex = index;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('costSelectionComponent'),
        __metadata("design:type", _components_cost_selection_cost_selection_component__WEBPACK_IMPORTED_MODULE_21__["CostSelectionComponent"])
    ], CostComponent.prototype, "costSelectionComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('costWorkingPageComponent'),
        __metadata("design:type", _components_cost_working_page_cost_working_page_component__WEBPACK_IMPORTED_MODULE_22__["CostWorkingPageComponent"])
    ], CostComponent.prototype, "costWorkingPageComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('costSummaryComponent'),
        __metadata("design:type", _components_summary_cost_summary_component__WEBPACK_IMPORTED_MODULE_23__["CostSummaryComponent"])
    ], CostComponent.prototype, "costSummaryComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('stepper'),
        __metadata("design:type", _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatStepper"])
    ], CostComponent.prototype, "stepper", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('bankAccountDialogComponent'),
        __metadata("design:type", _dialog_boxes_bank_account_dialog_bank_account_dialog_component__WEBPACK_IMPORTED_MODULE_19__["BankAccountDialogComponent"])
    ], CostComponent.prototype, "bankAccountDialogComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"])('window:beforeunload', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], CostComponent.prototype, "unloadNotification", null);
    CostComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-cost',
            template: __webpack_require__(/*! ./cost.component.html */ "./Client/app/execution/execution-invoicing/cost/cost.component.html"),
            styles: [__webpack_require__(/*! ./cost.component.scss */ "./Client/app/execution/execution-invoicing/cost/cost.component.scss")],
        }),
        __param(5, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_7__["WINDOW"])),
        __metadata("design:paramtypes", [_angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__["CompanyManagerService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_17__["SnackbarService"],
            _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_13__["DocumentService"],
            Window,
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_18__["UtilService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_14__["ExecutionService"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_15__["MasterdataService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_preaccounting_service__WEBPACK_IMPORTED_MODULE_16__["PreaccountingService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_12__["FormConfigurationProviderService"],
            _shared_services_document_popup_service__WEBPACK_IMPORTED_MODULE_11__["DocumentPopupService"]])
    ], CostComponent);
    return CostComponent;
}(_invoicing_base_form_invoicing_base_form_component__WEBPACK_IMPORTED_MODULE_20__["InvoicingBaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/dialog-boxes/apportion-dialog/apportion-dialog.component.html":
/*!****************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/dialog-boxes/apportion-dialog/apportion-dialog.component.html ***!
  \****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div fxLayoutAlign=\"space-between center\">\r\n    <h1 class=\"no-margin\">APPORTION</h1>\r\n    <button mat-button>\r\n        <mat-icon (click)=\"onCloseButtonClicked()\">close</mat-icon>\r\n    </button>\r\n</div>\r\n<mat-dialog-content>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"left start\">\r\n        <mat-form-field fxFlex=\"32%\">\r\n            <input matInput\r\n                   placeholder=\"Quantity[MT]\"\r\n                   [formControl]=\"quantityCtrl\"\r\n                   autocomplete=\"off\"\r\n                   (change)=\"quantityOnChange()\"\r\n                   [readonly]=\"isReadOnly\">\r\n        </mat-form-field>\r\n    </div>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"left start\">\r\n        <mat-form-field fxFlex=\"32%\">\r\n            <input matInput\r\n                   placeholder=\"Total Value\"\r\n                   [formControl]=\"totalValueCtrl\">\r\n        </mat-form-field>\r\n    </div>\r\n\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"left start\">\r\n        <mat-form-field fxFlex=\"32%\">\r\n            <input matInput\r\n                   placeholder=\"%Invoiced\"\r\n                   [formControl]=\"invoicePercentageCtrl\">\r\n        </mat-form-field>\r\n        <mat-form-field fxFlex=\"40%\"\r\n                        class=\"mat-read-only-field\">\r\n            <span matTooltip={{apportionBasisToolTip}}>\r\n                <input matInput\r\n                       placeholder=\"(Basis Updated Total Value)\"\r\n                       [formControl]=\"totalValueBasisCtrl\"\r\n                       readonly>\r\n            </span>\r\n        </mat-form-field>\r\n    </div>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"left start\">\r\n        <mat-form-field fxFlex=\"32%\">\r\n            <mat-select placeholder=\"Apportion Basis\"\r\n                        [formControl]=\"apportionBasisCtrl\"\r\n                        (selectionChange)='onApportionBasisChanged()'>\r\n                <mat-option *ngFor=\"let basis of apportionBasisType\"\r\n                            [value]=\"basis.viewValue\">\r\n                    {{basis.viewValue}}\r\n                </mat-option>\r\n            </mat-select>\r\n        </mat-form-field>\r\n    </div>\r\n</mat-dialog-content>\r\n<mat-dialog-actions>\r\n    <div fxFlex=\"50\"\r\n         fxLayout=\"row\"\r\n         fxAlignLayout=\"start start\">\r\n        <button mat-button\r\n                (click)=\"onCloseButtonClicked()\">DISCARD</button>\r\n    </div>\r\n    <div fxFlex=\"50\"\r\n         fxLayout=\"row\"\r\n         fxAlignLayout=\"start end\">\r\n        <span class=\"fill-space\"></span>\r\n        <button mat-button\r\n                (click)=\"onDoneButtonClicked()\">DONE</button>\r\n    </div>\r\n</mat-dialog-actions>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/dialog-boxes/apportion-dialog/apportion-dialog.component.scss":
/*!****************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/dialog-boxes/apportion-dialog/apportion-dialog.component.scss ***!
  \****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/dialog-boxes/apportion-dialog/apportion-dialog.component.ts":
/*!**************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/dialog-boxes/apportion-dialog/apportion-dialog.component.ts ***!
  \**************************************************************************************************************/
/*! exports provided: ApportionDialogComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ApportionDialogComponent", function() { return ApportionDialogComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_enums_apportion_basis_type_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../shared/enums/apportion-basis-type.enum */ "./Client/app/shared/enums/apportion-basis-type.enum.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};





var ApportionDialogComponent = /** @class */ (function () {
    function ApportionDialogComponent(snackbarService, thisDialogRef, data) {
        this.snackbarService = snackbarService;
        this.thisDialogRef = thisDialogRef;
        this.data = data;
        this.quantityCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_2__["AtlasFormControl"]('Quantity');
        this.totalValueCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_2__["AtlasFormControl"]('TotalValue');
        this.invoicePercentageCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_2__["AtlasFormControl"]('InvoicePercentage');
        this.totalValueBasisCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_2__["AtlasFormControl"]('TotalValueBasis');
        this.apportionBasisCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_2__["AtlasFormControl"]('ApportionBasis');
        this.isMixedWeightCode = false;
        this.isPartialyInvoiced = false;
        this.isMixedRatetypes = false;
        this.apportionBasisToolTip = '';
        this.isReadOnly = true;
        this.dialogData = data;
    }
    ApportionDialogComponent.prototype.ngOnInit = function () {
        this.apportionBasisType = this.getApportionBasisTypeEnum();
        this.apportionBasisCtrl.patchValue(_shared_enums_apportion_basis_type_enum__WEBPACK_IMPORTED_MODULE_3__["ApportionBasisType"][_shared_enums_apportion_basis_type_enum__WEBPACK_IMPORTED_MODULE_3__["ApportionBasisType"].TotalValue]);
        this.totalValueBasisCtrl.setValue(100);
        this.setApportionValues();
        this.onChanges();
    };
    ApportionDialogComponent.prototype.getApportionBasisTypeEnum = function () {
        var apportionBasisTypeEnum = [];
        var objectEnum = Object.keys(_shared_enums_apportion_basis_type_enum__WEBPACK_IMPORTED_MODULE_3__["ApportionBasisType"]);
        var values = objectEnum.slice(0, objectEnum.length / 2);
        var keys = objectEnum.slice(objectEnum.length / 2);
        for (var i = 0; i < objectEnum.length / 2; i++) {
            apportionBasisTypeEnum.push({ viewValue: keys[i], value: values[i] });
        }
        return apportionBasisTypeEnum;
    };
    ApportionDialogComponent.prototype.onCloseButtonClicked = function () {
        this.thisDialogRef.close();
    };
    ApportionDialogComponent.prototype.onDoneButtonClicked = function () {
        this.thisDialogRef.close(this.dialogData.selectedRows);
    };
    ApportionDialogComponent.prototype.setApportionValues = function () {
        var _this = this;
        if (this.dialogData) {
            this.isReadOnly = true;
            var weightCode_1;
            var rateType_1;
            this.quantityCtrl.patchValue(this.dialogData.totalQuantity);
            this.totalValueCtrl.patchValue(this.dialogData.totalInvoiceValue);
            this.dialogData.selectedRows.forEach(function (row) {
                if (!weightCode_1) {
                    weightCode_1 = row.weightCode;
                }
                if (!rateType_1) {
                    rateType_1 = row.rateTypeCode;
                }
                if (weightCode_1 !== row.weightCode) {
                    _this.isMixedWeightCode = true;
                }
                if (rateType_1 !== row.rateTypeCode) {
                    _this.isMixedRatetypes = true;
                }
                if (!_this.isPartialyInvoiced && (row.invoicePercent > 0 && row.invoicePercent < 100)) {
                    _this.isPartialyInvoiced = true;
                }
            });
            if (this.isPartialyInvoiced) {
                this.invoicePercentageCtrl.setValue('');
                this.invoicePercentageCtrl.disable();
                this.totalValueBasisCtrl.setValue('');
            }
            else {
                this.invoicePercentageCtrl.setValue(100);
                this.totalValueBasisCtrl.setValue((this.totalValueCtrl.value / this.dialogData.totalInvoiceValue) * 100);
                this.setApportionTooltip();
            }
        }
    };
    ApportionDialogComponent.prototype.setApportionTooltip = function () {
        this.apportionBasisToolTip = 'The %invoiced basis the value entered above is ' +
            (this.totalValueCtrl.value / this.dialogData.totalInvoiceValue) * 100 + ' but the % invoiced will be reflected as ' +
            this.invoicePercentageCtrl.value + ' % for calculations ';
    };
    ApportionDialogComponent.prototype.onApportionBasisChanged = function () {
        var selectedBasis = this.apportionBasisCtrl.value;
        if (selectedBasis.toLocaleLowerCase() === 'quantity') {
            if (this.isMixedRatetypes || this.isMixedWeightCode || this.isPartialyInvoiced) {
                this.snackbarService.informationSnackBar('Apportion Basis cannot be quantity in' +
                    ' case there is a mix of weight codes or there is a partially invoiced cost line or there is a mix of rate types');
                this.apportionBasisCtrl.patchValue(_shared_enums_apportion_basis_type_enum__WEBPACK_IMPORTED_MODULE_3__["ApportionBasisType"][_shared_enums_apportion_basis_type_enum__WEBPACK_IMPORTED_MODULE_3__["ApportionBasisType"].TotalValue]);
                this.isReadOnly = true;
            }
            else {
                // make quantity editable
                this.isReadOnly = false;
            }
        }
        else {
            this.isReadOnly = true;
        }
    };
    ApportionDialogComponent.prototype.onTotalValueChanged = function () {
        var _this = this;
        var selectedBasis = this.apportionBasisCtrl.value;
        this.totalValueBasisCtrl.setValue((this.totalValueCtrl.value / this.dialogData.totalInvoiceValue) * 100);
        if (this.dialogData.selectedRows) {
            this.dialogData.selectedRows.forEach(function (costContract) {
                if (selectedBasis.toLowerCase() === 'quantity') {
                    if (_this.totalValueCtrl.value) {
                        costContract.costAmountToInvoice = _this.totalValueCtrl.value *
                            (Number(costContract.quantity) / _this.quantityCtrl.value);
                    }
                }
                else {
                    if (_this.totalValueCtrl.value) {
                        costContract.costAmountToInvoice = costContract.costAmount *
                            (_this.totalValueCtrl.value / _this.dialogData.totalInvoiceValue);
                    }
                }
            });
        }
        if (!this.isPartialyInvoiced) {
            this.setApportionTooltip();
        }
    };
    ApportionDialogComponent.prototype.onInvoicedPercentageChanged = function () {
        var _this = this;
        if (this.dialogData.selectedRows) {
            this.dialogData.selectedRows.forEach(function (costContract) {
                if (_this.invoicePercentageCtrl.value) {
                    costContract.invoicePercent = _this.invoicePercentageCtrl.value;
                }
            });
        }
    };
    ApportionDialogComponent.prototype.quantityOnChange = function () {
        var _this = this;
        if (this.dialogData.selectedRows) {
            this.dialogData.selectedRows.forEach(function (costContract) {
                if (_this.quantityCtrl.value) {
                    costContract.quantity = (_this.quantityCtrl.value *
                        (Number(costContract.quantity) / _this.dialogData.totalQuantity)).toString();
                    costContract.costAmountToInvoice = _this.totalValueCtrl.value *
                        (Number(costContract.quantity) / _this.quantityCtrl.value);
                }
            });
        }
    };
    ApportionDialogComponent.prototype.onChanges = function () {
        var _this = this;
        this.invoicePercentageCtrl.valueChanges.subscribe(function () {
            _this.onInvoicedPercentageChanged();
        });
        this.totalValueCtrl.valueChanges.subscribe(function () {
            _this.onTotalValueChanged();
        });
    };
    ApportionDialogComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-apportion-dialog',
            template: __webpack_require__(/*! ./apportion-dialog.component.html */ "./Client/app/execution/execution-invoicing/dialog-boxes/apportion-dialog/apportion-dialog.component.html"),
            styles: [__webpack_require__(/*! ./apportion-dialog.component.scss */ "./Client/app/execution/execution-invoicing/dialog-boxes/apportion-dialog/apportion-dialog.component.scss")],
        }),
        __param(2, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_angular_material__WEBPACK_IMPORTED_MODULE_1__["MAT_DIALOG_DATA"])),
        __metadata("design:paramtypes", [_shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_4__["SnackbarService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_1__["MatDialogRef"], Object])
    ], ApportionDialogComponent);
    return ApportionDialogComponent;
}());



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/dialog-boxes/bank-account-dialog/bank-account-dialog.component.html":
/*!**********************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/dialog-boxes/bank-account-dialog/bank-account-dialog.component.html ***!
  \**********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<h1 mat-dialog-title> Bank Account</h1>\r\n<mat-dialog-content class=\"mat-dialog-content\">\r\n    <div fxLayout=\"column\">\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\">\r\n            <mat-form-field fxFlex=\"50%\">\r\n                <mat-select [panelWidth]=\"panelSize\"\r\n                            placeholder=\"LDC Bank Account Details\"\r\n                            [formControl]=\"bankAccountCtrl\"\r\n                            matTooltip=\"Bank Account\">\r\n\r\n                    <mat-option *ngFor=\"let option of filteredCompanyBankAccounts\"\r\n                                [value]=\"option.bankAccountId\">\r\n                        {{option.bankName}}\r\n                    </mat-option>\r\n                </mat-select>\r\n                <mat-error *ngIf=\"bankAccountCtrl.hasError('required')\">\r\n                    Reference is required\r\n                </mat-error>\r\n                <mat-hint style=\"color:orange\"\r\n                          *ngIf=\"filteredCompanyBankAccounts.length==0\">\r\n                    selected currency and company have no bank accounts\r\n                </mat-hint>\r\n            </mat-form-field>\r\n        </div>\r\n        <div fxLayoutGap=\"50%\">\r\n            <div fxFlex=\"30%\">\r\n                <button mat-button\r\n                        (click)=\"onCancelButtonClicked()\">Cancel</button>\r\n            </div>\r\n            <div fxFlex=\"30%\">\r\n                <button mat-raised-button\r\n                        (click)=\"onConfirmButtonClicked()\">Confirm</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</mat-dialog-content>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/dialog-boxes/bank-account-dialog/bank-account-dialog.component.scss":
/*!**********************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/dialog-boxes/bank-account-dialog/bank-account-dialog.component.scss ***!
  \**********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".mat-dialog-content {\n  width: 500px; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/dialog-boxes/bank-account-dialog/bank-account-dialog.component.ts":
/*!********************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/dialog-boxes/bank-account-dialog/bank-account-dialog.component.ts ***!
  \********************************************************************************************************************/
/*! exports provided: BankAccountDialogComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BankAccountDialogComponent", function() { return BankAccountDialogComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};









var BankAccountDialogComponent = /** @class */ (function (_super) {
    __extends(BankAccountDialogComponent, _super);
    function BankAccountDialogComponent(formBuilder, route, snackbarService, thisDialogRef, data, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.route = route;
        _this.snackbarService = snackbarService;
        _this.thisDialogRef = thisDialogRef;
        _this.data = data;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.bankAccountCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__["AtlasFormControl"]('bankAccountCtrl');
        _this.masterData = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_6__["MasterData"]();
        _this.dialogData = data;
        return _this;
    }
    BankAccountDialogComponent.prototype.ngOnInit = function () {
        this.filteredCompanyBankAccounts = this.dialogData.value;
        if (this.filteredCompanyBankAccounts.length > 0) {
            if (this.filteredCompanyBankAccounts.length === 1) {
                this.bankAccountCtrl.patchValue(this.filteredCompanyBankAccounts[0].bankAccountId);
            }
            else if (this.filteredCompanyBankAccounts.length > 1) {
                this.bankAccountCtrl.patchValue(this.filteredCompanyBankAccounts.filter(function (company) { return company.bankAccountDefault === 1; })[0].bankAccountId);
            }
            this.bankAccountCtrl.setValidators([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]);
        }
    };
    BankAccountDialogComponent.prototype.unloadNotification = function ($event) {
        if (this.formGroup.dirty) {
            $event.returnValue = true;
        }
    };
    BankAccountDialogComponent.prototype.onConfirmButtonClicked = function () {
        if (this.bankAccountCtrl.valid) {
            var nominalAccount = this.bankAccountCtrl.value;
            this.thisDialogRef.close({ isClose: true, selectedValue: nominalAccount });
        }
        else {
            this.snackbarService.informationSnackBar('Form is invalid. Please resolve the errors..');
        }
    };
    BankAccountDialogComponent.prototype.onCancelButtonClicked = function () {
        this.thisDialogRef.close(false);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"])('window:beforeunload', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], BankAccountDialogComponent.prototype, "unloadNotification", null);
    BankAccountDialogComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-bank-account-dialog',
            template: __webpack_require__(/*! ./bank-account-dialog.component.html */ "./Client/app/execution/execution-invoicing/dialog-boxes/bank-account-dialog/bank-account-dialog.component.html"),
            styles: [__webpack_require__(/*! ./bank-account-dialog.component.scss */ "./Client/app/execution/execution-invoicing/dialog-boxes/bank-account-dialog/bank-account-dialog.component.scss")],
        }),
        __param(4, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_angular_material__WEBPACK_IMPORTED_MODULE_2__["MAT_DIALOG_DATA"])),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_8__["SnackbarService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialogRef"], Object, _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__["FormConfigurationProviderService"]])
    ], BankAccountDialogComponent);
    return BankAccountDialogComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/execution-invoicing.component.css":
/*!************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/execution-invoicing.component.css ***!
  \************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/execution-invoicing.component.html":
/*!*************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/execution-invoicing.component.html ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div [ngSwitch]=\"invoiceTypeId\">\r\n    <atlas-commercial #commercialComponent\r\n                      *ngSwitchDefault></atlas-commercial>\r\n    <atlas-cost #costComponent\r\n                *ngSwitchCase=InvoiceTypes.Cost>\r\n    </atlas-cost>\r\n    <atlas-goods-cost #goodsCostComponent\r\n                      *ngSwitchCase=InvoiceTypes.GoodsCostPurchase>\r\n    </atlas-goods-cost>\r\n    <atlas-goods-cost #goodsCostComponent\r\n                      *ngSwitchCase=InvoiceTypes.GoodsCostSales>\r\n    </atlas-goods-cost>\r\n    <atlas-washout #washoutComponent\r\n                   *ngSwitchCase=InvoiceTypes.Washout>\r\n    </atlas-washout>\r\n    <atlas-reversal #reversalComponent\r\n                    *ngSwitchCase=\"InvoiceTypes.Reversal\"></atlas-reversal>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/execution-invoicing.component.ts":
/*!***********************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/execution-invoicing.component.ts ***!
  \***********************************************************************************/
/*! exports provided: ExecutionInvoicingComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExecutionInvoicingComponent", function() { return ExecutionInvoicingComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _commercial_commercial_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./commercial/commercial.component */ "./Client/app/execution/execution-invoicing/commercial/commercial.component.ts");
/* harmony import */ var _cost_cost_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./cost/cost.component */ "./Client/app/execution/execution-invoicing/cost/cost.component.ts");
/* harmony import */ var _goods_cost_goods_cost_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./goods-cost/goods-cost.component */ "./Client/app/execution/execution-invoicing/goods-cost/goods-cost.component.ts");
/* harmony import */ var _reversal_reversal_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./reversal/reversal.component */ "./Client/app/execution/execution-invoicing/reversal/reversal.component.ts");
/* harmony import */ var _washout_washout_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./washout/washout.component */ "./Client/app/execution/execution-invoicing/washout/washout.component.ts");
/* harmony import */ var _shared_services_title_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../shared/services/title.service */ "./Client/app/shared/services/title.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};















var ExecutionInvoicingComponent = /** @class */ (function (_super) {
    __extends(ExecutionInvoicingComponent, _super);
    /*
    -----------------------------------------------------------------------------------------------------------------------------------
    GLOBAL FUNCTIONS
    -----------------------------------------------------------------------------------------------------------------------------------
    */
    function ExecutionInvoicingComponent(executionService, route, snackbarService, formBuilder, dialog, formConfigurationProvider, titleService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.executionService = executionService;
        _this.route = route;
        _this.snackbarService = snackbarService;
        _this.formBuilder = formBuilder;
        _this.dialog = dialog;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.titleService = titleService;
        _this.formComponents = [];
        _this.InvoiceTypes = _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"];
        _this.isFromGrid = false;
        _this.isSave = false;
        _this.invoiceTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('invoiceTypeId')));
        return _this;
    }
    ExecutionInvoicingComponent.prototype.ngOnInit = function () {
        this.company = this.route.snapshot.paramMap.get('company');
    };
    ExecutionInvoicingComponent.prototype.unloadNotification = function ($event) {
        if (this.createInvoiceFormGroup.dirty) {
            $event.returnValue = true;
        }
    };
    ExecutionInvoicingComponent.prototype.canDeactivate = function () {
        if (this.commercialComponent) {
            if ((this.commercialComponent.commercialWorkingPageComponent.invoiceWorkingFormGroup.dirty || this.commercialComponent.commercialSelectionComponent.invoiceSelectionContractFormGroup.dirty) &&
                this.commercialComponent.stepper.selectedIndex !== 2) {
                return window.confirm("Leave an unsave form? \nYour changes won't be applied!");
            }
        }
        else if (this.costComponent) {
            if ((this.costComponent.costSelectionComponent.invoiceSelectionFormGroup.dirty || this.costComponent.costWorkingPageComponent.invoiceCostWorkingFormGroup.dirty) && this.isSave === false) {
                return window.confirm("Leave an unsave form? \nYour changes won't be applied!");
            }
        }
        else if (this.washoutComponent) {
            if ((this.washoutComponent.washoutSelectionComponent.invoiceSelectionFormGroup.dirty || this.washoutComponent.washoutWorkingPageComponent.invoiceWashoutWorkingFormGroup.dirty) && this.washoutComponent.isSaveClicked === false) {
                return window.confirm("Leave an unsave form? \nYour changes won't be applied!");
            }
        }
        else if (this.reversalComponent) {
            if (this.reversalComponent.reversalSelectionComponent.invoiceSelectionFormGroup.dirty && this.isSave === false) {
                return window.confirm("Leave an unsave form? \nYour changes won't be applied!");
            }
        }
        return true;
    };
    ExecutionInvoicingComponent.prototype.ngAfterViewInit = function () {
        if (this.invoiceTypeId === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].Cost) {
            this.isSave = true;
            this.titleService.setTitle('Invoice Costs/Commissions Creation');
            this.createInvoiceFormGroup = this.formBuilder.group({
                costComponent: this.costComponent.getFormGroup(),
            });
            this.formComponents.push(this.costComponent);
        }
        else if (this.invoiceTypeId === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].Washout) {
            this.titleService.setTitle('Washout Creation');
            this.createInvoiceFormGroup = this.formBuilder.group({
                washoutComponent: this.washoutComponent.getFormGroup(),
            });
            this.formComponents.push(this.washoutComponent);
        }
        else if (this.invoiceTypeId === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].GoodsCostPurchase || this.invoiceTypeId === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].GoodsCostSales) {
            this.titleService.setTitle('Invoice Goods & Cost  Creation');
            this.createInvoiceFormGroup = this.formBuilder.group({
                goodsCostComponent: this.goodsCostComponent.getFormGroup(),
            });
            this.formComponents.push(this.goodsCostComponent);
        }
        else if (this.invoiceTypeId === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].Reversal) {
            this.isSave = true;
            this.titleService.setTitle('Invoice Reversal Creation');
            this.createInvoiceFormGroup = this.formBuilder.group({
                reversalComponent: this.reversalComponent.getFormGroup(),
            });
            this.formComponents.push(this.reversalComponent);
        }
        else {
            this.titleService.setTitle('Invoice Commercial Creation');
            this.createInvoiceFormGroup = this.formBuilder.group({
                commercialComponent: this.commercialComponent.getFormGroup(),
            });
            this.formComponents.push(this.commercialComponent);
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('washoutComponent'),
        __metadata("design:type", _washout_washout_component__WEBPACK_IMPORTED_MODULE_13__["WashoutComponent"])
    ], ExecutionInvoicingComponent.prototype, "washoutComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('commercialComponent'),
        __metadata("design:type", _commercial_commercial_component__WEBPACK_IMPORTED_MODULE_9__["CommercialComponent"])
    ], ExecutionInvoicingComponent.prototype, "commercialComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('costComponent'),
        __metadata("design:type", _cost_cost_component__WEBPACK_IMPORTED_MODULE_10__["CostComponent"])
    ], ExecutionInvoicingComponent.prototype, "costComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('goodsCostComponent'),
        __metadata("design:type", _goods_cost_goods_cost_component__WEBPACK_IMPORTED_MODULE_11__["GoodsCostComponent"])
    ], ExecutionInvoicingComponent.prototype, "goodsCostComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('reversalComponent'),
        __metadata("design:type", _reversal_reversal_component__WEBPACK_IMPORTED_MODULE_12__["ReversalComponent"])
    ], ExecutionInvoicingComponent.prototype, "reversalComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"])('window:beforeunload', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], ExecutionInvoicingComponent.prototype, "unloadNotification", null);
    ExecutionInvoicingComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-execution-invoicing',
            template: __webpack_require__(/*! ./execution-invoicing.component.html */ "./Client/app/execution/execution-invoicing/execution-invoicing.component.html"),
            styles: [__webpack_require__(/*! ./execution-invoicing.component.css */ "./Client/app/execution/execution-invoicing/execution-invoicing.component.css")],
        }),
        __metadata("design:paramtypes", [_shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_7__["ExecutionService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_8__["SnackbarService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__["FormConfigurationProviderService"],
            _shared_services_title_service__WEBPACK_IMPORTED_MODULE_14__["TitleService"]])
    ], ExecutionInvoicingComponent);
    return ExecutionInvoicingComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection-cost/components/goods-cost-contracts-cost/goods-cost-contracts-cost.component.html":
/*!********************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection-cost/components/goods-cost-contracts-cost/goods-cost-contracts-cost.component.html ***!
  \********************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"center center\"\r\n         fxLayoutWrap\r\n         *ngIf=\"isLoading\"\r\n         class=\"loading\">\r\n        <mat-spinner color=\"accent\"></mat-spinner>\r\n    </div>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"space-between start\"\r\n         class=\"atlas-grid-card-header\">\r\n        <span class=\"fill-space\"></span>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"end start\">\r\n            <button mat-raised-button\r\n                    class=\"apportion-button\"\r\n                    (click)=\"onApportionButtonClicked()\"\r\n                    [disabled]=\"isApportionDisable\">APPORTION</button>\r\n            <div>\r\n                <atlas-ag-grid-user-preferences *ngIf=\"costContractGridOptions && costContractGridOptions.columnDefs\"\r\n                                                [gridOptions]=\"costContractGridOptions\"\r\n                                                [company]=\"company\"\r\n                                                [gridId]=\"componentId\"\r\n                                                #userPreferences>\r\n                </atlas-ag-grid-user-preferences>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n    <div ag-grid=\"invoiceContractGridOptions\"\r\n         class=\"ag-theme-material pointer-cursor\"\r\n         style=\"width: 100%; height:100%\">\r\n        <ag-grid-angular style=\" height:100%;\"\r\n                         class=\"ag-theme-material\"\r\n                         [rowData]=\"costContractGridRows\"\r\n                         [columnDefs]=\"costContractGridColumns\"\r\n                         domLayout=\"autoHeight\"\r\n                         (gridReady)=\"onGridReady($event)\"\r\n                         rowSelection=\"multiple\"\r\n                         [suppressRowClickSelection]=\"true\"\r\n                         (rowSelected)=\"onSelectionChanged($event)\"\r\n                         (columnVisible)=\"onColumnVisibilityChanged($event)\"\r\n                         [pagination]=\"true\"\r\n                         [paginationPageSize]=\"10\"\r\n                         [enableSorting]=\"true\"\r\n                         [enableColResize]=\"true\"\r\n                         enableFilter\r\n                         [rowHeight]=atlasAgGridParam.rowHeight\r\n                         (rowDataChanged)=\"onRowDataChanged($event)\">\r\n        </ag-grid-angular>\r\n    </div>\r\n</mat-card>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection-cost/components/goods-cost-contracts-cost/goods-cost-contracts-cost.component.scss":
/*!********************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection-cost/components/goods-cost-contracts-cost/goods-cost-contracts-cost.component.scss ***!
  \********************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection-cost/components/goods-cost-contracts-cost/goods-cost-contracts-cost.component.ts":
/*!******************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection-cost/components/goods-cost-contracts-cost/goods-cost-contracts-cost.component.ts ***!
  \******************************************************************************************************************************************************************************/
/*! exports provided: GoodsCostContractsCostComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoodsCostContractsCostComponent", function() { return GoodsCostContractsCostComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component */ "./Client/app/shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/enums/rate-type.enum */ "./Client/app/shared/enums/rate-type.enum.ts");
/* harmony import */ var _shared_enums_tolerance_type_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/enums/tolerance-type.enum */ "./Client/app/shared/enums/tolerance-type.enum.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../../../shared/services/grid-configuration-provider.service */ "./Client/app/shared/services/grid-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
/* harmony import */ var _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../../services/execution-cash-common-methods */ "./Client/app/execution/services/execution-cash-common-methods.ts");
/* harmony import */ var _dialog_boxes_apportion_dialog_apportion_dialog_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../dialog-boxes/apportion-dialog/apportion-dialog.component */ "./Client/app/execution/execution-invoicing/dialog-boxes/apportion-dialog/apportion-dialog.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __values = (undefined && undefined.__values) || function (o) {
    var m = typeof Symbol === "function" && o[Symbol.iterator], i = 0;
    if (m) return m.call(o);
    return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
};
















var GoodsCostContractsCostComponent = /** @class */ (function (_super) {
    __extends(GoodsCostContractsCostComponent, _super);
    function GoodsCostContractsCostComponent(executionService, route, formConfigurationProvider, uiService, dialog, gridConfigurationProvider, snackbarService, gridService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.executionService = executionService;
        _this.route = route;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.uiService = uiService;
        _this.dialog = dialog;
        _this.gridConfigurationProvider = gridConfigurationProvider;
        _this.snackbarService = snackbarService;
        _this.gridService = gridService;
        _this.costContractsSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.costContractGridOptions = {};
        _this.isApportion = true;
        _this.dataLength = 0;
        _this.componentId = 'invoiceCostSelectionGrid';
        _this.hasGridSharing = false;
        _this.isContractSelected = false;
        _this.formatType = 'en-US';
        _this.isApportionDisable = true;
        _this.totalQuantity = 0;
        _this.totalInvocieValue = 0;
        _this.isCostAmountChanged = true;
        _this.selected = false;
        _this.atlasAgGridParam = _this.gridService.getAgGridParam();
        return _this;
    }
    GoodsCostContractsCostComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.invoiceType = Number(decodeURIComponent(this.route.snapshot.paramMap.get('invoiceTypeId')));
        this.company = this.route.snapshot.paramMap.get('company');
        this.gridConfigurationProvider.getConfiguration(this.company, this.componentId)
            .subscribe(function (configuration) {
            _this.initializeGridColumns();
            // -- used later if this will become L&S maybe
            // this.columnConfiguration = configuration.columns;
            // this.configurationLoaded.emit();
            // this.initColumns(this.columnConfiguration);
            _this.hasGridSharing = configuration.hasMultipleViewsPerUser;
        });
    };
    GoodsCostContractsCostComponent.prototype.onGridReady = function (params) {
        params.columnDefs = this.costContractGridColumns;
        this.costContractGridOptions = params;
        this.gridApi = params.api;
        this.gridColumnApi = params.columnApi;
        this.gridApi.showNoRowsOverlay();
        this.autoSizeContractsGrid();
    };
    GoodsCostContractsCostComponent.prototype.autoSizeContractsGrid = function () {
        if (this.gridColumnApi !== undefined) {
            var allColumnIds_1 = [];
            if (this.costContractGridColumns) {
                this.costContractGridColumns.forEach(function (columnDefs) {
                    allColumnIds_1.push(columnDefs.field);
                });
            }
            this.gridColumnApi.autoSizeColumns(allColumnIds_1);
        }
    };
    GoodsCostContractsCostComponent.prototype.onGridSizeChanged = function (params) {
        this.autoSizeContractsGrid();
    };
    GoodsCostContractsCostComponent.prototype.initializeGridColumns = function () {
        this.costContractGridColumns = [
            {
                headerName: 'Contract Reference',
                field: 'contractReference',
                colId: 'contractReference',
                hide: false,
                headerCheckboxSelection: true,
                checkboxSelection: true,
            },
            {
                headerName: 'Commodity',
                field: 'principalCommodity',
                colId: 'principalCommodity',
                hide: false,
            },
            {
                headerName: 'Supplier',
                field: 'supplierCode',
                colId: 'supplierCode',
                hide: false,
            },
            {
                headerName: 'Contract Term',
                field: 'contractTermCode',
                colId: 'contractTermCode',
                hide: false,
            },
            {
                headerName: 'Charter Reference',
                field: 'charterReference',
                colId: 'charterReference',
                hide: false,
            },
            {
                headerName: 'Contract Quantity',
                field: 'quantity',
                colId: 'quantity',
                hide: false,
                valueFormatter: this.amountFormatter.bind(this),
                editable: this.onRowSelectionChanged.bind(this),
                type: 'numericColumn',
                onCellValueChanged: this.onQuantityChanged.bind(this),
            },
            {
                headerName: 'Quantity Code',
                field: 'weightCode',
                colId: 'weightCode',
                hide: false,
            },
            {
                headerName: 'Cost Type',
                field: 'costTypeCode',
                colId: 'costTypeCode',
                hide: false,
            },
            {
                headerName: 'Pay/Rec',
                field: 'costDirection',
                colId: 'costDirection',
                hide: false,
            },
            {
                headerName: 'Currency',
                field: 'currencyCode',
                colId: 'currencyCode',
                hide: false,
            },
            {
                headerName: 'Rate/Amount',
                field: 'rate',
                colId: 'rate',
                hide: false,
                valueFormatter: this.amountFormatter.bind(this),
            },
            {
                headerName: 'Cost Amount',
                field: 'costAmount',
                colId: 'costAmount',
                valueGetter: this.calculateCostAmount.bind(this),
                valueFormatter: this.formatValue.bind(this),
                hide: false,
            },
            {
                headerName: 'Cost Amount to Invoice',
                field: 'costAmountToInvoice',
                colId: 'costAmountToInvoice',
                editable: this.onRowSelectionChanged.bind(this),
                valueSetter: this.setCostAmountToInvoice.bind(this),
                valueFormatter: this.formatValue.bind(this),
                onCellValueChanged: this.onQuantityChanged.bind(this),
                hide: false,
            },
            {
                headerName: '%Invoiced',
                field: 'invoicePercent',
                colId: 'invoicePercent',
                hide: false,
                valueSetter: this.setInvoicePercent.bind(this),
                valueFormatter: this.formatValue.bind(this),
                editable: this.onRowSelectionChanged.bind(this),
            },
            {
                headerName: 'Narrative',
                field: 'narrative',
                colId: 'narrative',
                hide: false,
            },
        ];
    };
    GoodsCostContractsCostComponent.prototype.onRowSelectionChanged = function (event) {
        var isSelected = event.node.selected ? true : false;
        return isSelected;
    };
    GoodsCostContractsCostComponent.prototype.formatValue = function (param) {
        if (isNaN(param.value) || param.value === null) {
            return '';
        }
        return new Intl.NumberFormat(this.formatType, { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(param.value);
    };
    GoodsCostContractsCostComponent.prototype.amountFormatter = function (param) {
        if (param && param.value) {
            var commonMethods = new _services_execution_cash_common_methods__WEBPACK_IMPORTED_MODULE_14__["CommonMethods"]();
            if (param.colDef.colId.toLowerCase() === 'quantity') {
                return commonMethods.getFormattedNumberValue(param.value, 3);
            }
            else {
                return commonMethods.getFormattedNumberValue(param.value, 4);
            }
        }
    };
    GoodsCostContractsCostComponent.prototype.setCostAmountToInvoice = function (params) {
        if (params.newValue <= 0) {
            this.snackbarService.informationSnackBar('0 or negative cost cannot be invoiced');
            params.data.costAmountToInvoice = params.data.costAmount;
        }
        else {
            var costAmount = params.data ? params.data.costAmount : params.costAmount;
            var tolerance = this.tolerancePercentage * 100;
            if (this.tolerancePercentage !== _shared_enums_tolerance_type_enum__WEBPACK_IMPORTED_MODULE_7__["ToleranceTypes"].Percentage) {
                var minToleranceBand = costAmount -
                    (costAmount * this.tolerancePercentage);
                var maxToleranceBand = costAmount +
                    (costAmount * this.tolerancePercentage);
                if (params.newValue < minToleranceBand || params.newValue > maxToleranceBand) {
                    this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_5__["ConfirmationDialogComponent"], {
                        data: {
                            title: 'Tolerance Information',
                            text: 'Cost Amount to Invoice is greater/less than ' + tolerance + '% – than the cost originally estimated',
                            okButton: 'Ok',
                        },
                    });
                }
            }
            if (params.newValue) {
                params.data.costAmountToInvoice = Number(params.newValue);
            }
        }
        return true;
    };
    GoodsCostContractsCostComponent.prototype.calculateCostAmount = function (params) {
        if (this.isCostAmountChanged) {
            if (params.data.rateTypeCode === _shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_6__["RateTypes"][_shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_6__["RateTypes"].Amount]) {
                params.data.costAmount = params.data.rate;
            }
            else if (params.data.rateTypeCode === _shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_6__["RateTypes"][_shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_6__["RateTypes"].Percent]) {
                params.data.costAmount = (Number(params.data.quantity) * params.data.price * params.data.rate * params.data.priceConversionFactor * params.data.weightConversionFactor / 100);
            }
            else if (params.data.rateTypeCode === _shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_6__["RateTypes"][_shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_6__["RateTypes"].Rate]) {
                params.data.costAmount =
                    Number(params.data.quantity) * params.data.priceConversionFactor * (params.data.weightConversionFactor) * params.data.rate;
            }
        }
        return params.data.costAmount;
    };
    GoodsCostContractsCostComponent.prototype.calculateCostAmountOnSelection = function (contract) {
        if (contract.rateTypeCode === _shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_6__["RateTypes"][_shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_6__["RateTypes"].Amount]) {
            contract.costAmount = contract.rate;
        }
        else if (contract.rateTypeCode === _shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_6__["RateTypes"][_shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_6__["RateTypes"].Percent]) {
            contract.costAmount = (Number(contract.quantity) * contract.price * contract.weightConversionFactor * contract.priceConversionFactor * contract.rate / 100);
        }
        else if (contract.rateTypeCode === _shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_6__["RateTypes"][_shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_6__["RateTypes"].Rate]) {
            contract.costAmount =
                Number(contract.quantity) * contract.priceConversionFactor * (contract.weightConversionFactor) * contract.rate;
        }
        return contract.costAmount;
    };
    GoodsCostContractsCostComponent.prototype.getContractsToInvoice = function (sectionIds, contracts) {
        var _this = this;
        this.isLoading = true;
        this.subscriptions.push(this.executionService.getCostForSelectedContracts(sectionIds)
            .subscribe(function (data) {
            _this.contractsToInvoice = data.value;
            contracts.forEach(function (selectedContractToInvoice) {
                _this.contractsToInvoice.forEach(function (contractToInvoice) {
                    if (contractToInvoice.sectionId === selectedContractToInvoice.sectionId) {
                        var oldContractQuantity = contractToInvoice.quantity;
                        var contractQuantity = selectedContractToInvoice.quantityToInvoice.toString();
                        contractToInvoice.quantityToInvoice = selectedContractToInvoice.quantityToInvoice;
                        contractToInvoice.originalQuantity = oldContractQuantity;
                    }
                });
            });
            _this.initializeGridColumns();
            _this.costContractGridRows = _this.contractsToInvoice;
            _this.dataLength = _this.costContractGridRows.length;
            _this.autoSizeContractsGrid();
            _this.isLoading = false;
            if (_this.dataLength) {
                _this.counterParty = _this.costContractGridRows[0].supplierCode;
            }
        }));
    };
    GoodsCostContractsCostComponent.prototype.onSelectionChanged = function (event) {
        var _this = this;
        var e_1, _a;
        var invoicedPercentage = 100;
        this.isApportionDisable = true;
        this.isApportion = true;
        var selectedRows = this.gridApi.getSelectedRows();
        if (!event.node.selected) {
            event.data.costAmountToInvoice = null;
            event.data.invoicePercent = null;
            event.data.costAmountToInvoice = null;
            event.data.invoicePercent = null;
            event.data.quantity = null;
        }
        else {
            selectedRows.forEach(function (selectedContract) {
                if (!selectedContract.costAmount) {
                    selectedContract.costAmountToInvoice = _this.calculateCostAmountOnSelection(selectedContract);
                    selectedContract.invoicePercent = invoicedPercentage;
                    _this.setCostAmountToInvoice(selectedContract);
                }
                else {
                    selectedContract.costAmountToInvoice = selectedContract.costAmount;
                    selectedContract.invoicePercent = invoicedPercentage;
                    _this.setCostAmountToInvoice(selectedContract);
                }
                var oldContractQuantity = selectedContract.quantity;
                if (selectedContract.quantityToInvoice) {
                    selectedContract.quantity = selectedContract.quantityToInvoice.toString();
                    selectedContract.quantityToInvoice = null;
                    _this.quantityOnSelectionChanged(selectedContract.quantity, oldContractQuantity, selectedContract);
                }
                else if (!selectedContract.quantity) {
                    selectedContract.quantity = selectedContract.originalQuantity;
                    selectedContract.invoicePercent = invoicedPercentage;
                    selectedContract.costAmountToInvoice = _this.calculateCostAmountOnSelection(selectedContract);
                    _this.quantityOnSelectionChanged(selectedContract.quantity, selectedContract.quantity, selectedContract);
                }
                else {
                    selectedContract.invoicePercent = invoicedPercentage;
                    selectedContract.costAmountToInvoice = _this.calculateCostAmountOnSelection(selectedContract);
                    _this.quantityOnSelectionChanged(selectedContract.quantity, selectedContract.originalQuantity, selectedContract);
                }
            });
            if (selectedRows.length > 1) {
                var costDirection = void 0;
                var costTypeCode = void 0;
                this.isApportionDisable = false;
                try {
                    for (var selectedRows_1 = __values(selectedRows), selectedRows_1_1 = selectedRows_1.next(); !selectedRows_1_1.done; selectedRows_1_1 = selectedRows_1.next()) {
                        var row = selectedRows_1_1.value;
                        if (!costDirection && row) {
                            costDirection = row.costDirection;
                        }
                        if (!costTypeCode && row) {
                            costTypeCode = row.costTypeCode;
                        }
                        if (row && ((costDirection !== row.costDirection)
                            || (costTypeCode !== row.costTypeCode))) {
                            this.isApportion = false;
                        }
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (selectedRows_1_1 && !selectedRows_1_1.done && (_a = selectedRows_1.return)) _a.call(selectedRows_1);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
            }
        }
        this.isContractSelected = selectedRows.length > 0;
        this.costContractsSelected.emit(this.isContractSelected);
        this.selectedCostContracts = selectedRows;
    };
    GoodsCostContractsCostComponent.prototype.onColumnVisibilityChanged = function (col) {
        this.userPreferencesComponent.onChangeColumnVisibility(col);
        this.autoSizeContractsGrid();
    };
    GoodsCostContractsCostComponent.prototype.setTolerancePercentage = function (tolerancePercentage) {
        this.tolerancePercentage = tolerancePercentage;
    };
    GoodsCostContractsCostComponent.prototype.onRowDataChanged = function (params) {
        if (this.counterParty) {
            var counterPartyFilterComponent = this.gridApi.getFilterInstance('supplierCode');
            counterPartyFilterComponent.setModel({
                type: 'set',
                values: [this.counterParty],
            });
            this.gridApi.onFilterChanged();
        }
    };
    GoodsCostContractsCostComponent.prototype.onQuantityChanged = function (params) {
        var validQuantity = true;
        if (params.newValue > params.data.originalQuantity) {
            validQuantity = false;
            params.data.quantity = Number(params.oldValue);
        }
        else {
            params.data.quantity = Number(params.newValue);
        }
        if (!validQuantity) {
            this.snackbarService.informationSnackBar('Quantity cannot be greater than contract quantity');
        }
        else {
            if (params && params.data) {
                var invoicePercercentage = (100 * params.newValue) / params.oldValue;
                params.data.invoicePercent = (params.data.invoicePercent * invoicePercercentage) / 100;
                params.data.costAmount = (params.data.costAmount * invoicePercercentage) / 100;
                params.data.costAmountToInvoice = (params.data.costAmountToInvoice * invoicePercercentage) / 100;
            }
        }
        if (this.gridApi) {
            this.gridApi.refreshCells(params.data);
        }
    };
    GoodsCostContractsCostComponent.prototype.quantityOnSelectionChanged = function (quantity, oldQuantity, contractToInvoice) {
        if (quantity) {
            var invoicePercercentage = (100 * parseInt(quantity)) / parseInt(oldQuantity);
            contractToInvoice.invoicePercent = (contractToInvoice.invoicePercent * invoicePercercentage) / 100;
            contractToInvoice.costAmount = (contractToInvoice.costAmount * invoicePercercentage) / 100;
            contractToInvoice.costAmountToInvoice = (contractToInvoice.costAmountToInvoice * invoicePercercentage) / 100;
        }
    };
    GoodsCostContractsCostComponent.prototype.onApportionButtonClicked = function () {
        var _this = this;
        if (this.isApportion) {
            this.getTotalQuantityAndTotalInvoiceValue();
            var openApportiontDialog = this.dialog.open(_dialog_boxes_apportion_dialog_apportion_dialog_component__WEBPACK_IMPORTED_MODULE_15__["ApportionDialogComponent"], {
                width: '40%',
                height: '60%',
                data: {
                    selectedRows: this.selectedCostContracts,
                    totalQuantity: this.totalQuantity,
                    totalInvoiceValue: this.totalInvocieValue,
                },
            });
            openApportiontDialog.afterClosed().subscribe(function (updatedCostContracts) {
                _this.updateSelectedCostRows(updatedCostContracts);
                _this.isCostAmountChanged = false;
            });
        }
        else {
            this.snackbarService.informationSnackBar('Apportion Cannot be done for multiple costs types or if there is a mix of Pay/Rec');
        }
    };
    GoodsCostContractsCostComponent.prototype.getTotalQuantityAndTotalInvoiceValue = function () {
        var _this = this;
        this.totalQuantity = 0;
        this.totalInvocieValue = 0;
        if (this.selectedCostContracts) {
            this.selectedCostContracts.forEach(function (costContract) {
                _this.totalQuantity += Number(costContract.quantity);
                _this.totalInvocieValue += costContract.costAmountToInvoice;
            });
        }
    };
    GoodsCostContractsCostComponent.prototype.updateSelectedCostRows = function (updatedCostContracts) {
        if (updatedCostContracts) {
            this.gridApi.updateRowData({ update: updatedCostContracts });
        }
    };
    GoodsCostContractsCostComponent.prototype.setInvoicePercent = function (params) {
        if (params.newValue <= 0 || !params.data.invoicePercent) {
            this.snackbarService.informationSnackBar('Invoice Percentage cannot be 0 or negative');
            params.data.invoicePercent = params.oldValue < 1 ? 1 : params.oldValue;
        }
        else if (params.newValue > 100) {
            this.snackbarService.informationSnackBar('Invoice Percentage cannot be greater than 100');
            params.data.invoicePercent = params.oldValue < 100 ? params.oldValue : 100;
        }
        else if ((params.newValue > params.oldValue)) {
            this.snackbarService.informationSnackBar('Invoice Percentage cannot be greater available percentage');
            params.data.invoicePercent = params.oldValue;
        }
        else {
            params.data.invoicePercent = params.newValue;
        }
        return true;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('userPreferences'),
        __metadata("design:type", _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_3__["AgGridUserPreferencesComponent"])
    ], GoodsCostContractsCostComponent.prototype, "userPreferencesComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], GoodsCostContractsCostComponent.prototype, "costContractsSelected", void 0);
    GoodsCostContractsCostComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-goods-cost-contracts-cost',
            template: __webpack_require__(/*! ./goods-cost-contracts-cost.component.html */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection-cost/components/goods-cost-contracts-cost/goods-cost-contracts-cost.component.html"),
            styles: [__webpack_require__(/*! ./goods-cost-contracts-cost.component.scss */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection-cost/components/goods-cost-contracts-cost/goods-cost-contracts-cost.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_11__["ExecutionService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"], _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_9__["FormConfigurationProviderService"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_13__["UiService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_1__["MatDialog"],
            _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_10__["GridConfigurationProviderService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_12__["SnackbarService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_8__["AgGridService"]])
    ], GoodsCostContractsCostComponent);
    return GoodsCostContractsCostComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection-cost/goods-cost-selection-cost.component.html":
/*!*******************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection-cost/goods-cost-selection-cost.component.html ***!
  \*******************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<atlas-goods-cost-invoice-selection #goodsCostInvoiceSelectionComponent>\r\n</atlas-goods-cost-invoice-selection>\r\n<atlas-goods-cost-contracts-cost #goodsCostContractsCostComponent>\r\n</atlas-goods-cost-contracts-cost>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection-cost/goods-cost-selection-cost.component.scss":
/*!*******************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection-cost/goods-cost-selection-cost.component.scss ***!
  \*******************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection-cost/goods-cost-selection-cost.component.ts":
/*!*****************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection-cost/goods-cost-selection-cost.component.ts ***!
  \*****************************************************************************************************************************************/
/*! exports provided: GoodsCostSelectionCostComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoodsCostSelectionCostComponent", function() { return GoodsCostSelectionCostComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _goods_cost_selection_components_goods_cost_invoice_selection_goods_cost_invoice_selection_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../goods-cost-selection/components/goods-cost-invoice-selection/goods-cost-invoice-selection.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-invoice-selection/goods-cost-invoice-selection.component.ts");
/* harmony import */ var _components_goods_cost_contracts_cost_goods_cost_contracts_cost_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./components/goods-cost-contracts-cost/goods-cost-contracts-cost.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection-cost/components/goods-cost-contracts-cost/goods-cost-contracts-cost.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var GoodsCostSelectionCostComponent = /** @class */ (function (_super) {
    __extends(GoodsCostSelectionCostComponent, _super);
    function GoodsCostSelectionCostComponent(formBuilder, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.formComponents = [];
        return _this;
    }
    GoodsCostSelectionCostComponent.prototype.ngOnInit = function () {
        this.goodsCostSelectionCostFormGroup = this.formBuilder.group({
            goodsCostContractsCostComponent: this.goodsCostContractsCostComponent.getFormGroup(),
        });
        this.formComponents.push(this.goodsCostContractsCostComponent);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('goodsCostInvoiceSelectionComponent'),
        __metadata("design:type", _goods_cost_selection_components_goods_cost_invoice_selection_goods_cost_invoice_selection_component__WEBPACK_IMPORTED_MODULE_4__["GoodsCostInvoiceSelectionComponent"])
    ], GoodsCostSelectionCostComponent.prototype, "goodsCostInvoiceSelectionComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('goodsCostContractsCostComponent'),
        __metadata("design:type", _components_goods_cost_contracts_cost_goods_cost_contracts_cost_component__WEBPACK_IMPORTED_MODULE_5__["GoodsCostContractsCostComponent"])
    ], GoodsCostSelectionCostComponent.prototype, "goodsCostContractsCostComponent", void 0);
    GoodsCostSelectionCostComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-goods-cost-selection-cost',
            template: __webpack_require__(/*! ./goods-cost-selection-cost.component.html */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection-cost/goods-cost-selection-cost.component.html"),
            styles: [__webpack_require__(/*! ./goods-cost-selection-cost.component.scss */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection-cost/goods-cost-selection-cost.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_3__["FormConfigurationProviderService"]])
    ], GoodsCostSelectionCostComponent);
    return GoodsCostSelectionCostComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-contract-search/goods-cost-contract-search.component.html":
/*!*****************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-contract-search/goods-cost-contract-search.component.html ***!
  \*****************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div fxLayout=\"column\"\r\n     fxLayoutAlign=\"start none\">\r\n    <mat-card>\r\n        <form [formGroup]=\"searchContractForm\">\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"start none\"\r\n                 class=\"search\">\r\n                <mat-form-field>\r\n                    <input matInput\r\n                           fxFlex=\"30%\"\r\n                           placeholder=\"Contract Search\"\r\n                           (keydown.enter)=\"onSearchButtonClicked()\"\r\n                           formControlName=\"searchContractReferenceCtrl\" />\r\n                </mat-form-field>\r\n                <atlas-masterdata-user-preferences-input fxFlex=\"30%\"\r\n                                                         isEditable=\"true\"\r\n                                                         [fieldControl]=\"charterReferenceCtrl\"\r\n                                                         [options]=\"filteredCharters\"\r\n                                                         label=\"Charter Reference\"\r\n                                                         (keydown.enter)=\"onSearchButtonClicked()\"\r\n                                                         displayProperty=\"charterCode\"\r\n                                                         [selectProperties]=\"['charterCode','description']\"\r\n                                                         [errorMap]=\"charterErrorMap\"\r\n                                                         lightBoxTitle=\"Results for charters\"\r\n                                                         gridId=\"charterGrid\"\r\n                                                         [dataLoader]=\"charterDataLoader\">\r\n                </atlas-masterdata-user-preferences-input>\r\n                <atlas-masterdata-user-preferences-input fxFlex=\"30%\"\r\n                                                         isEditable=\"true\"\r\n                                                         [fieldControl]=\"counterPartyCtrl\"\r\n                                                         [options]=\"filteredCounterPartyList\"\r\n                                                         label=\"Counter Party\"\r\n                                                         (keydown.enter)=\"onSearchButtonClicked()\"\r\n                                                         displayProperty=\"counterpartyCode\"\r\n                                                         [selectProperties]=\"['counterpartyCode', 'description']\"\r\n                                                         [errorMap]=\"counterpartyErrorMap\"\r\n                                                         lightBoxTitle=\"Results for Counterparty\"\r\n                                                         gridId=\"counterpartiesGrid\"\r\n                                                         [dataLoader]=\"counterpartyDataLoader\">\r\n                </atlas-masterdata-user-preferences-input>\r\n                <button mat-raised-button\r\n                        (click)=\"onSearchButtonClicked()\"\r\n                        class=\"heroGradient\">\r\n                    <mat-icon aria-label=\"Search\"\r\n                              class=\"search-icon\">search</mat-icon>\r\n                </button>\r\n            </div>\r\n        </form>\r\n    </mat-card>\r\n</div>\r\n<atlas-filter-set-display (filtersChanged)=\"onFilterSetDetailsChange($event)\"\r\n                          [columnConfiguration]=\"columnConfiguration\"\r\n                          [gridCode]=\"gridCode\"\r\n                          [company]=\"company\"\r\n                          #filterSetDisplayComponent>\r\n</atlas-filter-set-display>\r\n<div fxLayout=\"row\"\r\n     fxLayoutAlign=\"start none\">\r\n    <mat-card fxFlex=\"100\">\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"center center\"\r\n             fxLayoutWrap\r\n             *ngIf=\"isLoading\"\r\n             class=\"loading\">\r\n            <mat-spinner color=\"accent\"></mat-spinner>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             class=\"atlas-grid-card-header\">\r\n            <span class=\"fill-space\"></span>\r\n            <atlas-ag-grid-user-preferences *ngIf=\"invoiceContractGridOptions && invoiceContractGridOptions.columnDefs\"\r\n                                            [gridOptions]=\"invoiceContractGridOptions\"\r\n                                            [company]=\"company\"\r\n                                            [gridId]=\"gridCode\"\r\n                                            [sharingEnabled]=\"hasGridSharing\"\r\n                                            #userPreferences>\r\n            </atlas-ag-grid-user-preferences>\r\n        </div>\r\n        <div ag-grid=\"invoiceContractGridOptions\"\r\n             class=\"ag-theme-material pointer-cursor\">\r\n            <ag-grid-angular style=\" height:100%;\"\r\n                             class=\"ag-theme-material\"\r\n                             [rowData]=\"invoiceContractGridRows\"\r\n                             [gridOptions]=\"invoiceContractGridOptions\"\r\n                             [columnDefs]=\"columnDefs\"\r\n                             domLayout=\"autoHeight\"\r\n                             (gridReady)=\"onGridReady($event)\"\r\n                             (firstDataRendered)=\"onFirstDataRendered($event)\"\r\n                             rowSelection=\"multiple\"\r\n                             [singleClickEdit]=\"true\"\r\n                             [suppressRowClickSelection]=\"true\"\r\n                             (rowSelected)=\"onSelectionChanged($event)\"\r\n                             (columnVisible)=\"onColumnVisibilityChanged($event)\"\r\n                             (cellValueChanged)=\"onCellValueChanged($event)\"\r\n                             [pagination]=\"true\"\r\n                             [paginationPageSize]=\"10\"\r\n                             [enableSorting]=\"true\"\r\n                             [enableColResize]=\"true\"\r\n                             enableFilter\r\n                             [rowHeight]=atlasAgGridParam.rowHeight\r\n                             (rowDataChanged)=\"onRowDataChanged($event)\">\r\n            </ag-grid-angular>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"end center\">\r\n            <mat-card-subtitle class=\"total-figure\">\r\n                Total Quantity : <span class=\"total-figure-value\">\r\n                    {{formatQuantity(this.totalQuantity)}}\r\n                </span>\r\n            </mat-card-subtitle>\r\n        </div>\r\n    </mat-card>\r\n\r\n    <atlas-lock-interval [resourcesInformation]=\"resourcesInformation\">\r\n    </atlas-lock-interval>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-contract-search/goods-cost-contract-search.component.scss":
/*!*****************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-contract-search/goods-cost-contract-search.component.scss ***!
  \*****************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-contract-search/goods-cost-contract-search.component.ts":
/*!***************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-contract-search/goods-cost-contract-search.component.ts ***!
  \***************************************************************************************************************************************************************************/
/*! exports provided: GoodsCostContractSearchComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoodsCostContractSearchComponent", function() { return GoodsCostContractSearchComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component */ "./Client/app/shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _shared_dtos_list_and_search_list_and_search_filter_dto_dto__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/dtos/list-and-search/list-and-search-filter-dto.dto */ "./Client/app/shared/dtos/list-and-search/list-and-search-filter-dto.dto.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_list_and_search_list_and_search_filter_entity__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../../../shared/entities/list-and-search/list-and-search-filter.entity */ "./Client/app/shared/entities/list-and-search/list-and-search-filter.entity.ts");
/* harmony import */ var _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../../../shared/entities/lock-functional-context.entity */ "./Client/app/shared/entities/lock-functional-context.entity.ts");
/* harmony import */ var _shared_entities_lock_resource_information_entity__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../../../shared/entities/lock-resource-information.entity */ "./Client/app/shared/entities/lock-resource-information.entity.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../../../shared/enums/contract-type.enum */ "./Client/app/shared/enums/contract-type.enum.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_enums_list_and_search_filter_type_enum__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../../../shared/enums/list-and-search-filter-type.enum */ "./Client/app/shared/enums/list-and-search-filter-type.enum.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_execution_charter_data_loader__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../../../../shared/services/execution/charter-data-loader */ "./Client/app/shared/services/execution/charter-data-loader.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../../../../../shared/services/grid-configuration-provider.service */ "./Client/app/shared/services/grid-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/lock.service */ "./Client/app/shared/services/http-services/lock.service.ts");
/* harmony import */ var _shared_services_masterdata_counterparty_data_loader__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../../../../../shared/services/masterdata/counterparty-data-loader */ "./Client/app/shared/services/masterdata/counterparty-data-loader.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _services_execution_actions_service__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../../../../../services/execution-actions.service */ "./Client/app/execution/services/execution-actions.service.ts");
/* harmony import */ var _shared_components_filter_set_display_filter_set_display_component__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./../../../../../../../shared/components/filter-set-display/filter-set-display.component */ "./Client/app/shared/components/filter-set-display/filter-set-display.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __values = (undefined && undefined.__values) || function (o) {
    var m = typeof Symbol === "function" && o[Symbol.iterator], i = 0;
    if (m) return m.call(o);
    return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
};





























var GoodsCostContractSearchComponent = /** @class */ (function (_super) {
    __extends(GoodsCostContractSearchComponent, _super);
    function GoodsCostContractSearchComponent(formBuilder, executionService, route, snackbarService, formConfigurationProvider, uiService, lockService, dialog, gridConfigurationProvider, utilService, counterpartyDataLoader, charterDataLoader, agGridService, gridService, executionActionsService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.executionService = executionService;
        _this.route = route;
        _this.snackbarService = snackbarService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.uiService = uiService;
        _this.lockService = lockService;
        _this.dialog = dialog;
        _this.gridConfigurationProvider = gridConfigurationProvider;
        _this.utilService = utilService;
        _this.counterpartyDataLoader = counterpartyDataLoader;
        _this.charterDataLoader = charterDataLoader;
        _this.agGridService = agGridService;
        _this.gridService = gridService;
        _this.executionActionsService = executionActionsService;
        _this.commoditySelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.contractsSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.invoiceContractGridOptions = {};
        _this.dataLength = 0;
        _this.totalQuantity = 0;
        _this.formatType = 'en-US';
        // componentId: string = 'invoiceContract';
        _this.decimalOptionValue = 3;
        _this.isContractSelected = false;
        _this.isBusinessSectorPostingProcess = false;
        _this.resourcesInformation = new Array();
        _this.locking = [];
        _this.unlocking = [];
        _this.columnConfiguration = [];
        _this.hasGridSharing = false;
        _this.additionnalColumns = [
            {
                headerName: 'Uninvoiced Quantity',
                field: 'uninvoicedQuantity',
                colId: 'uninvoicedQuantity',
                type: 'numericColumn',
                hide: false,
                valueGetter: _this.getUnInvoicedQuantity,
                valueFormatter: _this.formatValue.bind(_this),
            },
            {
                headerName: 'Quantity to invoice',
                field: 'quantityToInvoice',
                colId: 'quantityToInvoice',
                type: 'numericColumn',
                hide: false,
                editable: _this.isQuantityToInvoiceEditable.bind(_this),
                valueSetter: _this.setQuantityToInvoice.bind(_this),
                valueFormatter: _this.formatValue.bind(_this),
            },
        ];
        _this.masterdata = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_13__["MasterData"]();
        _this.counterPartyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_9__["AtlasFormControl"]('CounterPartyGoodsCost');
        _this.charterReferenceCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_9__["AtlasFormControl"]('CharterRefGoodsCost');
        _this.counterpartyErrorMap = new Map()
            .set('inDropdownList', 'Invalid entry. Counter Party not in the list.');
        _this.charterErrorMap = new Map();
        _this.count = 0;
        _this.atlasAgGridParam = _this.gridService.getAgGridParam();
        _this.searchContractForm = _this.formBuilder.group({
            searchContractReferenceCtrl: [''],
        });
        return _this;
    }
    GoodsCostContractSearchComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.invoiceType = Number(decodeURIComponent(this.route.snapshot.paramMap.get('invoiceTypeId')));
        this.company = this.route.snapshot.paramMap.get('company');
        this.masterdata = this.route.snapshot.data.masterdata;
        this.isLoading = true;
        this.gridCode = this.invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_15__["InvoiceTypes"].GoodsCostPurchase ? 'invoicePurcGoodsSelectionGrid' : 'invoiceSaleGoodsSelectionGrid';
        this.filteredCounterPartyList = this.masterdata.counterparties;
        this.counterPartyList = this.filteredCounterPartyList;
        this.counterPartyCtrl.valueChanges.subscribe(function (input) {
            _this.filterCounterParty(input);
        });
        this.populateCharterList();
        this.charterReferenceCtrl.valueChanges.subscribe(function (input) {
            _this.filterCharterReference(input);
        });
        this.loadGridConfiguration();
        this.route.queryParams.subscribe(function (params) {
            _this.saveContractRef = params['savedContractReference'];
            _this.saveCounterparty = params['savedCounterParty'];
            _this.saveCharterReference = params['savedCharterReference'];
        });
        if (this.executionActionsService.EditCriteriaRetainFilter && this.executionActionsService.EditCriteriaRetainFilter.length > 0) {
            this.savedFilters = this.executionActionsService.EditCriteriaRetainFilter;
        }
        if (this.saveContractRef || this.saveCounterparty || this.saveCharterReference) {
            if (this.saveContractRef) {
                this.searchContractForm.controls['searchContractReferenceCtrl'].setValue(this.saveContractRef);
            }
            if (this.saveCounterparty) {
                this.counterPartyControl = this.counterPartyList.find(function (counterParty) {
                    return counterParty.counterpartyCode === _this.saveCounterparty;
                });
                this.counterPartyCtrl.patchValue(this.counterPartyControl);
            }
            if (this.saveCharterReference) {
                this.charterRefControl = this.charters.find(function (charter) {
                    return charter.charterCode === _this.saveCharterReference;
                });
                this.charterReferenceCtrl.patchValue(this.charterRefControl);
            }
        }
        this.getBusinessSectorConfiguration();
        if (this.agGridOptions) {
            this.agGridService.sizeColumns(this.agGridOptions);
        }
    };
    GoodsCostContractSearchComponent.prototype.getBusinessSectorConfiguration = function () {
        var _this = this;
        this.executionService.getBusinessSectorForPosting()
            .subscribe(function (data) {
            if (data) {
                _this.isBusinessSectorPostingProcess = data.businessSectorNominalPostingPurpose;
            }
        });
    };
    GoodsCostContractSearchComponent.prototype.populateCharterList = function () {
        var _this = this;
        this.charterDataLoader.getData().subscribe(function (charter) {
            _this.charters = charter;
            _this.filteredCharters = _this.charters;
        });
    };
    GoodsCostContractSearchComponent.prototype.filterCounterParty = function (input) {
        this.filteredCounterPartyList = this.utilService.filterListforAutocomplete(input, this.masterdata.counterparties, ['counterpartyCode', 'description']);
        if (this.counterPartyCtrl.valid || !this.counterPartyCtrl.value) {
            this.onSearchButtonClicked();
        }
    };
    GoodsCostContractSearchComponent.prototype.filterCharterReference = function (input) {
        this.filteredCharters = this.utilService.filterListforAutocomplete(input, this.charters, ['charterCode', 'description']);
        if (this.charterReferenceCtrl.valid || !this.charterReferenceCtrl.value) {
            this.onSearchButtonClicked();
        }
    };
    GoodsCostContractSearchComponent.prototype.formatValue = function (param) {
        if (isNaN(param.value) || param.value === null) {
            return '';
        }
        return new Intl.NumberFormat(this.formatType, { minimumFractionDigits: 3, maximumFractionDigits: 3 }).format(param.value);
    };
    GoodsCostContractSearchComponent.prototype.onGridReady = function (params) {
        params.columnDefs = this.invoiceContractGridColumns;
        this.invoiceContractGridOptions = params;
        this.gridApi = params.api;
        this.gridColumnApi = params.columnApi;
        this.gridApi.showNoRowsOverlay();
        this.gridColumnApi.autoSizeAllColumns();
        this.agGridOptions = params;
    };
    GoodsCostContractSearchComponent.prototype.autoSizeContractsGrid = function () {
        if (this.gridColumnApi) {
            this.gridColumnApi.autoSizeAllColumns();
        }
    };
    GoodsCostContractSearchComponent.prototype.onGridSizeChanged = function (params) {
        this.autoSizeContractsGrid();
        this.gridColumnApi.autoSizeAllColumns();
    };
    GoodsCostContractSearchComponent.prototype.getUnInvoicedQuantity = function (params) {
        if (params.data.contractQuantity - params.data.invoicedQuantity > 0) {
            return params.data.contractQuantity - params.data.invoicedQuantity;
        }
        else if (params.data.contractQuantity - params.data.invoicedQuantity < 0) {
            return 0;
        }
    };
    GoodsCostContractSearchComponent.prototype.setQuantityToInvoice = function (params) {
        if (params) {
            var validQuantity = true;
            var invalidValue = true;
            if (params.newValue > (params.data.contractQuantity - params.data.invoicedQuantity)) {
                validQuantity = false;
                params.data.quantityToInvoice = (params.data.contractQuantity - params.data.invoicedQuantity);
            }
            else if (params.newValue <= 0) {
                invalidValue = false;
                params.data.quantityToInvoice = (params.data.contractQuantity - params.data.invoicedQuantity);
            }
            else {
                params.data.quantityToInvoice = Number(params.newValue);
            }
            if (!validQuantity) {
                this.snackbarService.informationSnackBar('Quantity cannot be greater than uninvoiced quantity');
            }
            if (!invalidValue) {
                this.snackbarService.informationSnackBar('Quantity cannot be zero or negative');
            }
        }
        else {
            return false;
        }
        return true;
    };
    GoodsCostContractSearchComponent.prototype.getContractsToInvoice = function () {
        var _this = this;
        if (!this.filters || !(this.columnConfiguration)) {
            return;
        }
        else if (this.columnConfiguration.length > 0 && this.columnConfiguration) {
            var filters = this.filters.map(function (x) { return (__assign({}, x)); });
            this.isLoading = true;
            var contractType = void 0;
            if (this.invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_15__["InvoiceTypes"].GoodsCostPurchase) {
                contractType = _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_14__["ContractTypes"].Purchase;
            }
            else if (this.invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_15__["InvoiceTypes"].GoodsCostSales) {
                contractType = _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_14__["ContractTypes"].Sale;
            }
            var contractTypeCodeColumn = this.columnConfiguration
                .find(function (column) { return column.fieldName === 'ContractTypeCode'; });
            if (this.invoiceType && contractTypeCodeColumn && _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_14__["ContractTypes"][contractType]) {
                var filterContractType = new _shared_entities_list_and_search_list_and_search_filter_entity__WEBPACK_IMPORTED_MODULE_10__["ListAndSearchFilter"]();
                filterContractType.fieldId = contractTypeCodeColumn.fieldId;
                filterContractType.fieldName = contractTypeCodeColumn.fieldName;
                filterContractType.predicate = {
                    filterType: _shared_enums_list_and_search_filter_type_enum__WEBPACK_IMPORTED_MODULE_16__["ListAndSearchFilterType"].Text,
                    operator: 'eq',
                    value1: _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_14__["ContractTypes"][contractType],
                };
                filterContractType.isActive = true;
                filters.push(filterContractType);
            }
            if (this.invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_15__["InvoiceTypes"].GoodsCostPurchase) {
                this.executionService.searchContractsToPurchaseInvoiceForCommercial(filters)
                    .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["finalize"])(function () {
                    _this.isLoading = false;
                }))
                    .subscribe(function (data) {
                    _this.contractsToInvoice = data;
                    _this.getData();
                });
            }
            else if (this.invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_15__["InvoiceTypes"].GoodsCostSales) {
                this.executionService.searchContractsToSaleInvoiceForCommercial(filters)
                    .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["finalize"])(function () {
                    _this.isLoading = false;
                }))
                    .subscribe(function (data) {
                    _this.contractsToInvoice = data;
                    _this.getData();
                });
            }
        }
    };
    GoodsCostContractSearchComponent.prototype.getData = function () {
        this.invoiceContractGridRows = this.contractsToInvoice.filter(function (contract) {
            return (contract.contractQuantity - contract.invoicedQuantity) > 0;
        });
        this.allContracts = this.invoiceContractGridRows;
        this.dataLength = this.invoiceContractGridRows.length;
        // this.autoSizeContractsGrid();
        if (this.dataLength && this.dataLength > 0) {
            this.counterParty = this.invoiceContractGridRows[0].counterparty;
        }
        if (this.filters.length === 0) {
            if (this.saveContractRef || this.saveCounterparty || this.saveCharterReference) {
                this.onSearchButtonClicked();
            }
        }
    };
    GoodsCostContractSearchComponent.prototype.onSearchButtonClicked = function () {
        var _this = this;
        this.searchTerm = this.searchContractForm.get('searchContractReferenceCtrl').value;
        if (this.counterPartyCtrl.value === '') {
            this.searchCounterPartyTerm = this.counterPartyCtrl.value;
        }
        else if (this.counterPartyCtrl.value) {
            this.searchCounterPartyTerm = this.counterPartyCtrl.value.counterpartyCode;
            if (!this.searchCounterPartyTerm) {
                this.searchCounterPartyTerm = this.counterPartyCtrl.value;
            }
        }
        if (this.charterReferenceCtrl.value === '') {
            this.searchCharterTerm = this.charterReferenceCtrl.value;
        }
        else {
            if (this.charterReferenceCtrl.value) {
                this.searchCharterTerm = this.charterReferenceCtrl.value.charterCode;
                if (this.searchCharterTerm) {
                    this.searchCharterTerm = this.charterReferenceCtrl.value;
                }
            }
        }
        if (!this.searchTerm && !this.searchCharterTerm && !this.searchCounterPartyTerm) {
            this.invoiceContractGridRows = this.allContracts;
        }
        else {
            this.isLoading = true;
            // added check to avoid runtime error with Array.Find
            if (this.allContracts && this.allContracts.length > 0) {
                this.contractsToInvoice = this.allContracts;
                this.filters = [];
                if (this.searchTerm && !(this.searchTerm === '')) {
                    this.contractsToInvoice = this.contractsToInvoice.filter(function (item) {
                        return item.contractReference.toString().toUpperCase().includes(_this.searchTerm.toUpperCase());
                    });
                }
                if (this.searchCharterTerm && !(this.searchCharterTerm === '')) {
                    var charterValue_1 = this.charterReferenceCtrl.value.charterCode;
                    if (charterValue_1) {
                        this.contractsToInvoice = this.contractsToInvoice.filter(function (item) { return item.charter != null; });
                        this.contractsToInvoice = this.contractsToInvoice.filter(function (item) {
                            return item.charter.toString().toUpperCase().includes(charterValue_1.toUpperCase());
                        });
                    }
                }
                if (this.searchCounterPartyTerm && !(this.searchCounterPartyTerm === '')) {
                    this.contractsToInvoice = this.contractsToInvoice.filter(function (item) { return item.counterparty != null; });
                    this.contractsToInvoice = this.contractsToInvoice.filter(function (item) {
                        return item.counterparty.toString().toUpperCase().includes(_this.searchCounterPartyTerm.toUpperCase());
                    });
                }
            }
            this.invoiceContractGridRows = this.contractsToInvoice;
        }
        this.dataLength = this.invoiceContractGridRows.length;
        this.autoSizeContractsGrid();
        this.isLoading = false;
        if (this.dataLength && this.dataLength > 0) {
            this.counterParty = this.invoiceContractGridRows[0].counterparty;
        }
        (this.invoiceContractGridRows) ? this.gridApi.hideOverlay() : this.gridApi.showNoRowsOverlay();
    };
    GoodsCostContractSearchComponent.prototype.onSelectionChanged = function (event) {
        var _this = this;
        var e_1, _a;
        this.totalQuantity = 0;
        var selectedRows = this.gridApi.getSelectedRows();
        var currentRowIndex = event.rowIndex;
        var validQuantity = true;
        var valid = true;
        var validBusinessSector = true;
        if (event.node.isSelected()) {
            selectedRows.forEach(function (selectedContract) {
                if (selectedContract.contractQuantity > selectedContract.invoicedQuantity) {
                    if (selectedContract.quantityToInvoice === 0) {
                        selectedContract.quantityToInvoice =
                            (selectedContract.contractQuantity - selectedContract.invoicedQuantity);
                    }
                    _this.gridApi.refreshCells(event.data);
                    _this.totalQuantity += selectedContract.quantityToInvoice;
                }
                else {
                    validQuantity = false;
                }
            });
        }
        else {
            event.data.quantityToInvoice = 0;
            this.gridApi.refreshCells(event.data);
        }
        if (selectedRows.length > 1) {
            var currencySelected = void 0;
            var counterpartySelected = void 0;
            var businessSectorSelected = void 0;
            try {
                for (var selectedRows_1 = __values(selectedRows), selectedRows_1_1 = selectedRows_1.next(); !selectedRows_1_1.done; selectedRows_1_1 = selectedRows_1.next()) {
                    var row = selectedRows_1_1.value;
                    if (!currencySelected) {
                        currencySelected = row.currencyCode;
                    }
                    if (!counterpartySelected) {
                        counterpartySelected = row.counterparty;
                    }
                    if (!businessSectorSelected) {
                        businessSectorSelected = row.businessSector;
                    }
                    if (currencySelected !== row.currencyCode || counterpartySelected !== row.counterparty) {
                        valid = false;
                        break;
                    }
                    if (this.isBusinessSectorPostingProcess) {
                        if (businessSectorSelected !== row.businessSector) {
                            validBusinessSector = false;
                            break;
                        }
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (selectedRows_1_1 && !selectedRows_1_1.done && (_a = selectedRows_1.return)) _a.call(selectedRows_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
        if (!valid) {
            this.snackbarService.informationSnackBar('Currency & Counterparty should be same');
        }
        if (!validBusinessSector) {
            this.snackbarService.informationSnackBar('While invoicing, Business Sector must be the same');
        }
        if (!validQuantity) {
            this.snackbarService.informationSnackBar('Value cannot be negative or more than the uninvoiced quantity');
        }
        var rowNode;
        this.invoiceContractGridOptions.api.forEachNode(function (node) {
            if (Number(node.id) === currentRowIndex) {
                rowNode = node;
                if (valid === false || validQuantity === false || validBusinessSector === false) {
                    _this.invoiceContractGridOptions.api.deselectNode(node);
                }
            }
        });
        this.checkCommoditySelected(selectedRows);
        this.isContractSelected = selectedRows.length > 0;
        this.contractsSelected.emit(this.isContractSelected);
        this.grantLock(Number(event.data.sectionId), event.node);
        this.selectedContractsToInvoice = selectedRows;
    };
    GoodsCostContractSearchComponent.prototype.grantLock = function (sectionId, node) {
        var _this = this;
        if (node.isSelected()) {
            if (!this.locking.includes(sectionId)) {
                this.locking.push(sectionId);
                this.subscriptions.push(this.lockService.isLockedContract(sectionId).subscribe(function (lock) {
                    if (lock.isLocked) {
                        _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_7__["ConfirmationDialogComponent"], {
                            data: {
                                title: 'Lock',
                                text: lock.message,
                                okButton: 'Got it',
                            },
                        });
                        _this.invoiceContractGridOptions.api.deselectNode(node);
                        _this.locking = _this.locking.filter(function (id) { return id !== sectionId; });
                    }
                    else {
                        _this.subscriptions.push(_this.lockService.lockContract(sectionId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_11__["LockFunctionalContext"].ContractInvoicing)
                            .subscribe(function () {
                            _this.refeshResourceInformation();
                            _this.locking = _this.locking.filter(function (id) { return id !== sectionId; });
                        }));
                    }
                }));
            }
        }
        else {
            if (!this.unlocking.includes(sectionId)) {
                this.unlocking.push(sectionId);
                this.refeshResourceInformation();
                if (this.resourcesInformation.filter(function (rsc) { return rsc.resourceId === sectionId; }).length === 0) {
                    this.subscriptions.push(this.lockService.unlockContract(sectionId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_11__["LockFunctionalContext"].ContractInvoicing)
                        .subscribe(function () {
                        node.setRowSelectable(true);
                        _this.unlocking = _this.unlocking.filter(function (id) { return id !== sectionId; });
                    }));
                }
                else {
                    node.setRowSelectable(true);
                    this.unlocking = this.unlocking.filter(function (id) { return id !== sectionId; });
                }
            }
        }
    };
    GoodsCostContractSearchComponent.prototype.refeshResourceInformation = function () {
        var _this = this;
        this.resourcesInformation = new Array();
        this.invoiceContractGridOptions.api.forEachNode(function (node) {
            if (node.isSelected()) {
                var resourceInformation = new _shared_entities_lock_resource_information_entity__WEBPACK_IMPORTED_MODULE_12__["LockResourceInformation"]();
                resourceInformation.resourceType = 'Contract';
                resourceInformation.resourceId = node.data.sectionId;
                resourceInformation.resourceCode = node.data.contractReference;
                _this.resourcesInformation.push(resourceInformation);
            }
        });
    };
    GoodsCostContractSearchComponent.prototype.checkCommoditySelected = function (selectedRows) {
        this.differentCommoditySelected = false;
        this.differentPricesSelected = false;
        if (selectedRows.length > 1) {
            var firstSelectedRow_1 = selectedRows[0];
            this.differentCommoditySelected = selectedRows.filter(function (row) { return row.commodity.trim() !== firstSelectedRow_1.commodity.trim(); }).length > 0;
            this.differentPricesSelected = selectedRows.filter(function (row) { return row.price !== firstSelectedRow_1.price; }).length > 0;
        }
        this.commoditySelected.emit({
            differentCommoditySelected: this.differentCommoditySelected, differentPricesSelected: this.differentPricesSelected,
        });
    };
    GoodsCostContractSearchComponent.prototype.populateEntity = function (entity) {
        this.selectedContractsToInvoice = this.gridApi.getSelectedRows();
        return this.selectedContractsToInvoice;
    };
    GoodsCostContractSearchComponent.prototype.onColumnVisibilityChanged = function (col) {
        this.userPreferencesComponent.onChangeColumnVisibility(col);
        this.autoSizeContractsGrid();
    };
    GoodsCostContractSearchComponent.prototype.onCellValueChanged = function (params) {
        if (params.oldValue < params.newValue) {
            this.totalQuantity = this.totalQuantity + (params.newValue - params.oldValue);
        }
        else if (params.oldValue > params.newValue) {
            this.totalQuantity = this.totalQuantity - (params.oldValue - params.newValue);
        }
    };
    GoodsCostContractSearchComponent.prototype.onRowDataChanged = function (params) {
        if (this.counterParty) {
            var counterPartyFilterComponent = this.gridApi.getFilterInstance('counterparty');
            counterPartyFilterComponent.setModel({
                type: 'set',
                values: [this.counterParty],
            });
            this.gridApi.onFilterChanged();
        }
    };
    GoodsCostContractSearchComponent.prototype.loadGridConfiguration = function () {
        var _this = this;
        this.gridConfigurationProvider.getConfiguration(this.company, this.gridCode)
            .subscribe(function (configuration) {
            _this.columnConfiguration = configuration.columns;
            _this.initColumns(_this.columnConfiguration);
            _this.hasGridSharing = configuration.hasMultipleViewsPerUser;
        });
    };
    GoodsCostContractSearchComponent.prototype.onFirstDataRendered = function (params) {
        if (this.gridColumnApi) {
            this.gridColumnApi.autoSizeAllColumns();
        }
    };
    GoodsCostContractSearchComponent.prototype.initColumns = function (configuration) {
        var _this = this;
        this.columnDefs = [];
        // selection column
        this.columnDefs.push({
            headerName: '',
            colId: 'selection',
            headerCheckboxSelection: true,
            checkboxSelection: true,
            minWidth: 40,
            maxWidth: 40, pinned: 'left',
            hide: false,
        });
        // grid config
        var numericColumns = [];
        configuration.forEach(function (column) {
            if (column.gridType === 'numeric') {
                numericColumns.push(column.fieldName.toLowerCase());
            }
        });
        this.columnDefs = this.columnDefs.concat(configuration.map(function (config) {
            var columnDef = {
                colId: _this.utilService.convertToCamelCase(config.fieldName),
                headerName: config.friendlyName,
                field: _this.utilService.convertToCamelCase(config.fieldName),
                hide: !config.isVisible,
            };
            var formatter = _this.uiService.getFormatterForType(config.gridType);
            if (formatter) {
                columnDef.valueFormatter = formatter;
            }
            var dateGetter = _this.uiService.getterForDateType(config.gridType);
            if (dateGetter) {
                columnDef.cellClass = 'dateFormat';
                columnDef.valueGetter = dateGetter;
            }
            var numericColumn = numericColumns.find(function (column) { return column === columnDef.field.toLowerCase(); });
            if (numericColumn) {
                columnDef.type = 'numericColumn';
                columnDef.valueFormatter = _this.numberFormatter;
            }
            return columnDef;
        }));
        // calculated columns
        this.columnDefs = this.columnDefs.concat(this.additionnalColumns);
        if (this.invoiceContractGridOptions) {
            this.invoiceContractGridOptions.columnDefs = this.columnDefs;
            this.invoiceContractGridOptions.columnApi.autoSizeAllColumns();
        }
    };
    GoodsCostContractSearchComponent.prototype.isQuantityToInvoiceEditable = function (param) {
        return param.node.selected;
    };
    GoodsCostContractSearchComponent.prototype.onFilterSetDetailsChange = function (filters) {
        this.executionActionsService.EditCriteriaRetainFilter = filters;
        this.filters = filters;
        if (this.count === 1) {
            this.filters = this.savedFilters;
            this.savedFilters = null;
            this.count = 0;
        }
        if (this.savedFilters && this.count === 0) {
            if (this.filterSetDisplayComponent) {
                this.count = 1;
                var localFilters = this.savedFilters.map(function (filter) {
                    return new _shared_dtos_list_and_search_list_and_search_filter_dto_dto__WEBPACK_IMPORTED_MODULE_8__["ListAndSearchFilterDto"](filter);
                });
                this.filterSetDisplayComponent.loadFilters(localFilters);
            }
        }
        else {
            this.getContractsToInvoice();
        }
    };
    GoodsCostContractSearchComponent.prototype.numberFormatter = function (params) {
        if (params && params.value && !isNaN(params.value)) {
            if (params.colDef.colId.toLowerCase() === 'contractquantity' || params.colDef.colId.toLowerCase() === 'price' ||
                params.colDef.colId.toLowerCase() === 'invoicedquantity') {
                if (params.colDef.colId.toLowerCase() === 'price') {
                    return new Intl.NumberFormat('en-US', { minimumFractionDigits: 4, maximumFractionDigits: 4 }).format(params.value);
                }
                else {
                    return new Intl.NumberFormat('en-US', { minimumFractionDigits: 3, maximumFractionDigits: 3 }).format(params.value);
                }
            }
        }
    };
    GoodsCostContractSearchComponent.prototype.formatQuantity = function (input) {
        var formattedInput = new Intl.NumberFormat(this.formatType, { minimumFractionDigits: this.decimalOptionValue }).format(input);
        return formattedInput.toLocaleString();
    };
    GoodsCostContractSearchComponent.prototype.ngOnDestroy = function () {
        var _this = this;
        this.subscriptions.push(this.lockService.cleanSessionLocks().subscribe(function () {
            _this.subscriptions.forEach(function (subscription) {
                subscription.unsubscribe();
            });
        }));
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('userPreferences'),
        __metadata("design:type", _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_5__["AgGridUserPreferencesComponent"])
    ], GoodsCostContractSearchComponent.prototype, "userPreferencesComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('filterSetDisplayComponent'),
        __metadata("design:type", _shared_components_filter_set_display_filter_set_display_component__WEBPACK_IMPORTED_MODULE_28__["FilterSetDisplayComponent"])
    ], GoodsCostContractSearchComponent.prototype, "filterSetDisplayComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], GoodsCostContractSearchComponent.prototype, "commoditySelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], GoodsCostContractSearchComponent.prototype, "contractsSelected", void 0);
    GoodsCostContractSearchComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-goods-cost-contract-search',
            template: __webpack_require__(/*! ./goods-cost-contract-search.component.html */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-contract-search/goods-cost-contract-search.component.html"),
            styles: [__webpack_require__(/*! ./goods-cost-contract-search.component.scss */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-contract-search/goods-cost-contract-search.component.scss")],
            providers: [_shared_services_masterdata_counterparty_data_loader__WEBPACK_IMPORTED_MODULE_23__["CounterPartyDataLoader"], _shared_services_execution_charter_data_loader__WEBPACK_IMPORTED_MODULE_18__["CharterDataLoader"]],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"], _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_21__["ExecutionService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"], _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_24__["SnackbarService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_19__["FormConfigurationProviderService"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_25__["UiService"],
            _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_22__["LockService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"],
            _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_20__["GridConfigurationProviderService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_26__["UtilService"],
            _shared_services_masterdata_counterparty_data_loader__WEBPACK_IMPORTED_MODULE_23__["CounterPartyDataLoader"],
            _shared_services_execution_charter_data_loader__WEBPACK_IMPORTED_MODULE_18__["CharterDataLoader"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_17__["AgGridService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_17__["AgGridService"],
            _services_execution_actions_service__WEBPACK_IMPORTED_MODULE_27__["ExecutionActionsService"]])
    ], GoodsCostContractSearchComponent);
    return GoodsCostContractSearchComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_6__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-invoice-selection/goods-cost-invoice-selection.component.html":
/*!*********************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-invoice-selection/goods-cost-invoice-selection.component.html ***!
  \*********************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"card-header-luke\">\r\n    <mat-card-title>\r\n        Invoice Selection\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div>\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"none center\"\r\n                 fxLayoutGap=\"10px\">\r\n                <div fxFlex=\"33%\"\r\n                     fxFlex.xs=\"33%\"\r\n                     fxFlex.sm=\"33%\">\r\n                    <mat-form-field class=\"mat-read-only-field\">\r\n                        <input matInput\r\n                               placeholder=\"Invoice type\"\r\n                               [matTooltip]=\"'Invoice Type'\"\r\n                               [formControl]=\"invoiceTypeSelectedCtrl\"\r\n                               autocomplete=\"off\"\r\n                               readonly>\r\n                    </mat-form-field>\r\n                </div>\r\n                <div fxFlex=\"33%\"\r\n                     fxFlex.xs=\"33%\"\r\n                     fxFlex.sm=\"33%\">\r\n                    <mat-form-field class=\"mat-read-only-field\">\r\n                        <input matInput\r\n                               matTooltip=\"Costs/Commission\"\r\n                               [formControl]=\"costsCommissionTypeCtrl\"\r\n                               autocomplete=\"off\"\r\n                               readonly>\r\n                    </mat-form-field>\r\n                </div>\r\n                <div fxFlex=\"33%\"\r\n                     fxFlex.xs=\"33%\"\r\n                     fxFlex.sm=\"33%\">\r\n                    <mat-form-field class=\"mat-read-only-field\">\r\n                        <input matInput\r\n                               placeholder=\"Quantity to Invoice\"\r\n                               [matTooltip]=\"'Quantity to Invoice'\"\r\n                               [formControl]=\"quantityToInvoiceCtrl\"\r\n                               autocomplete=\"off\"\r\n                               readonly>\r\n                    </mat-form-field>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-invoice-selection/goods-cost-invoice-selection.component.scss":
/*!*********************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-invoice-selection/goods-cost-invoice-selection.component.scss ***!
  \*********************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".card-header-luke {\n  min-height: auto; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-invoice-selection/goods-cost-invoice-selection.component.ts":
/*!*******************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-invoice-selection/goods-cost-invoice-selection.component.ts ***!
  \*******************************************************************************************************************************************************************************/
/*! exports provided: GoodsCostInvoiceSelectionComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoodsCostInvoiceSelectionComponent", function() { return GoodsCostInvoiceSelectionComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var GoodsCostInvoiceSelectionComponent = /** @class */ (function (_super) {
    __extends(GoodsCostInvoiceSelectionComponent, _super);
    function GoodsCostInvoiceSelectionComponent(route, formBuilder, utilService, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.utilService = utilService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.invoiceTypeSelectedCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('invoiceTypeSelected');
        _this.costsCommissionTypeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('costsCommissionSelection');
        _this.quantityToInvoiceCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('quantityToInvoiceSelection');
        _this.selectedInvoiceTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('invoiceTypeId')));
        _this.contract = 'Contract';
        _this.costCommission = 'Costs/Commission';
        _this.masterdata = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__["MasterData"]();
        return _this;
    }
    GoodsCostInvoiceSelectionComponent.prototype.ngOnInit = function () {
        this.invoiceTypeId = Number(decodeURIComponent(this.route.snapshot.paramMap.get('invoiceTypeId')));
        this.masterdata = this.route.snapshot.data.masterdata;
        this.getData();
    };
    GoodsCostInvoiceSelectionComponent.prototype.getData = function () {
        var _this = this;
        this.invoiceTypeDescription = this.masterdata.
            invoiceTypes.find(function (x) { return x.invoiceTypeId === _this.invoiceTypeId; }).name;
        this.invoiceTypeSelectedCtrl.patchValue(this.invoiceTypeDescription);
        this.quantityToInvoiceCtrl.setValue(this.contract);
        this.costsCommissionTypeCtrl.setValue(this.costCommission);
    };
    GoodsCostInvoiceSelectionComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            invoiceTypeSelectedCtrl: this.invoiceTypeSelectedCtrl,
            costsCommissionTypeCtrl: this.costsCommissionTypeCtrl,
            quantityToInvoiceCtrl: this.quantityToInvoiceCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    GoodsCostInvoiceSelectionComponent.prototype.populateEntity = function (entity) {
        var invoiceType = entity;
        invoiceType.invoiceType = this.invoiceTypeId;
        invoiceType.quantityToInvoice = this.quantityToInvoiceCtrl.value;
        return invoiceType;
    };
    GoodsCostInvoiceSelectionComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-goods-cost-invoice-selection',
            template: __webpack_require__(/*! ./goods-cost-invoice-selection.component.html */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-invoice-selection/goods-cost-invoice-selection.component.html"),
            styles: [__webpack_require__(/*! ./goods-cost-invoice-selection.component.scss */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-invoice-selection/goods-cost-invoice-selection.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__["UtilService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__["FormConfigurationProviderService"]])
    ], GoodsCostInvoiceSelectionComponent);
    return GoodsCostInvoiceSelectionComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-pricing-options/goods-cost-pricing-options.component.html":
/*!*****************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-pricing-options/goods-cost-pricing-options.component.html ***!
  \*****************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"invoice-creation-card\">\r\n    <mat-card-title>\r\n        <h2>Pricing Options</h2>\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <mat-form-field fxFlex=\"20%\">\r\n                <mat-select placeholder=\"Pricing option\"\r\n                            [matTooltip]=\"'Pricing option'\"\r\n                            [formControl]=\"pricingOptionsCtrl\"\r\n                            (selectionChange)='onPricingDecimalOptionSelected()'>\r\n                    <mat-option *ngFor=\"let pricing of masterdata.pricingOptions\"\r\n                                [value]=\"pricing.code\">{{pricing.description}}</mat-option>\r\n                </mat-select>\r\n                <mat-error *ngIf=\"pricingOptionsCtrl.hasError('required')\">\r\n                    Pricing Option is required\r\n                </mat-error>\r\n            </mat-form-field>\r\n            <mat-form-field fxFlex=\"20%\">\r\n                <mat-select placeholder=\"Decimals\"\r\n                            [matTooltip]=\"'Decimals'\"\r\n                            [formControl]=\"decimalOptionsCtrl\"\r\n                            (selectionChange)='onPricingDecimalOptionSelected()'>\r\n                    <mat-option *ngFor=\"let decimal of decimalOptions\"\r\n                                [value]=\"decimal\">{{decimal}}</mat-option>\r\n                </mat-select>\r\n            </mat-form-field>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-pricing-options/goods-cost-pricing-options.component.scss":
/*!*****************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-pricing-options/goods-cost-pricing-options.component.scss ***!
  \*****************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-pricing-options/goods-cost-pricing-options.component.ts":
/*!***************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-pricing-options/goods-cost-pricing-options.component.ts ***!
  \***************************************************************************************************************************************************************************/
/*! exports provided: GoodsCostPricingOptionsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoodsCostPricingOptionsComponent", function() { return GoodsCostPricingOptionsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var GoodsCostPricingOptionsComponent = /** @class */ (function (_super) {
    __extends(GoodsCostPricingOptionsComponent, _super);
    function GoodsCostPricingOptionsComponent(route, formBuilder, masterdataService, utilService, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.masterdataService = masterdataService;
        _this.utilService = utilService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.pricingAndDecimalOptionSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.pricingOptionsCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('pricingOptions');
        _this.decimalOptionsCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('decimalOptions', 2);
        _this.decimalOptions = [2, 3, 4, 5, 6, 7, 8, 9, 10];
        return _this;
    }
    GoodsCostPricingOptionsComponent.prototype.ngOnInit = function () {
        this.masterdata = this.route.snapshot.data.masterdata;
        this.bindConfiguration();
        this.emitPricingAndDecimalOptions();
    };
    GoodsCostPricingOptionsComponent.prototype.onPricingDecimalOptionSelected = function () {
        this.emitPricingAndDecimalOptions();
    };
    GoodsCostPricingOptionsComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            pricingOptionsCtrl: this.pricingOptionsCtrl,
            decimalOptionsCtrl: this.decimalOptionsCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    GoodsCostPricingOptionsComponent.prototype.emitPricingAndDecimalOptions = function () {
        this.pricingAndDecimalOptionSelected.emit({
            pricingOption: Number(this.pricingOptionsCtrl.value),
            decimalOption: Number(this.decimalOptionsCtrl.value),
        });
    };
    GoodsCostPricingOptionsComponent.prototype.onDifferentCommoditySelected = function (differentCommoditySelected, differentPricesSelected) {
        if (differentCommoditySelected) {
            this.setValidators();
        }
        else if (differentPricesSelected) {
            this.setValidators();
        }
        else {
            this.clearValidators();
        }
    };
    GoodsCostPricingOptionsComponent.prototype.setValidators = function () {
        this.pricingOptionsCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required);
        this.pricingOptionsCtrl.updateValueAndValidity();
    };
    GoodsCostPricingOptionsComponent.prototype.clearValidators = function () {
        this.pricingOptionsCtrl.clearValidators();
        this.pricingOptionsCtrl.updateValueAndValidity();
    };
    GoodsCostPricingOptionsComponent.prototype.populateEntity = function (entity) {
        var invoiceType = entity;
        invoiceType.pricingOptionId = this.pricingOptionsCtrl.value ? Number(this.pricingOptionsCtrl.value) : null;
        invoiceType.decimalOption = Number(this.decimalOptionsCtrl.value);
        return invoiceType;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], GoodsCostPricingOptionsComponent.prototype, "pricingAndDecimalOptionSelected", void 0);
    GoodsCostPricingOptionsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-goods-cost-pricing-options',
            template: __webpack_require__(/*! ./goods-cost-pricing-options.component.html */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-pricing-options/goods-cost-pricing-options.component.html"),
            styles: [__webpack_require__(/*! ./goods-cost-pricing-options.component.scss */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-pricing-options/goods-cost-pricing-options.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"], _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_6__["MasterdataService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__["UtilService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_5__["FormConfigurationProviderService"]])
    ], GoodsCostPricingOptionsComponent);
    return GoodsCostPricingOptionsComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/goods-cost-selection.component.html":
/*!*********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/goods-cost-selection.component.html ***!
  \*********************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<atlas-goods-cost-invoice-selection #goodsCostInvoiceSelectionComponent>\r\n</atlas-goods-cost-invoice-selection>\r\n<atlas-goods-cost-contract-search #goodsCostContractSearchComponent\r\n                                  (contractsSelected)=\"onContractsSelected($event)\"\r\n                                  (commoditySelected)=\"onDifferentCommoditySelected($event)\">\r\n</atlas-goods-cost-contract-search>\r\n<atlas-goods-cost-pricing-options #goodsCostPricingOptionsComponent\r\n                                  (pricingAndDecimalOptionSelected)=\"onPricingAndDecimalOptionSelected($event)\">\r\n</atlas-goods-cost-pricing-options>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/goods-cost-selection.component.scss":
/*!*********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/goods-cost-selection.component.scss ***!
  \*********************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/goods-cost-selection.component.ts":
/*!*******************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/goods-cost-selection.component.ts ***!
  \*******************************************************************************************************************************/
/*! exports provided: GoodsCostSelectionComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoodsCostSelectionComponent", function() { return GoodsCostSelectionComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _components_goods_cost_contract_search_goods_cost_contract_search_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/goods-cost-contract-search/goods-cost-contract-search.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-contract-search/goods-cost-contract-search.component.ts");
/* harmony import */ var _components_goods_cost_invoice_selection_goods_cost_invoice_selection_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./components/goods-cost-invoice-selection/goods-cost-invoice-selection.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-invoice-selection/goods-cost-invoice-selection.component.ts");
/* harmony import */ var _components_goods_cost_pricing_options_goods_cost_pricing_options_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./components/goods-cost-pricing-options/goods-cost-pricing-options.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-pricing-options/goods-cost-pricing-options.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var GoodsCostSelectionComponent = /** @class */ (function (_super) {
    __extends(GoodsCostSelectionComponent, _super);
    function GoodsCostSelectionComponent(formBuilder, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.pricingAndDecimalOptionSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.contractsSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.formComponents = [];
        return _this;
    }
    GoodsCostSelectionComponent.prototype.ngOnInit = function () {
        this.invoiceSelectionContractFormGroup = this.formBuilder.group({
            goodsCostInvoiceSelectionComponent: this.goodsCostInvoiceSelectionComponent.getFormGroup(),
            goodsCostContractSearchComponent: this.goodsCostContractSearchComponent.getFormGroup(),
            goodsCostPricingOptionsComponent: this.goodsCostPricingOptionsComponent.getFormGroup(),
        });
        this.formComponents.push(this.goodsCostInvoiceSelectionComponent, this.goodsCostContractSearchComponent, this.goodsCostPricingOptionsComponent);
    };
    GoodsCostSelectionComponent.prototype.onPricingAndDecimalOptionSelected = function (model) {
        this.pricingAndDecimalOptionSelected.emit({ pricingSelected: model.pricingOption, decimalOptionSelected: model.decimalOption });
    };
    GoodsCostSelectionComponent.prototype.onDifferentCommoditySelected = function (_a) {
        var differentCommoditySelected = _a.differentCommoditySelected, differentPricesSelected = _a.differentPricesSelected;
        this.goodsCostPricingOptionsComponent.onDifferentCommoditySelected(differentCommoditySelected, differentPricesSelected);
    };
    GoodsCostSelectionComponent.prototype.onContractsSelected = function (contractsSelected) {
        this.contractsSelected.emit(contractsSelected);
    };
    GoodsCostSelectionComponent.prototype.populateEntity = function (model) {
        this.formComponents.forEach(function (comp) {
            comp.populateEntity(model);
        });
        return model;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('goodsCostPricingOptionsComponent'),
        __metadata("design:type", _components_goods_cost_pricing_options_goods_cost_pricing_options_component__WEBPACK_IMPORTED_MODULE_6__["GoodsCostPricingOptionsComponent"])
    ], GoodsCostSelectionComponent.prototype, "goodsCostPricingOptionsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('goodsCostInvoiceSelectionComponent'),
        __metadata("design:type", _components_goods_cost_invoice_selection_goods_cost_invoice_selection_component__WEBPACK_IMPORTED_MODULE_5__["GoodsCostInvoiceSelectionComponent"])
    ], GoodsCostSelectionComponent.prototype, "goodsCostInvoiceSelectionComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('goodsCostContractSearchComponent'),
        __metadata("design:type", _components_goods_cost_contract_search_goods_cost_contract_search_component__WEBPACK_IMPORTED_MODULE_4__["GoodsCostContractSearchComponent"])
    ], GoodsCostSelectionComponent.prototype, "goodsCostContractSearchComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], GoodsCostSelectionComponent.prototype, "pricingAndDecimalOptionSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], GoodsCostSelectionComponent.prototype, "contractsSelected", void 0);
    GoodsCostSelectionComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-goods-cost-selection',
            template: __webpack_require__(/*! ./goods-cost-selection.component.html */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/goods-cost-selection.component.html"),
            styles: [__webpack_require__(/*! ./goods-cost-selection.component.scss */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/goods-cost-selection.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_3__["FormConfigurationProviderService"]])
    ], GoodsCostSelectionComponent);
    return GoodsCostSelectionComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-summary/goods-cost-summary.component.html":
/*!*****************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-summary/goods-cost-summary.component.html ***!
  \*****************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = " <atlas-execution-invoicing-summary-header #summaryHeaderComponent\r\n                                           [isCreationMode]=isCreationMode></atlas-execution-invoicing-summary-header>\r\n <div fxLayout=\"row\" fxLayout.md=\"column\"\r\n                     fxLayoutAlign=\"space-around start\"\r\n                     class=\"main-container\">\r\n     <div fxLayout=\"column\" fxLayoutAlign=\"start left\"\r\n                            fxFlex=\"100%\">\r\n         <atlas-goods-cost-value-of-goods #valueOfGoodsComponent\r\n                                          (totalAmountCalculated)=\"ontotalAmountCalculated($event)\">\r\n         </atlas-goods-cost-value-of-goods>\r\n         <atlas-goods-cost-additional-cost #additionalCostComponent\r\n                                           [selectedGoodsVat]=\"selectedGoodsVatCode\"\r\n                                           (totalCostAndVatCode)=\"onChangeCostContract($event)\">\r\n         </atlas-goods-cost-additional-cost>\r\n         <div fxLayout=\"row\"\r\n              fxLayoutGap=\"16px\">\r\n             <atlas-goods-cost-tax-goods #taxGoodsComponent\r\n                                         (selectedGoodsTaxCode)=\"onChangeGoodsTaxCode($event)\"\r\n                                         fxFlex=\"50%\"></atlas-goods-cost-tax-goods>\r\n             <atlas-goods-cost-payments #paymentsComponent\r\n                                        fxFlex=\"50%\"></atlas-goods-cost-payments>\r\n         </div>\r\n         <atlas-goods-cost-tax-cost #taxCostComponent\r\n                                    (totalCostTaxCalculated)=\"onTotalCostTaxCalculated($event)\"\r\n                                    fxFlex=\"50%\"></atlas-goods-cost-tax-cost>\r\n         <atlas-goods-cost-total class=\"goods-cost-total\"\r\n                                 #totalComponent></atlas-goods-cost-total>\r\n     </div>\r\n </div>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-summary/goods-cost-summary.component.scss":
/*!*****************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-summary/goods-cost-summary.component.scss ***!
  \*****************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-summary/goods-cost-summary.component.ts":
/*!***************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-summary/goods-cost-summary.component.ts ***!
  \***************************************************************************************************************************/
/*! exports provided: GoodsCostSummaryComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoodsCostSummaryComponent", function() { return GoodsCostSummaryComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_services_execution_dtos_invoice_record__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/services/execution/dtos/invoice-record */ "./Client/app/shared/services/execution/dtos/invoice-record.ts");
/* harmony import */ var _shared_services_execution_dtos_tax_record__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/services/execution/dtos/tax-record */ "./Client/app/shared/services/execution/dtos/tax-record.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _header_header_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../header/header.component */ "./Client/app/execution/execution-invoicing/header/header.component.ts");
/* harmony import */ var _goods_cost_working_page_components_goods_cost_additional_cost_goods_cost_additional_cost_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../goods-cost-working-page/components/goods-cost-additional-cost/goods-cost-additional-cost.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-additional-cost/goods-cost-additional-cost.component.ts");
/* harmony import */ var _goods_cost_working_page_components_goods_cost_payments_goods_cost_payments_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../goods-cost-working-page/components/goods-cost-payments/goods-cost-payments.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-payments/goods-cost-payments.component.ts");
/* harmony import */ var _goods_cost_working_page_components_goods_cost_tax_cost_goods_cost_tax_cost_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../goods-cost-working-page/components/goods-cost-tax-cost/goods-cost-tax-cost.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-cost/goods-cost-tax-cost.component.ts");
/* harmony import */ var _goods_cost_working_page_components_goods_cost_tax_goods_goods_cost_tax_goods_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../goods-cost-working-page/components/goods-cost-tax-goods/goods-cost-tax-goods.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-goods/goods-cost-tax-goods.component.ts");
/* harmony import */ var _goods_cost_working_page_components_goods_cost_total_goods_cost_total_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../goods-cost-working-page/components/goods-cost-total/goods-cost-total.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-total/goods-cost-total.component.ts");
/* harmony import */ var _goods_cost_working_page_components_goods_cost_value_of_goods_goods_cost_value_of_goods_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../goods-cost-working-page/components/goods-cost-value-of-goods/goods-cost-value-of-goods.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-value-of-goods/goods-cost-value-of-goods.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
















var GoodsCostSummaryComponent = /** @class */ (function (_super) {
    __extends(GoodsCostSummaryComponent, _super);
    function GoodsCostSummaryComponent(formBuilder, formConfigurationProvider, route) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.route = route;
        _this.formComponents = [];
        _this.totalRecordForGoodCost = new _shared_services_execution_dtos_invoice_record__WEBPACK_IMPORTED_MODULE_6__["InvoiceRecord"]();
        _this.valueOfGoodsTotal = 0;
        _this.valueOfGoodsDecimalOption = 2;
        _this.additionalCostRate = 0;
        _this.decimalOptionValue = 0;
        _this.pricingOptionValue = 0;
        _this.defaultDecimalOption = 2;
        _this.contractType = 'Contract';
        _this.invoiceTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('invoiceTypeId')));
        return _this;
    }
    GoodsCostSummaryComponent.prototype.ngOnInit = function () {
        this.invoiceSummaryFormGroup = this.formBuilder.group({
            paymentsComponent: this.paymentsComponent.getFormGroup(),
            taxCostComponent: this.taxCostComponent.getFormGroup(),
            additionalCostComponent: this.additionalCostComponent.getFormGroup(),
            summaryHeaderComponent: this.summaryHeaderComponent.getFormGroup(),
        });
        this.invoiceSummaryFormGroup.disable();
        this.formComponents.push(this.paymentsComponent, this.taxCostComponent, this.additionalCostComponent, this.summaryHeaderComponent);
    };
    GoodsCostSummaryComponent.prototype.setDecimalAndPricingOption = function (decimalOptionValue, pricingOptionValue) {
        this.decimalOptionValue = decimalOptionValue;
        this.pricingOptionValue = pricingOptionValue;
    };
    GoodsCostSummaryComponent.prototype.populateInvoiceRecord = function (record) {
        this.contracts = this.invoiceGoodsContracts;
        this.costContracts = this.invoiceCostContracts;
        this.costTaxes = this.invoiceTaxContracts;
        this.totalData = this.invoiceTaxTotal;
        this.goodsTaxes = this.goodsTaxCode;
        this.model = record;
        this.populateSummaryFields();
    };
    GoodsCostSummaryComponent.prototype.populateSummaryFields = function () {
        if (this.contracts) {
            this.valueOfGoodsComponent.contractToBeSelected(this.contracts);
        }
        if (this.costContracts) {
            this.additionalCostComponent.contractToBeSelected(this.costContracts);
        }
        if (this.costTaxes) {
            this.taxCostComponent.taxRecordsSelected(this.costTaxes);
        }
        if (this.goodsTaxes) {
            this.taxGoodsComponent.setDefaultVatCode(this.goodsTaxes);
        }
        if (this.model) {
            this.paymentsComponent.setPaymentFieldsForSummary(this.model);
            this.summaryHeaderComponent.setHeaderFieldsForSummary(this.model, this.filteredCompanyBankAccounts);
        }
        this.additionalCostComponent.isAdditionalCostForSummary = true;
    };
    GoodsCostSummaryComponent.prototype.calculateTaxTotal = function (model) {
        this.totalComponent.setValuesForTotalTax(model);
    };
    GoodsCostSummaryComponent.prototype.calculateTotalWithoutTax = function () {
        this.totalRecordForGoodCost.totalInvoiceValue = this.additionalCostRate + this.valueOfGoodsTotal;
        this.totalRecordForGoodCost.decimalOption = this.valueOfGoodsDecimalOption;
        this.totalRecordForGoodCost.currency = this.valueOfGoodsCurrency;
        if (this.valueOfGoodsCostDirection === this.additionalCostCostDirection) {
            this.totalRecordForGoodCost.costDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][this.additionalCostCostDirection];
        }
        else {
            this.setCostDirection();
        }
        this.totalComponent.setValuesForTotalWithoutTax(this.totalRecordForGoodCost);
    };
    GoodsCostSummaryComponent.prototype.setCostDirection = function () {
        this.totalRecordForGoodCost.costDirection = (Math.abs(this.additionalCostRate) > Math.abs(this.valueOfGoodsTotal))
            ? _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][this.additionalCostCostDirection]
            : _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][this.valueOfGoodsCostDirection];
    };
    GoodsCostSummaryComponent.prototype.ontotalAmountCalculated = function (model) {
        this.valueOfGoodsTotal = model.amount;
        this.valueOfGoodsDecimalOption = model.decimalOption;
        this.valueOfGoodsCurrency = model.currencyCode;
        this.originalInvoiceTypeId = model.originalInvoiceType;
        if (this.invoiceTypeId === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].GoodsCostPurchase || this.originalInvoiceTypeId === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].GoodsCostPurchase) {
            this.valueOfGoodsTotal = -(this.valueOfGoodsTotal);
            this.valueOfGoodsCostDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"].Payable];
        }
        else {
            this.valueOfGoodsCostDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"].Receivable];
        }
        this.calculateTotalWithoutTax();
    };
    GoodsCostSummaryComponent.prototype.onTotalCostTaxCalculated = function (model) {
        this.totalData = model;
        this.calculateTaxTotal(model);
    };
    GoodsCostSummaryComponent.prototype.onChangeGoodsTaxCode = function (vatCode) {
        this.selectedGoodsVatCode = vatCode;
    };
    GoodsCostSummaryComponent.prototype.onChangeCostContract = function (model) {
        if (model) {
            this.additionalCostRate = model.rate;
            this.additionalCostCostDirection = model.costDirection;
            if (this.additionalCostCostDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"].Payable]) {
                this.additionalCostRate = -(this.additionalCostRate);
            }
            this.taxCostComponent.getTaxesForSelectedVat(model);
            this.calculateTotalWithoutTax();
        }
    };
    GoodsCostSummaryComponent.prototype.setSummaryFieldsFromGrid = function (summaryRecord) {
        this.invoiceTypeId = summaryRecord.invoiceType;
        if (summaryRecord.summaryLines) {
            this.taxGoodsComponent.setDataForTaxGoods(summaryRecord.summaryLines, this.defaultVATCode);
        }
        if (summaryRecord) {
            this.additionalCostComponent.contractToBeSelectedFromGrid(summaryRecord);
            this.valueOfGoodsComponent.contractToBeSelectedFromGrid(summaryRecord);
            this.paymentsComponent.setValuesForSummaryFromGrid(summaryRecord);
            this.summaryHeaderComponent.setHeaderFieldsFromGrid(summaryRecord);
        }
        this.additionalCostComponent.isAdditionalCostForSummary = true;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], GoodsCostSummaryComponent.prototype, "defaultVATCode", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Boolean)
    ], GoodsCostSummaryComponent.prototype, "isCreationMode", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('summaryHeaderComponent'),
        __metadata("design:type", _header_header_component__WEBPACK_IMPORTED_MODULE_9__["HeaderComponent"])
    ], GoodsCostSummaryComponent.prototype, "summaryHeaderComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('valueOfGoodsComponent'),
        __metadata("design:type", _goods_cost_working_page_components_goods_cost_value_of_goods_goods_cost_value_of_goods_component__WEBPACK_IMPORTED_MODULE_15__["GoodsCostValueOfGoodsComponent"])
    ], GoodsCostSummaryComponent.prototype, "valueOfGoodsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('additionalCostComponent'),
        __metadata("design:type", _goods_cost_working_page_components_goods_cost_additional_cost_goods_cost_additional_cost_component__WEBPACK_IMPORTED_MODULE_10__["GoodsCostAdditionalCostComponent"])
    ], GoodsCostSummaryComponent.prototype, "additionalCostComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('taxGoodsComponent'),
        __metadata("design:type", _goods_cost_working_page_components_goods_cost_tax_goods_goods_cost_tax_goods_component__WEBPACK_IMPORTED_MODULE_13__["GoodsCostTaxGoodsComponent"])
    ], GoodsCostSummaryComponent.prototype, "taxGoodsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('taxCostComponent'),
        __metadata("design:type", _goods_cost_working_page_components_goods_cost_tax_cost_goods_cost_tax_cost_component__WEBPACK_IMPORTED_MODULE_12__["GoodsCostTaxCostComponent"])
    ], GoodsCostSummaryComponent.prototype, "taxCostComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('paymentsComponent'),
        __metadata("design:type", _goods_cost_working_page_components_goods_cost_payments_goods_cost_payments_component__WEBPACK_IMPORTED_MODULE_11__["GoodsCostPaymentsComponent"])
    ], GoodsCostSummaryComponent.prototype, "paymentsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('totalComponent'),
        __metadata("design:type", _goods_cost_working_page_components_goods_cost_total_goods_cost_total_component__WEBPACK_IMPORTED_MODULE_14__["GoodsCostTotalComponent"])
    ], GoodsCostSummaryComponent.prototype, "totalComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], GoodsCostSummaryComponent.prototype, "invoiceTaxContracts", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _shared_services_execution_dtos_tax_record__WEBPACK_IMPORTED_MODULE_7__["TaxRecord"])
    ], GoodsCostSummaryComponent.prototype, "invoiceTaxTotal", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], GoodsCostSummaryComponent.prototype, "invoiceCostContracts", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], GoodsCostSummaryComponent.prototype, "invoiceGoodsContracts", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], GoodsCostSummaryComponent.prototype, "goodsTaxCode", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], GoodsCostSummaryComponent.prototype, "filteredCompanyBankAccounts", void 0);
    GoodsCostSummaryComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-goods-cost-summary',
            template: __webpack_require__(/*! ./goods-cost-summary.component.html */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-summary/goods-cost-summary.component.html"),
            styles: [__webpack_require__(/*! ./goods-cost-summary.component.scss */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-summary/goods-cost-summary.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationProviderService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"]])
    ], GoodsCostSummaryComponent);
    return GoodsCostSummaryComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-additional-cost/goods-cost-additional-cost.component.html":
/*!********************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-additional-cost/goods-cost-additional-cost.component.html ***!
  \********************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-content>\r\n        <mat-card-title class=\"no-margin\">Cost</mat-card-title>\r\n\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"start center\"\r\n             [hidden]=\"isAdditionalCostForSummary\">\r\n            <mat-card-subtitle class=\"addline-margin\">Add new lines:</mat-card-subtitle>\r\n            <mat-form-field fxFlex=\"3\">\r\n                <input matInput\r\n                       [formControl]=\"addNewLineCtrl\"\r\n                       autocomplete=\"off\">\r\n            </mat-form-field>\r\n            <button mat-button\r\n                    (click)=\"onAddRowButtonClicked(addNewLineCtrl.value)\"\r\n                    class=\"no-margin\">\r\n                Add\r\n            </button>\r\n\r\n            <span class=\"fill-space\"></span>\r\n            <div class=\"use-goods-tax-toggle\">\r\n                <mat-slide-toggle [formControl]=\"useGoodsTaxCodeCtrl\"> Use Goods Tax Code</mat-slide-toggle>\r\n            </div>\r\n\r\n            <mat-form-field fxFlex=\"8%\">\r\n                <mat-select placeholder=\"Cost VAT Code\"\r\n                            [formControl]=\"costVatCodeCtrl\"\r\n                            matTooltip=\"Cost VAT Code\"\r\n                            (selectionChange)='onCostVatCodeSelected()'>\r\n                    <mat-option *ngFor=\"let code of costVatCodeOptions\"\r\n                                [value]=\"code.vatCode\">\r\n                        {{code.vatCode}}\r\n                    </mat-option>\r\n                </mat-select>\r\n            </mat-form-field>\r\n        </div>\r\n\r\n        <div ag-grid=\"selectedCostGridOptions\"\r\n             class=\"ag-theme-material pointer-cursor\">\r\n            <ag-grid-angular class=\"ag-theme-material\"\r\n                             [rowData]=\"selectedCostGridRows\"\r\n                             [columnDefs]=\"selectedCostGridColumns\"\r\n                             [gridOptions]=\"selectedCostGridOptions\"\r\n                             domLayout=\"autoHeight\"\r\n                             (gridReady)=\"onGridReady($event)\"\r\n                             [pagination]=\"true\"\r\n                             [paginationPageSize]=\"10\"\r\n                             [enableSorting]=\"true\"\r\n                             [enableColResize]=\"true\"\r\n                             [enableFilter]=\"true\"\r\n                             [rowSelection]=\"rowSelection\"\r\n                             [frameworkComponents]=\"gridComponents\"\r\n                             enableFilter\r\n                             [rowHeight]=atlasAgGridParam.rowHeight\r\n                             [singleClickEdit]=true>\r\n            </ag-grid-angular>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"end\">\r\n            <mat-card-subtitle class=\"total-figure\">\r\n                Total Cost:\r\n                <span class=\"total-figure-value\">\r\n                    {{this.totalCostDirectionSign}}{{formatQuantityAndTotal(this.total)}}\r\n                    {{this.currencyCodeSelected}}</span>\r\n            </mat-card-subtitle>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-additional-cost/goods-cost-additional-cost.component.scss":
/*!********************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-additional-cost/goods-cost-additional-cost.component.scss ***!
  \********************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".use-goods-tax-toggle {\n  margin-bottom: 16px;\n  margin-right: 16px; }\n\n.addline-margin {\n  margin-right: 10px;\n  margin-bottom: 10px; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-additional-cost/goods-cost-additional-cost.component.ts":
/*!******************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-additional-cost/goods-cost-additional-cost.component.ts ***!
  \******************************************************************************************************************************************************************************/
/*! exports provided: GoodsCostAdditionalCostComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoodsCostAdditionalCostComponent", function() { return GoodsCostAdditionalCostComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _shared_components_ag_contextual_menu_ag_contextual_menu_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/components/ag-contextual-menu/ag-contextual-menu.component */ "./Client/app/shared/components/ag-contextual-menu/ag-contextual-menu.component.ts");
/* harmony import */ var _shared_components_ag_grid_autocomplete_ag_grid_autocomplete_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/components/ag-grid/autocomplete/ag-grid-autocomplete.component */ "./Client/app/shared/components/ag-grid/autocomplete/ag-grid-autocomplete.component.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_components_cell_editor_select_cell_editor_select_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/components/cell-editor-select/cell-editor-select.component */ "./Client/app/shared/components/cell-editor-select/cell-editor-select.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_invoice_line_record_entity__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/entities/invoice-line-record.entity */ "./Client/app/shared/entities/invoice-line-record.entity.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-sign.enum */ "./Client/app/shared/enums/cost-sign.enum.ts");
/* harmony import */ var _shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../../../shared/enums/rate-type.enum */ "./Client/app/shared/enums/rate-type.enum.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../../../shared/services/execution/dtos/contracts-to-cost-invoice */ "./Client/app/shared/services/execution/dtos/contracts-to-cost-invoice.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


















var GoodsCostAdditionalCostComponent = /** @class */ (function (_super) {
    __extends(GoodsCostAdditionalCostComponent, _super);
    function GoodsCostAdditionalCostComponent(formBuilder, formConfigurationProvider, route, uiService, snackbarService, gridService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.route = route;
        _this.uiService = uiService;
        _this.snackbarService = snackbarService;
        _this.gridService = gridService;
        _this.costsMenuActions = {
            deleteCostLine: 'delete',
        };
        _this.totalCostAndVatCode = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.costVatCodeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__["AtlasFormControl"]('CostVatCode');
        _this.useGoodsTaxCodeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__["AtlasFormControl"]('UseGoodsTaxCode');
        _this.addNewLineCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_8__["AtlasFormControl"]('addNewLineCtrl');
        _this.narrativeLength = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.selectedCostGridOptions = {};
        _this.selectedCostGridRows = [];
        _this.componentId = 'selectedCost';
        _this.invoicedPercentage = 100;
        _this.gridComponents = {
            atlasSelect: _shared_components_cell_editor_select_cell_editor_select_component__WEBPACK_IMPORTED_MODULE_7__["CellEditorSelectComponent"],
        };
        _this.gridContext = {
            gridEditable: false,
        };
        _this.taxRateCalculated = 0;
        _this.total = 0;
        _this.taxTotal = 0;
        _this.costDirectionDisplay = '';
        _this.debit = 'Dr';
        _this.credit = 'Cr';
        _this.currencyCode = '';
        _this.pricingOptionValue = 0;
        _this.decimalOptionValue = 2;
        _this.minDecimalOptionValue = 2;
        _this.formatType = 'en-US';
        _this.isAdditionalCostForSummary = false;
        _this.costNarrativePrefix = 'ADD ';
        _this.tooltipRequiredMessage = 'The field should not be empty';
        _this.inPNL = false;
        _this.noAction = false;
        _this.atlasAgGridParam = _this.gridService.getAgGridParam();
        return _this;
    }
    GoodsCostAdditionalCostComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.invoiceType = Number(decodeURIComponent(this.route.snapshot.paramMap.get('invoiceTypeId')));
        this.route.paramMap
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__["map"])(function (params) { return params.get('company'); }))
            .subscribe(function (company) {
            _this.company = company;
        });
        this.masterData = this.route.snapshot.data.masterdata;
        this.costDirections = [
            {
                costDirectionId: _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"].Payable,
                costDirection: 'Pay',
            },
            {
                costDirectionId: _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"].Receivable,
                costDirection: 'Receive',
            },
        ];
        this.init();
        this.gridContext.gridEditable = false;
        this.costVatCodeOptions = this.masterData.vats;
        if (this.masterData.vats.length > 0) {
            this.costVatCodeCtrl.patchValue(this.masterData.vats[0].vatCode);
        }
        this.selectedCostVat = this.costVatCodeCtrl.value;
        this.initializeGridColumns();
        this.useGoodsTaxCodeCtrl.patchValue(true);
        this.addNewLineCtrl.patchValue(1);
        this.onChanges();
    };
    GoodsCostAdditionalCostComponent.prototype.onChanges = function () {
        var _this = this;
        this.useGoodsTaxCodeCtrl.valueChanges.subscribe(function (val) {
            if (val) {
                _this.onUseGoodsTaxCodeToggleChange(_this.selectedGoodsVat);
            }
            else {
                _this.onUseGoodsTaxCodeToggleChange(_this.selectedCostVat);
            }
        });
    };
    GoodsCostAdditionalCostComponent.prototype.onUseGoodsTaxCodeToggleChange = function (value) {
        if (value) {
            this.costVatCodeCtrl.patchValue(value);
            var changedVatCode_1 = [];
            this.gridApi.forEachNode(function (rowNode) {
                if (rowNode.data) {
                    var data = rowNode.data;
                    data.vatCode = value;
                    changedVatCode_1.push(data);
                }
            });
            this.gridApi.updateRowData({ update: changedVatCode_1 });
            this.calculateTotalOnUpdateGrid();
        }
    };
    GoodsCostAdditionalCostComponent.prototype.setVatCodeAvailable = function () {
        var _this = this;
        if (this.selectedGoodsVat) {
            this.costVatCodeCtrl.patchValue(this.selectedGoodsVat);
            this.vatCodeAvailable = this.masterData.vats.filter(function (option) { return option.vatCode === _this.selectedGoodsVat; });
            this.totalCostAndVatDetails();
        }
    };
    GoodsCostAdditionalCostComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            costVatCodeCtrl: this.costVatCodeCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    GoodsCostAdditionalCostComponent.prototype.onGridReady = function (params) {
        var _this = this;
        this.gridApi = params.api;
        params.columnDefs = this.selectedCostGridColumns;
        this.selectedCostGridOptions = params;
        this.gridColumnApi = params.columnApi;
        this.autoSizeGridHeader();
        this.gridColumnApi.autoSizeAllColumns();
        window.onresize = function () {
            _this.gridColumnApi.autoSizeAllColumns();
        };
    };
    GoodsCostAdditionalCostComponent.prototype.autoSizeGridHeader = function () {
        var allColumnIds = [];
        this.selectedCostGridColumns.forEach(function (columnDefs) {
            allColumnIds.push(columnDefs.field);
        });
        this.gridColumnApi.autoSizeColumns(allColumnIds);
    };
    GoodsCostAdditionalCostComponent.prototype.onGridSizeChanged = function (params) {
        this.autoSizeGridHeader();
    };
    GoodsCostAdditionalCostComponent.prototype.initializeGridColumns = function () {
        var _this = this;
        this.selectedCostGridOptions = {
            context: this.gridContext,
        };
        this.selectedCostGridColumns = [
            {
                headerName: 'Cost Type*',
                field: 'costTypeCode',
                colId: 'costTypeCode',
                hide: false,
                width: 250,
                minWidth: 250,
                maxWidth: 250,
                suppressSizeToFit: true,
                cellRendererFramework: _shared_components_ag_grid_autocomplete_ag_grid_autocomplete_component__WEBPACK_IMPORTED_MODULE_5__["AgGridAutocompleteComponent"],
                cellRendererParams: {
                    context: this.masterData,
                    options: this.masterData.costTypes.filter(function (cost) { return cost.isATradeCost === true; })
                        .sort(function (a, b) { return a.costTypeCode.localeCompare(b.costTypeCode); }),
                    valueProperty: 'costTypeCode',
                    codeProperty: 'costTypeCode',
                    displayProperty: 'name',
                    isRequired: true,
                },
                onCellValueChanged: this.onCostTypeChange.bind(this),
                tooltip: function (params) {
                    return params.value ? null : _this.tooltipRequiredMessage;
                },
            },
            {
                headerName: '%Invoiced',
                field: 'invoicePercent',
                colId: 'invoicePercent',
                hide: false,
                valueFormatter: function (params) { return (_this.decimalFormatter(params.data.invoicePercent, _this.decimalOptionValue, _this.formatType)); },
            },
            {
                headerName: 'Currency',
                field: 'currencyCode',
                colId: 'currencyCode',
                hide: false,
            },
            {
                headerName: 'Pay/Rec*',
                field: 'costDirection',
                colId: 'costDirection',
                hide: false,
                editable: this.isGridEditable,
                cellRenderer: this.requiredCell.bind(this),
                cellEditor: 'agRichSelectCellEditor',
                cellEditorParams: {
                    values: this.costDirections.map(function (costDirection) { return costDirection.costDirection; }),
                    displayPropertyName: 'costDirection',
                    valuePropertyName: 'costDirection',
                    displayFormat: 'costDirection',
                },
                onCellValueChanged: this.onCostDirectionChange.bind(this),
                tooltip: function (params) {
                    return params.value ? null : _this.tooltipRequiredMessage;
                },
            },
            {
                headerName: 'VAT Code*',
                field: 'vatCode',
                colId: 'vatCode',
                hide: false,
                editable: true,
                cellRenderer: this.requiredCell.bind(this),
                cellEditor: 'agRichSelectCellEditor',
                cellEditorParams: {
                    values: this.masterData.vats.map(function (vat) { return vat.vatCode; }),
                    displayPropertyName: 'vatCode',
                    valuePropertyName: 'vatCode',
                    displayFormat: 'vatCode',
                    context: this.masterData,
                },
                onCellValueChanged: this.onVatCodeChange.bind(this),
                tooltip: function (params) {
                    return params.value ? null : _this.tooltipRequiredMessage;
                },
            },
            {
                headerName: 'Cost Amount*',
                field: 'costAmountToInvoice',
                colId: 'costAmountToInvoice',
                hide: false,
                editable: this.isGridEditable,
                cellRenderer: this.requiredCellForCostAmount.bind(this),
                valueSetter: this.setCostAmountToInvoice,
                onCellValueChanged: this.onCostAmountToInvoiceChange.bind(this),
                tooltip: function (params) {
                    return params.value ? null : _this.tooltipRequiredMessage;
                },
            },
            {
                headerName: 'Cost Narrative',
                field: 'narrative',
                colId: 'narrative',
                hide: false,
                editable: this.isGridEditable,
                valueSetter: this.setCostNarrative.bind(this),
                cellStyle: this.narrativeMaxLength.bind(this),
            },
            {
                headerName: '',
                cellRendererFramework: _shared_components_ag_contextual_menu_ag_contextual_menu_component__WEBPACK_IMPORTED_MODULE_4__["AgContextualMenuComponent"],
                cellRendererParams: {
                    context: {
                        componentParent: this,
                        actionContext: this.gridContext,
                    },
                    menuActions: this.costGridContextualMenuActions,
                    hide: false,
                },
                cellClass: 'ag-contextual-menu',
                maxWidth: 80,
            },
        ];
        this.rowSelection = 'multiple';
    };
    GoodsCostAdditionalCostComponent.prototype.decimalFormatter = function (input, decimaloption, format) {
        var formattedInput = new Intl.NumberFormat(format, { minimumFractionDigits: 2, maximumFractionDigits: decimaloption }).format(input);
        return formattedInput.toLocaleString();
    };
    GoodsCostAdditionalCostComponent.prototype.pricingAndDecimalOptionSelected = function (pricingOption, decimalOption) {
        this.pricingOptionValue = pricingOption;
        this.decimalOptionValue = decimalOption;
    };
    GoodsCostAdditionalCostComponent.prototype.isGridEditable = function (params) {
        if (!params.data.contractReference) {
            return params.context.gridEditable;
        }
        else {
            return false;
        }
    };
    GoodsCostAdditionalCostComponent.prototype.setCostAmountToInvoice = function (params) {
        params.data.costAmountToInvoice = (params.newValue <= 0) ? 0 : params.newValue;
        return true;
    };
    GoodsCostAdditionalCostComponent.prototype.setCostNarrative = function (params) {
        if (params.data.costId) {
            params.data.narrative = this.costNarrativePrefix;
        }
        else {
            var narrativeText = params.newValue;
            params.data.narrative = (narrativeText).startsWith('ADD') ? params.newValue :
                this.costNarrativePrefix.concat(params.newValue);
        }
        return true;
    };
    GoodsCostAdditionalCostComponent.prototype.narrativeMaxLength = function (params) {
        if (params.data && params.value) {
            if (params.value.length > 30) {
                this.narrativeLength.emit(true);
                this.snackbarService.informationSnackBar('Narrative length should be less than 30');
                return { color: 'red' };
            }
            else {
                this.narrativeLength.emit(false);
                return { color: 'black' };
            }
        }
        return params.value;
    };
    GoodsCostAdditionalCostComponent.prototype.onCostDirectionChange = function (params) {
        if (params.data.costAmountToInvoice) {
            this.calculateTotalOnUpdateGrid();
        }
        return true;
    };
    GoodsCostAdditionalCostComponent.prototype.onCostAmountToInvoiceChange = function (params) {
        if (params.data.costDirection) {
            this.calculateTotalOnUpdateGrid();
        }
        return true;
    };
    GoodsCostAdditionalCostComponent.prototype.contractToBeSelected = function (costContracts) {
        var _this = this;
        if (costContracts.length > 0) {
            this.initializeGridColumns();
            if (this.defaultVatCode) {
                costContracts.map(function (costContract) { return costContract.vatCode = _this.defaultVatCode; });
            }
            this.selectedCostGridRows = costContracts;
            this.selectedCostGridOptions.pagination = (costContracts.length > 10) ? true : false;
            if (this.selectedCostGridRows.length > 0) {
                this.currencyCodeSelected = this.selectedCostGridRows[0].currencyCode;
            }
            else if (this.valueOfGoodsCurrency) {
                this.currencyCodeSelected = this.valueOfGoodsCurrency;
            }
            if (this.masterData.vats.length > 0) {
                this.costVatCodeCtrl.patchValue(this.masterData.vats[0].vatCode);
            }
            this.calculateTotalAmountAndGetVatCode(costContracts);
        }
        else if (this.valueOfGoodsCurrency) {
            this.currencyCodeSelected = this.valueOfGoodsCurrency;
        }
    };
    GoodsCostAdditionalCostComponent.prototype.onAddRowButtonClicked = function (numberOfLines) {
        this.isAddRow = true;
        this.gridContext.gridEditable = true;
        this.gridApi.onFilterChanged();
        for (var count = 1; count <= numberOfLines; count++) {
            var newItem = this.createNewCostRowData();
            this.gridApi.updateRowData({ add: [newItem], addIndex: 0 });
        }
    };
    GoodsCostAdditionalCostComponent.prototype.handleAction = function (action, costLine) {
        switch (action) {
            case this.costsMenuActions.deleteCostLine:
                this.onDeleteSelectedButtonClicked(costLine);
                break;
            default:
                break;
        }
    };
    GoodsCostAdditionalCostComponent.prototype.onDeleteSelectedButtonClicked = function (costLine) {
        if (!costLine.contractReference) {
            this.total = 0;
            this.gridApi.updateRowData({ remove: [costLine] });
            this.selectedCostGridRows = this.getAllInvoiceCostLines();
            this.calculationOfCRAndDR();
            this.calculateTotalOnUpdateGrid();
        }
        else {
            this.snackbarService.informationSnackBar('You cannot delete a cost which is not added in Invoice Working Page');
        }
    };
    GoodsCostAdditionalCostComponent.prototype.calculationOfCRAndDR = function () {
        var totalCR = 0;
        var totalDR = 0;
        var costDirectionPay = 'Pay';
        this.gridApi.forEachNode(function (rowNode) {
            if (rowNode.data) {
                if (rowNode.data.costDirection === costDirectionPay) {
                    totalCR = totalCR + Number(rowNode.data.costAmountToInvoice);
                }
                else {
                    totalDR = totalDR + Number(rowNode.data.costAmountToInvoice);
                }
            }
        });
        this.updateTotals(totalCR, totalDR);
        this.totalCostAndVatDetails();
    };
    GoodsCostAdditionalCostComponent.prototype.updateTotals = function (totalCR, totalDR) {
        if (totalCR > totalDR) {
            this.total = totalCR - totalDR;
            this.costDirectionDisplay = this.credit;
            this.totalCostDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"].Payable];
            this.totalCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_11__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"].Payable];
        }
        else {
            this.total = totalDR - totalCR;
            this.costDirectionDisplay = this.debit;
            this.totalCostDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"].Receivable];
            this.totalCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_11__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"].Receivable];
        }
    };
    GoodsCostAdditionalCostComponent.prototype.totalCostAndVatDetails = function () {
        var _this = this;
        this.totalCostAndVatCode.emit({
            rate: this.total,
            decimalOption: this.decimalOptionValue,
            costDirection: this.totalCostDirection,
            currencyCode: this.currencyCodeSelected,
            vatAvailable: this.vatCodeAvailable,
        });
        if (this.vatCodeAvailable) {
            this.vatCodeAvailable.forEach(function (tax) {
                _this.taxTotal = _this.taxTotal + Math.abs(tax.rate);
            });
        }
    };
    GoodsCostAdditionalCostComponent.prototype.createNewCostRowData = function () {
        if (this.valueOfGoodsCurrency && !this.currencyCodeSelected) {
            this.currencyCodeSelected = this.valueOfGoodsCurrency;
        }
        var newData = new _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_14__["ContractsToCostInvoice"]();
        newData.invoicePercent = this.invoicedPercentage;
        newData.currencyCode = this.currencyCodeSelected;
        newData.narrative = this.costNarrativePrefix;
        return newData;
    };
    GoodsCostAdditionalCostComponent.prototype.setDefaultVatCode = function (defaultVatCode) {
        this.defaultVatCode = defaultVatCode;
    };
    GoodsCostAdditionalCostComponent.prototype.setTaxDataForSummary = function (costInvoiceRecord) {
        this.selectedCostGridRows = this.getCostContractsForSummary(costInvoiceRecord);
        this.initializeGridColumns();
        this.calculateTotalForSummary(costInvoiceRecord);
    };
    GoodsCostAdditionalCostComponent.prototype.getCostContractsForSummary = function (costInvoiceRecord) {
        var contracts = [];
        if (costInvoiceRecord) {
            var contract = new _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_14__["ContractsToCostInvoice"]();
            contract.vatCode = costInvoiceRecord.vatCode;
            contract.principalCommodity = costInvoiceRecord.principalCommodity;
            contract.rate = costInvoiceRecord.price;
            contract.quantity = costInvoiceRecord.quantity;
            contract.costAmountToInvoice = costInvoiceRecord.lineAmount;
            contract.invoicePercent = costInvoiceRecord.totalInvoiceValue;
            contracts.push(contract);
        }
        return contracts;
    };
    GoodsCostAdditionalCostComponent.prototype.getCostDirectionIdFromCode = function (code) {
        if (code) {
            var selectedCostDirection = this.costDirections.find(function (e) { return e.costDirection === code; });
            return selectedCostDirection.costDirectionId;
        }
    };
    GoodsCostAdditionalCostComponent.prototype.calculateTotalAmountAndGetVatCode = function (contracts) {
        var _this = this;
        this.total = 0;
        var totalCR = 0;
        var totalDR = 0;
        var costDirectionId;
        this.vatCodeAvailable = [];
        contracts.forEach(function (contract) {
            var vatCode;
            // creating copy of selected vatCode, so the calculations are not impacting the original data
            vatCode = _this.masterData.vats
                .filter(function (vat) { return (vat.vatCode === contract.vatCode); }).map(function (x) { return (__assign({}, x)); });
            if (vatCode.length > 0) {
                vatCode.map(function (code) {
                    return code.rate = code.rate / 100 * contract.costAmountToInvoice;
                });
                if (_this.vatCodeAvailable.length === 0) {
                    _this.vatCodeAvailable.push(vatCode[0]);
                }
                else {
                    _this.vatCodeAvailable.map(function (code) {
                        return (code.vatCode === vatCode[0].vatCode) ? (code.rate = code.rate + vatCode[0].rate) :
                            _this.vatCodeAvailable.push(vatCode[0]);
                    });
                }
            }
            costDirectionId = _this.getCostDirectionIdFromCode(contract.costDirection);
            if (costDirectionId === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"].Payable) {
                totalCR = totalCR + contract.costAmountToInvoice;
            }
            else {
                totalDR = totalDR + contract.costAmountToInvoice;
            }
        });
        if (contracts.length > 0) {
            this.currencyCode = contracts[0].currencyCode;
        }
        this.updateTotals(totalCR, totalDR);
        this.currencyCodeSelected = this.currencyCode;
        this.totalCostAndVatDetails();
    };
    GoodsCostAdditionalCostComponent.prototype.calculateTotalOnUpdateGrid = function () {
        var totalCR = 0;
        var totalDR = 0;
        var costDirectionPay = 'Pay';
        var vatMasterData = this.masterData.vats;
        var vatCodeAvailable = [];
        this.gridApi.forEachNode(function (rowNode) {
            if (rowNode.data) {
                var vatCode_1 = [];
                if (rowNode.data.costDirection === costDirectionPay) {
                    totalCR = totalCR + Number(rowNode.data.costAmountToInvoice);
                }
                else {
                    totalDR = totalDR + Number(rowNode.data.costAmountToInvoice);
                }
                vatCode_1 = vatMasterData
                    .filter(function (vat) { return (vat.vatCode === rowNode.data.vatCode); }).map(function (x) { return (__assign({}, x)); });
                if (vatCode_1.length > 0) {
                    vatCode_1.map(function (code) {
                        return code.rate = code.rate / 100 * rowNode.data.costAmountToInvoice;
                    });
                    if (vatCodeAvailable.length === 0) {
                        if (rowNode.data.costDirection === costDirectionPay) {
                            vatCode_1[0].rate = -(vatCode_1[0].rate);
                        }
                        vatCodeAvailable.push(vatCode_1[0]);
                    }
                    else {
                        var isAvailable_1 = false;
                        vatCodeAvailable.map(function (code) {
                            if (code.vatCode === vatCode_1[0].vatCode) {
                                if (vatCodeAvailable.filter(function (selectedVatCode) { return selectedVatCode.vatCode === vatCode_1[0].vatCode; })) {
                                    if (rowNode.data.costDirection === costDirectionPay) {
                                        vatCode_1[0].rate = -(vatCode_1[0].rate);
                                    }
                                    code.rate = code.rate + vatCode_1[0].rate;
                                    isAvailable_1 = true;
                                }
                            }
                        });
                        if (!isAvailable_1) {
                            vatCodeAvailable = vatCodeAvailable.filter(function (code) { return code.vatCode !== vatCode_1[0].vatCode; });
                            if (rowNode.data.costDirection === costDirectionPay) {
                                vatCode_1[0].rate = -(vatCode_1[0].rate);
                            }
                            vatCodeAvailable.push(vatCode_1[0]);
                        }
                    }
                }
            }
        });
        this.updateTotals(totalCR, totalDR);
        if (this.useGoodsTaxCodeCtrl.value) {
            this.setVatCodeAvailable();
        }
        else {
            this.vatCodeAvailable = vatCodeAvailable.map(function (x) { return (__assign({}, x)); });
            this.totalCostAndVatDetails();
        }
    };
    GoodsCostAdditionalCostComponent.prototype.formatQuantityAndTotal = function (input) {
        var formattedInput = new Intl.NumberFormat(this.formatType, { minimumFractionDigits: this.minDecimalOptionValue, maximumFractionDigits: this.decimalOptionValue }).format(input);
        return formattedInput.toLocaleString();
    };
    GoodsCostAdditionalCostComponent.prototype.calculateTotalForSummary = function (costInvoiceRecord) {
        this.total = costInvoiceRecord.totalVatAmount;
        this.currencyCode = costInvoiceRecord.currencyCode;
    };
    GoodsCostAdditionalCostComponent.prototype.onVatCodeChange = function (params) {
        if (params.data.costAmountToInvoice) {
            this.calculateTotalOnUpdateGrid();
        }
    };
    GoodsCostAdditionalCostComponent.prototype.requiredCell = function (params) {
        if (params.data && params.context.gridEditable) {
            if (!params.value || params.value === '') {
                return '<div class=\'cost-cell-value-required\'>Required*</div>';
            }
        }
        return params.value;
    };
    GoodsCostAdditionalCostComponent.prototype.requiredCellForCostAmount = function (params) {
        if (params.data && params.context.gridEditable) {
            if (!params.value || params.value === '') {
                return '<div class=\'cost-cell-value-required\'>Required*</div>';
            }
        }
        params.value = (this.decimalFormatter(params.value, this.decimalOptionValue, this.formatType));
        return params.value;
    };
    GoodsCostAdditionalCostComponent.prototype.validate = function () {
        var isValid = true;
        if (this.isAddRow) {
            this.gridApi.forEachNode(function (rowData) {
                if (!(rowData.data.costTypeCode && rowData.data.costDirection && rowData.data.vatCode
                    && rowData.data.costAmountToInvoice)) {
                    isValid = false;
                }
            });
        }
        return isValid;
    };
    GoodsCostAdditionalCostComponent.prototype.onCostVatCodeSelected = function () {
        if (!this.useGoodsTaxCodeCtrl.value) {
            var vat_1 = this.costVatCodeCtrl.value;
            this.selectedCostVat = vat_1;
            var changedVatCode_2 = [];
            this.gridApi.forEachNode(function (rowNode) {
                if (rowNode.data) {
                    var data = rowNode.data;
                    data.vatCode = vat_1;
                    changedVatCode_2.push(data);
                }
            });
            this.gridApi.updateRowData({ update: changedVatCode_2 });
            this.calculateTotalOnUpdateGrid();
        }
    };
    GoodsCostAdditionalCostComponent.prototype.onCostTypeChange = function (params) {
        var filteredCostType = params.colDef.cellRendererParams.context.costTypes.find(function (e) { return e.costTypeCode === params.data.costTypeCode; });
        if (filteredCostType) {
            this.inPNL = filteredCostType.inPNL;
            this.noAction = filteredCostType.noAction;
        }
    };
    GoodsCostAdditionalCostComponent.prototype.populateEntity = function (entity) {
        var selectedInvoiceCosts = entity;
        selectedInvoiceCosts.currency = this.currencyCodeSelected;
        if (selectedInvoiceCosts.invoiceLines && selectedInvoiceCosts.invoiceLines.length > 0) {
            var invoiceLines = this.getInvoiceCostLines(selectedInvoiceCosts.invoiceLines.length);
            invoiceLines.forEach(function (line) {
                selectedInvoiceCosts.invoiceLines.push(line);
            });
        }
        else {
            selectedInvoiceCosts.invoiceLines = this.getInvoiceCostLines();
        }
        return selectedInvoiceCosts;
    };
    GoodsCostAdditionalCostComponent.prototype.getAllInvoiceCostLines = function () {
        var selectedCostRows = [];
        this.gridApi.forEachNode(function (rowData) {
            if (rowData.data) {
                var costInvoiceline = new _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_14__["ContractsToCostInvoice"]();
                costInvoiceline.costId = rowData.data.costId;
                costInvoiceline.sectionId = rowData.data.sectionId;
                costInvoiceline.costAmountToInvoice = rowData.data.costAmountToInvoice;
                costInvoiceline.quantity = rowData.data.quantity;
                costInvoiceline.costTypeCode = rowData.data.costTypeCode;
                costInvoiceline.currencyCode = rowData.data.currencyCode;
                costInvoiceline.vatCode = rowData.data.vatCode;
                costInvoiceline.narrative = rowData.data.narrative;
                costInvoiceline.invoicePercent = rowData.data.invoicePercent;
                costInvoiceline.rateTypeCode = rowData.data.rateTypeCode;
                costInvoiceline.costDirection = rowData.data.costDirection;
                selectedCostRows.push(costInvoiceline);
            }
        });
        return selectedCostRows;
    };
    GoodsCostAdditionalCostComponent.prototype.getInvoiceCostLines = function (index) {
        var _this = this;
        if (index === void 0) { index = 0; }
        var invoiceLines = [];
        this.selectedCostGridRows = this.getAllInvoiceCostLines();
        this.selectedCostGridRows.map(function (data) {
            var invoiceLine = new _shared_entities_invoice_line_record_entity__WEBPACK_IMPORTED_MODULE_9__["InvoiceLineRecord"]();
            invoiceLine.costID = data.costId;
            invoiceLine.sectionID = data.sectionId;
            invoiceLine.lineAmount = data.costAmountToInvoice;
            invoiceLine.vatCode = data.vatCode;
            invoiceLine.vatAmount = _this.taxTotal;
            invoiceLine.invoicePercent = data.invoicePercent;
            invoiceLine.costTypeCode = data.costTypeCode;
            invoiceLine.currencyCode = data.currencyCode;
            invoiceLine.rateTypeId = (!data.costId) ? 1 : _shared_enums_rate_type_enum__WEBPACK_IMPORTED_MODULE_12__["RateTypes"][data.rateTypeCode];
            var selectedCostDirection = _this.costDirections.find(function (e) { return e.costDirection === data.costDirection; });
            invoiceLine.costDirectionId = selectedCostDirection.costDirectionId;
            invoiceLine.narrative = data.narrative;
            invoiceLine.inPL = _this.inPNL;
            invoiceLine.noAct = _this.noAction;
            invoiceLines.push(invoiceLine);
            index++;
        });
        return invoiceLines;
    };
    /* Code for home grid to summary redirection */
    GoodsCostAdditionalCostComponent.prototype.contractToBeSelectedFromGrid = function (summaryRecord) {
        var _this = this;
        if (summaryRecord) {
            this.selectedCostGridRows = this.getCostContractsForSummaryFromGrid(summaryRecord.summaryLines, summaryRecord.currency);
            this.initializeGridColumnsFromSummary();
            if (this.selectedCostGridRows.length > 0) {
                this.calculateTotalAmountAndGetVatCode(this.selectedCostGridRows);
            }
            else {
                this.currencyCodeSelected = summaryRecord.currency;
                summaryRecord.summaryLines.forEach(function (record) {
                    if (record.vatCode) {
                        _this.vatCodeAvailable = _this.masterData.vats.filter(function (option) { return option.vatCode === record.vatCode; });
                    }
                });
                this.totalCostAndVatCode.emit({
                    rate: this.total,
                    decimalOption: this.decimalOptionValue,
                    costDirection: this.totalCostDirection,
                    currencyCode: this.currencyCodeSelected,
                    vatAvailable: this.vatCodeAvailable,
                });
            }
        }
    };
    GoodsCostAdditionalCostComponent.prototype.calculateTotalForSummaryFromGrid = function (summaryRecord) {
        var _this = this;
        this.total = 0;
        var contracts = summaryRecord.summaryLines;
        var costDirectionId;
        var totalCR = 0;
        var totalDR = 0;
        contracts.forEach(function (contract) {
            costDirectionId = _this.getCostDirectionIdFromCode(contract.costDirection);
            if (costDirectionId === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_10__["CostDirections"].Payable) {
                totalCR = totalCR + contract.lineAmount;
            }
            else {
                totalDR = totalDR + contract.lineAmount;
            }
        });
        if (contracts.length > 0) {
            this.currencyCodeSelected = summaryRecord.currency;
        }
        this.updateTotals(totalCR, totalDR);
    };
    GoodsCostAdditionalCostComponent.prototype.initializeGridColumnsFromSummary = function () {
        this.selectedCostGridColumns = [
            {
                headerName: 'Cost Type',
                field: 'costTypeCode',
                colId: 'costTypeCode',
                hide: false,
            },
            {
                headerName: 'Cost Amount',
                field: 'costAmountToInvoice',
                colId: 'costAmountToInvoice',
                hide: false,
            },
            {
                headerName: 'Contract Commodity',
                field: 'principalCommodity',
                colId: 'principalCommodity',
                hide: false,
            },
            {
                headerName: 'Quantity',
                field: 'quantity',
                colId: 'quantity',
                hide: false,
            },
            {
                headerName: 'Price',
                field: 'rate',
                colId: 'rate',
                hide: false,
            },
            {
                headerName: '% Invoiced',
                field: 'percentageInvoiced',
                colId: 'percentageInvoiced',
                hide: false,
            },
            {
                headerName: 'Pay/Rec',
                field: 'costDirection',
                colId: 'costDirection',
                hide: false,
            },
            {
                headerName: 'VAT Code',
                field: 'vatCode',
                colId: 'vatCode',
                hide: false,
            },
        ];
    };
    GoodsCostAdditionalCostComponent.prototype.init = function () {
        this.costGridContextualMenuActions = [
            {
                icon: 'delete',
                text: 'Delete',
                action: this.costsMenuActions.deleteCostLine,
            },
        ];
    };
    GoodsCostAdditionalCostComponent.prototype.getCostContractsForSummaryFromGrid = function (summaryLines, currencyCode) {
        var contracts = [];
        summaryLines.map(function (record) {
            if (record.costId > 0) {
                var contract = new _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_14__["ContractsToCostInvoice"]();
                contract.costTypeCode = record.costTypeCode;
                contract.principalCommodity = record.principalCommodity;
                contract.rate = record.price;
                contract.quantity = record.quantity.toString();
                contract.weightCode = record.weightCode;
                contract.costAmountToInvoice = record.lineAmount;
                contract.costDirection = record.costDirection;
                contract.vatCode = record.vatCode;
                contract.invoicePercent = record.invoicePercent;
                contract.currencyCode = currencyCode;
                contracts.push(contract);
            }
        });
        return contracts;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], GoodsCostAdditionalCostComponent.prototype, "selectedGoodsVat", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], GoodsCostAdditionalCostComponent.prototype, "totalCostAndVatCode", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], GoodsCostAdditionalCostComponent.prototype, "narrativeLength", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], GoodsCostAdditionalCostComponent.prototype, "valueOfGoodsCurrency", void 0);
    GoodsCostAdditionalCostComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-goods-cost-additional-cost',
            template: __webpack_require__(/*! ./goods-cost-additional-cost.component.html */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-additional-cost/goods-cost-additional-cost.component.html"),
            styles: [__webpack_require__(/*! ./goods-cost-additional-cost.component.scss */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-additional-cost/goods-cost-additional-cost.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_15__["FormConfigurationProviderService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_17__["UiService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_16__["SnackbarService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_13__["AgGridService"]])
    ], GoodsCostAdditionalCostComponent);
    return GoodsCostAdditionalCostComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_6__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-details/goods-cost-details.component.html":
/*!****************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-details/goods-cost-details.component.html ***!
  \****************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"invoice-creation-card\">\r\n    <mat-card-title>\r\n        <h2>Invoice Selection</h2>\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <mat-form-field fxFlex=\"49\"\r\n                            class=\"margin-bottom\">\r\n                <input matInput\r\n                       [matDatepicker]=\"invoiceDatePicker\"\r\n                       placeholder=\"Invoice date\"\r\n                       matTooltip=\"Invoice date\"\r\n                       [formControl]='invoiceDateCtrl'\r\n                       autocomplete=\"off\"\r\n                       (dateChange)='onInvoiceDateSelected()'>\r\n                <mat-hint style=\"color:orange\"\r\n                          *ngIf=\"isDateAfterValid\"> Invoice Date is in Future</mat-hint>\r\n                <mat-datepicker-toggle matSuffix\r\n                                       [for]=\"invoiceDatePicker\"></mat-datepicker-toggle>\r\n                <mat-datepicker #invoiceDatePicker></mat-datepicker>\r\n                <mat-error *ngIf=\"invoiceDateCtrl.hasError('isDateBeforeValid')\">\r\n                    Invoice Date can be equal to or after the contract date\r\n                </mat-error>\r\n            </mat-form-field>\r\n            <mat-form-field class=\"mat-read-only-field\"\r\n                            fxFlex=\"49\">\r\n                <input matInput\r\n                       placeholder=\"Counterparty\"\r\n                       matTooltip=\"Counterparty\"\r\n                       [formControl]=\"counterpartyCtrl\"\r\n                       autocomplete=\"off\"\r\n                       readonly>\r\n            </mat-form-field>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <mat-form-field class=\"mat-read-only-field\"\r\n                            fxFlex=\"32%\">\r\n                <input matInput\r\n                       placeholder=\"Invoice type\"\r\n                       matTooltip=\"Invoice Type\"\r\n                       [formControl]=\"invoiceTypeCtrl\"\r\n                       autocomplete=\"off\"\r\n                       readonly>\r\n            </mat-form-field>\r\n            <mat-form-field class=\"mat-read-only-field\"\r\n                            fxFlex=\"32%\">\r\n                <input matInput\r\n                       placeholder=\"Costs/Commission\"\r\n                       matTooltip=\"Costs/Commission\"\r\n                       [formControl]=\"costCommissionCtrl\"\r\n                       autocomplete=\"off\"\r\n                       readonly>\r\n            </mat-form-field>\r\n            <mat-form-field class=\"mat-read-only-field\"\r\n                            fxFlex=\"25%\">\r\n                <input matInput\r\n                       placeholder=\"Quantity to Invoice\"\r\n                       matTooltip=\"Quantity to Invoice\"\r\n                       value=\"Contract\"\r\n                       [formControl]=\"quantityInvoiceCtrl\"\r\n                       autocomplete=\"off\"\r\n                       readonly>\r\n            </mat-form-field>\r\n        </div>\r\n        <mat-divider></mat-divider>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <mat-slide-toggle [checked]=\"true\"\r\n                              [formControl]=\"authorizePostingCtrl\">Authorize for posting</mat-slide-toggle>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-details/goods-cost-details.component.scss":
/*!****************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-details/goods-cost-details.component.scss ***!
  \****************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "mat-slide-toggle {\n  margin-top: 2%; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-details/goods-cost-details.component.ts":
/*!**************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-details/goods-cost-details.component.ts ***!
  \**************************************************************************************************************************************************************/
/*! exports provided: GoodsCostDetailsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoodsCostDetailsComponent", function() { return GoodsCostDetailsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/validators/date-validators.validator */ "./Client/app/shared/validators/date-validators.validator.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var moment = moment__WEBPACK_IMPORTED_MODULE_3__;
var GoodsCostDetailsComponent = /** @class */ (function (_super) {
    __extends(GoodsCostDetailsComponent, _super);
    function GoodsCostDetailsComponent(route, formBuilder, companyManager, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.companyManager = companyManager;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.invoiceDateSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.invoiceDateCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('InvoiceSelectionDate');
        _this.invoiceTypeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('InvoiceSelected');
        _this.counterpartyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('Counterparty');
        _this.costCommissionCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('CostCommission');
        _this.quantityInvoiceCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('QuantityInvoice');
        _this.authorizePostingCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('AuthorizePosting');
        _this.masterData = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_7__["MasterData"]();
        _this.invoiceDate = _this.companyManager.getCurrentCompanyDate().toDate();
        return _this;
    }
    GoodsCostDetailsComponent.prototype.ngOnInit = function () {
        this.invoiceDateCtrl.setValue(this.invoiceDate);
        this.invoiceDateSelected.emit(this.invoiceDateCtrl.value);
        this.invoiceTypeId = Number(decodeURIComponent(this.route.snapshot.paramMap.get('invoiceTypeId')));
        this.company = this.route.snapshot.paramMap.get('company');
        this.masterData = this.route.snapshot.data.masterdata;
        this.getData();
    };
    GoodsCostDetailsComponent.prototype.getData = function () {
        var _this = this;
        if (this.masterData) {
            var invoiceType = this.masterData.
                invoiceTypes.find(function (invoice) { return invoice.invoiceTypeId === _this.invoiceTypeId; });
            if (invoiceType) {
                this.invoiceTypeName = invoiceType.name;
                this.invoiceTypeCtrl.patchValue(this.invoiceTypeName);
            }
        }
        if (this.isAuthorizeForPosting) {
            this.authorizePostingCtrl.setValue(this.isAuthorizeForPosting);
        }
        else {
            this.authorizePostingCtrl.setValue(false);
        }
    };
    GoodsCostDetailsComponent.prototype.setDefaultAuthorizeForPosting = function (defaultAuthorizeForPosting) {
        this.isAuthorizeForPosting = defaultAuthorizeForPosting ? true : false;
        this.authorizePostingCtrl.setValue(this.isAuthorizeForPosting);
    };
    GoodsCostDetailsComponent.prototype.contractToBeSelected = function (contracts) {
        if (contracts.length > 0) {
            var counterparty = this.masterData.counterparties.find(function (item) { return item.counterpartyCode === contracts[0].counterparty; });
            if (counterparty) {
                this.counterpartyCtrl.patchValue(counterparty.description);
            }
            this.setInvoiceDate(contracts);
        }
    };
    GoodsCostDetailsComponent.prototype.setInvoiceDate = function (contracts) {
        this.dates = Array.from(contracts, function (x) { return x.contractDate; });
        var moments = this.dates.map(function (d) { return moment(d); }), maxDate = moment.max(moments);
        this.maxDate = maxDate;
    };
    GoodsCostDetailsComponent.prototype.onInvoiceDateSelected = function () {
        this.invoiceDate = new Date(this.invoiceDateCtrl.value);
        this.invoiceDateCtrl.clearValidators();
        this.isDateAfterValid = false;
        this.invoiceFutureValidation(this.invoiceDate);
        this.invoiceDateCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([Object(_shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_9__["invoiceDateValidation"])(this.invoiceDate, this.maxDate)]));
        this.invoiceDateCtrl.updateValueAndValidity();
        this.invoiceDateSelected.emit(this.invoiceDate);
    };
    GoodsCostDetailsComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            invoiceDateCtrl: this.invoiceDateCtrl,
            authorizePostingCtrl: this.authorizePostingCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    GoodsCostDetailsComponent.prototype.invoiceFutureValidation = function (invoiceDate) {
        var invoiceMoment = moment(invoiceDate);
        if (invoiceMoment.isAfter(this.companyManager.getCurrentCompanyDate())) {
            this.isDateAfterValid = true;
        }
    };
    GoodsCostDetailsComponent.prototype.populateEntity = function (entity) {
        var _this = this;
        var invoiceSelection = entity;
        invoiceSelection.invoiceDate = this.invoiceDateCtrl.value;
        invoiceSelection.authorizedForPosting = this.authorizePostingCtrl.value;
        if (this.masterData) {
            var counterParty = this.masterData.counterparties.find(function (counterParty) { return counterParty.description === _this.counterpartyCtrl.value; });
            if (counterParty) {
                invoiceSelection.counterpartyCode = counterParty.counterpartyCode;
            }
        }
        return invoiceSelection;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], GoodsCostDetailsComponent.prototype, "invoiceDateSelected", void 0);
    GoodsCostDetailsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-goods-cost-details',
            template: __webpack_require__(/*! ./goods-cost-details.component.html */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-details/goods-cost-details.component.html"),
            styles: [__webpack_require__(/*! ./goods-cost-details.component.scss */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-details/goods-cost-details.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__["CompanyManagerService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationProviderService"]])
    ], GoodsCostDetailsComponent);
    return GoodsCostDetailsComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-payments/goods-cost-payments.component.html":
/*!******************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-payments/goods-cost-payments.component.html ***!
  \******************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"invoice-creation-card\">\r\n    <mat-card-title>\r\n        <h2> Payments</h2>\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div>\r\n            <div class=\"goods-cost-payments\"\r\n                 fxLayout=\"row\"\r\n                 fxLayoutAlign=\"left start\"\r\n                 fxLayoutGap=\"5%\">\r\n                <mat-form-field fxFlex=\"30%\"\r\n                                class=\"mat-read-only-field\">\r\n                    <input matInput\r\n                           placeholder=\"Payment Terms\"\r\n                           [formControl]=\"invoicePayTermsCtrl\"\r\n                           matTooltip=\"Payment Terms\"\r\n                           autocomplete=\"off\"\r\n                           readonly>\r\n                </mat-form-field>\r\n                <mat-form-field fxFlex=\"30%\"\r\n                                class=\"mandatory\">\r\n                    <input matInput\r\n                           placeholder=\"Due Date\"\r\n                           [formControl]=\"invoiceDueDateCtrl\"\r\n                           [matDatepicker]=\"invoiceDueDatePicker\"\r\n                           matTooltip=\"Due Date\"\r\n                           autocomplete=\"off\"\r\n                           (dateChange)='onInvoiceDueDateSelected()'>\r\n                    <mat-datepicker-toggle matSuffix\r\n                                           [for]=\"invoiceDueDatePicker\"></mat-datepicker-toggle>\r\n                    <mat-datepicker #invoiceDueDatePicker></mat-datepicker>\r\n                    <mat-hint *ngIf=\"!invoiceDueDateCtrl.hasError('isDateBeforeValid' || 'required') && !invoiceDueDateCtrl.disabled\"\r\n                              class=\"invoice-creation-required-fields\">Required*</mat-hint>\r\n                    <mat-error *ngIf=\"invoiceDueDateCtrl.hasError('required')\">\r\n                        Required*\r\n                    </mat-error>\r\n                    <mat-error *ngIf=\"invoiceDueDateCtrl.hasError('isDateBeforeValid')\">\r\n                        Value Date should be equal to or after the invoice date\r\n                    </mat-error>\r\n                </mat-form-field>\r\n            </div>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-payments/goods-cost-payments.component.scss":
/*!******************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-payments/goods-cost-payments.component.scss ***!
  \******************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".goods-cost-payments {\n  margin-bottom: 10px; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-payments/goods-cost-payments.component.ts":
/*!****************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-payments/goods-cost-payments.component.ts ***!
  \****************************************************************************************************************************************************************/
/*! exports provided: GoodsCostPaymentsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoodsCostPaymentsComponent", function() { return GoodsCostPaymentsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/validators/date-validators.validator */ "./Client/app/shared/validators/date-validators.validator.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_enums_credit_against_type_enum__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/enums/credit-against-type.enum */ "./Client/app/shared/enums/credit-against-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};












var moment = moment__WEBPACK_IMPORTED_MODULE_3__;
var GoodsCostPaymentsComponent = /** @class */ (function (_super) {
    __extends(GoodsCostPaymentsComponent, _super);
    function GoodsCostPaymentsComponent(formBuilder, masterdataService, utilService, route, companyManager, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.masterdataService = masterdataService;
        _this.utilService = utilService;
        _this.route = route;
        _this.companyManager = companyManager;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.invoiceDueDateCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_7__["AtlasFormControl"]('invoiceCreationPaymentDueDate');
        _this.invoicePayTermsCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_7__["AtlasFormControl"]('invoiceCreationPaymentTerms');
        _this.invoiceDateSelected = _this.companyManager.getCurrentCompanyDate().toDate();
        return _this;
    }
    GoodsCostPaymentsComponent.prototype.ngOnInit = function () {
        this.masterDataPaymentTerms = this.route.snapshot.data.masterdata.paymentTerms;
    };
    GoodsCostPaymentsComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            invoiceDueDateCtrl: this.invoiceDueDateCtrl,
            invoicePayTermsCtrl: this.invoicePayTermsCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    GoodsCostPaymentsComponent.prototype.contractToBeSelected = function (contracts) {
        this.contracts = contracts;
        if (this.masterDataPaymentTerms && this.contracts) {
            this.setPaymentTerm();
        }
    };
    GoodsCostPaymentsComponent.prototype.setinvoiceDateSelected = function (invoiceDate) {
        this.invoiceDateChanged = invoiceDate;
        this.invoiceDateSelected = moment(invoiceDate).toDate();
        if (this.contracts) {
            this.setPaymentTerm();
        }
    };
    GoodsCostPaymentsComponent.prototype.setPaymentTerm = function () {
        var _this = this;
        var paymentDateToSet = this.companyManager.getCurrentCompanyDate().toDate();
        var paymentTermToSet;
        var dateDiff;
        var canUpdatePayTermValue = true;
        if (!this.invoiceDateSelected) {
            this.invoiceDateSelected = paymentDateToSet;
        }
        this.contracts.forEach(function (contract, index) {
            var calculateDate;
            var selectedPaymentTerms = _this.masterDataPaymentTerms.filter(function (payTerms) { return payTerms.paymentTermCode === contract.paymentTermCode; });
            var selectedPaymentTerm = selectedPaymentTerms.length ? selectedPaymentTerms[0] : undefined;
            if (selectedPaymentTerm) {
                if (selectedPaymentTerm.creditAgainst === _shared_enums_credit_against_type_enum__WEBPACK_IMPORTED_MODULE_8__["CreditAgainstTypes"].ArrivalDate) {
                    calculateDate = moment(contract.arrivalDate);
                }
                else if (selectedPaymentTerm.creditAgainst === _shared_enums_credit_against_type_enum__WEBPACK_IMPORTED_MODULE_8__["CreditAgainstTypes"].BLDate) {
                    calculateDate = moment(contract.bLDate);
                }
                else if (selectedPaymentTerm.creditAgainst === _shared_enums_credit_against_type_enum__WEBPACK_IMPORTED_MODULE_8__["CreditAgainstTypes"].CurrentDate) {
                    calculateDate = _this.companyManager.getCurrentCompanyDate();
                }
                else if (selectedPaymentTerm.creditAgainst === _shared_enums_credit_against_type_enum__WEBPACK_IMPORTED_MODULE_8__["CreditAgainstTypes"].InvoiceDate) {
                    calculateDate = moment(_this.invoiceDateSelected);
                }
                calculateDate = moment(calculateDate).add('days', selectedPaymentTerm.creditDays);
                if (dateDiff) {
                    canUpdatePayTermValue = dateDiff > moment(calculateDate).diff(_this.invoiceDateSelected) ? true : false;
                }
                if (canUpdatePayTermValue) {
                    paymentDateToSet = calculateDate.toDate();
                    paymentTermToSet = contract.paymentTermCode;
                    dateDiff = moment(calculateDate).diff(_this.invoiceDateSelected);
                    _this.paymentTermsDescription = selectedPaymentTerm.description;
                }
            }
        });
        if (paymentDateToSet) {
            this.invoiceDueDateCtrl.patchValue(paymentDateToSet);
            this.invoicePayTermsCtrl.patchValue(paymentTermToSet);
        }
    };
    GoodsCostPaymentsComponent.prototype.onInvoiceDueDateSelected = function () {
        this.invoiceDueDateCtrl.clearValidators();
        this.invoiceDueDateCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([Object(_shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_6__["invoiceDateValidation"])(this.invoiceDueDateCtrl.value, moment(this.invoiceDateChanged)), _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]));
        this.invoiceDueDateCtrl.updateValueAndValidity();
    };
    GoodsCostPaymentsComponent.prototype.populateEntity = function (entity) {
        var payments = entity;
        payments.paymentTerms = this.invoicePayTermsCtrl.value;
        payments.dueDate = this.invoiceDueDateCtrl.value;
        return payments;
    };
    GoodsCostPaymentsComponent.prototype.setPaymentFieldsForSummary = function (model) {
        this.invoicePayTermsCtrl.patchValue(model.paymentTerms);
        this.invoiceDueDateCtrl.patchValue(model.dueDate);
    };
    GoodsCostPaymentsComponent.prototype.setValuesForSummaryFromGrid = function (summaryRecord) {
        this.invoicePayTermsCtrl.patchValue(summaryRecord.paymentTermsCode);
        this.invoiceDueDateCtrl.patchValue(summaryRecord.dueDate);
    };
    GoodsCostPaymentsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-goods-cost-payments',
            template: __webpack_require__(/*! ./goods-cost-payments.component.html */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-payments/goods-cost-payments.component.html"),
            styles: [__webpack_require__(/*! ./goods-cost-payments.component.scss */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-payments/goods-cost-payments.component.scss")]
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_10__["MasterdataService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_11__["UtilService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__["CompanyManagerService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_9__["FormConfigurationProviderService"]])
    ], GoodsCostPaymentsComponent);
    return GoodsCostPaymentsComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-cost/goods-cost-tax-cost.component.html":
/*!******************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-cost/goods-cost-tax-cost.component.html ***!
  \******************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-title class=\"no-margin\">\r\n        Tax For Cost\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <ag-grid-angular class=\"ag-theme-material\"\r\n                         [rowData]=\"taxesGridRows\"\r\n                         [columnDefs]=\"taxesGridColumns\"\r\n                         domLayout=\"autoHeight\"\r\n                         (gridReady)=\"onGridReady($event)\"\r\n                         [pagination]=\"false\"\r\n                         [paginationPageSize]=\"10\"\r\n                         [enableSorting]=\"true\"\r\n                         [enableColResize]=\"true\"\r\n                         enableFilter\r\n                         [rowHeight]=atlasAgGridParam.rowHeight>\r\n        </ag-grid-angular>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"end\">\r\n            <mat-card-subtitle class=\"total-figure\">Total Tax Amount: <span\r\n                      class=\"total-figure-value\">{{defaultTaxDirectionSign}}{{formatQuantityAndTotal(this.taxTotal)}}\r\n                    {{currencyCode}} </span>\r\n            </mat-card-subtitle>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-cost/goods-cost-tax-cost.component.scss":
/*!******************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-cost/goods-cost-tax-cost.component.scss ***!
  \******************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".ag-theme-material {\n  margin-bottom: 0; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-cost/goods-cost-tax-cost.component.ts":
/*!****************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-cost/goods-cost-tax-cost.component.ts ***!
  \****************************************************************************************************************************************************************/
/*! exports provided: GoodsCostTaxCostComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoodsCostTaxCostComponent", function() { return GoodsCostTaxCostComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-sign.enum */ "./Client/app/shared/enums/cost-sign.enum.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_execution_dtos_tax_record__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/services/execution/dtos/tax-record */ "./Client/app/shared/services/execution/dtos/tax-record.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var GoodsCostTaxCostComponent = /** @class */ (function (_super) {
    __extends(GoodsCostTaxCostComponent, _super);
    function GoodsCostTaxCostComponent(route, formConfigurationProvider, uiService, gridService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.uiService = uiService;
        _this.gridService = gridService;
        _this.totalCostTaxCalculated = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.taxesGridOptions = {};
        _this.isGroupingEnabled = false;
        _this.costDirectionDisplay = '';
        _this.debit = 'Dr';
        _this.credit = 'Cr';
        _this.costTotal = 0;
        _this.total = 0;
        _this.taxTotal = 0;
        _this.currencyCode = '';
        _this.pricingOptionValue = 0;
        _this.decimalOptionValue = 2;
        _this.formatType = 'en-US';
        _this.masterdata = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_3__["MasterData"]();
        _this.costDirectionPay = 'Pay';
        _this.defaultTaxDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_5__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"].Payable];
        _this.atlasAgGridParam = _this.gridService.getAgGridParam();
        return _this;
    }
    GoodsCostTaxCostComponent.prototype.ngOnInit = function () {
        this.initializeGridColumns();
        this.masterdata = this.route.snapshot.data.masterdata;
    };
    GoodsCostTaxCostComponent.prototype.onGridReady = function (params) {
        var _this = this;
        params.columnDefs = this.taxesGridColumns;
        this.taxesGridOptions = params;
        this.gridColumnApi = params.columnApi;
        this.gridColumnApi.autoSizeAllColumns();
        window.onresize = function () {
            _this.gridColumnApi.autoSizeAllColumns();
        };
    };
    GoodsCostTaxCostComponent.prototype.initializeGridColumns = function () {
        this.taxesGridColumns = [
            {
                headerName: 'VAT Code',
                field: 'vatCode',
                colId: 'vatCode',
                hide: false,
            },
            {
                headerName: 'Description',
                field: 'vatDescription',
                colId: 'vatDescription',
                hide: false,
            },
            {
                headerName: 'VAT Amount',
                field: 'rate',
                colId: 'rate',
                hide: false,
                valueFormatter: this.vatAmountFormatter.bind(this),
            },
        ];
    };
    GoodsCostTaxCostComponent.prototype.vatAmountFormatter = function (param) {
        return Math.abs(param.value);
    };
    GoodsCostTaxCostComponent.prototype.taxRecordsSelected = function (taxesRecord) {
        if (taxesRecord && taxesRecord.length > 0) {
            this.initializeGridColumns();
            this.taxesGridRows = taxesRecord;
            this.calculateTotalAmount(taxesRecord);
        }
    };
    GoodsCostTaxCostComponent.prototype.setDirectionAndCurrency = function (data) {
        this.costDirectionDisplay = data.costDirection;
        this.currencyCode = data.currencyCode;
    };
    GoodsCostTaxCostComponent.prototype.calculateTotalAmount = function (taxes) {
        var _this = this;
        this.total = 0;
        this.taxTotal = 0;
        taxes.forEach(function (tax) {
            _this.taxTotal = _this.taxTotal + Math.abs(tax.rate);
        });
        this.totalCostTaxCalculated.emit({
            amount: this.taxTotal,
            decimalOption: this.decimalOptionValue,
            currencyCode: this.currencyCode,
            costDirection: this.costDirectionDisplay,
        });
    };
    GoodsCostTaxCostComponent.prototype.formatQuantityAndTotal = function (input) {
        var formattedInput = new Intl.NumberFormat(this.formatType, { minimumFractionDigits: this.decimalOptionValue }).format(input);
        return formattedInput.toLocaleString();
    };
    GoodsCostTaxCostComponent.prototype.calculateTotalForSummary = function (costInvoiceRecord) {
        this.total = costInvoiceRecord.totalVatAmount;
        this.currencyCode = costInvoiceRecord.currencyCode;
    };
    GoodsCostTaxCostComponent.prototype.getTaxesForSelectedVat = function (model) {
        if (model) {
            this.costTotal = model.rate;
            this.decimalOptionValue = model.decimalOption;
            this.currencyCode = model.currencyCode;
            this.totalCostDirection = model.costDirection;
            if (model.costDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"].Payable]) {
                this.costDirectionDisplay = this.credit;
            }
            else if (model.costDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"].Receivable]) {
                this.costDirectionDisplay = this.debit;
            }
            this.taxRecordsSelected(model.vatAvailable);
        }
    };
    GoodsCostTaxCostComponent.prototype.setDefaultVatCode = function (defaultVatCode) {
        var _this = this;
        this.vatCode = this.masterdata.vats.filter(function (option) { return option.vatCode === defaultVatCode; });
        var defaultTaxRecord = [];
        this.vatCode.forEach(function (data) {
            var taxLine = new _shared_services_execution_dtos_tax_record__WEBPACK_IMPORTED_MODULE_7__["TaxRecord"]();
            taxLine.vatCode = data.vatCode;
            taxLine.vatDescription = data.vatDescription;
            taxLine.rate = data.rate;
            taxLine.costDirection = _this.credit;
            defaultTaxRecord.push(taxLine);
        });
        if (defaultTaxRecord) {
            this.taxRecordsSelected(defaultTaxRecord);
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], GoodsCostTaxCostComponent.prototype, "totalCostTaxCalculated", void 0);
    GoodsCostTaxCostComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-goods-cost-tax-cost',
            template: __webpack_require__(/*! ./goods-cost-tax-cost.component.html */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-cost/goods-cost-tax-cost.component.html"),
            styles: [__webpack_require__(/*! ./goods-cost-tax-cost.component.scss */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-cost/goods-cost-tax-cost.component.scss")]
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationProviderService"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_9__["UiService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_6__["AgGridService"]])
    ], GoodsCostTaxCostComponent);
    return GoodsCostTaxCostComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-goods/goods-cost-tax-goods.component.html":
/*!********************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-goods/goods-cost-tax-goods.component.html ***!
  \********************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"invoice-creation-card\"\r\n          fxFlex>\r\n    <mat-card-title>\r\n        Tax For Goods\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"start center\"\r\n             fxLayoutGap=\"10px\">\r\n            <div fxFlex=\"33\">\r\n                <mat-form-field>\r\n                    <mat-select placeholder=\"Goods VAT Code\"\r\n                                [formControl]=\"invoiceGoodsVatCodeCtrl\"\r\n                                matTooltip=\"VAT Code\"\r\n                                [panelWidth]=\"panelSize\"\r\n                                (optionSelected)=\"vatCodeSelected($event.option.value)\">\r\n                        <mat-option *ngFor=\"let vatCode of filteredVatCodes\"\r\n                                    [value]=\"vatCode.vatCode\">\r\n                            {{vatCode.vatCode}} | {{vatCode.vatDescription}}\r\n                        </mat-option>\r\n                    </mat-select>\r\n                </mat-form-field>\r\n            </div>\r\n            <div fxFlex=\"22\">\r\n                <atlas-form-input [fieldControl]=\"invoiceVatRateCtrl\"\r\n                                  [isEditable]=\"isInputField\"\r\n                                  label=\"VAT Rate\">\r\n                </atlas-form-input>\r\n            </div>\r\n            <div fxFlex=\"33\">\r\n                <atlas-form-input [fieldControl]=\"invoiceVatAmountCtrl\"\r\n                                  [isEditable]=\"isInputField\"\r\n                                  label=\"Vat Amount For Goods\">\r\n                </atlas-form-input>\r\n            </div>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-goods/goods-cost-tax-goods.component.scss":
/*!********************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-goods/goods-cost-tax-goods.component.scss ***!
  \********************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".invoice-creation-card {\n  width: 100%; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-goods/goods-cost-tax-goods.component.ts":
/*!******************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-goods/goods-cost-tax-goods.component.ts ***!
  \******************************************************************************************************************************************************************/
/*! exports provided: GoodsCostTaxGoodsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoodsCostTaxGoodsComponent", function() { return GoodsCostTaxGoodsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/entities/masterdata-props.entity */ "./Client/app/shared/entities/masterdata-props.entity.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var GoodsCostTaxGoodsComponent = /** @class */ (function (_super) {
    __extends(GoodsCostTaxGoodsComponent, _super);
    function GoodsCostTaxGoodsComponent(formBuilder, masterdataService, utilService, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.masterdataService = masterdataService;
        _this.utilService = utilService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.selectedGoodsTaxCode = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.invoiceGoodsVatCodeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_3__["AtlasFormControl"]('invoiceCreationGoodsVatCode');
        _this.invoiceVatRateCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_3__["AtlasFormControl"]('invoiceCreationVatRate');
        _this.invoiceVatAmountCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_3__["AtlasFormControl"]('invoiceCreationVatAmount');
        _this.masterdataList = [
            _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_4__["MasterDataProps"].Vats,
        ];
        _this.isInputField = false;
        return _this;
    }
    GoodsCostTaxGoodsComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.masterdataService.getMasterData(this.masterdataList).subscribe(function (data) {
            _this.masterdata = data;
            _this.filteredVatCodes = _this.masterdata.vats;
            _this.invoiceGoodsVatCodeCtrl.valueChanges.subscribe(function (input) {
                _this.filteredVatCodes =
                    _this.utilService.filterListforAutocomplete(input, _this.masterdata.vats, ['vatCode', 'vatDescription']);
            });
            _this.bindConfiguration();
        });
        this.onChanges();
    };
    GoodsCostTaxGoodsComponent.prototype.onChanges = function () {
        var _this = this;
        this.invoiceGoodsVatCodeCtrl.valueChanges.subscribe(function (val) {
            _this.selectedGoodsTaxCode.emit(_this.invoiceGoodsVatCodeCtrl.value);
        });
    };
    GoodsCostTaxGoodsComponent.prototype.setDefaultVatCode = function (defaultVatCode) {
        var _this = this;
        this.defaultVatCode = defaultVatCode;
        if (this.defaultVatCode) {
            var vatCode = this.masterdata.vats.filter(function (option) { return option.vatCode === _this.defaultVatCode; });
            if (vatCode.length > 0) {
                this.invoiceGoodsVatCodeCtrl.patchValue(vatCode[0].vatCode);
                this.invoiceVatRateCtrl.patchValue(vatCode[0].rate);
                this.invoiceVatAmountCtrl.patchValue(vatCode[0].rate);
            }
        }
    };
    GoodsCostTaxGoodsComponent.prototype.setDataForTaxGoods = function (summaryLines, defaultVATCode) {
        var _this = this;
        summaryLines.map(function (record) {
            if (record.sectionId) {
                _this.defaultVatCode = record.vatCode;
            }
        });
        if (!this.defaultVatCode) {
            this.defaultVatCode = defaultVATCode;
        }
        this.setDefaultVatCode(this.defaultVatCode);
    };
    GoodsCostTaxGoodsComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            invoiceGoodsVatCodeCtrl: this.invoiceGoodsVatCodeCtrl,
            invoiceVatRateCtrl: this.invoiceVatRateCtrl,
            invoiceVatAmountCtrl: this.invoiceVatAmountCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    GoodsCostTaxGoodsComponent.prototype.vatCodeSelected = function (vatCode) {
        var selectedVatCode = this.masterdata.vats.find(function (vat) { return vat.vatCode === vatCode; });
        this.invoiceVatRateCtrl.patchValue(selectedVatCode.rate);
        this.invoiceVatAmountCtrl.patchValue(selectedVatCode.vatDescription);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], GoodsCostTaxGoodsComponent.prototype, "selectedGoodsTaxCode", void 0);
    GoodsCostTaxGoodsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-goods-cost-tax-goods',
            template: __webpack_require__(/*! ./goods-cost-tax-goods.component.html */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-goods/goods-cost-tax-goods.component.html"),
            styles: [__webpack_require__(/*! ./goods-cost-tax-goods.component.scss */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-goods/goods-cost-tax-goods.component.scss")]
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_6__["MasterdataService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__["UtilService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_5__["FormConfigurationProviderService"]])
    ], GoodsCostTaxGoodsComponent);
    return GoodsCostTaxGoodsComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-total/goods-cost-total.component.html":
/*!************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-total/goods-cost-total.component.html ***!
  \************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"invoice-creation-card\">\r\n    <mat-card-header>\r\n        <mat-card-title class=\"no-margin\">\r\n            Total Amount\r\n        </mat-card-title>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n        <div fxLayout=\"column\"\r\n             fxLayoutAlign=\"end end\"\r\n             class=\"total-amount-content\">\r\n            <mat-card-subtitle class=\"total-figure\">Invoice Total Without Taxes: <span\r\n                      class=\"total-figure-value\">{{formatAmount(amount)}}\r\n                    {{currencyCode}}</span>\r\n            </mat-card-subtitle>\r\n            <mat-card-subtitle class=\"total-figure\">Total Taxes: <span\r\n                      class=\"total-figure-value\">{{formatAmount(this.taxTotal)}}\r\n                    {{currencyCode}}</span>\r\n            </mat-card-subtitle>\r\n            <mat-card-subtitle class=\"total-figure\">Total Invoice Value: Amount to {{invoiceLabel}} <span\r\n                      class=\"total-figure-value\">{{formatAmount(this.total)}}\r\n                    {{currencyCode}}</span>\r\n            </mat-card-subtitle>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-total/goods-cost-total.component.scss":
/*!************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-total/goods-cost-total.component.scss ***!
  \************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "mat-card-content {\n  height: 50%; }\n  mat-card-content .total-amount-content {\n    height: 100%; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-total/goods-cost-total.component.ts":
/*!**********************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-total/goods-cost-total.component.ts ***!
  \**********************************************************************************************************************************************************/
/*! exports provided: GoodsCostTotalComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoodsCostTotalComponent", function() { return GoodsCostTotalComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-direction-type.enum */ "./Client/app/shared/enums/cost-direction-type.enum.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-sign.enum */ "./Client/app/shared/enums/cost-sign.enum.ts");
/* harmony import */ var _shared_enums_invoice_payment_type__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/enums/invoice-payment-type */ "./Client/app/shared/enums/invoice-payment-type.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var GoodsCostTotalComponent = /** @class */ (function (_super) {
    __extends(GoodsCostTotalComponent, _super);
    function GoodsCostTotalComponent(formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.total = 0;
        _this.amount = 0;
        _this.taxTotal = 0;
        _this.formatType = 'en-US';
        _this.defaultDecimalOption = 2;
        _this.minDecimalOptionValue = 2;
        _this.debit = 'Dr';
        _this.credit = 'Cr';
        _this.taxCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_4__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable];
        return _this;
    }
    GoodsCostTotalComponent.prototype.ngOnInit = function () {
        this.costDirections = [
            {
                costDirectionId: _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable,
                costDirection: 'Pay',
            },
            {
                costDirectionId: _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Receivable,
                costDirection: 'Receive',
            },
        ];
    };
    GoodsCostTotalComponent.prototype.formatAmount = function (input) {
        var formattedInput = new Intl.NumberFormat(this.formatType, { minimumFractionDigits: this.minDecimalOptionValue, maximumFractionDigits: this.decimalOption }).format(input);
        return formattedInput.toLocaleString();
    };
    GoodsCostTotalComponent.prototype.setValuesForTotalWithoutTax = function (model) {
        this.amount = (model.totalInvoiceValue);
        this.decimalOption = model.decimalOption;
        this.currencyCode = model.currency;
        if (model.costDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable) {
            this.costDirectionDisplay = this.credit;
        }
        else if (model.costDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Receivable) {
            this.costDirectionDisplay = this.debit;
        }
        this.costDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_4__["CostSigns"][model.costDirection];
        // if (this.amount) {
        this.setTotalForGoodCost();
        // }
    };
    GoodsCostTotalComponent.prototype.setTotalForGoodCost = function () {
        if (this.costDirectionDisplay) {
            if (this.costDirectionDisplay === this.credit) {
                this.total = Number(this.taxTotal) + Number(this.amount);
                this.totalCostDirection = this.credit;
            }
            else {
                this.total = Number(this.amount) - Number(this.taxTotal);
                this.totalCostDirection = this.debit;
            }
            this.invoiceLabel = this.total < 0 ? _shared_enums_invoice_payment_type__WEBPACK_IMPORTED_MODULE_5__["InvoicePaymentType"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__["CostDirectionType"].Cr] : _shared_enums_invoice_payment_type__WEBPACK_IMPORTED_MODULE_5__["InvoicePaymentType"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__["CostDirectionType"].Dr];
            //  this.totalCostDirectionSign = CostSigns[CostDirectionType[this.costDirectionDisplay]];
        }
        else {
            this.total = this.taxTotal;
            this.totalCostDirection = this.credit;
            this.totalCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_4__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable];
            this.invoiceLabel = _shared_enums_invoice_payment_type__WEBPACK_IMPORTED_MODULE_5__["InvoicePaymentType"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable];
        }
    };
    GoodsCostTotalComponent.prototype.setValuesForTotalTax = function (model) {
        this.taxTotal = (model.amount);
        this.decimalOption = model.decimalOption;
        this.currencyCode = model.currencyCode;
        this.total = Number(this.taxTotal) + Number(this.amount);
        if (this.taxTotal) {
            this.setTotalForGoodCost();
        }
    };
    GoodsCostTotalComponent.prototype.getCostDirectionIdFromCode = function (code) {
        if (code) {
            var selectedCostDirection = this.costDirections.find(function (e) { return e.costDirection === code; });
            return selectedCostDirection.costDirectionId;
        }
    };
    GoodsCostTotalComponent.prototype.populateEntity = function (entity) {
        var selectedInvoiceCosts = entity;
        selectedInvoiceCosts.totalInvoiceValue = this.total;
        return selectedInvoiceCosts;
    };
    GoodsCostTotalComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-goods-cost-total',
            template: __webpack_require__(/*! ./goods-cost-total.component.html */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-total/goods-cost-total.component.html"),
            styles: [__webpack_require__(/*! ./goods-cost-total.component.scss */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-total/goods-cost-total.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__["FormConfigurationProviderService"]])
    ], GoodsCostTotalComponent);
    return GoodsCostTotalComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_1__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-value-of-goods/goods-cost-value-of-goods.component.html":
/*!******************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-value-of-goods/goods-cost-value-of-goods.component.html ***!
  \******************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"space-between center\"\r\n             class=\"table-title\">\r\n            <mat-card-title class=\"no-margin\">Value Of Goods</mat-card-title>\r\n            <span class=\"fill-space\"></span>\r\n            <atlas-ag-grid-user-preferences *ngIf=\"valueOfGoodsGridOptions && valueOfGoodsGridOptions.columnDefs\"\r\n                                            [gridOptions]=\"valueOfGoodsGridOptions\"\r\n                                            [company]=\"company\"\r\n                                            [sharingEnabled]=\"hasGridSharing\"\r\n                                            [gridId]=\"componentId\"\r\n                                            #userPreferences>\r\n            </atlas-ag-grid-user-preferences>\r\n        </div>\r\n        <div ag-grid=\"valueOfGoodsGridOptions\"\r\n             class=\"ag-theme-material pointer-cursor\">\r\n            <ag-grid-angular class=\"ag-theme-material\"\r\n                             [rowData]=\"valueOfGoodsGridRows\"\r\n                             [columnDefs]=\"valueOfGoodsGridColumns\"\r\n                             domLayout=\"autoHeight\"\r\n                             (gridReady)=\"onGridReady($event)\"\r\n                             [pagination]=\"false\"\r\n                             [paginationPageSize]=\"10\"\r\n                             [enableSorting]=\"true\"\r\n                             [enableColResize]=\"true\"\r\n                             [animateRows]=\"true\"\r\n                             [groupUseEntireRow]=\"false\"\r\n                             [rowGroupPanelShow]=\"rowGroupPanelShow\"\r\n                             [suppressDragLeaveHidesColumns]=\"true\"\r\n                             [suppressMakeColumnVisibleAfterUnGroup]=\"true\"\r\n                             (columnVisible)=\"onColumnVisibilityChanged($event)\"\r\n                             enableFilter\r\n                             [suppressAggFuncInHeader]=\"true\"\r\n                             [rowHeight]=atlasAgGridParam.rowHeight>\r\n            </ag-grid-angular>\r\n        </div>\r\n        <div fxLayout=\"column\"\r\n             fxLayoutAlign=\"end\"\r\n             class=\"value-goods-total-figure\">\r\n            <div fxFlex=\"30\">\r\n                <mat-card-subtitle class=\"total-figure\">Total Invoiced Quantity : <span\r\n                          class=\"total-figure-value\">{{formatQuantityAndTotal(totalQuantity)}}\r\n                        {{weightCode}}</span></mat-card-subtitle>\r\n            </div>\r\n            <div fxFlex=\"30\">\r\n                <mat-card-subtitle class=\"total-figure\">Sub Total : <span\r\n                          class=\"total-figure-value\">{{debitCreditSign}}{{formatQuantityAndTotal(this.total)}}\r\n                        {{currencyCode}}</span>\r\n                </mat-card-subtitle>\r\n            </div>\r\n            <div fxFlex=\"30\">\r\n                <mat-card-subtitle class=\"total-figure\">Total : <span\r\n                          class=\"total-figure-value\">{{debitCreditSign}}{{formatQuantityAndTotal(this.total)}}\r\n                        {{currencyCode}}</span> </mat-card-subtitle>\r\n            </div>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-value-of-goods/goods-cost-value-of-goods.component.scss":
/*!******************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-value-of-goods/goods-cost-value-of-goods.component.scss ***!
  \******************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".value-goods-total-figure {\n  margin-top: 22px;\n  text-align: right; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-value-of-goods/goods-cost-value-of-goods.component.ts":
/*!****************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-value-of-goods/goods-cost-value-of-goods.component.ts ***!
  \****************************************************************************************************************************************************************************/
/*! exports provided: GoodsCostValueOfGoodsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoodsCostValueOfGoodsComponent", function() { return GoodsCostValueOfGoodsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component */ "./Client/app/shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_invoice_line_record_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/entities/invoice-line-record.entity */ "./Client/app/shared/entities/invoice-line-record.entity.ts");
/* harmony import */ var _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/enums/contract-type.enum */ "./Client/app/shared/enums/contract-type.enum.ts");
/* harmony import */ var _shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-direction-type.enum */ "./Client/app/shared/enums/cost-direction-type.enum.ts");
/* harmony import */ var _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-sign.enum */ "./Client/app/shared/enums/cost-sign.enum.ts");
/* harmony import */ var _shared_enums_discount_basis_enum__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/enums/discount-basis.enum */ "./Client/app/shared/enums/discount-basis.enum.ts");
/* harmony import */ var _shared_enums_discount_type_enum__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../../../shared/enums/discount-type.enum */ "./Client/app/shared/enums/discount-type.enum.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_enums_pricing_options_enum__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../../../shared/enums/pricing-options.enum */ "./Client/app/shared/enums/pricing-options.enum.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_execution_dtos_contracts_to_invoice__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../../../shared/services/execution/dtos/contracts-to-invoice */ "./Client/app/shared/services/execution/dtos/contracts-to-invoice.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../../../shared/services/grid-configuration-provider.service */ "./Client/app/shared/services/grid-configuration-provider.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


















var GoodsCostValueOfGoodsComponent = /** @class */ (function (_super) {
    __extends(GoodsCostValueOfGoodsComponent, _super);
    function GoodsCostValueOfGoodsComponent(formConfigurationProvider, route, uiService, gridConfigurationProvider, gridService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.route = route;
        _this.uiService = uiService;
        _this.gridConfigurationProvider = gridConfigurationProvider;
        _this.gridService = gridService;
        _this.totalAmountCalculated = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.valueOfGoodsGridOptions = {};
        _this.isGroupingEnabled = false;
        _this.totalQuantity = 0;
        _this.total = 0;
        _this.weightCode = '';
        _this.currencyCode = '';
        _this.pricingOptionValue = 0;
        _this.decimalOptionValue = 2;
        _this.weightedAverage = 0;
        _this.debitCredit = '';
        _this.componentId = 'valueOfGoodsGrid';
        _this.hasGridSharing = false;
        _this.formatType = 'en-US';
        _this.atlasAgGridParam = _this.gridService.getAgGridParam();
        return _this;
    }
    GoodsCostValueOfGoodsComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.invoiceType = Number(decodeURIComponent(this.route.snapshot.paramMap.get('invoiceTypeId')));
        this.route.paramMap
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["map"])(function (params) { return params.get('company'); }))
            .subscribe(function (company) {
            _this.company = company;
        });
        this.gridConfigurationProvider.getConfiguration(this.company, this.componentId)
            .subscribe(function (configuration) {
            _this.initializeGridColumns();
            // -- used later if this will become L&S maybe
            // this.columnConfiguration = configuration.columns;
            // this.configurationLoaded.emit();
            // this.initColumns(this.columnConfiguration);
            _this.hasGridSharing = configuration.hasMultipleViewsPerUser;
        });
    };
    GoodsCostValueOfGoodsComponent.prototype.onGridReady = function (params) {
        params.columnDefs = this.valueOfGoodsGridColumns;
        this.valueOfGoodsGridOptions = params;
        this.gridColumnApi = params.columnApi;
        this.gridColumnApi.autoSizeAllColumns();
    };
    // to be removed once testing done for grid autosize
    GoodsCostValueOfGoodsComponent.prototype.autoSizeGridHeader = function () {
        var allColumnIds = [];
        if (this.valueOfGoodsGridColumns) {
            this.valueOfGoodsGridColumns.forEach(function (columnDefs) {
                allColumnIds.push(columnDefs.field);
            });
            this.gridColumnApi.autoSizeColumns(allColumnIds);
        }
    };
    GoodsCostValueOfGoodsComponent.prototype.onGridSizeChanged = function (params) {
        this.gridColumnApi.autoSizeAllColumns();
    };
    GoodsCostValueOfGoodsComponent.prototype.initializeGridColumns = function () {
        var _this = this;
        this.valueOfGoodsGridColumns = [
            {
                headerName: 'Contract Commodity',
                field: 'commodity',
                colId: 'commodity',
                hide: false,
                rowGroup: this.isGroupingEnabled,
                enableRowGroup: this.isGroupingEnabled,
            },
            {
                headerName: 'Price',
                field: 'price',
                colId: 'price',
                type: 'numericColumn',
                hide: false,
                valueFormatter: function (params) { return (_this.decimalFormatter((!params.node.group ? params.data.price : params.value), _this.decimalOptionValue, _this.formatType)); },
                rowGroup: this.isGroupingEnabled,
                enableRowGroup: this.isGroupingEnabled,
                aggFunc: 'sum',
                enableValue: true,
            },
            {
                headerName: 'Contract Reference',
                field: 'contractReference',
                colId: 'contractReference',
                hide: false,
            },
            {
                headerName: 'Premium/Discount',
                field: 'premiumDiscountValue',
                colId: 'premiumDiscountValue',
                valueFormatter: this.formatPremiumDiscount,
                hide: false,
            },
            {
                headerName: 'Quantity To Invoice',
                field: 'quantityToInvoice',
                colId: 'quantityToInvoice',
                type: 'numericColumn',
                hide: false,
                aggFunc: 'sum',
                enableValue: true,
                valueFormatter: function (params) { return (_this.decimalFormatter((!params.node.group ? params.data.quantityToInvoice : params.value), _this.decimalOptionValue, _this.formatType)); },
            },
            {
                headerName: 'Quantity Code',
                field: 'quantityCode',
                colId: 'quantityCode',
                hide: true,
            },
            {
                headerName: 'Currency Code',
                field: 'currencyCode',
                colId: 'currencyCode',
                hide: true,
            },
            {
                headerName: 'Invoice Value',
                field: 'totalInvoiceValue',
                colId: 'totalInvoiceValue',
                type: 'numericColumn',
                hide: false,
                valueFormatter: function (params) { return (_this.decimalFormatter((!params.node.group ? params.data.totalInvoiceValue : params.value), _this.decimalOptionValue, _this.formatType)); },
                aggFunc: 'sum',
                enableValue: true,
                valueGetter: this.getInvoiceValue.bind(this),
            },
            {
                headerName: 'Contract Quantity',
                field: 'contractQuantity',
                colId: 'contractQuantity',
                type: 'numericColumn',
                hide: false,
                valueFormatter: function (params) { return (_this.decimalFormatter((!params.node.group ? params.data.contractQuantity : params.value), _this.decimalOptionValue, _this.formatType)); },
            },
            {
                headerName: 'Price Code',
                field: 'priceCode',
                colId: 'priceCode',
                hide: false,
            },
        ];
        this.rowGroupPanelShow = this.isGroupingEnabled ? 'always' : '';
    };
    GoodsCostValueOfGoodsComponent.prototype.getInvoiceValue = function (params) {
        if (params.data.premiumDiscountType === _shared_enums_discount_type_enum__WEBPACK_IMPORTED_MODULE_10__["DiscountTypes"].Premium) {
            params.data.totalInvoiceValue = this.SetInvoiceValueForPremium(params.data);
        }
        else if (params.data.premiumDiscountType === _shared_enums_discount_type_enum__WEBPACK_IMPORTED_MODULE_10__["DiscountTypes"].Discount) {
            params.data.totalInvoiceValue = this.setInvoiceValueForDiscount(params.data);
        }
        this.calculateTotalAndTotalQuantity();
        return params.data.totalInvoiceValue;
    };
    GoodsCostValueOfGoodsComponent.prototype.setInvoiceValueForDiscount = function (params) {
        if (params) {
            if (params.premiumDiscountBasis === _shared_enums_discount_basis_enum__WEBPACK_IMPORTED_MODULE_9__["DiscountBasis"].Rate) {
                return params.quantityToInvoice *
                    (params.price - params.premiumDiscountValue) *
                    params.priceConversionFactor * params.weightConversionFactor;
            }
            else if (params.premiumDiscountBasis === _shared_enums_discount_basis_enum__WEBPACK_IMPORTED_MODULE_9__["DiscountBasis"].Percent) {
                return params.quantityToInvoice *
                    (params.price * (1 - (params.premiumDiscountValue / 100))) *
                    params.priceConversionFactor * params.weightConversionFactor;
            }
            else {
                return params.quantityToInvoice * params.price *
                    params.priceConversionFactor * params.weightConversionFactor;
            }
        }
    };
    GoodsCostValueOfGoodsComponent.prototype.SetInvoiceValueForPremium = function (params) {
        if (params) {
            if (params.premiumDiscountBasis === _shared_enums_discount_basis_enum__WEBPACK_IMPORTED_MODULE_9__["DiscountBasis"].Rate) {
                return params.quantityToInvoice *
                    (params.price + params.premiumDiscountValue) *
                    params.priceConversionFactor * params.weightConversionFactor;
            }
            else if (params.premiumDiscountBasis === _shared_enums_discount_basis_enum__WEBPACK_IMPORTED_MODULE_9__["DiscountBasis"].Percent) {
                return params.quantityToInvoice *
                    (params.price * (1 + (params.premiumDiscountValue / 100))) *
                    params.priceConversionFactor * params.weightConversionFactor;
            }
            else {
                return params.quantityToInvoice * params.price *
                    params.priceConversionFactor * params.weightConversionFactor;
            }
        }
    };
    GoodsCostValueOfGoodsComponent.prototype.decimalFormatter = function (input, decimaloption, format) {
        var formattedInput = new Intl.NumberFormat(format, { minimumFractionDigits: decimaloption }).format(input);
        return formattedInput.toLocaleString();
    };
    GoodsCostValueOfGoodsComponent.prototype.calculateWeightedAverage = function () {
        var _this = this;
        // calculating the weighted average of each selected contract
        this.contractsForWeightedAverage.forEach(function (contract) {
            _this.weightedAverage += contract.price * contract.quantityToInvoice;
        });
        // Assigning the calculated weighted average to the price of each selected contract
        this.contractsForWeightedAverage.forEach(function (contract) {
            contract.price = _this.weightedAverage / _this.totalQuantity;
        });
        this.initializeGridColumns();
        this.valueOfGoodsGridRows = this.contractsForWeightedAverage;
    };
    GoodsCostValueOfGoodsComponent.prototype.formatQuantityAndTotal = function (input) {
        var formattedInput = new Intl.NumberFormat(this.formatType, { minimumFractionDigits: this.decimalOptionValue }).format(input);
        return formattedInput.toLocaleString();
    };
    GoodsCostValueOfGoodsComponent.prototype.contractToBeSelected = function (contracts) {
        if (contracts.length > 0) {
            this.calculateTotalQuantity(contracts);
            this.isGroupingEnabled = false;
            if (this.pricingOptionValue === _shared_enums_pricing_options_enum__WEBPACK_IMPORTED_MODULE_12__["PricingOptions"].OutrightAverage) {
                // creating copy of selected contracts, so the calculations are not impacting the original price
                this.contractsForWeightedAverage = contracts.map(function (x) { return (__assign({}, x)); });
                this.calculateWeightedAverage();
            }
            else {
                this.isGroupingEnabled = (this.pricingOptionValue === _shared_enums_pricing_options_enum__WEBPACK_IMPORTED_MODULE_12__["PricingOptions"].GroupbycommodityPrice);
                this.initializeGridColumns();
                this.valueOfGoodsGridRows = contracts;
            }
        }
    };
    GoodsCostValueOfGoodsComponent.prototype.calculateTotalQuantity = function (contracts) {
        var _this = this;
        this.totalQuantity = 0;
        contracts.forEach(function (contract) {
            _this.totalQuantity = _this.totalQuantity + contract.quantityToInvoice;
        });
    };
    GoodsCostValueOfGoodsComponent.prototype.calculateTotalAndTotalQuantity = function () {
        var _this = this;
        this.total = 0;
        this.valueOfGoodsGridOptions.api.forEachNode(function (rowNode) {
            if (rowNode.data.totalInvoiceValue) {
                _this.total += rowNode.data.totalInvoiceValue;
            }
        });
        if (this.valueOfGoodsGridRows.length > 0) {
            this.weightCode = this.valueOfGoodsGridRows[0].quantityCode;
            this.currencyCode = this.valueOfGoodsGridRows[0].currencyCode;
        }
        this.debitCredit = (this.invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_11__["InvoiceTypes"].GoodsCostPurchase ||
            this.originalInvoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_11__["InvoiceTypes"].GoodsCostPurchase) ? 'Cr' : 'Dr';
        this.debitCreditSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_8__["CostSigns"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_7__["CostDirectionType"][this.debitCredit]];
        this.totalAmountCalculated.emit({
            amount: this.total,
            decimalOption: this.decimalOptionValue,
            currencyCode: this.currencyCode,
            creditDebit: this.debitCredit,
            originalInvoiceType: this.originalInvoiceType,
        });
    };
    GoodsCostValueOfGoodsComponent.prototype.pricingAndDecimalOptionSelected = function (pricingOption, decimalOption) {
        this.pricingOptionValue = pricingOption;
        this.decimalOptionValue = decimalOption;
    };
    GoodsCostValueOfGoodsComponent.prototype.populateEntity = function (entity) {
        var valueOfGoods = entity;
        valueOfGoods.currency = this.currencyCode;
        valueOfGoods.totalGoodsValue = this.totalQuantity;
        if (valueOfGoods.invoiceLines && valueOfGoods.invoiceLines.length > 0) {
            var invoiceLines = this.getInvoiceLines(valueOfGoods.invoiceLines.length);
            invoiceLines.forEach(function (line) {
                valueOfGoods.invoiceLines.push(line);
            });
        }
        else {
            valueOfGoods.invoiceLines = this.getInvoiceLines(0);
        }
        return valueOfGoods;
    };
    GoodsCostValueOfGoodsComponent.prototype.onColumnVisibilityChanged = function (col) {
        this.userPreferencesComponent.onChangeColumnVisibility(col);
        this.gridColumnApi.autoSizeAllColumns();
    };
    GoodsCostValueOfGoodsComponent.prototype.getInvoiceLines = function (index) {
        if (index === void 0) { index = 0; }
        var invoiceLines = [];
        this.valueOfGoodsGridRows.map(function (data) {
            var invoiceLine = new _shared_entities_invoice_line_record_entity__WEBPACK_IMPORTED_MODULE_5__["InvoiceLineRecord"]();
            invoiceLine.lineNumber = index + 1;
            invoiceLine.sectionID = data.sectionId;
            invoiceLine.price = data.price;
            invoiceLine.quantity = data.quantityToInvoice.toString();
            invoiceLine.priceUnitId = data.priceUnitId;
            invoiceLine.weightUnitId = data.quantityUnitId;
            invoiceLine.currencyCode = data.currencyCode;
            invoiceLine.lineAmount = data.totalInvoiceValue;
            invoiceLine.invoicePercent = (data.quantityToInvoice / data.contractQuantity) * 100;
            invoiceLine.contractType = _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_6__["ContractTypes"][data.contractTypeCode];
            invoiceLines.push(invoiceLine);
            index++;
        });
        return invoiceLines;
    };
    GoodsCostValueOfGoodsComponent.prototype.formatPremiumDiscount = function (params) {
        if (params.data.premiumDiscountType === _shared_enums_discount_type_enum__WEBPACK_IMPORTED_MODULE_10__["DiscountTypes"].Premium) {
            return '+' + params.data.premiumDiscountValue;
        }
        else if (params.data.premiumDiscountType === _shared_enums_discount_type_enum__WEBPACK_IMPORTED_MODULE_10__["DiscountTypes"].Discount) {
            return '-' + params.data.premiumDiscountValue;
        }
        else {
            return params.data.premiumDiscountValue;
        }
    };
    GoodsCostValueOfGoodsComponent.prototype.contractToBeSelectedFromGrid = function (summaryRecord) {
        if (summaryRecord.summaryLines) {
            var valueOfGoodsGridRows = summaryRecord.summaryLines.filter(function (filteredSummaryLine) { return filteredSummaryLine.costId == null; });
            this.invoiceType = summaryRecord.invoiceType;
            this.currencyCode = summaryRecord.currency;
            this.valueOfGoodsGridRows = this.getContractsForSummary(valueOfGoodsGridRows, summaryRecord.currency);
            this.initializeGridColumnsFromSummary();
            if (this.valueOfGoodsGridRows.length > 0) {
                this.calculateTotalForSummary(summaryRecord);
            }
        }
    };
    GoodsCostValueOfGoodsComponent.prototype.calculateTotalForSummary = function (summaryRecord) {
        var _this = this;
        var invoiceRecord = summaryRecord;
        this.totalQuantity = 0;
        this.total = 0;
        var totalCR = 0;
        var totalDR = 0;
        this.originalInvoiceType = summaryRecord.originalInvoiceType;
        invoiceRecord.summaryLines.filter(function (filteredSummaryLine) { return filteredSummaryLine.costId == null; }).forEach(function (contract) {
            _this.currencyCode = invoiceRecord.currency;
            var totalValue = contract.lineAmount;
            _this.totalQuantity = _this.totalQuantity + Number(contract.quantity);
            if (_this.invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_11__["InvoiceTypes"].GoodsCostPurchase ||
                _this.originalInvoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_11__["InvoiceTypes"].GoodsCostPurchase) {
                totalCR = totalCR + totalValue;
            }
            else {
                totalDR = totalDR + totalValue;
            }
        });
        if (totalCR > totalDR) {
            this.total = totalCR - totalDR;
            this.debitCredit = 'Cr';
        }
        else {
            this.total = totalDR - totalCR;
            this.debitCredit = 'Dr';
        }
        this.debitCreditSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_8__["CostSigns"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_7__["CostDirectionType"][this.debitCredit]];
        this.totalAmountCalculated.emit({
            amount: this.total,
            decimalOption: this.decimalOptionValue,
            creditDebit: this.debitCredit,
            currencyCode: this.currencyCode,
            originalInvoiceType: this.originalInvoiceType,
        });
    };
    GoodsCostValueOfGoodsComponent.prototype.initializeGridColumnsFromSummary = function () {
        this.valueOfGoodsGridColumns = [
            {
                headerName: 'Contract Commodity',
                field: 'commodity',
                colId: 'commodity',
                hide: false,
                rowGroup: this.isGroupingEnabled,
                enableRowGroup: this.isGroupingEnabled,
            },
            {
                headerName: 'Price',
                field: 'price',
                colId: 'price',
                hide: false,
                valueFormatter: this.decimalFormatterForSummary.bind(this),
                aggFunc: 'sum',
                enableValue: true,
            },
            {
                headerName: 'Contract Reference',
                field: 'contractReference',
                colId: 'contractReference',
                hide: false,
            },
            {
                headerName: 'Invoiced Quantity',
                field: 'invoicedQuantity',
                colId: 'invoicedQuantity',
                hide: false,
                aggFunc: 'sum',
                enableValue: true,
                valueFormatter: this.decimalFormatterForSummary.bind(this),
            },
            {
                headerName: 'Quantity Code',
                field: 'quantityCode',
                colId: 'quantityCode',
                hide: false,
            },
            {
                headerName: 'Currency Code',
                field: 'currencyCode',
                colId: 'currencyCode',
                hide: false,
            },
            {
                headerName: 'Invoice Value',
                field: 'totalInvoiceValue',
                colId: 'totalInvoiceValue',
                hide: false,
                valueFormatter: this.decimalFormatterForSummary.bind(this),
            },
        ];
    };
    GoodsCostValueOfGoodsComponent.prototype.decimalFormatterForSummary = function (params) {
        var formattedInput = new Intl.NumberFormat(this.formatType, {
            minimumFractionDigits: this.decimalOptionValue,
        }).format(params.value);
        return formattedInput.toLocaleString();
    };
    GoodsCostValueOfGoodsComponent.prototype.getContractsForSummary = function (summaryLines, currencyCode) {
        var contracts = [];
        summaryLines.map(function (record) {
            if (record.sectionId) {
                var contract = new _shared_services_execution_dtos_contracts_to_invoice__WEBPACK_IMPORTED_MODULE_14__["ContractsToInvoice"]();
                contract.commodity = record.principalCommodity;
                contract.price = record.price;
                contract.contractReference = record.contractReference;
                contract.quantityToInvoice = record.quantity;
                contract.quantityCode = record.weightCode;
                contract.currencyCode = currencyCode;
                contract.totalInvoiceValue = record.lineAmount;
                contract.invoicedQuantity = record.quantity;
                //  contract.priceCode = record.priceCode;
                contracts.push(contract);
            }
        });
        return contracts;
    };
    GoodsCostValueOfGoodsComponent.prototype.getInvoiceValueForSummary = function (params) {
        return params.data.invoicedQuantity;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('userPreferences'),
        __metadata("design:type", _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_3__["AgGridUserPreferencesComponent"])
    ], GoodsCostValueOfGoodsComponent.prototype, "userPreferencesComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], GoodsCostValueOfGoodsComponent.prototype, "totalAmountCalculated", void 0);
    GoodsCostValueOfGoodsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-goods-cost-value-of-goods',
            template: __webpack_require__(/*! ./goods-cost-value-of-goods.component.html */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-value-of-goods/goods-cost-value-of-goods.component.html"),
            styles: [__webpack_require__(/*! ./goods-cost-value-of-goods.component.scss */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-value-of-goods/goods-cost-value-of-goods.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_15__["FormConfigurationProviderService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_17__["UiService"],
            _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_16__["GridConfigurationProviderService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_13__["AgGridService"]])
    ], GoodsCostValueOfGoodsComponent);
    return GoodsCostValueOfGoodsComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/goods-cost-working-page.component.html":
/*!***************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/goods-cost-working-page.component.html ***!
  \***************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div fxLayout=\"column\">\r\n    <div fxLayout=\"row\"\r\n         fxLayoutGap=\"16px\">\r\n        <atlas-goods-cost-details #detailsComponent\r\n                                  fxFlex=\"60%\"\r\n                                  (invoiceDateSelected)=\"onInvoiceDateSelected($event)\">\r\n\r\n        </atlas-goods-cost-details>\r\n        <atlas-document-template #documentComponent\r\n                                 (templateSelected)=\"onDocumentTemplateSelected($event)\"\r\n                                 fxFlex=\"40%\"\r\n                                 [documentType]=\"DocumentTypes.InvoiceGoodsCostInvoice\">\r\n        </atlas-document-template>\r\n    </div>\r\n    <atlas-goods-cost-value-of-goods #valueOfGoodsComponent\r\n                                     (totalAmountCalculated)=\"ontotalAmountCalculated($event)\">\r\n    </atlas-goods-cost-value-of-goods>\r\n    <atlas-goods-cost-additional-cost #additionalCostComponent\r\n                                      [selectedGoodsVat]=\"selectedGoodsVatCode\"\r\n                                      [valueOfGoodsCurrency]=\"valueOfGoodsCurrency\"\r\n                                      (totalCostAndVatCode)=\"onChangeCostContract($event)\"\r\n                                      (narrativeLength)=\"onNarrativeValueChange($event)\">\r\n    </atlas-goods-cost-additional-cost>\r\n\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"none stretch\"\r\n         fxLayoutGap=\"16px\">\r\n        <atlas-goods-cost-tax-goods #taxGoodsComponent\r\n                                    (selectedGoodsTaxCode)=\"onChangeGoodsTaxCode($event)\"\r\n                                    fxFlex=\"50%\"></atlas-goods-cost-tax-goods>\r\n        <atlas-goods-cost-payments #paymentsComponent\r\n                                   fxFlex=\"50%\"></atlas-goods-cost-payments>\r\n    </div>\r\n    <atlas-goods-cost-tax-cost #taxCostComponent\r\n                               (totalCostTaxCalculated)=\"onTotalCostTaxCalculated($event)\"\r\n                               fxFlex=\"50%\"></atlas-goods-cost-tax-cost>\r\n    <atlas-goods-cost-total class=\"goods-cost-total\"\r\n                            #totalComponent></atlas-goods-cost-total>\r\n</div>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/goods-cost-working-page.component.scss":
/*!***************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/goods-cost-working-page.component.scss ***!
  \***************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".goods-cost-total {\n  width: 100%; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/goods-cost-working-page.component.ts":
/*!*************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/goods-cost-working-page.component.ts ***!
  \*************************************************************************************************************************************/
/*! exports provided: GoodsCostWorkingPageComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoodsCostWorkingPageComponent", function() { return GoodsCostWorkingPageComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/enums/cost-direction-type.enum */ "./Client/app/shared/enums/cost-direction-type.enum.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/enums/document-type.enum */ "./Client/app/shared/enums/document-type.enum.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_services_execution_dtos_invoice_record__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../shared/services/execution/dtos/invoice-record */ "./Client/app/shared/services/execution/dtos/invoice-record.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _components_document_template_document_template_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../components/document-template/document-template.component */ "./Client/app/execution/execution-invoicing/components/document-template/document-template.component.ts");
/* harmony import */ var _components_goods_cost_additional_cost_goods_cost_additional_cost_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./components/goods-cost-additional-cost/goods-cost-additional-cost.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-additional-cost/goods-cost-additional-cost.component.ts");
/* harmony import */ var _components_goods_cost_details_goods_cost_details_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./components/goods-cost-details/goods-cost-details.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-details/goods-cost-details.component.ts");
/* harmony import */ var _components_goods_cost_payments_goods_cost_payments_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./components/goods-cost-payments/goods-cost-payments.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-payments/goods-cost-payments.component.ts");
/* harmony import */ var _components_goods_cost_tax_cost_goods_cost_tax_cost_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./components/goods-cost-tax-cost/goods-cost-tax-cost.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-cost/goods-cost-tax-cost.component.ts");
/* harmony import */ var _components_goods_cost_tax_goods_goods_cost_tax_goods_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./components/goods-cost-tax-goods/goods-cost-tax-goods.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-goods/goods-cost-tax-goods.component.ts");
/* harmony import */ var _components_goods_cost_total_goods_cost_total_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./components/goods-cost-total/goods-cost-total.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-total/goods-cost-total.component.ts");
/* harmony import */ var _components_goods_cost_value_of_goods_goods_cost_value_of_goods_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./components/goods-cost-value-of-goods/goods-cost-value-of-goods.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-value-of-goods/goods-cost-value-of-goods.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




















var GoodsCostWorkingPageComponent = /** @class */ (function (_super) {
    __extends(GoodsCostWorkingPageComponent, _super);
    function GoodsCostWorkingPageComponent(route, executionService, formBuilder, formConfigurationProvider, cdr) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.executionService = executionService;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.cdr = cdr;
        _this.formComponents = [];
        _this.valueOfGoodsRecord = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.totalCostAndVatCode = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.totalCostTaxCalculated = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.documentTemplateSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.narrativeLength = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.masterdata = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_4__["MasterData"]();
        _this.totalRecordForGoodCost = new _shared_services_execution_dtos_invoice_record__WEBPACK_IMPORTED_MODULE_9__["InvoiceRecord"]();
        _this.valueOfGoodsTotal = 0;
        _this.valueOfGoodsDecimalOption = 2;
        _this.additionalCostRate = 0;
        _this.isSave = false;
        _this.DocumentTypes = _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_7__["DocumentTypes"];
        _this.InvoiceTypes = _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_8__["InvoiceTypes"];
        return _this;
    }
    GoodsCostWorkingPageComponent.prototype.ngOnInit = function () {
        this.invoiceWorkingFormGroup = this.formBuilder.group({
            detailsComponent: this.detailsComponent.getFormGroup(),
            documentComponent: this.documentComponent.getFormGroup(),
            valueOfGoodsComponent: this.valueOfGoodsComponent.getFormGroup(),
            additionalCostComponent: this.additionalCostComponent.getFormGroup(),
            taxGoodsComponent: this.taxGoodsComponent.getFormGroup(),
            taxCostComponent: this.taxCostComponent.getFormGroup(),
            paymentsComponent: this.paymentsComponent.getFormGroup(),
            totalComponent: this.totalComponent.getFormGroup(),
        });
        this.formComponents.push(this.detailsComponent, this.documentComponent, this.valueOfGoodsComponent, this.additionalCostComponent, this.taxGoodsComponent, this.taxCostComponent, this.paymentsComponent, this.totalComponent);
        this.invoiceTypeId = Number(decodeURIComponent(this.route.snapshot.paramMap.get('invoiceTypeId')));
        this.masterdata = this.route.snapshot.data.masterdata;
    };
    GoodsCostWorkingPageComponent.prototype.calculateTaxTotal = function (model) {
        this.totalComponent.setValuesForTotalTax(model);
    };
    GoodsCostWorkingPageComponent.prototype.calculateTotalWithoutTax = function () {
        this.totalRecordForGoodCost.totalInvoiceValue = this.additionalCostRate + this.valueOfGoodsTotal;
        this.totalRecordForGoodCost.decimalOption = this.valueOfGoodsDecimalOption;
        this.totalRecordForGoodCost.currency = this.valueOfGoodsCurrency;
        if (this.additionalCostCostDirection) {
            if (this.valueOfGoodsCostDirection === this.additionalCostCostDirection) {
                this.totalRecordForGoodCost.costDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_6__["CostDirections"][this.additionalCostCostDirection];
            }
            else {
                if (Math.abs(this.additionalCostRate) > Math.abs(this.valueOfGoodsTotal)) {
                    this.totalRecordForGoodCost.costDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_6__["CostDirections"][this.additionalCostCostDirection];
                }
                else {
                    this.totalRecordForGoodCost.costDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_6__["CostDirections"][this.valueOfGoodsCostDirection];
                }
            }
        }
        else {
            this.totalRecordForGoodCost.costDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_6__["CostDirections"][this.valueOfGoodsCostDirection];
        }
        this.totalComponent.setValuesForTotalWithoutTax(this.totalRecordForGoodCost);
    };
    GoodsCostWorkingPageComponent.prototype.ontotalAmountCalculated = function (model) {
        this.valueOfGoodsTotal = model.amount;
        this.valueOfGoodsDecimalOption = model.decimalOption;
        this.valueOfGoodsCurrency = model.currencyCode;
        this.cdr.detectChanges();
        this.valueOfGoodsRecord.emit(model);
        if (this.invoiceTypeId === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_8__["InvoiceTypes"].GoodsCostPurchase) {
            this.valueOfGoodsTotal = -(this.valueOfGoodsTotal);
            this.valueOfGoodsCostDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_6__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_6__["CostDirections"].Payable];
        }
        else {
            this.valueOfGoodsCostDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_6__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_6__["CostDirections"].Receivable];
        }
        this.calculateTotalWithoutTax();
    };
    GoodsCostWorkingPageComponent.prototype.onTotalCostTaxCalculated = function (model) {
        this.totalData = model;
        this.calculateTaxTotal(model);
        this.totalCostTaxCalculated.emit(model);
    };
    GoodsCostWorkingPageComponent.prototype.onChangeGoodsTaxCode = function (vatCode) {
        this.selectedGoodsVatCode = vatCode;
    };
    GoodsCostWorkingPageComponent.prototype.onChangeCostContract = function (model) {
        if (model) {
            this.additionalCostRate = model.rate;
            this.additionalCostCostDirection = model.costDirection;
            if (this.additionalCostCostDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_6__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_6__["CostDirections"].Payable]) {
                this.additionalCostRate = -(this.additionalCostRate);
            }
            this.taxCostComponent.getTaxesForSelectedVat(model);
            this.totalCostAndVatCode.emit(model);
            this.calculateTotalWithoutTax();
        }
    };
    GoodsCostWorkingPageComponent.prototype.onDocumentTemplateSelected = function (event) {
        this.documentTemplateSelected.emit(event);
    };
    GoodsCostWorkingPageComponent.prototype.onInvoiceDateSelected = function (invoiceDate) {
        this.paymentsComponent.setinvoiceDateSelected(invoiceDate);
    };
    GoodsCostWorkingPageComponent.prototype.setInvoiceSetupByCompany = function (data) {
        this.taxCostComponent.setDefaultVatCode(data.defaultVATCode);
        this.taxGoodsComponent.setDefaultVatCode(data.defaultVATCode);
        this.additionalCostComponent.setDefaultVatCode(data.defaultVATCode);
        this.detailsComponent.setDefaultAuthorizeForPosting(data.authorizedForPosting);
    };
    GoodsCostWorkingPageComponent.prototype.populateEntity = function (model) {
        this.formComponents.forEach(function (comp) {
            comp.populateEntity(model);
        });
        return model;
    };
    GoodsCostWorkingPageComponent.prototype.pricingAndDecimalOptionSelected = function (pricingOption, decimalOption) {
        this.valueOfGoodsComponent.pricingAndDecimalOptionSelected(pricingOption, decimalOption);
        this.additionalCostComponent.pricingAndDecimalOptionSelected(pricingOption, decimalOption);
    };
    GoodsCostWorkingPageComponent.prototype.onNarrativeValueChange = function (maxLength) {
        this.narrativeLength.emit(maxLength);
    };
    GoodsCostWorkingPageComponent.prototype.validateCostGrid = function () {
        // calling the costgrid component to set the required field validation
        return this.additionalCostComponent.validate();
    };
    GoodsCostWorkingPageComponent.prototype.getGoodsCostRecords = function () {
        var goodCostRecordForBankingOption = new _shared_services_execution_dtos_invoice_record__WEBPACK_IMPORTED_MODULE_9__["InvoiceRecord"]();
        goodCostRecordForBankingOption.currency = this.totalComponent.currencyCode;
        goodCostRecordForBankingOption.counterpartyCode = this.detailsComponent.counterpartyCtrl.value;
        (this.totalComponent.totalCostDirection === _shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_5__["CostDirectionType"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_5__["CostDirectionType"].Cr]) ?
            goodCostRecordForBankingOption.costDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_6__["CostDirections"].Payable :
            goodCostRecordForBankingOption.costDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_6__["CostDirections"].Receivable;
        return goodCostRecordForBankingOption;
    };
    GoodsCostWorkingPageComponent.prototype.unloadNotification = function ($event) {
        if (this.invoiceWorkingFormGroup.dirty) {
            $event.returnValue = true;
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('detailsComponent'),
        __metadata("design:type", _components_goods_cost_details_goods_cost_details_component__WEBPACK_IMPORTED_MODULE_14__["GoodsCostDetailsComponent"])
    ], GoodsCostWorkingPageComponent.prototype, "detailsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('documentComponent'),
        __metadata("design:type", _components_document_template_document_template_component__WEBPACK_IMPORTED_MODULE_12__["DocumentTemplateComponent"])
    ], GoodsCostWorkingPageComponent.prototype, "documentComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('valueOfGoodsComponent'),
        __metadata("design:type", _components_goods_cost_value_of_goods_goods_cost_value_of_goods_component__WEBPACK_IMPORTED_MODULE_19__["GoodsCostValueOfGoodsComponent"])
    ], GoodsCostWorkingPageComponent.prototype, "valueOfGoodsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('additionalCostComponent'),
        __metadata("design:type", _components_goods_cost_additional_cost_goods_cost_additional_cost_component__WEBPACK_IMPORTED_MODULE_13__["GoodsCostAdditionalCostComponent"])
    ], GoodsCostWorkingPageComponent.prototype, "additionalCostComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('taxGoodsComponent'),
        __metadata("design:type", _components_goods_cost_tax_goods_goods_cost_tax_goods_component__WEBPACK_IMPORTED_MODULE_17__["GoodsCostTaxGoodsComponent"])
    ], GoodsCostWorkingPageComponent.prototype, "taxGoodsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('taxCostComponent'),
        __metadata("design:type", _components_goods_cost_tax_cost_goods_cost_tax_cost_component__WEBPACK_IMPORTED_MODULE_16__["GoodsCostTaxCostComponent"])
    ], GoodsCostWorkingPageComponent.prototype, "taxCostComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('paymentsComponent'),
        __metadata("design:type", _components_goods_cost_payments_goods_cost_payments_component__WEBPACK_IMPORTED_MODULE_15__["GoodsCostPaymentsComponent"])
    ], GoodsCostWorkingPageComponent.prototype, "paymentsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('totalComponent'),
        __metadata("design:type", _components_goods_cost_total_goods_cost_total_component__WEBPACK_IMPORTED_MODULE_18__["GoodsCostTotalComponent"])
    ], GoodsCostWorkingPageComponent.prototype, "totalComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], GoodsCostWorkingPageComponent.prototype, "valueOfGoodsRecord", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], GoodsCostWorkingPageComponent.prototype, "totalCostAndVatCode", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], GoodsCostWorkingPageComponent.prototype, "totalCostTaxCalculated", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], GoodsCostWorkingPageComponent.prototype, "documentTemplateSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], GoodsCostWorkingPageComponent.prototype, "narrativeLength", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"])('window:beforeunload', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], GoodsCostWorkingPageComponent.prototype, "unloadNotification", null);
    GoodsCostWorkingPageComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-goods-cost-working-page',
            template: __webpack_require__(/*! ./goods-cost-working-page.component.html */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/goods-cost-working-page.component.html"),
            styles: [__webpack_require__(/*! ./goods-cost-working-page.component.scss */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/goods-cost-working-page.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_11__["ExecutionService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_10__["FormConfigurationProviderService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"]])
    ], GoodsCostWorkingPageComponent);
    return GoodsCostWorkingPageComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/goods-cost.component.html":
/*!***************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/goods-cost.component.html ***!
  \***************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<form [formGroup]=\"goodsCostInvoiceFormGroup\">\r\n    <div class=\"main-container\">\r\n        <mat-horizontal-stepper [linear]\r\n                                (selectionChange)=\"onChangeStepAction($event)\"\r\n                                #stepper>\r\n            <ng-template matStepperIcon=\"edit\">\r\n                <mat-icon>check</mat-icon>\r\n            </ng-template>\r\n            <mat-step>\r\n                <ng-template matStepLabel>Contract Selection Screen</ng-template>\r\n                <atlas-goods-cost-selection #goodsCostSelectionComponent\r\n                                            (contractsSelected)=\"onContractsSelected($event)\"\r\n                                            (pricingAndDecimalOptionSelected)=\"onPricingAndDecimalOptionSelected($event)\">\r\n                </atlas-goods-cost-selection>\r\n                <div fxLayout=\"row \"\r\n                     fxLayoutAlign=\"space-between start\"\r\n                     class=\"button-details\">\r\n                    <div fxLayout=\"column \"\r\n                         fxLayoutAlign=\"start\">\r\n                        <button (click)=\"onDiscardButtonClicked()\"\r\n                                mat-button>\r\n                            DISCARD\r\n                        </button>\r\n                    </div>\r\n                    <div fxLayout=\"column \"\r\n                         fxLayoutAlign=\"start\">\r\n                        <button mat-raised-button\r\n                                (click)=\"onMoveButtonClicked(invoicingSteps.invoiceCostSelection)\">\r\n                            NEXT\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </mat-step>\r\n            <mat-step [completed]=\"isCompleted\">\r\n                <ng-template matStepLabel>Costs Selection Screen</ng-template>\r\n                <atlas-goods-cost-selection-cost #costSelectionComponent>\r\n                </atlas-goods-cost-selection-cost>\r\n                <div fxLayout=\"row \"\r\n                     fxLayoutAlign=\"space-between start\"\r\n                     class=\"button-details\">\r\n                    <div fxLayout=\"column \"\r\n                         fxLayoutAlign=\"start\">\r\n                        <button (click)=\"onBackButtonClicked(invoicingSteps.invoiceContractSelection)\"\r\n                                mat-button>\r\n                            BACK\r\n                        </button>\r\n                    </div>\r\n                    <div fxLayout=\"column \"\r\n                         fxLayoutAlign=\"start\">\r\n                        <button mat-raised-button\r\n                                (click)=\"onMoveButtonClicked(invoicingSteps.workingStep)\">\r\n                            NEXT\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </mat-step>\r\n            <mat-step [completed]=\"isCompleted\">\r\n                <ng-template matStepLabel>Invoice Working Page</ng-template>\r\n                <atlas-goods-cost-working-page #goodsCostWorkingPageComponent\r\n                                               (contractsSelected)=\"onContractsSelected($event)\"\r\n                                               (documentTemplateSelected)=\"onDocumentTemplateSelected($event)\"\r\n                                               (totalCostTaxCalculated)=\"ontotalAmountCalculated($event)\"\r\n                                               (totalCostAndVatCode)=\"onChangeCostContract($event)\"\r\n                                               (valueOfGoodsRecord)=\"onChangeValueOfGoods($event)\"\r\n                                               (narrativeLength)=\"onNarrativeValueChanged($event)\">\r\n                </atlas-goods-cost-working-page>\r\n                <div fxLayout=\"row\"\r\n                     fxLayoutAlign=\"end start\">\r\n                    <mat-slide-toggle *ngIf=\"hasTemplate\"\r\n                                      [formControl]=\"previewDocumentCtrl\">Preview Document </mat-slide-toggle>\r\n                </div>\r\n                <div fxLayout=\"row \"\r\n                     fxLayoutAlign=\"space-between start\"\r\n                     class=\"button-details\">\r\n                    <button (click)=\"onDiscardButtonClicked()\"\r\n                            [disabled]=\"isLoading\"\r\n                            mat-button>\r\n                        DISCARD\r\n                    </button>\r\n                    <div fxLayout=\"column \"\r\n                         fxLayoutAlign=\"start end \">\r\n                        <div fxLayout=\"row \"\r\n                             fxLayoutAlign=\"end start \">\r\n                            <button mat-button\r\n                                    (click)=\"onBackButtonClicked(invoicingSteps.invoiceCostSelection)\"\r\n                                    [disabled]=\"isLoading\">\r\n                                BACK\r\n                            </button>\r\n                            <div\r\n                                 *ifAuthorized=\"'Invoices.InvoiceCreation', company:company, level: PermissionLevels.ReadWrite\">\r\n                                <button mat-raised-button\r\n                                        (click)=\"onOpenDialogOnPreviewOrSaveClicked()\"\r\n                                        [disabled]=\"isLoading\">\r\n                                    {{ previewDocumentCtrl.value ? \"Preview and Invoice\" : \"Create Invoice\" }}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </mat-step>\r\n            <mat-step>\r\n                <ng-template matStepLabel>Invoice Summary Page</ng-template>\r\n                <atlas-goods-cost-summary #goodsCostSummaryComponent\r\n                                          [invoiceTaxContracts]=\"taxRecords\"\r\n                                          [invoiceTaxTotal]=\"totalData\"\r\n                                          [invoiceCostContracts]=\"invoiceCostContracts\"\r\n                                          [invoiceGoodsContracts]=\"invoiceGoodsContracts\"\r\n                                          [goodsTaxCode]=\"goodsTaxCode\"\r\n                                          [filteredCompanyBankAccounts]=\"filteredCompanyBankAccounts\"\r\n                                          [isCreationMode]=isCreationMode>\r\n                </atlas-goods-cost-summary>\r\n                <div class=\"btn-container\"\r\n                     *ngIf=\"!isFromGrid\">\r\n                    <div fxLayout=\"row\"\r\n                         fxAlignLayout=\"start end\">\r\n                        <span class=\"fill-space\"></span>\r\n                        <button mat-button\r\n                                (click)=\"newSearchButtonClicked()\">\r\n                            New Search\r\n                        </button>\r\n                        <button mat-raised-button\r\n                                (click)=\"nextInvoiceButtonClicked(stepper)\">\r\n                            Next Invoice\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </mat-step>\r\n        </mat-horizontal-stepper>\r\n    </div>\r\n</form>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/goods-cost.component.scss":
/*!***************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/goods-cost.component.scss ***!
  \***************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".mat-stepper-horizontal {\n  background-color: transparent; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/goods-cost/goods-cost.component.ts":
/*!*************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/goods-cost/goods-cost.component.ts ***!
  \*************************************************************************************/
/*! exports provided: GoodsCostComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoodsCostComponent", function() { return GoodsCostComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../shared/entities/window-injection-token */ "./Client/app/shared/entities/window-injection-token.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/enums/permission-level.enum */ "./Client/app/shared/enums/permission-level.enum.ts");
/* harmony import */ var _shared_services_document_popup_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../shared/services/document-popup.service */ "./Client/app/shared/services/document-popup.service.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../shared/services/http-services/document.service */ "./Client/app/shared/services/http-services/document.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_http_services_preaccounting_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../shared/services/http-services/preaccounting.service */ "./Client/app/shared/services/http-services/preaccounting.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _dialog_boxes_bank_account_dialog_bank_account_dialog_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../dialog-boxes/bank-account-dialog/bank-account-dialog.component */ "./Client/app/execution/execution-invoicing/dialog-boxes/bank-account-dialog/bank-account-dialog.component.ts");
/* harmony import */ var _invoicing_base_form_invoicing_base_form_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../invoicing-base-form/invoicing-base-form.component */ "./Client/app/execution/execution-invoicing/invoicing-base-form/invoicing-base-form.component.ts");
/* harmony import */ var _components_goods_cost_selection_cost_goods_cost_selection_cost_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./components/goods-cost-selection-cost/goods-cost-selection-cost.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection-cost/goods-cost-selection-cost.component.ts");
/* harmony import */ var _components_goods_cost_selection_goods_cost_selection_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./components/goods-cost-selection/goods-cost-selection.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/goods-cost-selection.component.ts");
/* harmony import */ var _components_goods_cost_summary_goods_cost_summary_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./components/goods-cost-summary/goods-cost-summary.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-summary/goods-cost-summary.component.ts");
/* harmony import */ var _components_goods_cost_working_page_goods_cost_working_page_component__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./components/goods-cost-working-page/goods-cost-working-page.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/goods-cost-working-page.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
























var GoodsCostComponent = /** @class */ (function (_super) {
    __extends(GoodsCostComponent, _super);
    function GoodsCostComponent(dialog, router, companyManager, snackbarService, documentService, window, utilService, executionService, masterdataService, route, formBuilder, preaccountingService, formConfigurationProvider, documentPopupService) {
        var _this = _super.call(this, dialog, router, companyManager, snackbarService, documentService, window, utilService, executionService, route, formBuilder, preaccountingService, formConfigurationProvider, documentPopupService) || this;
        _this.dialog = dialog;
        _this.router = router;
        _this.companyManager = companyManager;
        _this.snackbarService = snackbarService;
        _this.documentService = documentService;
        _this.window = window;
        _this.utilService = utilService;
        _this.executionService = executionService;
        _this.masterdataService = masterdataService;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.preaccountingService = preaccountingService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.documentPopupService = documentPopupService;
        _this.filteredCompanyBankAccounts = [];
        _this.InvoiceTypes = _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_8__["InvoiceTypes"];
        _this.isFromGrid = false;
        _this.invoicingSteps = {
            invoiceContractSelection: 0,
            invoiceCostSelection: 1,
            workingStep: 2,
            summaryStep: 3,
        };
        _this.isValid = false;
        _this.previewDocumentCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__["AtlasFormControl"]('previewDocumentCtrl');
        _this.isCreateInvoiceButtonClicked = false;
        _this.PermissionLevels = _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_9__["PermissionLevels"];
        _this.isCreationMode = true;
        _this.isCompleted = false;
        _this.invoiceTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('invoiceTypeId')));
        _this.company = _this.companyManager.getCurrentCompanyId();
        return _this;
    }
    GoodsCostComponent.prototype.ngOnInit = function () {
        this.goodsCostInvoiceFormGroup = this.formBuilder.group({
            goodsCostSelectionComponent: this.goodsCostSelectionComponent.getFormGroup(),
            costSelectionComponent: this.costSelectionComponent.getFormGroup(),
            goodsCostWorkingPageComponent: this.goodsCostWorkingPageComponent.getFormGroup(),
        });
        this.formComponents.push(this.goodsCostSelectionComponent, this.costSelectionComponent, this.goodsCostWorkingPageComponent);
        this.getInvoiceSetupByCompany();
        this.masterData = this.route.snapshot.data.masterdata;
    };
    GoodsCostComponent.prototype.unloadNotification = function ($event) {
        if (this.goodsCostInvoiceFormGroup.dirty) {
            $event.returnValue = true;
        }
    };
    GoodsCostComponent.prototype.onMoveButtonClicked = function (selectedStepperIndex) {
        var isFormValid = false;
        if (this.goodsCostSelectionComponent.goodsCostPricingOptionsComponent.formGroup.valid) {
            if (this.isValid) {
                (selectedStepperIndex === this.invoicingSteps.invoiceCostSelection) ? this.goodsContractsSelected() :
                    this.costContractsSelected();
                this.isCompleted = true;
                this.stepper.selectedIndex = selectedStepperIndex;
            }
            isFormValid = true;
        }
        if (!this.isValid) {
            this.snackbarService.throwErrorSnackBar('Please select a contract to proceed.');
        }
        if (!isFormValid) {
            this.snackbarService.informationSnackBar('Form is invalid. Please resolve the errors..');
        }
    };
    GoodsCostComponent.prototype.onContractsSelected = function (contractsSelected) {
        this.isValid = contractsSelected;
    };
    GoodsCostComponent.prototype.onChangeValueOfGoods = function (model) {
        this.valueOfGoodsData = model;
    };
    GoodsCostComponent.prototype.ontotalAmountCalculated = function (model) {
        this.totalData = model;
    };
    GoodsCostComponent.prototype.onChangeCostContract = function (model) {
        this.invoiceCostContracts = model;
    };
    GoodsCostComponent.prototype.goodsContractsSelected = function () {
        var contracts = this.goodsCostSelectionComponent.
            goodsCostContractSearchComponent.selectedContractsToInvoice;
        if (contracts) {
            var sectionIds = contracts.map(function (contract) { return contract.sectionId; });
            this.costSelectionComponent.goodsCostContractsCostComponent.getContractsToInvoice(sectionIds, contracts);
            this.goodsCostWorkingPageComponent.valueOfGoodsComponent.contractToBeSelected(contracts);
            this.goodsCostWorkingPageComponent.detailsComponent.contractToBeSelected(contracts);
            if (!this.isCreateInvoiceButtonClicked) {
                this.goodsCostWorkingPageComponent.paymentsComponent.contractToBeSelected(contracts);
            }
        }
    };
    GoodsCostComponent.prototype.costContractsSelected = function () {
        var costsForSelectedContracts = this.costSelectionComponent.
            goodsCostContractsCostComponent.selectedCostContracts;
        if (costsForSelectedContracts) {
            this.goodsCostWorkingPageComponent.additionalCostComponent.contractToBeSelected(costsForSelectedContracts);
        }
    };
    GoodsCostComponent.prototype.getTaxRecordsForSelectedCost = function () {
        this.taxRecords = this.goodsCostWorkingPageComponent.taxCostComponent.taxesGridRows;
        this.totalData = this.goodsCostWorkingPageComponent.totalData;
        this.goodsTaxCode = this.goodsCostWorkingPageComponent.selectedGoodsVatCode;
    };
    GoodsCostComponent.prototype.costAndTaxRowsSelected = function () {
        this.invoiceCostContracts = this.goodsCostWorkingPageComponent.additionalCostComponent
            .getAllInvoiceCostLines();
        this.invoiceGoodsContracts = this.goodsCostWorkingPageComponent.valueOfGoodsComponent
            .valueOfGoodsGridRows;
        this.getTaxRecordsForSelectedCost();
    };
    GoodsCostComponent.prototype.onPricingAndDecimalOptionSelected = function (model) {
        if (this.goodsCostWorkingPageComponent) {
            this.goodsCostWorkingPageComponent.pricingAndDecimalOptionSelected(model.pricingSelected, model.decimalOptionSelected);
        }
    };
    GoodsCostComponent.prototype.beforeInvoiceActions = function (invoiceRecord) {
        this.updateInvoiceLines(invoiceRecord);
    };
    GoodsCostComponent.prototype.afterInvoiceActions = function (invoiceRecord) {
        (this.selectedbankAccountId) ? invoiceRecord.bankAccountId = this.selectedbankAccountId : null;
        this.goodsCostSummaryComponent.populateInvoiceRecord(invoiceRecord);
        this.stepper.next();
    };
    GoodsCostComponent.prototype.updateInvoiceLines = function (invoiceRecord) {
        var _this = this;
        invoiceRecord.invoiceLines.forEach(function (invoiceLine) {
            if (!invoiceLine.vatCode) {
                invoiceLine.vatCode = (invoiceLine.costID) ?
                    _this.goodsCostWorkingPageComponent.additionalCostComponent.costVatCodeCtrl.value :
                    _this.goodsCostWorkingPageComponent.taxGoodsComponent.invoiceGoodsVatCodeCtrl.value;
            }
        });
    };
    GoodsCostComponent.prototype.onNarrativeValueChanged = function (maxLength) {
        this.isCostNarrativeMaxLength = maxLength;
    };
    GoodsCostComponent.prototype.onOpenDialogOnPreviewOrSaveClicked = function () {
        this.isLoading = true;
        if (this.goodsCostWorkingPageComponent.invoiceWorkingFormGroup.valid) {
            if (this.isCostNarrativeMaxLength) {
                this.snackbarService.informationSnackBar('Narrative length should be less than 30');
                return;
            }
            if (!this.goodsCostWorkingPageComponent.additionalCostComponent.validate()) {
                this.snackbarService.informationSnackBar('Additional cost is invalid');
                return;
            }
            this.checkForPayableorReceivable();
        }
        else {
            this.snackbarService.informationSnackBar('Form is invalid. Please resolve the errors...');
            this.isLoading = false;
        }
        this.costAndTaxRowsSelected();
    };
    GoodsCostComponent.prototype.checkForPayableorReceivable = function () {
        var _this = this;
        this.goodsCostSelectedValues = this.goodsCostWorkingPageComponent.getGoodsCostRecords();
        if (this.goodsCostSelectedValues) {
            this.selectedSupplier = this.masterData.counterparties.find(function (counterParty) { return counterParty.description === _this.goodsCostSelectedValues.counterpartyCode; });
            (this.goodsCostSelectedValues.costDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_7__["CostDirections"].Payable) ?
                this.showConfirmationModal(this.hasTemplate && this.previewDocumentCtrl.value) :
                this.getCompanyBankAccounts();
        }
    };
    GoodsCostComponent.prototype.nextInvoiceButtonClicked = function () {
        var searchContractRef = '';
        var searchCounterParty = '';
        var searchCharterRef = '';
        searchContractRef = this.goodsCostSelectionComponent.
            goodsCostContractSearchComponent.searchTerm;
        searchCounterParty = this.goodsCostSelectionComponent.
            goodsCostContractSearchComponent.searchCounterPartyTerm;
        searchCharterRef = this.goodsCostSelectionComponent.
            goodsCostContractSearchComponent.searchCharterTerm;
        this.router.navigate(['/' + this.companyManager.getCurrentCompanyId() +
                '/execution/invoicing/' + encodeURIComponent(this.invoiceTypeId.toString())], {
            queryParams: {
                savedContractReference: searchContractRef, savedCounterParty: searchCounterParty,
                savedCharterReference: searchCharterRef,
            },
            skipLocationChange: true,
        });
    };
    GoodsCostComponent.prototype.getInvoiceSetupByCompany = function () {
        var _this = this;
        this.subscriptions.push(this.executionService.getInvoiceSetupByCompany()
            .subscribe(function (data) {
            _this.costSelectionComponent.goodsCostContractsCostComponent.setTolerancePercentage(data.tolerancePercentage);
            _this.goodsCostWorkingPageComponent.setInvoiceSetupByCompany(data);
        }));
    };
    GoodsCostComponent.prototype.getCompanyBankAccounts = function () {
        var _this = this;
        if (this.selectedSupplier && this.goodsCostSelectedValues.currency) {
            this.masterdataService.getCompanyBankAccounts(this.goodsCostSelectedValues.currency)
                .subscribe(function (data) {
                if (data.value.length > 0) {
                    _this.filteredCompanyBankAccounts = data.value;
                }
                _this.showAvailableBankingOptionDialog();
            }, function (error) {
                console.error(error);
                _this.snackbarService.throwErrorSnackBar('Oops! An error ocurred');
            });
        }
    };
    GoodsCostComponent.prototype.showAvailableBankingOptionDialog = function () {
        var _this = this;
        if (this.filteredCompanyBankAccounts) {
            var availableBankingoptionDialog = this.dialog.open(_dialog_boxes_bank_account_dialog_bank_account_dialog_component__WEBPACK_IMPORTED_MODULE_18__["BankAccountDialogComponent"], {
                data: {
                    title: 'Bank Account',
                    okButton: 'Confirm',
                    value: this.filteredCompanyBankAccounts,
                },
            });
            availableBankingoptionDialog.afterClosed().subscribe(function (answer) {
                if (!answer) {
                    _this.isLoading = false;
                }
                else if (answer.isClose) {
                    _this.selectedbankAccountId = answer.selectedValue;
                    _this.showConfirmationModal(_this.hasTemplate && _this.previewDocumentCtrl.value);
                }
            });
        }
    };
    GoodsCostComponent.prototype.onBackButtonClicked = function (index) {
        this.isCompleted = false;
        this.stepper.selectedIndex = index;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('goodsCostSelectionComponent'),
        __metadata("design:type", _components_goods_cost_selection_goods_cost_selection_component__WEBPACK_IMPORTED_MODULE_21__["GoodsCostSelectionComponent"])
    ], GoodsCostComponent.prototype, "goodsCostSelectionComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('costSelectionComponent'),
        __metadata("design:type", _components_goods_cost_selection_cost_goods_cost_selection_cost_component__WEBPACK_IMPORTED_MODULE_20__["GoodsCostSelectionCostComponent"])
    ], GoodsCostComponent.prototype, "costSelectionComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('goodsCostWorkingPageComponent'),
        __metadata("design:type", _components_goods_cost_working_page_goods_cost_working_page_component__WEBPACK_IMPORTED_MODULE_23__["GoodsCostWorkingPageComponent"])
    ], GoodsCostComponent.prototype, "goodsCostWorkingPageComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('goodsCostSummaryComponent'),
        __metadata("design:type", _components_goods_cost_summary_goods_cost_summary_component__WEBPACK_IMPORTED_MODULE_22__["GoodsCostSummaryComponent"])
    ], GoodsCostComponent.prototype, "goodsCostSummaryComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('stepper'),
        __metadata("design:type", _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatStepper"])
    ], GoodsCostComponent.prototype, "stepper", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"])('window:beforeunload', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], GoodsCostComponent.prototype, "unloadNotification", null);
    GoodsCostComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-goods-cost',
            template: __webpack_require__(/*! ./goods-cost.component.html */ "./Client/app/execution/execution-invoicing/goods-cost/goods-cost.component.html"),
            styles: [__webpack_require__(/*! ./goods-cost.component.scss */ "./Client/app/execution/execution-invoicing/goods-cost/goods-cost.component.scss")],
        }),
        __param(5, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_6__["WINDOW"])),
        __metadata("design:paramtypes", [_angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__["CompanyManagerService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_16__["SnackbarService"],
            _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_12__["DocumentService"],
            Window,
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_17__["UtilService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_13__["ExecutionService"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_14__["MasterdataService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_preaccounting_service__WEBPACK_IMPORTED_MODULE_15__["PreaccountingService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_11__["FormConfigurationProviderService"],
            _shared_services_document_popup_service__WEBPACK_IMPORTED_MODULE_10__["DocumentPopupService"]])
    ], GoodsCostComponent);
    return GoodsCostComponent;
}(_invoicing_base_form_invoicing_base_form_component__WEBPACK_IMPORTED_MODULE_19__["InvoicingBaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/header/header.component.html":
/*!*******************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/header/header.component.html ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<ng-template #headerContent>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"start end\"\r\n         fxLayoutGap=\"1%\">\r\n        <h2 class=\"summary-header-title\"\r\n            *ngIf=\"this.invoiceTypeId!= this.reversalInvoiceTypeId\">Invoice Reference Number:\r\n            {{invoiceLabel}}</h2>\r\n        <h2 class=\"summary-header-title\"\r\n            *ngIf=\"this.newInvoiceReference && this.invoiceTypeId=== this.reversalInvoiceTypeId\">{{newInvoiceReference}}\r\n        </h2>\r\n        <h2 class=\"summary-header-title\"\r\n            *ngIf=\"this.invoiceTypeId=== this.reversalInvoiceTypeId\">Reversal Of : {{invoiceLabel}}</h2>\r\n        <mat-chip-list class=\"chip-list\">\r\n            <mat-chip selected\r\n                      disabled>{{invoiceType}}</mat-chip>\r\n            <mat-chip selected\r\n                      disabled>{{externalHouse}}</mat-chip>\r\n            <mat-chip selected\r\n                      disabled>{{quantityToInvoice}}</mat-chip>\r\n        </mat-chip-list>\r\n    </div>\r\n    <div class=\"summary-details\"\r\n         fxLayout=\"row\">\r\n        <div fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\"\r\n             fxFlex=\"70%\">\r\n            <div fxLayout=\"row\">\r\n\r\n                <mat-form-field fxFlex=\"25%\">\r\n                    <input matInput\r\n                           [matDatepicker]=\"invoiceDatePicker\"\r\n                           placeholder=\"Invoice date\"\r\n                           [matTooltip]=\"'Invoice date'\"\r\n                           [formControl]='invoiceDateCtrl'\r\n                           autocomplete=\"off\">\r\n                    <mat-datepicker-toggle matSuffix\r\n                                           [for]=\"invoiceDatePicker\"></mat-datepicker-toggle>\r\n                    <mat-datepicker #invoiceDatePicker></mat-datepicker>\r\n                </mat-form-field>\r\n                <mat-form-field class=\"mat-read-only-field\"\r\n                                fxFlex=\"25%\">\r\n                    <input matInput\r\n                           placeholder=\"Counterparty\"\r\n                           [matTooltip]=\"'Counterparty'\"\r\n                           [formControl]=\"counterpartyCtrl\"\r\n                           autocomplete=\"off\">\r\n                </mat-form-field>\r\n                <mat-form-field fxFlex=\"25%\"\r\n                                [hidden]=\"!invoiceExtRefCtrl.value\">\r\n                    <input matInput\r\n                           placeholder=\"External Invoice Reference\"\r\n                           [formControl]=\"invoiceExtRefCtrl\"\r\n                           autocomplete=\"off\">\r\n                </mat-form-field>\r\n                <mat-form-field class=\"mat-read-only-field\"\r\n                                fxFlex=\"25%\"\r\n                                [hidden]=\"!bankingInformationCtrl.value\">\r\n                    <input matInput\r\n                           placeholder=\"Banking Information\"\r\n                           [formControl]=\"bankingInformationCtrl\"\r\n                           autocomplete=\"off\">\r\n                </mat-form-field>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n\r\n\r\n<mat-card *ngIf=\"isCreationMode\"\r\n          class=\"card-header-luke\">\r\n    <ng-container *ngTemplateOutlet=\"headerContent\"></ng-container>\r\n</mat-card>\r\n\r\n<header *ngIf=\"!isCreationMode\"\r\n        class=\"header-background mat-elevation-z2\">\r\n    <div class=\"header-content displayMode\">\r\n        <ng-container *ngTemplateOutlet=\"headerContent\"></ng-container>\r\n    </div>\r\n</header>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/header/header.component.scss":
/*!*******************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/header/header.component.scss ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".summary-header-title {\n  display: inline-block;\n  margin-bottom: 0; }\n\n.summary-details {\n  margin-top: 20px; }\n\n.invoice-date-warning {\n  background-color: #ec8d2d; }\n\nheader {\n  margin-bottom: 14px; }\n\n.header-background {\n  min-height: 114px; }\n\n.header-content {\n  padding: 16px 30px 0px; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/header/header.component.ts":
/*!*****************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/header/header.component.ts ***!
  \*****************************************************************************/
/*! exports provided: HeaderComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HeaderComponent", function() { return HeaderComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../shared/enums/invoice-source-type.enum */ "./Client/app/shared/enums/invoice-source-type.enum.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_enums_quantity_to_invoice_enum__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/enums/quantity-to-invoice.enum */ "./Client/app/shared/enums/quantity-to-invoice.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var HeaderComponent = /** @class */ (function (_super) {
    __extends(HeaderComponent, _super);
    function HeaderComponent(formBuilder, route, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.route = route;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.invoiceDateCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('invoiceDateCtrl');
        _this.counterpartyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('counterpartyCtrl');
        _this.invoiceExtRefCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('invoiceExtRefCtrl');
        _this.invoiceTypeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('invoiceTypeCtrl');
        _this.bankingInformationCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('bankingInformationCtrl');
        _this.masterdata = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__["MasterData"]();
        _this.newInvoiceReference = '';
        return _this;
    }
    HeaderComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.masterdata = this.route.snapshot.data.masterdata;
        this.bankingInformationCtrl.disable();
        this.reversalInvoiceTypeId = _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceTypes"].Reversal;
        this.invoiceTypeId = Number(decodeURIComponent(this.route.snapshot.paramMap.get('invoiceTypeId')));
        var invoiceId = Number(decodeURIComponent(this.route.snapshot.paramMap.get('invoiceId')));
        if (invoiceId) {
            this.route.queryParams.subscribe(function (params) {
                _this.invoiceTypeId = Number(params['invoiceType']);
            });
        }
    };
    HeaderComponent.prototype.populateInvoiceRecord = function (record) {
        this.model = record;
        this.externalHouse = _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceTypes"][String(this.model.externalInhouse)];
        this.invoiceLabel = this.model.invoiceLabel;
    };
    HeaderComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            invoiceDateCtrl: this.invoiceDateCtrl,
            counterpartyCtrl: this.counterpartyCtrl,
            invoiceExtRefCtrl: this.invoiceExtRefCtrl,
            invoiceTypeCtrl: this.invoiceTypeCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    HeaderComponent.prototype.setHeaderFieldsForSummary = function (model, bankAccounts) {
        if (model) {
            this.invoiceDateCtrl.patchValue(model.invoiceDate);
            this.counterpartyCtrl.patchValue(model.counterpartyCode);
            this.invoiceExtRefCtrl.patchValue(model.externalInvoiceRef);
            this.invoiceLabel = model.invoiceLabel;
            if (model.reversedInvoiceReference) {
                this.newInvoiceReference = model.reversedInvoiceReference;
            }
            this.externalHouse = _shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_6__["InvoiceSourceType"][model.externalInhouse];
            this.quantityToInvoice = _shared_enums_quantity_to_invoice_enum__WEBPACK_IMPORTED_MODULE_8__["QuantityToInvoiceType"][model.quantityToInvoiceType];
            if (this.masterdata) {
                var invoiceType = this.masterdata.
                    invoiceTypes.find(function (invoice) { return invoice.invoiceTypeId === Number(model.invoiceType); });
                if (invoiceType) {
                    this.setInvoiceTypeForSummary(invoiceType, model);
                }
            }
            if (bankAccounts && model.bankAccountId) {
                var filteredBankAccounts = bankAccounts.filter(function (account) {
                    return account.bankAccountId === model.bankAccountId;
                });
                (filteredBankAccounts.length > 0) ? this.bankingInformationCtrl.patchValue(filteredBankAccounts[0].bankName) :
                    null;
            }
            else if (model.bankAccountId) {
                this.bankingInformationCtrl.patchValue(model.bankAccountId);
            }
        }
    };
    HeaderComponent.prototype.setHeaderFieldsFromGrid = function (summaryRecord) {
        if (this.masterdata) {
            var invoiceType = this.masterdata.
                invoiceTypes.find(function (invoice) { return invoice.invoiceTypeId === summaryRecord.invoiceType; });
            if (invoiceType) {
                this.setInvoiceTypeForSummary(invoiceType, summaryRecord);
            }
        }
        this.invoiceDateCtrl.patchValue(summaryRecord.invoiceDate);
        this.counterpartyCtrl.patchValue(summaryRecord.counterparty);
        this.invoiceExtRefCtrl.patchValue(summaryRecord.externalInvoiceReference);
        this.bankingInformationCtrl.patchValue(summaryRecord.clientAccount);
        if (summaryRecord.reversedInvoiceReference) {
            this.newInvoiceReference = summaryRecord.reversedInvoiceReference;
        }
        this.invoiceLabel = summaryRecord.invoiceCode;
        this.externalHouse = _shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_6__["InvoiceSourceType"][summaryRecord.externalInhouse];
        this.quantityToInvoice = _shared_enums_quantity_to_invoice_enum__WEBPACK_IMPORTED_MODULE_8__["QuantityToInvoiceType"][summaryRecord.quantityToInvoiceType];
    };
    HeaderComponent.prototype.setInvoiceTypeForSummary = function (invoiceType, summaryRecord) {
        this.invoiceType = (invoiceType.invoiceTypeId === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceTypes"].GoodsCostPurchase ||
            invoiceType.invoiceTypeId === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceTypes"].GoodsCostSales ||
            invoiceType.invoiceTypeId === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceTypes"].Washout) ? invoiceType.name : _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceTypes"][Number(summaryRecord.invoiceType)];
        if (summaryRecord.invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceTypes"].Cost ||
            summaryRecord.invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceTypes"].CostReceivable ||
            summaryRecord.invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceTypes"].CostCreditNote ||
            summaryRecord.invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceTypes"].CostDebitNote) {
            this.invoiceType = _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceTypes"][Number(_shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceTypes"].Cost)];
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Boolean)
    ], HeaderComponent.prototype, "isCreationMode", void 0);
    HeaderComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-execution-invoicing-summary-header',
            template: __webpack_require__(/*! ./header.component.html */ "./Client/app/execution/execution-invoicing/header/header.component.html"),
            styles: [__webpack_require__(/*! ./header.component.scss */ "./Client/app/execution/execution-invoicing/header/header.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_9__["FormConfigurationProviderService"]])
    ], HeaderComponent);
    return HeaderComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/invoicing-base-form/document-template-base/document-template-base.component.html":
/*!***********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/invoicing-base-form/document-template-base/document-template-base.component.html ***!
  \***********************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/invoicing-base-form/document-template-base/document-template-base.component.scss":
/*!***********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/invoicing-base-form/document-template-base/document-template-base.component.scss ***!
  \***********************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/invoicing-base-form/document-template-base/document-template-base.component.ts":
/*!*********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/invoicing-base-form/document-template-base/document-template-base.component.ts ***!
  \*********************************************************************************************************************************/
/*! exports provided: DocumentTemplateBaseComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DocumentTemplateBaseComponent", function() { return DocumentTemplateBaseComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _shared_document_template_event_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../shared/document-template-event.entity */ "./Client/app/shared/document-template-event.entity.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../shared/enums/document-type.enum */ "./Client/app/shared/enums/document-type.enum.ts");
/* harmony import */ var _shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../shared/enums/invoice-source-type.enum */ "./Client/app/shared/enums/invoice-source-type.enum.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var DocumentTemplateBaseComponent = /** @class */ (function (_super) {
    __extends(DocumentTemplateBaseComponent, _super);
    function DocumentTemplateBaseComponent(executionService, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.executionService = executionService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.templateSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.isUnique = true;
        _this.invoiceTemplatesCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_3__["AtlasFormControl"]('invoiceCreationTemplate');
        _this.invoiceExtRefCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_3__["AtlasFormControl"]('invoiceExternalReference');
        _this.invoiceExtInHouseCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_3__["AtlasFormControl"]('invoiceExtInHouseInfo');
        _this.filteredTemplates = [];
        _this.InvoiceTypes = _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_6__["InvoiceTypes"];
        _this.DocumentTypes = _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_4__["DocumentTypes"];
        return _this;
    }
    DocumentTemplateBaseComponent.prototype.checkUnicityOfExternalRef = function (val) {
        var _this = this;
        if (val) {
            this.executionService.checkExternalInvoiceReferenceExists(val)
                .subscribe(function (isNotUnique) {
                _this.isUnique = !isNotUnique;
            });
        }
        else {
            this.isUnique = true;
        }
    };
    DocumentTemplateBaseComponent.prototype.getInvoiceSourceTypeEnum = function () {
        var myEnum = [];
        var objectEnum = Object.keys(_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceSourceType"]);
        var values = objectEnum.slice(0, objectEnum.length / 2);
        var keys = objectEnum.slice(objectEnum.length / 2);
        for (var i = 0; i < objectEnum.length / 2; i++) {
            myEnum.push({ viewValue: keys[i], value: values[i] });
        }
        return myEnum;
    };
    DocumentTemplateBaseComponent.prototype.setValidators = function () {
        var _this = this;
        this.invoiceExtRefCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].maxLength(25)]));
        this.invoiceExtRefCtrl.valueChanges.subscribe(function (val) {
            _this.checkUnicityOfExternalRef(val);
        });
    };
    DocumentTemplateBaseComponent.prototype.onExternalInHouseSelected = function () {
        if (this.invoiceExtInHouseCtrl.value === _shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceSourceType"][_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceSourceType"].External]) {
            this.invoiceExtRefCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]));
            this.invoiceTemplatesCtrl.clearValidators();
            if (this.filteredTemplates.length === 1) {
                this.invoiceTemplatesCtrl.reset();
            }
        }
        else if (this.invoiceExtInHouseCtrl.value === _shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceSourceType"][_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceSourceType"].Inhouse]) {
            this.invoiceTemplatesCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]));
            this.invoiceExtRefCtrl.clearValidators();
            this.setValidators();
            if (this.filteredTemplates.length === 1) {
                this.invoiceTemplatesCtrl.patchValue(this.filteredTemplates[0]);
            }
        }
        this.invoiceExtRefCtrl.updateValueAndValidity();
        this.invoiceTemplatesCtrl.updateValueAndValidity();
        this.formGroup.updateValueAndValidity();
        this.onInvoiceTemplateSelected();
    };
    DocumentTemplateBaseComponent.prototype.onInvoiceTemplateSelected = function () {
        this.templateSelected.emit(this.invoiceTemplatesCtrl.value ?
            new _shared_document_template_event_entity__WEBPACK_IMPORTED_MODULE_2__["DocumentTemplateSelectedEvent"](true, this.invoiceTemplatesCtrl.value) :
            new _shared_document_template_event_entity__WEBPACK_IMPORTED_MODULE_2__["DocumentTemplateSelectedEvent"](false));
    };
    DocumentTemplateBaseComponent.prototype.onChanges = function () {
        var _this = this;
        this.invoiceExtInHouseCtrl.valueChanges.subscribe(function (val) {
            _this.onExternalInHouseSelected();
        });
    };
    DocumentTemplateBaseComponent.prototype.updateInhouseExternalStatus = function (invoiceType) {
        if (invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_6__["InvoiceTypes"].Sales
            || invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_6__["InvoiceTypes"].GoodsCostSales
            || invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_6__["InvoiceTypes"].Washout) {
            this.invoiceExtInHouseCtrl.patchValue(_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceSourceType"][_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceSourceType"].Inhouse]);
        }
        else if (invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_6__["InvoiceTypes"].Purchase
            || invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_6__["InvoiceTypes"].GoodsCostPurchase) {
            this.invoiceExtInHouseCtrl.patchValue(_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceSourceType"][_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceSourceType"].External]);
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], DocumentTemplateBaseComponent.prototype, "templateSelected", void 0);
    DocumentTemplateBaseComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-document-template-base',
            template: __webpack_require__(/*! ./document-template-base.component.html */ "./Client/app/execution/execution-invoicing/invoicing-base-form/document-template-base/document-template-base.component.html"),
            styles: [__webpack_require__(/*! ./document-template-base.component.scss */ "./Client/app/execution/execution-invoicing/invoicing-base-form/document-template-base/document-template-base.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_9__["ExecutionService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationProviderService"]])
    ], DocumentTemplateBaseComponent);
    return DocumentTemplateBaseComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_7__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/invoicing-base-form/invoicing-base-form.component.html":
/*!*********************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/invoicing-base-form/invoicing-base-form.component.html ***!
  \*********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/invoicing-base-form/invoicing-base-form.component.scss":
/*!*********************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/invoicing-base-form/invoicing-base-form.component.scss ***!
  \*********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/invoicing-base-form/invoicing-base-form.component.ts":
/*!*******************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/invoicing-base-form/invoicing-base-form.component.ts ***!
  \*******************************************************************************************************/
/*! exports provided: InvoicingBaseFormComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InvoicingBaseFormComponent", function() { return InvoicingBaseFormComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _shared_entities_document_popup_button_settings_entity__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/entities/document-popup-button-settings.entity */ "./Client/app/shared/entities/document-popup-button-settings.entity.ts");
/* harmony import */ var _shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../shared/entities/window-injection-token */ "./Client/app/shared/entities/window-injection-token.ts");
/* harmony import */ var _shared_enums_document_entity_type_enum__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../shared/enums/document-entity-type.enum */ "./Client/app/shared/enums/document-entity-type.enum.ts");
/* harmony import */ var _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../shared/enums/document-type.enum */ "./Client/app/shared/enums/document-type.enum.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_services_document_popup_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../shared/services/document-popup.service */ "./Client/app/shared/services/document-popup.service.ts");
/* harmony import */ var _shared_services_execution_dtos_invoice_record__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../shared/services/execution/dtos/invoice-record */ "./Client/app/shared/services/execution/dtos/invoice-record.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_preaccounting_service__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../shared/services/http-services/preaccounting.service */ "./Client/app/shared/services/http-services/preaccounting.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_enums_generate_document_action_enum__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./../../../shared/enums/generate-document-action.enum */ "./Client/app/shared/enums/generate-document-action.enum.ts");
/* harmony import */ var _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./../../../shared/services/http-services/document.service */ "./Client/app/shared/services/http-services/document.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
























var InvoicingBaseFormComponent = /** @class */ (function (_super) {
    __extends(InvoicingBaseFormComponent, _super);
    function InvoicingBaseFormComponent(dialog, router, companyManager, snackbarService, documentService, window, utilService, executionService, route, formBuilder, preaccountingService, formConfigurationProvider, documentPopupService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.dialog = dialog;
        _this.router = router;
        _this.companyManager = companyManager;
        _this.snackbarService = snackbarService;
        _this.documentService = documentService;
        _this.window = window;
        _this.utilService = utilService;
        _this.executionService = executionService;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.preaccountingService = preaccountingService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.documentPopupService = documentPopupService;
        _this.isCreateInvoiceButtonClicked = false;
        _this.formComponents = [];
        _this.currentStep = 0;
        _this.hasTemplate = false;
        _this.previewDocumentCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_20__["AtlasFormControl"]('previewDocumentCtrl');
        _this.isLoading = false;
        _this.mappingFields = new Array();
        return _this;
    }
    InvoicingBaseFormComponent.prototype.onDiscardButtonClicked = function () {
        var _this = this;
        var confirmDialog = this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_8__["ConfirmationDialogComponent"], {
            data: {
                title: 'Discard Changes',
                text: 'You have some modification pending. Close and lose changes?',
                okButton: 'Ok',
                cancelButton: 'Cancel',
            },
        });
        confirmDialog.afterClosed().subscribe(function (answer) {
            if (answer) {
                _this.goToInvoiceHome();
            }
            else {
                _this.isLoading = false;
            }
        });
    };
    InvoicingBaseFormComponent.prototype.unloadNotification = function ($event) {
        if (this.formGroup.dirty) {
            $event.returnValue = true;
        }
    };
    InvoicingBaseFormComponent.prototype.goToInvoiceHome = function () {
        this.router.navigate(['/' + this.companyManager.getCurrentCompanyId() + '/execution/invoicing/home']);
    };
    InvoicingBaseFormComponent.prototype.newSearchButtonClicked = function () {
        this.router.navigate(['/' + this.companyManager.getCurrentCompanyId() + '/execution/invoicing/new']);
    };
    InvoicingBaseFormComponent.prototype.getCreateInvoiceInfo = function () {
        this.isCreateInvoiceButtonClicked = true;
        var invoiceRecord = new _shared_services_execution_dtos_invoice_record__WEBPACK_IMPORTED_MODULE_15__["InvoiceRecord"]();
        this.formComponents.forEach(function (comp) {
            invoiceRecord = comp.populateEntity(invoiceRecord);
        });
        invoiceRecord.bankAccountId = this.selectedbankAccountId;
        return invoiceRecord;
    };
    InvoicingBaseFormComponent.prototype.onChangeStepAction = function (event) {
        this.currentStep = event.selectedIndex;
    };
    InvoicingBaseFormComponent.prototype.showConfirmationModal = function (hasPreview) {
        if (hasPreview) {
            this.createInvoice(true);
        }
        else {
            this.createInvoice();
        }
    };
    InvoicingBaseFormComponent.prototype.createInvoice = function (isDraft) {
        var _this = this;
        if (isDraft === void 0) { isDraft = false; }
        this.isLoading = true;
        var dialog;
        var messageGenerating = 'Generating invoice' + (isDraft ? ' preview' : '') + '... Please wait.';
        if (isDraft) {
            dialog = this.documentPopupService.showDocumentGenerationPopup('Document Invoice', 'invoice', new _shared_entities_document_popup_button_settings_entity__WEBPACK_IMPORTED_MODULE_9__["DocumentPopupButtonSettings"]());
            this.documentPopupService.startDialogWork(dialog, messageGenerating);
        }
        else {
            this.snackbarService.informationSnackBar(messageGenerating);
        }
        var invoiceRecord = this.getCreateInvoiceInfo();
        invoiceRecord.isDraft = isDraft;
        this.beforeInvoiceActions(invoiceRecord);
        this.executionService.createInvoice(invoiceRecord)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["mergeMap"])(function (invoice) {
            if (invoice.c2CCode && invoice.costAlternativeCode && invoice.departmentAlternativeCode
                && invoice.nominalAlternativeAccount && invoice.taxInterfaceCode) {
                _this.messageGenerated = 'Invoice ' + invoice.documentReference + ' generated successfully';
            }
            else {
                if (!invoice.costAlternativeCode) {
                    _this.mappingFields.push('"Cost Alternative Code"');
                }
                if (!invoice.departmentAlternativeCode) {
                    _this.mappingFields.push('"Department Alternative Code"');
                }
                if (!invoice.nominalAlternativeAccount) {
                    _this.mappingFields.push('"Nominal Account"');
                }
                if (!invoice.taxInterfaceCode) {
                    _this.mappingFields.push('"Tax Code"');
                }
                if (!invoice.c2CCode) {
                    _this.mappingFields.push('"C2C code"');
                }
                var mappingErrorFields = _this.mappingFields.join(', ');
                _this.messageGenerated = 'The document ' + invoice.invoiceLabel +
                    ' will not be sent to the accounting interface because the accounting interface code for '
                    + mappingErrorFields + ' is/are not filled in. Please contact the accountant';
            }
            if (dialog) {
                dialog.componentInstance.processMessage = _this.messageGenerated;
            }
            else {
                _this.snackbarService.informationAndCopySnackBar(_this.messageGenerated, _this.messageGenerated);
            }
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["combineLatest"])((invoice.physicalDocumentId) ?
                _this.documentService.getGeneratedDocumentContent(invoice.physicalDocumentId, isDraft)
                : Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["of"])(null), Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["of"])(invoice));
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["catchError"])(function (error) {
            if (dialog) {
                dialog.close();
            }
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["throwError"])(error);
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["finalize"])(function () {
            _this.isLoading = false;
            _this.documentPopupService.finishDialogWork(dialog);
        }))
            .subscribe(function (_a) {
            var _b = __read(_a, 2), response = _b[0], invoice = _b[1];
            if (!isDraft) {
                _this.afterInvoiceActions(invoice);
            }
            else {
                _this.handleDialogEvents(invoice, dialog);
            }
            if (response) {
                _this.downloadFile(response);
            }
        }, function (error) {
            _this.snackbarService.throwErrorSnackBar(error.error.detail);
        });
    };
    InvoicingBaseFormComponent.prototype.beforeInvoiceActions = function (invoiceRecord) {
        // overwritten in base child classes
    };
    InvoicingBaseFormComponent.prototype.afterInvoiceActions = function (invoiceRecord, summaryRecord) {
        // overwritten in base child classes
    };
    InvoicingBaseFormComponent.prototype.downloadFile = function (response) {
        var newBlob = new Blob([response.body], { type: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' });
        var data = this.window.URL.createObjectURL(newBlob);
        var link = document.createElement('a');
        link.href = data;
        link.download = this.utilService.getFileNameFromContentDisposition(response);
        link.click();
    };
    InvoicingBaseFormComponent.prototype.handleDialogEvents = function (invoiceRecord, dialog) {
        var _this = this;
        this.subscriptions.push(dialog.componentInstance.documentSelected
            .subscribe(function (file) {
            _this.onFileSelected(dialog, invoiceRecord, file);
        }));
        this.subscriptions.push(dialog.afterClosed()
            .subscribe(function (answer) {
            _this.onDialogClosed(answer);
        }));
    };
    InvoicingBaseFormComponent.prototype.onFileSelected = function (dialog, invoiceRecord, file) {
        var _this = this;
        this.documentPopupService.startDialogWork(dialog, 'Uploading document...');
        var documentType = this.mapInvoiceTypeToPhysicalDocumentType(invoiceRecord.invoiceType);
        this.subscriptions.push(this.documentService.uploadDocument(invoiceRecord.invoiceId, documentType, invoiceRecord.template, true, file)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["mergeMap"])(function (document) {
            dialog.componentInstance.processMessage = 'Generating final document...';
            var invoiceInfo = _this.getCreateInvoiceInfo();
            invoiceInfo.physicalDocumentId = document.physicalDocumentId;
            _this.beforeInvoiceActions(invoiceInfo);
            return _this.executionService.createInvoice(invoiceInfo);
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["mergeMap"])(function (invoice) {
            dialog.componentInstance.processMessage = 'Downloading final document...';
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["combineLatest"])(_this.documentService.getGeneratedDocumentContent(invoice.physicalDocumentId), Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["of"])(invoice));
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["finalize"])(function () {
            _this.documentPopupService.finishDialogWork(dialog);
        }))
            .subscribe(function (_a) {
            var _b = __read(_a, 2), response = _b[0], invoice = _b[1];
            _this.downloadFile(response);
            _this.afterInvoiceActions(invoice);
            dialog.close();
        }, function (error) {
            dialog.componentInstance.errorMessage = _this.documentPopupService.getErrorMessage(error, _shared_enums_document_entity_type_enum__WEBPACK_IMPORTED_MODULE_11__["DocumentEntityTypes"].Invoice);
        }));
    };
    InvoicingBaseFormComponent.prototype.mapInvoiceTypeToPhysicalDocumentType = function (invoiceType) {
        switch (invoiceType) {
            case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_13__["InvoiceTypes"].Purchase:
            case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_13__["InvoiceTypes"].Sales:
                return _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_12__["DocumentTypes"].InvoiceGoodsInvoice;
            case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_13__["InvoiceTypes"].Cost:
            case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_13__["InvoiceTypes"].CostReceivable:
            case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_13__["InvoiceTypes"].CostCreditNote:
            case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_13__["InvoiceTypes"].CostDebitNote:
                return _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_12__["DocumentTypes"].InvoiceCostsInvoice;
            case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_13__["InvoiceTypes"].GoodsCostPurchase:
            case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_13__["InvoiceTypes"].GoodsCostSales:
                return _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_12__["DocumentTypes"].InvoiceGoodsCostInvoice;
            case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_13__["InvoiceTypes"].Washout:
                return _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_12__["DocumentTypes"].InvoiceWashout;
            case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_13__["InvoiceTypes"].Reversal:
                return _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_12__["DocumentTypes"].InvoiceCancellation;
            default:
                console.error('Invalid invoice selection type: %s', invoiceType);
                break;
        }
    };
    InvoicingBaseFormComponent.prototype.onDialogClosed = function (dialogAnswer) {
        if (dialogAnswer && dialogAnswer['buttonClicked']) {
            if (dialogAnswer['buttonClicked'] === _shared_enums_generate_document_action_enum__WEBPACK_IMPORTED_MODULE_21__["GenerateDocumentActions"].ConfirmDocumentGeneration) {
                this.createInvoice();
            }
        }
    };
    InvoicingBaseFormComponent.prototype.onDocumentTemplateSelected = function (documentSelectedEvent) {
        this.hasTemplate = documentSelectedEvent.hasTemplate;
        this.previewDocumentCtrl.setValue(this.hasTemplate);
        this.selectedTemplate = documentSelectedEvent.template || undefined;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"])('window:beforeunload', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], InvoicingBaseFormComponent.prototype, "unloadNotification", null);
    InvoicingBaseFormComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-invoicing-base-form',
            template: __webpack_require__(/*! ./invoicing-base-form.component.html */ "./Client/app/execution/execution-invoicing/invoicing-base-form/invoicing-base-form.component.html"),
            styles: [__webpack_require__(/*! ./invoicing-base-form.component.scss */ "./Client/app/execution/execution-invoicing/invoicing-base-form/invoicing-base-form.component.scss")],
        }),
        __param(5, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_10__["WINDOW"])),
        __metadata("design:paramtypes", [_angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_6__["CompanyManagerService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_23__["SnackbarService"],
            _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_22__["DocumentService"],
            Window,
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_19__["UtilService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_17__["ExecutionService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_preaccounting_service__WEBPACK_IMPORTED_MODULE_18__["PreaccountingService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_16__["FormConfigurationProviderService"],
            _shared_services_document_popup_service__WEBPACK_IMPORTED_MODULE_14__["DocumentPopupService"]])
    ], InvoicingBaseFormComponent);
    return InvoicingBaseFormComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_7__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/invoicing-summary/invoicing-summary.component.html":
/*!*****************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/invoicing-summary/invoicing-summary.component.html ***!
  \*****************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div [ngSwitch]=\"invoiceTypeId\">\r\n    <atlas-commercial-summary #commercialSummaryComponent\r\n                              [defaultVATCode]=\"defaultVATCode\"\r\n                              [isCreationMode]=\"isCreationMode\"\r\n                              *ngIf=\"isCommercial()\"></atlas-commercial-summary>\r\n    <atlas-cost-summary #costSummaryComponent\r\n                        [defaultVATCode]=\"defaultVATCode\"\r\n                        *ngIf=\"isCost()\"></atlas-cost-summary>\r\n    <atlas-goods-cost-summary #goodsCostSummaryComponent\r\n                              [defaultVATCode]=\"defaultVATCode\"\r\n                              *ngIf=\"isGoodsCost()\"></atlas-goods-cost-summary>\r\n    <atlas-washout-summary #washoutSummaryComponent\r\n                           [defaultVATCode]=\"defaultVATCode\"\r\n                           *ngIf=\"isWashout()\"></atlas-washout-summary>\r\n</div>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/invoicing-summary/invoicing-summary.component.scss":
/*!*****************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/invoicing-summary/invoicing-summary.component.scss ***!
  \*****************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/invoicing-summary/invoicing-summary.component.ts":
/*!***************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/invoicing-summary/invoicing-summary.component.ts ***!
  \***************************************************************************************************/
/*! exports provided: InvoicingSummaryComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InvoicingSummaryComponent", function() { return InvoicingSummaryComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_title_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/services/title.service */ "./Client/app/shared/services/title.service.ts");
/* harmony import */ var _commercial_components_summary_commercial_summary_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../commercial/components/summary/commercial-summary.component */ "./Client/app/execution/execution-invoicing/commercial/components/summary/commercial-summary.component.ts");
/* harmony import */ var _cost_components_summary_cost_summary_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../cost/components/summary/cost-summary.component */ "./Client/app/execution/execution-invoicing/cost/components/summary/cost-summary.component.ts");
/* harmony import */ var _goods_cost_components_goods_cost_summary_goods_cost_summary_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../goods-cost/components/goods-cost-summary/goods-cost-summary.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-summary/goods-cost-summary.component.ts");
/* harmony import */ var _washout_components_washout_summary_washout_summary_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../washout/components/washout-summary/washout-summary.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-summary/washout-summary.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};














var InvoicingSummaryComponent = /** @class */ (function (_super) {
    __extends(InvoicingSummaryComponent, _super);
    function InvoicingSummaryComponent(executionService, route, snackbarService, formBuilder, dialog, formConfigurationProvider, titleService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.executionService = executionService;
        _this.route = route;
        _this.snackbarService = snackbarService;
        _this.formBuilder = formBuilder;
        _this.dialog = dialog;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.titleService = titleService;
        _this.formComponents = [];
        _this.InvoiceTypes = _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"];
        _this.originalInvoiceTypeId = 0;
        _this.isFromGrid = false;
        _this.isCreationMode = false;
        _this.isLoading = true;
        _this.invoiceId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('invoiceId')));
        return _this;
    }
    InvoicingSummaryComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.company = this.route.snapshot.paramMap.get('company');
        this.route.queryParams.subscribe(function (params) {
            _this.invoiceTypeId = Number(params['invoiceType']);
            _this.originalInvoiceTypeId = Number(params['originalInvoiceType']);
        });
        if (this.invoiceId && this.invoiceTypeId) {
            if (this.invoiceTypeId === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].Reversal) {
                this.invoiceTypeForReversal = this.invoiceTypeId;
                this.invoiceTypeId = this.originalInvoiceTypeId;
            }
            this.launchSelectedInvoiceSummary();
            this.getInvoiceSetupByCompany();
        }
    };
    InvoicingSummaryComponent.prototype.unloadNotification = function ($event) {
        if (this.createInvoiceFormGroup.dirty) {
            $event.returnValue = true;
        }
    };
    InvoicingSummaryComponent.prototype.launchSelectedInvoiceSummary = function () {
        var _this = this;
        this.subscriptions.push(this.executionService.
            getInvoiceById(this.invoiceId)
            .subscribe(function (data) {
            data.originalInvoiceType = _this.originalInvoiceTypeId;
            if (_this.invoiceTypeId === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].Reversal || _this.invoiceTypeForReversal === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].Reversal) {
                data.invoiceDate = data.reversedDocumentDate;
                data.invoiceType = _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].Reversal;
            }
            _this.isLoading = false;
            _this.titleService.setTitle(data.invoiceCode + ' - Invoice View');
            switch (_this.invoiceTypeId) {
                case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].Purchase:
                case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].Sales:
                    _this.commercialSummaryComponent.setSummaryFieldsFromGrid(data);
                    break;
                case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].Cost:
                case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].CostReceivable:
                case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].CostCreditNote:
                case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].CostDebitNote:
                    _this.invoiceTypeId = Number(_shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].Cost);
                    _this.costSummaryComponent.setSummaryFieldsFromGrid(data);
                    break;
                case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].Washout:
                case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].WashoutDebitNote:
                    _this.invoiceTypeId = Number(_shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].Washout);
                    _this.washoutSummaryComponent.setSummaryFieldsFromGrid(data);
                    break;
                case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].GoodsCostPurchase:
                case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].GoodsCostSales:
                    _this.goodsCostSummaryComponent.setSummaryFieldsFromGrid(data);
                    break;
                case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].Cancelled:
                    _this.invoiceTypeId = Number(_shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].Washout);
                    _this.washoutSummaryComponent.setSummaryFieldsFromGrid(data);
                    break;
                default: // throw Action not recognized exception
                    break;
            }
        }));
    };
    InvoicingSummaryComponent.prototype.getInvoiceSetupByCompany = function () {
        var _this = this;
        this.subscriptions.push(this.executionService.getInvoiceSetupByCompany()
            .subscribe(function (data) {
            _this.defaultVATCode = data.defaultVATCode;
        }));
    };
    InvoicingSummaryComponent.prototype.isCommercial = function () {
        return this.invoiceTypeId === Number(_shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].Purchase)
            || this.invoiceTypeId === Number(_shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].Sales);
    };
    InvoicingSummaryComponent.prototype.isCost = function () {
        return this.invoiceTypeId === Number(_shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].Cost)
            || this.invoiceTypeId === Number(_shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].CostReceivable)
            || this.invoiceTypeId === Number(_shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].CostCreditNote)
            || this.invoiceTypeId === Number(_shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].CostDebitNote);
    };
    InvoicingSummaryComponent.prototype.isGoodsCost = function () {
        return this.invoiceTypeId === Number(_shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].GoodsCostPurchase)
            || this.invoiceTypeId === Number(_shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].GoodsCostSales);
    };
    InvoicingSummaryComponent.prototype.isWashout = function () {
        return this.invoiceTypeId === Number(_shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].Washout)
            || this.invoiceTypeId === Number(_shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].WashoutDebitNote)
            || this.invoiceTypeId === Number(_shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypes"].Cancelled);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('commercialSummaryComponent'),
        __metadata("design:type", _commercial_components_summary_commercial_summary_component__WEBPACK_IMPORTED_MODULE_10__["CommercialSummaryComponent"])
    ], InvoicingSummaryComponent.prototype, "commercialSummaryComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('costSummaryComponent'),
        __metadata("design:type", _cost_components_summary_cost_summary_component__WEBPACK_IMPORTED_MODULE_11__["CostSummaryComponent"])
    ], InvoicingSummaryComponent.prototype, "costSummaryComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('goodsCostSummaryComponent'),
        __metadata("design:type", _goods_cost_components_goods_cost_summary_goods_cost_summary_component__WEBPACK_IMPORTED_MODULE_12__["GoodsCostSummaryComponent"])
    ], InvoicingSummaryComponent.prototype, "goodsCostSummaryComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('washoutSummaryComponent'),
        __metadata("design:type", _washout_components_washout_summary_washout_summary_component__WEBPACK_IMPORTED_MODULE_13__["WashoutSummaryComponent"])
    ], InvoicingSummaryComponent.prototype, "washoutSummaryComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"])('window:beforeunload', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], InvoicingSummaryComponent.prototype, "unloadNotification", null);
    InvoicingSummaryComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-invoicing-summary',
            template: __webpack_require__(/*! ./invoicing-summary.component.html */ "./Client/app/execution/execution-invoicing/invoicing-summary/invoicing-summary.component.html"),
            styles: [__webpack_require__(/*! ./invoicing-summary.component.scss */ "./Client/app/execution/execution-invoicing/invoicing-summary/invoicing-summary.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_7__["ExecutionService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_8__["SnackbarService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__["FormConfigurationProviderService"],
            _shared_services_title_service__WEBPACK_IMPORTED_MODULE_9__["TitleService"]])
    ], InvoicingSummaryComponent);
    return InvoicingSummaryComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/document-search/document-search.component.html":
/*!***************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/document-search/document-search.component.html ***!
  \***************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div fxLayout=\"row\"\r\n     fxLayoutAlign=\"start none\">\r\n    <mat-card fxFlex=\"100\">\r\n        <form [formGroup]=\"searchForm\">\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"start none\"\r\n                 class=\"search\">\r\n\r\n                <mat-form-field>\r\n                    <input matInput\r\n                           (keydown.enter)=\"onSearchReversalDocumentClicked()\"\r\n                           formControlName=\"searchDocumentCtrl\"\r\n                           placeholder=\"Invoice Document Ref\">\r\n                </mat-form-field>\r\n                <mat-form-field>\r\n                    <input matInput\r\n                           formControlName=\"contractReferenceCtrl\"\r\n                           placeholder=\"Contract Reference\"\r\n                           (keydown.enter)=\"onSearchReversalDocumentClicked()\"\r\n                           #action>\r\n                </mat-form-field>\r\n                <atlas-masterdata-user-preferences-input isEditable=\"true\"\r\n                                                         [fieldControl]=\"charterReferenceCtrl\"\r\n                                                         [options]=\"filteredCharters\"\r\n                                                         label=\"Charter Reference\"\r\n                                                         (keydown.enter)=\"onSearchReversalDocumentClicked()\"\r\n                                                         displayProperty=\"charterCode\"\r\n                                                         [selectProperties]=\"['charterCode','description']\"\r\n                                                         [errorMap]=\"charterErrorMap\"\r\n                                                         lightBoxTitle=\"Results for charters\"\r\n                                                         gridId=\"charterGrid\"\r\n                                                         [dataLoader]=\"charterDataLoader\">\r\n                </atlas-masterdata-user-preferences-input>\r\n                <atlas-masterdata-user-preferences-input isEditable=\"true\"\r\n                                                         [fieldControl]=\"counterPartyCtrl\"\r\n                                                         [options]=\"filteredCounterPartyList\"\r\n                                                         label=\"Counter Party\"\r\n                                                         (keydown.enter)=\"onSearchReversalDocumentClicked()\"\r\n                                                         displayProperty=\"counterpartyCode\"\r\n                                                         [selectProperties]=\"['counterpartyCode', 'description']\"\r\n                                                         [errorMap]=\"counterpartyErrorMap\"\r\n                                                         lightBoxTitle=\"Results for Counterparty\"\r\n                                                         gridId=\"counterpartiesGrid\"\r\n                                                         [dataLoader]=\"counterpartyDataLoader\">\r\n                </atlas-masterdata-user-preferences-input>\r\n                <button mat-raised-button\r\n                        (click)=\"onSearchReversalDocumentClicked()\"\r\n                        class=\"heroGradient\">\r\n                    <mat-icon aria-label=\"Search\"\r\n                              class=\"search-icon\">search</mat-icon>\r\n                </button>\r\n            </div>\r\n        </form>\r\n    </mat-card>\r\n</div>\r\n\r\n<atlas-filter-set-display (filtersChanged)=onFilterSetDetailsChange($event)\r\n                          [columnConfiguration]=\"columnConfiguration\"\r\n                          [gridCode]=\"gridCode\"\r\n                          [company]=\"company\"\r\n                          #filterSetDisplayComponent>\r\n</atlas-filter-set-display>\r\n<div fxLayout=\"row\"\r\n     fxLayoutAlign=\"start none\">\r\n    <mat-card fxFlex=\"100\">\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"center center\"\r\n             fxLayoutWrap\r\n             *ngIf=\"isLoading\"\r\n             class=\"loading\">\r\n            <mat-spinner color=\"accent\"></mat-spinner>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             *ngIf=\"!isLoading\"\r\n             fxLayout.xs=\"column\"\r\n             fxLayoutAlign=\"space-between start\"\r\n             fxLayoutGap=\"20px\"\r\n             class=\"atlas-grid-card-header\">\r\n            <h2 class=\"no-margin\">{{gridTitle}}</h2>\r\n\r\n            <atlas-ag-grid-user-preferences *ngIf=\"reversalDocumentGridOptions && reversalDocumentGridOptions.columnDefs\"\r\n                                            [gridOptions]=\"reversalDocumentGridOptions\"\r\n                                            [company]=\"company\"\r\n                                            [gridId]=\"gridCode\"\r\n                                            [sharingEnabled]=\"hasGridSharing\"\r\n                                            #userPreferences>\r\n            </atlas-ag-grid-user-preferences>\r\n        </div>\r\n        <div ag-grid=\"reversalDocumentGridOptions\"\r\n             class=\"ag-theme-material pointer-cursor\">\r\n            <ag-grid-angular class=\"ag-theme-material\"\r\n                             [gridOptions]=\"reversalDocumentGridOptions\"\r\n                             [rowData]=\"reversalDocumentGridRows\"\r\n                             [columnDefs]=\"reversalDocumentGridColumns\"\r\n                             domLayout=autoHeight\r\n                             rowSelection=\"multiple\"\r\n                             [singleClickEdit]=\"true\"\r\n                             [suppressRowClickSelection]=\"true\"\r\n                             [pagination]=\"true\"\r\n                             [paginationPageSize]=\"10\"\r\n                             [enableSorting]=\"true\"\r\n                             [enableColResize]=\"true\"\r\n                             [enableFilter]=\"true\"\r\n                             [rowHeight]=atlasAgGridParam.rowHeight\r\n                             rowMultiSelectWithClick=true\r\n                             [singleClickEdit]=\"true\"\r\n                             enableFilter\r\n                             [rowHeight]=atlasAgGridParam.rowHeight\r\n                             (columnVisible)=\"onColumnVisibilityChanged($event)\"\r\n                             (gridReady)=\"onGridReady($event)\"\r\n                             (firstDataRendered)=\"onFirstDataRendered($event)\"\r\n                             (rowSelected)=\"onRowSelected($event)\">\r\n                <!-- [suppressRowClickSelection]=\"true\" -->\r\n            </ag-grid-angular>\r\n        </div>\r\n    </mat-card>\r\n</div>\r\n\r\n<atlas-lock-interval [resourcesInformation]=\"resourcesInformation\">\r\n</atlas-lock-interval>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/document-search/document-search.component.scss":
/*!***************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/document-search/document-search.component.scss ***!
  \***************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".atlas-grid-card-header h3 {\n  margin-bottom: 0; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/document-search/document-search.component.ts":
/*!*************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/document-search/document-search.component.ts ***!
  \*************************************************************************************************************************************************/
/*! exports provided: DocumentSearchComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DocumentSearchComponent", function() { return DocumentSearchComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _shared_components_ag_grid_checkbox_ag_grid_checkbox_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/components/ag-grid-checkbox/ag-grid-checkbox.component */ "./Client/app/shared/components/ag-grid-checkbox/ag-grid-checkbox.component.ts");
/* harmony import */ var _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component */ "./Client/app/shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _shared_dtos_list_and_search_list_and_search_filter_dto_dto__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../../../shared/dtos/list-and-search/list-and-search-filter-dto.dto */ "./Client/app/shared/dtos/list-and-search/list-and-search-filter-dto.dto.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../../../shared/entities/lock-functional-context.entity */ "./Client/app/shared/entities/lock-functional-context.entity.ts");
/* harmony import */ var _shared_entities_lock_resource_information_entity__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../../../shared/entities/lock-resource-information.entity */ "./Client/app/shared/entities/lock-resource-information.entity.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_execution_charter_data_loader__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../../../shared/services/execution/charter-data-loader */ "./Client/app/shared/services/execution/charter-data-loader.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../../../../shared/services/grid-configuration-provider.service */ "./Client/app/shared/services/grid-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/lock.service */ "./Client/app/shared/services/http-services/lock.service.ts");
/* harmony import */ var _shared_services_masterdata_counterparty_data_loader__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../../../../../shared/services/masterdata/counterparty-data-loader */ "./Client/app/shared/services/masterdata/counterparty-data-loader.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _services_execution_actions_service__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../../../../services/execution-actions.service */ "./Client/app/execution/services/execution-actions.service.ts");
/* harmony import */ var _document_type_document_type_component__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../document-type/document-type.component */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/document-type/document-type.component.ts");
/* harmony import */ var _shared_components_filter_set_display_filter_set_display_component__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./../../../../../../../shared/components/filter-set-display/filter-set-display.component */ "./Client/app/shared/components/filter-set-display/filter-set-display.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




























var DocumentSearchComponent = /** @class */ (function (_super) {
    __extends(DocumentSearchComponent, _super);
    function DocumentSearchComponent(formBuilder, route, formConfigurationProvider, snackbarService, uiService, executionService, dialog, lockService, utilService, gridConfigurationProvider, counterpartyDataLoader, charterDataLoader, gridService, executionActionsService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.route = route;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.snackbarService = snackbarService;
        _this.uiService = uiService;
        _this.executionService = executionService;
        _this.dialog = dialog;
        _this.lockService = lockService;
        _this.utilService = utilService;
        _this.gridConfigurationProvider = gridConfigurationProvider;
        _this.counterpartyDataLoader = counterpartyDataLoader;
        _this.charterDataLoader = charterDataLoader;
        _this.gridService = gridService;
        _this.executionActionsService = executionActionsService;
        _this.documentTypeSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.documentDateSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.rowSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.dataLength = 0;
        _this.transactionDocumentTypeId = 0;
        _this.gridTitle = 'Reversible Invoices';
        _this.gridCode = 'invoiceReversalSelectionGrid';
        _this.reversalDocumentGridOptions = {};
        _this.hasGridSharing = false;
        _this.columnConfiguration = [];
        _this.additionnalColumns = [];
        _this.destroy$ = new rxjs__WEBPACK_IMPORTED_MODULE_4__["Subject"]();
        _this.resourcesInformation = new Array();
        _this.locking = [];
        _this.unlocking = [];
        _this.masterdata = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_14__["MasterData"]();
        _this.counterPartyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_11__["AtlasFormControl"]('CounterPartyReversal');
        _this.charterReferenceCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_11__["AtlasFormControl"]('CharterRefReversal');
        _this.counterpartyErrorMap = new Map()
            .set('inDropdownList', 'Invalid entry. Counter Party not in the list.');
        _this.charterErrorMap = new Map();
        _this.count = 0;
        _this.atlasAgGridParam = _this.gridService.getAgGridParam();
        _this.searchForm = _this.formBuilder.group({
            searchDocumentCtrl: [''],
            contractReferenceCtrl: [''],
        });
        return _this;
    }
    DocumentSearchComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.masterdata = this.route.snapshot.data['masterdata'];
        this.invoiceType = Number(decodeURIComponent(this.route.snapshot.paramMap.get('invoiceTypeId')));
        this.company = this.route.snapshot.paramMap.get('company');
        this.bindConfiguration();
        this.filteredCounterPartyList = this.masterdata.counterparties;
        this.counterPartyList = this.filteredCounterPartyList;
        this.counterPartyCtrl.valueChanges.subscribe(function (input) {
            _this.filterCounterParty(input);
        });
        this.populateCharterList();
        this.charterReferenceCtrl.valueChanges.subscribe(function (input) {
            _this.filterCharterReference(input);
        });
        this.loadGridConfiguration();
        this.route.queryParams.subscribe(function (params) {
            _this.saveContractRef = params['savedContractReference'];
            _this.saveCounterparty = params['savedCounterParty'];
            _this.saveCharterReference = params['savedCharterReference'];
            _this.saveInvoiceReference = params['savedInvoiceReference'];
        });
        if (this.executionActionsService.EditCriteriaRetainFilter && this.executionActionsService.EditCriteriaRetainFilter.length > 0) {
            this.savedFilters = this.executionActionsService.EditCriteriaRetainFilter;
        }
        if (this.saveContractRef || this.saveCounterparty || this.saveCharterReference || this.saveInvoiceReference) {
            if (this.saveContractRef) {
                this.searchForm.controls['contractReferenceCtrl'].setValue(this.saveContractRef);
            }
            if (this.saveInvoiceReference) {
                this.searchForm.controls['searchDocumentCtrl'].setValue(this.saveInvoiceReference);
            }
            if (this.saveCounterparty) {
                this.counterPartyControl = this.counterPartyList.find(function (counterParty) {
                    return counterParty.counterpartyCode === _this.saveCounterparty;
                });
                this.counterPartyCtrl.patchValue(this.counterPartyControl);
            }
            if (this.saveCharterReference) {
                this.charterRefControl = this.charters.find(function (charter) {
                    return charter.charterCode === _this.saveCharterReference;
                });
                this.charterReferenceCtrl.patchValue(this.charterRefControl);
            }
        }
    };
    DocumentSearchComponent.prototype.populateCharterList = function () {
        var _this = this;
        this.charterDataLoader.getData().subscribe(function (charter) {
            _this.charters = charter;
            _this.filteredCharters = _this.charters;
        });
    };
    DocumentSearchComponent.prototype.filterCounterParty = function (input) {
        this.filteredCounterPartyList = this.utilService.filterListforAutocomplete(input, this.masterdata.counterparties, ['counterpartyCode', 'description']);
        if (this.counterPartyCtrl.valid || !this.counterPartyCtrl.value) {
            this.onSearchReversalDocumentClicked();
        }
    };
    DocumentSearchComponent.prototype.filterCharterReference = function (input) {
        this.filteredCharters = this.utilService.filterListforAutocomplete(input, this.charters, ['charterCode', 'description']);
        if (this.charterReferenceCtrl.valid || !this.charterReferenceCtrl.value) {
            this.onSearchReversalDocumentClicked();
        }
    };
    DocumentSearchComponent.prototype.loadGridConfiguration = function () {
        var _this = this;
        this.gridConfigurationProvider.getConfiguration(this.company, this.gridCode)
            .subscribe(function (configuration) {
            _this.columnConfiguration = configuration.columns;
            _this.initColumns(_this.columnConfiguration);
            _this.hasGridSharing = configuration.hasMultipleViewsPerUser;
        });
    };
    DocumentSearchComponent.prototype.onFirstDataRendered = function (params) {
        if (this.gridColumnApi) {
            this.gridColumnApi.autoSizeAllColumns();
        }
    };
    DocumentSearchComponent.prototype.initColumns = function (configuration) {
        var _this = this;
        this.reversalDocumentGridColumns = [];
        var numericColumns = [];
        configuration.forEach(function (column) {
            if (column.gridType === 'numeric') {
                numericColumns.push(column.fieldName.toLowerCase());
            }
        });
        // selection column
        this.reversalDocumentGridColumns.push({
            headerCheckboxSelection: false,
            checkboxSelection: true,
            minWidth: 40,
            maxWidth: 40,
            pinned: 'left',
        });
        // grid config
        this.reversalDocumentGridColumns = this.reversalDocumentGridColumns
            .concat(configuration.map(function (config) {
            var columnDef = {
                colId: _this.utilService.convertToCamelCase(config.fieldName),
                headerName: config.friendlyName,
                field: _this.utilService.convertToCamelCase(config.fieldName),
                width: 100,
                hide: !config.isVisible,
            };
            var formatter = _this.uiService.getFormatterForType(config.gridType);
            if (formatter) {
                columnDef.valueFormatter = formatter;
            }
            var dateGetter = _this.uiService.getterForDateType(config.gridType);
            if (dateGetter) {
                columnDef.cellClass = 'dateFormat';
                columnDef.valueGetter = dateGetter;
            }
            if (config.gridType === 'boolean') {
                columnDef.cellRendererFramework = _shared_components_ag_grid_checkbox_ag_grid_checkbox_component__WEBPACK_IMPORTED_MODULE_6__["AgGridCheckboxComponent"];
                columnDef.cellRendererParams = { disabled: true };
            }
            var numericColumn = numericColumns.find(function (column) { return column === columnDef.field.toLowerCase(); });
            if (numericColumn) {
                columnDef.type = 'numericColumn';
                columnDef.valueFormatter = _this.numberFormatter;
            }
            return columnDef;
        }));
        // calculated columns
        this.reversalDocumentGridColumns = this.reversalDocumentGridColumns.concat(this.additionnalColumns);
        if (this.gridApi) {
            if (this.gridApi) {
                this.gridApi.sizeColumnsToFit();
            }
        }
        if (this.reversalDocumentGridOptions && this.reversalDocumentGridOptions.api) {
            this.reversalDocumentGridOptions.columnDefs = this.reversalDocumentGridColumns;
            this.reversalDocumentGridOptions.api.setColumnDefs(this.reversalDocumentGridColumns);
        }
    };
    DocumentSearchComponent.prototype.onFilterSetDetailsChange = function (filters) {
        this.executionActionsService.EditCriteriaRetainFilter = filters;
        this.filters = filters;
        if (this.count === 1) {
            this.filters = this.savedFilters;
            this.savedFilters = null;
            this.count = 0;
        }
        if (this.savedFilters && this.count === 0) {
            if (this.filterSetDisplayComponent) {
                this.count = 1;
                var localFilters = this.savedFilters.map(function (filter) {
                    return new _shared_dtos_list_and_search_list_and_search_filter_dto_dto__WEBPACK_IMPORTED_MODULE_10__["ListAndSearchFilterDto"](filter);
                });
                this.filterSetDisplayComponent.loadFilters(localFilters);
            }
        }
        else {
            this.loadData();
        }
    };
    DocumentSearchComponent.prototype.loadData = function () {
        var _this = this;
        if (!this.filters) {
            return;
        }
        var filters = this.filters.map(function (filter) {
            return new _shared_dtos_list_and_search_list_and_search_filter_dto_dto__WEBPACK_IMPORTED_MODULE_10__["ListAndSearchFilterDto"](filter);
        });
        this.isLoading = true;
        var request = {
            clauses: { clauses: filters },
        };
        this.executionService.searchInvoicesToReverse(request).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["takeUntil"])(this.destroy$)).subscribe(function (data) {
            _this.reversalDocumentGrid = data.value;
            _this.reversalDocumentGridRows = _this.reversalDocumentGrid.filter(function (reversalContract) {
                var reversalContractQuantityValue = Number(reversalContract.quantity);
                var reversalContractQuantityValueFixes = Number(reversalContractQuantityValue.toFixed(3));
                if (reversalContractQuantityValueFixes) {
                    return reversalContract;
                }
            });
            _this.reversalDocuments = _this.reversalDocumentGridRows;
            _this.dataLength = _this.reversalDocumentGridRows.length;
            _this.gridApi.hideOverlay();
            _this.gridColumnApi.autoSizeAllColumns();
            if (_this.filters.length === 0) {
                if (_this.saveContractRef || _this.saveCounterparty || _this.saveCharterReference || _this.saveInvoiceReference) {
                    _this.onSearchReversalDocumentClicked();
                }
            }
            _this.isLoading = false;
        });
    };
    DocumentSearchComponent.prototype.onGridReady = function (params) {
        params.columnDefs = this.reversalDocumentGridColumns;
        this.gridApi = params.api;
        this.reversalDocumentGridOptions = params;
        this.gridColumnApi = params.columnApi;
        this.gridApi.showNoRowsOverlay();
    };
    DocumentSearchComponent.prototype.autoSizeContractsGrid = function () {
        if (this.gridColumnApi && this.reversalDocumentGridColumns) {
            var allColumnIds_1 = [];
            this.reversalDocumentGridColumns.forEach(function (columnDefs) {
                allColumnIds_1.push(columnDefs.field);
            });
            this.gridColumnApi.autoSizeColumns(allColumnIds_1);
        }
    };
    DocumentSearchComponent.prototype.onGridSizeChanged = function () {
        this.autoSizeContractsGrid();
    };
    DocumentSearchComponent.prototype.externalFilterPresent = function () {
        if (this.searchInvoiceReference) {
            return true;
        }
        else {
            return false;
        }
    };
    DocumentSearchComponent.prototype.externalFilterPass = function (node) {
        var invoiceReference = node.data.invoiceReference;
        return invoiceReference === this.searchInvoiceReference.toUpperCase()
            || invoiceReference.toString().match(this.searchInvoiceReference);
    };
    DocumentSearchComponent.prototype.contractValid = function (node) {
        if (node.data.contractUnApproved === true || node.data.invoiceMatched === true) {
            return { background: 'rgba(199, 194, 196, 0.5)', color: '#928D8F' };
        }
    };
    DocumentSearchComponent.prototype.onSearchReversalDocumentClicked = function () {
        var _this = this;
        this.searchInvoiceReference = this.searchForm.get('searchDocumentCtrl').value;
        this.searchContractReference = this.searchForm.get('contractReferenceCtrl').value;
        if (this.counterPartyCtrl.value === '') {
            this.searchCounterParty = this.counterPartyCtrl.value;
        }
        else if (this.counterPartyCtrl.value) {
            this.searchCounterParty = this.counterPartyCtrl.value.counterpartyCode;
            if (!this.searchCounterParty) {
                this.searchCounterParty = this.counterPartyCtrl.value;
            }
        }
        if (this.charterReferenceCtrl.value === '') {
            this.searchCharterReference = this.charterReferenceCtrl.value;
        }
        else if (this.charterReferenceCtrl.value) {
            this.searchCharterReference = this.charterReferenceCtrl.value.charterCode;
            if (!this.searchCharterReference) {
                this.searchCharterReference = this.charterReferenceCtrl.value;
            }
        }
        var documentRows = 0;
        var contractRows = 0;
        var charterRows = 0;
        // This Commented code will be removed once thorough testing for grid is done
        // if (this.gridApi) { this.gridApi.onFilterChanged(); }
        // this.dataLength = this.gridApi.getDisplayedRowCount();
        var rows = [];
        var reversalContracts = [];
        if (!this.searchInvoiceReference && !this.searchContractReference && !this.searchCharterReference && !this.searchCounterParty) {
            this.reversalDocumentGridRows = this.reversalDocuments;
            return;
        }
        if (this.reversalDocuments && this.reversalDocuments.length > 0) {
            this.isLoading = true;
            this.reversalDocumentGridRows = this.reversalDocuments;
            this.filters = [];
            // (this.searchTerm) ?
            //     rows = this.reversalDocuments.filter((item) =>
            //         item.invoiceReference.toString().toUpperCase().includes(this.searchTerm.toUpperCase())) :
            //     rows = this.reversalDocuments;
            if (this.searchInvoiceReference) {
                reversalContracts = this.reversalDocuments.filter(function (item) { return item.invoiceReference != null; });
                rows = reversalContracts.filter(function (item) {
                    return item.invoiceReference.toString().toUpperCase().includes(_this.searchInvoiceReference.toUpperCase());
                });
                documentRows = -1;
            }
            if (this.searchContractReference) {
                if (rows.length === 0 && contractRows === 0) {
                    reversalContracts = this.reversalDocuments.filter(function (item) { return item.contractReference != null; });
                    rows = reversalContracts.filter(function (item) {
                        return item.contractReference.toString().toUpperCase().includes(_this.searchContractReference.toUpperCase());
                    });
                }
                else {
                    rows = rows.filter(function (item) { return item.contractReference != null; });
                    rows = rows.filter(function (item) { return item.contractReference.toString().toUpperCase().
                        includes(_this.searchContractReference.toUpperCase()); });
                }
                contractRows = -1;
            }
            if (this.searchCharterReference) {
                if (rows.length === 0 && contractRows === 0) {
                    reversalContracts = this.reversalDocuments.filter(function (item) { return item.charterReference != null; });
                    rows = reversalContracts.filter(function (item) {
                        return item.charterReference.toString().toUpperCase().includes(_this.searchCharterReference.toUpperCase());
                    });
                }
                else {
                    rows = rows.filter(function (item) { return item.charterReference != null; });
                    rows = rows.filter(function (item) { return item.charterReference.toString().toUpperCase().
                        includes(_this.searchCharterReference.toUpperCase()); });
                }
                charterRows = -1;
            }
            if (this.searchCounterParty) {
                if (rows.length === 0 && charterRows === 0 && contractRows === 0) {
                    reversalContracts = this.reversalDocuments.filter(function (item) { return item.customerRef != null; });
                    rows = reversalContracts.filter(function (item) {
                        return item.customerRef.toString().toUpperCase().includes(_this.searchCounterParty.toUpperCase());
                    });
                }
                else {
                    rows = rows.filter(function (item) { return item.customerRef != null; });
                    rows = rows.filter(function (item) { return item.customerRef.toString().toUpperCase().
                        includes(_this.searchCounterParty.toUpperCase()); });
                }
            }
        }
        this.reversalDocumentGridRows = rows;
        this.dataLength = this.reversalDocumentGridRows.length;
        this.autoSizeContractsGrid();
        this.isLoading = false;
        (this.reversalDocumentGridRows) ? this.gridApi.hideOverlay() : this.gridApi.showNoRowsOverlay();
    };
    DocumentSearchComponent.prototype.onColumnVisibilityChanged = function (col) {
        this.userPreferencesComponent.onChangeColumnVisibility(col);
        this.autoSizeContractsGrid();
    };
    DocumentSearchComponent.prototype.deselectNode = function (currentRowIndex) {
        var _this = this;
        this.reversalDocumentGridOptions.api.forEachNode(function (node) {
            if (Number(node.id) === currentRowIndex) {
                _this.reversalDocumentGridOptions.api.deselectNode(node);
            }
        });
    };
    DocumentSearchComponent.prototype.onRowSelected = function (event) {
        var _this = this;
        var selectedRows = this.gridApi.getSelectedRows();
        var currentRowIndex = event.rowIndex;
        if (selectedRows.length === 0) {
            this.documentDateSelected.emit(null);
            this.reversalInvoiceReference = '';
            var row = {
                data: null,
                isRowSelected: false,
            };
            this.rowSelected.emit(row);
        }
        if (!event.node.isSelected()) {
            if (event.data.invoiceReference === this.reversalInvoiceReference) {
                this.gridApi.forEachNode(function (rowData) {
                    if (rowData.data.invoiceReference === _this.reversalInvoiceReference) {
                        rowData.selectThisNode(false);
                    }
                });
            }
            this.gridApi.deselectNode(event.node);
        }
        else {
            if (event.data.contractUnApproved === true) {
                this.snackbarService.informationSnackBar('Check Approval Status of the Contract');
                this.gridApi.deselectIndex(currentRowIndex);
            }
            if (event.data.invoiceMatched === true) {
                this.snackbarService.informationSnackBar('Document cannot be reversed since it is already matched');
                this.gridApi.deselectIndex(currentRowIndex);
            }
            if (selectedRows.length === 1) {
                if (event.node.selected === true) {
                    this.reversalInvoiceReference = event.data.invoiceReference;
                    this.invoiceId = event.data.invoiceId;
                    this.documentDate = event.data.documentDate;
                    this.transactionDocumentId = event.data.transactionDocumentId;
                    this.transactionDocumentTypeId = event.data.transactionDocumentTypeId;
                    this.documentTypeSelected.emit(this.documentTypeId);
                    this.documentDateSelected.emit(this.documentDate);
                    var row = {
                        data: event.data,
                        isRowSelected: event.node.selected,
                    };
                    this.rowSelected.emit(row);
                }
            }
            if (selectedRows.length > 1) {
                if (event.data.invoiceReference !== this.reversalInvoiceReference) {
                    this.snackbarService.informationSnackBar('Only One Invoice Document can be reversed at a time');
                    this.gridApi.deselectIndex(currentRowIndex);
                }
            }
        }
        this.grantLock(Number(event.data.invoiceId), event.node);
    };
    DocumentSearchComponent.prototype.grantLock = function (invoiceId, node) {
        var _this = this;
        if (node.isSelected()) {
            if (!this.locking.includes(invoiceId)) {
                this.locking.push(invoiceId);
                this.subscriptions.push(this.lockService.isLockedInvoice(invoiceId).subscribe(function (lock) {
                    if (lock.isLocked) {
                        _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_9__["ConfirmationDialogComponent"], {
                            data: {
                                title: 'Lock',
                                text: lock.message,
                                okButton: 'Got it',
                            },
                        });
                        _this.gridApi.deselectNode(node);
                        _this.locking = _this.locking.filter(function (id) { return id !== invoiceId; });
                    }
                    else {
                        _this.subscriptions.push(_this.lockService.lockInvoice(invoiceId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_12__["LockFunctionalContext"].ReversalInvoicing).subscribe(function () {
                            _this.refeshResourceInformation();
                            _this.locking = _this.locking.filter(function (id) { return id !== invoiceId; });
                        }, function (error) {
                            var errorMessage = error && error.error && error.error.detail && error.error.detail.length > 0 ?
                                error.error.detail :
                                'The invoice or one of the contract related is locked by another user.';
                            _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_9__["ConfirmationDialogComponent"], {
                                data: {
                                    title: 'Lock',
                                    text: errorMessage,
                                    okButton: 'Got it',
                                },
                            });
                            _this.gridApi.deselectNode(node);
                            _this.locking = _this.locking.filter(function (id) { return id !== invoiceId; });
                        }));
                    }
                }));
            }
        }
        else {
            if (!this.unlocking.includes(invoiceId)) {
                this.unlocking.push(invoiceId);
                this.refeshResourceInformation();
                if (this.resourcesInformation.filter(function (rsc) { return rsc.resourceId === invoiceId; }).length === 0) {
                    this.subscriptions.push(this.lockService.unlockInvoice(invoiceId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_12__["LockFunctionalContext"].ReversalInvoicing).subscribe(function () {
                        node.setRowSelectable(true);
                        _this.unlocking = _this.unlocking.filter(function (id) { return id !== invoiceId; });
                    }));
                }
                else {
                    node.setRowSelectable(true);
                    this.unlocking = this.unlocking.filter(function (id) { return id !== invoiceId; });
                }
            }
        }
    };
    DocumentSearchComponent.prototype.refeshResourceInformation = function () {
        var _this = this;
        this.resourcesInformation = new Array();
        this.gridApi.forEachNode(function (node) {
            if (node.isSelected()) {
                var resourceInformation = new _shared_entities_lock_resource_information_entity__WEBPACK_IMPORTED_MODULE_13__["LockResourceInformation"]();
                resourceInformation.resourceType = 'Invoice';
                resourceInformation.resourceId = node.data.invoiceId;
                resourceInformation.resourceCode = node.data.invoiceReference;
                _this.resourcesInformation.push(resourceInformation);
            }
        });
    };
    DocumentSearchComponent.prototype.populateEntity = function (entity) {
        var invoiceDetails = entity;
        invoiceDetails.invoiceId = this.invoiceId;
        invoiceDetails.transactionDocumentId = this.transactionDocumentId;
        invoiceDetails.invoiceLabel = this.reversalInvoiceReference;
        invoiceDetails.transactionDocumentTypeId = this.transactionDocumentTypeId;
        return invoiceDetails;
    };
    DocumentSearchComponent.prototype.numberFormatter = function (params) {
        if (params && params.value && !isNaN(params.value)) {
            if (params.colDef.colId.toLowerCase() === 'costamount' || params.colDef.colId.toLowerCase() === 'totalinvoicevalue'
                || params.colDef.colId.toLowerCase() === 'quantity') {
                if (params.colDef.colId.toLowerCase() === 'quantity') {
                    return new Intl.NumberFormat('en-US', { minimumFractionDigits: 3, maximumFractionDigits: 3 }).format(params.value);
                }
                else {
                    return new Intl.NumberFormat('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(params.value);
                }
            }
        }
    };
    DocumentSearchComponent.prototype.ngOnDestroy = function () {
        var _this = this;
        this.subscriptions.push(this.lockService.cleanSessionLocks().subscribe(function () {
            _this.subscriptions.forEach(function (subscription) {
                subscription.unsubscribe();
            });
        }));
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('userPreferences'),
        __metadata("design:type", _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_7__["AgGridUserPreferencesComponent"])
    ], DocumentSearchComponent.prototype, "userPreferencesComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('filterSetDisplayComponent'),
        __metadata("design:type", _shared_components_filter_set_display_filter_set_display_component__WEBPACK_IMPORTED_MODULE_27__["FilterSetDisplayComponent"])
    ], DocumentSearchComponent.prototype, "filterSetDisplayComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('documentTypeComponent'),
        __metadata("design:type", _document_type_document_type_component__WEBPACK_IMPORTED_MODULE_26__["DocumentTypeComponent"])
    ], DocumentSearchComponent.prototype, "documentTypeComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], DocumentSearchComponent.prototype, "documentTypeSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], DocumentSearchComponent.prototype, "documentDateSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], DocumentSearchComponent.prototype, "rowSelected", void 0);
    DocumentSearchComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-document-search',
            template: __webpack_require__(/*! ./document-search.component.html */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/document-search/document-search.component.html"),
            styles: [__webpack_require__(/*! ./document-search.component.scss */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/document-search/document-search.component.scss")],
            providers: [_shared_services_masterdata_counterparty_data_loader__WEBPACK_IMPORTED_MODULE_21__["CounterPartyDataLoader"], _shared_services_execution_charter_data_loader__WEBPACK_IMPORTED_MODULE_16__["CharterDataLoader"]],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_17__["FormConfigurationProviderService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_22__["SnackbarService"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_23__["UiService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_19__["ExecutionService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"],
            _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_20__["LockService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_24__["UtilService"],
            _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_18__["GridConfigurationProviderService"],
            _shared_services_masterdata_counterparty_data_loader__WEBPACK_IMPORTED_MODULE_21__["CounterPartyDataLoader"],
            _shared_services_execution_charter_data_loader__WEBPACK_IMPORTED_MODULE_16__["CharterDataLoader"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_15__["AgGridService"],
            _services_execution_actions_service__WEBPACK_IMPORTED_MODULE_25__["ExecutionActionsService"]])
    ], DocumentSearchComponent);
    return DocumentSearchComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_8__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/document-type/document-type.component.html":
/*!***********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/document-type/document-type.component.html ***!
  \***********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"invoice-creation-card\">\r\n    <mat-card-title>\r\n        <h2>\r\n            Reverse Settings\r\n        </h2>\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <mat-form-field fxFlex=\"30%\">\r\n                <mat-select [panelWidth]=\"panelSize\"\r\n                            placeholder=\"Document Type\"\r\n                            [formControl]=\"documentTypeCtrl\"\r\n                            matTooltip=\"Document Type\">\r\n\r\n                    <mat-option *ngFor=\"let info of masterDataDocumentType\"\r\n                                [value]=\"info.physicalDocumentTypeId\">\r\n                        {{info.physicalDocumentTypeLabel}}\r\n                    </mat-option>\r\n                </mat-select>\r\n\r\n            </mat-form-field>\r\n            <mat-form-field fxFlex=\"30%\"\r\n                            class=\"mandatory\">\r\n                <input matInput\r\n                       placeholder=\"Document Date\"\r\n                       [formControl]=\"documentDateCtrl\"\r\n                       [matDatepicker]=\"documentDatePicker\"\r\n                       matTooltip=\"Document Date\"\r\n                       autocomplete=\"off\"\r\n                       (dateChange)='onDocumentDateSelected()'>\r\n                <mat-datepicker-toggle matSuffix\r\n                                       [for]=\"documentDatePicker\"></mat-datepicker-toggle>\r\n                <mat-error *ngIf=\"documentDateCtrl.hasError('isDateAfterValid')\">\r\n                    Document Date cannot be after Today’s Date\r\n                </mat-error>\r\n                <mat-datepicker #documentDatePicker></mat-datepicker>\r\n                <mat-error *ngIf=\"documentDateCtrl.hasError('isDateBeforeValid')\">\r\n                    Document Date cannot be before Invoice Date\r\n                </mat-error>\r\n                <mat-hint *ngIf=\"!documentDateCtrl.hasError('isDateBeforeValid' || 'required') && !documentDateCtrl.disabled\"\r\n                          class=\"invoice-creation-required-fields\">Required*</mat-hint>\r\n                <mat-error *ngIf=\"documentDateCtrl.hasError('required')\">\r\n                    Required*\r\n                </mat-error>\r\n            </mat-form-field>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/document-type/document-type.component.scss":
/*!***********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/document-type/document-type.component.scss ***!
  \***********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/document-type/document-type.component.ts":
/*!*********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/document-type/document-type.component.ts ***!
  \*********************************************************************************************************************************************/
/*! exports provided: DocumentTypeComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DocumentTypeComponent", function() { return DocumentTypeComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_enums_transaction_document_type_enum__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/enums/transaction-document-type.enum */ "./Client/app/shared/enums/transaction-document-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../../../shared/validators/date-validators.validator */ "./Client/app/shared/validators/date-validators.validator.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};











var moment = moment__WEBPACK_IMPORTED_MODULE_3__;
var DocumentTypeComponent = /** @class */ (function (_super) {
    __extends(DocumentTypeComponent, _super);
    function DocumentTypeComponent(formBuilder, masterdataService, utilService, route, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.masterdataService = masterdataService;
        _this.utilService = utilService;
        _this.route = route;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.documentDateCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__["AtlasFormControl"]('reversalDocumentDate', '', _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required);
        _this.documentTypeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__["AtlasFormControl"]('reversalDocumentType');
        return _this;
    }
    DocumentTypeComponent.prototype.ngOnInit = function () {
        this.masterDataDocumentType = [
            {
                physicalDocumentTypeId: _shared_enums_transaction_document_type_enum__WEBPACK_IMPORTED_MODULE_6__["TransactionDocumentTypes"].Original,
                physicalDocumentTypeLabel: _shared_enums_transaction_document_type_enum__WEBPACK_IMPORTED_MODULE_6__["TransactionDocumentTypes"][_shared_enums_transaction_document_type_enum__WEBPACK_IMPORTED_MODULE_6__["TransactionDocumentTypes"].Original],
            },
            {
                physicalDocumentTypeId: _shared_enums_transaction_document_type_enum__WEBPACK_IMPORTED_MODULE_6__["TransactionDocumentTypes"]['CN/DN'],
                physicalDocumentTypeLabel: _shared_enums_transaction_document_type_enum__WEBPACK_IMPORTED_MODULE_6__["TransactionDocumentTypes"][_shared_enums_transaction_document_type_enum__WEBPACK_IMPORTED_MODULE_6__["TransactionDocumentTypes"]['CN/DN']],
            },
        ];
    };
    DocumentTypeComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            documentDateCtrl: this.documentDateCtrl,
            documentTypeCtrl: this.documentTypeCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    DocumentTypeComponent.prototype.documentDateSelected = function (documentDate) {
        if (!documentDate) {
            this.documentDateCtrl.patchValue('');
            this.documentDateCtrl.clearValidators();
        }
        else {
            this.documentDate = moment(documentDate);
            this.documentDateCtrl.patchValue(documentDate);
        }
    };
    DocumentTypeComponent.prototype.rowSelected = function (rowSelection) {
        if (!rowSelection) {
            this.documentTypeCtrl.patchValue('');
        }
        else {
            this.documentTypeCtrl.patchValue(_shared_enums_transaction_document_type_enum__WEBPACK_IMPORTED_MODULE_6__["TransactionDocumentTypes"].Original);
            this.documentTypeCtrl.updateValueAndValidity();
        }
    };
    DocumentTypeComponent.prototype.onDocumentDateSelected = function () {
        var invoiceDate = new Date(this.documentDateCtrl.value);
        this.documentDateCtrl.clearValidators();
        this.documentDateCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required, Object(_shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_10__["documentDateValidation"])(invoiceDate, this.documentDate)]));
        this.documentDateCtrl.updateValueAndValidity();
    };
    DocumentTypeComponent.prototype.populateEntity = function (entity) {
        var invoiceDetails = entity;
        invoiceDetails.documentType = this.documentTypeCtrl.value;
        invoiceDetails.invoiceDate = this.documentDateCtrl.value;
        return invoiceDetails;
    };
    DocumentTypeComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-document-type',
            template: __webpack_require__(/*! ./document-type.component.html */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/document-type/document-type.component.html"),
            styles: [__webpack_require__(/*! ./document-type.component.scss */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/document-type/document-type.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_8__["MasterdataService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_9__["UtilService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__["FormConfigurationProviderService"]])
    ], DocumentTypeComponent);
    return DocumentTypeComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_4__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/reversal-document-template/reversal-document-template.component.html":
/*!*************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/reversal-document-template/reversal-document-template.component.html ***!
  \*************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"invoice-creation-card\"\r\n          fxFlex=\"100\">\r\n    <mat-card-title>\r\n        <h2>Invoice Document</h2>\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <mat-form-field fxFlex=\"30%\">\r\n                <mat-select [panelWidth]=\"panelSize\"\r\n                            (optionSelected)=\"onExternalInHouseSelected()\"\r\n                            placeholder=\"External/InHouse\"\r\n                            [formControl]=\"invoiceExtInHouseCtrl\"\r\n                            [matTooltip]=\"'External/InHouse'\">\r\n\r\n                    <mat-option *ngFor=\"let info of invoiceSourceType\"\r\n                                [value]=\"info.viewValue\">\r\n                        {{info.viewValue}}\r\n                    </mat-option>\r\n                </mat-select>\r\n\r\n            </mat-form-field>\r\n            <mat-form-field fxFlex=\"60%\">\r\n                <input matInput\r\n                       placeholder=\"External Invoice Reference\"\r\n                       [formControl]=\"invoiceExtRefCtrl\"\r\n                       autocomplete=\"off\">\r\n                <mat-error *ngIf=\"invoiceExtRefCtrl.hasError('required')\">\r\n                    Reference is required\r\n                </mat-error>\r\n                <mat-error *ngIf=\"invoiceExtRefCtrl.hasError('maxlength')\">\r\n                    Must be less than 25 characters\r\n                </mat-error>\r\n                <mat-hint align=\"end\">{{invoiceExtRefCtrl.value.length}} / 25</mat-hint>\r\n                <mat-hint style=\"color:orange\"\r\n                          *ngIf=\"!isUnique\">\r\n                    Reference Number already used\r\n                </mat-hint>\r\n            </mat-form-field>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <mat-form-field fxFlex=\"30%\">\r\n                <mat-select [panelWidth]=\"panelSize\"\r\n                            placeholder=\"Template\"\r\n                            [formControl]=\"invoiceTemplatesCtrl\"\r\n                            (selectionChange)=\"onInvoiceTemplateSelected()\"\r\n                            matTooltip=\"Template\"\r\n                            [required]=\"invoiceTemplatesCtrl.isRequired\">\r\n                    <mat-option></mat-option>\r\n                    <mat-option *ngFor=\"let template of filteredTemplates\"\r\n                                [value]=\"template\">\r\n                        {{template.name}}\r\n                    </mat-option>\r\n                </mat-select>\r\n                <mat-error *ngIf=\"invoiceTemplatesCtrl.hasError('required')\">\r\n                    Template is required\r\n                </mat-error>\r\n            </mat-form-field>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/reversal-document-template/reversal-document-template.component.scss":
/*!*************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/reversal-document-template/reversal-document-template.component.scss ***!
  \*************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/reversal-document-template/reversal-document-template.component.ts":
/*!***********************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/reversal-document-template/reversal-document-template.component.ts ***!
  \***********************************************************************************************************************************************************************/
/*! exports provided: ReversalDocumentTemplateComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReversalDocumentTemplateComponent", function() { return ReversalDocumentTemplateComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../shared/enums/invoice-source-type.enum */ "./Client/app/shared/enums/invoice-source-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/document.service */ "./Client/app/shared/services/http-services/document.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _components_document_template_document_template_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../components/document-template/document-template.component */ "./Client/app/execution/execution-invoicing/components/document-template/document-template.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var ReversalDocumentTemplateComponent = /** @class */ (function (_super) {
    __extends(ReversalDocumentTemplateComponent, _super);
    function ReversalDocumentTemplateComponent(formBuilder, route, documentService, utilService, executionService, formConfigurationProvider) {
        var _this = _super.call(this, formBuilder, route, documentService, utilService, executionService, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.route = route;
        _this.documentService = documentService;
        _this.utilService = utilService;
        _this.executionService = executionService;
        _this.formConfigurationProvider = formConfigurationProvider;
        return _this;
    }
    ReversalDocumentTemplateComponent.prototype.getData = function () {
        this.invoiceExtInHouseCtrl.patchValue(_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_3__["InvoiceSourceType"][_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_3__["InvoiceSourceType"].Inhouse]);
    };
    ReversalDocumentTemplateComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-reversal-document-template',
            template: __webpack_require__(/*! ./reversal-document-template.component.html */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/reversal-document-template/reversal-document-template.component.html"),
            styles: [__webpack_require__(/*! ./reversal-document-template.component.scss */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/reversal-document-template/reversal-document-template.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_5__["DocumentService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__["UtilService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_6__["ExecutionService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_4__["FormConfigurationProviderService"]])
    ], ReversalDocumentTemplateComponent);
    return ReversalDocumentTemplateComponent;
}(_components_document_template_document_template_component__WEBPACK_IMPORTED_MODULE_8__["DocumentTemplateComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/reversal-invoice-selection/reversal-invoice-selection.component.html":
/*!*************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/reversal-invoice-selection/reversal-invoice-selection.component.html ***!
  \*************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"card-header-luke\">\r\n    <mat-card-title>\r\n        <h2> Invoice Selections</h2>\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"none center\"\r\n             fxLayoutGap=\"10px\">\r\n            <div fxFlex=\"33%\"\r\n                 fxFlex.xs=\"33%\"\r\n                 fxFlex.sm=\"33%\">\r\n                <mat-form-field class=\"mat-read-only-field\">\r\n                    <input matInput\r\n                           placeholder=\"Invoice type\"\r\n                           matTooltip=\"Invoice Type\"\r\n                           [formControl]=\"invoiceTypeSelectedCtrl\"\r\n                           autocomplete=\"off\"\r\n                           readonly>\r\n                </mat-form-field>\r\n            </div>\r\n            <div fxFlex=\"33%\"\r\n                 fxFlex.xs=\"33%\"\r\n                 fxFlex.sm=\"33%\">\r\n                <mat-form-field>\r\n                    <input matInput\r\n                           placeholder=\"Costs/Commission\"\r\n                           matTooltip=\"Costs/Commission\"\r\n                           autocomplete=\"off\"\r\n                           [formControl]=\"costsCommissionTypeCtrl\">\r\n                </mat-form-field>\r\n            </div>\r\n            <div fxFlex=\"33%\"\r\n                 fxFlex.xs=\"33%\"\r\n                 fxFlex.sm=\"33%\">\r\n                <mat-form-field class=\"mat-read-only-field\">\r\n                    <input matInput\r\n                           placeholder=\"Quantity to Invoice\"\r\n                           matTooltip=\"Quantity to Invoice\"\r\n                           [formControl]=\"quantityToInvoiceCtrl\"\r\n                           autocomplete=\"off\"\r\n                           readonly>\r\n                </mat-form-field>\r\n            </div>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/reversal-invoice-selection/reversal-invoice-selection.component.scss":
/*!*************************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/reversal-invoice-selection/reversal-invoice-selection.component.scss ***!
  \*************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".card-header-luke {\n  min-height: auto; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/reversal-invoice-selection/reversal-invoice-selection.component.ts":
/*!***********************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/reversal-invoice-selection/reversal-invoice-selection.component.ts ***!
  \***********************************************************************************************************************************************************************/
/*! exports provided: ReversalInvoiceSelectionComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReversalInvoiceSelectionComponent", function() { return ReversalInvoiceSelectionComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var ReversalInvoiceSelectionComponent = /** @class */ (function (_super) {
    __extends(ReversalInvoiceSelectionComponent, _super);
    function ReversalInvoiceSelectionComponent(route, formBuilder, utilService, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.utilService = utilService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.invoiceTypeSelectedCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('invoiceTypeSelected');
        _this.costsCommissionTypeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('costsCommissionSelection');
        _this.quantityToInvoiceCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('quantityToInvoiceSelection');
        _this.selectedInvoiceTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('invoiceTypeId')));
        _this.contract = 'Contract';
        _this.reversalInvoiceTypeName = 'Reversal';
        _this.masterdata = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__["MasterData"]();
        return _this;
    }
    ReversalInvoiceSelectionComponent.prototype.ngOnInit = function () {
        this.invoiceTypeId = Number(decodeURIComponent(this.route.snapshot.paramMap.get('invoiceTypeId')));
        this.masterdata = this.route.snapshot.data.masterdata;
        this.getData();
    };
    ReversalInvoiceSelectionComponent.prototype.getData = function () {
        var _this = this;
        if (this.masterdata) {
            var invoiceType = this.masterdata.
                invoiceTypes.find(function (invoice) { return invoice.invoiceTypeId === _this.invoiceTypeId; });
            if (invoiceType) {
                this.invoiceTypeName = invoiceType.name;
                this.invoiceTypeSelectedCtrl.patchValue(this.invoiceTypeName);
            }
        }
        this.costsCommissionTypeCtrl.disable();
        this.quantityToInvoiceCtrl.setValue(this.contract);
    };
    ReversalInvoiceSelectionComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            invoiceTypeSelectedCtrl: this.invoiceTypeSelectedCtrl,
            costsCommissionTypeCtrl: this.costsCommissionTypeCtrl,
            quantityToInvoiceCtrl: this.quantityToInvoiceCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    ReversalInvoiceSelectionComponent.prototype.populateEntity = function (entity) {
        var invoiceType = entity;
        invoiceType.invoiceType = this.invoiceTypeId;
        invoiceType.quantityToInvoice = this.quantityToInvoiceCtrl.value;
        return invoiceType;
    };
    ReversalInvoiceSelectionComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-reversal-invoice-selection',
            template: __webpack_require__(/*! ./reversal-invoice-selection.component.html */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/reversal-invoice-selection/reversal-invoice-selection.component.html"),
            styles: [__webpack_require__(/*! ./reversal-invoice-selection.component.scss */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/reversal-invoice-selection/reversal-invoice-selection.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__["UtilService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__["FormConfigurationProviderService"]])
    ], ReversalInvoiceSelectionComponent);
    return ReversalInvoiceSelectionComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/reversal-selection.component.html":
/*!***************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/reversal-selection.component.html ***!
  \***************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<atlas-reversal-invoice-selection #invoiceSelectionComponent></atlas-reversal-invoice-selection>\r\n<atlas-document-search #documentSearchComponent\r\n                       (documentTypeSelected)=\"documentTypeSelected($event)\"\r\n                       (documentDateSelected)=\"documentDateSelected($event)\"\r\n                       (rowSelected)=\"onRowSelected($event)\">\r\n</atlas-document-search>\r\n<div fxLayout=\"row wrap\"\r\n     fxLayoutAlign=\"space-between\"\r\n     fxLayoutAlign.lt-md=\"space-around center\">\r\n    <div fxLayout=\"column\"\r\n         fxLayoutAlign=\"start\"\r\n         fxFlex=\"49\">\r\n        <atlas-document-type #documentTypeComponent></atlas-document-type>\r\n    </div>\r\n    <div fxLayout=\"column\"\r\n         fxLayoutAlign=\"start\"\r\n         fxFlex=\"49\">\r\n        <atlas-reversal-document-template #documentTemplateComponent\r\n                                          (templateSelected)=\"onTemplateSelected($event)\"\r\n                                          [documentType]=\"DocumentTypes.InvoiceCancellation\">\r\n        </atlas-reversal-document-template>\r\n    </div>\r\n</div>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/reversal-selection.component.scss":
/*!***************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/reversal-selection.component.scss ***!
  \***************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/reversal-selection.component.ts":
/*!*************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/reversal-selection.component.ts ***!
  \*************************************************************************************************************************/
/*! exports provided: ReversalSelectionComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReversalSelectionComponent", function() { return ReversalSelectionComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/enums/document-type.enum */ "./Client/app/shared/enums/document-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _components_document_search_document_search_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./components/document-search/document-search.component */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/document-search/document-search.component.ts");
/* harmony import */ var _components_document_type_document_type_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./components/document-type/document-type.component */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/document-type/document-type.component.ts");
/* harmony import */ var _components_reversal_document_template_reversal_document_template_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./components/reversal-document-template/reversal-document-template.component */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/reversal-document-template/reversal-document-template.component.ts");
/* harmony import */ var _components_reversal_invoice_selection_reversal_invoice_selection_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./components/reversal-invoice-selection/reversal-invoice-selection.component */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/reversal-invoice-selection/reversal-invoice-selection.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var ReversalSelectionComponent = /** @class */ (function (_super) {
    __extends(ReversalSelectionComponent, _super);
    function ReversalSelectionComponent(formBuilder, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.formComponents = [];
        _this.templateSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.rowSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.DocumentTypes = _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_3__["DocumentTypes"];
        return _this;
    }
    ReversalSelectionComponent.prototype.ngOnInit = function () {
        this.invoiceSelectionFormGroup = this.formBuilder.group({
            invoiceSelectionComponent: this.invoiceSelectionComponent.getFormGroup(),
            documentSearchComponent: this.documentSearchComponent.getFormGroup(),
            documentTypeComponent: this.documentTypeComponent.getFormGroup(),
            documentTemplateComponent: this.documentTemplateComponent.getFormGroup(),
        });
        this.formComponents.push(this.invoiceSelectionComponent, this.documentSearchComponent, this.documentTypeComponent, this.documentTemplateComponent);
    };
    ReversalSelectionComponent.prototype.documentTypeSelected = function (documentTypeId) {
        this.documentTypeComponent.documentTypeCtrl.patchValue(documentTypeId);
    };
    ReversalSelectionComponent.prototype.documentDateSelected = function (documentDate) {
        this.documentTypeComponent.documentDateSelected(documentDate);
    };
    ReversalSelectionComponent.prototype.onRowSelected = function (row) {
        this.updateInhouseExternalStatus(row.data);
        this.documentTypeComponent.rowSelected(row.isRowSelected);
        this.rowSelected.emit(row);
    };
    ReversalSelectionComponent.prototype.populateEntity = function (model) {
        this.formComponents.forEach(function (comp) {
            comp.populateEntity(model);
        });
        return model;
    };
    ReversalSelectionComponent.prototype.onTemplateSelected = function (event) {
        this.templateSelected.emit(event);
    };
    ReversalSelectionComponent.prototype.updateInhouseExternalStatus = function (data) {
        if (data) {
            this.documentTemplateComponent.updateInhouseExternalStatus(data.invoiceTypeId);
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], ReversalSelectionComponent.prototype, "templateSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], ReversalSelectionComponent.prototype, "rowSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('invoiceSelectionComponent'),
        __metadata("design:type", _components_reversal_invoice_selection_reversal_invoice_selection_component__WEBPACK_IMPORTED_MODULE_8__["ReversalInvoiceSelectionComponent"])
    ], ReversalSelectionComponent.prototype, "invoiceSelectionComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('documentSearchComponent'),
        __metadata("design:type", _components_document_search_document_search_component__WEBPACK_IMPORTED_MODULE_5__["DocumentSearchComponent"])
    ], ReversalSelectionComponent.prototype, "documentSearchComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('documentTypeComponent'),
        __metadata("design:type", _components_document_type_document_type_component__WEBPACK_IMPORTED_MODULE_6__["DocumentTypeComponent"])
    ], ReversalSelectionComponent.prototype, "documentTypeComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('documentTemplateComponent'),
        __metadata("design:type", _components_reversal_document_template_reversal_document_template_component__WEBPACK_IMPORTED_MODULE_7__["ReversalDocumentTemplateComponent"])
    ], ReversalSelectionComponent.prototype, "documentTemplateComponent", void 0);
    ReversalSelectionComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-reversal-selection',
            template: __webpack_require__(/*! ./reversal-selection.component.html */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/reversal-selection.component.html"),
            styles: [__webpack_require__(/*! ./reversal-selection.component.scss */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/reversal-selection.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_4__["FormConfigurationProviderService"]])
    ], ReversalSelectionComponent);
    return ReversalSelectionComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/reversal/components/reversal-summary/reversal-summary.component.html":
/*!***********************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/reversal/components/reversal-summary/reversal-summary.component.html ***!
  \***********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"main-container\"\r\n     [ngSwitch]=\"invoiceTypeId\">\r\n    <atlas-commercial-summary #commercialSummaryComponent\r\n                              [defaultVATCode]=\"defaultVATCode\"\r\n                              *ngSwitchDefault\r\n                              [isCreationMode]=isCreationMode></atlas-commercial-summary>\r\n    <atlas-cost-summary #costSummaryComponent\r\n                        [defaultVATCode]=\"defaultVATCode\"\r\n                        *ngSwitchCase=InvoiceTypes.Cost></atlas-cost-summary>\r\n    <atlas-cost-summary #costSummaryComponent\r\n                        [defaultVATCode]=\"defaultVATCode\"\r\n                        *ngSwitchCase=InvoiceTypes.CostReceivable></atlas-cost-summary>\r\n    <atlas-cost-summary #costSummaryComponent\r\n                        [defaultVATCode]=\"defaultVATCode\"\r\n                        *ngSwitchCase=InvoiceTypes.CostDebitNote></atlas-cost-summary>\r\n    <atlas-cost-summary #costSummaryComponent\r\n                        [defaultVATCode]=\"defaultVATCode\"\r\n                        *ngSwitchCase=InvoiceTypes.CostCreditNote></atlas-cost-summary>\r\n    <atlas-goods-cost-summary #goodsCostSummaryComponent\r\n                              [defaultVATCode]=\"defaultVATCode\"\r\n                              *ngSwitchCase=InvoiceTypes.GoodsCostPurchase></atlas-goods-cost-summary>\r\n    <atlas-goods-cost-summary #goodsCostSummaryComponent\r\n                              [defaultVATCode]=\"defaultVATCode\"\r\n                              *ngSwitchCase=InvoiceTypes.GoodsCostSales></atlas-goods-cost-summary>\r\n    <atlas-washout-summary #washoutSummaryComponent\r\n                           [defaultVATCode]=\"defaultVATCode\"\r\n                           *ngSwitchCase=InvoiceTypes.Washout></atlas-washout-summary>\r\n</div>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/reversal/components/reversal-summary/reversal-summary.component.scss":
/*!***********************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/reversal/components/reversal-summary/reversal-summary.component.scss ***!
  \***********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/reversal/components/reversal-summary/reversal-summary.component.ts":
/*!*********************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/reversal/components/reversal-summary/reversal-summary.component.ts ***!
  \*********************************************************************************************************************/
/*! exports provided: ReversalSummaryComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReversalSummaryComponent", function() { return ReversalSummaryComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _commercial_components_summary_commercial_summary_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../commercial/components/summary/commercial-summary.component */ "./Client/app/execution/execution-invoicing/commercial/components/summary/commercial-summary.component.ts");
/* harmony import */ var _cost_components_summary_cost_summary_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../cost/components/summary/cost-summary.component */ "./Client/app/execution/execution-invoicing/cost/components/summary/cost-summary.component.ts");
/* harmony import */ var _goods_cost_components_goods_cost_summary_goods_cost_summary_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../goods-cost/components/goods-cost-summary/goods-cost-summary.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-summary/goods-cost-summary.component.ts");
/* harmony import */ var _washout_components_washout_summary_washout_summary_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../washout/components/washout-summary/washout-summary.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-summary/washout-summary.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};











var ReversalSummaryComponent = /** @class */ (function (_super) {
    __extends(ReversalSummaryComponent, _super);
    function ReversalSummaryComponent(route, snackbarService, dialog, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.snackbarService = snackbarService;
        _this.dialog = dialog;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.invoiceTypeId = 0;
        _this.InvoiceTypes = _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_4__["InvoiceTypes"];
        _this.isFromGrid = false;
        _this.invoiceId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('invoiceId')));
        return _this;
    }
    ReversalSummaryComponent.prototype.ngOnInit = function () {
    };
    ReversalSummaryComponent.prototype.populateInvoiceRecord = function (invoice, invoiceSetup) {
        this.defaultVATCode = invoiceSetup.defaultVATCode;
        if (invoice) {
            switch (this.invoiceTypeId) {
                case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_4__["InvoiceTypes"].Purchase:
                    this.commercialSummaryComponent.setSummaryFieldsFromGrid(invoice);
                    break;
                case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_4__["InvoiceTypes"].Sales:
                    this.commercialSummaryComponent.setSummaryFieldsFromGrid(invoice);
                    break;
                case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_4__["InvoiceTypes"].GoodsCostPurchase:
                    this.goodsCostSummaryComponent.setSummaryFieldsFromGrid(invoice);
                    break;
                case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_4__["InvoiceTypes"].GoodsCostSales:
                    this.goodsCostSummaryComponent.setSummaryFieldsFromGrid(invoice);
                    break;
                case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_4__["InvoiceTypes"].Cost:
                case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_4__["InvoiceTypes"].CostReceivable:
                case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_4__["InvoiceTypes"].CostDebitNote:
                case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_4__["InvoiceTypes"].CostCreditNote:
                    this.costSummaryComponent.setSummaryFieldsFromGrid(invoice);
                    break;
                case _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_4__["InvoiceTypes"].Washout:
                    this.washoutSummaryComponent.setSummaryFieldsFromGrid(invoice);
                    break;
                default: // throw Action not recognized exception
                    break;
            }
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('commercialSummaryComponent'),
        __metadata("design:type", _commercial_components_summary_commercial_summary_component__WEBPACK_IMPORTED_MODULE_7__["CommercialSummaryComponent"])
    ], ReversalSummaryComponent.prototype, "commercialSummaryComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('costSummaryComponent'),
        __metadata("design:type", _cost_components_summary_cost_summary_component__WEBPACK_IMPORTED_MODULE_8__["CostSummaryComponent"])
    ], ReversalSummaryComponent.prototype, "costSummaryComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('goodsCostSummaryComponent'),
        __metadata("design:type", _goods_cost_components_goods_cost_summary_goods_cost_summary_component__WEBPACK_IMPORTED_MODULE_9__["GoodsCostSummaryComponent"])
    ], ReversalSummaryComponent.prototype, "goodsCostSummaryComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('washoutSummaryComponent'),
        __metadata("design:type", _washout_components_washout_summary_washout_summary_component__WEBPACK_IMPORTED_MODULE_10__["WashoutSummaryComponent"])
    ], ReversalSummaryComponent.prototype, "washoutSummaryComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Boolean)
    ], ReversalSummaryComponent.prototype, "isCreationMode", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Number)
    ], ReversalSummaryComponent.prototype, "invoiceTypeId", void 0);
    ReversalSummaryComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-reversal-summary',
            template: __webpack_require__(/*! ./reversal-summary.component.html */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-summary/reversal-summary.component.html"),
            styles: [__webpack_require__(/*! ./reversal-summary.component.scss */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-summary/reversal-summary.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_6__["SnackbarService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_1__["MatDialog"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_5__["FormConfigurationProviderService"]])
    ], ReversalSummaryComponent);
    return ReversalSummaryComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/reversal/reversal.component.html":
/*!***********************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/reversal/reversal.component.html ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<form [formGroup]=\"inverseReversalFormGroup\">\r\n    <div class=\"main-container\">\r\n        <mat-horizontal-stepper [linear]\r\n                                (selectionChange)=\"onChangeStepAction($event)\"\r\n                                #stepper>\r\n            <ng-template matStepperIcon=\"edit\">\r\n                <mat-icon>check</mat-icon>\r\n            </ng-template>\r\n            <mat-step>\r\n                <ng-template matStepLabel>Document Selection Screen</ng-template>\r\n                <div>\r\n                    <atlas-reversal-selection #reversalSelectionComponent\r\n                                              (templateSelected)=\"onDocumentTemplateSelected($event)\"\r\n                                              (rowSelected)=\"onRowSelected($event)\">\r\n                    </atlas-reversal-selection>\r\n                    <div fxLayout=\"row\"\r\n                         fxLayoutAlign=\"end start\">\r\n                        <mat-slide-toggle [formControl]=\"previewDocumentCtrl\"\r\n                                          *ngIf=\"hasTemplate\">Preview Document</mat-slide-toggle>\r\n                    </div>\r\n                </div>\r\n                <div fxLayout=\"row \"\r\n                     fxLayoutAlign=\"space-between start\"\r\n                     class=\"button-details\">\r\n                    <button (click)=\"onDiscardButtonClicked()\"\r\n                            mat-button>\r\n                        DISCARD\r\n                    </button>\r\n                    <div fxLayout=\"column \"\r\n                         fxLayoutAlign=\"start end \">\r\n                        <div fxLayout=\"row \"\r\n                             fxLayoutAlign=\"end start \">\r\n                            <button mat-raised-button\r\n                                    *ifAuthorized=\"'Invoices.InvoiceCreation', company:company, level: PermissionLevels.ReadWrite\"\r\n                                    (click)=\"onOpenDialogOnPreviewAndReverseClicked()\"\r\n                                    [disabled]=\"isLoading\">\r\n                                {{ previewDocumentCtrl.value ? \"Preview and Reverse\" : \"Reverse\" }}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </mat-step>\r\n            <mat-step>\r\n                <ng-template matStepLabel>Invoice Summary Page</ng-template>\r\n                <atlas-reversal-summary #reversalSummaryComponent\r\n                                        [isCreationMode]=\"isCreationMode\"\r\n                                        [invoiceTypeId]=\"originalInvoiceType\">\r\n                </atlas-reversal-summary>\r\n\r\n                <div class=\"btn-container\">\r\n                    <div fxLayout=\"row\"\r\n                         fxAlignLayout=\"start end\">\r\n                        <span class=\"fill-space\"></span>\r\n                        <button mat-button\r\n                                (click)=\"newSearchButtonClicked()\">\r\n                            New Search\r\n                        </button>\r\n                        <button mat-raised-button\r\n                                (click)=\"onNextInvoiceButtonClicked()\">\r\n                            Next Invoice\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </mat-step>\r\n        </mat-horizontal-stepper>\r\n    </div>\r\n</form>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/reversal/reversal.component.scss":
/*!***********************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/reversal/reversal.component.scss ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".mat-stepper-horizontal {\n  background-color: transparent; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/reversal/reversal.component.ts":
/*!*********************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/reversal/reversal.component.ts ***!
  \*********************************************************************************/
/*! exports provided: ReversalComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReversalComponent", function() { return ReversalComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/entities/window-injection-token */ "./Client/app/shared/entities/window-injection-token.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../shared/enums/permission-level.enum */ "./Client/app/shared/enums/permission-level.enum.ts");
/* harmony import */ var _shared_services_document_popup_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../shared/services/document-popup.service */ "./Client/app/shared/services/document-popup.service.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../shared/services/http-services/document.service */ "./Client/app/shared/services/http-services/document.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_preaccounting_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../shared/services/http-services/preaccounting.service */ "./Client/app/shared/services/http-services/preaccounting.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _invoicing_base_form_invoicing_base_form_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../invoicing-base-form/invoicing-base-form.component */ "./Client/app/execution/execution-invoicing/invoicing-base-form/invoicing-base-form.component.ts");
/* harmony import */ var _components_reversal_selection_reversal_selection_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./components/reversal-selection/reversal-selection.component */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/reversal-selection.component.ts");
/* harmony import */ var _components_reversal_summary_reversal_summary_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./components/reversal-summary/reversal-summary.component */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-summary/reversal-summary.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};





















var ReversalComponent = /** @class */ (function (_super) {
    __extends(ReversalComponent, _super);
    /*
    -----------------------------------------------------------------------------------------------------------------------------------
    GLOBAL FUNCTIONS
    -----------------------------------------------------------------------------------------------------------------------------------
    */
    function ReversalComponent(dialog, router, companyManager, snackbarService, documentService, window, utilService, executionService, route, formBuilder, preaccountingService, formConfigurationProvider, documentPopupService) {
        var _this = _super.call(this, dialog, router, companyManager, snackbarService, documentService, window, utilService, executionService, route, formBuilder, preaccountingService, formConfigurationProvider, documentPopupService) || this;
        _this.dialog = dialog;
        _this.router = router;
        _this.companyManager = companyManager;
        _this.snackbarService = snackbarService;
        _this.documentService = documentService;
        _this.window = window;
        _this.utilService = utilService;
        _this.executionService = executionService;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.preaccountingService = preaccountingService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.documentPopupService = documentPopupService;
        _this.formComponents = [];
        _this.InvoiceTypes = _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_9__["InvoiceTypes"];
        _this.currentStep = 0;
        _this.PermissionLevels = _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_10__["PermissionLevels"];
        _this.invoicingSteps = {
            invoiceCreationStep: 0,
            summaryStep: 1,
        };
        _this.isCreateInvoiceButtonClicked = false;
        _this.isCreationMode = true;
        _this.isSave = false;
        _this.isInvoiceSelected = false;
        _this.invoiceTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('invoiceTypeId')));
        _this.company = _this.companyManager.getCurrentCompanyId();
        return _this;
    }
    ReversalComponent.prototype.ngOnInit = function () {
        this.company = this.route.snapshot.paramMap.get('company');
        this.inverseReversalFormGroup = this.formBuilder.group({
            reversalSelectionComponent: this.reversalSelectionComponent.getFormGroup(),
        });
        this.formComponents.push(this.reversalSelectionComponent);
        this.getInvoiceSetupByCompany();
    };
    ReversalComponent.prototype.unloadNotification = function ($event) {
        if (this.reversalSelectionComponent.invoiceSelectionFormGroup.dirty && this.isSave === false) {
            $event.returnValue = true;
        }
    };
    ReversalComponent.prototype.onChangeStepAction = function (event) {
        this.currentStep = event.selectedIndex;
    };
    ReversalComponent.prototype.getInvoiceSetupByCompany = function () {
    };
    ReversalComponent.prototype.onDiscardButtonClicked = function () {
        var _this = this;
        var confirmDialog = this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_7__["ConfirmationDialogComponent"], {
            data: {
                title: 'Discard Changes',
                text: 'You have some modification pending. Close and lose changes?',
                okButton: 'Ok',
                cancelButton: 'Cancel',
            },
        });
        confirmDialog.afterClosed().subscribe(function (answer) {
            if (answer) {
                _this.goToInvoiceHome();
            }
        });
    };
    ReversalComponent.prototype.newSearchButtonClicked = function () {
        this.router.navigate(['/' + this.companyManager.getCurrentCompanyId() + '/execution/invoicing/new']);
    };
    ReversalComponent.prototype.onNextInvoiceButtonClicked = function () {
        var searchContractRef = '';
        var searchCounterParty = '';
        var searchCharterRef = '';
        var searchInvoiceRef = '';
        var invoiceType = 0;
        searchContractRef = this.reversalSelectionComponent.documentSearchComponent.searchContractReference;
        searchCounterParty = this.reversalSelectionComponent.documentSearchComponent.searchCounterParty;
        searchCharterRef = this.reversalSelectionComponent.documentSearchComponent.saveCharterReference;
        searchInvoiceRef = this.reversalSelectionComponent.documentSearchComponent.searchInvoiceReference;
        invoiceType = this.reversalSelectionComponent.
            documentSearchComponent.invoiceType;
        this.router.navigate(['/' + this.companyManager.getCurrentCompanyId() +
                '/execution/invoicing/' + encodeURIComponent(invoiceType.toString())], {
            queryParams: {
                savedContractReference: searchContractRef, savedCounterParty: searchCounterParty,
                savedCharterReference: searchCharterRef, savedInvoiceReference: searchInvoiceRef,
            },
            skipLocationChange: true,
        });
    };
    ReversalComponent.prototype.goToInvoiceHome = function () {
        this.router.navigate(['/' + this.companyManager.getCurrentCompanyId() + '/execution/invoicing/home']);
    };
    ReversalComponent.prototype.beforeInvoiceActions = function (invoiceRecord) {
        this.originalInvoiceId = invoiceRecord.invoiceId;
    };
    ReversalComponent.prototype.afterInvoiceActions = function (invoiceRecord) {
        var _this = this;
        this.isLoading = true;
        this.stepper.next();
        var documentDate = this.reversalSelectionComponent.documentTypeComponent.
            getFormGroup().value.documentDateCtrl;
        this.subscriptions.push(Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["forkJoin"])([this.executionService.getInvoiceById(this.originalInvoiceId),
            this.executionService.getInvoiceSetupByCompany()])
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["finalize"])(function () {
            _this.isLoading = false;
        }))
            .subscribe(function (_a) {
            var _b = __read(_a, 2), invoice = _b[0], setup = _b[1];
            invoice.invoiceDate = documentDate;
            _this.reversalSummaryComponent.populateInvoiceRecord(invoice, setup);
        }));
    };
    ReversalComponent.prototype.onOpenDialogOnPreviewAndReverseClicked = function () {
        // variable which checks for existing template (To be set once template card is implemented)
        this.isSave = true;
        this.isLoading = true;
        if (this.invoiceTypeId !== _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_9__["InvoiceTypes"].Cost) {
            if (this.reversalSelectionComponent.invoiceSelectionFormGroup.valid && this.isInvoiceSelected) {
                this.showConfirmationModal(this.hasTemplate && this.previewDocumentCtrl.value);
            }
            else {
                this.snackbarService.informationSnackBar('Form is invalid. Please resolve the errors and/or select invoice to reverse.');
                this.isLoading = false;
            }
        }
    };
    ReversalComponent.prototype.onRowSelected = function (row) {
        this.isInvoiceSelected = row.isRowSelected;
        if (row.data) {
            this.originalInvoiceType = row.data.invoiceTypeId;
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('reversalSelectionComponent'),
        __metadata("design:type", _components_reversal_selection_reversal_selection_component__WEBPACK_IMPORTED_MODULE_19__["ReversalSelectionComponent"])
    ], ReversalComponent.prototype, "reversalSelectionComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('reversalSummaryComponent'),
        __metadata("design:type", _components_reversal_summary_reversal_summary_component__WEBPACK_IMPORTED_MODULE_20__["ReversalSummaryComponent"])
    ], ReversalComponent.prototype, "reversalSummaryComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('stepper'),
        __metadata("design:type", _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatStepper"])
    ], ReversalComponent.prototype, "stepper", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"])('window:beforeunload', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], ReversalComponent.prototype, "unloadNotification", null);
    ReversalComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-reversal',
            template: __webpack_require__(/*! ./reversal.component.html */ "./Client/app/execution/execution-invoicing/reversal/reversal.component.html"),
            styles: [__webpack_require__(/*! ./reversal.component.scss */ "./Client/app/execution/execution-invoicing/reversal/reversal.component.scss")],
        }),
        __param(5, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_8__["WINDOW"])),
        __metadata("design:paramtypes", [_angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_6__["CompanyManagerService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_16__["SnackbarService"],
            _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_13__["DocumentService"],
            Window,
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_17__["UtilService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_14__["ExecutionService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_preaccounting_service__WEBPACK_IMPORTED_MODULE_15__["PreaccountingService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_12__["FormConfigurationProviderService"],
            _shared_services_document_popup_service__WEBPACK_IMPORTED_MODULE_11__["DocumentPopupService"]])
    ], ReversalComponent);
    return ReversalComponent;
}(_invoicing_base_form_invoicing_base_form_component__WEBPACK_IMPORTED_MODULE_18__["InvoicingBaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/total-amount/total-amount.component.html":
/*!*******************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/total-amount/total-amount.component.html ***!
  \*******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"invoice-creation-card\"\r\n          fxFlex=\"100\">\r\n    <mat-card-header>\r\n        <mat-card-title>\r\n            <h2>Total Amount</h2>\r\n        </mat-card-title>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n        <div fxFlex\r\n             class=\"total-box\">\r\n            <mat-card-subtitle class=\"total-figure\">Total Invoice Value (Amount to {{invoiceLabel}}):\r\n                <span class=\"total-figure-value\">{{totalCostDirectionSign}}{{formatAmount(amount)}}\r\n                    {{currencyCode}}</span>\r\n            </mat-card-subtitle>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/total-amount/total-amount.component.scss":
/*!*******************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/total-amount/total-amount.component.scss ***!
  \*******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/total-amount/total-amount.component.ts":
/*!*****************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/total-amount/total-amount.component.ts ***!
  \*****************************************************************************************/
/*! exports provided: TotalAmountComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TotalAmountComponent", function() { return TotalAmountComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../shared/enums/cost-direction-type.enum */ "./Client/app/shared/enums/cost-direction-type.enum.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../shared/enums/cost-sign.enum */ "./Client/app/shared/enums/cost-sign.enum.ts");
/* harmony import */ var _shared_enums_invoice_payment_type__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/enums/invoice-payment-type */ "./Client/app/shared/enums/invoice-payment-type.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var TotalAmountComponent = /** @class */ (function (_super) {
    __extends(TotalAmountComponent, _super);
    function TotalAmountComponent(formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.formatType = 'en-US';
        _this.defaultDecimalOption = 2;
        _this.costDirectionDisplay = '';
        return _this;
    }
    TotalAmountComponent.prototype.ngOnInit = function () {
        this.costDirections = [
            {
                costDirectionId: _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable,
                costDirection: 'Pay',
            },
            {
                costDirectionId: _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Receivable,
                costDirection: 'Receive',
            },
        ];
    };
    TotalAmountComponent.prototype.unloadNotification = function ($event) {
        if (this.formGroup.dirty) {
            $event.returnValue = true;
        }
    };
    TotalAmountComponent.prototype.formatAmount = function (input) {
        var formattedInput = new Intl.NumberFormat(this.formatType, { minimumFractionDigits: this.decimalOption }).format(input);
        return formattedInput.toLocaleString();
    };
    TotalAmountComponent.prototype.setTotalAmountForSummary = function (summaryRecord) {
        this.amount = summaryRecord.amount;
        this.currencyCode = summaryRecord.currencyCode;
        this.decimalOption = this.defaultDecimalOption;
        this.costDirectionDisplay = summaryRecord.costDirection;
        this.totalCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_4__["CostSigns"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__["CostDirectionType"][summaryRecord.costDirection]];
        this.invoiceLabel = _shared_enums_invoice_payment_type__WEBPACK_IMPORTED_MODULE_5__["InvoicePaymentType"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__["CostDirectionType"][summaryRecord.costDirection]];
    };
    TotalAmountComponent.prototype.setValuesForTotal = function (model) {
        this.amount = model.amount;
        this.decimalOption = model.decimalOption;
        this.currencyCode = model.currencyCode;
        this.costDirectionDisplay = model.costDirection;
    };
    TotalAmountComponent.prototype.setValuesForTotalFromGrid = function (model) {
        this.amount = model.totalInvoiceValue;
        this.decimalOption = this.defaultDecimalOption;
        this.currencyCode = model.currency;
        (model.invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_6__["InvoiceTypes"].Purchase || model.invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_6__["InvoiceTypes"].Sales) ?
            this.setCostDirection(model) : this.calculateCostDirection(model.summaryLines);
    };
    TotalAmountComponent.prototype.setCostDirection = function (model) {
        (model.invoiceType === _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_6__["InvoiceTypes"].Purchase) ? this.totalCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_4__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable] :
            this.totalCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_4__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Receivable];
        this.invoiceLabel = _shared_enums_invoice_payment_type__WEBPACK_IMPORTED_MODULE_5__["InvoicePaymentType"][_shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_4__["CostSigns"][this.totalCostDirectionSign]];
    };
    TotalAmountComponent.prototype.calculateCostDirection = function (contracts) {
        var _this = this;
        var totalCR = 0;
        var totalDR = 0;
        var costDirectionId;
        contracts.forEach(function (contract) {
            costDirectionId = _this.getCostDirectionIdFromCode(contract.costDirection);
            if (costDirectionId === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable) {
                totalCR = totalCR + contract.lineAmount;
            }
            else {
                totalDR = totalDR + contract.lineAmount;
            }
        });
        if (totalCR > totalDR) {
            this.costDirectionDisplay = _shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__["CostDirectionType"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__["CostDirectionType"].Cr];
            this.totalCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_4__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable];
        }
        else {
            this.costDirectionDisplay = _shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__["CostDirectionType"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__["CostDirectionType"].Dr];
            this.totalCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_4__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Receivable];
        }
    };
    TotalAmountComponent.prototype.getCostDirectionIdFromCode = function (code) {
        if (code) {
            var selectedCostDirection = this.costDirections.find(function (e) { return e.costDirection === code; });
            this.invoiceLabel = selectedCostDirection.costDirection;
            return selectedCostDirection.costDirectionId;
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"])('window:beforeunload', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], TotalAmountComponent.prototype, "unloadNotification", null);
    TotalAmountComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-total-amount',
            template: __webpack_require__(/*! ./total-amount.component.html */ "./Client/app/execution/execution-invoicing/total-amount/total-amount.component.html"),
            styles: [__webpack_require__(/*! ./total-amount.component.scss */ "./Client/app/execution/execution-invoicing/total-amount/total-amount.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__["FormConfigurationProviderService"]])
    ], TotalAmountComponent);
    return TotalAmountComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_1__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/decimals/decimals.component.html":
/*!***********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/decimals/decimals.component.html ***!
  \***********************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"invoice-creation-card\">\r\n    <mat-card-header>\r\n        <mat-card-title>\r\n            <h2>Decimals</h2>\r\n        </mat-card-title>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <mat-form-field fxFlex=\"20%\">\r\n                <mat-select placeholder=\"Decimals\"\r\n                            [matTooltip]=\"'Decimals'\"\r\n                            [formControl]=\"decimalOptionsCtrl\"\r\n                            (selectionChange)='onDecimalOptionSelected()'>\r\n                    <mat-option *ngFor=\"let decimal of decimalOptions\"\r\n                                [value]=\"decimal\">{{decimal}}</mat-option>\r\n                </mat-select>\r\n            </mat-form-field>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/decimals/decimals.component.scss":
/*!***********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/decimals/decimals.component.scss ***!
  \***********************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/decimals/decimals.component.ts":
/*!*********************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/decimals/decimals.component.ts ***!
  \*********************************************************************************************************************************/
/*! exports provided: DecimalsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DecimalsComponent", function() { return DecimalsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var DecimalsComponent = /** @class */ (function (_super) {
    __extends(DecimalsComponent, _super);
    function DecimalsComponent(route, formBuilder, masterdataService, utilService, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.masterdataService = masterdataService;
        _this.utilService = utilService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.decimalOptionSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.decimalOptionsCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('decimalOptions', 2);
        _this.decimalOptions = [2, 3, 4, 5, 6, 7, 8, 9, 10];
        return _this;
    }
    DecimalsComponent.prototype.ngOnInit = function () {
        this.masterdata = this.route.snapshot.data.masterdata;
        this.bindConfiguration();
        this.emitDecimalOptions();
    };
    DecimalsComponent.prototype.onDecimalOptionSelected = function () {
        this.emitDecimalOptions();
    };
    DecimalsComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            decimalOptionsCtrl: this.decimalOptionsCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    DecimalsComponent.prototype.emitDecimalOptions = function () {
        this.decimalOptionSelected.emit({
            decimalOption: Number(this.decimalOptionsCtrl.value),
        });
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], DecimalsComponent.prototype, "decimalOptionSelected", void 0);
    DecimalsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-decimals',
            template: __webpack_require__(/*! ./decimals.component.html */ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/decimals/decimals.component.html"),
            styles: [__webpack_require__(/*! ./decimals.component.scss */ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/decimals/decimals.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"], _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_6__["MasterdataService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__["UtilService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_5__["FormConfigurationProviderService"]])
    ], DecimalsComponent);
    return DecimalsComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/invoice-type-selection/invoice-type-selection.component.html":
/*!***************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/invoice-type-selection/invoice-type-selection.component.html ***!
  \***************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"card-header-luke\">\r\n    <mat-card-header>\r\n        <mat-card-title>\r\n            <h2>Invoice Selection</h2>\r\n        </mat-card-title>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"none center\"\r\n             fxLayoutGap=\"10px\">\r\n            <div fxFlex=\"33%\"\r\n                 fxFlex.xs=\"33%\"\r\n                 fxFlex.sm=\"33%\">\r\n                <mat-form-field class=\"mat-read-only-field\">\r\n                    <input matInput\r\n                           placeholder=\"Invoice type\"\r\n                           [matTooltip]=\"'Invoice Type'\"\r\n                           [formControl]=\"invoiceTypeSelectedCtrl\"\r\n                           autocomplete=\"off\"\r\n                           readonly>\r\n                </mat-form-field>\r\n            </div>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/invoice-type-selection/invoice-type-selection.component.scss":
/*!***************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/invoice-type-selection/invoice-type-selection.component.scss ***!
  \***************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".card-header-luke {\n  min-height: auto; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/invoice-type-selection/invoice-type-selection.component.ts":
/*!*************************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/invoice-type-selection/invoice-type-selection.component.ts ***!
  \*************************************************************************************************************************************************************/
/*! exports provided: InvoiceTypeSelectionComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InvoiceTypeSelectionComponent", function() { return InvoiceTypeSelectionComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var InvoiceTypeSelectionComponent = /** @class */ (function (_super) {
    __extends(InvoiceTypeSelectionComponent, _super);
    function InvoiceTypeSelectionComponent(route, formBuilder, utilService, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.utilService = utilService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.invoiceTypeSelectedCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('invoiceWashoutTypeSelected');
        _this.masterdata = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__["MasterData"]();
        return _this;
    }
    InvoiceTypeSelectionComponent.prototype.ngOnInit = function () {
        this.masterdata = this.route.snapshot.data.masterdata;
        this.getData();
    };
    InvoiceTypeSelectionComponent.prototype.getData = function () {
        var _this = this;
        this.invoiceTypeId = Number(decodeURIComponent(this.route.snapshot.paramMap.get('invoiceTypeId')));
        this.invoiceTypeDescription = this.masterdata.
            invoiceTypes.find(function (invoiceType) { return invoiceType.invoiceTypeId === _this.invoiceTypeId; }).name;
        this.invoiceTypeSelectedCtrl.patchValue(this.invoiceTypeDescription);
    };
    InvoiceTypeSelectionComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            invoiceTypeSelectedCtrl: this.invoiceTypeSelectedCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    InvoiceTypeSelectionComponent.prototype.populateEntity = function (entity) {
        var invoiceType = entity;
        invoiceType.invoiceType = this.invoiceTypeId;
        return invoiceType;
    };
    InvoiceTypeSelectionComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-invoice-type-selection',
            template: __webpack_require__(/*! ./invoice-type-selection.component.html */ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/invoice-type-selection/invoice-type-selection.component.html"),
            styles: [__webpack_require__(/*! ./invoice-type-selection.component.scss */ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/invoice-type-selection/invoice-type-selection.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_7__["UtilService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__["FormConfigurationProviderService"]])
    ], InvoiceTypeSelectionComponent);
    return InvoiceTypeSelectionComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/washout-search/washout-search.component.html":
/*!***********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/washout-search/washout-search.component.html ***!
  \***********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div fxLayout=\"column\"\r\n     fxLayoutAlign=\"start none\">\r\n    <mat-card>\r\n        <form [formGroup]=\"searchForm\">\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"start none\"\r\n                 class=\"search\">\r\n                <mat-form-field>\r\n                    <input matInput\r\n                           fxFlex=\"30%\"\r\n                           formControlName=\"searchContractCtrl\"\r\n                           (keydown.enter)=\"onSearchWashoutContractsClicked()\"\r\n                           placeholder=\"Contract Search\" />\r\n                </mat-form-field>\r\n                <atlas-masterdata-user-preferences-input fxFlex=\"30%\"\r\n                                                         isEditable=\"true\"\r\n                                                         [fieldControl]=\"charterReferenceCtrl\"\r\n                                                         [options]=\"filteredCharters\"\r\n                                                         label=\"Charter Reference\"\r\n                                                         (keydown.enter)=\"onSearchWashoutContractsClicked()\"\r\n                                                         displayProperty=\"charterCode\"\r\n                                                         [selectProperties]=\"['charterCode','description']\"\r\n                                                         [errorMap]=\"charterErrorMap\"\r\n                                                         lightBoxTitle=\"Results for charters\"\r\n                                                         gridId=\"charterGrid\"\r\n                                                         [dataLoader]=\"charterDataLoader\">\r\n                </atlas-masterdata-user-preferences-input>\r\n                <atlas-masterdata-user-preferences-input fxFlex=\"30%\"\r\n                                                         isEditable=\"true\"\r\n                                                         [fieldControl]=\"counterPartyCtrl\"\r\n                                                         [options]=\"filteredCounterPartyList\"\r\n                                                         label=\"Counter Party\"\r\n                                                         (keydown.enter)=\"onSearchWashoutContractsClicked()\"\r\n                                                         displayProperty=\"counterpartyCode\"\r\n                                                         [selectProperties]=\"['counterpartyCode', 'description']\"\r\n                                                         [errorMap]=\"counterpartyErrorMap\"\r\n                                                         lightBoxTitle=\"Results for Counterparty\"\r\n                                                         gridId=\"counterpartiesGrid\"\r\n                                                         [dataLoader]=\"counterpartyDataLoader\">\r\n                </atlas-masterdata-user-preferences-input>\r\n                <button mat-raised-button\r\n                        (click)=\"onSearchWashoutContractsClicked()\"\r\n                        class=\"heroGradient\"\r\n                        id=\"search-button\">\r\n                    <mat-icon aria-label=\"Search\"\r\n                              class=\"search-icon\">search</mat-icon>\r\n                </button>\r\n            </div>\r\n        </form>\r\n\r\n    </mat-card>\r\n</div>\r\n\r\n<atlas-filter-set-display (filtersChanged)=onFilterSetDetailsChange($event)\r\n                          [columnConfiguration]=\"columnConfiguration\"\r\n                          [gridCode]=\"gridCode\"\r\n                          [company]=\"company\"\r\n                          #filterSetDisplayComponent>\r\n</atlas-filter-set-display>\r\n<mat-card>\r\n\r\n    <div fxLayout=\"row\"\r\n         fxLayout.xs=\"column\"\r\n         fxLayoutAlign=\"space-between start\"\r\n         fxLayoutGap=\"20px\"\r\n         class=\"atlas-grid-card-header\">\r\n        <h2 class=\"no-margin\">{{gridTitle}}</h2>\r\n\r\n        <atlas-ag-grid-user-preferences *ngIf=\"isConfigLoaded\"\r\n                                        [gridOptions]=\"washoutContractGridOptions\"\r\n                                        [company]=\"company\"\r\n                                        [gridId]=\"gridCode\"\r\n                                        [sharingEnabled]=\"hasGridSharing\"\r\n                                        #userPreferences>\r\n        </atlas-ag-grid-user-preferences>\r\n    </div>\r\n    <div ag-grid=\"costContractGridOptions\"\r\n         class=\"ag-theme-material pointer-cursor\"\r\n         style=\"width: 100%; height: 100%\">\r\n        <ag-grid-angular style=\"height:100%;\"\r\n                         class=\"ag-theme-material\"\r\n                         [rowData]=\"washoutContractGridRows\"\r\n                         [gridOptions]=\"washoutContractGridOptions\"\r\n                         [columnDefs]=\"washoutContractGridColumns\"\r\n                         domLayout=\"autoHeight\"\r\n                         rowSelection=\"multiple\"\r\n                         [singleClickEdit]=\"true\"\r\n                         [suppressRowClickSelection]=\"true\"\r\n                         [pagination]=\"true\"\r\n                         [paginationPageSize]=\"10\"\r\n                         [enableSorting]=\"true\"\r\n                         [enableColResize]=\"true\"\r\n                         enableFilter\r\n                         [rowHeight]=atlasAgGridParam.rowHeight\r\n                         rowMultiSelectWithClick=true\r\n                         [rowHeight]=atlasAgGridParam.rowHeight\r\n                         (columnVisible)=\"onColumnVisibilityChanged($event)\"\r\n                         (gridReady)=\"onGridReady($event)\"\r\n                         (firstDataRendered)=\"onFirstDataRendered($event)\"\r\n                         (rowSelected)=\"onSelectionChanged($event)\"\r\n                         (rowDataChanged)=\"onRowDataChanged($event)\">\r\n            <!-- [suppressRowClickSelection]=\"true\" -->\r\n        </ag-grid-angular>\r\n    </div>\r\n</mat-card>\r\n<atlas-lock-interval [resourcesInformation]=\"resourcesInformation\">\r\n</atlas-lock-interval>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/washout-search/washout-search.component.scss":
/*!***********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/washout-search/washout-search.component.scss ***!
  \***********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/washout-search/washout-search.component.ts":
/*!*********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/washout-search/washout-search.component.ts ***!
  \*********************************************************************************************************************************************/
/*! exports provided: WashoutSearchComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WashoutSearchComponent", function() { return WashoutSearchComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component */ "./Client/app/shared/components/ag-grid-user-preferences/ag-grid-user-preferences.component.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _shared_dtos_list_and_search_list_and_search_filter_dto_dto__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/dtos/list-and-search/list-and-search-filter-dto.dto */ "./Client/app/shared/dtos/list-and-search/list-and-search-filter-dto.dto.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../../../shared/entities/lock-functional-context.entity */ "./Client/app/shared/entities/lock-functional-context.entity.ts");
/* harmony import */ var _shared_entities_lock_resource_information_entity__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../../../shared/entities/lock-resource-information.entity */ "./Client/app/shared/entities/lock-resource-information.entity.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_execution_charter_data_loader__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../../../shared/services/execution/charter-data-loader */ "./Client/app/shared/services/execution/charter-data-loader.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../../../shared/services/grid-configuration-provider.service */ "./Client/app/shared/services/grid-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/lock.service */ "./Client/app/shared/services/http-services/lock.service.ts");
/* harmony import */ var _shared_services_masterdata_counterparty_data_loader__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../../../../../shared/services/masterdata/counterparty-data-loader */ "./Client/app/shared/services/masterdata/counterparty-data-loader.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _services_execution_actions_service__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../../../../services/execution-actions.service */ "./Client/app/execution/services/execution-actions.service.ts");
/* harmony import */ var _shared_components_filter_set_display_filter_set_display_component__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./../../../../../../../shared/components/filter-set-display/filter-set-display.component */ "./Client/app/shared/components/filter-set-display/filter-set-display.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __values = (undefined && undefined.__values) || function (o) {
    var m = typeof Symbol === "function" && o[Symbol.iterator], i = 0;
    if (m) return m.call(o);
    return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
};


























var WashoutSearchComponent = /** @class */ (function (_super) {
    __extends(WashoutSearchComponent, _super);
    function WashoutSearchComponent(formBuilder, snackbarService, executionService, route, formConfigurationProvider, uiService, dialog, lockService, utilService, gridConfigurationProvider, counterpartyDataLoader, charterDataLoader, gridService, executionActionsService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.snackbarService = snackbarService;
        _this.executionService = executionService;
        _this.route = route;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.uiService = uiService;
        _this.dialog = dialog;
        _this.lockService = lockService;
        _this.utilService = utilService;
        _this.gridConfigurationProvider = gridConfigurationProvider;
        _this.counterpartyDataLoader = counterpartyDataLoader;
        _this.charterDataLoader = charterDataLoader;
        _this.gridService = gridService;
        _this.executionActionsService = executionActionsService;
        _this.washoutContractsSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.counterPartySelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.dataLength = 0;
        _this.isContractSelected = false;
        _this.resourcesInformation = new Array();
        _this.locking = [];
        _this.unlocking = [];
        _this.formatType = 'en-US';
        _this.destroy$ = new rxjs__WEBPACK_IMPORTED_MODULE_4__["Subject"]();
        _this.gridTitle = 'Washout Contracts to Invoice';
        _this.gridCode = 'invoiceWashoutSelectionGrid';
        _this.columnConfiguration = [];
        _this.hasGridSharing = false;
        _this.washoutContractGridOptions = {};
        _this.additionnalColumns = [
            {
                headerName: 'Uninvoiced Quantity',
                field: 'uninvoicedQuantity',
                colId: 'uninvoicedQuantity',
                hide: false,
                valueGetter: _this.getUnInvoicedQuantity,
                valueFormatter: _this.formatValue.bind(_this),
            },
        ];
        _this.isConfigLoaded = false;
        _this.masterdata = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_13__["MasterData"]();
        _this.counterPartyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_10__["AtlasFormControl"]('CounterPartyWashout');
        _this.charterReferenceCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_10__["AtlasFormControl"]('CharterRefWashout');
        _this.counterpartyErrorMap = new Map()
            .set('inDropdownList', 'Invalid entry. Counter Party not in the list.');
        _this.charterErrorMap = new Map();
        _this.count = 0;
        _this.atlasAgGridParam = _this.gridService.getAgGridParam();
        _this.searchForm = _this.formBuilder.group({
            searchContractCtrl: [''],
        });
        return _this;
    }
    WashoutSearchComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.masterdata = this.route.snapshot.data.masterdata;
        this.invoiceType = Number(decodeURIComponent(this.route.snapshot.paramMap.get('invoiceTypeId')));
        this.company = this.route.snapshot.paramMap.get('company');
        this.isLoading = true;
        this.filteredCounterPartyList = this.masterdata.counterparties;
        this.counterPartyList = this.filteredCounterPartyList;
        this.counterPartyCtrl.valueChanges.subscribe(function (input) {
            _this.filterCounterParty(input);
        });
        this.populateCharterList();
        this.charterReferenceCtrl.valueChanges.subscribe(function (input) {
            _this.filterCharterReference(input);
        });
        this.loadGridConfiguration();
        this.route.queryParams.subscribe(function (params) {
            _this.saveContractRef = params['savedContractReference'];
            _this.saveCounterparty = params['savedCounterParty'];
            _this.saveCharterReference = params['savedCharterReference'];
        });
        if (this.executionActionsService.EditCriteriaRetainFilter && this.executionActionsService.EditCriteriaRetainFilter.length > 0) {
            this.savedFilters = this.executionActionsService.EditCriteriaRetainFilter;
        }
        if (this.saveContractRef || this.saveCounterparty || this.saveCharterReference) {
            if (this.saveContractRef) {
                this.searchForm.controls['searchContractCtrl'].setValue(this.saveContractRef);
            }
            if (this.saveCounterparty) {
                this.counterPartyControl = this.counterPartyList.find(function (counterParty) {
                    return counterParty.counterpartyCode === _this.saveCounterparty;
                });
                this.counterPartyCtrl.patchValue(this.counterPartyControl);
            }
            if (this.saveCharterReference) {
                this.charterRefControl = this.charters.find(function (charter) {
                    return charter.charterCode === _this.saveCharterReference;
                });
                this.charterReferenceCtrl.patchValue(this.charterRefControl);
            }
        }
    };
    WashoutSearchComponent.prototype.populateCharterList = function () {
        var _this = this;
        this.charterDataLoader.getData().subscribe(function (charter) {
            _this.charters = charter;
            _this.filteredCharters = _this.charters;
        });
    };
    WashoutSearchComponent.prototype.formatValue = function (param) {
        if (isNaN(param.value) || param.value === null) {
            return '';
        }
        return new Intl.NumberFormat(this.formatType, { minimumFractionDigits: 3, maximumFractionDigits: 3 }).format(param.value);
    };
    WashoutSearchComponent.prototype.filterCounterParty = function (input) {
        this.filteredCounterPartyList = this.utilService.filterListforAutocomplete(input, this.masterdata.counterparties, ['counterpartyCode', 'description']);
        if (this.counterPartyCtrl.valid || !this.counterPartyCtrl.value) {
            this.onSearchWashoutContractsClicked();
        }
    };
    WashoutSearchComponent.prototype.filterCharterReference = function (input) {
        this.filteredCharters = this.utilService.filterListforAutocomplete(input, this.charters, ['charterCode', 'description']);
        if (this.charterReferenceCtrl.valid || !this.charterReferenceCtrl.value) {
            this.onSearchWashoutContractsClicked();
        }
    };
    WashoutSearchComponent.prototype.loadGridConfiguration = function () {
        var _this = this;
        this.isConfigLoaded = false;
        this.gridConfigurationProvider.getConfiguration(this.company, this.gridCode)
            .subscribe(function (configuration) {
            _this.columnConfiguration = configuration.columns;
            _this.initColumns(_this.columnConfiguration);
            _this.hasGridSharing = configuration.hasMultipleViewsPerUser;
        });
    };
    WashoutSearchComponent.prototype.onFirstDataRendered = function (params) {
        if (this.gridColumnApi) {
            this.gridColumnApi.autoSizeAllColumns();
        }
    };
    WashoutSearchComponent.prototype.initColumns = function (configuration) {
        var _this = this;
        this.washoutContractGridColumns = [];
        // selection column
        this.washoutContractGridColumns.push({
            headerCheckboxSelection: true,
            checkboxSelection: true,
            minWidth: 40,
            maxWidth: 40,
            pinned: 'left',
        });
        // grid config
        var numericColumns = [];
        configuration.forEach(function (column) {
            if (column.gridType === 'numeric') {
                numericColumns.push(column.fieldName.toLowerCase());
            }
        });
        this.washoutContractGridColumns = this.washoutContractGridColumns
            .concat(configuration.map(function (config) {
            var columnDef = {
                colId: _this.utilService.convertToCamelCase(config.fieldName),
                headerName: config.friendlyName,
                field: _this.utilService.convertToCamelCase(config.fieldName),
                width: 100,
                hide: !config.isVisible,
            };
            var formatter = _this.uiService.getFormatterForType(config.gridType);
            if (formatter) {
                columnDef.valueFormatter = formatter;
            }
            var dateGetter = _this.uiService.getterForDateType(config.gridType);
            if (dateGetter) {
                columnDef.cellClass = 'dateFormat';
                columnDef.valueGetter = dateGetter;
            }
            var numericColumn = numericColumns.find(function (column) { return column === columnDef.field.toLowerCase(); });
            if (numericColumn) {
                columnDef.type = 'numericColumn';
                columnDef.valueFormatter = _this.numberFormatter;
            }
            return columnDef;
        }));
        // calculated columns
        this.washoutContractGridColumns = this.washoutContractGridColumns.concat(this.additionnalColumns);
        if (this.gridApi) {
            if (this.gridApi) {
                this.gridApi.sizeColumnsToFit();
            }
        }
        if (this.washoutContractGridOptions && this.washoutContractGridOptions.api) {
            this.washoutContractGridOptions.columnDefs = this.washoutContractGridColumns;
            this.washoutContractGridOptions.api.setColumnDefs(this.washoutContractGridColumns);
        }
        this.isConfigLoaded = true;
        this.gridApi.refreshView();
    };
    WashoutSearchComponent.prototype.onFilterSetDetailsChange = function (filters) {
        this.executionActionsService.EditCriteriaRetainFilter = filters;
        this.filters = filters;
        if (this.count === 1) {
            this.filters = this.savedFilters;
            this.savedFilters = null;
            this.count = 0;
        }
        if (this.savedFilters && this.count === 0) {
            if (this.filterSetDisplayComponent) {
                this.count = 1;
                var localFilters = this.savedFilters.map(function (filter) {
                    return new _shared_dtos_list_and_search_list_and_search_filter_dto_dto__WEBPACK_IMPORTED_MODULE_9__["ListAndSearchFilterDto"](filter);
                });
                this.filterSetDisplayComponent.loadFilters(localFilters);
            }
        }
        else {
            this.loadData();
        }
    };
    WashoutSearchComponent.prototype.loadData = function (emitResult) {
        var _this = this;
        if (emitResult === void 0) { emitResult = false; }
        if (!this.filters) {
            return;
        }
        var filters = this.filters.map(function (filter) {
            return new _shared_dtos_list_and_search_list_and_search_filter_dto_dto__WEBPACK_IMPORTED_MODULE_9__["ListAndSearchFilterDto"](filter);
        });
        this.isLoading = true;
        var request = {
            clauses: { clauses: filters },
        };
        this.executionService.searchWashoutContractsToInvoice(request).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["takeUntil"])(this.destroy$)).subscribe(function (data) {
            _this.isLoading = false;
            _this.washoutContract = data.value;
            _this.washoutContractGridRows = _this.washoutContract.filter(function (contract) {
                var washoutContractValue = Number(contract.quantity);
                var washoutContractValueFixes = Number(washoutContractValue.toFixed(3));
                if (washoutContractValueFixes) {
                    return contract;
                }
            });
            _this.dataLength = _this.washoutContractGridRows.length;
            _this.contractsToInvoice = data.value;
            _this.allWashoutContractGridRows = _this.washoutContractGridRows;
            _this.autoSizeContractsGrid();
            if (_this.dataLength && _this.dataLength > 0) {
                _this.counterParty = _this.washoutContractGridRows[0].counterparty;
            }
            if (_this.filters.length === 0) {
                if (_this.saveContractRef || _this.saveCounterparty || _this.saveCharterReference) {
                    _this.onSearchWashoutContractsClicked();
                }
            }
            _this.onRowDataChanged(null);
        });
    };
    WashoutSearchComponent.prototype.onSearchWashoutContractsClicked = function () {
        var _this = this;
        this.searchContractReference = this.searchForm.get('searchContractCtrl').value;
        if (this.counterPartyCtrl.value === '') {
            this.searchCounterParty = this.counterPartyCtrl.value;
        }
        else if (this.counterPartyCtrl.value) {
            this.searchCounterParty = this.counterPartyCtrl.value.counterpartyCode;
            if (!this.searchCounterParty) {
                this.searchCounterParty = this.counterPartyCtrl.value;
            }
        }
        if (this.charterReferenceCtrl.value === '') {
            this.searchCharterReference = this.charterReferenceCtrl.value;
        }
        else if (this.charterReferenceCtrl.value) {
            this.searchCharterReference = this.charterReferenceCtrl.value.charterCode;
            if (!this.searchCharterReference) {
                this.searchCharterReference = this.charterReferenceCtrl.value;
            }
        }
        if (!this.searchContractReference && !this.searchCharterReference && !this.searchCounterParty) {
            this.washoutContractGridRows = this.allWashoutContractGridRows;
            return;
        }
        var rows = [];
        var contractRows = 0;
        var charterRows = 0;
        this.filters = [];
        if (this.allWashoutContractGridRows && this.allWashoutContractGridRows.length > 0) {
            this.isLoading = true;
            if (this.searchContractReference) {
                this.contractsToInvoice = this.allWashoutContractGridRows.filter(function (item) { return item.contractReference != null; });
                rows = this.contractsToInvoice.filter(function (item) {
                    return item.contractReference.toString().toUpperCase().includes(_this.searchContractReference.toUpperCase());
                });
                contractRows = -1;
            }
            if (this.searchCharterReference) {
                if (rows.length === 0 && contractRows === 0) {
                    this.contractsToInvoice = this.allWashoutContractGridRows.filter(function (item) { return item.charterReference != null; });
                    rows = this.contractsToInvoice.filter(function (item) {
                        return item.charterReference.toString().toUpperCase().includes(_this.searchCharterReference.toUpperCase());
                    });
                }
                else if (contractRows === -1) {
                    rows = rows.filter(function (item) { return item.charterReference != null; });
                    rows = rows.filter(function (item) { return item.charterReference.toString().toUpperCase().
                        includes(_this.searchCharterReference.toUpperCase()); });
                }
                charterRows = -1;
            }
            if (this.searchCounterParty) {
                if (rows.length === 0 && charterRows === 0 && contractRows === 0) {
                    this.contractsToInvoice = this.allWashoutContractGridRows.filter(function (item) { return item.counterparty != null; });
                    rows = this.contractsToInvoice.filter(function (item) {
                        return item.counterparty.toString().toUpperCase().includes(_this.searchCounterParty.toUpperCase());
                    });
                }
                else {
                    rows = rows.filter(function (item) { return item.counterparty != null; });
                    rows = rows.filter(function (item) { return item.counterparty.toString().
                        toUpperCase().includes(_this.searchCounterParty.toUpperCase()); });
                }
            }
        }
        this.washoutContractGridRows = rows;
        this.dataLength = this.washoutContractGridRows.length;
        this.autoSizeContractsGrid();
        this.isLoading = false;
        if (this.dataLength && this.dataLength > 0) {
            this.counterParty = this.washoutContractGridRows[0].counterparty;
        }
    };
    WashoutSearchComponent.prototype.onGridReady = function (params) {
        this.washoutContractGridOptions = params;
        if (this.washoutContractGridColumns) {
            this.washoutContractGridOptions.columnDefs = this.washoutContractGridColumns;
            this.washoutContractGridOptions.api.setColumnDefs(this.washoutContractGridColumns);
        }
        this.gridApi = params.api;
        this.gridColumnApi = params.columnApi;
        this.gridApi.showNoRowsOverlay();
    };
    WashoutSearchComponent.prototype.autoSizeContractsGrid = function () {
        if (this.gridColumnApi && this.washoutContractGridColumns) {
            var allColumnIds_1 = [];
            this.washoutContractGridColumns.forEach(function (columnDefs) {
                allColumnIds_1.push(columnDefs.field);
            });
            this.gridColumnApi.autoSizeColumns(allColumnIds_1);
        }
    };
    WashoutSearchComponent.prototype.onGridSizeChanged = function (params) {
        this.autoSizeContractsGrid();
    };
    WashoutSearchComponent.prototype.getUnInvoicedQuantity = function (params) {
        if (params.data.quantity - params.data.invoicedQuantity > 0) {
            return params.data.quantity - params.data.invoicedQuantity;
        }
        else if (params.data.quantity - params.data.invoicedQuantity < 0) {
            return 0;
        }
    };
    WashoutSearchComponent.prototype.onColumnVisibilityChanged = function (col) {
        this.userPreferencesComponent.onChangeColumnVisibility(col);
        this.autoSizeContractsGrid();
    };
    WashoutSearchComponent.prototype.deselectNode = function (currentRowIndex) {
        var _this = this;
        this.washoutContractGridOptions.api.forEachNode(function (node) {
            if (Number(node.id) === currentRowIndex) {
                _this.washoutContractGridOptions.api.deselectNode(node);
            }
        });
    };
    WashoutSearchComponent.prototype.onSelectionChanged = function (event) {
        var _this = this;
        var e_1, _a;
        var selectedRows = this.gridApi.getSelectedRows();
        var currentRowIndex = event.rowIndex;
        var valid = true;
        if (selectedRows.length > 1) {
            var currencySelected = void 0;
            var counterpartySelected = void 0;
            var blDateSelected = void 0;
            try {
                for (var selectedRows_1 = __values(selectedRows), selectedRows_1_1 = selectedRows_1.next(); !selectedRows_1_1.done; selectedRows_1_1 = selectedRows_1.next()) {
                    var row = selectedRows_1_1.value;
                    if (!counterpartySelected) {
                        counterpartySelected = row.counterparty;
                    }
                    if (!currencySelected) {
                        currencySelected = row.currencyCode;
                    }
                    if (!blDateSelected) {
                        blDateSelected = row.blDate;
                    }
                    if (currencySelected !== row.currencyCode || counterpartySelected !== row.counterparty) {
                        valid = false;
                        break;
                    }
                    if (blDateSelected !== row.blDate) {
                        var confirmDialog = this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_8__["ConfirmationDialogComponent"], {
                            data: {
                                title: 'Confirmation of BL Date',
                                text: 'You have selected a contract pair which has a different BL date from the previous selection” Do you wish to update this contract pair with the same BL date? ',
                                okButton: 'Proceed',
                                cancelButton: 'Cancel',
                            },
                        });
                        confirmDialog.afterClosed().subscribe(function (answer) {
                            if (!answer) {
                                _this.deselectNode(currentRowIndex);
                            }
                        });
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (selectedRows_1_1 && !selectedRows_1_1.done && (_a = selectedRows_1.return)) _a.call(selectedRows_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
        if (!valid) {
            this.snackbarService.informationSnackBar('Currency & Counterparty should be same');
        }
        this.washoutContractGridOptions.api.forEachNode(function (node) {
            if (Number(node.id) === currentRowIndex) {
                if (valid === false) {
                    _this.washoutContractGridOptions.api.deselectNode(node);
                }
            }
        });
        this.isContractSelected = selectedRows.length > 0;
        if (this.isContractSelected) {
            this.counterPartySelected.emit(selectedRows[0].counterparty);
            this.washoutContractsSelected.emit(this.isContractSelected);
        }
        this.grantLock(Number(event.data.sectionId), event.node);
        this.selectedWashoutContracts = selectedRows;
    };
    WashoutSearchComponent.prototype.grantLock = function (sectionId, node) {
        var _this = this;
        if (node.isSelected()) {
            if (!this.locking.includes(sectionId)) {
                this.locking.push(sectionId);
                this.subscriptions.push(this.lockService.isLockedContract(sectionId).subscribe(function (lock) {
                    if (lock.isLocked) {
                        _this.dialog.open(_shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_8__["ConfirmationDialogComponent"], {
                            data: {
                                title: 'Lock',
                                text: lock.message,
                                okButton: 'Got it',
                            },
                        });
                        _this.washoutContractGridOptions.api.deselectNode(node);
                        _this.locking = _this.locking.filter(function (id) { return id !== sectionId; });
                    }
                    else {
                        _this.subscriptions.push(_this.lockService.lockContract(sectionId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_11__["LockFunctionalContext"].WashoutInvoicing).subscribe(function (lockState) {
                            _this.refeshResourceInformation();
                            _this.locking = _this.locking.filter(function (id) { return id !== sectionId; });
                        }));
                    }
                }));
            }
        }
        else {
            if (!this.unlocking.includes(sectionId)) {
                this.unlocking.push(sectionId);
                this.refeshResourceInformation();
                if (this.resourcesInformation.filter(function (rsc) { return rsc.resourceId === sectionId; }).length === 0) {
                    this.subscriptions.push(this.lockService.unlockContract(sectionId, _shared_entities_lock_functional_context_entity__WEBPACK_IMPORTED_MODULE_11__["LockFunctionalContext"].WashoutInvoicing).subscribe(function () {
                        node.setRowSelectable(true);
                        _this.unlocking = _this.unlocking.filter(function (id) { return id !== sectionId; });
                    }));
                }
                else {
                    node.setRowSelectable(true);
                    this.unlocking = this.unlocking.filter(function (id) { return id !== sectionId; });
                }
            }
        }
    };
    WashoutSearchComponent.prototype.refeshResourceInformation = function () {
        var _this = this;
        this.resourcesInformation = new Array();
        this.washoutContractGridOptions.api.forEachNode(function (node) {
            if (node.isSelected()) {
                var resourceInformation = new _shared_entities_lock_resource_information_entity__WEBPACK_IMPORTED_MODULE_12__["LockResourceInformation"]();
                resourceInformation.resourceType = 'Contract';
                resourceInformation.resourceId = node.data.sectionId;
                resourceInformation.resourceCode = node.data.contractReference;
                _this.resourcesInformation.push(resourceInformation);
            }
        });
    };
    WashoutSearchComponent.prototype.numberFormatter = function (params) {
        if (params && params.value && !isNaN(params.value)) {
            if (params.colDef.colId.toLowerCase() === 'quantity' || params.colDef.colId.toLowerCase() === 'price' ||
                params.colDef.colId.toLowerCase() === 'invoicedquantity') {
                if (params.colDef.colId.toLowerCase() === 'price') {
                    return new Intl.NumberFormat('en-US', { minimumFractionDigits: 4, maximumFractionDigits: 4 }).format(params.value);
                }
                else {
                    return new Intl.NumberFormat('en-US', { minimumFractionDigits: 3, maximumFractionDigits: 3 }).format(params.value);
                }
            }
        }
    };
    WashoutSearchComponent.prototype.onRowDataChanged = function (params) {
        if (this.counterParty) {
            var counterPartyFilterComponent = this.gridApi.getFilterInstance('counterparty');
            counterPartyFilterComponent.setModel({
                type: 'set',
                values: [this.counterParty],
            });
            this.gridApi.onFilterChanged();
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('userPreferences'),
        __metadata("design:type", _shared_components_ag_grid_user_preferences_ag_grid_user_preferences_component__WEBPACK_IMPORTED_MODULE_6__["AgGridUserPreferencesComponent"])
    ], WashoutSearchComponent.prototype, "userPreferencesComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('filterSetDisplayComponent'),
        __metadata("design:type", _shared_components_filter_set_display_filter_set_display_component__WEBPACK_IMPORTED_MODULE_25__["FilterSetDisplayComponent"])
    ], WashoutSearchComponent.prototype, "filterSetDisplayComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], WashoutSearchComponent.prototype, "washoutContractsSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], WashoutSearchComponent.prototype, "counterPartySelected", void 0);
    WashoutSearchComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-washout-search',
            template: __webpack_require__(/*! ./washout-search.component.html */ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/washout-search/washout-search.component.html"),
            styles: [__webpack_require__(/*! ./washout-search.component.scss */ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/washout-search/washout-search.component.scss")],
            providers: [_shared_services_masterdata_counterparty_data_loader__WEBPACK_IMPORTED_MODULE_20__["CounterPartyDataLoader"], _shared_services_execution_charter_data_loader__WEBPACK_IMPORTED_MODULE_15__["CharterDataLoader"]],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_21__["SnackbarService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_18__["ExecutionService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_16__["FormConfigurationProviderService"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_22__["UiService"],
            _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"],
            _shared_services_http_services_lock_service__WEBPACK_IMPORTED_MODULE_19__["LockService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_23__["UtilService"],
            _shared_services_grid_configuration_provider_service__WEBPACK_IMPORTED_MODULE_17__["GridConfigurationProviderService"],
            _shared_services_masterdata_counterparty_data_loader__WEBPACK_IMPORTED_MODULE_20__["CounterPartyDataLoader"],
            _shared_services_execution_charter_data_loader__WEBPACK_IMPORTED_MODULE_15__["CharterDataLoader"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_14__["AgGridService"],
            _services_execution_actions_service__WEBPACK_IMPORTED_MODULE_24__["ExecutionActionsService"]])
    ], WashoutSearchComponent);
    return WashoutSearchComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_7__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/washout-selection.component.html":
/*!************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-selection/washout-selection.component.html ***!
  \************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div>\r\n    <atlas-invoice-type-selection #invoiceTypeSelectionComponent>\r\n    </atlas-invoice-type-selection>\r\n    <atlas-washout-search #washoutSearchComponent\r\n                          (washoutContractsSelected)=\"onContractsSelected($event)\"\r\n                          (counterPartySelected)=\"onCounterPartySelected($event)\">\r\n    </atlas-washout-search>\r\n    <atlas-decimals #washoutDecimalsComponent>\r\n    </atlas-decimals>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/washout-selection.component.scss":
/*!************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-selection/washout-selection.component.scss ***!
  \************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/washout-selection.component.ts":
/*!**********************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-selection/washout-selection.component.ts ***!
  \**********************************************************************************************************************/
/*! exports provided: WashoutSelectionComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WashoutSelectionComponent", function() { return WashoutSelectionComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _components_decimals_decimals_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/decimals/decimals.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/decimals/decimals.component.ts");
/* harmony import */ var _components_invoice_type_selection_invoice_type_selection_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./components/invoice-type-selection/invoice-type-selection.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/invoice-type-selection/invoice-type-selection.component.ts");
/* harmony import */ var _components_washout_search_washout_search_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./components/washout-search/washout-search.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/washout-search/washout-search.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var WashoutSelectionComponent = /** @class */ (function (_super) {
    __extends(WashoutSelectionComponent, _super);
    function WashoutSelectionComponent(formBuilder, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.formComponents = [];
        _this.counterPartySelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.washoutContractsSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        return _this;
    }
    WashoutSelectionComponent.prototype.ngOnInit = function () {
        this.invoiceSelectionFormGroup = this.formBuilder.group({
            invoiceTypeSelectionComponent: this.invoiceTypeSelectionComponent.getFormGroup(),
            washoutSearchComponent: this.washoutSearchComponent.getFormGroup(),
            washoutDecimalsComponent: this.washoutDecimalsComponent.getFormGroup(),
        });
        this.formComponents.push(this.invoiceTypeSelectionComponent, this.washoutSearchComponent, this.washoutDecimalsComponent);
    };
    WashoutSelectionComponent.prototype.onCounterPartySelected = function (counterParty) {
        this.counterPartySelected.emit(counterParty);
    };
    WashoutSelectionComponent.prototype.onContractsSelected = function (contractsSelected) {
        this.washoutContractsSelected.emit(contractsSelected);
    };
    WashoutSelectionComponent.prototype.populateEntity = function (model) {
        this.formComponents.forEach(function (comp) {
            comp.populateEntity(model);
        });
        return model;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('invoiceTypeSelectionComponent'),
        __metadata("design:type", _components_invoice_type_selection_invoice_type_selection_component__WEBPACK_IMPORTED_MODULE_5__["InvoiceTypeSelectionComponent"])
    ], WashoutSelectionComponent.prototype, "invoiceTypeSelectionComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('washoutSearchComponent'),
        __metadata("design:type", _components_washout_search_washout_search_component__WEBPACK_IMPORTED_MODULE_6__["WashoutSearchComponent"])
    ], WashoutSelectionComponent.prototype, "washoutSearchComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('washoutDecimalsComponent'),
        __metadata("design:type", _components_decimals_decimals_component__WEBPACK_IMPORTED_MODULE_4__["DecimalsComponent"])
    ], WashoutSelectionComponent.prototype, "washoutDecimalsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], WashoutSelectionComponent.prototype, "counterPartySelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], WashoutSelectionComponent.prototype, "washoutContractsSelected", void 0);
    WashoutSelectionComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-washout-selection',
            template: __webpack_require__(/*! ./washout-selection.component.html */ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/washout-selection.component.html"),
            styles: [__webpack_require__(/*! ./washout-selection.component.scss */ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/washout-selection.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_3__["FormConfigurationProviderService"]])
    ], WashoutSelectionComponent);
    return WashoutSelectionComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-summary/washout-summary.component.html":
/*!********************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-summary/washout-summary.component.html ***!
  \********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = " <atlas-execution-invoicing-summary-header #summaryHeaderComponent\r\n                                           [isCreationMode]=isCreationMode>\r\n </atlas-execution-invoicing-summary-header>\r\n <div fxLayout=\"row\" fxLayout.md=\"column\"\r\n                     fxLayoutAlign=\"space-around start\">\r\n     <div fxLayout=\"column\" fxLayoutAlign=\"start left\"\r\n                            fxFlex=\"100%\">\r\n         <atlas-value-of-goods #summaryValueOfGoodsComponent\r\n                               (totalAmountCalculated)=\"ontotalAmountCalculated($event)\">\r\n         </atlas-value-of-goods>\r\n         <atlas-additional-cost #summaryAdditionalCostComponent\r\n                                [selectedGoodsVat]=\"selectedGoodsVatCode\"\r\n                                (totalCostAndVatCode)=\"onChangeCostContract($event)\">\r\n         </atlas-additional-cost>\r\n         <div fxLayout=\"row\"\r\n              fxLayoutGap=\"16px\">\r\n             <atlas-tax-goods fxFlex=\"50%\"\r\n                              #summaryTaxGoodsComponent\r\n                              (selectedGoodsTaxCode)=\"onChangeGoodsTaxCode($event)\">\r\n             </atlas-tax-goods>\r\n             <atlas-payments fxFlex=\"50%\"\r\n                             #summaryPaymentComponent>\r\n             </atlas-payments>\r\n         </div>\r\n         <atlas-tax-costs #summaryTaxCostsComponent\r\n                          fxFlex=\"50%\"\r\n                          (totalCostTaxCalculated)=\"onTotalCostTaxCalculated($event)\">\r\n         </atlas-tax-costs>\r\n         <atlas-washout-total fxFlex=\"50%\"\r\n                              #summaryTotalAmountComponent>\r\n         </atlas-washout-total>\r\n     </div>\r\n </div>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-summary/washout-summary.component.scss":
/*!********************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-summary/washout-summary.component.scss ***!
  \********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-summary/washout-summary.component.ts":
/*!******************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-summary/washout-summary.component.ts ***!
  \******************************************************************************************************************/
/*! exports provided: WashoutSummaryComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WashoutSummaryComponent", function() { return WashoutSummaryComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/enums/cost-direction-type.enum */ "./Client/app/shared/enums/cost-direction-type.enum.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_services_execution_dtos_invoice_record__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/services/execution/dtos/invoice-record */ "./Client/app/shared/services/execution/dtos/invoice-record.ts");
/* harmony import */ var _shared_services_execution_dtos_tax_record__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/services/execution/dtos/tax-record */ "./Client/app/shared/services/execution/dtos/tax-record.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _header_header_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../header/header.component */ "./Client/app/execution/execution-invoicing/header/header.component.ts");
/* harmony import */ var _washout_working_page_components_additional_cost_additional_cost_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../washout-working-page/components/additional-cost/additional-cost.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/additional-cost/additional-cost.component.ts");
/* harmony import */ var _washout_working_page_components_payments_payments_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../washout-working-page/components/payments/payments.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/payments/payments.component.ts");
/* harmony import */ var _washout_working_page_components_tax_costs_tax_costs_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../washout-working-page/components/tax-costs/tax-costs.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/tax-costs/tax-costs.component.ts");
/* harmony import */ var _washout_working_page_components_tax_goods_tax_goods_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../washout-working-page/components/tax-goods/tax-goods.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/tax-goods/tax-goods.component.ts");
/* harmony import */ var _washout_working_page_components_value_of_goods_value_of_goods_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../washout-working-page/components/value-of-goods/value-of-goods.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/value-of-goods/value-of-goods.component.ts");
/* harmony import */ var _washout_working_page_components_washout_total_washout_total_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../washout-working-page/components/washout-total/washout-total.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/washout-total/washout-total.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};















var WashoutSummaryComponent = /** @class */ (function (_super) {
    __extends(WashoutSummaryComponent, _super);
    function WashoutSummaryComponent(formBuilder, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.formComponents = [];
        _this.totalRecordForWashout = new _shared_services_execution_dtos_invoice_record__WEBPACK_IMPORTED_MODULE_5__["InvoiceRecord"]();
        _this.valueOfGoodsTotal = 0;
        _this.valueOfGoodsDecimalOption = 2;
        _this.additionalCostRate = 0;
        return _this;
    }
    WashoutSummaryComponent.prototype.ngOnInit = function () {
        this.washoutSummaryFormGroup = this.formBuilder.group({
            summaryValueOfGoodsComponent: this.summaryValueOfGoodsComponent.getFormGroup(),
            summaryAdditionalCostComponent: this.summaryAdditionalCostComponent.getFormGroup(),
            summaryTaxGoodsComponent: this.summaryTaxGoodsComponent.getFormGroup(),
            summaryTaxCostsComponent: this.summaryTaxCostsComponent.getFormGroup(),
            summaryPaymentComponent: this.summaryPaymentComponent.getFormGroup(),
            summaryHeaderComponent: this.summaryHeaderComponent.getFormGroup(),
            summaryTotalAmountComponent: this.summaryTotalAmountComponent.getFormGroup(),
        });
        this.washoutSummaryFormGroup.disable();
        this.formComponents.push(this.summaryValueOfGoodsComponent, this.summaryAdditionalCostComponent, this.summaryTaxGoodsComponent, this.summaryTaxCostsComponent, this.summaryPaymentComponent, this.summaryHeaderComponent, this.summaryTotalAmountComponent);
        this.summaryAdditionalCostComponent.isAdditionalCostForSummary = true;
    };
    WashoutSummaryComponent.prototype.washoutContracts = function (contracts) {
        this.contracts = contracts;
    };
    WashoutSummaryComponent.prototype.populateInvoiceRecord = function (record) {
        this.contracts = this.invoiceGoodsContracts;
        this.costContracts = this.invoiceCostContracts;
        this.costTaxes = this.invoiceTaxContracts;
        this.totalData = this.invoiceTaxTotal;
        this.goodsTaxes = this.goodsTaxCode;
        this.model = record;
        this.populateSummaryFields();
    };
    WashoutSummaryComponent.prototype.populateSummaryFields = function () {
        if (this.contracts) {
            this.summaryValueOfGoodsComponent.selectedWashoutContracts(this.contracts);
        }
        if (this.costContracts) {
            this.summaryAdditionalCostComponent.contractToBeSelected(this.costContracts);
        }
        if (this.costTaxes) {
            this.summaryTaxCostsComponent.taxRecordsSelected(this.costTaxes);
        }
        if (this.goodsTaxes) {
            this.summaryTaxGoodsComponent.setDefaultVatCode(this.goodsTaxes);
        }
        if (this.model) {
            this.summaryPaymentComponent.setPaymentFieldsForSummary(this.model);
            this.summaryHeaderComponent.setHeaderFieldsForSummary(this.model, this.filteredCompanyBankAccounts);
        }
        this.summaryAdditionalCostComponent.isAdditionalCostForSummary = true;
    };
    WashoutSummaryComponent.prototype.calculateTaxTotal = function (model) {
        this.summaryTotalAmountComponent.setValuesForTotalTax(model);
    };
    WashoutSummaryComponent.prototype.calculateTotalWithoutTax = function () {
        this.totalRecordForWashout.totalInvoiceValue = this.additionalCostRate + this.valueOfGoodsTotal;
        this.totalRecordForWashout.decimalOption = this.valueOfGoodsDecimalOption;
        this.totalRecordForWashout.currency = this.valueOfGoodsCurrency;
        if (this.valueOfGoodsCostDirection === this.additionalCostCostDirection) {
            this.totalRecordForWashout.costDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][this.additionalCostCostDirection];
        }
        else {
            this.setCostDirection();
        }
        this.summaryTotalAmountComponent.setValuesForTotalWithoutTax(this.totalRecordForWashout);
    };
    WashoutSummaryComponent.prototype.setCostDirection = function () {
        this.totalRecordForWashout.costDirection = (Math.abs(this.additionalCostRate) > Math.abs(this.valueOfGoodsTotal)) ?
            _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][this.additionalCostCostDirection] : _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][this.valueOfGoodsCostDirection];
    };
    WashoutSummaryComponent.prototype.ontotalAmountCalculated = function (model) {
        this.valueOfGoodsTotal = model.amount;
        this.valueOfGoodsDecimalOption = model.decimalOption;
        this.valueOfGoodsCurrency = model.currencyCode;
        this.valueOfGoodsCostDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirectionType"][model.creditDebit]];
        if (this.valueOfGoodsCostDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"].Payable]) {
            this.valueOfGoodsTotal = -(this.valueOfGoodsTotal);
        }
        this.calculateTotalWithoutTax();
    };
    WashoutSummaryComponent.prototype.onTotalCostTaxCalculated = function (model) {
        this.totalData = model;
        this.calculateTaxTotal(model);
    };
    WashoutSummaryComponent.prototype.onChangeGoodsTaxCode = function (vatCode) {
        this.selectedGoodsVatCode = vatCode;
    };
    WashoutSummaryComponent.prototype.onChangeCostContract = function (model) {
        if (model) {
            this.additionalCostRate = model.rate;
            this.additionalCostCostDirection = model.costDirection;
            if (this.additionalCostCostDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirections"].Payable]) {
                this.additionalCostRate = -(this.additionalCostRate);
            }
            this.summaryTaxCostsComponent.getTaxesForSelectedVat(model);
            this.calculateTotalWithoutTax();
        }
    };
    WashoutSummaryComponent.prototype.setSummaryFieldsFromGrid = function (summaryRecord) {
        if (summaryRecord.summaryLines) {
            this.summaryTaxGoodsComponent.setDataForTaxGoods(summaryRecord.summaryLines, this.defaultVATCode);
        }
        if (summaryRecord) {
            this.summaryAdditionalCostComponent.contractToBeSelectedFromGrid(summaryRecord);
            this.summaryValueOfGoodsComponent.contractToBeSelectedFromGrid(summaryRecord);
            this.summaryPaymentComponent.setValuesForSummaryFromGrid(summaryRecord);
            this.summaryHeaderComponent.setHeaderFieldsFromGrid(summaryRecord);
        }
        this.summaryAdditionalCostComponent.isAdditionalCostForSummary = true;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], WashoutSummaryComponent.prototype, "defaultVATCode", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Boolean)
    ], WashoutSummaryComponent.prototype, "isCreationMode", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('summaryHeaderComponent'),
        __metadata("design:type", _header_header_component__WEBPACK_IMPORTED_MODULE_8__["HeaderComponent"])
    ], WashoutSummaryComponent.prototype, "summaryHeaderComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('summaryValueOfGoodsComponent'),
        __metadata("design:type", _washout_working_page_components_value_of_goods_value_of_goods_component__WEBPACK_IMPORTED_MODULE_13__["WashoutValueOfGoodsComponent"])
    ], WashoutSummaryComponent.prototype, "summaryValueOfGoodsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('summaryAdditionalCostComponent'),
        __metadata("design:type", _washout_working_page_components_additional_cost_additional_cost_component__WEBPACK_IMPORTED_MODULE_9__["AdditionalCostComponent"])
    ], WashoutSummaryComponent.prototype, "summaryAdditionalCostComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('summaryTaxGoodsComponent'),
        __metadata("design:type", _washout_working_page_components_tax_goods_tax_goods_component__WEBPACK_IMPORTED_MODULE_12__["TaxGoodsComponent"])
    ], WashoutSummaryComponent.prototype, "summaryTaxGoodsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('summaryTaxCostsComponent'),
        __metadata("design:type", _washout_working_page_components_tax_costs_tax_costs_component__WEBPACK_IMPORTED_MODULE_11__["TaxCostsComponent"])
    ], WashoutSummaryComponent.prototype, "summaryTaxCostsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('summaryPaymentComponent'),
        __metadata("design:type", _washout_working_page_components_payments_payments_component__WEBPACK_IMPORTED_MODULE_10__["WashoutPaymentsComponent"])
    ], WashoutSummaryComponent.prototype, "summaryPaymentComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('summaryTotalAmountComponent'),
        __metadata("design:type", _washout_working_page_components_washout_total_washout_total_component__WEBPACK_IMPORTED_MODULE_14__["WashoutTotalComponent"])
    ], WashoutSummaryComponent.prototype, "summaryTotalAmountComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], WashoutSummaryComponent.prototype, "invoiceTaxContracts", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _shared_services_execution_dtos_tax_record__WEBPACK_IMPORTED_MODULE_6__["TaxRecord"])
    ], WashoutSummaryComponent.prototype, "invoiceTaxTotal", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], WashoutSummaryComponent.prototype, "invoiceCostContracts", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], WashoutSummaryComponent.prototype, "invoiceGoodsContracts", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], WashoutSummaryComponent.prototype, "goodsTaxCode", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], WashoutSummaryComponent.prototype, "filteredCompanyBankAccounts", void 0);
    WashoutSummaryComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-washout-summary',
            template: __webpack_require__(/*! ./washout-summary.component.html */ "./Client/app/execution/execution-invoicing/washout/components/washout-summary/washout-summary.component.html"),
            styles: [__webpack_require__(/*! ./washout-summary.component.scss */ "./Client/app/execution/execution-invoicing/washout/components/washout-summary/washout-summary.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__["FormConfigurationProviderService"]])
    ], WashoutSummaryComponent);
    return WashoutSummaryComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/additional-cost/additional-cost.component.html":
/*!****************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/additional-cost/additional-cost.component.html ***!
  \****************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-content>\r\n        <div fxLayout=\"column\">\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutGap=\"90%\">\r\n                <h2>Cost</h2>\r\n                <div fxLayoutAlign=\"end\">\r\n                    <button mat-icon-button\r\n                            [matMenuTriggerFor]=\"menu1\"\r\n                            class=\"additional-cost-float-right\">\r\n                        <i class=\"material-icons\">more_vert</i>\r\n                    </button>\r\n                    <mat-menu #menu1=\"matMenu\">\r\n                        <button mat-menu-item\r\n                                [matMenuTriggerFor]=\"exportMenu\">\r\n                            <mat-icon>import_export</mat-icon><span>Export</span>\r\n                        </button>\r\n                    </mat-menu>\r\n                    <mat-menu #exportMenu=\"matMenu\">\r\n                        <button mat-menu-item\r\n                                (click)=\"onExportButtonClickedAsExcel()\">\r\n                            <mat-icon>import_export</mat-icon><span>Export as Excel</span>\r\n                        </button>\r\n                        <button mat-menu-item\r\n                                (click)=\"onExportButtonClickedAsCSV()\">\r\n                            <mat-icon>import_export</mat-icon><span>Export as CSV</span>\r\n                        </button>\r\n                    </mat-menu>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div [hidden]=\"isAdditionalCostForSummary\"\r\n             fxLayout=\"row\"\r\n             fxLayoutAlign=\"start center\"\r\n             fxLayoutGap=\"10px\"\r\n             class=\"add-line-container\">\r\n            <div fxLayout=\"column\"\r\n                 fxLayoutAlign=\"start start\">\r\n                <h6>Add new lines:</h6>\r\n            </div>\r\n            <div fxLayout=\"column\"\r\n                 fxLayoutAlign=\"start start\"\r\n                 fxFlex=\"2\">\r\n                <mat-form-field>\r\n                    <input matInput\r\n                           [formControl]=\"addNewLineCtrl\">\r\n                </mat-form-field>\r\n            </div>\r\n            <div fxLayout=\"column\"\r\n                 fxLayoutAlign=\"start start\">\r\n                <button mat-button\r\n                        (click)=\"onAddRowButtonClicked(addNewLineCtrl.value)\">PROCEED</button>\r\n            </div>\r\n        </div>\r\n\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"end\"\r\n             class=\"use-goods-tax-code\"\r\n             fxLayoutGap=\"16px\">\r\n            <span class=\"fill-space\"></span>\r\n\r\n            <mat-slide-toggle [formControl]=\"useGoodsTaxCodeCtrl\"> Use Goods Tax Code</mat-slide-toggle>\r\n\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"end\"\r\n                 fxFlex=\"10%\"\r\n                 [hidden]=\"isAdditionalCostForSummary\">\r\n                <mat-form-field fxFlex=\"90%\">\r\n                    <mat-select placeholder=\"Cost VAT Code\"\r\n                                [formControl]=\"costVatCodeCtrl\"\r\n                                matTooltip=\"Cost VAT Code\"\r\n                                (selectionChange)='onCostVatCodeSelected()'>\r\n                        <mat-option *ngFor=\"let code of costVatCodeOptions\"\r\n                                    [value]=\"code.vatCode\">\r\n                            {{code.vatCode}}\r\n                        </mat-option>\r\n                    </mat-select>\r\n                </mat-form-field>\r\n            </div>\r\n        </div>\r\n        <div ag-grid=\"selectedCostGridOptions\"\r\n             class=\"ag-theme-material pointer-cursor\">\r\n            <ag-grid-angular class=\"ag-theme-material\"\r\n                             [rowData]=\"selectedCostGridRows\"\r\n                             [columnDefs]=\"selectedCostGridColumns\"\r\n                             [gridOptions]=\"selectedCostGridOptions\"\r\n                             domLayout=\"autoHeight\"\r\n                             (gridReady)=\"onGridReady($event)\"\r\n                             [pagination]=\"true\"\r\n                             [paginationPageSize]=\"10\"\r\n                             [enableSorting]=\"true\"\r\n                             [enableColResize]=\"true\"\r\n                             [enableFilter]=\"true\"\r\n                             [rowSelection]=\"rowSelection\"\r\n                             [frameworkComponents]=\"gridComponents\"\r\n                             enableFilter\r\n                             [rowHeight]=atlasAgGridParam.rowHeight\r\n                             [singleClickEdit]=true>\r\n            </ag-grid-angular>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"end\">\r\n            <mat-card-subtitle class=\"total-figure\">\r\n                Total Cost:<span class=\"total-figure-value\">\r\n                    {{this.totalCostDirectionSign}}{{formatQuantityAndTotal(this.total)}}\r\n                    {{this.currencyCodeSelected}} </span>\r\n            </mat-card-subtitle>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/additional-cost/additional-cost.component.scss":
/*!****************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/additional-cost/additional-cost.component.scss ***!
  \****************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".use-goods-tax-code {\n  margin-top: 10px; }\n\nbutton {\n  margin: 0; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/additional-cost/additional-cost.component.ts":
/*!**************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/additional-cost/additional-cost.component.ts ***!
  \**************************************************************************************************************************************************/
/*! exports provided: AdditionalCostComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AdditionalCostComponent", function() { return AdditionalCostComponent; });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../core/services/authorization.service */ "./Client/app/core/services/authorization.service.ts");
/* harmony import */ var _shared_components_ag_contextual_menu_ag_contextual_menu_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/components/ag-contextual-menu/ag-contextual-menu.component */ "./Client/app/shared/components/ag-contextual-menu/ag-contextual-menu.component.ts");
/* harmony import */ var _shared_components_ag_grid_autocomplete_ag_grid_autocomplete_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/components/ag-grid/autocomplete/ag-grid-autocomplete.component */ "./Client/app/shared/components/ag-grid/autocomplete/ag-grid-autocomplete.component.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_components_cell_editor_select_cell_editor_select_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/components/cell-editor-select/cell-editor-select.component */ "./Client/app/shared/components/cell-editor-select/cell-editor-select.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_invoice_line_record_entity__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../../../shared/entities/invoice-line-record.entity */ "./Client/app/shared/entities/invoice-line-record.entity.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-sign.enum */ "./Client/app/shared/enums/cost-sign.enum.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../../../shared/services/execution/dtos/contracts-to-cost-invoice */ "./Client/app/shared/services/execution/dtos/contracts-to-cost-invoice.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




















var AdditionalCostComponent = /** @class */ (function (_super) {
    __extends(AdditionalCostComponent, _super);
    function AdditionalCostComponent(executionService, formBuilder, formConfigurationProvider, route, uiService, datePipe, authorizationService, snackbar, gridService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.executionService = executionService;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.route = route;
        _this.uiService = uiService;
        _this.datePipe = datePipe;
        _this.authorizationService = authorizationService;
        _this.snackbar = snackbar;
        _this.gridService = gridService;
        _this.invoiceCostMenuActions = {
            deleteInvoiceCost: 'delete',
        };
        _this.totalCostAndVatCode = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        _this.costVatCodeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_10__["AtlasFormControl"]('CostVatCode');
        _this.useGoodsTaxCodeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_10__["AtlasFormControl"]('UseGoodsTaxCode');
        _this.narrativeLength = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        _this.selectedCostGridOptions = {};
        _this.selectedCostGridRows = [];
        _this.componentId = 'selectedCost';
        _this.invoicedPercentage = 100;
        _this.gridComponents = {
            atlasSelect: _shared_components_cell_editor_select_cell_editor_select_component__WEBPACK_IMPORTED_MODULE_9__["CellEditorSelectComponent"],
        };
        _this.gridContext = {
            gridEditable: false,
        };
        _this.taxRateCalculated = 0;
        _this.total = 0;
        _this.taxTotal = 0;
        _this.costDirectionDisplay = '';
        _this.debit = 'Dr';
        _this.credit = 'Cr';
        _this.currencyCode = '';
        _this.pricingOptionValue = 0;
        _this.decimalOptionValue = 2;
        _this.formatType = 'en-US';
        _this.isAdditionalCostForSummary = false;
        _this.costNarrativePrefix = 'ADD ';
        _this.addNewLineCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_10__["AtlasFormControl"]('addNewLineCtrl');
        _this.inPNL = false;
        _this.noAction = false;
        _this.atlasAgGridParam = _this.gridService.getAgGridParam();
        _this.userActiveDirectoryName = _this.authorizationService.getCurrentUser().samAccountName;
        return _this;
    }
    AdditionalCostComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.invoiceType = Number(decodeURIComponent(this.route.snapshot.paramMap.get('invoiceTypeId')));
        this.route.paramMap
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(function (params) { return params.get('company'); }))
            .subscribe(function (company) {
            _this.company = company;
        });
        this.masterData = this.route.snapshot.data.masterdata;
        this.costDirections = [
            {
                costDirectionId: _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_12__["CostDirections"].Payable,
                costDirection: 'Pay',
            },
            {
                costDirectionId: _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_12__["CostDirections"].Receivable,
                costDirection: 'Receive',
            },
        ];
        this.gridContext.gridEditable = false;
        this.costVatCodeOptions = this.masterData.vats;
        this.costVatCodeCtrl.patchValue(this.masterData.vats[0].vatCode);
        this.selectedCostVat = this.costVatCodeCtrl.value;
        this.init();
        this.initializeGridColumns();
        this.addNewLineCtrl.patchValue(1);
        this.useGoodsTaxCodeCtrl.patchValue(true);
        this.onChanges();
    };
    AdditionalCostComponent.prototype.init = function () {
        this.invoiceCostGridContextualMenuActions = [
            {
                icon: 'delete',
                text: 'Delete',
                action: this.invoiceCostMenuActions.deleteInvoiceCost,
            },
        ];
    };
    AdditionalCostComponent.prototype.handleAction = function (action, costLine) {
        switch (action) {
            case this.invoiceCostMenuActions.deleteInvoiceCost:
                this.onDeleteSelectedButtonClicked(costLine);
                break;
            default:
                break;
        }
    };
    AdditionalCostComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            costVatCodeCtrl: this.costVatCodeCtrl,
            useGoodsTaxCodeCtrl: this.useGoodsTaxCodeCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    AdditionalCostComponent.prototype.onChanges = function () {
        var _this = this;
        this.useGoodsTaxCodeCtrl.valueChanges.subscribe(function (val) {
            if (val) {
                _this.onUseGoodsTaxCodeToggleChange(_this.selectedGoodsVat);
            }
            else {
                _this.onUseGoodsTaxCodeToggleChange(_this.selectedCostVat);
            }
        });
    };
    AdditionalCostComponent.prototype.onUseGoodsTaxCodeToggleChange = function (value) {
        if (value) {
            this.costVatCodeCtrl.patchValue(value);
            var changedVatCode_1 = [];
            this.gridApi.forEachNode(function (rowNode) {
                if (rowNode.data) {
                    var data = rowNode.data;
                    data.vatCode = value;
                    changedVatCode_1.push(data);
                }
            });
            this.gridApi.updateRowData({ update: changedVatCode_1 });
            this.calculateTotalOnUpdateGrid();
        }
    };
    AdditionalCostComponent.prototype.setVatCodeAvailable = function () {
        var _this = this;
        if (this.selectedGoodsVat) {
            this.costVatCodeCtrl.patchValue(this.selectedGoodsVat);
            this.vatCodeAvailable = this.masterData.vats.filter(function (option) { return option.vatCode === _this.selectedGoodsVat; });
            this.totalCostAndVatDetails();
        }
    };
    AdditionalCostComponent.prototype.onGridReady = function (params) {
        var _this = this;
        this.gridApi = params.api;
        params.columnDefs = this.selectedCostGridColumns;
        this.selectedCostGridOptions = params;
        this.gridColumnApi = params.columnApi;
        this.autoSizeGridHeader();
        this.gridColumnApi.autoSizeAllColumns();
        window.onresize = function () {
            _this.gridColumnApi.autoSizeAllColumns();
        };
    };
    AdditionalCostComponent.prototype.autoSizeGridHeader = function () {
        var allColumnIds = [];
        this.selectedCostGridColumns.forEach(function (columnDefs) {
            allColumnIds.push(columnDefs.field);
        });
        this.gridColumnApi.autoSizeColumns(allColumnIds);
    };
    AdditionalCostComponent.prototype.onGridSizeChanged = function (params) {
        this.autoSizeGridHeader();
    };
    AdditionalCostComponent.prototype.initializeGridColumns = function () {
        this.selectedCostGridOptions = {
            context: this.gridContext,
        };
        this.selectedCostGridColumns = [
            {
                headerName: 'Cost Type',
                field: 'costTypeCode',
                colId: 'costTypeCode',
                hide: false,
                width: 250,
                minWidth: 250,
                maxWidth: 250,
                suppressSizeToFit: true,
                cellRendererFramework: _shared_components_ag_grid_autocomplete_ag_grid_autocomplete_component__WEBPACK_IMPORTED_MODULE_7__["AgGridAutocompleteComponent"],
                cellRendererParams: {
                    context: this.masterData,
                    options: this.masterData.costTypes.filter(function (cost) { return cost.isATradeCost === true; })
                        .sort(function (a, b) { return a.costTypeCode.localeCompare(b.costTypeCode); }),
                    valueProperty: 'costTypeCode',
                    codeProperty: 'costTypeCode',
                    displayProperty: 'name',
                },
                onCellValueChanged: this.onCostTypeChange.bind(this),
            },
            {
                headerName: '%Invoiced',
                field: 'percentageInvoiced',
                colId: 'percentageInvoiced',
                valueGetter: this.getpercentageInvoiced.bind(this),
                hide: false,
            },
            {
                headerName: 'Currency',
                field: 'currencyCode',
                colId: 'currencyCode',
                hide: false,
            },
            {
                headerName: 'Pay/Rec',
                field: 'costDirection',
                colId: 'costDirection',
                hide: false,
                editable: this.isGridEditable,
                cellRenderer: this.requiredCell.bind(this),
                cellEditor: 'agRichSelectCellEditor',
                cellEditorParams: {
                    values: this.costDirections.map(function (costDirection) { return costDirection.costDirection; }),
                    displayPropertyName: 'costDirection',
                    valuePropertyName: 'costDirection',
                    displayFormat: 'costDirection',
                },
                onCellValueChanged: this.onCostDirectionChange.bind(this),
            },
            {
                headerName: 'VAT Code',
                field: 'vatCode',
                colId: 'vatCode',
                hide: false,
                editable: true,
                cellRenderer: this.requiredCell.bind(this),
                cellEditor: 'agRichSelectCellEditor',
                cellEditorParams: {
                    values: this.masterData.vats.map(function (vat) { return vat.vatCode; }),
                    displayPropertyName: 'vatCode',
                    valuePropertyName: 'vatCode',
                    displayFormat: 'vatCode',
                    context: this.masterData,
                },
                onCellValueChanged: this.onVatCodeChange.bind(this),
            },
            {
                headerName: 'Cost Amount',
                field: 'costAmountToInvoice',
                colId: 'costAmountToInvoice',
                hide: false,
                editable: this.isGridEditable,
                cellRenderer: this.requiredCell.bind(this),
                valueSetter: this.setCostAmountToInvoice,
                onCellValueChanged: this.onCostAmountToInvoiceChange.bind(this),
            },
            {
                headerName: 'Cost Narrative',
                field: 'narrative',
                colId: 'narrative',
                hide: false,
                editable: this.isGridEditable,
                valueSetter: this.setCostNarrative.bind(this),
                cellStyle: this.narrativeMaxLength.bind(this),
            },
            {
                headerName: '',
                cellRendererFramework: _shared_components_ag_contextual_menu_ag_contextual_menu_component__WEBPACK_IMPORTED_MODULE_6__["AgContextualMenuComponent"],
                cellRendererParams: {
                    context: {
                        componentParent: this,
                        actionContext: this.gridContext,
                    },
                    menuActions: this.invoiceCostGridContextualMenuActions,
                },
                hide: this.isAdditionalCostForSummary === true,
                maxWidth: 80,
            },
        ];
        this.rowSelection = 'multiple';
    };
    AdditionalCostComponent.prototype.isGridEditable = function (params) {
        if (!params.data.contractReference) {
            return params.context.gridEditable;
        }
        else {
            return false;
        }
    };
    AdditionalCostComponent.prototype.setCostAmountToInvoice = function (params) {
        params.data.costAmountToInvoice = (params.newValue <= 0) ? 0 : params.newValue;
        return true;
    };
    AdditionalCostComponent.prototype.setCostNarrative = function (params) {
        if (params.newValue.length <= 0) {
            params.data.narrative = this.costNarrativePrefix;
        }
        else {
            var narrativeText = params.newValue;
            params.data.narrative = (narrativeText).startsWith('ADD') ? params.newValue :
                this.costNarrativePrefix.concat(params.newValue);
        }
        return true;
    };
    AdditionalCostComponent.prototype.onCostTypeChange = function (params) {
        var filteredCostType = params.colDef.cellRendererParams.context.costTypes.find(function (e) { return e.costTypeCode === params.data.costTypeCode; });
        if (filteredCostType) {
            this.inPNL = filteredCostType.inPNL;
            this.noAction = filteredCostType.noAction;
        }
    };
    AdditionalCostComponent.prototype.narrativeMaxLength = function (params) {
        if (params.data && params.value) {
            if (params.value.length > 30) {
                this.narrativeLength.emit(true);
                this.snackbar.informationSnackBar('Narrative length should be less than 30');
                return { color: 'red' };
            }
            else {
                this.narrativeLength.emit(false);
                return { color: 'black' };
            }
        }
        return params.value;
    };
    AdditionalCostComponent.prototype.validate = function () {
        var isValid = true;
        if (this.isAddRow) {
            this.gridApi.forEachNode(function (rowData) {
                if (!(rowData.data.costTypeCode && rowData.data.costDirection && rowData.data.vatCode
                    && rowData.data.costAmountToInvoice)) {
                    isValid = false;
                }
            });
        }
        return isValid;
    };
    AdditionalCostComponent.prototype.contractToBeSelected = function (costContracts) {
        var _this = this;
        if (costContracts.length > 0) {
            this.initializeGridColumns();
            if (this.defaultVatCode) {
                costContracts.map(function (costContract) { return costContract.vatCode = _this.defaultVatCode; });
            }
            this.selectedCostGridRows = costContracts;
            this.selectedCostGridOptions.pagination = (costContracts.length > 10) ? true : false;
            if (this.selectedCostGridRows.length > 0) {
                this.currencyCodeSelected = this.selectedCostGridRows[0].currencyCode;
            }
            if (this.masterData.vats.length > 0) {
                this.costVatCodeCtrl.patchValue(this.masterData.vats[0].vatCode);
            }
            this.calculateTotalAmountAndGetVatCode(costContracts);
        }
    };
    AdditionalCostComponent.prototype.setDefaultCurrency = function (currency) {
        if (currency) {
            this.currencyCodeSelected = currency;
        }
    };
    AdditionalCostComponent.prototype.getpercentageInvoiced = function (params) {
        params.data.percentageInvoiced = this.invoicedPercentage;
        return params.data.percentageInvoiced;
    };
    AdditionalCostComponent.prototype.onCostDirectionChange = function (params) {
        if (params.data.costAmountToInvoice) {
            this.calculateTotalOnUpdateGrid();
        }
        return true;
    };
    AdditionalCostComponent.prototype.onCostAmountToInvoiceChange = function (params) {
        if (params.data.costDirection) {
            this.calculateTotalOnUpdateGrid();
        }
        return true;
    };
    AdditionalCostComponent.prototype.onAddRowButtonClicked = function (numberOfLines) {
        this.isAddRow = true;
        this.gridContext.gridEditable = true;
        this.gridApi.onFilterChanged();
        for (var count = 1; count <= numberOfLines; count++) {
            var newItem = this.createNewCostRowData();
            this.gridApi.updateRowData({ add: [newItem], addIndex: 0 });
        }
    };
    AdditionalCostComponent.prototype.onDeleteSelectedButtonClicked = function (costLine) {
        if (!costLine.contractReference) {
            this.total = 0;
            this.gridApi.updateRowData({ remove: [costLine] });
            this.calculationOfCRAndDR();
            this.calculateTotalOnUpdateGrid();
        }
        else {
            this.snackbar.informationSnackBar('You cannot delete a cost which is not added in Invoice Working Page');
        }
    };
    AdditionalCostComponent.prototype.calculationOfCRAndDR = function () {
        var totalCR = 0;
        var totalDR = 0;
        var costDirectionPay = 'Pay';
        this.gridApi.forEachNode(function (rowNode) {
            if (rowNode.data) {
                if (rowNode.data.costDirection === costDirectionPay) {
                    totalCR = totalCR + Number(rowNode.data.costAmountToInvoice);
                }
                else {
                    totalDR = totalDR + Number(rowNode.data.costAmountToInvoice);
                }
            }
        });
        this.updateTotals(totalCR, totalDR);
        this.totalCostAndVatDetails();
    };
    AdditionalCostComponent.prototype.updateTotals = function (totalCR, totalDR) {
        if (totalCR > totalDR) {
            this.total = totalCR - totalDR;
            this.costDirectionDisplay = this.credit;
            this.totalCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_13__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_12__["CostDirections"].Payable];
            this.totalCostDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_12__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_12__["CostDirections"].Payable];
        }
        else {
            this.total = totalDR - totalCR;
            this.costDirectionDisplay = this.debit;
            this.totalCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_13__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_12__["CostDirections"].Receivable];
            this.totalCostDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_12__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_12__["CostDirections"].Receivable];
        }
    };
    AdditionalCostComponent.prototype.totalCostAndVatDetails = function () {
        var _this = this;
        this.totalCostAndVatCode.emit({
            rate: this.total,
            decimalOption: this.decimalOptionValue,
            costDirection: this.totalCostDirection,
            currencyCode: this.currencyCodeSelected,
            vatAvailable: this.vatCodeAvailable,
        });
        this.vatCodeAvailable.forEach(function (tax) {
            _this.taxTotal = _this.taxTotal + Math.abs(tax.rate);
        });
    };
    AdditionalCostComponent.prototype.createNewCostRowData = function () {
        var newData = new _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_15__["ContractsToCostInvoice"]();
        newData.invoicePercent = this.invoicedPercentage;
        newData.currencyCode = this.currencyCodeSelected;
        newData.narrative = this.costNarrativePrefix;
        newData.vatCode = this.defaultVatCode;
        return newData;
    };
    AdditionalCostComponent.prototype.setDefaultVatCode = function (defaultVatCode) {
        this.defaultVatCode = defaultVatCode;
    };
    AdditionalCostComponent.prototype.setTaxDataForSummary = function (costInvoiceRecord) {
        this.selectedCostGridRows = this.getCostContractsForSummary(costInvoiceRecord);
        this.initializeGridColumns();
        this.calculateTotalForSummary(costInvoiceRecord);
    };
    AdditionalCostComponent.prototype.getCostContractsForSummary = function (costInvoiceRecord) {
        var contracts = [];
        if (costInvoiceRecord) {
            var contract = new _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_15__["ContractsToCostInvoice"]();
            contract.vatCode = costInvoiceRecord.vatCode;
            contract.principalCommodity = costInvoiceRecord.principalCommodity;
            contract.rate = costInvoiceRecord.price;
            contract.quantity = costInvoiceRecord.quantity;
            contract.costAmountToInvoice = costInvoiceRecord.lineAmount;
            contract.invoicePercent = costInvoiceRecord.totalInvoiceValue;
            contracts.push(contract);
        }
        return contracts;
    };
    AdditionalCostComponent.prototype.getCostDirectionIdFromCode = function (code) {
        if (code) {
            var selectedCostDirection = this.costDirections.find(function (e) { return e.costDirection === code; });
            return selectedCostDirection.costDirectionId;
        }
    };
    AdditionalCostComponent.prototype.calculateTotalAmountAndGetVatCode = function (contracts) {
        var _this = this;
        this.total = 0;
        var totalCR = 0;
        var totalDR = 0;
        var costDirectionId;
        this.vatCodeAvailable = [];
        contracts.forEach(function (contract) {
            var vatCode;
            // creating copy of selected vatCode, so the calculations are not impacting the original data
            vatCode = _this.masterData.vats
                .filter(function (vat) { return (vat.vatCode === contract.vatCode); }).map(function (x) { return (__assign({}, x)); });
            if (vatCode.length > 0) {
                vatCode.map(function (code) {
                    return code.rate = code.rate / 100 * contract.costAmountToInvoice;
                });
                if (_this.vatCodeAvailable.length === 0) {
                    _this.vatCodeAvailable.push(vatCode[0]);
                }
                else {
                    _this.vatCodeAvailable.map(function (code) {
                        return (code.vatCode === vatCode[0].vatCode) ? (code.rate = code.rate + vatCode[0].rate) :
                            _this.vatCodeAvailable.push(vatCode[0]);
                    });
                }
            }
            costDirectionId = _this.getCostDirectionIdFromCode(contract.costDirection);
            if (costDirectionId === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_12__["CostDirections"].Payable) {
                totalCR = totalCR + contract.costAmountToInvoice;
            }
            else {
                totalDR = totalDR + contract.costAmountToInvoice;
            }
        });
        if (contracts.length > 0) {
            this.currencyCode = contracts[0].currencyCode;
        }
        this.updateTotals(totalCR, totalDR);
        this.totalCostAndVatDetails();
    };
    AdditionalCostComponent.prototype.calculateTotalOnUpdateGrid = function () {
        var totalCR = 0;
        var totalDR = 0;
        var costDirectionPay = 'Pay';
        var vatMasterData = this.masterData.vats;
        var vatCodeAvailable = [];
        this.gridApi.forEachNode(function (rowNode) {
            if (rowNode.data) {
                var vatCode_1 = [];
                if (rowNode.data.costDirection === costDirectionPay) {
                    totalCR = totalCR + Number(rowNode.data.costAmountToInvoice);
                }
                else {
                    totalDR = totalDR + Number(rowNode.data.costAmountToInvoice);
                }
                vatCode_1 = vatMasterData
                    .filter(function (vat) { return (vat.vatCode === rowNode.data.vatCode); }).map(function (x) { return (__assign({}, x)); });
                if (vatCode_1.length > 0) {
                    vatCode_1.map(function (code) {
                        return code.rate = code.rate / 100 * rowNode.data.costAmountToInvoice;
                    });
                    if (vatCodeAvailable.length === 0) {
                        if (rowNode.data.costDirection === costDirectionPay) {
                            vatCode_1[0].rate = -(vatCode_1[0].rate);
                        }
                        vatCodeAvailable.push(vatCode_1[0]);
                    }
                    else {
                        var isAvailable_1 = false;
                        vatCodeAvailable.map(function (code) {
                            if (code.vatCode === vatCode_1[0].vatCode) {
                                if (vatCodeAvailable.filter(function (selectedVatCode) { return selectedVatCode.vatCode === vatCode_1[0].vatCode; })) {
                                    if (rowNode.data.costDirection === costDirectionPay) {
                                        vatCode_1[0].rate = -(vatCode_1[0].rate);
                                    }
                                    code.rate = code.rate + vatCode_1[0].rate;
                                    isAvailable_1 = true;
                                }
                            }
                        });
                        if (!isAvailable_1) {
                            vatCodeAvailable = vatCodeAvailable.filter(function (code) { return code.vatCode !== vatCode_1[0].vatCode; });
                            if (rowNode.data.costDirection === costDirectionPay) {
                                vatCode_1[0].rate = -(vatCode_1[0].rate);
                            }
                            vatCodeAvailable.push(vatCode_1[0]);
                        }
                    }
                }
            }
        });
        this.updateTotals(totalCR, totalDR);
        if (this.useGoodsTaxCodeCtrl.value) {
            this.setVatCodeAvailable();
        }
        else {
            this.vatCodeAvailable = vatCodeAvailable.map(function (x) { return (__assign({}, x)); });
            this.totalCostAndVatDetails();
        }
    };
    AdditionalCostComponent.prototype.formatQuantityAndTotal = function (input) {
        var formattedInput = new Intl.NumberFormat(this.formatType, { minimumFractionDigits: this.decimalOptionValue }).format(input);
        return formattedInput.toLocaleString();
    };
    AdditionalCostComponent.prototype.calculateTotalForSummary = function (costInvoiceRecord) {
        this.total = costInvoiceRecord.totalVatAmount;
        this.currencyCode = costInvoiceRecord.currencyCode;
    };
    AdditionalCostComponent.prototype.onVatCodeChange = function (params) {
        if (params.data.costAmountToInvoice) {
            this.calculateTotalOnUpdateGrid();
        }
    };
    AdditionalCostComponent.prototype.requiredCell = function (params) {
        if (params.data && params.context.gridEditable) {
            if (!params.value || params.value === '') {
                return '<div class=\'cost-cell-value-required\'>Required*</div>';
            }
        }
        return params.value;
    };
    AdditionalCostComponent.prototype.onCostVatCodeSelected = function () {
        if (!this.useGoodsTaxCodeCtrl.value) {
            var vat_1 = this.costVatCodeCtrl.value;
            this.selectedCostVat = vat_1;
            var changedVatCode_2 = [];
            this.gridApi.forEachNode(function (rowNode) {
                if (rowNode.data) {
                    var data = rowNode.data;
                    data.vatCode = vat_1;
                    changedVatCode_2.push(data);
                }
            });
            this.gridApi.updateRowData({ update: changedVatCode_2 });
            this.calculateTotalOnUpdateGrid();
        }
    };
    AdditionalCostComponent.prototype.populateEntity = function (entity) {
        var selectedInvoiceCosts = entity;
        selectedInvoiceCosts.currency = this.currencyCodeSelected;
        selectedInvoiceCosts.totalInvoiceValue = this.total;
        if (selectedInvoiceCosts.invoiceLines && selectedInvoiceCosts.invoiceLines.length > 0) {
            var invoiceLines = this.getInvoiceCostLines(selectedInvoiceCosts.invoiceLines.length);
            invoiceLines.forEach(function (line) {
                selectedInvoiceCosts.invoiceLines.push(line);
            });
        }
        else {
            selectedInvoiceCosts.invoiceLines = this.getInvoiceCostLines();
        }
        return selectedInvoiceCosts;
    };
    AdditionalCostComponent.prototype.getAllInvoiceCostLines = function () {
        var _this = this;
        var selectedCostRows = [];
        this.gridApi.forEachNode(function (rowData) {
            if (rowData.data) {
                var costInvoiceline = new _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_15__["ContractsToCostInvoice"]();
                costInvoiceline.costId = rowData.data.costId;
                costInvoiceline.sectionId = rowData.data.sectionId;
                costInvoiceline.costAmountToInvoice = rowData.data.costAmountToInvoice;
                costInvoiceline.quantity = rowData.data.quantity;
                costInvoiceline.costTypeCode = rowData.data.costTypeCode;
                costInvoiceline.currencyCode = rowData.data.currencyCode;
                costInvoiceline.vatCode = rowData.data.vatCode;
                costInvoiceline.narrative = rowData.data.narrative;
                costInvoiceline.invoicePercent = _this.invoicedPercentage;
                costInvoiceline.rateTypeCode = rowData.data.rateTypeCode;
                costInvoiceline.costDirection = rowData.data.costDirection;
                selectedCostRows.push(costInvoiceline);
            }
        });
        return selectedCostRows;
    };
    AdditionalCostComponent.prototype.getInvoiceCostLines = function (index) {
        var _this = this;
        if (index === void 0) { index = 0; }
        var invoiceLines = [];
        this.selectedCostGridRows = this.getAllInvoiceCostLines();
        this.selectedCostGridRows.map(function (data) {
            var invoiceLine = new _shared_entities_invoice_line_record_entity__WEBPACK_IMPORTED_MODULE_11__["InvoiceLineRecord"]();
            invoiceLine.costID = data.costId;
            invoiceLine.sectionID = data.sectionId;
            invoiceLine.lineAmount = data.costAmountToInvoice;
            var selectedCostDirection = _this.costDirections.find(function (e) { return e.costDirection === data.costDirection; });
            invoiceLine.costDirectionId = selectedCostDirection ? selectedCostDirection.costDirectionId : null;
            invoiceLine.costTypeCode = data.costTypeCode;
            invoiceLine.currencyCode = data.currencyCode;
            invoiceLine.rateTypeId = 1; // RateType to be defaulted as Amount as per the FS.
            invoiceLine.vatCode = data.vatCode;
            invoiceLine.vatAmount = data.vatAmount;
            invoiceLine.invoicePercent = _this.invoicedPercentage;
            invoiceLine.narrative = data.narrative;
            invoiceLine.inPL = _this.inPNL;
            invoiceLine.noAct = _this.noAction;
            invoiceLines.push(invoiceLine);
            index++;
        });
        return invoiceLines;
    };
    /* Code for home grid to summary redirection */
    AdditionalCostComponent.prototype.contractToBeSelectedFromGrid = function (summaryRecord) {
        var _this = this;
        if (summaryRecord) {
            this.selectedCostGridRows = this.getCostContractsForSummaryFromGrid(summaryRecord.summaryLines);
            this.initializeGridColumnsFromSummary();
            if (this.selectedCostGridRows.length > 0) {
                this.calculateTotalAmountAndGetVatCode(this.selectedCostGridRows);
            }
            else {
                this.currencyCodeSelected = summaryRecord.currency;
                summaryRecord.summaryLines.forEach(function (record) {
                    if (record.vatCode) {
                        _this.vatCodeAvailable = _this.masterData.vats.filter(function (option) { return option.vatCode === record.vatCode; });
                    }
                });
                this.totalCostAndVatCode.emit({
                    rate: this.total,
                    decimalOption: this.decimalOptionValue,
                    costDirection: this.totalCostDirection,
                    currencyCode: this.currencyCodeSelected,
                    vatAvailable: this.vatCodeAvailable,
                });
            }
        }
    };
    AdditionalCostComponent.prototype.initializeGridColumnsFromSummary = function () {
        this.selectedCostGridColumns = [
            {
                headerName: 'Cost Type',
                field: 'costTypeCode',
                colId: 'costTypeCode',
                hide: false,
            },
            {
                headerName: 'Cost Amount',
                field: 'costAmountToInvoice',
                colId: 'costAmountToInvoice',
                hide: false,
            },
            {
                headerName: 'Contract Commodity',
                field: 'principalCommodity',
                colId: 'principalCommodity',
                hide: false,
            },
            {
                headerName: 'Quantity',
                field: 'quantity',
                colId: 'quantity',
                hide: false,
            },
            {
                headerName: 'Price',
                field: 'rate',
                colId: 'rate',
                hide: false,
            },
            {
                headerName: '% Invoiced',
                field: 'percentageInvoiced',
                colId: 'percentageInvoiced',
                hide: false,
            },
            {
                headerName: 'Pay/Rec',
                field: 'costDirection',
                colId: 'costDirection',
                hide: false,
            },
            {
                headerName: 'VAT Code',
                field: 'vatCode',
                colId: 'vatCode',
                hide: false,
            },
        ];
    };
    AdditionalCostComponent.prototype.getCostContractsForSummaryFromGrid = function (summaryLines) {
        var contracts = [];
        summaryLines.map(function (record) {
            if (record.costId > 0) {
                var contract = new _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_15__["ContractsToCostInvoice"]();
                contract.costTypeCode = record.costTypeCode;
                contract.principalCommodity = record.principalCommodity;
                contract.rate = record.price;
                contract.quantity = record.quantity.toString();
                contract.weightCode = record.weightCode;
                contract.costAmountToInvoice = record.lineAmount;
                contract.costDirection = record.costDirection;
                contract.vatCode = record.vatCode;
                contract.invoicePercent = record.invoicePercent;
                contracts.push(contract);
            }
        });
        return contracts;
    };
    AdditionalCostComponent.prototype.onExportButtonClickedAsExcel = function () {
        var screenName = 'Cost';
        var now = new Date();
        var todayDate = this.datePipe.transform(now, 'yyyyMMdd_hhmm').toString().toUpperCase();
        var params = {
            fileName: todayDate + '_' + this.company + '_' + screenName + '_' + this.userActiveDirectoryName + '.xlsx',
        };
        this.gridApi.exportDataAsExcel(params);
    };
    AdditionalCostComponent.prototype.onExportButtonClickedAsCSV = function () {
        var screenName = 'Cost';
        var now = new Date();
        var todayDate = this.datePipe.transform(now, 'yyyyMMdd_hhmm').toString().toUpperCase();
        var params = {
            fileName: todayDate + '_' + this.company + '_' + screenName + '_' + this.userActiveDirectoryName + '.csv',
        };
        this.gridApi.exportDataAsCsv(params);
    };
    AdditionalCostComponent.prototype.setAllInvoiceCostLines = function () {
        var _this = this;
        this.selectedCostGridRows = [];
        this.gridApi.forEachNode(function (rowData) {
            if (rowData.data) {
                var costInvoiceline = new _shared_services_execution_dtos_contracts_to_cost_invoice__WEBPACK_IMPORTED_MODULE_15__["ContractsToCostInvoice"]();
                costInvoiceline.costId = rowData.data.costId;
                costInvoiceline.sectionId = rowData.data.sectionId;
                costInvoiceline.costAmountToInvoice = rowData.data.costAmountToInvoice;
                costInvoiceline.quantity = rowData.data.quantity;
                costInvoiceline.costTypeCode = rowData.data.costTypeCode;
                costInvoiceline.currencyCode = rowData.data.currencyCode;
                costInvoiceline.vatCode = rowData.data.vatCode;
                costInvoiceline.invoicePercent = _this.invoicedPercentage;
                costInvoiceline.narrative = rowData.data.narrative;
                costInvoiceline.costDirection = rowData.data.costDirection;
                _this.selectedCostGridRows.push(costInvoiceline);
            }
        });
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])(),
        __metadata("design:type", Object)
    ], AdditionalCostComponent.prototype, "totalCostAndVatCode", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])(),
        __metadata("design:type", Object)
    ], AdditionalCostComponent.prototype, "narrativeLength", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])(),
        __metadata("design:type", Object)
    ], AdditionalCostComponent.prototype, "invoiceSetupData", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])(),
        __metadata("design:type", String)
    ], AdditionalCostComponent.prototype, "selectedGoodsVat", void 0);
    AdditionalCostComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: 'atlas-additional-cost',
            template: __webpack_require__(/*! ./additional-cost.component.html */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/additional-cost/additional-cost.component.html"),
            styles: [__webpack_require__(/*! ./additional-cost.component.scss */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/additional-cost/additional-cost.component.scss")],
            providers: [_angular_common__WEBPACK_IMPORTED_MODULE_0__["DatePipe"]],
        }),
        __metadata("design:paramtypes", [_shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_17__["ExecutionService"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_16__["FormConfigurationProviderService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_19__["UiService"],
            _angular_common__WEBPACK_IMPORTED_MODULE_0__["DatePipe"],
            _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_5__["AuthorizationService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_18__["SnackbarService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_14__["AgGridService"]])
    ], AdditionalCostComponent);
    return AdditionalCostComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_8__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/invoice-document/invoice-document.component.html":
/*!******************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/invoice-document/invoice-document.component.html ***!
  \******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"invoice-creation-card\"\r\n          fxFlex=\"100\">\r\n    <mat-card-title>\r\n        Invoice Document\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <mat-form-field fxFlex=\"30%\">\r\n                <mat-select [panelWidth]=\"panelSize\"\r\n                            (optionSelected)=\"onExternalInHouseSelected()\"\r\n                            placeholder=\"External/InHouse\"\r\n                            [formControl]=\"invoiceExtInHouseCtrl\"\r\n                            matTooltip=\"External/InHouse\">\r\n                    <mat-option *ngFor=\"let info of invoiceSourceType\"\r\n                                [value]=\"info.viewValue\">\r\n                        {{info.viewValue}}\r\n                    </mat-option>\r\n                </mat-select>\r\n            </mat-form-field>\r\n            <mat-form-field fxFlex=\"60%\">\r\n                <input matInput\r\n                       placeholder=\"External Invoice Reference\"\r\n                       autocomplete=\"off\"\r\n                       [formControl]=\"invoiceExtRefCtrl\">\r\n                <mat-error *ngIf=\"invoiceExtRefCtrl.hasError('required')\">\r\n                    Reference is required\r\n                </mat-error>\r\n                <mat-error *ngIf=\"invoiceExtRefCtrl.hasError('maxlength')\">\r\n                    Must be less than 25 characters\r\n                </mat-error>\r\n                <mat-hint align=\"end\">\r\n                    {{invoiceExtRefCtrl.value.length}} / 25\r\n                </mat-hint>\r\n                <mat-hint style=\"color:orange\"\r\n                          *ngIf=\"!isUnique\">\r\n                    Reference Number already used\r\n                </mat-hint>\r\n            </mat-form-field>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\">\r\n            <mat-form-field fxFlex=\"30%\"\r\n                            class=\"margin-bottom\">\r\n                <mat-select [panelWidth]=\"panelSize\"\r\n                            placeholder=\"Template\"\r\n                            [formControl]=\"invoiceTemplatesCtrl\"\r\n                            (selectionChange)=\"onInvoiceTemplateSelected()\"\r\n                            matTooltip=\"Template\"\r\n                            [required]=\"invoiceTemplatesCtrl.isRequired\">\r\n                    <mat-option></mat-option>\r\n                    <mat-option *ngFor=\"let template of filteredTemplates\"\r\n                                [value]=\"template\">\r\n                        {{template.name}}\r\n                    </mat-option>\r\n                </mat-select>\r\n                <mat-error *ngIf=\"invoiceTemplatesCtrl.hasError('required')\">\r\n                    Template is required\r\n                </mat-error>\r\n            </mat-form-field>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\">\r\n            <mat-form-field fxFlex=\"32%\">\r\n                <input matInput\r\n                       [matDatepicker]=\"washoutAgreementDatePicker\"\r\n                       placeholder=\"Agreement Date (BL Date)\"\r\n                       [matTooltip]=\"'Agreement Date'\"\r\n                       [formControl]='washoutAgreementDateCtrl'\r\n                       autocomplete=\"off\"\r\n                       (dateChange)='onAgreementDateChanged()'>\r\n                <mat-error *ngIf=\"washoutAgreementDateCtrl.hasError('isDateAfterCurrentDateValid')\">\r\n                    Date cannot be greater than the system date\r\n                </mat-error>\r\n                <mat-error *ngIf=\"washoutAgreementDateCtrl.hasError('required')\">\r\n                    Agreement Date is required\r\n                </mat-error>\r\n                <mat-hint *ngIf=\"!washoutAgreementDateCtrl.hasError('isDateAfterCurrentDateValid' || 'required')\"\r\n                          class=\"invoice-creation-required-fields\">Required*</mat-hint>\r\n                <mat-datepicker-toggle matSuffix\r\n                                       [for]=\"washoutAgreementDatePicker\"></mat-datepicker-toggle>\r\n                <mat-datepicker #washoutAgreementDatePicker></mat-datepicker>\r\n            </mat-form-field>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/invoice-document/invoice-document.component.scss":
/*!******************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/invoice-document/invoice-document.component.scss ***!
  \******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/invoice-document/invoice-document.component.ts":
/*!****************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/invoice-document/invoice-document.component.ts ***!
  \****************************************************************************************************************************************************/
/*! exports provided: InvoiceDocumentComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InvoiceDocumentComponent", function() { return InvoiceDocumentComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/enums/contract-type.enum */ "./Client/app/shared/enums/contract-type.enum.ts");
/* harmony import */ var _shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/enums/document-type.enum */ "./Client/app/shared/enums/document-type.enum.ts");
/* harmony import */ var _shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/enums/invoice-source-type.enum */ "./Client/app/shared/enums/invoice-source-type.enum.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/document.service */ "./Client/app/shared/services/http-services/document.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../../../shared/validators/date-validators.validator */ "./Client/app/shared/validators/date-validators.validator.ts");
/* harmony import */ var _execution_invoicing_invoicing_base_form_document_template_base_document_template_base_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../../execution-invoicing/invoicing-base-form/document-template-base/document-template-base.component */ "./Client/app/execution/execution-invoicing/invoicing-base-form/document-template-base/document-template-base.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};














var moment = moment__WEBPACK_IMPORTED_MODULE_2__;
var InvoiceDocumentComponent = /** @class */ (function (_super) {
    __extends(InvoiceDocumentComponent, _super);
    function InvoiceDocumentComponent(formBuilder, documentService, executionService, utilService, companyManager, formConfigurationProvider) {
        var _this = _super.call(this, executionService, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.documentService = documentService;
        _this.executionService = executionService;
        _this.utilService = utilService;
        _this.companyManager = companyManager;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.washoutAgreementDateCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_4__["AtlasFormControl"]('washoutAgreementDateCtrl');
        return _this;
    }
    InvoiceDocumentComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.subscriptions.push(this.documentService.getTemplates(_shared_enums_document_type_enum__WEBPACK_IMPORTED_MODULE_6__["DocumentTypes"].InvoiceWashout).subscribe(function (templates) {
            _this.filteredTemplates = templates.value;
            _this.invoiceTemplatesCtrl.valueChanges.subscribe(function (input) {
                _this.filteredTemplates =
                    _this.utilService.filterListforAutocomplete(input, templates.value, ['documentTemplateId', 'name']);
            });
            _this.onExternalInHouseSelected();
            _this.bindConfiguration();
            if ((_this.filteredTemplates.length === 1) &&
                (_this.invoiceExtInHouseCtrl.value === (_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceSourceType"][_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceSourceType"].Inhouse]))) {
                _this.invoiceTemplatesCtrl.patchValue(_this.filteredTemplates[0]);
                _this.onInvoiceTemplateSelected();
            }
        }));
        this.invoiceSourceType = this.getInvoiceSourceTypeEnum();
        this.invoiceExtInHouseCtrl.patchValue(_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceSourceType"][_shared_enums_invoice_source_type_enum__WEBPACK_IMPORTED_MODULE_7__["InvoiceSourceType"].Inhouse]);
        this.washoutAgreementDateCtrl.patchValue(this.companyManager.getCurrentCompanyDate().toDate());
        this.setValidators();
        this.onChanges();
    };
    InvoiceDocumentComponent.prototype.onAgreementDateChanged = function () {
        this.washoutAgreementDateCtrl.clearValidators();
        var agreementDate = moment(this.washoutAgreementDateCtrl.value);
        var currentDate = moment(this.companyManager.getCurrentCompanyDate());
        this.washoutAgreementDateCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required, Object(_shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_12__["agreementDateValidation"])(agreementDate, currentDate)]));
        this.washoutAgreementDateCtrl.updateValueAndValidity();
    };
    InvoiceDocumentComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            invoiceExtInHouseCtrl: this.invoiceExtInHouseCtrl,
            invoiceExtRefCtrl: this.invoiceExtRefCtrl,
            invoiceTemplatesCtrl: this.invoiceTemplatesCtrl,
            washoutAgreementDateCtrl: this.washoutAgreementDateCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    InvoiceDocumentComponent.prototype.populateEntity = function (entity) {
        var invoiceDocumentTemplate = entity;
        invoiceDocumentTemplate.template = this.invoiceTemplatesCtrl.value ?
            this.invoiceTemplatesCtrl.value.path : null;
        invoiceDocumentTemplate.externalInhouse = this.invoiceExtInHouseCtrl.value;
        invoiceDocumentTemplate.externalInvoiceRef = this.invoiceExtRefCtrl.value;
        invoiceDocumentTemplate.agreementDate = this.washoutAgreementDateCtrl.value;
        return invoiceDocumentTemplate;
    };
    InvoiceDocumentComponent.prototype.selectedWashoutContracts = function (contracts) {
        if (contracts.length > 0) {
            contracts = contracts.filter(function (contract) { return contract.contractType === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_5__["ContractTypes"].Purchase; });
            if (contracts.length > 0) {
                this.blDateTrade = (contracts[0].blDate != null) ? contracts[0].blDate :
                    (this.companyManager.getCurrentCompanyDate().toDate());
                this.washoutAgreementDateCtrl.patchValue(this.blDateTrade);
            }
        }
    };
    InvoiceDocumentComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-invoice-document',
            template: __webpack_require__(/*! ./invoice-document.component.html */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/invoice-document/invoice-document.component.html"),
            styles: [__webpack_require__(/*! ./invoice-document.component.scss */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/invoice-document/invoice-document.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_9__["DocumentService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_10__["ExecutionService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_11__["UtilService"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_3__["CompanyManagerService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationProviderService"]])
    ], InvoiceDocumentComponent);
    return InvoiceDocumentComponent;
}(_execution_invoicing_invoicing_base_form_document_template_base_document_template_base_component__WEBPACK_IMPORTED_MODULE_13__["DocumentTemplateBaseComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/payments/payments.component.html":
/*!**************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/payments/payments.component.html ***!
  \**************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-title>\r\n        <h2>Payments</h2>\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"2%\">\r\n            <mat-form-field fxFlex=\"30%\">\r\n                <mat-select placeholder=\"Payment Terms\"\r\n                            [formControl]=\"washoutPaymentTermsCtrl\"\r\n                            matTooltip=\"Payment Terms\">\r\n                    <mat-option *ngFor=\"let terms of paymentTermsOption\"\r\n                                [value]=\"terms.paymentTermCode\">{{terms.paymentTermCode}}</mat-option>\r\n                </mat-select>\r\n            </mat-form-field>\r\n            <mat-form-field fxFlex=\"30%\"\r\n                            class=\"mandatory\">\r\n                <input matInput\r\n                       placeholder=\"Due Date\"\r\n                       [formControl]=\"washoutDueDateCtrl\"\r\n                       [matDatepicker]=\"washoutDueDatePicker\"\r\n                       matTooltip=\"Due Date\"\r\n                       autocomplete=\"off\"\r\n                       (dateChange)='onInvoiceDueDateSelected()'>\r\n                <mat-datepicker-toggle matSuffix\r\n                                       [for]=\"washoutDueDatePicker\"></mat-datepicker-toggle>\r\n                <mat-datepicker #washoutDueDatePicker></mat-datepicker>\r\n                <mat-hint *ngIf=\"!washoutDueDateCtrl.hasError('isDateBeforeValid' || 'required') && !washoutDueDateCtrl.disabled\"\r\n                          class=\"invoice-creation-required-fields\">Required*</mat-hint>\r\n                <mat-error *ngIf=\"washoutDueDateCtrl.hasError('required')\">\r\n                    Required*\r\n                </mat-error>\r\n                <mat-error *ngIf=\"washoutDueDateCtrl.hasError('isDateBeforeValid')\">\r\n                    Value Date should be equal to or after the invoice date\r\n                </mat-error>\r\n            </mat-form-field>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/payments/payments.component.scss":
/*!**************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/payments/payments.component.scss ***!
  \**************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/payments/payments.component.ts":
/*!************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/payments/payments.component.ts ***!
  \************************************************************************************************************************************/
/*! exports provided: WashoutPaymentsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WashoutPaymentsComponent", function() { return WashoutPaymentsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/validators/date-validators.validator */ "./Client/app/shared/validators/date-validators.validator.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var moment = moment__WEBPACK_IMPORTED_MODULE_3__;
var WashoutPaymentsComponent = /** @class */ (function (_super) {
    __extends(WashoutPaymentsComponent, _super);
    function WashoutPaymentsComponent(formBuilder, route, companyManager, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.route = route;
        _this.companyManager = companyManager;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.washoutPaymentTermsCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_7__["AtlasFormControl"]('washoutPaymentTerms');
        _this.washoutDueDateCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_7__["AtlasFormControl"]('washoutDueDate');
        _this.masterdata = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_8__["MasterData"]();
        return _this;
    }
    WashoutPaymentsComponent.prototype.ngOnInit = function () {
        this.masterdata = this.route.snapshot.data.masterdata;
        this.paymentTermsOption = this.masterdata.paymentTerms;
        this.onChanges();
        this.onInvoiceDueDateSelected();
    };
    WashoutPaymentsComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            washoutPaymentTermsCtrl: this.washoutPaymentTermsCtrl,
            washoutDueDatePickerCtrl: this.washoutDueDateCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    WashoutPaymentsComponent.prototype.onInvoiceDueDateSelected = function () {
        this.washoutDueDateCtrl.clearValidators();
        this.washoutDueDateCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([Object(_shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_6__["invoiceDateValidation"])(this.washoutDueDateCtrl.value, moment(this.invoiceDateChanged)), _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]));
        this.washoutDueDateCtrl.updateValueAndValidity();
    };
    WashoutPaymentsComponent.prototype.populateEntity = function (entity) {
        var payments = entity;
        payments.paymentTerms = this.washoutPaymentTermsCtrl.value;
        payments.dueDate = this.washoutDueDateCtrl.value;
        return payments;
    };
    WashoutPaymentsComponent.prototype.getPaymentTermsCreditDays = function (paymentTerm) {
        if (this.masterdata.paymentTerms) {
            var selectedPaymentTerms = this.masterdata.paymentTerms.find(function (payTerms) { return payTerms.paymentTermCode === paymentTerm; });
            if (selectedPaymentTerms) {
                return selectedPaymentTerms.creditDays;
            }
        }
    };
    WashoutPaymentsComponent.prototype.onChanges = function () {
        var _this = this;
        this.washoutPaymentTermsCtrl.valueChanges.subscribe(function (input) {
            _this.washoutDueDateCtrl.patchValue(_this.companyManager.getCurrentCompanyDate()
                .add('days', _this.getPaymentTermsCreditDays(input)));
        });
    };
    WashoutPaymentsComponent.prototype.setPaymentTerms = function (paymentTerm) {
        this.washoutPaymentTermsCtrl.patchValue(paymentTerm);
    };
    WashoutPaymentsComponent.prototype.setPaymentFieldsForSummary = function (model) {
        this.washoutPaymentTermsCtrl.patchValue(model.paymentTerms);
        this.washoutDueDateCtrl.patchValue(model.dueDate);
    };
    WashoutPaymentsComponent.prototype.setValuesForSummaryFromGrid = function (summaryRecord) {
        this.washoutPaymentTermsCtrl.patchValue(summaryRecord.paymentTermsCode);
        this.washoutDueDateCtrl.patchValue(summaryRecord.dueDate);
    };
    WashoutPaymentsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-payments',
            template: __webpack_require__(/*! ./payments.component.html */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/payments/payments.component.html"),
            styles: [__webpack_require__(/*! ./payments.component.scss */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/payments/payments.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__["CompanyManagerService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_9__["FormConfigurationProviderService"]])
    ], WashoutPaymentsComponent);
    return WashoutPaymentsComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/selection/selection.component.html":
/*!****************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/selection/selection.component.html ***!
  \****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card fxFlex=\"100\">\r\n    <mat-card-title>\r\n        Invoice Selection\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\"\r\n             fxLayoutGap=\"5%\">\r\n            <mat-form-field fxFlex=\"49\"\r\n                            class=\"margin-bottom\">\r\n                <input matInput\r\n                       [matDatepicker]=\"washoutInvoiceDatePicker\"\r\n                       placeholder=\"Invoice date\"\r\n                       [matTooltip]=\"'Invoice date'\"\r\n                       [formControl]='washoutInvoiceDateCtrl'\r\n                       autocomplete=\"off\"\r\n                       (dateChange)='onWashoutInvoiceDateSelected()'>\r\n                <mat-hint *ngIf=\"isDateAfterValid\">Invoice Date is in Future</mat-hint>\r\n                <mat-datepicker-toggle matSuffix\r\n                                       [for]=\"washoutInvoiceDatePicker\"></mat-datepicker-toggle>\r\n                <mat-datepicker #washoutInvoiceDatePicker></mat-datepicker>\r\n                <mat-error *ngIf=\"washoutInvoiceDateCtrl.hasError('isDateBeforeValid')\">\r\n                    Invoice Date can be equal to or after the contract date\r\n                </mat-error>\r\n            </mat-form-field>\r\n            <mat-form-field fxFlex=\"49\"\r\n                            class=\"mat-read-only-field\">\r\n                <input matInput\r\n                       placeholder=\"Counterparty\"\r\n                       [matTooltip]=\"'Counterparty'\"\r\n                       [formControl]=\"counterpartyCtrl\"\r\n                       autocomplete=\"off\"\r\n                       readonly>\r\n            </mat-form-field>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"left start\">\r\n            <mat-form-field fxFlex=\"32%\"\r\n                            class=\"mat-read-only-field\">\r\n                <input matInput\r\n                       placeholder=\"Invoice Type\"\r\n                       [formControl]='washoutInvoiceTypeCtrl'\r\n                       autocomplete=\"off\"\r\n                       readonly>\r\n            </mat-form-field>\r\n        </div>\r\n        <mat-divider class=\"mat-divider-washout\"></mat-divider>\r\n        <div class=\"toggle-washout\"\r\n             fxLayoutAlign=\"left start\">\r\n            <mat-slide-toggle [checked]=\"true\"\r\n                              [formControl]=\"authorizePostingCtrl\">Authorize for posting</mat-slide-toggle>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/selection/selection.component.scss":
/*!****************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/selection/selection.component.scss ***!
  \****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".mat-divider-washout {\n  margin-top: 2%; }\n\n.toggle-washout {\n  margin-top: 5.7%; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/selection/selection.component.ts":
/*!**************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/selection/selection.component.ts ***!
  \**************************************************************************************************************************************/
/*! exports provided: SelectionComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SelectionComponent", function() { return SelectionComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/validators/date-validators.validator */ "./Client/app/shared/validators/date-validators.validator.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var moment = moment__WEBPACK_IMPORTED_MODULE_3__;
var SelectionComponent = /** @class */ (function (_super) {
    __extends(SelectionComponent, _super);
    function SelectionComponent(route, formBuilder, companyManager, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.companyManager = companyManager;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.washoutInvoiceDateCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('WashoutInvoiceDateCtrl');
        _this.counterpartyCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('WashoutCounterParty');
        _this.washoutInvoiceTypeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('WashoutInvoiceType');
        _this.authorizePostingCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_6__["AtlasFormControl"]('WashoutAuthorizeForPosting');
        _this.masterdata = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_7__["MasterData"]();
        _this.invoiceDate = _this.companyManager.getCurrentCompanyDate().toDate();
        _this.invoiceDateChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        return _this;
    }
    SelectionComponent.prototype.ngOnInit = function () {
        this.washoutInvoiceDateCtrl.setValue(this.companyManager.getCurrentCompanyDate().toDate());
        this.masterdata = this.route.snapshot.data.masterdata;
        this.getData();
    };
    SelectionComponent.prototype.getData = function () {
        var invoiceTypeId = Number(decodeURIComponent(this.route.snapshot.paramMap.get('invoiceTypeId')));
        this.invoiceTypeDescription = this.masterdata.
            invoiceTypes.find(function (invoiceType) { return invoiceType.invoiceTypeId === invoiceTypeId; }).name;
        this.washoutInvoiceTypeCtrl.patchValue(this.invoiceTypeDescription);
    };
    SelectionComponent.prototype.setDefaultAuthorizeForPosting = function (defaultAuthorizeForPosting) {
        this.authorizePostingCtrl.setValue(defaultAuthorizeForPosting);
    };
    SelectionComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            washoutInvoiceDateCtrl: this.washoutInvoiceDateCtrl,
            counterpartyCtrl: this.counterpartyCtrl,
            washoutInvoiceTypeCtrl: this.washoutInvoiceTypeCtrl,
            authorizePostingCtrl: this.authorizePostingCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    SelectionComponent.prototype.selectedWashoutContracts = function (washoutContracts) {
        this.setInvoiceDate(washoutContracts);
    };
    SelectionComponent.prototype.setInvoiceDate = function (washoutContracts) {
        this.dates = Array.from(washoutContracts, function (contracts) { return contracts.contractDate; });
        var moments = this.dates.map(function (date) { return moment(date); }), maxDate = moment.max(moments);
        this.maxDate = maxDate;
    };
    SelectionComponent.prototype.counterPartySelected = function (counterPartySelected) {
        this.counterpartyCtrl.patchValue(this.masterdata.counterparties.find(function (counterParty) { return counterParty.counterpartyCode === counterPartySelected; }).description);
    };
    SelectionComponent.prototype.onWashoutInvoiceDateSelected = function () {
        this.invoiceDate = new Date(this.washoutInvoiceDateCtrl.value);
        this.washoutInvoiceDateCtrl.clearValidators();
        this.isDateAfterValid = false;
        this.invoiceFutureValidation(this.invoiceDate);
        this.washoutInvoiceDateCtrl.setValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([Object(_shared_validators_date_validators_validator__WEBPACK_IMPORTED_MODULE_9__["invoiceDateValidation"])(this.invoiceDate, this.maxDate)]));
        this.washoutInvoiceDateCtrl.updateValueAndValidity();
        if (this.washoutInvoiceDateCtrl.valid) {
            this.invoiceDateChanged.emit(this.washoutInvoiceDateCtrl.value);
        }
    };
    SelectionComponent.prototype.invoiceFutureValidation = function (invoiceDate) {
        var invoiceMoment = moment(invoiceDate);
        if (invoiceMoment.isAfter(this.companyManager.getCurrentCompanyDate())) {
            this.isDateAfterValid = true;
        }
    };
    SelectionComponent.prototype.populateEntity = function (entity) {
        var _this = this;
        var invoiceSelection = entity;
        invoiceSelection.invoiceDate = this.washoutInvoiceDateCtrl.value;
        invoiceSelection.authorizedForPosting = this.authorizePostingCtrl.value;
        if (this.masterdata) {
            var requiredCounterParty = this.masterdata.counterparties.find(function (counterParty) { return counterParty.description === _this.counterpartyCtrl.value; });
            if (requiredCounterParty) {
                invoiceSelection.counterpartyCode = requiredCounterParty.counterpartyCode;
            }
        }
        return invoiceSelection;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], SelectionComponent.prototype, "invoiceDateChanged", void 0);
    SelectionComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-selection',
            template: __webpack_require__(/*! ./selection.component.html */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/selection/selection.component.html"),
            styles: [__webpack_require__(/*! ./selection.component.scss */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/selection/selection.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__["CompanyManagerService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationProviderService"]])
    ], SelectionComponent);
    return SelectionComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/tax-costs/tax-costs.component.html":
/*!****************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/tax-costs/tax-costs.component.html ***!
  \****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-title>\r\n        Taxes for Cost\r\n        <button mat-icon-button\r\n                [matMenuTriggerFor]=\"menu1\"\r\n                style=\"float: right\">\r\n            <i class=\"material-icons\">more_vert</i>\r\n        </button>\r\n        <mat-menu #menu1=\"matMenu\">\r\n            <button mat-menu-item\r\n                    [matMenuTriggerFor]=\"exportMenu\">\r\n                <mat-icon>import_export</mat-icon><span>Export</span>\r\n            </button>\r\n        </mat-menu>\r\n        <mat-menu #exportMenu=\"matMenu\">\r\n            <button mat-menu-item\r\n                    (click)=\"onExportButtonClickedAsExcel()\">\r\n                <mat-icon>import_export</mat-icon><span>Export as Excel</span>\r\n            </button>\r\n            <button mat-menu-item\r\n                    (click)=\"onExportButtonClickedAsCSV()\">\r\n                <mat-icon>import_export</mat-icon><span>Export as CSV</span>\r\n            </button>\r\n        </mat-menu>\r\n    </mat-card-title>\r\n\r\n    <mat-card-content>\r\n\r\n        <ag-grid-angular class=\"ag-theme-material\"\r\n                         [rowData]=\"taxesGridRows\"\r\n                         [columnDefs]=\"taxesGridColumns\"\r\n                         domLayout=\"autoHeight\"\r\n                         (gridReady)=\"onGridReady($event)\"\r\n                         [pagination]=\"false\"\r\n                         [paginationPageSize]=\"10\"\r\n                         [enableSorting]=\"true\"\r\n                         [enableColResize]=\"true\"\r\n                         enableFilter\r\n                         [rowHeight]=atlasAgGridParam.rowHeight>\r\n        </ag-grid-angular>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"end\">\r\n            <mat-card-subtitle class=\"no-margin total-figure\">Total Tax Amount: <span\r\n                      class=\"total-figure-value\">{{defaultTaxDirectionSign}}{{formatQuantityAndTotal(this.taxTotal)}}\r\n                    {{currencyCode}}</span>\r\n            </mat-card-subtitle>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/tax-costs/tax-costs.component.scss":
/*!****************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/tax-costs/tax-costs.component.scss ***!
  \****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".ag-theme-material {\n  margin-bottom: 0px; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/tax-costs/tax-costs.component.ts":
/*!**************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/tax-costs/tax-costs.component.ts ***!
  \**************************************************************************************************************************************/
/*! exports provided: TaxCostsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaxCostsComponent", function() { return TaxCostsComponent; });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../core/services/authorization.service */ "./Client/app/core/services/authorization.service.ts");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-sign.enum */ "./Client/app/shared/enums/cost-sign.enum.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_execution_dtos_tax_record__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../../../shared/services/execution/dtos/tax-record */ "./Client/app/shared/services/execution/dtos/tax-record.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};













var TaxCostsComponent = /** @class */ (function (_super) {
    __extends(TaxCostsComponent, _super);
    function TaxCostsComponent(route, formConfigurationProvider, uiService, datePipe, authorizationService, companyManagerService, gridService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.uiService = uiService;
        _this.datePipe = datePipe;
        _this.authorizationService = authorizationService;
        _this.companyManagerService = companyManagerService;
        _this.gridService = gridService;
        _this.totalCostTaxCalculated = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        _this.taxesGridOptions = {};
        _this.isGroupingEnabled = false;
        _this.costDirectionDisplay = '';
        _this.debit = 'Dr';
        _this.credit = 'Cr';
        _this.masterdata = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_6__["MasterData"]();
        _this.costTotal = 0;
        _this.total = 0;
        _this.taxTotal = 0;
        _this.currencyCode = '';
        _this.pricingOptionValue = 0;
        _this.decimalOptionValue = 2;
        _this.formatType = 'en-US';
        _this.costDirectionPay = 'Pay';
        _this.defaultTaxDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_8__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_7__["CostDirections"].Payable];
        _this.atlasAgGridParam = _this.gridService.getAgGridParam();
        _this.userActiveDirectoryName = _this.authorizationService.getCurrentUser().samAccountName;
        _this.company = _this.companyManagerService.getCurrentCompanyId();
        return _this;
    }
    TaxCostsComponent.prototype.ngOnInit = function () {
        this.initializeGridColumns();
        this.masterdata = this.route.snapshot.data.masterdata;
    };
    TaxCostsComponent.prototype.onGridReady = function (params) {
        var _this = this;
        params.columnDefs = this.taxesGridColumns;
        this.taxesGridOptions = params;
        this.gridApi = params.api;
        this.gridColumnApi = params.columnApi;
        this.gridColumnApi.autoSizeAllColumns();
        window.onresize = function () {
            _this.gridColumnApi.autoSizeAllColumns();
        };
    };
    TaxCostsComponent.prototype.initializeGridColumns = function () {
        this.taxesGridColumns = [
            {
                headerName: 'VAT Code',
                field: 'vatCode',
                colId: 'vatCode',
                hide: false,
            },
            {
                headerName: 'Description',
                field: 'vatDescription',
                colId: 'vatDescription',
                hide: false,
            },
            {
                headerName: 'VAT Amount',
                field: 'rate',
                colId: 'rate',
                hide: false,
                valueFormatter: this.vatAmountFormatter.bind(this),
            },
        ];
    };
    TaxCostsComponent.prototype.vatAmountFormatter = function (param) {
        return Math.abs(param.value);
    };
    TaxCostsComponent.prototype.setDefaultVatCode = function (defaultVatCode) {
        var _this = this;
        this.vatCode = this.masterdata.vats.filter(function (option) { return option.vatCode === defaultVatCode; });
        var defaultTaxRecord = [];
        this.vatCode.forEach(function (data) {
            var taxLine = new _shared_services_execution_dtos_tax_record__WEBPACK_IMPORTED_MODULE_10__["TaxRecord"]();
            taxLine.vatCode = data.vatCode;
            taxLine.vatDescription = data.vatDescription;
            taxLine.rate = data.rate;
            taxLine.costDirection = _this.credit;
            defaultTaxRecord.push(taxLine);
        });
        if (defaultTaxRecord) {
            this.taxRecordsSelected(defaultTaxRecord);
        }
    };
    TaxCostsComponent.prototype.taxRecordsSelected = function (taxesRecord) {
        if (taxesRecord.length > 0) {
            this.initializeGridColumns();
            this.taxesGridRows = taxesRecord;
            this.calculateTotalAmount(taxesRecord);
            if (this.gridApi) {
                this.gridApi.hideOverlay();
            }
        }
    };
    TaxCostsComponent.prototype.setDirectionAndCurrency = function (data) {
        this.costDirectionDisplay = data.costDirection;
        this.currencyCode = data.currencyCode;
    };
    TaxCostsComponent.prototype.calculateTotalAmount = function (taxes) {
        var _this = this;
        this.total = 0;
        this.taxTotal = 0;
        taxes.forEach(function (tax) {
            _this.taxTotal = _this.taxTotal + Math.abs(tax.rate);
        });
        this.totalCostTaxCalculated.emit({
            amount: this.taxTotal,
            decimalOption: this.decimalOptionValue,
            currencyCode: this.currencyCode,
            costDirection: this.costDirectionDisplay,
        });
    };
    TaxCostsComponent.prototype.formatQuantityAndTotal = function (input) {
        var formattedInput = new Intl.NumberFormat(this.formatType, { minimumFractionDigits: this.decimalOptionValue }).format(input);
        return formattedInput.toLocaleString();
    };
    TaxCostsComponent.prototype.calculateTotalForSummary = function (costInvoiceRecord) {
        this.total = costInvoiceRecord.totalVatAmount;
        this.currencyCode = costInvoiceRecord.currencyCode;
    };
    TaxCostsComponent.prototype.getTaxesForSelectedVat = function (model) {
        if (model) {
            this.costTotal = model.rate;
            this.decimalOptionValue = model.decimalOption;
            this.currencyCode = model.currencyCode;
            this.totalCostDirection = model.costDirection;
            if (model.costDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_7__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_7__["CostDirections"].Payable]) {
                this.costDirectionDisplay = this.credit;
            }
            else if (model.costDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_7__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_7__["CostDirections"].Receivable]) {
                this.costDirectionDisplay = this.debit;
            }
            this.taxRecordsSelected(model.vatAvailable);
        }
    };
    TaxCostsComponent.prototype.onExportButtonClickedAsExcel = function () {
        var screenName = 'Taxes for Cost';
        var now = new Date();
        var todayDate = this.datePipe.transform(now, 'yyyyMMdd_hhmm').toString().toUpperCase();
        var params = {
            fileName: todayDate + '_' + this.company + '_' + screenName + '_' + this.userActiveDirectoryName + '.xlsx',
        };
        this.gridApi.exportDataAsExcel(params);
    };
    TaxCostsComponent.prototype.onExportButtonClickedAsCSV = function () {
        var screenName = 'Taxes for Cost';
        var now = new Date();
        var todayDate = this.datePipe.transform(now, 'yyyyMMdd_hhmm').toString().toUpperCase();
        var params = {
            fileName: todayDate + '_' + this.company + '_' + screenName + '_' + this.userActiveDirectoryName + '.csv',
        };
        this.gridApi.exportDataAsCsv(params);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])(),
        __metadata("design:type", Object)
    ], TaxCostsComponent.prototype, "totalCostTaxCalculated", void 0);
    TaxCostsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: 'atlas-tax-costs',
            template: __webpack_require__(/*! ./tax-costs.component.html */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/tax-costs/tax-costs.component.html"),
            styles: [__webpack_require__(/*! ./tax-costs.component.scss */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/tax-costs/tax-costs.component.scss")],
            providers: [_angular_common__WEBPACK_IMPORTED_MODULE_0__["DatePipe"]]
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"], _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_11__["FormConfigurationProviderService"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_12__["UiService"], _angular_common__WEBPACK_IMPORTED_MODULE_0__["DatePipe"],
            _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_3__["AuthorizationService"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__["CompanyManagerService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_9__["AgGridService"]])
    ], TaxCostsComponent);
    return TaxCostsComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/tax-goods/tax-goods.component.html":
/*!****************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/tax-goods/tax-goods.component.html ***!
  \****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"invoice-creation-card\">\r\n    <mat-card-title>\r\n        <h2>Taxes</h2>\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"none center\"\r\n             fxLayoutGap=\"10px\">\r\n            <div fxFlex=\"25\"\r\n                 fxFlex.xs=\"25\"\r\n                 fxFlex.sm=\"25\">\r\n                <mat-form-field>\r\n                    <mat-select placeholder=\"Goods VAT Code\"\r\n                                [formControl]=\"goodsVatCodeCtrl\"\r\n                                matTooltip=\"VAT Code\"\r\n                                [panelWidth]=\"panelSize\"\r\n                                (optionSelected)=\"vatCodeSelected($event.option.value)\">\r\n                        <mat-option *ngFor=\"let vatCode of filteredVatCodes\"\r\n                                    [value]=\"vatCode.vatCode\">\r\n                            {{vatCode.vatCode}} | {{vatCode.vatDescription}}\r\n                        </mat-option>\r\n                    </mat-select>\r\n                </mat-form-field>\r\n            </div>\r\n            <div fxFlex=\"25\"\r\n                 fxFlex.xs=\"25\"\r\n                 fxFlex.sm=\"25\">\r\n                <atlas-form-input [fieldControl]=\"descriptionCtrl\"\r\n                                  [isEditable]=\"isInputField\"\r\n                                  label=\"Description\">\r\n                </atlas-form-input>\r\n            </div>\r\n            <div fxFlex=\"25\"\r\n                 fxFlex.xs=\"25\"\r\n                 fxFlex.sm=\"25\">\r\n                <atlas-form-input [fieldControl]=\"vatAmountForGoodsCtrl\"\r\n                                  [isEditable]=\"isInputField\"\r\n                                  label=\"Vat Amount For Goods\">\r\n                </atlas-form-input>\r\n            </div>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/tax-goods/tax-goods.component.scss":
/*!****************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/tax-goods/tax-goods.component.scss ***!
  \****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/tax-goods/tax-goods.component.ts":
/*!**************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/tax-goods/tax-goods.component.ts ***!
  \**************************************************************************************************************************************/
/*! exports provided: TaxGoodsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaxGoodsComponent", function() { return TaxGoodsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/entities/masterdata-props.entity */ "./Client/app/shared/entities/masterdata-props.entity.ts");
/* harmony import */ var _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/entities/masterdata.entity */ "./Client/app/shared/entities/masterdata.entity.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var TaxGoodsComponent = /** @class */ (function (_super) {
    __extends(TaxGoodsComponent, _super);
    function TaxGoodsComponent(route, formBuilder, masterdataService, utilService, formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.masterdataService = masterdataService;
        _this.utilService = utilService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.selectedGoodsTaxCode = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.goodsVatCodeCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_3__["AtlasFormControl"]('invoiceCreationGoodsVatCode');
        _this.descriptionCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_3__["AtlasFormControl"]('invoiceCreationVatRate');
        _this.vatAmountForGoodsCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_3__["AtlasFormControl"]('invoiceCreationVatAmount');
        _this.masterdata = new _shared_entities_masterdata_entity__WEBPACK_IMPORTED_MODULE_5__["MasterData"]();
        _this.masterdataList = [
            _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_4__["MasterDataProps"].Vats,
        ];
        _this.isInputField = false;
        return _this;
    }
    TaxGoodsComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.masterdata = this.route.snapshot.data.masterdata;
        if (this.masterdata) {
            this.filteredVatCodes = this.masterdata.vats;
            this.goodsVatCodeCtrl.valueChanges.subscribe(function (input) {
                _this.filteredVatCodes =
                    _this.utilService.filterListforAutocomplete(input, _this.masterdata.vats, ['vatCode', 'vatDescription']);
            });
            this.bindConfiguration();
        }
        this.onChanges();
    };
    TaxGoodsComponent.prototype.onChanges = function () {
        var _this = this;
        this.goodsVatCodeCtrl.valueChanges.subscribe(function (val) {
            _this.selectedGoodsTaxCode.emit(_this.goodsVatCodeCtrl.value);
        });
    };
    TaxGoodsComponent.prototype.setDefaultVatCode = function (defaultVatCode) {
        var _this = this;
        this.defaultVatCode = defaultVatCode;
        if (this.defaultVatCode) {
            var vatCode = this.masterdata.vats.filter(function (option) { return option.vatCode === _this.defaultVatCode; });
            if (vatCode.length > 0) {
                this.goodsVatCodeCtrl.patchValue(vatCode[0].vatCode);
                this.descriptionCtrl.patchValue(vatCode[0].vatDescription);
                this.vatAmountForGoodsCtrl.patchValue(vatCode[0].rate);
            }
        }
    };
    TaxGoodsComponent.prototype.setDataForTaxGoods = function (summaryLines, defaultVATCode) {
        var _this = this;
        summaryLines.map(function (record) {
            if (record.sectionId) {
                _this.defaultVatCode = record.vatCode;
            }
        });
        if (!this.defaultVatCode) {
            this.defaultVatCode = defaultVATCode;
        }
        this.setDefaultVatCode(this.defaultVatCode);
    };
    TaxGoodsComponent.prototype.getFormGroup = function () {
        this.formGroup = this.formBuilder.group({
            goodsVatCodeCtrl: this.goodsVatCodeCtrl,
            descriptionCtrl: this.descriptionCtrl,
            vatAmountForGoodsCtrl: this.vatAmountForGoodsCtrl,
        });
        return _super.prototype.getFormGroup.call(this);
    };
    TaxGoodsComponent.prototype.vatCodeSelected = function (vatCode) {
        var selectedVatCode = this.masterdata.vats.find(function (vat) { return vat.vatCode === vatCode; });
        this.descriptionCtrl.patchValue(selectedVatCode.vatDescription);
        this.vatAmountForGoodsCtrl.patchValue(selectedVatCode.rate);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], TaxGoodsComponent.prototype, "selectedGoodsTaxCode", void 0);
    TaxGoodsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-tax-goods',
            template: __webpack_require__(/*! ./tax-goods.component.html */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/tax-goods/tax-goods.component.html"),
            styles: [__webpack_require__(/*! ./tax-goods.component.scss */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/tax-goods/tax-goods.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_9__["ActivatedRoute"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_7__["MasterdataService"],
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_8__["UtilService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__["FormConfigurationProviderService"]])
    ], TaxGoodsComponent);
    return TaxGoodsComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_2__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/value-of-goods/value-of-goods.component.html":
/*!**************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/value-of-goods/value-of-goods.component.html ***!
  \**************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card>\r\n    <mat-card-title>\r\n        Value of Goods\r\n        <button mat-icon-button\r\n                [matMenuTriggerFor]=\"menu1\"\r\n                style=\"float: right\">\r\n            <i class=\"material-icons\">more_vert</i>\r\n        </button>\r\n        <mat-menu #menu1=\"matMenu\">\r\n            <button mat-menu-item\r\n                    [matMenuTriggerFor]=\"exportMenu\">\r\n                <mat-icon>import_export</mat-icon><span>Export</span>\r\n            </button>\r\n        </mat-menu>\r\n        <mat-menu #exportMenu=\"matMenu\">\r\n            <button mat-menu-item\r\n                    (click)=\"onExportButtonClickedAsExcel()\">\r\n                <mat-icon>import_export</mat-icon><span>Export as Excel</span>\r\n            </button>\r\n            <button mat-menu-item\r\n                    (click)=\"onExportButtonClickedAsCSV()\">\r\n                <mat-icon>import_export</mat-icon><span>Export as CSV</span>\r\n            </button>\r\n        </mat-menu>\r\n    </mat-card-title>\r\n\r\n    <mat-card-content>\r\n        <div ag-grid=\"valueOfGoodsGridOptions\"\r\n             class=\"ag-theme-material pointer-cursor\">\r\n            <ag-grid-angular class=\"ag-theme-material\"\r\n                             [rowData]=\"valueOfGoodsGridRows\"\r\n                             [columnDefs]=\"valueOfGoodsGridColumns\"\r\n                             [gridOptions]=\"valueOfGoodsGridOptions\"\r\n                             domLayout=\"autoHeight\"\r\n                             (gridReady)=\"onGridReady($event)\"\r\n                             [pagination]=\"true\"\r\n                             [paginationPageSize]=\"10\"\r\n                             [enableSorting]=\"true\"\r\n                             [enableColResize]=\"true\"\r\n                             [enableFilter]=\"true\"\r\n                             [animateRows]=\"true\"\r\n                             [groupUseEntireRow]=\"true\"\r\n                             enableFilter\r\n                             [rowHeight]=atlasAgGridParam.rowHeight>\r\n            </ag-grid-angular>\r\n        </div>\r\n        <div fxLayout=\"row\"\r\n             fxLayoutAlign=\"end\">\r\n            <mat-card-subtitle class=\"total-figure\">\r\n                Total: <span class=\"total-figure-value\"> {{debitCreditSign}}{{formatQuantityAndTotal(this.total)}}\r\n                    {{this.currencyCode}} </span>\r\n            </mat-card-subtitle>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/value-of-goods/value-of-goods.component.scss":
/*!**************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/value-of-goods/value-of-goods.component.scss ***!
  \**************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".value-of-goods-float-right {\n  float: right;\n  margin-top: 16px; }\n\n.ag-root-wrapper {\n  width: 100%; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/value-of-goods/value-of-goods.component.ts":
/*!************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/value-of-goods/value-of-goods.component.ts ***!
  \************************************************************************************************************************************************/
/*! exports provided: WashoutValueOfGoodsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WashoutValueOfGoodsComponent", function() { return WashoutValueOfGoodsComponent; });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../core/services/authorization.service */ "./Client/app/core/services/authorization.service.ts");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_entities_invoice_line_record_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/entities/invoice-line-record.entity */ "./Client/app/shared/entities/invoice-line-record.entity.ts");
/* harmony import */ var _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../../shared/enums/contract-type.enum */ "./Client/app/shared/enums/contract-type.enum.ts");
/* harmony import */ var _shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-direction-type.enum */ "./Client/app/shared/enums/cost-direction-type.enum.ts");
/* harmony import */ var _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-sign.enum */ "./Client/app/shared/enums/cost-sign.enum.ts");
/* harmony import */ var _shared_enums_discount_basis_enum__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../../../shared/enums/discount-basis.enum */ "./Client/app/shared/enums/discount-basis.enum.ts");
/* harmony import */ var _shared_enums_discount_type_enum__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../../../shared/enums/discount-type.enum */ "./Client/app/shared/enums/discount-type.enum.ts");
/* harmony import */ var _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../../../shared/services/ag-grid.service */ "./Client/app/shared/services/ag-grid.service.ts");
/* harmony import */ var _shared_services_execution_dtos_contracts_to_washout_invoice__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../../../shared/services/execution/dtos/contracts-to-washout-invoice */ "./Client/app/shared/services/execution/dtos/contracts-to-washout-invoice.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../../../shared/services/ui.service */ "./Client/app/shared/services/ui.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
















var WashoutValueOfGoodsComponent = /** @class */ (function (_super) {
    __extends(WashoutValueOfGoodsComponent, _super);
    function WashoutValueOfGoodsComponent(formBuilder, formConfigurationProvider, uiService, datePipe, authorizationService, companyManagerService, gridService) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.uiService = uiService;
        _this.datePipe = datePipe;
        _this.authorizationService = authorizationService;
        _this.companyManagerService = companyManagerService;
        _this.gridService = gridService;
        _this.totalAmountCalculated = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        _this.currencyCode = '';
        _this.creditDebit = '';
        _this.decimalOptionValue = 2;
        _this.valueOfGoodsGridOptions = {};
        _this.gridContext = {
            gridEditable: false,
        };
        _this.totalQuantity = 0;
        _this.total = 0;
        _this.formatType = 'en-US';
        _this.weightCode = '';
        _this.weightedAverage = 0;
        _this.debitCredit = '';
        _this.atlasAgGridParam = _this.gridService.getAgGridParam();
        _this.userActiveDirectoryName = _this.authorizationService.getCurrentUser().samAccountName;
        _this.company = _this.companyManagerService.getCurrentCompanyId();
        return _this;
    }
    WashoutValueOfGoodsComponent.prototype.ngOnInit = function () {
        this.gridContext.gridEditable = false;
        this.initializeGridColumns();
    };
    WashoutValueOfGoodsComponent.prototype.onGridReady = function (params) {
        this.gridApi = params.api;
        params.columnDefs = this.valueOfGoodsGridColumns;
        this.valueOfGoodsGridOptions = params;
        this.gridColumnApi = params.columnApi;
        this.gridColumnApi.autoSizeAllColumns();
    };
    // this will be removed once testing is done for grid autosize
    WashoutValueOfGoodsComponent.prototype.autoSizeGridHeader = function () {
        var allColumnIds = [];
        if (this.valueOfGoodsGridColumns) {
            this.valueOfGoodsGridColumns.forEach(function (columnDefs) {
                allColumnIds.push(columnDefs.field);
            });
            this.gridColumnApi.autoSizeColumns(allColumnIds);
        }
    };
    WashoutValueOfGoodsComponent.prototype.onGridSizeChanged = function (params) {
        this.gridColumnApi.autoSizeAllColumns();
    };
    WashoutValueOfGoodsComponent.prototype.initializeGridColumns = function () {
        var _this = this;
        this.valueOfGoodsGridOptions = {
            context: this.gridContext,
        };
        this.valueOfGoodsGridColumns = [
            {
                headerName: 'Counter party',
                field: 'counterparty',
                colId: 'counterparty',
                hide: false,
            },
            {
                headerName: 'Contract Reference',
                field: 'contractReference',
                colId: 'contractReference',
                hide: false,
            },
            {
                headerName: 'Contract Commodity',
                field: 'principalCommodity',
                colId: 'principalCommodity',
                hide: false,
            },
            {
                headerName: 'Contract Quantity',
                field: 'quantity',
                colId: 'quantity',
                type: 'numericColumn',
                hide: false,
                valueFormatter: function (params) { return (_this.decimalFormatter((!params.node.group ? params.data.quantity : params.value), _this.decimalOptionValue, _this.formatType)); },
            },
            {
                headerName: 'Premium/Discount',
                field: 'premiumDiscountValue',
                colId: 'premiumDiscountValue',
                valueFormatter: this.formatPremiumDiscount,
                hide: false,
            },
            {
                headerName: 'Quantity Code',
                field: 'quantityCode',
                colId: 'quantityCode',
                hide: false,
            },
            {
                headerName: 'Price Code',
                field: 'priceCode',
                colId: 'priceCode',
                hide: false,
            },
            {
                headerName: 'Price',
                field: 'price',
                colId: 'price',
                type: 'numericColumn',
                valueFormatter: function (params) { return (_this.decimalFormatter((!params.node.group ? params.data.price : params.value), _this.decimalOptionValue, _this.formatType)); },
                hide: false,
            },
            {
                headerName: 'Currency Code',
                field: 'currencyCode',
                colId: 'currencyCode',
                hide: false,
            },
            {
                headerName: 'Amount',
                field: 'totalInvoiceValue',
                colId: 'totalInvoiceValue',
                type: 'numericColumn',
                valueFormatter: function (params) { return (_this.decimalFormatter((!params.node.group ? params.data.totalInvoiceValue : params.value), _this.decimalOptionValue, _this.formatType)); },
                valueGetter: this.getAmount.bind(this),
                hide: false,
            },
        ];
    };
    WashoutValueOfGoodsComponent.prototype.formatPremiumDiscount = function (params) {
        if (params.data.premiumDiscountType === _shared_enums_discount_type_enum__WEBPACK_IMPORTED_MODULE_11__["DiscountTypes"].Premium) {
            return '+' + params.data.premiumDiscountValue;
        }
        else if (params.data.premiumDiscountType === _shared_enums_discount_type_enum__WEBPACK_IMPORTED_MODULE_11__["DiscountTypes"].Discount) {
            return '-' + params.data.premiumDiscountValue;
        }
        else {
            return params.data.premiumDiscountValue;
        }
    };
    WashoutValueOfGoodsComponent.prototype.selectedWashoutContracts = function (contracts) {
        if (contracts.length > 0) {
            this.initializeGridColumns();
            this.valueOfGoodsGridRows = contracts;
            this.calculateTotal(contracts);
        }
    };
    WashoutValueOfGoodsComponent.prototype.getAmount = function (params) {
        if (params.data.premiumDiscountType === _shared_enums_discount_type_enum__WEBPACK_IMPORTED_MODULE_11__["DiscountTypes"].Premium) {
            params.data.totalInvoiceValue = this.setInvoiceValueForPremium(params.data);
        }
        else if (params.data.premiumDiscountType === _shared_enums_discount_type_enum__WEBPACK_IMPORTED_MODULE_11__["DiscountTypes"].Discount) {
            params.data.totalInvoiceValue = this.setInvoiceValueForDiscount(params.data);
        }
        this.calculateTotal(this.valueOfGoodsGridRows);
        return (params.data.totalInvoiceValue);
    };
    WashoutValueOfGoodsComponent.prototype.setInvoiceValueForDiscount = function (params) {
        if (params) {
            if (params.quantity && params.price &&
                params.priceConversionFactor && params.weightConversionFactor) {
                if (params.premiumDiscountBasis === _shared_enums_discount_basis_enum__WEBPACK_IMPORTED_MODULE_10__["DiscountBasis"].Rate) {
                    return params.quantity *
                        (params.price - params.premiumDiscountValue) *
                        params.priceConversionFactor * params.weightConversionFactor;
                }
                else if (params.premiumDiscountBasis === _shared_enums_discount_basis_enum__WEBPACK_IMPORTED_MODULE_10__["DiscountBasis"].Percent) {
                    return params.quantity *
                        (params.price * (1 - (params.premiumDiscountValue / 100))) *
                        params.priceConversionFactor * params.weightConversionFactor;
                }
                else {
                    return params.quantity * params.price *
                        params.priceConversionFactor * params.weightConversionFactor;
                }
            }
        }
    };
    WashoutValueOfGoodsComponent.prototype.setInvoiceValueForPremium = function (params) {
        if (params) {
            if (params.premiumDiscountBasis === _shared_enums_discount_basis_enum__WEBPACK_IMPORTED_MODULE_10__["DiscountBasis"].Rate) {
                return params.quantity *
                    (params.price + params.premiumDiscountValue) *
                    params.priceConversionFactor * params.weightConversionFactor;
            }
            else if (params.premiumDiscountBasis === _shared_enums_discount_basis_enum__WEBPACK_IMPORTED_MODULE_10__["DiscountBasis"].Percent) {
                return params.quantity *
                    (params.price * (1 + (params.premiumDiscountValue / 100))) *
                    params.priceConversionFactor * params.weightConversionFactor;
            }
            else {
                return params.quantity * params.price *
                    params.priceConversionFactor * params.weightConversionFactor;
            }
        }
    };
    WashoutValueOfGoodsComponent.prototype.decimalFormatter = function (input, decimalOption, format) {
        var formattedInput = new Intl.NumberFormat(format, { minimumFractionDigits: decimalOption }).format(input);
        return formattedInput.toLocaleString();
    };
    WashoutValueOfGoodsComponent.prototype.decimalOptionSelected = function (decimalOption) {
        this.decimalOptionValue = decimalOption;
    };
    WashoutValueOfGoodsComponent.prototype.formatQuantityAndTotal = function (input) {
        var formattedInput = new Intl.NumberFormat(this.formatType, { minimumFractionDigits: this.decimalOptionValue }).format(input);
        return formattedInput.toLocaleString();
    };
    WashoutValueOfGoodsComponent.prototype.calculateTotal = function (contracts) {
        var _this = this;
        this.totalQuantity = 0;
        this.total = 0;
        var totalCR = 0;
        var totalDR = 0;
        contracts.forEach(function (contract) {
            _this.currencyCode = contract.currencyCode;
            var totalValue = contract.totalInvoiceValue;
            _this.totalQuantity = _this.totalQuantity + (contract.quantity - contract.invoicedQuantity);
            if (contract.contractType === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_7__["ContractTypes"].Purchase) {
                totalCR = totalCR + totalValue;
            }
            else {
                totalDR = totalDR + totalValue;
            }
        });
        if (totalCR > totalDR) {
            this.total = totalCR - totalDR;
            this.creditDebit = 'Cr';
        }
        else {
            this.total = totalDR - totalCR;
            this.creditDebit = 'Dr';
        }
        this.debitCreditSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_9__["CostSigns"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_8__["CostDirectionType"][this.creditDebit]];
        this.totalAmountCalculated.emit({
            amount: this.total,
            decimalOption: this.decimalOptionValue,
            creditDebit: this.creditDebit,
            currencyCode: this.currencyCode,
        });
    };
    WashoutValueOfGoodsComponent.prototype.populateEntity = function (entity) {
        var valueOfGoods = entity;
        valueOfGoods.currency = this.currencyCode;
        valueOfGoods.totalGoodsValue = this.totalQuantity;
        valueOfGoods.totalInvoiceValue = this.total;
        if (valueOfGoods.invoiceLines && valueOfGoods.invoiceLines.length > 0) {
            var invoiceLines = this.getInvoiceLines(valueOfGoods.invoiceLines.length);
            invoiceLines.forEach(function (line) {
                valueOfGoods.invoiceLines.push(line);
            });
        }
        else {
            valueOfGoods.invoiceLines = this.getInvoiceLines();
        }
        return valueOfGoods;
    };
    WashoutValueOfGoodsComponent.prototype.getInvoiceLines = function (index) {
        if (index === void 0) { index = 0; }
        var invoiceLines = [];
        this.valueOfGoodsGridRows.map(function (data) {
            var invoiceLine = new _shared_entities_invoice_line_record_entity__WEBPACK_IMPORTED_MODULE_6__["InvoiceLineRecord"]();
            invoiceLine.lineNumber = index + 1;
            invoiceLine.sectionID = data.sectionId;
            invoiceLine.price = data.price;
            invoiceLine.currencyCode = data.currencyCode;
            invoiceLine.lineAmount = (data.price * (data.quantity - data.invoicedQuantity));
            invoiceLine.quantity = (data.quantity - data.invoicedQuantity).toString();
            invoiceLine.invoicePercent = ((data.quantity - data.invoicedQuantity) / Number(data.quantity)) * 100;
            invoiceLine.contractType = data.contractType;
            invoiceLines.push(invoiceLine);
            index++;
        });
        return invoiceLines;
    };
    /* Summary redirection from grid */
    WashoutValueOfGoodsComponent.prototype.contractToBeSelectedFromGrid = function (summaryRecord) {
        if (summaryRecord.summaryLines) {
            this.initializeGridColumnsFromSummary();
            this.valueOfGoodsGridRows = this.getContractsForSummary(summaryRecord.summaryLines.filter(function (filteredSummaryLine) { return filteredSummaryLine.costId == null; }), summaryRecord.currency, summaryRecord.counterparty);
            if (this.valueOfGoodsGridRows.length > 0) {
                this.calculateTotalForSummary(summaryRecord);
            }
        }
    };
    WashoutValueOfGoodsComponent.prototype.calculateTotalForSummary = function (summaryRecord) {
        var _this = this;
        var invoiceRecord = summaryRecord;
        this.totalQuantity = 0;
        this.total = 0;
        var totalCR = 0;
        var totalDR = 0;
        invoiceRecord.summaryLines.forEach(function (contract) {
            _this.currencyCode = invoiceRecord.currency;
            var totalValue = contract.price * Number(contract.quantity);
            _this.totalQuantity = _this.totalQuantity + Number(contract.quantity);
            if (contract.contractType === _shared_enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_7__["ContractTypes"].Purchase) {
                totalCR = totalCR + totalValue;
            }
            else {
                totalDR = totalDR + totalValue;
            }
        });
        if (totalCR > totalDR) {
            this.total = totalCR - totalDR;
            this.creditDebit = 'Cr';
        }
        else {
            this.total = totalDR - totalCR;
            this.creditDebit = 'Dr';
        }
        this.debitCreditSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_9__["CostSigns"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_8__["CostDirectionType"][this.creditDebit]];
        this.totalAmountCalculated.emit({
            amount: this.total,
            decimalOption: this.decimalOptionValue,
            creditDebit: this.creditDebit,
            currencyCode: this.currencyCode,
        });
    };
    WashoutValueOfGoodsComponent.prototype.initializeGridColumnsFromSummary = function () {
        this.valueOfGoodsGridOptions = {
            context: this.gridContext,
        };
        this.valueOfGoodsGridColumns = [
            {
                headerName: 'Counter party',
                field: 'counterparty',
                colId: 'counterparty',
                hide: false,
            },
            {
                headerName: 'Contract Reference',
                field: 'contractReference',
                colId: 'contractReference',
                hide: false,
            },
            {
                headerName: 'Contract Commodity',
                field: 'principalCommodity',
                colId: 'principalCommodity',
                hide: false,
            },
            {
                headerName: 'Contract Quantity',
                field: 'quantity',
                colId: 'quantity',
                hide: false,
                aggFunc: 'sum',
                enableValue: true,
                valueFormatter: this.decimalFormatterForSummary.bind(this),
            },
            {
                headerName: 'Quantity Code',
                field: 'quantityCode',
                colId: 'quantityCode',
                hide: false,
                valueFormatter: this.decimalFormatterForSummary.bind(this),
            },
            {
                headerName: 'Price',
                field: 'price',
                colId: 'price',
                hide: false,
                valueFormatter: this.decimalFormatterForSummary.bind(this),
                aggFunc: 'sum',
                enableValue: true,
            },
            {
                headerName: 'Currency Code',
                field: 'currencyCode',
                colId: 'currencyCode',
                hide: false,
            },
            {
                headerName: 'Amount',
                field: 'totalInvoiceValue',
                colId: 'totalInvoiceValue',
                hide: false,
                valueFormatter: this.decimalFormatterForSummary.bind(this),
            },
        ];
    };
    WashoutValueOfGoodsComponent.prototype.decimalFormatterForSummary = function (params) {
        var formattedInput = new Intl.NumberFormat(this.formatType, { minimumFractionDigits: this.decimalOptionValue }).format(params.value);
        return formattedInput.toLocaleString();
    };
    WashoutValueOfGoodsComponent.prototype.getContractsForSummary = function (summaryLines, currency, counterparty) {
        var contracts = [];
        summaryLines.map(function (record) {
            if (record.sectionId) {
                var contract = new _shared_services_execution_dtos_contracts_to_washout_invoice__WEBPACK_IMPORTED_MODULE_13__["ContractsToWashoutInvoice"]();
                contract.counterparty = counterparty;
                contract.contractReference = record.contractReference;
                contract.principalCommodity = record.principalCommodity;
                contract.quantity = record.quantity;
                contract.quantityCode = record.weightCode;
                contract.price = record.price;
                contract.currencyCode = currency;
                contract.totalInvoiceValue = record.lineAmount;
                contracts.push(contract);
            }
        });
        return contracts;
    };
    WashoutValueOfGoodsComponent.prototype.onExportButtonClickedAsExcel = function () {
        var screenName = 'Value of Good';
        var now = new Date();
        var todayDate = this.datePipe.transform(now, 'yyyyMMdd_hhmm').toString().toUpperCase();
        var params = {
            fileName: todayDate + '_' + this.company + '_' + screenName + '_' + this.userActiveDirectoryName + '.xlsx',
        };
        this.gridApi.exportDataAsExcel(params);
    };
    WashoutValueOfGoodsComponent.prototype.onExportButtonClickedAsCSV = function () {
        var screenName = 'Value of Good';
        var now = new Date();
        var todayDate = this.datePipe.transform(now, 'yyyyMMdd_hhmm').toString().toUpperCase();
        var params = {
            fileName: todayDate + '_' + this.company + '_' + screenName + '_' + this.userActiveDirectoryName + '.csv',
        };
        this.gridApi.exportDataAsCsv(params);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])(),
        __metadata("design:type", Object)
    ], WashoutValueOfGoodsComponent.prototype, "totalAmountCalculated", void 0);
    WashoutValueOfGoodsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: 'atlas-value-of-goods',
            template: __webpack_require__(/*! ./value-of-goods.component.html */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/value-of-goods/value-of-goods.component.html"),
            styles: [__webpack_require__(/*! ./value-of-goods.component.scss */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/value-of-goods/value-of-goods.component.scss")],
            providers: [_angular_common__WEBPACK_IMPORTED_MODULE_0__["DatePipe"]],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_14__["FormConfigurationProviderService"],
            _shared_services_ui_service__WEBPACK_IMPORTED_MODULE_15__["UiService"],
            _angular_common__WEBPACK_IMPORTED_MODULE_0__["DatePipe"],
            _core_services_authorization_service__WEBPACK_IMPORTED_MODULE_3__["AuthorizationService"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__["CompanyManagerService"],
            _shared_services_ag_grid_service__WEBPACK_IMPORTED_MODULE_12__["AgGridService"]])
    ], WashoutValueOfGoodsComponent);
    return WashoutValueOfGoodsComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_5__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/washout-total/washout-total.component.html":
/*!************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/washout-total/washout-total.component.html ***!
  \************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"invoice-creation-card\">\r\n    <mat-card-header>\r\n        <mat-card-title>\r\n            Total Amount\r\n        </mat-card-title>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n        <div fxLayout=\"column\"\r\n             fxLayoutAlign=\"end end\"\r\n             class=\"total-amount-content\">\r\n            <mat-card-subtitle class=\"total-figure\">Invoice Total Without Taxes: <span\r\n                      class=\"total-figure-value\">{{costDirectionSign}}{{formatAmount(amount)}}\r\n                    {{currencyCode}}</span> </mat-card-subtitle>\r\n            <mat-card-subtitle class=\"total-figure\">Total Taxes: <span\r\n                      class=\"total-figure-value\">{{taxCostDirectionSign}}{{formatAmount(this.taxTotal)}}\r\n                    {{currencyCode}}</span> </mat-card-subtitle>\r\n            <mat-card-subtitle class=\"total-figure\">Total Invoice Value: Amount to {{invoiceLabel}} <span\r\n                      class=\"total-figure-value\">{{totalCostDirectionSign}}{{formatAmount(this.total)}}\r\n                    {{currencyCode}}</span> </mat-card-subtitle>\r\n        </div>\r\n    </mat-card-content>\r\n</mat-card>\r\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/washout-total/washout-total.component.scss":
/*!************************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/washout-total/washout-total.component.scss ***!
  \************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "mat-card-content {\n  height: 50%; }\n  mat-card-content .total-amount-content {\n    height: 100%; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/washout-total/washout-total.component.ts":
/*!**********************************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/washout-total/washout-total.component.ts ***!
  \**********************************************************************************************************************************************/
/*! exports provided: WashoutTotalComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WashoutTotalComponent", function() { return WashoutTotalComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-direction-type.enum */ "./Client/app/shared/enums/cost-direction-type.enum.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../shared/enums/cost-sign.enum */ "./Client/app/shared/enums/cost-sign.enum.ts");
/* harmony import */ var _shared_enums_invoice_payment_type__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../shared/enums/invoice-payment-type */ "./Client/app/shared/enums/invoice-payment-type.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var WashoutTotalComponent = /** @class */ (function (_super) {
    __extends(WashoutTotalComponent, _super);
    function WashoutTotalComponent(formConfigurationProvider) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.total = 0;
        _this.amount = 0;
        _this.taxTotal = 0;
        _this.formatType = 'en-US';
        _this.defaultDecimalOption = 2;
        _this.debit = 'Dr';
        _this.credit = 'Cr';
        _this.taxCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_4__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable];
        return _this;
    }
    WashoutTotalComponent.prototype.ngOnInit = function () {
        this.costDirections = [
            {
                costDirectionId: _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable,
                costDirection: 'Pay',
            },
            {
                costDirectionId: _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Receivable,
                costDirection: 'Receive',
            },
        ];
    };
    WashoutTotalComponent.prototype.formatAmount = function (input) {
        var formattedInput = new Intl.NumberFormat(this.formatType, { minimumFractionDigits: this.decimalOption }).format(input);
        return formattedInput.toLocaleString();
    };
    WashoutTotalComponent.prototype.setValuesForTotalWithoutTax = function (model) {
        this.amount = Math.abs(model.totalInvoiceValue);
        this.decimalOption = model.decimalOption;
        this.currencyCode = model.currency;
        if (model.costDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable) {
            this.costDirectionDisplay = this.credit;
        }
        else if (model.costDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Receivable) {
            this.costDirectionDisplay = this.debit;
        }
        this.costDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_4__["CostSigns"][model.costDirection];
        if (this.amount >= 0) {
            this.setTotalForGoodCost();
        }
    };
    WashoutTotalComponent.prototype.setTotalForGoodCost = function () {
        if (this.costDirectionDisplay) {
            if (this.costDirectionDisplay === this.credit) {
                this.total = this.taxTotal + this.amount;
                this.totalCostDirection = this.credit;
            }
            else {
                this.total = this.amount - this.taxTotal;
                this.totalCostDirection = this.debit;
            }
            this.invoiceLabel = _shared_enums_invoice_payment_type__WEBPACK_IMPORTED_MODULE_5__["InvoicePaymentType"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__["CostDirectionType"][this.costDirectionDisplay]];
            this.totalCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_4__["CostSigns"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__["CostDirectionType"][this.costDirectionDisplay]];
        }
        else {
            this.total = this.taxTotal;
            this.totalCostDirection = this.credit;
            this.totalCostDirectionSign = _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_4__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable];
            this.invoiceLabel = _shared_enums_invoice_payment_type__WEBPACK_IMPORTED_MODULE_5__["InvoicePaymentType"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable];
        }
    };
    WashoutTotalComponent.prototype.setValuesForTotalTax = function (model) {
        this.taxTotal = Math.abs(model.amount);
        this.decimalOption = model.decimalOption;
        this.currencyCode = model.currencyCode;
        this.total = this.taxTotal + this.amount;
        if (this.taxTotal) {
            this.setTotalForGoodCost();
        }
    };
    WashoutTotalComponent.prototype.setValuesForTotalFromGrid = function (summaryRecord) {
        var invoiceLines = summaryRecord.summaryLines;
        var total = 0;
        invoiceLines.forEach(function (tax) {
            total = total + tax.vatAmount;
        });
        this.taxTotal = total;
        this.decimalOption = this.defaultDecimalOption;
        this.currencyCode = summaryRecord.currency;
        this.amount = summaryRecord.totalInvoiceValue;
        this.calculateCostDirection(invoiceLines);
        this.setTotalForGoodCost();
    };
    WashoutTotalComponent.prototype.calculateCostDirection = function (contracts) {
        var _this = this;
        var totalCR = 0;
        var totalDR = 0;
        var costDirectionId;
        contracts.forEach(function (contract) {
            costDirectionId = _this.getCostDirectionIdFromCode(contract.costDirection);
            if (costDirectionId === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable) {
                totalCR = totalCR + contract.lineAmount;
            }
            else {
                totalDR = totalDR + contract.lineAmount;
            }
        });
        this.costDirectionDisplay = (totalCR > totalDR) ? _shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__["CostDirectionType"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__["CostDirectionType"].Cr] : _shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__["CostDirectionType"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_2__["CostDirectionType"].Dr];
    };
    WashoutTotalComponent.prototype.getCostDirectionIdFromCode = function (code) {
        if (code) {
            var selectedCostDirection = this.costDirections.find(function (e) { return e.costDirection === code; });
            return selectedCostDirection.costDirectionId;
        }
    };
    WashoutTotalComponent.prototype.populateEntity = function (entity) {
        var invoiceDetails = entity;
        invoiceDetails.costDirection = (this.totalCostDirectionSign === _shared_enums_cost_sign_enum__WEBPACK_IMPORTED_MODULE_4__["CostSigns"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable])
            ? _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Payable : _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_3__["CostDirections"].Receivable;
        return invoiceDetails;
    };
    WashoutTotalComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-washout-total',
            template: __webpack_require__(/*! ./washout-total.component.html */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/washout-total/washout-total.component.html"),
            styles: [__webpack_require__(/*! ./washout-total.component.scss */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/washout-total/washout-total.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_6__["FormConfigurationProviderService"]])
    ], WashoutTotalComponent);
    return WashoutTotalComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_1__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/washout-working-page.component.html":
/*!******************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/washout-working-page.component.html ***!
  \******************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div fxLayout=\"column\">\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"start\"\r\n         fxLayoutGap=\"2%\">\r\n        <div fxLayout=\"column\"\r\n             fxLayoutAlign=\"start\"\r\n             fxFlex=\"49%\">\r\n            <atlas-selection #washoutSelectionComponent\r\n                             (invoiceDateChanged)=\"invoiceDateChanged($event)\"\r\n                             fxFlex=\"100%\">\r\n            </atlas-selection>\r\n        </div>\r\n        <div fxLayout=\"column\"\r\n             fxLayoutAlign=\"start\"\r\n             fxFlex=\"49%\">\r\n            <atlas-invoice-document #invoiceDocumentComponent\r\n                                    (documentTemplateSelected)=\"onDocumentTemplateSelected($event)\"\r\n                                    fxFlex=\"100%\">\r\n            </atlas-invoice-document>\r\n        </div>\r\n    </div>\r\n    <atlas-value-of-goods #valueOfGoodsComponent\r\n                          (totalAmountCalculated)=\"ontotalAmountCalculated($event)\">\r\n    </atlas-value-of-goods>\r\n    <atlas-additional-cost #additionalCostComponent\r\n                           [selectedGoodsVat]=\"selectedGoodsVatCode\"\r\n                           (totalCostAndVatCode)=\"onChangeCostContract($event)\"\r\n                           (narrativeLength)=\"onNarrativeValueChange($event)\">\r\n    </atlas-additional-cost>\r\n    <div fxLayout=\"row\"\r\n         fxLayoutGap=\"2%\">\r\n        <atlas-tax-goods fxFlex=\"50%\"\r\n                         #taxGoodsComponent\r\n                         (selectedGoodsTaxCode)=\"onChangeGoodsTaxCode($event)\">\r\n        </atlas-tax-goods>\r\n        <atlas-payments #washoutPaymentComponent\r\n                        fxFlex=\"50%\">\r\n        </atlas-payments>\r\n\r\n    </div>\r\n    <atlas-tax-costs fxFlex=\"50%\"\r\n                     (totalCostTaxCalculated)=\"onTotalCostTaxCalculated($event)\"\r\n                     #taxCostsComponent>\r\n    </atlas-tax-costs>\r\n    <atlas-washout-total class=\"washout-total-amount\"\r\n                         #totalComponent></atlas-washout-total>\r\n</div>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/washout-working-page.component.scss":
/*!******************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/washout-working-page.component.scss ***!
  \******************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".washout-total-amount {\n  width: 100%; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/washout-working-page.component.ts":
/*!****************************************************************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/components/washout-working-page/washout-working-page.component.ts ***!
  \****************************************************************************************************************************/
/*! exports provided: WashoutWorkingPageComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WashoutWorkingPageComponent", function() { return WashoutWorkingPageComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../shared/components/base-form-component/base-form-component.component */ "./Client/app/shared/components/base-form-component/base-form-component.component.ts");
/* harmony import */ var _shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../shared/enums/cost-direction-type.enum */ "./Client/app/shared/enums/cost-direction-type.enum.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_services_execution_dtos_invoice_record__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../shared/services/execution/dtos/invoice-record */ "./Client/app/shared/services/execution/dtos/invoice-record.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _components_additional_cost_additional_cost_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./components/additional-cost/additional-cost.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/additional-cost/additional-cost.component.ts");
/* harmony import */ var _components_invoice_document_invoice_document_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./components/invoice-document/invoice-document.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/invoice-document/invoice-document.component.ts");
/* harmony import */ var _components_payments_payments_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./components/payments/payments.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/payments/payments.component.ts");
/* harmony import */ var _components_selection_selection_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./components/selection/selection.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/selection/selection.component.ts");
/* harmony import */ var _components_tax_costs_tax_costs_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./components/tax-costs/tax-costs.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/tax-costs/tax-costs.component.ts");
/* harmony import */ var _components_tax_goods_tax_goods_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./components/tax-goods/tax-goods.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/tax-goods/tax-goods.component.ts");
/* harmony import */ var _components_value_of_goods_value_of_goods_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./components/value-of-goods/value-of-goods.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/value-of-goods/value-of-goods.component.ts");
/* harmony import */ var _components_washout_total_washout_total_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./components/washout-total/washout-total.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/washout-total/washout-total.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

















var WashoutWorkingPageComponent = /** @class */ (function (_super) {
    __extends(WashoutWorkingPageComponent, _super);
    function WashoutWorkingPageComponent(executionService, formBuilder, formConfigurationProvider, route, router) {
        var _this = _super.call(this, formConfigurationProvider) || this;
        _this.executionService = executionService;
        _this.formBuilder = formBuilder;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.route = route;
        _this.router = router;
        _this.formComponents = [];
        _this.valueOfGoodsRecord = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.totalCostAndVatCode = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.totalCostTaxCalculated = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.isDocumentTemplateSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.narrativeLength = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.totalRecordForWashout = new _shared_services_execution_dtos_invoice_record__WEBPACK_IMPORTED_MODULE_6__["InvoiceRecord"]();
        _this.valueOfGoodsTotal = 0;
        _this.valueOfGoodsDecimalOption = 2;
        _this.additionalCostRate = 0;
        _this.isSave = false;
        _this.invoiceTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('invoiceTypeId')));
        return _this;
    }
    WashoutWorkingPageComponent.prototype.ngOnInit = function () {
        this.invoiceWashoutWorkingFormGroup = this.formBuilder.group({
            invoiceDocumentComponent: this.invoiceDocumentComponent.getFormGroup(),
            washoutPaymentComponent: this.washoutPaymentComponent.getFormGroup(),
            washoutSelectionComponent: this.washoutSelectionComponent.getFormGroup(),
            valueOfGoodsComponent: this.valueOfGoodsComponent.getFormGroup(),
            additionalCostComponent: this.additionalCostComponent.getFormGroup(),
            taxGoodsComponent: this.taxGoodsComponent.getFormGroup(),
            taxCostsComponent: this.taxCostsComponent.getFormGroup(),
            totalComponent: this.totalComponent.getFormGroup(),
        });
        this.formComponents.push(this.invoiceDocumentComponent, this.washoutPaymentComponent, this.washoutSelectionComponent, this.valueOfGoodsComponent, this.additionalCostComponent, this.taxGoodsComponent, this.taxCostsComponent, this.totalComponent);
    };
    WashoutWorkingPageComponent.prototype.populateEntity = function (model) {
        this.formComponents.forEach(function (comp) {
            comp.populateEntity(model);
        });
        return model;
    };
    WashoutWorkingPageComponent.prototype.contractsSelected = function (contracts) {
        this.washoutSelectionComponent.selectedWashoutContracts(contracts);
        this.valueOfGoodsComponent.selectedWashoutContracts(contracts);
        this.invoiceDocumentComponent.selectedWashoutContracts(contracts);
        if (contracts && contracts.length > 0) {
            this.additionalCostComponent.setDefaultCurrency(contracts[0].currencyCode);
        }
    };
    WashoutWorkingPageComponent.prototype.pricingAndDecimalOptionSelected = function (pricingOption, decimalOption) {
        this.valueOfGoodsComponent.decimalOptionSelected(decimalOption);
    };
    WashoutWorkingPageComponent.prototype.onTotalCostTaxCalculated = function (model) {
        this.totalData = model;
        this.calculateTaxTotal(model);
        this.totalCostTaxCalculated.emit(model);
    };
    WashoutWorkingPageComponent.prototype.calculateTaxTotal = function (model) {
        this.totalComponent.setValuesForTotalTax(model);
    };
    WashoutWorkingPageComponent.prototype.calculateTotalWithoutTax = function () {
        this.totalRecordForWashout.totalInvoiceValue = this.additionalCostRate + this.valueOfGoodsTotal;
        this.totalRecordForWashout.decimalOption = this.valueOfGoodsDecimalOption;
        this.totalRecordForWashout.currency = this.valueOfGoodsCurrency;
        if (this.valueOfGoodsCostDirection === this.additionalCostCostDirection) {
            this.totalRecordForWashout.costDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_5__["CostDirections"][this.additionalCostCostDirection];
        }
        else {
            if (Math.abs(this.additionalCostRate) > Math.abs(this.valueOfGoodsTotal)) {
                this.totalRecordForWashout.costDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_5__["CostDirections"][this.additionalCostCostDirection];
            }
            else {
                this.totalRecordForWashout.costDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_5__["CostDirections"][this.valueOfGoodsCostDirection];
            }
        }
        this.totalComponent.setValuesForTotalWithoutTax(this.totalRecordForWashout);
    };
    WashoutWorkingPageComponent.prototype.onChangeCostContract = function (model) {
        if (model) {
            this.additionalCostRate = model.rate;
            this.additionalCostCostDirection = model.costDirection;
            if (this.additionalCostCostDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_5__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_5__["CostDirections"].Payable]) {
                this.additionalCostRate = -(this.additionalCostRate);
            }
            this.taxCostsComponent.getTaxesForSelectedVat(model);
            this.totalCostAndVatCode.emit(model);
            this.calculateTotalWithoutTax();
        }
    };
    WashoutWorkingPageComponent.prototype.ontotalAmountCalculated = function (model) {
        this.valueOfGoodsTotal = model.amount;
        this.valueOfGoodsDecimalOption = model.decimalOption;
        this.valueOfGoodsCurrency = model.currencyCode;
        this.valueOfGoodsCostDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_5__["CostDirections"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirectionType"][model.creditDebit]];
        this.valueOfGoodsRecord.emit(model);
        if (this.valueOfGoodsCostDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_5__["CostDirections"][_shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_5__["CostDirections"].Payable]) {
            this.valueOfGoodsTotal = -(this.valueOfGoodsTotal);
        }
        this.calculateTotalWithoutTax();
    };
    WashoutWorkingPageComponent.prototype.onChangeGoodsTaxCode = function (vatCode) {
        this.selectedGoodsVatCode = vatCode;
    };
    WashoutWorkingPageComponent.prototype.onDocumentTemplateSelected = function (value) {
        this.isDocumentTemplateSelected.emit(value);
    };
    WashoutWorkingPageComponent.prototype.invoiceDateChanged = function (documentTypeValue) {
        this.washoutPaymentComponent.invoiceDateChanged = documentTypeValue;
    };
    WashoutWorkingPageComponent.prototype.onNarrativeValueChange = function (maxLength) {
        this.narrativeLength.emit(maxLength);
    };
    WashoutWorkingPageComponent.prototype.validateCostGrid = function () {
        // calling the costgrid component to set the required field validation
        return this.additionalCostComponent.validate();
    };
    WashoutWorkingPageComponent.prototype.getWashoutRecords = function () {
        var washoutRecordForBankingOption = new _shared_services_execution_dtos_invoice_record__WEBPACK_IMPORTED_MODULE_6__["InvoiceRecord"]();
        washoutRecordForBankingOption.currency = this.totalComponent.currencyCode;
        washoutRecordForBankingOption.counterpartyCode = this.washoutSelectionComponent.counterpartyCtrl.value;
        (this.totalComponent.totalCostDirection === _shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirectionType"][_shared_enums_cost_direction_type_enum__WEBPACK_IMPORTED_MODULE_4__["CostDirectionType"].Cr]) ?
            washoutRecordForBankingOption.costDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_5__["CostDirections"].Payable :
            washoutRecordForBankingOption.costDirection = _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_5__["CostDirections"].Receivable;
        return washoutRecordForBankingOption;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('additionalCostComponent'),
        __metadata("design:type", _components_additional_cost_additional_cost_component__WEBPACK_IMPORTED_MODULE_9__["AdditionalCostComponent"])
    ], WashoutWorkingPageComponent.prototype, "additionalCostComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('invoiceDocumentComponent'),
        __metadata("design:type", _components_invoice_document_invoice_document_component__WEBPACK_IMPORTED_MODULE_10__["InvoiceDocumentComponent"])
    ], WashoutWorkingPageComponent.prototype, "invoiceDocumentComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('washoutPaymentComponent'),
        __metadata("design:type", _components_payments_payments_component__WEBPACK_IMPORTED_MODULE_11__["WashoutPaymentsComponent"])
    ], WashoutWorkingPageComponent.prototype, "washoutPaymentComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('washoutSelectionComponent'),
        __metadata("design:type", _components_selection_selection_component__WEBPACK_IMPORTED_MODULE_12__["SelectionComponent"])
    ], WashoutWorkingPageComponent.prototype, "washoutSelectionComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('valueOfGoodsComponent'),
        __metadata("design:type", _components_value_of_goods_value_of_goods_component__WEBPACK_IMPORTED_MODULE_15__["WashoutValueOfGoodsComponent"])
    ], WashoutWorkingPageComponent.prototype, "valueOfGoodsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('taxGoodsComponent'),
        __metadata("design:type", _components_tax_goods_tax_goods_component__WEBPACK_IMPORTED_MODULE_14__["TaxGoodsComponent"])
    ], WashoutWorkingPageComponent.prototype, "taxGoodsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('taxCostsComponent'),
        __metadata("design:type", _components_tax_costs_tax_costs_component__WEBPACK_IMPORTED_MODULE_13__["TaxCostsComponent"])
    ], WashoutWorkingPageComponent.prototype, "taxCostsComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('totalComponent'),
        __metadata("design:type", _components_washout_total_washout_total_component__WEBPACK_IMPORTED_MODULE_16__["WashoutTotalComponent"])
    ], WashoutWorkingPageComponent.prototype, "totalComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], WashoutWorkingPageComponent.prototype, "valueOfGoodsRecord", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], WashoutWorkingPageComponent.prototype, "totalCostAndVatCode", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], WashoutWorkingPageComponent.prototype, "totalCostTaxCalculated", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], WashoutWorkingPageComponent.prototype, "isDocumentTemplateSelected", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], WashoutWorkingPageComponent.prototype, "narrativeLength", void 0);
    WashoutWorkingPageComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-washout-working-page',
            template: __webpack_require__(/*! ./washout-working-page.component.html */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/washout-working-page.component.html"),
            styles: [__webpack_require__(/*! ./washout-working-page.component.scss */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/washout-working-page.component.scss")],
        }),
        __metadata("design:paramtypes", [_shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_8__["ExecutionService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_7__["FormConfigurationProviderService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"]])
    ], WashoutWorkingPageComponent);
    return WashoutWorkingPageComponent;
}(_shared_components_base_form_component_base_form_component_component__WEBPACK_IMPORTED_MODULE_3__["BaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/washout.component.html":
/*!*********************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/washout.component.html ***!
  \*********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<form [formGroup]=\"washoutInvoiceFormGroup\">\r\n    <div class=\"main-container\">\r\n        <mat-horizontal-stepper [linear]\r\n                                (selectionChange)=\"onChangeStepAction($event)\"\r\n                                #stepper>\r\n            <ng-template matStepperIcon=\"edit\">\r\n                <mat-icon>check</mat-icon>\r\n            </ng-template>\r\n            <mat-step>\r\n                <ng-template matStepLabel>Contract Selection Screen</ng-template>\r\n                <atlas-washout-selection #washoutSelectionComponent\r\n                                         (washoutContractsSelected)=\"onWashoutContractsSelected($event)\"\r\n                                         (counterPartySelected)=\"onCounterPartySelected($event)\">\r\n                </atlas-washout-selection>\r\n                <div fxLayout=\"row \"\r\n                     fxLayoutAlign=\"space-between start\"\r\n                     class=\"button-details\">\r\n                    <div fxLayout=\"column \"\r\n                         fxLayoutAlign=\"start\">\r\n                        <button (click)=\"onDiscardButtonClicked()\"\r\n                                mat-button>\r\n                            DISCARD\r\n                        </button>\r\n                    </div>\r\n                    <div fxLayout=\"column \"\r\n                         fxLayoutAlign=\"start\">\r\n                        <button mat-raised-button\r\n                                (click)=\"onMoveButtonClicked(invoicingSteps.workingStep)\">\r\n                            NEXT\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </mat-step>\r\n            <mat-step [completed]=\"isCompleted\">\r\n                <ng-template matStepLabel>Invoice Working Page</ng-template>\r\n                <atlas-washout-working-page #washoutWorkingPageComponent\r\n                                            (isDocumentTemplateSelected)=\"onDocumentTemplateSelected($event)\"\r\n                                            (totalCostTaxCalculated)=\"ontotalAmountCalculated($event)\"\r\n                                            (totalCostAndVatCode)=\"onChangeCostContract($event)\"\r\n                                            (valueOfGoodsRecord)=\"onChangeValueOfGoods($event)\"\r\n                                            (narrativeLength)=\"onNarrativeValueChanged($event)\">\r\n                </atlas-washout-working-page>\r\n                <div fxLayout=\"row\"\r\n                     fxLayoutAlign=\"end start\">\r\n                    <mat-slide-toggle *ngIf=\"hasTemplate\"\r\n                                      [formControl]=\"previewDocumentCtrl\">Preview Document </mat-slide-toggle>\r\n                </div>\r\n                <div fxLayout=\"row \"\r\n                     fxLayoutAlign=\"space-between start\"\r\n                     class=\"button-details\">\r\n                    <button (click)=\"onDiscardButtonClicked()\"\r\n                            [disabled]=\"isLoading\"\r\n                            mat-button>\r\n                        DISCARD\r\n                    </button>\r\n                    <div fxLayout=\"column \"\r\n                         fxLayoutAlign=\"start end \">\r\n                        <div fxLayout=\"row \"\r\n                             fxLayoutAlign=\"end start \">\r\n                            <button mat-button\r\n                                    (click)=\"onBackButtonClicked(invoicingSteps.invoiceCreationStep)\"\r\n                                    [disabled]=\"isLoading\">\r\n                                BACK\r\n                            </button>\r\n                            <div\r\n                                 *ifAuthorized=\"'Invoices.InvoiceCreation', company:company, level: PermissionLevels.ReadWrite\">\r\n                                <button mat-raised-button\r\n                                        (click)=\"onOpenDialogOnPreviewOrSaveClicked()\"\r\n                                        [disabled]=\"isLoading\">\r\n                                    {{ previewDocumentCtrl.value ? \"Preview and Invoice\" : \"Create Invoice\" }}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </mat-step>\r\n            <mat-step>\r\n                <ng-template matStepLabel>Invoice Summary Page</ng-template>\r\n                <atlas-washout-summary #washoutSummaryComponent\r\n                                       [invoiceTaxContracts]=\"taxRecords\"\r\n                                       [invoiceTaxTotal]=\"totalData\"\r\n                                       [invoiceCostContracts]=\"invoiceCostContracts\"\r\n                                       [invoiceGoodsContracts]=\"invoiceGoodsContracts\"\r\n                                       [goodsTaxCode]=\"goodsTaxCode\"\r\n                                       [filteredCompanyBankAccounts]=\"filteredCompanyBankAccounts\"\r\n                                       [isCreationMode]=isCreationMode>\r\n                </atlas-washout-summary>\r\n                <div class=\"btn-container\"\r\n                     *ngIf=\"!isFromGrid\">\r\n                    <div fxLayout=\"row\"\r\n                         fxAlignLayout=\"start end\">\r\n                        <span class=\"fill-space\"></span>\r\n                        <button mat-button\r\n                                (click)=\"newSearchButtonClicked()\">\r\n                            New Search\r\n                        </button>\r\n                        <button mat-raised-button\r\n                                (click)=\"nextInvoiceButtonClicked(stepper)\">\r\n                            Next Invoice\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </mat-step>\r\n        </mat-horizontal-stepper>\r\n    </div>\r\n</form>"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/washout.component.scss":
/*!*********************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/washout.component.scss ***!
  \*********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".mat-column-selection {\n  overflow: initial; }\n\n.mat-button-toggle {\n  text-align: center;\n  min-width: 88px; }\n\nlabel {\n  font-size: 14px;\n  font-family: Roboto;\n  color: black; }\n\nlabel.no-data-message {\n  font-weight: bold; }\n\n.highlight {\n  background: #A7C5E2; }\n\n.label-search {\n  font-size: 11px;\n  font-family: Roboto;\n  color: rgba(0, 0, 0, 0.54); }\n\n.label-summary {\n  font-weight: bold; }\n\nmat-radio-button {\n  margin: 5px; }\n\n.mat-stepper-horizontal {\n  background-color: transparent; }\n"

/***/ }),

/***/ "./Client/app/execution/execution-invoicing/washout/washout.component.ts":
/*!*******************************************************************************!*\
  !*** ./Client/app/execution/execution-invoicing/washout/washout.component.ts ***!
  \*******************************************************************************/
/*! exports provided: WashoutComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WashoutComponent", function() { return WashoutComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/services/company-manager.service */ "./Client/app/core/services/company-manager.service.ts");
/* harmony import */ var _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/entities/atlas-form-control */ "./Client/app/shared/entities/atlas-form-control.ts");
/* harmony import */ var _shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../shared/entities/window-injection-token */ "./Client/app/shared/entities/window-injection-token.ts");
/* harmony import */ var _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/enums/cost-direction.enum */ "./Client/app/shared/enums/cost-direction.enum.ts");
/* harmony import */ var _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/enums/invoice-type.enum */ "./Client/app/shared/enums/invoice-type.enum.ts");
/* harmony import */ var _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/enums/permission-level.enum */ "./Client/app/shared/enums/permission-level.enum.ts");
/* harmony import */ var _shared_services_document_popup_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../shared/services/document-popup.service */ "./Client/app/shared/services/document-popup.service.ts");
/* harmony import */ var _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../shared/services/form-configuration-provider.service */ "./Client/app/shared/services/form-configuration-provider.service.ts");
/* harmony import */ var _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../shared/services/http-services/document.service */ "./Client/app/shared/services/http-services/document.service.ts");
/* harmony import */ var _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../shared/services/http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../shared/services/http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
/* harmony import */ var _shared_services_http_services_preaccounting_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../shared/services/http-services/preaccounting.service */ "./Client/app/shared/services/http-services/preaccounting.service.ts");
/* harmony import */ var _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../shared/services/snackbar.service */ "./Client/app/shared/services/snackbar.service.ts");
/* harmony import */ var _shared_services_util_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../shared/services/util.service */ "./Client/app/shared/services/util.service.ts");
/* harmony import */ var _dialog_boxes_bank_account_dialog_bank_account_dialog_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../dialog-boxes/bank-account-dialog/bank-account-dialog.component */ "./Client/app/execution/execution-invoicing/dialog-boxes/bank-account-dialog/bank-account-dialog.component.ts");
/* harmony import */ var _invoicing_base_form_invoicing_base_form_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../invoicing-base-form/invoicing-base-form.component */ "./Client/app/execution/execution-invoicing/invoicing-base-form/invoicing-base-form.component.ts");
/* harmony import */ var _components_washout_selection_washout_selection_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./components/washout-selection/washout-selection.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/washout-selection.component.ts");
/* harmony import */ var _components_washout_summary_washout_summary_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./components/washout-summary/washout-summary.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-summary/washout-summary.component.ts");
/* harmony import */ var _components_washout_working_page_washout_working_page_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./components/washout-working-page/washout-working-page.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/washout-working-page.component.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};























var WashoutComponent = /** @class */ (function (_super) {
    __extends(WashoutComponent, _super);
    function WashoutComponent(dialog, router, companyManager, snackbarService, documentService, window, utilService, executionService, masterdataService, route, formBuilder, preaccountingService, formConfigurationProvider, documentPopupService) {
        var _this = _super.call(this, dialog, router, companyManager, snackbarService, documentService, window, utilService, executionService, route, formBuilder, preaccountingService, formConfigurationProvider, documentPopupService) || this;
        _this.dialog = dialog;
        _this.router = router;
        _this.companyManager = companyManager;
        _this.snackbarService = snackbarService;
        _this.documentService = documentService;
        _this.window = window;
        _this.utilService = utilService;
        _this.executionService = executionService;
        _this.masterdataService = masterdataService;
        _this.route = route;
        _this.formBuilder = formBuilder;
        _this.preaccountingService = preaccountingService;
        _this.formConfigurationProvider = formConfigurationProvider;
        _this.documentPopupService = documentPopupService;
        _this.filteredCompanyBankAccounts = [];
        _this.InvoiceTypes = _shared_enums_invoice_type_enum__WEBPACK_IMPORTED_MODULE_8__["InvoiceTypes"];
        _this.currentStep = 0;
        _this.PermissionLevels = _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_9__["PermissionLevels"];
        _this.isFromGrid = false;
        _this.invoicingSteps = {
            templateStep: -1,
            invoiceCreationStep: 0,
            workingStep: 1,
            summaryStep: 2,
        };
        _this.isValid = false;
        _this.previewDocumentCtrl = new _shared_entities_atlas_form_control__WEBPACK_IMPORTED_MODULE_5__["AtlasFormControl"]('previewDocumentCtrl');
        _this.isCreateInvoiceButtonClicked = false;
        _this.isCreationMode = true;
        _this.isSaveClicked = false;
        _this.isCompleted = false;
        _this.invoiceTypeId = Number(decodeURIComponent(_this.route.snapshot.paramMap.get('invoiceTypeId')));
        _this.company = _this.companyManager.getCurrentCompanyId();
        return _this;
    }
    WashoutComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.company = this.route.snapshot.paramMap.get('company');
        this.route.queryParams.subscribe(function (params) {
            _this.selectedInvoiceId = params['invoiceId'];
            _this.isFromGrid = params['isFromGrid'];
        });
        if (this.isFromGrid) {
            this.launchSelectedInvoiceSummary(this.selectedInvoiceId);
        }
        this.washoutInvoiceFormGroup = this.formBuilder.group({
            washoutSelectionComponent: this.washoutSelectionComponent.getFormGroup(),
            washoutWorkingPageComponent: this.washoutWorkingPageComponent.getFormGroup(),
        });
        this.formComponents.push(this.washoutSelectionComponent, this.washoutWorkingPageComponent);
        this.getInvoiceSetupByCompany();
        this.masterData = this.route.snapshot.data.masterdata;
    };
    WashoutComponent.prototype.unloadNotification = function ($event) {
        if ((this.washoutSelectionComponent.invoiceSelectionFormGroup.dirty || this.washoutWorkingPageComponent.invoiceWashoutWorkingFormGroup.dirty) && (this.isSaveClicked === false)) {
            $event.returnValue = true;
        }
    };
    WashoutComponent.prototype.getInvoiceSetupByCompany = function () {
        var _this = this;
        this.subscriptions.push(this.executionService.getInvoiceSetupByCompany()
            .subscribe(function (data) {
            _this.invoiceSetUpData = data;
        }));
    };
    WashoutComponent.prototype.launchSelectedInvoiceSummary = function (selectedInvoiceId) {
        var _this = this;
        this.subscriptions.push(this.executionService.
            getInvoiceById(selectedInvoiceId)
            .subscribe(function (data) {
            _this.stepper.selectedIndex = 4;
            // this.invoiceSummaryStep.populateInvoiceRecordFromGrid(data);
            _this.invoiceLabel = data.invoiceCode;
        }));
    };
    WashoutComponent.prototype.beforeInvoiceActions = function (invoiceRecord) {
        this.updateInvoiceLines(invoiceRecord);
    };
    WashoutComponent.prototype.afterInvoiceActions = function (invoiceRecord) {
        (this.selectedbankAccountId) ? invoiceRecord.bankAccountId = this.selectedbankAccountId : null;
        this.washoutSummaryComponent.populateInvoiceRecord(invoiceRecord);
        this.stepper.next();
    };
    WashoutComponent.prototype.updateInvoiceLines = function (invoiceRecord) {
        var _this = this;
        invoiceRecord.invoiceLines.forEach(function (invoiceLine) {
            if (!invoiceLine.vatCode) {
                invoiceLine.vatCode = (invoiceLine.costID) ?
                    _this.washoutWorkingPageComponent.additionalCostComponent.costVatCodeCtrl.value :
                    _this.washoutWorkingPageComponent.taxGoodsComponent.goodsVatCodeCtrl.value;
            }
        });
    };
    WashoutComponent.prototype.onNarrativeValueChanged = function (maxLength) {
        this.isCostNarrativeMaxLength = maxLength;
    };
    WashoutComponent.prototype.onOpenDialogOnPreviewOrSaveClicked = function () {
        this.isLoading = true;
        if (this.washoutWorkingPageComponent.invoiceWashoutWorkingFormGroup.valid
            && this.washoutWorkingPageComponent.additionalCostComponent.validate()) {
            if (this.isCostNarrativeMaxLength) {
                this.snackbarService.informationSnackBar('Narrative length should be less than 30');
                return;
            }
            this.isSaveClicked = true;
            this.checkForPayableorReceivable();
        }
        else {
            this.snackbarService.informationSnackBar('Form is invalid. Please resolve the errors...');
            this.isLoading = false;
        }
        this.costAndTaxRowsSelected();
    };
    WashoutComponent.prototype.onMoveButtonClicked = function (index) {
        var isFormValid = false;
        if (this.washoutSelectionComponent.washoutDecimalsComponent.formGroup.valid) {
            if (this.isValid) {
                this.selectedWashoutContracts();
                this.getTaxRecordsForSelectedCost();
                this.isCompleted = true;
                this.stepper.selectedIndex = index;
            }
            isFormValid = true;
        }
        if (!this.isValid) {
            this.snackbarService.throwErrorSnackBar('Please select a contract to proceed.');
        }
        if (!isFormValid) {
            this.snackbarService.informationSnackBar('Form is invalid. Please resolve the errors..');
        }
    };
    WashoutComponent.prototype.selectedWashoutContracts = function () {
        var _this = this;
        var selectedSectionIdList = [];
        if (this.washoutSelectionComponent.
            washoutSearchComponent.selectedWashoutContracts.length > 0) {
            this.washoutSelectionComponent.
                washoutSearchComponent.selectedWashoutContracts.map(function (data) {
                selectedSectionIdList.push(data.sectionId);
            });
            if (this.invoiceSetUpData) {
                this.washoutWorkingPageComponent.taxCostsComponent.setDefaultVatCode(this.invoiceSetUpData.defaultVATCode);
                this.washoutWorkingPageComponent.taxGoodsComponent.setDefaultVatCode(this.invoiceSetUpData.defaultVATCode);
                this.washoutWorkingPageComponent.washoutSelectionComponent.setDefaultAuthorizeForPosting(this.invoiceSetUpData.authorizedForPosting);
                this.washoutWorkingPageComponent.washoutPaymentComponent.setPaymentTerms(this.invoiceSetUpData.paymentTermCode);
                this.washoutWorkingPageComponent.additionalCostComponent.setDefaultVatCode(this.invoiceSetUpData.defaultVATCode);
            }
            this.subscriptions.push(this.executionService.getAllocatedContractsForSelectedWashout(selectedSectionIdList)
                .subscribe((function (allocatedWashoutContract) {
                if (allocatedWashoutContract) {
                    if (!_this.isCreateInvoiceButtonClicked) {
                        _this.washoutWorkingPageComponent.contractsSelected(allocatedWashoutContract.value);
                        _this.washoutWorkingPageComponent.valueOfGoodsComponent.selectedWashoutContracts(allocatedWashoutContract.value);
                    }
                    else {
                        _this.washoutSummaryComponent.washoutContracts(allocatedWashoutContract.value);
                    }
                }
            })));
        }
        else {
            this.isValid = false;
        }
    };
    WashoutComponent.prototype.getTaxRecordsForSelectedCost = function () {
        this.taxRecords = this.washoutWorkingPageComponent.taxCostsComponent.taxesGridRows;
        this.totalData = this.washoutWorkingPageComponent.totalData;
        this.goodsTaxCode = this.washoutWorkingPageComponent.selectedGoodsVatCode;
    };
    WashoutComponent.prototype.costAndTaxRowsSelected = function () {
        this.washoutWorkingPageComponent.additionalCostComponent.setAllInvoiceCostLines();
        this.invoiceCostContracts = this.washoutWorkingPageComponent.additionalCostComponent
            .getAllInvoiceCostLines();
        this.invoiceGoodsContracts = this.washoutWorkingPageComponent.valueOfGoodsComponent
            .valueOfGoodsGridRows;
        this.getTaxRecordsForSelectedCost();
    };
    WashoutComponent.prototype.onWashoutContractsSelected = function (contractsSelected) {
        this.isValid = contractsSelected;
    };
    WashoutComponent.prototype.onChangeValueOfGoods = function (model) {
        this.valueOfGoodsData = model;
    };
    WashoutComponent.prototype.ontotalAmountCalculated = function (model) {
        this.totalData = model;
    };
    WashoutComponent.prototype.onChangeCostContract = function (model) {
        this.invoiceCostContracts = model;
    };
    WashoutComponent.prototype.onPricingAndDecimalOptionSelected = function (model) {
        if (this.washoutWorkingPageComponent) {
            this.washoutWorkingPageComponent.pricingAndDecimalOptionSelected(model.pricingSelected, model.decimalOptionSelected);
        }
    };
    WashoutComponent.prototype.onCounterPartySelected = function (counterParty) {
        this.washoutWorkingPageComponent.washoutSelectionComponent.counterPartySelected(counterParty);
    };
    WashoutComponent.prototype.nextInvoiceButtonClicked = function () {
        var searchContractRef = '';
        var searchCounterParty = '';
        var searchCharterRef = '';
        searchContractRef = this.washoutSelectionComponent.washoutSearchComponent.searchContractReference;
        searchCounterParty = this.washoutSelectionComponent.washoutSearchComponent.searchCounterParty;
        searchCharterRef = this.washoutSelectionComponent.washoutSearchComponent.saveCharterReference;
        this.router.navigate(['/' + this.companyManager.getCurrentCompanyId() +
                '/execution/invoicing/' + encodeURIComponent(this.invoiceTypeId.toString())], {
            queryParams: {
                savedContractReference: searchContractRef, savedCounterParty: searchCounterParty,
                savedCharterReference: searchCharterRef,
            },
            skipLocationChange: true,
        });
    };
    WashoutComponent.prototype.checkForPayableorReceivable = function () {
        var _this = this;
        this.washoutSelectedValues = this.washoutWorkingPageComponent.getWashoutRecords();
        if (this.washoutSelectedValues) {
            this.selectedSupplier = this.masterData.counterparties.find(function (counterParty) { return counterParty.description === _this.washoutSelectedValues.counterpartyCode; });
            (this.washoutSelectedValues.costDirection === _shared_enums_cost_direction_enum__WEBPACK_IMPORTED_MODULE_7__["CostDirections"].Payable) ?
                this.showConfirmationModal(this.hasTemplate && this.previewDocumentCtrl.value) :
                this.getCompanyBankAccounts();
        }
    };
    WashoutComponent.prototype.getCompanyBankAccounts = function () {
        var _this = this;
        if (this.selectedSupplier && this.washoutSelectedValues.currency) {
            this.masterdataService.getCompanyBankAccounts(this.washoutSelectedValues.currency)
                .subscribe(function (data) {
                if (data.value.length > 0) {
                    _this.filteredCompanyBankAccounts = data.value;
                }
                _this.showAvailableBankingOptionDialog();
            }, function (error) {
                console.error(error);
                _this.snackbarService.throwErrorSnackBar('Oops! An error ocurred');
            });
        }
    };
    WashoutComponent.prototype.showAvailableBankingOptionDialog = function () {
        var _this = this;
        if (this.filteredCompanyBankAccounts) {
            var availableBankingoptionDialog = this.dialog.open(_dialog_boxes_bank_account_dialog_bank_account_dialog_component__WEBPACK_IMPORTED_MODULE_18__["BankAccountDialogComponent"], {
                data: {
                    title: 'Bank Account',
                    okButton: 'Confirm',
                    value: this.filteredCompanyBankAccounts,
                },
            });
            availableBankingoptionDialog.afterClosed().subscribe(function (answer) {
                if (!answer) {
                    _this.isLoading = false;
                }
                else if (answer.isClose) {
                    _this.selectedbankAccountId = answer.selectedValue;
                    _this.showConfirmationModal(_this.hasTemplate && _this.previewDocumentCtrl.value);
                }
            });
        }
    };
    WashoutComponent.prototype.onBackButtonClicked = function (index) {
        this.isCompleted = false;
        this.stepper.selectedIndex = index;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('washoutSelectionComponent'),
        __metadata("design:type", _components_washout_selection_washout_selection_component__WEBPACK_IMPORTED_MODULE_20__["WashoutSelectionComponent"])
    ], WashoutComponent.prototype, "washoutSelectionComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('washoutWorkingPageComponent'),
        __metadata("design:type", _components_washout_working_page_washout_working_page_component__WEBPACK_IMPORTED_MODULE_22__["WashoutWorkingPageComponent"])
    ], WashoutComponent.prototype, "washoutWorkingPageComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('washoutSummaryComponent'),
        __metadata("design:type", _components_washout_summary_washout_summary_component__WEBPACK_IMPORTED_MODULE_21__["WashoutSummaryComponent"])
    ], WashoutComponent.prototype, "washoutSummaryComponent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('stepper'),
        __metadata("design:type", _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatStepper"])
    ], WashoutComponent.prototype, "stepper", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"])('window:beforeunload', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], WashoutComponent.prototype, "unloadNotification", null);
    WashoutComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'atlas-washout',
            template: __webpack_require__(/*! ./washout.component.html */ "./Client/app/execution/execution-invoicing/washout/washout.component.html"),
            styles: [__webpack_require__(/*! ./washout.component.scss */ "./Client/app/execution/execution-invoicing/washout/washout.component.scss")],
        }),
        __param(5, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_shared_entities_window_injection_token__WEBPACK_IMPORTED_MODULE_6__["WINDOW"])),
        __metadata("design:paramtypes", [_angular_material__WEBPACK_IMPORTED_MODULE_2__["MatDialog"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"],
            _core_services_company_manager_service__WEBPACK_IMPORTED_MODULE_4__["CompanyManagerService"],
            _shared_services_snackbar_service__WEBPACK_IMPORTED_MODULE_16__["SnackbarService"],
            _shared_services_http_services_document_service__WEBPACK_IMPORTED_MODULE_12__["DocumentService"],
            Window,
            _shared_services_util_service__WEBPACK_IMPORTED_MODULE_17__["UtilService"],
            _shared_services_http_services_execution_service__WEBPACK_IMPORTED_MODULE_13__["ExecutionService"],
            _shared_services_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_14__["MasterdataService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"],
            _shared_services_http_services_preaccounting_service__WEBPACK_IMPORTED_MODULE_15__["PreaccountingService"],
            _shared_services_form_configuration_provider_service__WEBPACK_IMPORTED_MODULE_11__["FormConfigurationProviderService"],
            _shared_services_document_popup_service__WEBPACK_IMPORTED_MODULE_10__["DocumentPopupService"]])
    ], WashoutComponent);
    return WashoutComponent;
}(_invoicing_base_form_invoicing_base_form_component__WEBPACK_IMPORTED_MODULE_19__["InvoicingBaseFormComponent"]));



/***/ }),

/***/ "./Client/app/execution/execution.module.ts":
/*!**************************************************!*\
  !*** ./Client/app/execution/execution.module.ts ***!
  \**************************************************/
/*! exports provided: ExecutionModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExecutionModule", function() { return ExecutionModule; });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var ag_grid_angular__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ag-grid-angular */ "./node_modules/ag-grid-angular/main.js");
/* harmony import */ var ag_grid_angular__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(ag_grid_angular__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var angular2_text_mask__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! angular2-text-mask */ "./node_modules/angular2-text-mask/dist/angular2TextMask.js");
/* harmony import */ var angular2_text_mask__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(angular2_text_mask__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _home_execution_dashboard_missing_invoices_details_missing_invoices_details_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../home/execution-dashboard/missing-invoices-details/missing-invoices-details.component */ "./Client/app/home/execution-dashboard/missing-invoices-details/missing-invoices-details.component.ts");
/* harmony import */ var _shared_components_ag_grid_checkbox_ag_grid_checkbox_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../shared/components/ag-grid-checkbox/ag-grid-checkbox.component */ "./Client/app/shared/components/ag-grid-checkbox/ag-grid-checkbox.component.ts");
/* harmony import */ var _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../shared/components/confirmation-dialog/confirmation-dialog.component */ "./Client/app/shared/components/confirmation-dialog/confirmation-dialog.component.ts");
/* harmony import */ var _shared_material_module__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../shared/material.module */ "./Client/app/shared/material.module.ts");
/* harmony import */ var _shared_services_customDateAdapter__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../shared/services/customDateAdapter */ "./Client/app/shared/services/customDateAdapter.ts");
/* harmony import */ var _shared_shared_module__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../shared/shared.module */ "./Client/app/shared/shared.module.ts");
/* harmony import */ var _document_contract_advice_generation_contract_advice_generation_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./document/contract-advice-generation/contract-advice-generation.component */ "./Client/app/execution/document/contract-advice-generation/contract-advice-generation.component.ts");
/* harmony import */ var _document_contract_advice_generation_form_components_selection_form_selection_form_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./document/contract-advice-generation/form-components/selection-form/selection-form.component */ "./Client/app/execution/document/contract-advice-generation/form-components/selection-form/selection-form.component.ts");
/* harmony import */ var _document_dialog_boxes_document_upload_dialog_box_document_upload_dialog_box_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./document/dialog-boxes/document-upload-dialog-box/document-upload-dialog-box.component */ "./Client/app/execution/document/dialog-boxes/document-upload-dialog-box/document-upload-dialog-box.component.ts");
/* harmony import */ var _document_list_card_document_list_card_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./document/list/card/document-list-card.component */ "./Client/app/execution/document/list/card/document-list-card.component.ts");
/* harmony import */ var _document_list_document_list_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./document/list/document-list.component */ "./Client/app/execution/document/list/document-list.component.ts");
/* harmony import */ var _execution_allocation_execution_allocation_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./execution-allocation/execution-allocation.component */ "./Client/app/execution/execution-allocation/execution-allocation.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_cash_details_additional_costs_additional_costs_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/cash-details/additional-costs/additional-costs.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-costs/additional-costs.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_cash_details_additional_details_additional_details_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/cash-details/additional-details/additional-details.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/additional-details/additional-details.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_cash_details_bank_information_bank_information_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/cash-details/bank-information/bank-information.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/bank-information/bank-information.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_cash_details_cash_details_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/cash-details/cash-details.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/cash-details.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_cash_details_counterparty_card_counterparty_card_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/cash-details/counterparty-card/counterparty-card.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/counterparty-card/counterparty-card.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_cash_details_currency_information_card_currency_information_card_component__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/cash-details/currency-information-card/currency-information-card.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/currency-information-card/currency-information-card.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_cash_details_document_information_document_information_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/cash-details/document-information/document-information.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/document-information/document-information.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_cash_details_template_selection_card_payment_order_template_selection_card_component__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/cash-details/template-selection-card/payment-order-template-selection-card.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-details/template-selection-card/payment-order-template-selection-card.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_cash_dialog_component_cash_warning_dialog_component_cash_warning_dialog_component_component__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/cash-dialog-component/cash-warning-dialog-component/cash-warning-dialog-component.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-dialog-component/cash-warning-dialog-component/cash-warning-dialog-component.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_cash_selection_cash_selection_component__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/cash-selection/cash-selection.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/cash-selection.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_cash_selection_payment_different_client_payment_different_client_component__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/cash-selection/payment-different-client/payment-different-client.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-different-client/payment-different-client.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_cash_selection_payment_different_currency_payment_different_currency_component__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/cash-selection/payment-different-currency/payment-different-currency.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-different-currency/payment-different-currency.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_cash_selection_payment_full_transaction_payment_full_transaction_component__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/cash-selection/payment-full-transaction/payment-full-transaction.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/payment-full-transaction/payment-full-transaction.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_cash_selection_receipt_different_currency_receipt_different_currency_component__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/cash-selection/receipt-different-currency/receipt-different-currency.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/receipt-different-currency/receipt-different-currency.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_cash_selection_receipt_full_transaction_receipt_full_transaction_component__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/cash-selection/receipt-full-transaction/receipt-full-transaction.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/receipt-full-transaction/receipt-full-transaction.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_cash_selection_simple_cash_payment_simple_cash_payment_component__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/cash-selection/simple-cash-payment/simple-cash-payment.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/simple-cash-payment/simple-cash-payment.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_cash_selection_simple_cash_receipt_simple_cash_receipt_component__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/cash-selection/simple-cash-receipt/simple-cash-receipt.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-selection/simple-cash-receipt/simple-cash-receipt.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_cash_summary_cash_summary_component__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/cash-summary/cash-summary.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-summary/cash-summary.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_cash_summary_invoice_grid_for_summary_invoice_grid_for_summary_component__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/cash-summary/invoice-grid-for-summary/invoice-grid-for-summary.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-summary/invoice-grid-for-summary/invoice-grid-for-summary.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_execution_cash_create_component__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/execution-cash-create.component */ "./Client/app/execution/execution-cash/execution-cash-create/execution-cash-create.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_pick_transaction_invoice_matching_invoice_matching_component__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/pick-transaction/invoice-matching/invoice-matching.component */ "./Client/app/execution/execution-cash/execution-cash-create/pick-transaction/invoice-matching/invoice-matching.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_pick_transaction_pick_transaction_component__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/pick-transaction/pick-transaction.component */ "./Client/app/execution/execution-cash/execution-cash-create/pick-transaction/pick-transaction.component.ts");
/* harmony import */ var _execution_cash_execution_cash_payment_list_page_execution_cash_payment_list_page_component__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./execution-cash/execution-cash-payment-list-page/execution-cash-payment-list-page.component */ "./Client/app/execution/execution-cash/execution-cash-payment-list-page/execution-cash-payment-list-page.component.ts");
/* harmony import */ var _execution_cash_execution_cash_component__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./execution-cash/execution-cash.component */ "./Client/app/execution/execution-cash/execution-cash.component.ts");
/* harmony import */ var _execution_charter_ag_grid_charterstatus_for_charter_bulk_closure_ag_grid_charterstatus_for_charter_bulk_closure_component__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./execution-charter/ag-grid-charterstatus-for-charter-bulk-closure/ag-grid-charterstatus-for-charter-bulk-closure.component */ "./Client/app/execution/execution-charter/ag-grid-charterstatus-for-charter-bulk-closure/ag-grid-charterstatus-for-charter-bulk-closure.component.ts");
/* harmony import */ var _execution_charter_ag_grid_hyperlink_for_charter_bulk_closure_ag_grid_hyperlink_for_charter_bulk_closure_component__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./execution-charter/ag-grid-hyperlink-for-charter-bulk-closure/ag-grid-hyperlink-for-charter-bulk-closure.component */ "./Client/app/execution/execution-charter/ag-grid-hyperlink-for-charter-bulk-closure/ag-grid-hyperlink-for-charter-bulk-closure.component.ts");
/* harmony import */ var _execution_charter_execution_charter_allocation_deallocation_allocation_form_components_purchase_allocation_component_purchase_allocation_component_component__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./execution-charter/execution-charter-allocation-deallocation/allocation-form-components/purchase-allocation-component/purchase-allocation-component.component */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/purchase-allocation-component/purchase-allocation-component.component.ts");
/* harmony import */ var _execution_charter_execution_charter_allocation_deallocation_allocation_form_components_quantity_allocation_component_quantity_allocation_component_component__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./execution-charter/execution-charter-allocation-deallocation/allocation-form-components/quantity-allocation-component/quantity-allocation-component.component */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/quantity-allocation-component/quantity-allocation-component.component.ts");
/* harmony import */ var _execution_charter_execution_charter_allocation_deallocation_allocation_form_components_sale_allocation_component_sale_allocation_component_component__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./execution-charter/execution-charter-allocation-deallocation/allocation-form-components/sale-allocation-component/sale-allocation-component.component */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/allocation-form-components/sale-allocation-component/sale-allocation-component.component.ts");
/* harmony import */ var _execution_charter_execution_charter_allocation_deallocation_contract_deallocation_dialog_component_contract_deallocation_dialog_component_component__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./execution-charter/execution-charter-allocation-deallocation/contract-deallocation-dialog-component/contract-deallocation-dialog-component.component */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/contract-deallocation-dialog-component/contract-deallocation-dialog-component.component.ts");
/* harmony import */ var _execution_charter_execution_charter_allocation_deallocation_deallocation_form_component_deallocation_component_deallocation_component_component__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ./execution-charter/execution-charter-allocation-deallocation/deallocation-form-component/deallocation-component/deallocation-component.component */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/deallocation-form-component/deallocation-component/deallocation-component.component.ts");
/* harmony import */ var _execution_charter_execution_charter_allocation_deallocation_execution_charter_allocation_deallocation_component__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ./execution-charter/execution-charter-allocation-deallocation/execution-charter-allocation-deallocation.component */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/execution-charter-allocation-deallocation.component.ts");
/* harmony import */ var _execution_charter_execution_charter_assignment_execution_charter_assignment_component__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ./execution-charter/execution-charter-assignment/execution-charter-assignment.component */ "./Client/app/execution/execution-charter/execution-charter-assignment/execution-charter-assignment.component.ts");
/* harmony import */ var _execution_charter_execution_charter_creation_page_components_additional_information_form_component_additional_information_form_component_component__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ./execution-charter/execution-charter-creation-page/components/additional-information-form-component/additional-information-form-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/additional-information-form-component/additional-information-form-component.component.ts");
/* harmony import */ var _execution_charter_execution_charter_creation_page_components_assign_section_dialog_assign_section_dialog_component__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ./execution-charter/execution-charter-creation-page/components/assign-section-dialog/assign-section-dialog.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/assign-section-dialog/assign-section-dialog.component.ts");
/* harmony import */ var _execution_charter_execution_charter_creation_page_components_assigned_contract_list_form_component_assigned_contract_list_form_component_component__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ./execution-charter/execution-charter-creation-page/components/assigned-contract-list-form-component/assigned-contract-list-form-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/assigned-contract-list-form-component/assigned-contract-list-form-component.component.ts");
/* harmony import */ var _execution_charter_execution_charter_creation_page_components_charter_menu_bar_component_charter_menu_bar_component_component__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! ./execution-charter/execution-charter-creation-page/components/charter-menu-bar-component/charter-menu-bar-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-menu-bar-component/charter-menu-bar-component.component.ts");
/* harmony import */ var _execution_charter_execution_charter_creation_page_components_charter_pnl_report_charter_pnl_report_component__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ./execution-charter/execution-charter-creation-page/components/charter-pnl-report/charter-pnl-report.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-pnl-report/charter-pnl-report.component.ts");
/* harmony import */ var _execution_charter_execution_charter_creation_page_components_charter_report_charter_report_component__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! ./execution-charter/execution-charter-creation-page/components/charter-report/charter-report.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/charter-report/charter-report.component.ts");
/* harmony import */ var _execution_charter_execution_charter_creation_page_components_deassign_section_dialog_deassign_section_dialog_component__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! ./execution-charter/execution-charter-creation-page/components/deassign-section-dialog/deassign-section-dialog.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/deassign-section-dialog/deassign-section-dialog.component.ts");
/* harmony import */ var _execution_charter_execution_charter_creation_page_components_main_information_form_component_main_information_form_component_component__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! ./execution-charter/execution-charter-creation-page/components/main-information-form-component/main-information-form-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/main-information-form-component/main-information-form-component.component.ts");
/* harmony import */ var _execution_charter_execution_charter_creation_page_components_memo_form_component_memo_form_component_component__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! ./execution-charter/execution-charter-creation-page/components/memo-form-component/memo-form-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/memo-form-component/memo-form-component.component.ts");
/* harmony import */ var _execution_charter_execution_charter_creation_page_components_reassign_contract_ag_grid_reassign_contract_ag_grid_component__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! ./execution-charter/execution-charter-creation-page/components/reassign-contract-ag-grid/reassign-contract-ag-grid.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/reassign-contract-ag-grid/reassign-contract-ag-grid.component.ts");
/* harmony import */ var _execution_charter_execution_charter_creation_page_components_reassign_section_dialog_reassign_section_dialog_component__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! ./execution-charter/execution-charter-creation-page/components/reassign-section-dialog/reassign-section-dialog.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/reassign-section-dialog/reassign-section-dialog.component.ts");
/* harmony import */ var _execution_charter_execution_charter_creation_page_components_shipment_form_component_shipment_form_component_component__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! ./execution-charter/execution-charter-creation-page/components/shipment-form-component/shipment-form-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/shipment-form-component/shipment-form-component.component.ts");
/* harmony import */ var _execution_charter_execution_charter_creation_page_components_total_card_component_total_card_component_component__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! ./execution-charter/execution-charter-creation-page/components/total-card-component/total-card-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/total-card-component/total-card-component.component.ts");
/* harmony import */ var _execution_charter_execution_charter_creation_page_components_warning_component_warning_component_component__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! ./execution-charter/execution-charter-creation-page/components/warning-component/warning-component.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/components/warning-component/warning-component.component.ts");
/* harmony import */ var _execution_charter_execution_charter_creation_page_execution_charter_creation_page_component__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! ./execution-charter/execution-charter-creation-page/execution-charter-creation-page.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/execution-charter-creation-page.component.ts");
/* harmony import */ var _execution_charter_execution_charter_details_execution_charter_details_component__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! ./execution-charter/execution-charter-details/execution-charter-details.component */ "./Client/app/execution/execution-charter/execution-charter-details/execution-charter-details.component.ts");
/* harmony import */ var _execution_charter_execution_charter_edit_page_execution_charter_edit_page_component__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! ./execution-charter/execution-charter-edit-page/execution-charter-edit-page.component */ "./Client/app/execution/execution-charter/execution-charter-edit-page/execution-charter-edit-page.component.ts");
/* harmony import */ var _execution_charter_execution_charter_list_page_execution_charter_list_page_component__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! ./execution-charter/execution-charter-list-page/execution-charter-list-page.component */ "./Client/app/execution/execution-charter/execution-charter-list-page/execution-charter-list-page.component.ts");
/* harmony import */ var _execution_charter_group_amendments_charter_bulk_closure_charter_bulk_closure_component__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! ./execution-charter/group-amendments/charter-bulk-closure/charter-bulk-closure.component */ "./Client/app/execution/execution-charter/group-amendments/charter-bulk-closure/charter-bulk-closure.component.ts");
/* harmony import */ var _execution_charter_group_amendments_execution_charter_group_amendments_component__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! ./execution-charter/group-amendments/execution-charter-group-amendments.component */ "./Client/app/execution/execution-charter/group-amendments/execution-charter-group-amendments.component.ts");
/* harmony import */ var _execution_charter_group_function_bulk_closure_function_charter_bulk_closure_matrix_charter_bulk_closure_matrix_component__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(/*! ./execution-charter/group-function/bulk-closure-function/charter-bulk-closure-matrix/charter-bulk-closure-matrix.component */ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-matrix/charter-bulk-closure-matrix.component.ts");
/* harmony import */ var _execution_charter_group_function_bulk_closure_function_charter_bulk_closure_summary_charter_bulk_closure_summary_component__WEBPACK_IMPORTED_MODULE_72__ = __webpack_require__(/*! ./execution-charter/group-function/bulk-closure-function/charter-bulk-closure-summary/charter-bulk-closure-summary.component */ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-bulk-closure-summary/charter-bulk-closure-summary.component.ts");
/* harmony import */ var _execution_charter_group_function_bulk_closure_function_charter_selection_bulk_closure_charter_selection_bulk_closure_component__WEBPACK_IMPORTED_MODULE_73__ = __webpack_require__(/*! ./execution-charter/group-function/bulk-closure-function/charter-selection-bulk-closure/charter-selection-bulk-closure.component */ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/charter-selection-bulk-closure/charter-selection-bulk-closure.component.ts");
/* harmony import */ var _execution_charter_group_function_bulk_closure_function_execution_charter_bulk_closure_function_component__WEBPACK_IMPORTED_MODULE_74__ = __webpack_require__(/*! ./execution-charter/group-function/bulk-closure-function/execution-charter-bulk-closure-function.component */ "./Client/app/execution/execution-charter/group-function/bulk-closure-function/execution-charter-bulk-closure-function.component.ts");
/* harmony import */ var _execution_charter_group_function_execution_charter_group_function_component__WEBPACK_IMPORTED_MODULE_75__ = __webpack_require__(/*! ./execution-charter/group-function/execution-charter-group-function.component */ "./Client/app/execution/execution-charter/group-function/execution-charter-group-function.component.ts");
/* harmony import */ var _execution_invoicing_create_components_cost_form_component_cost_form_component_component__WEBPACK_IMPORTED_MODULE_76__ = __webpack_require__(/*! ./execution-invoicing-create/components/cost-form-component/cost-form-component.component */ "./Client/app/execution/execution-invoicing-create/components/cost-form-component/cost-form-component.component.ts");
/* harmony import */ var _execution_invoicing_create_components_purchase_goods_form_component_purchase_goods_form_component_component__WEBPACK_IMPORTED_MODULE_77__ = __webpack_require__(/*! ./execution-invoicing-create/components/purchase-goods-form-component/purchase-goods-form-component.component */ "./Client/app/execution/execution-invoicing-create/components/purchase-goods-form-component/purchase-goods-form-component.component.ts");
/* harmony import */ var _execution_invoicing_create_components_quantity_invoice_form_component_quantity_invoice_form_component_component__WEBPACK_IMPORTED_MODULE_78__ = __webpack_require__(/*! ./execution-invoicing-create/components/quantity-invoice-form-component/quantity-invoice-form-component.component */ "./Client/app/execution/execution-invoicing-create/components/quantity-invoice-form-component/quantity-invoice-form-component.component.ts");
/* harmony import */ var _execution_invoicing_create_components_reversal_form_component_reversal_form_component_component__WEBPACK_IMPORTED_MODULE_79__ = __webpack_require__(/*! ./execution-invoicing-create/components/reversal-form-component/reversal-form-component.component */ "./Client/app/execution/execution-invoicing-create/components/reversal-form-component/reversal-form-component.component.ts");
/* harmony import */ var _execution_invoicing_create_components_sales_goods_form_component_sales_goods_form_component_component__WEBPACK_IMPORTED_MODULE_80__ = __webpack_require__(/*! ./execution-invoicing-create/components/sales-goods-form-component/sales-goods-form-component.component */ "./Client/app/execution/execution-invoicing-create/components/sales-goods-form-component/sales-goods-form-component.component.ts");
/* harmony import */ var _execution_invoicing_create_components_washout_form_component_washout_form_component_component__WEBPACK_IMPORTED_MODULE_81__ = __webpack_require__(/*! ./execution-invoicing-create/components/washout-form-component/washout-form-component.component */ "./Client/app/execution/execution-invoicing-create/components/washout-form-component/washout-form-component.component.ts");
/* harmony import */ var _execution_invoicing_create_execution_invoicing_create_component__WEBPACK_IMPORTED_MODULE_82__ = __webpack_require__(/*! ./execution-invoicing-create/execution-invoicing-create.component */ "./Client/app/execution/execution-invoicing-create/execution-invoicing-create.component.ts");
/* harmony import */ var _execution_invoicing_home_execution_invoicing_home_component__WEBPACK_IMPORTED_MODULE_83__ = __webpack_require__(/*! ./execution-invoicing-home/execution-invoicing-home.component */ "./Client/app/execution/execution-invoicing-home/execution-invoicing-home.component.ts");
/* harmony import */ var _execution_invoicing_commercial_commercial_component__WEBPACK_IMPORTED_MODULE_84__ = __webpack_require__(/*! ./execution-invoicing/commercial/commercial.component */ "./Client/app/execution/execution-invoicing/commercial/commercial.component.ts");
/* harmony import */ var _execution_invoicing_commercial_components_commercial_selection_commercial_selection_component__WEBPACK_IMPORTED_MODULE_85__ = __webpack_require__(/*! ./execution-invoicing/commercial/components/commercial-selection/commercial-selection.component */ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/commercial-selection.component.ts");
/* harmony import */ var _execution_invoicing_commercial_components_commercial_selection_components_contract_selection_form_component_contract_selection_form_component_component__WEBPACK_IMPORTED_MODULE_86__ = __webpack_require__(/*! ./execution-invoicing/commercial/components/commercial-selection/components/contract-selection-form-component/contract-selection-form-component.component */ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/contract-selection-form-component/contract-selection-form-component.component.ts");
/* harmony import */ var _execution_invoicing_commercial_components_commercial_selection_components_invoice_selection_form_component_invoice_selection_form_component_component__WEBPACK_IMPORTED_MODULE_87__ = __webpack_require__(/*! ./execution-invoicing/commercial/components/commercial-selection/components/invoice-selection-form-component/invoice-selection-form-component.component */ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/invoice-selection-form-component/invoice-selection-form-component.component.ts");
/* harmony import */ var _execution_invoicing_commercial_components_commercial_selection_components_pricing_options_pricing_options_component__WEBPACK_IMPORTED_MODULE_88__ = __webpack_require__(/*! ./execution-invoicing/commercial/components/commercial-selection/components/pricing-options/pricing-options.component */ "./Client/app/execution/execution-invoicing/commercial/components/commercial-selection/components/pricing-options/pricing-options.component.ts");
/* harmony import */ var _execution_invoicing_commercial_components_summary_commercial_summary_component__WEBPACK_IMPORTED_MODULE_89__ = __webpack_require__(/*! ./execution-invoicing/commercial/components/summary/commercial-summary.component */ "./Client/app/execution/execution-invoicing/commercial/components/summary/commercial-summary.component.ts");
/* harmony import */ var _execution_invoicing_commercial_components_working_page_commercial_working_page_component__WEBPACK_IMPORTED_MODULE_90__ = __webpack_require__(/*! ./execution-invoicing/commercial/components/working-page/commercial-working-page.component */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/commercial-working-page.component.ts");
/* harmony import */ var _execution_invoicing_commercial_components_working_page_components_add_cost_tax_add_cost_tax_component__WEBPACK_IMPORTED_MODULE_91__ = __webpack_require__(/*! ./execution-invoicing/commercial/components/working-page/components/add-cost-tax/add-cost-tax.component */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost-tax/add-cost-tax.component.ts");
/* harmony import */ var _execution_invoicing_commercial_components_working_page_components_add_cost_total_add_cost_total_component__WEBPACK_IMPORTED_MODULE_92__ = __webpack_require__(/*! ./execution-invoicing/commercial/components/working-page/components/add-cost-total/add-cost-total.component */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost-total/add-cost-total.component.ts");
/* harmony import */ var _execution_invoicing_commercial_components_working_page_components_add_cost_add_cost_component__WEBPACK_IMPORTED_MODULE_93__ = __webpack_require__(/*! ./execution-invoicing/commercial/components/working-page/components/add-cost/add-cost.component */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/add-cost/add-cost.component.ts");
/* harmony import */ var _execution_invoicing_commercial_components_working_page_components_payments_component_payments_component_component__WEBPACK_IMPORTED_MODULE_94__ = __webpack_require__(/*! ./execution-invoicing/commercial/components/working-page/components/payments-component/payments-component.component */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/payments-component/payments-component.component.ts");
/* harmony import */ var _execution_invoicing_commercial_components_working_page_components_selection_form_component_selection_form_component_component__WEBPACK_IMPORTED_MODULE_95__ = __webpack_require__(/*! ./execution-invoicing/commercial/components/working-page/components/selection-form-component/selection-form-component.component */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/selection-form-component/selection-form-component.component.ts");
/* harmony import */ var _execution_invoicing_commercial_components_working_page_components_taxes_component_taxes_component_component__WEBPACK_IMPORTED_MODULE_96__ = __webpack_require__(/*! ./execution-invoicing/commercial/components/working-page/components/taxes-component/taxes-component.component */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/taxes-component/taxes-component.component.ts");
/* harmony import */ var _execution_invoicing_commercial_components_working_page_components_value_of_goods_component_value_of_goods_component_component__WEBPACK_IMPORTED_MODULE_97__ = __webpack_require__(/*! ./execution-invoicing/commercial/components/working-page/components/value-of-goods-component/value-of-goods-component.component */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/value-of-goods-component/value-of-goods-component.component.ts");
/* harmony import */ var _execution_invoicing_components_document_template_document_template_component__WEBPACK_IMPORTED_MODULE_98__ = __webpack_require__(/*! ./execution-invoicing/components/document-template/document-template.component */ "./Client/app/execution/execution-invoicing/components/document-template/document-template.component.ts");
/* harmony import */ var _execution_invoicing_cost_components_cost_selection_components_contract_search_contract_search_component__WEBPACK_IMPORTED_MODULE_99__ = __webpack_require__(/*! ./execution-invoicing/cost/components/cost-selection/components/contract-search/contract-search.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/contract-search/contract-search.component.ts");
/* harmony import */ var _execution_invoicing_cost_components_cost_selection_components_cost_invoicee_options_cost_invoicee_options_component__WEBPACK_IMPORTED_MODULE_100__ = __webpack_require__(/*! ./execution-invoicing/cost/components/cost-selection/components/cost-invoicee-options/cost-invoicee-options.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/cost-invoicee-options/cost-invoicee-options.component.ts");
/* harmony import */ var _execution_invoicing_cost_components_cost_selection_components_invoice_selection_invoice_selection_component__WEBPACK_IMPORTED_MODULE_101__ = __webpack_require__(/*! ./execution-invoicing/cost/components/cost-selection/components/invoice-selection/invoice-selection.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/components/invoice-selection/invoice-selection.component.ts");
/* harmony import */ var _execution_invoicing_cost_components_cost_selection_cost_selection_component__WEBPACK_IMPORTED_MODULE_102__ = __webpack_require__(/*! ./execution-invoicing/cost/components/cost-selection/cost-selection.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-selection/cost-selection.component.ts");
/* harmony import */ var _execution_invoicing_cost_components_cost_working_page_components_document_template_cost_document_template_component__WEBPACK_IMPORTED_MODULE_103__ = __webpack_require__(/*! ./execution-invoicing/cost/components/cost-working-page/components/document-template/cost-document-template.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/document-template/cost-document-template.component.ts");
/* harmony import */ var _execution_invoicing_cost_components_cost_working_page_components_payments_cost_payments_component__WEBPACK_IMPORTED_MODULE_104__ = __webpack_require__(/*! ./execution-invoicing/cost/components/cost-working-page/components/payments/cost-payments.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/payments/cost-payments.component.ts");
/* harmony import */ var _execution_invoicing_cost_components_cost_working_page_components_selected_cost_invoice_cost_selected_cost_component__WEBPACK_IMPORTED_MODULE_105__ = __webpack_require__(/*! ./execution-invoicing/cost/components/cost-working-page/components/selected-cost/invoice-cost-selected-cost.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/selected-cost/invoice-cost-selected-cost.component.ts");
/* harmony import */ var _execution_invoicing_cost_components_cost_working_page_components_selection_cost_invoice_selection_component__WEBPACK_IMPORTED_MODULE_106__ = __webpack_require__(/*! ./execution-invoicing/cost/components/cost-working-page/components/selection/cost-invoice-selection.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/selection/cost-invoice-selection.component.ts");
/* harmony import */ var _execution_invoicing_cost_components_cost_working_page_components_taxes_invoicing_cost_taxes_component__WEBPACK_IMPORTED_MODULE_107__ = __webpack_require__(/*! ./execution-invoicing/cost/components/cost-working-page/components/taxes/invoicing-cost-taxes.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/components/taxes/invoicing-cost-taxes.component.ts");
/* harmony import */ var _execution_invoicing_cost_components_cost_working_page_cost_working_page_component__WEBPACK_IMPORTED_MODULE_108__ = __webpack_require__(/*! ./execution-invoicing/cost/components/cost-working-page/cost-working-page.component */ "./Client/app/execution/execution-invoicing/cost/components/cost-working-page/cost-working-page.component.ts");
/* harmony import */ var _execution_invoicing_cost_components_summary_cost_summary_component__WEBPACK_IMPORTED_MODULE_109__ = __webpack_require__(/*! ./execution-invoicing/cost/components/summary/cost-summary.component */ "./Client/app/execution/execution-invoicing/cost/components/summary/cost-summary.component.ts");
/* harmony import */ var _execution_invoicing_cost_cost_component__WEBPACK_IMPORTED_MODULE_110__ = __webpack_require__(/*! ./execution-invoicing/cost/cost.component */ "./Client/app/execution/execution-invoicing/cost/cost.component.ts");
/* harmony import */ var _execution_invoicing_dialog_boxes_apportion_dialog_apportion_dialog_component__WEBPACK_IMPORTED_MODULE_111__ = __webpack_require__(/*! ./execution-invoicing/dialog-boxes/apportion-dialog/apportion-dialog.component */ "./Client/app/execution/execution-invoicing/dialog-boxes/apportion-dialog/apportion-dialog.component.ts");
/* harmony import */ var _execution_invoicing_dialog_boxes_bank_account_dialog_bank_account_dialog_component__WEBPACK_IMPORTED_MODULE_112__ = __webpack_require__(/*! ./execution-invoicing/dialog-boxes/bank-account-dialog/bank-account-dialog.component */ "./Client/app/execution/execution-invoicing/dialog-boxes/bank-account-dialog/bank-account-dialog.component.ts");
/* harmony import */ var _execution_invoicing_execution_invoicing_component__WEBPACK_IMPORTED_MODULE_113__ = __webpack_require__(/*! ./execution-invoicing/execution-invoicing.component */ "./Client/app/execution/execution-invoicing/execution-invoicing.component.ts");
/* harmony import */ var _execution_invoicing_goods_cost_components_goods_cost_selection_cost_components_goods_cost_contracts_cost_goods_cost_contracts_cost_component__WEBPACK_IMPORTED_MODULE_114__ = __webpack_require__(/*! ./execution-invoicing/goods-cost/components/goods-cost-selection-cost/components/goods-cost-contracts-cost/goods-cost-contracts-cost.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection-cost/components/goods-cost-contracts-cost/goods-cost-contracts-cost.component.ts");
/* harmony import */ var _execution_invoicing_goods_cost_components_goods_cost_selection_cost_goods_cost_selection_cost_component__WEBPACK_IMPORTED_MODULE_115__ = __webpack_require__(/*! ./execution-invoicing/goods-cost/components/goods-cost-selection-cost/goods-cost-selection-cost.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection-cost/goods-cost-selection-cost.component.ts");
/* harmony import */ var _execution_invoicing_goods_cost_components_goods_cost_selection_components_goods_cost_contract_search_goods_cost_contract_search_component__WEBPACK_IMPORTED_MODULE_116__ = __webpack_require__(/*! ./execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-contract-search/goods-cost-contract-search.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-contract-search/goods-cost-contract-search.component.ts");
/* harmony import */ var _execution_invoicing_goods_cost_components_goods_cost_selection_components_goods_cost_invoice_selection_goods_cost_invoice_selection_component__WEBPACK_IMPORTED_MODULE_117__ = __webpack_require__(/*! ./execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-invoice-selection/goods-cost-invoice-selection.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-invoice-selection/goods-cost-invoice-selection.component.ts");
/* harmony import */ var _execution_invoicing_goods_cost_components_goods_cost_selection_components_goods_cost_pricing_options_goods_cost_pricing_options_component__WEBPACK_IMPORTED_MODULE_118__ = __webpack_require__(/*! ./execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-pricing-options/goods-cost-pricing-options.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/components/goods-cost-pricing-options/goods-cost-pricing-options.component.ts");
/* harmony import */ var _execution_invoicing_goods_cost_components_goods_cost_selection_goods_cost_selection_component__WEBPACK_IMPORTED_MODULE_119__ = __webpack_require__(/*! ./execution-invoicing/goods-cost/components/goods-cost-selection/goods-cost-selection.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-selection/goods-cost-selection.component.ts");
/* harmony import */ var _execution_invoicing_goods_cost_components_goods_cost_summary_goods_cost_summary_component__WEBPACK_IMPORTED_MODULE_120__ = __webpack_require__(/*! ./execution-invoicing/goods-cost/components/goods-cost-summary/goods-cost-summary.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-summary/goods-cost-summary.component.ts");
/* harmony import */ var _execution_invoicing_goods_cost_components_goods_cost_working_page_components_goods_cost_additional_cost_goods_cost_additional_cost_component__WEBPACK_IMPORTED_MODULE_121__ = __webpack_require__(/*! ./execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-additional-cost/goods-cost-additional-cost.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-additional-cost/goods-cost-additional-cost.component.ts");
/* harmony import */ var _execution_invoicing_goods_cost_components_goods_cost_working_page_components_goods_cost_details_goods_cost_details_component__WEBPACK_IMPORTED_MODULE_122__ = __webpack_require__(/*! ./execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-details/goods-cost-details.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-details/goods-cost-details.component.ts");
/* harmony import */ var _execution_invoicing_goods_cost_components_goods_cost_working_page_components_goods_cost_payments_goods_cost_payments_component__WEBPACK_IMPORTED_MODULE_123__ = __webpack_require__(/*! ./execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-payments/goods-cost-payments.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-payments/goods-cost-payments.component.ts");
/* harmony import */ var _execution_invoicing_goods_cost_components_goods_cost_working_page_components_goods_cost_tax_cost_goods_cost_tax_cost_component__WEBPACK_IMPORTED_MODULE_124__ = __webpack_require__(/*! ./execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-cost/goods-cost-tax-cost.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-cost/goods-cost-tax-cost.component.ts");
/* harmony import */ var _execution_invoicing_goods_cost_components_goods_cost_working_page_components_goods_cost_tax_goods_goods_cost_tax_goods_component__WEBPACK_IMPORTED_MODULE_125__ = __webpack_require__(/*! ./execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-goods/goods-cost-tax-goods.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-tax-goods/goods-cost-tax-goods.component.ts");
/* harmony import */ var _execution_invoicing_goods_cost_components_goods_cost_working_page_components_goods_cost_total_goods_cost_total_component__WEBPACK_IMPORTED_MODULE_126__ = __webpack_require__(/*! ./execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-total/goods-cost-total.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-total/goods-cost-total.component.ts");
/* harmony import */ var _execution_invoicing_goods_cost_components_goods_cost_working_page_components_goods_cost_value_of_goods_goods_cost_value_of_goods_component__WEBPACK_IMPORTED_MODULE_127__ = __webpack_require__(/*! ./execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-value-of-goods/goods-cost-value-of-goods.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/components/goods-cost-value-of-goods/goods-cost-value-of-goods.component.ts");
/* harmony import */ var _execution_invoicing_goods_cost_components_goods_cost_working_page_goods_cost_working_page_component__WEBPACK_IMPORTED_MODULE_128__ = __webpack_require__(/*! ./execution-invoicing/goods-cost/components/goods-cost-working-page/goods-cost-working-page.component */ "./Client/app/execution/execution-invoicing/goods-cost/components/goods-cost-working-page/goods-cost-working-page.component.ts");
/* harmony import */ var _execution_invoicing_goods_cost_goods_cost_component__WEBPACK_IMPORTED_MODULE_129__ = __webpack_require__(/*! ./execution-invoicing/goods-cost/goods-cost.component */ "./Client/app/execution/execution-invoicing/goods-cost/goods-cost.component.ts");
/* harmony import */ var _execution_invoicing_header_header_component__WEBPACK_IMPORTED_MODULE_130__ = __webpack_require__(/*! ./execution-invoicing/header/header.component */ "./Client/app/execution/execution-invoicing/header/header.component.ts");
/* harmony import */ var _execution_invoicing_invoicing_base_form_document_template_base_document_template_base_component__WEBPACK_IMPORTED_MODULE_131__ = __webpack_require__(/*! ./execution-invoicing/invoicing-base-form/document-template-base/document-template-base.component */ "./Client/app/execution/execution-invoicing/invoicing-base-form/document-template-base/document-template-base.component.ts");
/* harmony import */ var _execution_invoicing_invoicing_base_form_invoicing_base_form_component__WEBPACK_IMPORTED_MODULE_132__ = __webpack_require__(/*! ./execution-invoicing/invoicing-base-form/invoicing-base-form.component */ "./Client/app/execution/execution-invoicing/invoicing-base-form/invoicing-base-form.component.ts");
/* harmony import */ var _execution_invoicing_invoicing_summary_invoicing_summary_component__WEBPACK_IMPORTED_MODULE_133__ = __webpack_require__(/*! ./execution-invoicing/invoicing-summary/invoicing-summary.component */ "./Client/app/execution/execution-invoicing/invoicing-summary/invoicing-summary.component.ts");
/* harmony import */ var _execution_invoicing_reversal_components_reversal_selection_components_document_search_document_search_component__WEBPACK_IMPORTED_MODULE_134__ = __webpack_require__(/*! ./execution-invoicing/reversal/components/reversal-selection/components/document-search/document-search.component */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/document-search/document-search.component.ts");
/* harmony import */ var _execution_invoicing_reversal_components_reversal_selection_components_document_type_document_type_component__WEBPACK_IMPORTED_MODULE_135__ = __webpack_require__(/*! ./execution-invoicing/reversal/components/reversal-selection/components/document-type/document-type.component */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/document-type/document-type.component.ts");
/* harmony import */ var _execution_invoicing_reversal_components_reversal_selection_components_reversal_document_template_reversal_document_template_component__WEBPACK_IMPORTED_MODULE_136__ = __webpack_require__(/*! ./execution-invoicing/reversal/components/reversal-selection/components/reversal-document-template/reversal-document-template.component */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/reversal-document-template/reversal-document-template.component.ts");
/* harmony import */ var _execution_invoicing_reversal_components_reversal_selection_components_reversal_invoice_selection_reversal_invoice_selection_component__WEBPACK_IMPORTED_MODULE_137__ = __webpack_require__(/*! ./execution-invoicing/reversal/components/reversal-selection/components/reversal-invoice-selection/reversal-invoice-selection.component */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/components/reversal-invoice-selection/reversal-invoice-selection.component.ts");
/* harmony import */ var _execution_invoicing_reversal_components_reversal_selection_reversal_selection_component__WEBPACK_IMPORTED_MODULE_138__ = __webpack_require__(/*! ./execution-invoicing/reversal/components/reversal-selection/reversal-selection.component */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-selection/reversal-selection.component.ts");
/* harmony import */ var _execution_invoicing_reversal_components_reversal_summary_reversal_summary_component__WEBPACK_IMPORTED_MODULE_139__ = __webpack_require__(/*! ./execution-invoicing/reversal/components/reversal-summary/reversal-summary.component */ "./Client/app/execution/execution-invoicing/reversal/components/reversal-summary/reversal-summary.component.ts");
/* harmony import */ var _execution_invoicing_reversal_reversal_component__WEBPACK_IMPORTED_MODULE_140__ = __webpack_require__(/*! ./execution-invoicing/reversal/reversal.component */ "./Client/app/execution/execution-invoicing/reversal/reversal.component.ts");
/* harmony import */ var _execution_invoicing_total_amount_total_amount_component__WEBPACK_IMPORTED_MODULE_141__ = __webpack_require__(/*! ./execution-invoicing/total-amount/total-amount.component */ "./Client/app/execution/execution-invoicing/total-amount/total-amount.component.ts");
/* harmony import */ var _execution_invoicing_washout_components_washout_selection_components_decimals_decimals_component__WEBPACK_IMPORTED_MODULE_142__ = __webpack_require__(/*! ./execution-invoicing/washout/components/washout-selection/components/decimals/decimals.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/decimals/decimals.component.ts");
/* harmony import */ var _execution_invoicing_washout_components_washout_selection_components_invoice_type_selection_invoice_type_selection_component__WEBPACK_IMPORTED_MODULE_143__ = __webpack_require__(/*! ./execution-invoicing/washout/components/washout-selection/components/invoice-type-selection/invoice-type-selection.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/invoice-type-selection/invoice-type-selection.component.ts");
/* harmony import */ var _execution_invoicing_washout_components_washout_selection_components_washout_search_washout_search_component__WEBPACK_IMPORTED_MODULE_144__ = __webpack_require__(/*! ./execution-invoicing/washout/components/washout-selection/components/washout-search/washout-search.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/components/washout-search/washout-search.component.ts");
/* harmony import */ var _execution_invoicing_washout_components_washout_selection_washout_selection_component__WEBPACK_IMPORTED_MODULE_145__ = __webpack_require__(/*! ./execution-invoicing/washout/components/washout-selection/washout-selection.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-selection/washout-selection.component.ts");
/* harmony import */ var _execution_invoicing_washout_components_washout_summary_washout_summary_component__WEBPACK_IMPORTED_MODULE_146__ = __webpack_require__(/*! ./execution-invoicing/washout/components/washout-summary/washout-summary.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-summary/washout-summary.component.ts");
/* harmony import */ var _execution_invoicing_washout_components_washout_working_page_components_additional_cost_additional_cost_component__WEBPACK_IMPORTED_MODULE_147__ = __webpack_require__(/*! ./execution-invoicing/washout/components/washout-working-page/components/additional-cost/additional-cost.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/additional-cost/additional-cost.component.ts");
/* harmony import */ var _execution_invoicing_washout_components_washout_working_page_components_invoice_document_invoice_document_component__WEBPACK_IMPORTED_MODULE_148__ = __webpack_require__(/*! ./execution-invoicing/washout/components/washout-working-page/components/invoice-document/invoice-document.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/invoice-document/invoice-document.component.ts");
/* harmony import */ var _execution_invoicing_washout_components_washout_working_page_components_payments_payments_component__WEBPACK_IMPORTED_MODULE_149__ = __webpack_require__(/*! ./execution-invoicing/washout/components/washout-working-page/components/payments/payments.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/payments/payments.component.ts");
/* harmony import */ var _execution_invoicing_washout_components_washout_working_page_components_selection_selection_component__WEBPACK_IMPORTED_MODULE_150__ = __webpack_require__(/*! ./execution-invoicing/washout/components/washout-working-page/components/selection/selection.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/selection/selection.component.ts");
/* harmony import */ var _execution_invoicing_washout_components_washout_working_page_components_tax_costs_tax_costs_component__WEBPACK_IMPORTED_MODULE_151__ = __webpack_require__(/*! ./execution-invoicing/washout/components/washout-working-page/components/tax-costs/tax-costs.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/tax-costs/tax-costs.component.ts");
/* harmony import */ var _execution_invoicing_washout_components_washout_working_page_components_tax_goods_tax_goods_component__WEBPACK_IMPORTED_MODULE_152__ = __webpack_require__(/*! ./execution-invoicing/washout/components/washout-working-page/components/tax-goods/tax-goods.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/tax-goods/tax-goods.component.ts");
/* harmony import */ var _execution_invoicing_washout_components_washout_working_page_components_value_of_goods_value_of_goods_component__WEBPACK_IMPORTED_MODULE_153__ = __webpack_require__(/*! ./execution-invoicing/washout/components/washout-working-page/components/value-of-goods/value-of-goods.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/value-of-goods/value-of-goods.component.ts");
/* harmony import */ var _execution_invoicing_washout_components_washout_working_page_components_washout_total_washout_total_component__WEBPACK_IMPORTED_MODULE_154__ = __webpack_require__(/*! ./execution-invoicing/washout/components/washout-working-page/components/washout-total/washout-total.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/components/washout-total/washout-total.component.ts");
/* harmony import */ var _execution_invoicing_washout_components_washout_working_page_washout_working_page_component__WEBPACK_IMPORTED_MODULE_155__ = __webpack_require__(/*! ./execution-invoicing/washout/components/washout-working-page/washout-working-page.component */ "./Client/app/execution/execution-invoicing/washout/components/washout-working-page/washout-working-page.component.ts");
/* harmony import */ var _execution_invoicing_washout_washout_component__WEBPACK_IMPORTED_MODULE_156__ = __webpack_require__(/*! ./execution-invoicing/washout/washout.component */ "./Client/app/execution/execution-invoicing/washout/washout.component.ts");
/* harmony import */ var _execution_route__WEBPACK_IMPORTED_MODULE_157__ = __webpack_require__(/*! ./execution.route */ "./Client/app/execution/execution.route.ts");
/* harmony import */ var _execution_cash_execution_cash_receipt_list_page_execution_cash_receipt_list_page_component__WEBPACK_IMPORTED_MODULE_158__ = __webpack_require__(/*! ./execution-cash/execution-cash-receipt-list-page/execution-cash-receipt-list-page.component */ "./Client/app/execution/execution-cash/execution-cash-receipt-list-page/execution-cash-receipt-list-page.component.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};































































































































































var ExecutionModule = /** @class */ (function () {
    function ExecutionModule() {
    }
    ExecutionModule = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
            imports: [
                _angular_common__WEBPACK_IMPORTED_MODULE_0__["CommonModule"],
                _shared_material_module__WEBPACK_IMPORTED_MODULE_9__["MaterialModule"],
                _execution_route__WEBPACK_IMPORTED_MODULE_157__["ExecutionRoutingModule"],
                _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormsModule"],
                _angular_forms__WEBPACK_IMPORTED_MODULE_2__["ReactiveFormsModule"],
                _shared_shared_module__WEBPACK_IMPORTED_MODULE_11__["SharedModule"],
                ag_grid_angular__WEBPACK_IMPORTED_MODULE_4__["AgGridModule"],
                angular2_text_mask__WEBPACK_IMPORTED_MODULE_5__["TextMaskModule"],
            ],
            entryComponents: [
                _shared_components_confirmation_dialog_confirmation_dialog_component__WEBPACK_IMPORTED_MODULE_8__["ConfirmationDialogComponent"],
                _shared_components_ag_grid_checkbox_ag_grid_checkbox_component__WEBPACK_IMPORTED_MODULE_7__["AgGridCheckboxComponent"],
                _execution_charter_execution_charter_creation_page_components_assign_section_dialog_assign_section_dialog_component__WEBPACK_IMPORTED_MODULE_52__["AssignSectionDialogComponent"],
                _execution_charter_execution_charter_creation_page_components_deassign_section_dialog_deassign_section_dialog_component__WEBPACK_IMPORTED_MODULE_57__["DeassignSectionDialogComponent"],
                _execution_invoicing_dialog_boxes_bank_account_dialog_bank_account_dialog_component__WEBPACK_IMPORTED_MODULE_112__["BankAccountDialogComponent"],
                _execution_charter_execution_charter_allocation_deallocation_contract_deallocation_dialog_component_contract_deallocation_dialog_component_component__WEBPACK_IMPORTED_MODULE_47__["ContractDeallocationDialogComponent"],
                _execution_charter_execution_charter_creation_page_components_charter_pnl_report_charter_pnl_report_component__WEBPACK_IMPORTED_MODULE_55__["CharterPnlReportComponent"],
                _execution_charter_execution_charter_creation_page_components_charter_report_charter_report_component__WEBPACK_IMPORTED_MODULE_56__["CharterReportComponent"],
                _document_dialog_boxes_document_upload_dialog_box_document_upload_dialog_box_component__WEBPACK_IMPORTED_MODULE_14__["DocumentUploadDialogBoxComponent"],
                _execution_cash_execution_cash_create_cash_dialog_component_cash_warning_dialog_component_cash_warning_dialog_component_component__WEBPACK_IMPORTED_MODULE_26__["CashWarningDialogComponentComponent"],
                _execution_charter_execution_charter_creation_page_components_reassign_section_dialog_reassign_section_dialog_component__WEBPACK_IMPORTED_MODULE_61__["ReassignSectionDialogComponent"],
                _execution_invoicing_dialog_boxes_apportion_dialog_apportion_dialog_component__WEBPACK_IMPORTED_MODULE_111__["ApportionDialogComponent"],
                _execution_charter_ag_grid_charterstatus_for_charter_bulk_closure_ag_grid_charterstatus_for_charter_bulk_closure_component__WEBPACK_IMPORTED_MODULE_42__["AgGridCharterStatusForCharterBulkClosureComponent"],
                _execution_charter_ag_grid_hyperlink_for_charter_bulk_closure_ag_grid_hyperlink_for_charter_bulk_closure_component__WEBPACK_IMPORTED_MODULE_43__["AgGridHyperlinkForCharterBulkClosureComponent"],
            ],
            declarations: [
                _execution_allocation_execution_allocation_component__WEBPACK_IMPORTED_MODULE_17__["ExecutionAllocationComponent"],
                _execution_invoicing_execution_invoicing_component__WEBPACK_IMPORTED_MODULE_113__["ExecutionInvoicingComponent"],
                _execution_charter_execution_charter_creation_page_execution_charter_creation_page_component__WEBPACK_IMPORTED_MODULE_65__["ExecutionCharterCreationPageComponent"],
                _execution_charter_execution_charter_list_page_execution_charter_list_page_component__WEBPACK_IMPORTED_MODULE_68__["ExecutionCharterListPageComponent"],
                _execution_charter_execution_charter_details_execution_charter_details_component__WEBPACK_IMPORTED_MODULE_66__["ExecutionCharterDetailsComponent"],
                _execution_charter_execution_charter_assignment_execution_charter_assignment_component__WEBPACK_IMPORTED_MODULE_50__["ExecutionCharterAssignmentComponent"],
                _home_execution_dashboard_missing_invoices_details_missing_invoices_details_component__WEBPACK_IMPORTED_MODULE_6__["MissingInvoicesDetailsComponent"],
                _execution_invoicing_home_execution_invoicing_home_component__WEBPACK_IMPORTED_MODULE_83__["ExecutionInvoicingHomeComponent"],
                _execution_charter_execution_charter_creation_page_components_main_information_form_component_main_information_form_component_component__WEBPACK_IMPORTED_MODULE_58__["MainInformationFormComponent"],
                _execution_charter_execution_charter_creation_page_components_shipment_form_component_shipment_form_component_component__WEBPACK_IMPORTED_MODULE_62__["ShipmentFormComponent"],
                _execution_charter_execution_charter_creation_page_components_additional_information_form_component_additional_information_form_component_component__WEBPACK_IMPORTED_MODULE_51__["AdditionalInformationFormComponent"],
                _execution_charter_execution_charter_creation_page_components_memo_form_component_memo_form_component_component__WEBPACK_IMPORTED_MODULE_59__["MemoFormComponent"],
                _execution_charter_execution_charter_creation_page_components_total_card_component_total_card_component_component__WEBPACK_IMPORTED_MODULE_63__["TotalCardComponent"],
                _execution_charter_execution_charter_edit_page_execution_charter_edit_page_component__WEBPACK_IMPORTED_MODULE_67__["ExecutionCharterEditPageComponent"],
                _document_contract_advice_generation_contract_advice_generation_component__WEBPACK_IMPORTED_MODULE_12__["ContractAdviceGenerationComponent"],
                _document_contract_advice_generation_form_components_selection_form_selection_form_component__WEBPACK_IMPORTED_MODULE_13__["ContractAdviceGenerationSelectionFormComponent"],
                _execution_invoicing_commercial_components_commercial_selection_components_invoice_selection_form_component_invoice_selection_form_component_component__WEBPACK_IMPORTED_MODULE_87__["InvoiceSelectionFormComponent"],
                _execution_invoicing_commercial_components_commercial_selection_components_contract_selection_form_component_contract_selection_form_component_component__WEBPACK_IMPORTED_MODULE_86__["ContractSelectionFormComponent"],
                _execution_invoicing_commercial_components_working_page_commercial_working_page_component__WEBPACK_IMPORTED_MODULE_90__["CommercialWorkingPageComponent"],
                _document_list_document_list_component__WEBPACK_IMPORTED_MODULE_16__["DocumentListComponent"],
                _document_list_card_document_list_card_component__WEBPACK_IMPORTED_MODULE_15__["DocumentListCardComponent"],
                _execution_charter_execution_charter_creation_page_components_assign_section_dialog_assign_section_dialog_component__WEBPACK_IMPORTED_MODULE_52__["AssignSectionDialogComponent"],
                _execution_charter_execution_charter_creation_page_components_assigned_contract_list_form_component_assigned_contract_list_form_component_component__WEBPACK_IMPORTED_MODULE_53__["AssignedContractListFormComponent"],
                _execution_invoicing_commercial_components_working_page_components_taxes_component_taxes_component_component__WEBPACK_IMPORTED_MODULE_96__["TaxesComponent"],
                _execution_invoicing_total_amount_total_amount_component__WEBPACK_IMPORTED_MODULE_141__["TotalAmountComponent"],
                _execution_invoicing_commercial_components_working_page_components_payments_component_payments_component_component__WEBPACK_IMPORTED_MODULE_94__["CommercialPaymentsComponent"],
                _execution_charter_execution_charter_creation_page_components_warning_component_warning_component_component__WEBPACK_IMPORTED_MODULE_64__["WarningComponent"],
                _execution_invoicing_commercial_components_commercial_selection_components_pricing_options_pricing_options_component__WEBPACK_IMPORTED_MODULE_88__["PricingOptionsComponent"],
                _execution_invoicing_commercial_components_commercial_selection_components_contract_selection_form_component_contract_selection_form_component_component__WEBPACK_IMPORTED_MODULE_86__["ContractSelectionFormComponent"],
                _execution_invoicing_commercial_components_summary_commercial_summary_component__WEBPACK_IMPORTED_MODULE_89__["CommercialSummaryComponent"],
                _execution_invoicing_commercial_components_working_page_components_selection_form_component_selection_form_component_component__WEBPACK_IMPORTED_MODULE_95__["SelectionFormComponentComponent"],
                _execution_invoicing_commercial_components_working_page_components_value_of_goods_component_value_of_goods_component_component__WEBPACK_IMPORTED_MODULE_97__["CommercialValueOfGoodsComponent"],
                _execution_charter_execution_charter_creation_page_components_deassign_section_dialog_deassign_section_dialog_component__WEBPACK_IMPORTED_MODULE_57__["DeassignSectionDialogComponent"],
                _execution_invoicing_create_execution_invoicing_create_component__WEBPACK_IMPORTED_MODULE_82__["ExecutionInvoicingCreateComponent"],
                _execution_invoicing_create_components_purchase_goods_form_component_purchase_goods_form_component_component__WEBPACK_IMPORTED_MODULE_77__["PurchaseGoodsFormComponentComponent"],
                _execution_invoicing_create_components_sales_goods_form_component_sales_goods_form_component_component__WEBPACK_IMPORTED_MODULE_80__["SalesGoodsFormComponentComponent"],
                _execution_invoicing_create_components_quantity_invoice_form_component_quantity_invoice_form_component_component__WEBPACK_IMPORTED_MODULE_78__["QuantityInvoiceFormComponentComponent"],
                _execution_invoicing_create_components_cost_form_component_cost_form_component_component__WEBPACK_IMPORTED_MODULE_76__["CostFormComponentComponent"],
                _execution_invoicing_cost_components_cost_selection_cost_selection_component__WEBPACK_IMPORTED_MODULE_102__["CostSelectionComponent"],
                _execution_invoicing_cost_components_cost_selection_components_invoice_selection_invoice_selection_component__WEBPACK_IMPORTED_MODULE_101__["InvoiceSelectionComponent"],
                _execution_cash_execution_cash_component__WEBPACK_IMPORTED_MODULE_41__["ExecutionCashComponent"],
                _execution_cash_execution_cash_create_execution_cash_create_component__WEBPACK_IMPORTED_MODULE_37__["ExecutionCashCreateComponent"],
                _execution_cash_execution_cash_create_cash_selection_cash_selection_component__WEBPACK_IMPORTED_MODULE_27__["CashSelectionFormComponent"],
                _execution_cash_execution_cash_create_cash_details_cash_details_component__WEBPACK_IMPORTED_MODULE_21__["CashDetailsFormComponent"],
                _execution_cash_execution_cash_create_cash_details_counterparty_card_counterparty_card_component__WEBPACK_IMPORTED_MODULE_22__["CounterpartyFormComponent"],
                _execution_cash_execution_cash_create_cash_details_additional_details_additional_details_component__WEBPACK_IMPORTED_MODULE_19__["AdditionalDetailsFormComponent"],
                _execution_cash_execution_cash_create_cash_details_document_information_document_information_component__WEBPACK_IMPORTED_MODULE_24__["DocumentInformationFormComponent"],
                _execution_cash_execution_cash_payment_list_page_execution_cash_payment_list_page_component__WEBPACK_IMPORTED_MODULE_40__["ExecutionCashPaymentListPageComponent"],
                _execution_invoicing_cost_components_cost_selection_components_contract_search_contract_search_component__WEBPACK_IMPORTED_MODULE_99__["ContractSearchComponent"],
                _execution_invoicing_cost_components_cost_selection_components_cost_invoicee_options_cost_invoicee_options_component__WEBPACK_IMPORTED_MODULE_100__["CostInvoiceeOptionsComponent"],
                _execution_cash_execution_cash_create_cash_summary_cash_summary_component__WEBPACK_IMPORTED_MODULE_35__["CashSummaryFormComponent"],
                _execution_invoicing_header_header_component__WEBPACK_IMPORTED_MODULE_130__["HeaderComponent"],
                _execution_invoicing_cost_components_cost_working_page_cost_working_page_component__WEBPACK_IMPORTED_MODULE_108__["CostWorkingPageComponent"],
                _execution_invoicing_cost_components_cost_working_page_components_selection_cost_invoice_selection_component__WEBPACK_IMPORTED_MODULE_106__["CostInvoiceSelectionComponent"],
                _execution_invoicing_cost_components_cost_working_page_components_document_template_cost_document_template_component__WEBPACK_IMPORTED_MODULE_103__["CostDocumentTemplateComponent"],
                _execution_invoicing_cost_components_cost_working_page_components_taxes_invoicing_cost_taxes_component__WEBPACK_IMPORTED_MODULE_107__["InvoicingCostTaxesComponent"],
                _execution_invoicing_cost_components_cost_working_page_components_payments_cost_payments_component__WEBPACK_IMPORTED_MODULE_104__["CostPaymentsComponent"],
                _execution_invoicing_cost_components_cost_working_page_components_selected_cost_invoice_cost_selected_cost_component__WEBPACK_IMPORTED_MODULE_105__["InvoiceCostSelectedCostComponent"],
                _execution_cash_execution_cash_create_pick_transaction_pick_transaction_component__WEBPACK_IMPORTED_MODULE_39__["PickTransactionComponent"],
                _execution_cash_execution_cash_create_pick_transaction_invoice_matching_invoice_matching_component__WEBPACK_IMPORTED_MODULE_38__["InvoiceMatchingComponent"],
                _execution_cash_execution_cash_create_cash_selection_simple_cash_payment_simple_cash_payment_component__WEBPACK_IMPORTED_MODULE_33__["SimpleCashPaymentComponent"],
                _execution_cash_execution_cash_create_cash_selection_simple_cash_receipt_simple_cash_receipt_component__WEBPACK_IMPORTED_MODULE_34__["SimpleCashReceiptComponent"],
                _execution_cash_execution_cash_create_cash_selection_payment_full_transaction_payment_full_transaction_component__WEBPACK_IMPORTED_MODULE_30__["PaymentFullTransactionComponent"],
                _execution_cash_execution_cash_create_cash_selection_payment_different_client_payment_different_client_component__WEBPACK_IMPORTED_MODULE_28__["PaymentDifferentClientComponent"],
                _execution_cash_execution_cash_create_cash_selection_payment_different_currency_payment_different_currency_component__WEBPACK_IMPORTED_MODULE_29__["PaymentDifferentCurrencyComponent"],
                _execution_cash_execution_cash_create_cash_selection_receipt_full_transaction_receipt_full_transaction_component__WEBPACK_IMPORTED_MODULE_32__["ReceiptFullTransactionComponent"],
                _execution_cash_execution_cash_create_cash_selection_receipt_different_currency_receipt_different_currency_component__WEBPACK_IMPORTED_MODULE_31__["ReceiptDifferentCurrencyComponent"],
                _execution_invoicing_cost_components_summary_cost_summary_component__WEBPACK_IMPORTED_MODULE_109__["CostSummaryComponent"],
                _execution_invoicing_dialog_boxes_bank_account_dialog_bank_account_dialog_component__WEBPACK_IMPORTED_MODULE_112__["BankAccountDialogComponent"],
                _execution_invoicing_create_components_washout_form_component_washout_form_component_component__WEBPACK_IMPORTED_MODULE_81__["WashoutFormComponent"],
                _execution_cash_execution_cash_create_cash_details_additional_costs_additional_costs_component__WEBPACK_IMPORTED_MODULE_18__["AdditionalCostsFormComponent"],
                _execution_charter_execution_charter_creation_page_components_charter_menu_bar_component_charter_menu_bar_component_component__WEBPACK_IMPORTED_MODULE_54__["CharterMenuBarComponent"],
                _execution_cash_execution_cash_create_cash_summary_invoice_grid_for_summary_invoice_grid_for_summary_component__WEBPACK_IMPORTED_MODULE_36__["InvoiceGridForSummaryComponent"],
                _execution_invoicing_create_components_reversal_form_component_reversal_form_component_component__WEBPACK_IMPORTED_MODULE_79__["ReversalFormComponent"],
                _execution_invoicing_goods_cost_goods_cost_component__WEBPACK_IMPORTED_MODULE_129__["GoodsCostComponent"],
                _execution_invoicing_goods_cost_components_goods_cost_selection_goods_cost_selection_component__WEBPACK_IMPORTED_MODULE_119__["GoodsCostSelectionComponent"],
                _execution_invoicing_goods_cost_components_goods_cost_selection_components_goods_cost_invoice_selection_goods_cost_invoice_selection_component__WEBPACK_IMPORTED_MODULE_117__["GoodsCostInvoiceSelectionComponent"],
                _execution_invoicing_goods_cost_components_goods_cost_selection_components_goods_cost_contract_search_goods_cost_contract_search_component__WEBPACK_IMPORTED_MODULE_116__["GoodsCostContractSearchComponent"],
                _execution_invoicing_goods_cost_components_goods_cost_selection_components_goods_cost_pricing_options_goods_cost_pricing_options_component__WEBPACK_IMPORTED_MODULE_118__["GoodsCostPricingOptionsComponent"],
                _execution_invoicing_goods_cost_components_goods_cost_working_page_goods_cost_working_page_component__WEBPACK_IMPORTED_MODULE_128__["GoodsCostWorkingPageComponent"],
                _execution_invoicing_washout_washout_component__WEBPACK_IMPORTED_MODULE_156__["WashoutComponent"],
                _execution_invoicing_commercial_commercial_component__WEBPACK_IMPORTED_MODULE_84__["CommercialComponent"],
                _execution_invoicing_cost_cost_component__WEBPACK_IMPORTED_MODULE_110__["CostComponent"],
                _execution_invoicing_washout_components_washout_selection_components_decimals_decimals_component__WEBPACK_IMPORTED_MODULE_142__["DecimalsComponent"],
                _execution_invoicing_washout_components_washout_selection_components_washout_search_washout_search_component__WEBPACK_IMPORTED_MODULE_144__["WashoutSearchComponent"],
                _execution_invoicing_washout_components_washout_selection_washout_selection_component__WEBPACK_IMPORTED_MODULE_145__["WashoutSelectionComponent"],
                _execution_invoicing_washout_components_washout_working_page_washout_working_page_component__WEBPACK_IMPORTED_MODULE_155__["WashoutWorkingPageComponent"],
                _execution_invoicing_washout_components_washout_selection_components_invoice_type_selection_invoice_type_selection_component__WEBPACK_IMPORTED_MODULE_143__["InvoiceTypeSelectionComponent"],
                _execution_invoicing_washout_components_washout_working_page_components_additional_cost_additional_cost_component__WEBPACK_IMPORTED_MODULE_147__["AdditionalCostComponent"],
                _execution_invoicing_washout_components_washout_working_page_components_invoice_document_invoice_document_component__WEBPACK_IMPORTED_MODULE_148__["InvoiceDocumentComponent"],
                _execution_invoicing_washout_components_washout_working_page_components_payments_payments_component__WEBPACK_IMPORTED_MODULE_149__["WashoutPaymentsComponent"],
                _execution_invoicing_washout_components_washout_working_page_components_selection_selection_component__WEBPACK_IMPORTED_MODULE_150__["SelectionComponent"],
                _execution_invoicing_washout_components_washout_working_page_components_value_of_goods_value_of_goods_component__WEBPACK_IMPORTED_MODULE_153__["WashoutValueOfGoodsComponent"],
                _execution_invoicing_commercial_components_commercial_selection_commercial_selection_component__WEBPACK_IMPORTED_MODULE_85__["CommercialSelectionComponent"],
                _execution_invoicing_goods_cost_components_goods_cost_working_page_components_goods_cost_details_goods_cost_details_component__WEBPACK_IMPORTED_MODULE_122__["GoodsCostDetailsComponent"],
                _execution_invoicing_goods_cost_components_goods_cost_working_page_components_goods_cost_value_of_goods_goods_cost_value_of_goods_component__WEBPACK_IMPORTED_MODULE_127__["GoodsCostValueOfGoodsComponent"],
                _execution_invoicing_goods_cost_components_goods_cost_working_page_components_goods_cost_additional_cost_goods_cost_additional_cost_component__WEBPACK_IMPORTED_MODULE_121__["GoodsCostAdditionalCostComponent"],
                _execution_invoicing_goods_cost_components_goods_cost_working_page_components_goods_cost_tax_goods_goods_cost_tax_goods_component__WEBPACK_IMPORTED_MODULE_125__["GoodsCostTaxGoodsComponent"],
                _execution_invoicing_goods_cost_components_goods_cost_working_page_components_goods_cost_tax_cost_goods_cost_tax_cost_component__WEBPACK_IMPORTED_MODULE_124__["GoodsCostTaxCostComponent"],
                _execution_invoicing_goods_cost_components_goods_cost_working_page_components_goods_cost_payments_goods_cost_payments_component__WEBPACK_IMPORTED_MODULE_123__["GoodsCostPaymentsComponent"],
                _execution_invoicing_goods_cost_components_goods_cost_working_page_components_goods_cost_total_goods_cost_total_component__WEBPACK_IMPORTED_MODULE_126__["GoodsCostTotalComponent"],
                _execution_invoicing_goods_cost_components_goods_cost_selection_cost_goods_cost_selection_cost_component__WEBPACK_IMPORTED_MODULE_115__["GoodsCostSelectionCostComponent"],
                _execution_invoicing_goods_cost_components_goods_cost_selection_cost_components_goods_cost_contracts_cost_goods_cost_contracts_cost_component__WEBPACK_IMPORTED_MODULE_114__["GoodsCostContractsCostComponent"],
                _execution_invoicing_washout_components_washout_working_page_components_tax_goods_tax_goods_component__WEBPACK_IMPORTED_MODULE_152__["TaxGoodsComponent"],
                _execution_invoicing_washout_components_washout_working_page_components_tax_costs_tax_costs_component__WEBPACK_IMPORTED_MODULE_151__["TaxCostsComponent"],
                _execution_invoicing_reversal_reversal_component__WEBPACK_IMPORTED_MODULE_140__["ReversalComponent"],
                _execution_invoicing_reversal_components_reversal_selection_reversal_selection_component__WEBPACK_IMPORTED_MODULE_138__["ReversalSelectionComponent"],
                _execution_invoicing_reversal_components_reversal_selection_components_reversal_invoice_selection_reversal_invoice_selection_component__WEBPACK_IMPORTED_MODULE_137__["ReversalInvoiceSelectionComponent"],
                _execution_invoicing_reversal_components_reversal_selection_components_document_type_document_type_component__WEBPACK_IMPORTED_MODULE_135__["DocumentTypeComponent"],
                _execution_invoicing_reversal_components_reversal_selection_components_document_search_document_search_component__WEBPACK_IMPORTED_MODULE_134__["DocumentSearchComponent"],
                _execution_invoicing_washout_components_washout_summary_washout_summary_component__WEBPACK_IMPORTED_MODULE_146__["WashoutSummaryComponent"],
                _execution_cash_execution_cash_create_cash_details_currency_information_card_currency_information_card_component__WEBPACK_IMPORTED_MODULE_23__["CurrencyInformationCardComponent"],
                _execution_invoicing_goods_cost_components_goods_cost_summary_goods_cost_summary_component__WEBPACK_IMPORTED_MODULE_120__["GoodsCostSummaryComponent"],
                _execution_invoicing_reversal_components_reversal_summary_reversal_summary_component__WEBPACK_IMPORTED_MODULE_139__["ReversalSummaryComponent"],
                _execution_invoicing_invoicing_summary_invoicing_summary_component__WEBPACK_IMPORTED_MODULE_133__["InvoicingSummaryComponent"],
                _execution_invoicing_washout_components_washout_working_page_components_washout_total_washout_total_component__WEBPACK_IMPORTED_MODULE_154__["WashoutTotalComponent"],
                _execution_cash_execution_cash_create_cash_details_template_selection_card_payment_order_template_selection_card_component__WEBPACK_IMPORTED_MODULE_25__["PaymentOrderTemplateSelectionCardComponent"],
                _execution_charter_execution_charter_allocation_deallocation_execution_charter_allocation_deallocation_component__WEBPACK_IMPORTED_MODULE_49__["ExecutionCharterAllocationDeallocationComponent"],
                _execution_charter_execution_charter_allocation_deallocation_allocation_form_components_purchase_allocation_component_purchase_allocation_component_component__WEBPACK_IMPORTED_MODULE_44__["PurchaseAllocationComponentComponent"],
                _execution_charter_execution_charter_allocation_deallocation_allocation_form_components_sale_allocation_component_sale_allocation_component_component__WEBPACK_IMPORTED_MODULE_46__["SaleAllocationComponentComponent"],
                _execution_charter_execution_charter_allocation_deallocation_allocation_form_components_quantity_allocation_component_quantity_allocation_component_component__WEBPACK_IMPORTED_MODULE_45__["QuantityAllocationComponentComponent"],
                _execution_charter_execution_charter_allocation_deallocation_deallocation_form_component_deallocation_component_deallocation_component_component__WEBPACK_IMPORTED_MODULE_48__["DeallocationComponentComponent"],
                _execution_charter_execution_charter_allocation_deallocation_contract_deallocation_dialog_component_contract_deallocation_dialog_component_component__WEBPACK_IMPORTED_MODULE_47__["ContractDeallocationDialogComponent"],
                _execution_invoicing_invoicing_base_form_invoicing_base_form_component__WEBPACK_IMPORTED_MODULE_132__["InvoicingBaseFormComponent"],
                _execution_charter_execution_charter_creation_page_components_charter_pnl_report_charter_pnl_report_component__WEBPACK_IMPORTED_MODULE_55__["CharterPnlReportComponent"],
                _execution_charter_execution_charter_creation_page_components_charter_report_charter_report_component__WEBPACK_IMPORTED_MODULE_56__["CharterReportComponent"],
                _document_dialog_boxes_document_upload_dialog_box_document_upload_dialog_box_component__WEBPACK_IMPORTED_MODULE_14__["DocumentUploadDialogBoxComponent"],
                _execution_invoicing_invoicing_base_form_document_template_base_document_template_base_component__WEBPACK_IMPORTED_MODULE_131__["DocumentTemplateBaseComponent"],
                _execution_cash_execution_cash_create_cash_details_bank_information_bank_information_component__WEBPACK_IMPORTED_MODULE_20__["BankInformationComponent"],
                _execution_cash_execution_cash_create_cash_dialog_component_cash_warning_dialog_component_cash_warning_dialog_component_component__WEBPACK_IMPORTED_MODULE_26__["CashWarningDialogComponentComponent"],
                _execution_invoicing_components_document_template_document_template_component__WEBPACK_IMPORTED_MODULE_98__["DocumentTemplateComponent"],
                _execution_invoicing_reversal_components_reversal_selection_components_reversal_document_template_reversal_document_template_component__WEBPACK_IMPORTED_MODULE_136__["ReversalDocumentTemplateComponent"],
                _execution_charter_execution_charter_creation_page_components_reassign_contract_ag_grid_reassign_contract_ag_grid_component__WEBPACK_IMPORTED_MODULE_60__["ReassignContractAgGridComponent"],
                _execution_charter_execution_charter_creation_page_components_reassign_section_dialog_reassign_section_dialog_component__WEBPACK_IMPORTED_MODULE_61__["ReassignSectionDialogComponent"],
                _execution_invoicing_dialog_boxes_apportion_dialog_apportion_dialog_component__WEBPACK_IMPORTED_MODULE_111__["ApportionDialogComponent"],
                _execution_charter_group_amendments_execution_charter_group_amendments_component__WEBPACK_IMPORTED_MODULE_70__["ExecutionCharterGroupAmendmentsComponent"],
                _execution_charter_group_amendments_charter_bulk_closure_charter_bulk_closure_component__WEBPACK_IMPORTED_MODULE_69__["CharterBulkClosureComponent"],
                _execution_charter_group_function_execution_charter_group_function_component__WEBPACK_IMPORTED_MODULE_75__["ExecutionCharterGroupFunctionComponent"],
                _execution_charter_group_function_bulk_closure_function_execution_charter_bulk_closure_function_component__WEBPACK_IMPORTED_MODULE_74__["ExecutionCharterBulkClosureFunctionComponent"],
                _execution_charter_group_function_bulk_closure_function_charter_selection_bulk_closure_charter_selection_bulk_closure_component__WEBPACK_IMPORTED_MODULE_73__["CharterSelectionBulkClosureComponent"],
                _execution_charter_group_function_bulk_closure_function_charter_bulk_closure_matrix_charter_bulk_closure_matrix_component__WEBPACK_IMPORTED_MODULE_71__["CharterBulkClosureMatrixComponent"],
                _execution_charter_group_function_bulk_closure_function_charter_bulk_closure_summary_charter_bulk_closure_summary_component__WEBPACK_IMPORTED_MODULE_72__["CharterBulkClosureSummaryComponent"],
                _execution_charter_ag_grid_charterstatus_for_charter_bulk_closure_ag_grid_charterstatus_for_charter_bulk_closure_component__WEBPACK_IMPORTED_MODULE_42__["AgGridCharterStatusForCharterBulkClosureComponent"],
                _execution_charter_ag_grid_hyperlink_for_charter_bulk_closure_ag_grid_hyperlink_for_charter_bulk_closure_component__WEBPACK_IMPORTED_MODULE_43__["AgGridHyperlinkForCharterBulkClosureComponent"],
                _execution_invoicing_commercial_components_working_page_components_add_cost_add_cost_component__WEBPACK_IMPORTED_MODULE_93__["AddCostComponent"],
                _execution_invoicing_commercial_components_working_page_components_add_cost_tax_add_cost_tax_component__WEBPACK_IMPORTED_MODULE_91__["AddCostTaxComponent"],
                _execution_invoicing_commercial_components_working_page_components_add_cost_total_add_cost_total_component__WEBPACK_IMPORTED_MODULE_92__["AddCostTotalComponent"],
                _execution_cash_execution_cash_receipt_list_page_execution_cash_receipt_list_page_component__WEBPACK_IMPORTED_MODULE_158__["ExecutionCashReceiptListPageComponent"],
            ],
            providers: [_shared_services_customDateAdapter__WEBPACK_IMPORTED_MODULE_10__["CustomDateAdapter"],
                { provide: _angular_material__WEBPACK_IMPORTED_MODULE_3__["MAT_DATE_LOCALE"], useValue: 'en' },
                { provide: _angular_material__WEBPACK_IMPORTED_MODULE_3__["DateAdapter"], useClass: _shared_services_customDateAdapter__WEBPACK_IMPORTED_MODULE_10__["CustomDateAdapter"] },
                { provide: _angular_material__WEBPACK_IMPORTED_MODULE_3__["MAT_DATE_FORMATS"], useValue: _shared_shared_module__WEBPACK_IMPORTED_MODULE_11__["ATLAS_DATE_FORMATS"] },
            ],
            schemas: [_angular_core__WEBPACK_IMPORTED_MODULE_1__["CUSTOM_ELEMENTS_SCHEMA"]],
        })
    ], ExecutionModule);
    return ExecutionModule;
}());



/***/ }),

/***/ "./Client/app/execution/execution.route.ts":
/*!*************************************************!*\
  !*** ./Client/app/execution/execution.route.ts ***!
  \*************************************************/
/*! exports provided: routes, ExecutionRoutingModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "routes", function() { return routes; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExecutionRoutingModule", function() { return ExecutionRoutingModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _home_execution_dashboard_missing_invoices_details_missing_invoices_details_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../home/execution-dashboard/missing-invoices-details/missing-invoices-details.component */ "./Client/app/home/execution-dashboard/missing-invoices-details/missing-invoices-details.component.ts");
/* harmony import */ var _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../shared/entities/masterdata-props.entity */ "./Client/app/shared/entities/masterdata-props.entity.ts");
/* harmony import */ var _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../shared/enums/permission-level.enum */ "./Client/app/shared/enums/permission-level.enum.ts");
/* harmony import */ var _shared_guards_can_deactivate_guard_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../shared/guards/can-deactivate-guard.service */ "./Client/app/shared/guards/can-deactivate-guard.service.ts");
/* harmony import */ var _shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../shared/guards/security.guard */ "./Client/app/shared/guards/security.guard.ts");
/* harmony import */ var _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../shared/resolvers/company-date.resolver */ "./Client/app/shared/resolvers/company-date.resolver.ts");
/* harmony import */ var _shared_resolvers_form_configuration_resolver__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../shared/resolvers/form-configuration.resolver */ "./Client/app/shared/resolvers/form-configuration.resolver.ts");
/* harmony import */ var _shared_resolvers_masterdata_resolver__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../shared/resolvers/masterdata.resolver */ "./Client/app/shared/resolvers/masterdata.resolver.ts");
/* harmony import */ var _document_contract_advice_generation_contract_advice_generation_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./document/contract-advice-generation/contract-advice-generation.component */ "./Client/app/execution/document/contract-advice-generation/contract-advice-generation.component.ts");
/* harmony import */ var _document_list_document_list_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./document/list/document-list.component */ "./Client/app/execution/document/list/document-list.component.ts");
/* harmony import */ var _execution_allocation_execution_allocation_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./execution-allocation/execution-allocation.component */ "./Client/app/execution/execution-allocation/execution-allocation.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_cash_summary_cash_summary_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/cash-summary/cash-summary.component */ "./Client/app/execution/execution-cash/execution-cash-create/cash-summary/cash-summary.component.ts");
/* harmony import */ var _execution_cash_execution_cash_create_execution_cash_create_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./execution-cash/execution-cash-create/execution-cash-create.component */ "./Client/app/execution/execution-cash/execution-cash-create/execution-cash-create.component.ts");
/* harmony import */ var _execution_cash_execution_cash_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./execution-cash/execution-cash.component */ "./Client/app/execution/execution-cash/execution-cash.component.ts");
/* harmony import */ var _execution_charter_execution_charter_allocation_deallocation_execution_charter_allocation_deallocation_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./execution-charter/execution-charter-allocation-deallocation/execution-charter-allocation-deallocation.component */ "./Client/app/execution/execution-charter/execution-charter-allocation-deallocation/execution-charter-allocation-deallocation.component.ts");
/* harmony import */ var _execution_charter_execution_charter_assignment_execution_charter_assignment_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./execution-charter/execution-charter-assignment/execution-charter-assignment.component */ "./Client/app/execution/execution-charter/execution-charter-assignment/execution-charter-assignment.component.ts");
/* harmony import */ var _execution_charter_execution_charter_creation_page_execution_charter_creation_page_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./execution-charter/execution-charter-creation-page/execution-charter-creation-page.component */ "./Client/app/execution/execution-charter/execution-charter-creation-page/execution-charter-creation-page.component.ts");
/* harmony import */ var _execution_charter_execution_charter_details_execution_charter_details_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./execution-charter/execution-charter-details/execution-charter-details.component */ "./Client/app/execution/execution-charter/execution-charter-details/execution-charter-details.component.ts");
/* harmony import */ var _execution_charter_execution_charter_edit_page_execution_charter_edit_page_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./execution-charter/execution-charter-edit-page/execution-charter-edit-page.component */ "./Client/app/execution/execution-charter/execution-charter-edit-page/execution-charter-edit-page.component.ts");
/* harmony import */ var _execution_charter_execution_charter_list_page_execution_charter_list_page_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./execution-charter/execution-charter-list-page/execution-charter-list-page.component */ "./Client/app/execution/execution-charter/execution-charter-list-page/execution-charter-list-page.component.ts");
/* harmony import */ var _execution_charter_group_amendments_execution_charter_group_amendments_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./execution-charter/group-amendments/execution-charter-group-amendments.component */ "./Client/app/execution/execution-charter/group-amendments/execution-charter-group-amendments.component.ts");
/* harmony import */ var _execution_charter_group_function_execution_charter_group_function_component__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./execution-charter/group-function/execution-charter-group-function.component */ "./Client/app/execution/execution-charter/group-function/execution-charter-group-function.component.ts");
/* harmony import */ var _execution_invoicing_create_execution_invoicing_create_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./execution-invoicing-create/execution-invoicing-create.component */ "./Client/app/execution/execution-invoicing-create/execution-invoicing-create.component.ts");
/* harmony import */ var _execution_invoicing_home_execution_invoicing_home_component__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./execution-invoicing-home/execution-invoicing-home.component */ "./Client/app/execution/execution-invoicing-home/execution-invoicing-home.component.ts");
/* harmony import */ var _execution_invoicing_commercial_components_working_page_components_payments_component_payments_component_component__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./execution-invoicing/commercial/components/working-page/components/payments-component/payments-component.component */ "./Client/app/execution/execution-invoicing/commercial/components/working-page/components/payments-component/payments-component.component.ts");
/* harmony import */ var _execution_invoicing_execution_invoicing_component__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./execution-invoicing/execution-invoicing.component */ "./Client/app/execution/execution-invoicing/execution-invoicing.component.ts");
/* harmony import */ var _execution_invoicing_invoicing_summary_invoicing_summary_component__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./execution-invoicing/invoicing-summary/invoicing-summary.component */ "./Client/app/execution/execution-invoicing/invoicing-summary/invoicing-summary.component.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};





























var routes = [
    {
        path: 'invoicing/missinginvoices/dealtype/:dealType',
        component: _home_execution_dashboard_missing_invoices_details_missing_invoices_details_component__WEBPACK_IMPORTED_MODULE_2__["MissingInvoicesDetailsComponent"],
        canActivate: [_shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__["SecurityGuard"]],
        data: { animation: 'homeMissingInvoices', title: 'Missing Invoicing', isHomePage: false, privilegeLevel1Name: null },
        resolve: {
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'invoicing/missinginvoices',
        component: _home_execution_dashboard_missing_invoices_details_missing_invoices_details_component__WEBPACK_IMPORTED_MODULE_2__["MissingInvoicesDetailsComponent"],
        canActivate: [_shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__["SecurityGuard"]],
        data: { animation: 'homeMissingInvoices', title: 'Missing Invoicing', isHomePage: false, privilegeLevel1Name: null },
        resolve: {
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'cash',
        component: _execution_cash_execution_cash_component__WEBPACK_IMPORTED_MODULE_15__["ExecutionCashComponent"],
        canActivate: [_shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__["SecurityGuard"]],
        data: {
            animation: 'cashHomePage', title: 'Cash', isHomePage: true, privilegeLevel1Name: 'Cash',
            masterdataList: [
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Departments,
            ],
        },
        resolve: {
            formConfiguration: _shared_resolvers_form_configuration_resolver__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationResolver"],
            masterdata: _shared_resolvers_masterdata_resolver__WEBPACK_IMPORTED_MODULE_9__["MasterDataResolver"],
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'cash/new/:cashTypeId',
        component: _execution_cash_execution_cash_create_execution_cash_create_component__WEBPACK_IMPORTED_MODULE_14__["ExecutionCashCreateComponent"],
        canActivate: [_shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__["SecurityGuard"]],
        canDeactivate: [_shared_guards_can_deactivate_guard_service__WEBPACK_IMPORTED_MODULE_5__["CanDeactivateGuard"]],
        data: {
            animation: 'cashCreatePage',
            title: 'Cash',
            isHomePage: true,
            privilegeLevel1Name: 'Cash',
            formId: 'cashCreatePage',
            masterdataWithoutCompanyList: [
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].FxRates,
            ],
            masterdataList: [
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Counterparties,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].NominalAccounts,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Departments,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Currencies,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].CostTypes,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].CashTypes,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].PaymentTerms,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Countries,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].BankTypes,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].BankAccountStatuses,
            ],
        },
        resolve: {
            formConfiguration: _shared_resolvers_form_configuration_resolver__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationResolver"],
            masterdata: _shared_resolvers_masterdata_resolver__WEBPACK_IMPORTED_MODULE_9__["MasterDataResolver"],
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'allocation/:pricingMethod/:sectionId',
        component: _execution_allocation_execution_allocation_component__WEBPACK_IMPORTED_MODULE_12__["ExecutionAllocationComponent"],
        canActivate: [_shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__["SecurityGuard"]],
        data: {
            animation: 'executionAllocate',
            title: 'Trade Allocation', isHomePage: false, privilegeLevel1Name: null,
            authorizations: [
                {
                    privilegeName: 'Allocate',
                    permission: 2,
                    parentLevelOne: 'Trades',
                    parentLevelTwo: 'Physicals',
                },
            ],
        },
        resolve: {
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'invoicing/home',
        component: _execution_invoicing_home_execution_invoicing_home_component__WEBPACK_IMPORTED_MODULE_25__["ExecutionInvoicingHomeComponent"],
        canActivate: [_shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__["SecurityGuard"]],
        data: {
            animation: 'executionInvoicingHome',
            title: 'Invoices',
            isHomePage: true,
            privilegeLevel1Name: 'Invoices',
            masterdataList: [
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].InvoiceTypes,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Counterparties,
            ],
            authorizations: [
                {
                    privilegeName: 'Invoices',
                    permission: _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_4__["PermissionLevels"].Read,
                },
            ],
        },
        resolve: {
            masterdata: _shared_resolvers_masterdata_resolver__WEBPACK_IMPORTED_MODULE_9__["MasterDataResolver"],
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'invoicing/new',
        component: _execution_invoicing_create_execution_invoicing_create_component__WEBPACK_IMPORTED_MODULE_24__["ExecutionInvoicingCreateComponent"],
        canActivate: [_shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__["SecurityGuard"]],
        canDeactivate: [_shared_guards_can_deactivate_guard_service__WEBPACK_IMPORTED_MODULE_5__["CanDeactivateGuard"]],
        data: {
            animation: 'executionInvoicing',
            title: 'New Invoice', isHomePage: false, privilegeLevel1Name: null,
            formId: 'InvoiceCreation',
            masterdataList: [
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].InvoiceTypes,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].PricingOptions,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].PaymentTerms,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].NominalAccounts,
            ],
            authorizations: [
                {
                    privilegeName: 'InvoiceCreation',
                    permission: _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_4__["PermissionLevels"].Read,
                    parentLevelOne: 'Invoices',
                },
            ],
        },
        resolve: {
            masterdata: _shared_resolvers_masterdata_resolver__WEBPACK_IMPORTED_MODULE_9__["MasterDataResolver"],
            formConfiguration: _shared_resolvers_form_configuration_resolver__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationResolver"],
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'invoicing/:invoiceTypeId',
        component: _execution_invoicing_execution_invoicing_component__WEBPACK_IMPORTED_MODULE_27__["ExecutionInvoicingComponent"],
        canActivate: [_shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__["SecurityGuard"]],
        canDeactivate: [_shared_guards_can_deactivate_guard_service__WEBPACK_IMPORTED_MODULE_5__["CanDeactivateGuard"]],
        data: {
            animation: 'executionInvoicing',
            title: 'Invoice Creation', isHomePage: false, privilegeLevel1Name: null,
            formId: 'InvoiceCreation',
            masterdataList: [
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].InvoiceTypes,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].PricingOptions,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Counterparties,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].CostTypes,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Vats,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].PaymentTerms,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].NominalAccounts,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].WeightUnits,
            ],
            authorizations: [
                {
                    privilegeName: 'InvoiceCreation',
                    permission: _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_4__["PermissionLevels"].Read,
                    parentLevelOne: 'Invoices',
                },
            ],
        },
        resolve: {
            masterdata: _shared_resolvers_masterdata_resolver__WEBPACK_IMPORTED_MODULE_9__["MasterDataResolver"],
            formConfiguration: _shared_resolvers_form_configuration_resolver__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationResolver"],
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'invoicing/summary/:invoiceId',
        component: _execution_invoicing_invoicing_summary_invoicing_summary_component__WEBPACK_IMPORTED_MODULE_28__["InvoicingSummaryComponent"],
        canActivate: [_shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__["SecurityGuard"]],
        data: {
            animation: 'executionInvoicing',
            title: 'Invoice Summary', isHomePage: false, privilegeLevel1Name: null,
            formId: 'InvoiceSummary',
            masterdataList: [
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].InvoiceTypes,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].PricingOptions,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Counterparties,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].CostTypes,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Vats,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].PaymentTerms,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].NominalAccounts,
            ],
            authorizations: [
                {
                    privilegeName: 'InvoiceCreation',
                    permission: _shared_enums_permission_level_enum__WEBPACK_IMPORTED_MODULE_4__["PermissionLevels"].Read,
                    parentLevelOne: 'Invoices',
                },
            ],
        },
        resolve: {
            masterdata: _shared_resolvers_masterdata_resolver__WEBPACK_IMPORTED_MODULE_9__["MasterDataResolver"],
            formConfiguration: _shared_resolvers_form_configuration_resolver__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationResolver"],
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'invoicing/contract/:contractId',
        component: _execution_invoicing_execution_invoicing_component__WEBPACK_IMPORTED_MODULE_27__["ExecutionInvoicingComponent"],
        canActivate: [_shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__["SecurityGuard"]],
        canDeactivate: [_shared_guards_can_deactivate_guard_service__WEBPACK_IMPORTED_MODULE_5__["CanDeactivateGuard"]],
        data: {
            animation: 'executionInvoicing', isHomePage: false, privilegeLevel1Name: null,
            title: 'Contract Invoicing',
        },
        resolve: {
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'charter',
        component: _execution_charter_execution_charter_list_page_execution_charter_list_page_component__WEBPACK_IMPORTED_MODULE_21__["ExecutionCharterListPageComponent"],
        canActivate: [_shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__["SecurityGuard"]],
        data: {
            animation: 'executionCharter',
            title: 'Charter',
            isHomePage: true,
            privilegeLevel1Name: 'Charters',
            masterdataList: [
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Departments,
            ],
        },
        resolve: {
            masterdata: _shared_resolvers_masterdata_resolver__WEBPACK_IMPORTED_MODULE_9__["MasterDataResolver"],
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'charter/new',
        component: _execution_charter_execution_charter_creation_page_execution_charter_creation_page_component__WEBPACK_IMPORTED_MODULE_18__["ExecutionCharterCreationPageComponent"],
        canActivate: [_shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__["SecurityGuard"]],
        canDeactivate: [_shared_guards_can_deactivate_guard_service__WEBPACK_IMPORTED_MODULE_5__["CanDeactivateGuard"]],
        data: {
            animation: 'executionCharter',
            title: 'New Creation', isHomePage: false, privilegeLevel1Name: null,
            masterdataList: [
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Departments,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Ports,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].TransportTypes,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Currencies,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].WeightUnits,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Vessels,
            ],
            authorizations: [
                {
                    privilegeName: 'ChartersView',
                    permission: 2,
                    parentLevelOne: 'Charters',
                },
            ],
        },
        resolve: {
            masterdata: _shared_resolvers_masterdata_resolver__WEBPACK_IMPORTED_MODULE_9__["MasterDataResolver"],
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'charter/new/:charterId',
        component: _execution_charter_execution_charter_creation_page_execution_charter_creation_page_component__WEBPACK_IMPORTED_MODULE_18__["ExecutionCharterCreationPageComponent"],
        canActivate: [_shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__["SecurityGuard"]],
        data: {
            animation: 'executionCharter', title: 'New Charter', isHomePage: false, privilegeLevel1Name: null,
            masterdataList: [
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Departments,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Ports,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].TransportTypes,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Currencies,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].WeightUnits,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Vessels,
            ],
            authorizations: [
                {
                    privilegeName: 'ChartersView',
                    permission: 2,
                    parentLevelOne: 'Charters',
                },
            ],
        },
        resolve: {
            masterdata: _shared_resolvers_masterdata_resolver__WEBPACK_IMPORTED_MODULE_9__["MasterDataResolver"],
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'charter/edit/:charterId',
        component: _execution_charter_execution_charter_edit_page_execution_charter_edit_page_component__WEBPACK_IMPORTED_MODULE_20__["ExecutionCharterEditPageComponent"],
        canActivate: [_shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__["SecurityGuard"]],
        canDeactivate: [_shared_guards_can_deactivate_guard_service__WEBPACK_IMPORTED_MODULE_5__["CanDeactivateGuard"]],
        data: {
            animation: 'executionCharter', title: 'Edit Charter', isHomePage: false, privilegeLevel1Name: null,
            masterdataList: [
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Departments,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Ports,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].TransportTypes,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Currencies,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].WeightUnits,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Vessels,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].PriceUnits,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].PaymentTerms,
            ],
            authorizations: [
                {
                    privilegeName: 'ChartersView',
                    permission: 2,
                    parentLevelOne: 'Charters',
                },
            ],
        },
        resolve: {
            masterdata: _shared_resolvers_masterdata_resolver__WEBPACK_IMPORTED_MODULE_9__["MasterDataResolver"],
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'charter/details/:charterId',
        component: _execution_charter_execution_charter_details_execution_charter_details_component__WEBPACK_IMPORTED_MODULE_19__["ExecutionCharterDetailsComponent"],
        canActivate: [_shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__["SecurityGuard"]],
        data: {
            animation: 'executionCharter', title: 'Charter', isHomePage: false, privilegeLevel1Name: null,
            masterdataList: [
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Departments,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Ports,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].TransportTypes,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Currencies,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].WeightUnits,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Vessels,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Commodities,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].PriceUnits,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].PaymentTerms,
            ],
            authorizations: [
                {
                    privilegeName: 'ChartersView',
                    permission: 1,
                    parentLevelOne: 'Charters',
                },
            ],
        },
        resolve: {
            masterdata: _shared_resolvers_masterdata_resolver__WEBPACK_IMPORTED_MODULE_9__["MasterDataResolver"],
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'charter/assignment/:charterId',
        component: _execution_charter_execution_charter_assignment_execution_charter_assignment_component__WEBPACK_IMPORTED_MODULE_17__["ExecutionCharterAssignmentComponent"],
        canActivate: [_shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__["SecurityGuard"]],
        canDeactivate: [_shared_guards_can_deactivate_guard_service__WEBPACK_IMPORTED_MODULE_5__["CanDeactivateGuard"]],
        data: {
            animation: 'executionCharter', isHomePage: false, privilegeLevel1Name: null,
            title: 'Assign contract(s) to charter',
            masterdataList: [
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].TransportTypes,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Vessels,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Commodities,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].WeightUnits,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Departments,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Counterparties,
            ],
            authorizations: [
                {
                    privilegeName: 'ChartersView',
                    permission: 2,
                    parentLevelOne: 'Charters',
                },
            ],
        },
        resolve: {
            masterdata: _shared_resolvers_masterdata_resolver__WEBPACK_IMPORTED_MODULE_9__["MasterDataResolver"],
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'document/list',
        component: _document_list_document_list_component__WEBPACK_IMPORTED_MODULE_11__["DocumentListComponent"],
        canActivate: [_shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__["SecurityGuard"]],
        data: {
            animation: 'documentList',
            title: 'Document List', isHomePage: true, icon: '',
        },
        resolve: {
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'document/list/:entity/:recordId',
        component: _document_list_document_list_component__WEBPACK_IMPORTED_MODULE_11__["DocumentListComponent"],
        canActivate: [_shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__["SecurityGuard"]],
        data: {
            animation: 'documentList',
            title: 'Document List', isHomePage: false, icon: '',
        },
        resolve: {
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'charter/allocateDeallocate/:charterId',
        component: _execution_charter_execution_charter_allocation_deallocation_execution_charter_allocation_deallocation_component__WEBPACK_IMPORTED_MODULE_16__["ExecutionCharterAllocationDeallocationComponent"],
        canActivate: [_shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__["SecurityGuard"]],
        canDeactivate: [_shared_guards_can_deactivate_guard_service__WEBPACK_IMPORTED_MODULE_5__["CanDeactivateGuard"]],
        data: {
            animation: 'executionCharter', isHomePage: false, icon: '',
            title: 'Trade Allocation/Deallocation',
        },
        resolve: {
            masterdata: _shared_resolvers_masterdata_resolver__WEBPACK_IMPORTED_MODULE_9__["MasterDataResolver"],
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'document/generation/contractadvice/:recordId',
        component: _document_contract_advice_generation_contract_advice_generation_component__WEBPACK_IMPORTED_MODULE_10__["ContractAdviceGenerationComponent"],
        canActivate: [_shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__["SecurityGuard"]],
        data: {
            animation: 'documentGeneration',
            title: 'Document Generation', isHomePage: false, privilegeLevel1Name: null,
            authorizations: [
                {
                    privilegeName: 'GenerateContractAdvice',
                    permission: 2,
                    parentLevelOne: 'Trades',
                    parentLevelTwo: 'Physicals',
                },
            ],
        },
        resolve: {
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'invoicing/:invoiceTypeId',
        component: _execution_invoicing_commercial_components_working_page_components_payments_component_payments_component_component__WEBPACK_IMPORTED_MODULE_26__["CommercialPaymentsComponent"],
        data: {
            animation: 'executionPaymentTerm',
            title: 'Payment Term', isHomePage: false, privilegeLevel1Name: null,
            paymentTerms: [_shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].PaymentTerms],
            masterdataList: [
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Arbitrations,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Commodities,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].ContractTerms,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Counterparties,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Currencies,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Departments,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].BusinessSectors,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].PaymentTerms,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].PeriodTypes,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].PositionMonthTypes,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Ports,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].PriceUnits,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].WeightUnits,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].CostTypes,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].NominalAccounts,
            ],
        },
        resolve: {
            masterdata: _shared_resolvers_masterdata_resolver__WEBPACK_IMPORTED_MODULE_9__["MasterDataResolver"],
            formConfiguration: _shared_resolvers_form_configuration_resolver__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationResolver"],
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'cash/display/:cashTypeId/:cashId',
        component: _execution_cash_execution_cash_create_cash_summary_cash_summary_component__WEBPACK_IMPORTED_MODULE_13__["CashSummaryFormComponent"],
        canActivate: [_shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__["SecurityGuard"]],
        canDeactivate: [_shared_guards_can_deactivate_guard_service__WEBPACK_IMPORTED_MODULE_5__["CanDeactivateGuard"]],
        data: {
            animation: 'executionCash', title: 'Cash Details',
            formId: 'cashSummaryPage', isHomePage: false, privilegeLevel1Name: null,
            masterdataList: [
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Counterparties,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].NominalAccounts,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Departments,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Currencies,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].CostTypes,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].PaymentTerms,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Countries,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].BankTypes,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].BankAccountStatuses,
            ],
        },
        resolve: {
            formConfiguration: _shared_resolvers_form_configuration_resolver__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationResolver"],
            masterdata: _shared_resolvers_masterdata_resolver__WEBPACK_IMPORTED_MODULE_9__["MasterDataResolver"],
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'cash/edit/:cashTypeId/:cashId',
        component: _execution_cash_execution_cash_create_execution_cash_create_component__WEBPACK_IMPORTED_MODULE_14__["ExecutionCashCreateComponent"],
        canDeactivate: [_shared_guards_can_deactivate_guard_service__WEBPACK_IMPORTED_MODULE_5__["CanDeactivateGuard"]],
        data: {
            animation: 'executionCash', title: 'Edit Cash',
            formId: 'cashCreatePage', isHomePage: false, privilegeLevel1Name: null,
            masterdataWithoutCompanyList: [
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].FxRates,
            ],
            masterdataList: [
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Counterparties,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].NominalAccounts,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Departments,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Currencies,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].CostTypes,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].PaymentTerms,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Countries,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].BankTypes,
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].BankAccountStatuses,
            ],
        },
        resolve: {
            masterdata: _shared_resolvers_masterdata_resolver__WEBPACK_IMPORTED_MODULE_9__["MasterDataResolver"],
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'charter/groupfunctions',
        component: _execution_charter_group_amendments_execution_charter_group_amendments_component__WEBPACK_IMPORTED_MODULE_22__["ExecutionCharterGroupAmendmentsComponent"],
        canActivate: [_shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__["SecurityGuard"]],
        canDeactivate: [_shared_guards_can_deactivate_guard_service__WEBPACK_IMPORTED_MODULE_5__["CanDeactivateGuard"]],
        data: {
            animation: 'groupFunctions',
            title: 'Group Functions',
            formId: 'GroupFunctions', isHomePage: false, privilegeLevel1Name: null,
            masterdataList: [],
        },
        resolve: {
            masterdata: _shared_resolvers_masterdata_resolver__WEBPACK_IMPORTED_MODULE_9__["MasterDataResolver"],
            formConfiguration: _shared_resolvers_form_configuration_resolver__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationResolver"],
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
    {
        path: 'charter/bulkActions/:bulkActionTypeId',
        component: _execution_charter_group_function_execution_charter_group_function_component__WEBPACK_IMPORTED_MODULE_23__["ExecutionCharterGroupFunctionComponent"],
        canActivate: [_shared_guards_security_guard__WEBPACK_IMPORTED_MODULE_6__["SecurityGuard"]],
        canDeactivate: [_shared_guards_can_deactivate_guard_service__WEBPACK_IMPORTED_MODULE_5__["CanDeactivateGuard"]],
        data: {
            animation: 'bulkActions',
            title: 'Bulk Actions',
            isHomePage: false,
            privilegeLevel1Name: null,
            formId: 'GroupFunctions',
            masterdataList: [
                _shared_entities_masterdata_props_entity__WEBPACK_IMPORTED_MODULE_3__["MasterDataProps"].Departments,
            ],
        },
        resolve: {
            masterdata: _shared_resolvers_masterdata_resolver__WEBPACK_IMPORTED_MODULE_9__["MasterDataResolver"],
            formConfiguration: _shared_resolvers_form_configuration_resolver__WEBPACK_IMPORTED_MODULE_8__["FormConfigurationResolver"],
            companyDate: _shared_resolvers_company_date_resolver__WEBPACK_IMPORTED_MODULE_7__["CompanyDateResolver"],
        },
    },
];
var ExecutionRoutingModule = /** @class */ (function () {
    function ExecutionRoutingModule() {
    }
    ExecutionRoutingModule = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"])({
            imports: [_angular_router__WEBPACK_IMPORTED_MODULE_1__["RouterModule"].forChild(routes)],
            exports: [_angular_router__WEBPACK_IMPORTED_MODULE_1__["RouterModule"]],
        })
    ], ExecutionRoutingModule);
    return ExecutionRoutingModule;
}());



/***/ }),

/***/ "./Client/app/home/execution-dashboard/missing-invoices-details/missing-invoices-details.component.html":
/*!**************************************************************************************************************!*\
  !*** ./Client/app/home/execution-dashboard/missing-invoices-details/missing-invoices-details.component.html ***!
  \**************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"elevated-container mat-elevation-z1 container-custom\">\r\n    <form [formGroup]=\"missingInvoicesForm\">\r\n        <mat-expansion-panel expanded=\"true\">\r\n            <mat-expansion-panel-header>\r\n                <mat-panel-title>\r\n                    <h2>Missing invoices</h2>\r\n                    <div class=\"custom-line-title\"></div>\r\n                </mat-panel-title>\r\n            </mat-expansion-panel-header>\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"none left\"\r\n                 fxLayoutWrap\r\n                 fxLayoutGap=\"10px\">\r\n                <div fxFlex=\"15%\"\r\n                     fxFlex.xs=\"100%\"\r\n                     fxFlex.sm=\"100%\">\r\n                    <mat-form-field>\r\n                        <mat-select placeholder=\"Platform\"\r\n                                    formControlName=\"platformFilterCtrl\"\r\n                                    multiple>\r\n                            <mat-option value=\"1\">Grains</mat-option>\r\n                            <mat-option value=\"2\">Oilseeds</mat-option>\r\n                            <mat-option value=\"3\">Coffee</mat-option>\r\n                        </mat-select>\r\n                    </mat-form-field>\r\n                </div>\r\n                <div fxFlex=\"8%\"\r\n                     fxFlex.xs=\"100%\"\r\n                     fxFlex.sm=\"100%\">\r\n                    <button mat-icon-button\r\n                            aria-label=\"View 1\"\r\n                            matTooltip=\"View 1\">\r\n                        <mat-icon>grade</mat-icon>&nbsp;View 1\r\n                    </button>\r\n                </div>\r\n                <div fxFlex=\"8%\"\r\n                     fxFlex.xs=\"100%\"\r\n                     fxFlex.sm=\"100%\">\r\n                    <button mat-icon-button\r\n                            aria-label=\"View 2\"\r\n                            matTooltip=\"View 2\">\r\n                        <mat-icon style=\"color:Gainsboro;\">grade</mat-icon>&nbsp;View 2\r\n                    </button>\r\n                </div>\r\n                <div fxFlex=\"8%\"\r\n                     fxFlex.xs=\"100%\"\r\n                     fxFlex.sm=\"100%\">\r\n                    <button mat-icon-button\r\n                            aria-label=\"View 3\"\r\n                            matTooltip=\"View 3\">\r\n                        <mat-icon style=\"color:Gainsboro;\">grade</mat-icon>&nbsp;View 3\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"none left\"\r\n                 fxLayoutWrap\r\n                 fxLayoutGap=\"10px\">\r\n                <div fxFlex=\"15%\"\r\n                     fxFlex.xs=\"100%\"\r\n                     fxFlex.sm=\"100%\">\r\n                    <mat-form-field>\r\n                        <mat-select placeholder=\"Entity\"\r\n                                    formControlName=\"entityFilterCtrl\"\r\n                                    (selectionChange)=\"entityFilterChange()\"\r\n                                    multiple>\r\n                            <mat-option value=\"A1\">A1</mat-option>\r\n                            <mat-option value=\"A8\">A8</mat-option>\r\n                            <mat-option value=\"R3\">R3</mat-option>\r\n                            <mat-option value=\"S4\">S4</mat-option>\r\n                        </mat-select>\r\n                    </mat-form-field>\r\n                </div>\r\n                <div fxFlex=\"15%\"\r\n                     fxFlex.xs=\"100%\"\r\n                     fxFlex.sm=\"100%\">\r\n                    <mat-form-field>\r\n                        <mat-select placeholder=\"Ageing BL Date\"\r\n                                    formControlName=\"blDateFilterCtrl\"\r\n                                    multiple>\r\n                            <mat-option value=1>0-1 months</mat-option>\r\n                            <mat-option value=2>03-06 months</mat-option>\r\n                            <mat-option value=3>12-24 months</mat-option>\r\n                        </mat-select>\r\n                    </mat-form-field>\r\n                </div>\r\n                <div fxFlex=\"15%\"\r\n                     fxFlex.xs=\"100%\"\r\n                     fxFlex.sm=\"100%\">\r\n                    <mat-form-field>\r\n                        <mat-select placeholder=\"Transport type\"\r\n                                    formControlName=\"transportFilterCtrl\"\r\n                                    multiple>\r\n                            <mat-option value=\"Bulk\">Bulk</mat-option>\r\n                            <mat-option value=\"Others\">Others</mat-option>\r\n                        </mat-select>\r\n                    </mat-form-field>\r\n                </div>\r\n                <div fxFlex=\"15%\"\r\n                     fxFlex.xs=\"100%\"\r\n                     fxFlex.sm=\"100%\">\r\n                    <mat-form-field>\r\n                        <mat-select placeholder=\"Contract type\"\r\n                                    formControlName=\"contractTypeFilterCtrl\"\r\n                                    (selectionChange)=\"contractTypeFilterChange()\"\r\n                                    multiple>\r\n                            <mat-option value=\"Purchases\">Purchases</mat-option>\r\n                            <mat-option value=\"Sales\">Sales</mat-option>\r\n                        </mat-select>\r\n                    </mat-form-field>\r\n                </div>\r\n                <div fxFlex=\"15%\"\r\n                     fxFlex.xs=\"100%\"\r\n                     fxFlex.sm=\"100%\">\r\n                    <mat-form-field>\r\n                        <mat-select placeholder=\"User\"\r\n                                    formControlName=\"userFilterCtrl\"\r\n                                    multiple>\r\n                            <mat-option value=\"1\">User 1</mat-option>\r\n                            <mat-option value=\"2\">User 2</mat-option>\r\n                            <mat-option value=\"2\">User 3</mat-option>\r\n                        </mat-select>\r\n                    </mat-form-field>\r\n                </div>\r\n                <div fxFlex=\"15%\"\r\n                     fxFlex.xs=\"100%\"\r\n                     fxFlex.sm=\"100%\">\r\n                    <button mat-icon-button\r\n                            matTooltip=\"View\">\r\n                        <mat-icon>remove_red_eye</mat-icon>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <mat-table #table\r\n                       [dataSource]=\"selectionDataSource\">\r\n                <ng-container matColumnDef=\"contractRef\">\r\n                    <mat-header-cell *matHeaderCellDef>Contract</mat-header-cell>\r\n                    <mat-cell *matCellDef=\"let element\"> {{ element.contractRef }}</mat-cell>\r\n                </ng-container>\r\n                <ng-container matColumnDef=\"entityFilter\">\r\n                    <mat-header-cell *matHeaderCellDef>Entity</mat-header-cell>\r\n                    <mat-cell *matCellDef=\"let element\"> {{ element.entityFilter }}</mat-cell>\r\n                </ng-container>\r\n                <ng-container matColumnDef=\"department\">\r\n                    <mat-header-cell *matHeaderCellDef>Department</mat-header-cell>\r\n                    <mat-cell *matCellDef=\"let element\"> {{ element.department }}</mat-cell>\r\n                </ng-container>\r\n                <ng-container matColumnDef=\"counterparty\">\r\n                    <mat-header-cell *matHeaderCellDef>Counterparty</mat-header-cell>\r\n                    <mat-cell *matCellDef=\"let element\"> {{ element.counterparty }}</mat-cell>\r\n                </ng-container>\r\n                <ng-container matColumnDef=\"vessel\">\r\n                    <mat-header-cell *matHeaderCellDef>Vessel</mat-header-cell>\r\n                    <mat-cell *matCellDef=\"let element\"> {{ element.vessel }}</mat-cell>\r\n                </ng-container>\r\n                <ng-container matColumnDef=\"transportFilter\">\r\n                    <mat-header-cell *matHeaderCellDef>Transport Type</mat-header-cell>\r\n                    <mat-cell *matCellDef=\"let element\"> {{ element.transportFilter }}</mat-cell>\r\n                </ng-container>\r\n                <ng-container matColumnDef=\"blDate\">\r\n                    <mat-header-cell *matHeaderCellDef>BL Date</mat-header-cell>\r\n                    <mat-cell *matCellDef=\"let element\">\r\n                        <atr-date-label [date]=\"element.blDate\"></atr-date-label>\r\n                    </mat-cell>\r\n                </ng-container>\r\n                <ng-container matColumnDef=\"period\">\r\n                    <mat-header-cell *matHeaderCellDef>Period</mat-header-cell>\r\n                    <mat-cell *matCellDef=\"let element\"> {{ element.period }}</mat-cell>\r\n                </ng-container>\r\n                <ng-container matColumnDef=\"commodity\">\r\n                    <mat-header-cell *matHeaderCellDef>Commodity</mat-header-cell>\r\n                    <mat-cell *matCellDef=\"let element\"> {{ element.commodity }}</mat-cell>\r\n                </ng-container>\r\n                <ng-container matColumnDef=\"quantity\">\r\n                    <mat-header-cell *matHeaderCellDef>Quantity</mat-header-cell>\r\n                    <mat-cell *matCellDef=\"let element\"> {{ element.quantity }} MT</mat-cell>\r\n                </ng-container>\r\n                <ng-container matColumnDef=\"total\">\r\n                    <mat-header-cell *matHeaderCellDef>Total %</mat-header-cell>\r\n                    <mat-cell *matCellDef=\"let element\"> {{ element.total }} %</mat-cell>\r\n                </ng-container>\r\n                <ng-container matColumnDef=\"price\">\r\n                    <mat-header-cell *matHeaderCellDef>Price</mat-header-cell>\r\n                    <mat-cell class=\"mat-cell-right\"\r\n                              *matCellDef=\"let element\"> {{ element.price }}</mat-cell>\r\n                </ng-container>\r\n                <ng-container matColumnDef=\"priceDiff\">\r\n                    <mat-header-cell *matHeaderCellDef>Price Diff</mat-header-cell>\r\n                    <mat-cell *matCellDef=\"let element\"> {{ element.priceDiff }}</mat-cell>\r\n                </ng-container>\r\n                <ng-container matColumnDef=\"lots\">\r\n                    <mat-header-cell *matHeaderCellDef>Lots</mat-header-cell>\r\n                    <mat-cell *matCellDef=\"let element\"> {{ element.lots }}</mat-cell>\r\n                </ng-container>\r\n                <ng-container matColumnDef=\"user\">\r\n                    <mat-header-cell *matHeaderCellDef>User</mat-header-cell>\r\n                    <mat-cell *matCellDef=\"let element\"> {{ element.user }}</mat-cell>\r\n                </ng-container>\r\n                <ng-container matColumnDef=\"selection\">\r\n                    <mat-header-cell *matHeaderCellDef> Selection </mat-header-cell>\r\n                    <mat-cell *matCellDef=\"let row\">\r\n                        <mat-checkbox (change)=\"contractSelected(row)\"\r\n                                      [checked]=\"selectionManager.isSelected(row)\"></mat-checkbox>\r\n                    </mat-cell>\r\n                </ng-container>\r\n\r\n                <mat-header-row *matHeaderRowDef=\"selectionDisplayedColumns\"></mat-header-row>\r\n                <mat-row *matRowDef=\"let row; columns: selectionDisplayedColumns;\"></mat-row>\r\n            </mat-table>\r\n            <div>\r\n                <div class=\"custom-line-footer\"></div>\r\n                <div style=\"margin:20px; text-align:right\">\r\n                    <span class=\"fill-space\"></span>\r\n                    <button mat-raised-button\r\n                            (click)=\"proceedButtonClicked()\"\r\n                            [disabled]=\"selectedRowReference == ''\">Proceed</button>\r\n                </div>\r\n            </div>\r\n        </mat-expansion-panel>\r\n    </form>\r\n</div>\r\n"

/***/ }),

/***/ "./Client/app/home/execution-dashboard/missing-invoices-details/missing-invoices-details.component.scss":
/*!**************************************************************************************************************!*\
  !*** ./Client/app/home/execution-dashboard/missing-invoices-details/missing-invoices-details.component.scss ***!
  \**************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".mat-header-cell {\n  font-weight: 800 !important;\n  font-size: 14px !important;\n  color: #24333e !important; }\n"

/***/ }),

/***/ "./Client/app/home/execution-dashboard/missing-invoices-details/missing-invoices-details.component.ts":
/*!************************************************************************************************************!*\
  !*** ./Client/app/home/execution-dashboard/missing-invoices-details/missing-invoices-details.component.ts ***!
  \************************************************************************************************************/
/*! exports provided: MissingInvoicesDetailsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MissingInvoicesDetailsComponent", function() { return MissingInvoicesDetailsComponent; });
/* harmony import */ var _angular_cdk_collections__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/cdk/collections */ "./node_modules/@angular/cdk/esm5/collections.es5.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _shared_entities_filter_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/entities/filter.entity */ "./Client/app/shared/entities/filter.entity.ts");
/* harmony import */ var _shared_models_missing_invoices_display_view__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../shared/models/missing-invoices-display-view */ "./Client/app/shared/models/missing-invoices-display-view.ts");
/* harmony import */ var _shared_services_title_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/services/title.service */ "./Client/app/shared/services/title.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var MissingInvoicesDetailsComponent = /** @class */ (function () {
    function MissingInvoicesDetailsComponent(fb, router, route, titleService) {
        this.fb = fb;
        this.router = router;
        this.route = route;
        this.titleService = titleService;
        this.selectionManager = new _angular_cdk_collections__WEBPACK_IMPORTED_MODULE_0__["SelectionModel"](true, []);
        this.selectionDisplayedColumns = ['contractRef', 'entityFilter', 'department', 'counterparty', 'vessel', 'transportFilter', 'blDate', 'period', 'commodity', 'quantity', 'total', 'price', 'priceDiff', 'lots', 'user', 'selection'];
        this.dealType = '';
        this.missingInvoices = [
            // new MissingInvoicesDisplayView(126, 'P00126.000', '751', 'LDC', 'Vessel', new Date("12/12/2017"), 'D', 'BAG', 1000, 0.2, 100, 100, 1, 'ATRCTRL2', 'S4', 1, 'BULK', 'P'),
            // new MissingInvoicesDisplayView(127, 'P00127.000', '1260', 'LDC', 'Vessel', new Date("12/12/2017"), 'D', 'BAR', 3000, 0.2, 100, 100, 1, 'ATRCTRL3', 'A1', 1, 'BULK', 'P'),
            // new MissingInvoicesDisplayView(128, 'S00128.000', '799', 'ABBEYS01.P', 'Vessel', new Date("12/12/2017"), 'S', 'BAR', 100, 0.2, 100, 100, 1, 'ATRCTRL3', 'A8', 1, 'BULK', 'S'),
            // new MissingInvoicesDisplayView(129, 'P00129.000', '2270', 'LDC', 'Vessel', new Date("12/12/2017"), 'D', 'BIO', 5500, 0.2, 100, 100, 1, 'ATREXEC1', 'A1', 1, 'BULK', 'P'),
            // new MissingInvoicesDisplayView(130, 'S00130.000', '2270', 'ABDSRL01.P', 'Vessel', new Date("12/12/2017"), 'D', 'BIO', 6000, 0.2, 100, 100, 1, 'ATRCTRL3', 'A8', 1, 'BULK', 'S'),
            // new MissingInvoicesDisplayView(131, 'P00131.000', '2270', 'LDC', 'Vessel', new Date("12/12/2017"), 'S', 'BIO', 6050, 0.2, 100, 100, 1, 'ATRCTRL3', 'A1', 1, 'BULK', 'P'),
            // new MissingInvoicesDisplayView(132, 'P00132.000', '2270', 'LDC', 'Vessel', new Date("12/12/2017"), 'D', 'BIO', 7000, 0.2, 100, 100, 1, 'ATRCTRL3', 'A8', 1, 'BULK', 'P'),
            // new MissingInvoicesDisplayView(135, 'S00135.000', '1020', 'ACEGRA01.P', 'Vessel', new Date("12/12/2017"), 'D', 'BAG', 100, 0.2, 100, 100, 1, 'ATRCTRL1', 'S4', 1, 'BULK', 'S'),
            new _shared_models_missing_invoices_display_view__WEBPACK_IMPORTED_MODULE_6__["MissingInvoicesDisplayView"](18, 'S00028.000', '5540', 'AGENCI03.P', 'Vessel', new Date('12/12/2017'), 'D', 'BIO_OP', 8000, 0.2, 100, 100, 1, 'ATREXEC1', 'S4', 1, 'BULK', 'Sales'),
            new _shared_models_missing_invoices_display_view__WEBPACK_IMPORTED_MODULE_6__["MissingInvoicesDisplayView"](19, 'P00029.000', '5530', 'LDC', 'Vessel', new Date('12/12/2017'), 'D', 'BIO_OP', 8001, 0.2, 100, 100, 1, 'ATREXEC1', 'A1', 1, 'BULK', 'Purchases'),
            new _shared_models_missing_invoices_display_view__WEBPACK_IMPORTED_MODULE_6__["MissingInvoicesDisplayView"](20, 'P00030.000', '799', 'LDC', 'Vessel', new Date('12/12/2017'), 'D', 'CRN_UY', 134, 0.2, 100, 100, 1, 'ATRCTRL2', 'A8', 1, 'BULK', 'Purchases'),
            new _shared_models_missing_invoices_display_view__WEBPACK_IMPORTED_MODULE_6__["MissingInvoicesDisplayView"](21, 'P00031.000', '2020', 'LDC', 'Vessel', new Date('12/12/2017'), 'D', 'CME_BR', 4000, 0.2, 100, 100, 1, 'ATRCTRL2', 'A1', 1, 'BULK', 'Purchases'),
            new _shared_models_missing_invoices_display_view__WEBPACK_IMPORTED_MODULE_6__["MissingInvoicesDisplayView"](22, 'S00032.000', '1020', 'ABDSRL01.P', 'Vessel', new Date('12/12/2017'), 'D', 'BAR_AR', 807, 0.2, 100, 100, 1, 'ATRCTRL3', 'A8', 1, 'BULK', 'Sales'),
            new _shared_models_missing_invoices_display_view__WEBPACK_IMPORTED_MODULE_6__["MissingInvoicesDisplayView"](23, 'S00033.000', '6680', 'ABBEYS01.P', 'Vessel', new Date('12/12/2017'), 'D', 'BAG_UY', 909, 0.2, 100, 100, 1, 'ATRCTRL3', 'A1', 1, 'BULK', 'Sales'),
            new _shared_models_missing_invoices_display_view__WEBPACK_IMPORTED_MODULE_6__["MissingInvoicesDisplayView"](24, 'P00034.000', '3020', 'LDC', 'Vessel', new Date('12/12/2017'), 'S', 'BAR_AR', 980, 0.2, 100, 100, 1, 'ATRCTRL3', 'A1', 1, 'BULK', 'Purchases'),
            new _shared_models_missing_invoices_display_view__WEBPACK_IMPORTED_MODULE_6__["MissingInvoicesDisplayView"](25, 'P00035.000', '1210', 'LDC', 'Vessel', new Date('12/12/2017'), 'S', 'BIO_AR', 600, 0.2, 100, 100, 1, 'ATRCTRL3', 'A8', 1, 'BULK', 'Purchases'),
            new _shared_models_missing_invoices_display_view__WEBPACK_IMPORTED_MODULE_6__["MissingInvoicesDisplayView"](26, 'P00036.000', '751', 'LDC', 'Vessel', new Date('12/12/2017'), 'D', 'BAG_AR', 125, 0.2, 100, 100, 1, 'ATRCTRL1', 'S4', 1, 'BULK', 'Purchases'),
        ];
        this.filtersApplied = [];
        this.resultsAfterFiltering = [];
        this.selectedRowReference = '';
        this.createForm();
    }
    MissingInvoicesDetailsComponent.prototype.createForm = function () {
        this.missingInvoicesForm = this.fb.group({
            entityFilterCtrl: '',
            platformFilterCtrl: '',
            blDateFilterCtrl: '',
            transportFilterCtrl: '',
            contractTypeFilterCtrl: '',
            userFilterCtrl: '',
        });
    };
    MissingInvoicesDetailsComponent.prototype.ngOnInit = function () {
        this.company = this.route.snapshot.paramMap.get('company');
        this.titleService.setTitle(this.route.snapshot.data.title);
        this.selectionDataSource = new _angular_material__WEBPACK_IMPORTED_MODULE_3__["MatTableDataSource"](this.missingInvoices);
        this.selectionDataSource.paginator = this.paginator;
        this.selectionDataSource.sort = this.sort;
        this.dealType = String(this.route.snapshot.paramMap.get('dealType'));
        if (this.dealType != 'null') {
            var ctrl = this.missingInvoicesForm.get('contractTypeFilterCtrl');
            ctrl.setValue([this.dealType]);
            this.contractTypeFilterChange();
        }
    };
    MissingInvoicesDetailsComponent.prototype.removeFilters = function (filterId) {
        this.filtersApplied = this.filtersApplied.filter(function (f) { return f.filterId !== filterId; });
        this.applyFilters();
    };
    MissingInvoicesDetailsComponent.prototype.addFilters = function (filterId, filters) {
        this.removeFilters(filterId);
        this.filtersApplied.push(new _shared_entities_filter_entity__WEBPACK_IMPORTED_MODULE_5__["Filter"](filterId, filters));
        this.applyFilters();
    };
    MissingInvoicesDetailsComponent.prototype.applyFilters = function () {
        this.resultsAfterFiltering = this.missingInvoices;
        this.applyEntityFilter();
        this.applyContractTypeFilter();
        this.selectionDataSource = new _angular_material__WEBPACK_IMPORTED_MODULE_3__["MatTableDataSource"](this.resultsAfterFiltering);
        this.selectionDataSource.paginator = this.paginator;
        this.selectionDataSource.sort = this.sort;
    };
    MissingInvoicesDetailsComponent.prototype.filterChange = function (controlName) {
        var selectedValues = this.missingInvoicesForm.get(controlName).value;
        if (selectedValues.length === 0) {
            this.removeFilters(controlName);
        }
        else {
            this.addFilters(controlName, selectedValues);
        }
    };
    MissingInvoicesDetailsComponent.prototype.applyEntityFilter = function () {
        var selectedEntities = this.missingInvoicesForm.get('entityFilterCtrl').value;
        if (selectedEntities.length !== 0) {
            this.resultsAfterFiltering = this.resultsAfterFiltering.filter(function (m) { return selectedEntities.includes(m.entityFilter); });
        }
    };
    MissingInvoicesDetailsComponent.prototype.applyContractTypeFilter = function () {
        var selectedEntities = this.missingInvoicesForm.get('contractTypeFilterCtrl').value;
        if (selectedEntities.length !== 0) {
            this.resultsAfterFiltering = this.resultsAfterFiltering.filter(function (m) { return selectedEntities.includes(m.contractTypeFilter); });
        }
    };
    MissingInvoicesDetailsComponent.prototype.entityFilterChange = function () {
        var selectedEntities = this.missingInvoicesForm.get('entityFilterCtrl').value;
        if (selectedEntities.length === 0) {
            this.selectionDataSource = new _angular_material__WEBPACK_IMPORTED_MODULE_3__["MatTableDataSource"](this.missingInvoices);
        }
        else {
            this.selectionDataSource = new _angular_material__WEBPACK_IMPORTED_MODULE_3__["MatTableDataSource"](this.missingInvoices.filter(function (m) { return selectedEntities.includes(m.entityFilter); }));
        }
        this.selectionDataSource.paginator = this.paginator;
        this.selectionDataSource.sort = this.sort;
    };
    MissingInvoicesDetailsComponent.prototype.contractTypeFilterChange = function () {
        // let selectedValues: string[] = this.missingInvoicesForm.get("contractTypeFilterCtrl").value;
        // if (selectedValues.length == 0) { this.removeFilters("contractTypeFilterCtrl"); }
        // else {
        // 	this.addFilters("contractTypeFilterCtrl", selectedValues)
        // }
        var selectedEntities = this.missingInvoicesForm.get('contractTypeFilterCtrl').value;
        if (selectedEntities.length === 0) {
            this.selectionDataSource = new _angular_material__WEBPACK_IMPORTED_MODULE_3__["MatTableDataSource"](this.missingInvoices);
        }
        else {
            this.selectionDataSource = new _angular_material__WEBPACK_IMPORTED_MODULE_3__["MatTableDataSource"](this.missingInvoices.filter(function (m) { return selectedEntities.includes(m.contractTypeFilter); }));
        }
        this.selectionDataSource.paginator = this.paginator;
        this.selectionDataSource.sort = this.sort;
    };
    MissingInvoicesDetailsComponent.prototype.contractSelected = function (row) {
        if (this.selectionManager.isSelected(row)) {
            this.selectionManager.clear();
            this.selectedRowReference = '';
        }
        else {
            this.selectionManager.clear();
            this.selectionManager.toggle(row);
            this.selectedRowReference = row;
        }
    };
    MissingInvoicesDetailsComponent.prototype.proceedButtonClicked = function () {
        this.router.navigate(['/' + this.company + '/execution/invoicing/contract', String(this.selectionManager.selected[0].sectionID)]);
        // this.router.navigate(['/execution/invoicing/workingpage', String(this.selectionManager.selected[0].sectionID)]);
        // this.router.navigate(['/execution/invoicing/contract', this.selectionManager.selected[0].sectionID]);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])(_angular_material__WEBPACK_IMPORTED_MODULE_3__["MatPaginator"]),
        __metadata("design:type", _angular_material__WEBPACK_IMPORTED_MODULE_3__["MatPaginator"])
    ], MissingInvoicesDetailsComponent.prototype, "paginator", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])(_angular_material__WEBPACK_IMPORTED_MODULE_3__["MatSort"]),
        __metadata("design:type", _angular_material__WEBPACK_IMPORTED_MODULE_3__["MatSort"])
    ], MissingInvoicesDetailsComponent.prototype, "sort", void 0);
    MissingInvoicesDetailsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: 'atr-missing-invoices-details',
            template: __webpack_require__(/*! ./missing-invoices-details.component.html */ "./Client/app/home/execution-dashboard/missing-invoices-details/missing-invoices-details.component.html"),
            styles: [__webpack_require__(/*! ./missing-invoices-details.component.scss */ "./Client/app/home/execution-dashboard/missing-invoices-details/missing-invoices-details.component.scss")],
        }),
        __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormBuilder"],
            _angular_router__WEBPACK_IMPORTED_MODULE_4__["Router"],
            _angular_router__WEBPACK_IMPORTED_MODULE_4__["ActivatedRoute"],
            _shared_services_title_service__WEBPACK_IMPORTED_MODULE_7__["TitleService"]])
    ], MissingInvoicesDetailsComponent);
    return MissingInvoicesDetailsComponent;
}());



/***/ }),

/***/ "./Client/app/shared/document-template-event.entity.ts":
/*!*************************************************************!*\
  !*** ./Client/app/shared/document-template-event.entity.ts ***!
  \*************************************************************/
/*! exports provided: DocumentTemplateSelectedEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DocumentTemplateSelectedEvent", function() { return DocumentTemplateSelectedEvent; });
var DocumentTemplateSelectedEvent = /** @class */ (function () {
    function DocumentTemplateSelectedEvent(hasTemplate, template) {
        this.hasTemplate = hasTemplate;
        if (template) {
            this.template = template;
        }
    }
    return DocumentTemplateSelectedEvent;
}());



/***/ }),

/***/ "./Client/app/shared/entities/additional-cost.entity.ts":
/*!**************************************************************!*\
  !*** ./Client/app/shared/entities/additional-cost.entity.ts ***!
  \**************************************************************/
/*! exports provided: AdditionalCost */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AdditionalCost", function() { return AdditionalCost; });
var AdditionalCost = /** @class */ (function () {
    function AdditionalCost() {
    }
    return AdditionalCost;
}());



/***/ }),

/***/ "./Client/app/shared/entities/assigned-section.entity.ts":
/*!***************************************************************!*\
  !*** ./Client/app/shared/entities/assigned-section.entity.ts ***!
  \***************************************************************/
/*! exports provided: AssignedSection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AssignedSection", function() { return AssignedSection; });
var AssignedSection = /** @class */ (function () {
    function AssignedSection() {
    }
    return AssignedSection;
}());



/***/ }),

/***/ "./Client/app/shared/entities/cash.entity.ts":
/*!***************************************************!*\
  !*** ./Client/app/shared/entities/cash.entity.ts ***!
  \***************************************************/
/*! exports provided: CashSummary */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CashSummary", function() { return CashSummary; });
var CashSummary = /** @class */ (function () {
    function CashSummary() {
    }
    return CashSummary;
}());



/***/ }),

/***/ "./Client/app/shared/entities/charter-bulk-closure.entity.ts":
/*!*******************************************************************!*\
  !*** ./Client/app/shared/entities/charter-bulk-closure.entity.ts ***!
  \*******************************************************************/
/*! exports provided: CharterBulkClosure */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CharterBulkClosure", function() { return CharterBulkClosure; });
var CharterBulkClosure = /** @class */ (function () {
    function CharterBulkClosure(charterData) {
        if (charterData) {
            this.dataVersionId = charterData.dataVersionId;
            this.charterId = charterData.charterId;
            this.charterCode = charterData.charterCode;
            this.statusId = charterData.statusId;
            this.sectionsAssigned = charterData.sectionsAssigned;
            this.category = charterData.category;
            this.message = charterData.message;
            this.vesselName = charterData.vesselName;
            this.description = charterData.description;
        }
    }
    return CharterBulkClosure;
}());



/***/ }),

/***/ "./Client/app/shared/entities/document-popup-button-settings.entity.ts":
/*!*****************************************************************************!*\
  !*** ./Client/app/shared/entities/document-popup-button-settings.entity.ts ***!
  \*****************************************************************************/
/*! exports provided: DocumentPopupButtonSettings */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DocumentPopupButtonSettings", function() { return DocumentPopupButtonSettings; });
var DocumentPopupButtonSettings = /** @class */ (function () {
    function DocumentPopupButtonSettings() {
        this.createButtonText = 'Use Atlas Template';
        this.uploadButtonText = 'Edit Template';
        this.createButtonTooltip = 'Generate the document from Atlas';
        this.uploadButtonTooltip = 'Generate the document from the file you edited and saved from your computer';
    }
    return DocumentPopupButtonSettings;
}());



/***/ }),

/***/ "./Client/app/shared/entities/filter.entity.ts":
/*!*****************************************************!*\
  !*** ./Client/app/shared/entities/filter.entity.ts ***!
  \*****************************************************/
/*! exports provided: Filter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Filter", function() { return Filter; });
var Filter = /** @class */ (function () {
    function Filter(filterId, filters) {
        this.filterId = filterId;
        this.filters = filters;
    }
    return Filter;
}());



/***/ }),

/***/ "./Client/app/shared/enums/apportion-basis-type.enum.ts":
/*!**************************************************************!*\
  !*** ./Client/app/shared/enums/apportion-basis-type.enum.ts ***!
  \**************************************************************/
/*! exports provided: ApportionBasisType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ApportionBasisType", function() { return ApportionBasisType; });
var ApportionBasisType;
(function (ApportionBasisType) {
    ApportionBasisType[ApportionBasisType["TotalValue"] = 0] = "TotalValue";
    ApportionBasisType[ApportionBasisType["Quantity"] = 1] = "Quantity";
})(ApportionBasisType || (ApportionBasisType = {}));


/***/ }),

/***/ "./Client/app/shared/enums/cash-selection-type.ts":
/*!********************************************************!*\
  !*** ./Client/app/shared/enums/cash-selection-type.ts ***!
  \********************************************************/
/*! exports provided: CashSelectionType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CashSelectionType", function() { return CashSelectionType; });
var CashSelectionType;
(function (CashSelectionType) {
    CashSelectionType[CashSelectionType["SimpleCashPayment"] = 1] = "SimpleCashPayment";
    CashSelectionType[CashSelectionType["PaymentFullPartialTransaction"] = 2] = "PaymentFullPartialTransaction";
    CashSelectionType[CashSelectionType["PaymentDifferentCurrency"] = 3] = "PaymentDifferentCurrency";
    CashSelectionType[CashSelectionType["PaymentDifferentClient"] = 4] = "PaymentDifferentClient";
    CashSelectionType[CashSelectionType["SimpleCashReceipt"] = 5] = "SimpleCashReceipt";
    CashSelectionType[CashSelectionType["ReceiptFullPartialTransaction"] = 6] = "ReceiptFullPartialTransaction";
    CashSelectionType[CashSelectionType["ReceiptDifferentCurrency"] = 7] = "ReceiptDifferentCurrency";
})(CashSelectionType || (CashSelectionType = {}));


/***/ }),

/***/ "./Client/app/shared/enums/cash-stepper-type.enum.ts":
/*!***********************************************************!*\
  !*** ./Client/app/shared/enums/cash-stepper-type.enum.ts ***!
  \***********************************************************/
/*! exports provided: CashStepperType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CashStepperType", function() { return CashStepperType; });
var CashStepperType;
(function (CashStepperType) {
    CashStepperType[CashStepperType["PaymentCashType"] = 0] = "PaymentCashType";
    CashStepperType[CashStepperType["PaymentPickTransaction"] = 1] = "PaymentPickTransaction";
    CashStepperType[CashStepperType["PaymentDetails"] = 2] = "PaymentDetails";
    CashStepperType[CashStepperType["PaymentSummary"] = 3] = "PaymentSummary";
    CashStepperType[CashStepperType["ReceiptCashType"] = 0] = "ReceiptCashType";
    CashStepperType[CashStepperType["ReceiptDetails"] = 1] = "ReceiptDetails";
    CashStepperType[CashStepperType["ReceiptPickTransaction"] = 2] = "ReceiptPickTransaction";
    CashStepperType[CashStepperType["ReceiptSummary"] = 3] = "ReceiptSummary";
})(CashStepperType || (CashStepperType = {}));


/***/ }),

/***/ "./Client/app/shared/enums/charter-closure-status.enum.ts":
/*!****************************************************************!*\
  !*** ./Client/app/shared/enums/charter-closure-status.enum.ts ***!
  \****************************************************************/
/*! exports provided: CharterClosureStatus */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CharterClosureStatus", function() { return CharterClosureStatus; });
var CharterClosureStatus;
(function (CharterClosureStatus) {
    // 1 -> Fully Invoiced, 2-> Quantity = 0 / ShippingStatus = Cancelled
    // 3-> Invoice not finalized, 4 -> Unposted Invoices, 5 -> No BL Date/UNrelized Trade
    // 6 -> Uninvoiced Costs, 7-> Uncashmatched Costs & Not posted Invoices
    // sectionCloseValidStatus = [1, 2, 3, 4, 5, 6, 7];
    CharterClosureStatus[CharterClosureStatus["FullyInvoiced"] = 1] = "FullyInvoiced";
    CharterClosureStatus[CharterClosureStatus["ZeroQuantity"] = 2] = "ZeroQuantity";
    CharterClosureStatus[CharterClosureStatus["CancelledShipping"] = 3] = "CancelledShipping";
    CharterClosureStatus[CharterClosureStatus["InvoiceNotFinalized"] = 4] = "InvoiceNotFinalized";
    CharterClosureStatus[CharterClosureStatus["UnpostedInvoice"] = 5] = "UnpostedInvoice";
    CharterClosureStatus[CharterClosureStatus["NoBlDateUnrelizedTrade"] = 6] = "NoBlDateUnrelizedTrade";
    CharterClosureStatus[CharterClosureStatus["UninvoicedCosts"] = 7] = "UninvoicedCosts";
    CharterClosureStatus[CharterClosureStatus["UncashmatchedCosts"] = 8] = "UncashmatchedCosts";
})(CharterClosureStatus || (CharterClosureStatus = {}));


/***/ }),

/***/ "./Client/app/shared/enums/charter-group-function-type.ts":
/*!****************************************************************!*\
  !*** ./Client/app/shared/enums/charter-group-function-type.ts ***!
  \****************************************************************/
/*! exports provided: CharterGroupFunctionTypes */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CharterGroupFunctionTypes", function() { return CharterGroupFunctionTypes; });
var CharterGroupFunctionTypes;
(function (CharterGroupFunctionTypes) {
    CharterGroupFunctionTypes[CharterGroupFunctionTypes["CharterBulkClosure"] = 1] = "CharterBulkClosure";
})(CharterGroupFunctionTypes || (CharterGroupFunctionTypes = {}));


/***/ }),

/***/ "./Client/app/shared/enums/cost-direction-type.enum.ts":
/*!*************************************************************!*\
  !*** ./Client/app/shared/enums/cost-direction-type.enum.ts ***!
  \*************************************************************/
/*! exports provided: CostDirectionType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CostDirectionType", function() { return CostDirectionType; });
var CostDirectionType;
(function (CostDirectionType) {
    CostDirectionType[CostDirectionType["Cr"] = 1] = "Cr";
    CostDirectionType[CostDirectionType["Dr"] = 2] = "Dr";
})(CostDirectionType || (CostDirectionType = {}));


/***/ }),

/***/ "./Client/app/shared/enums/cost-sign.enum.ts":
/*!***************************************************!*\
  !*** ./Client/app/shared/enums/cost-sign.enum.ts ***!
  \***************************************************/
/*! exports provided: CostSigns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CostSigns", function() { return CostSigns; });
var CostSigns;
(function (CostSigns) {
    CostSigns[CostSigns["-"] = 1] = "-";
    CostSigns[CostSigns["+"] = 2] = "+";
})(CostSigns || (CostSigns = {}));


/***/ }),

/***/ "./Client/app/shared/enums/invoice-payment-type.ts":
/*!*********************************************************!*\
  !*** ./Client/app/shared/enums/invoice-payment-type.ts ***!
  \*********************************************************/
/*! exports provided: InvoicePaymentType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InvoicePaymentType", function() { return InvoicePaymentType; });
var InvoicePaymentType;
(function (InvoicePaymentType) {
    InvoicePaymentType[InvoicePaymentType["Pay"] = 1] = "Pay";
    InvoicePaymentType[InvoicePaymentType["Receive"] = 2] = "Receive";
})(InvoicePaymentType || (InvoicePaymentType = {}));


/***/ }),

/***/ "./Client/app/shared/enums/pricing-options.enum.ts":
/*!*********************************************************!*\
  !*** ./Client/app/shared/enums/pricing-options.enum.ts ***!
  \*********************************************************/
/*! exports provided: PricingOptions */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PricingOptions", function() { return PricingOptions; });
var PricingOptions;
(function (PricingOptions) {
    PricingOptions[PricingOptions["OutrightAverage"] = 1] = "OutrightAverage";
    PricingOptions[PricingOptions["OutrightActualPricePerSplit"] = 2] = "OutrightActualPricePerSplit";
    PricingOptions[PricingOptions["GroupbycommodityPrice"] = 3] = "GroupbycommodityPrice";
})(PricingOptions || (PricingOptions = {}));


/***/ }),

/***/ "./Client/app/shared/enums/tolerance-type.enum.ts":
/*!********************************************************!*\
  !*** ./Client/app/shared/enums/tolerance-type.enum.ts ***!
  \********************************************************/
/*! exports provided: ToleranceTypes */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ToleranceTypes", function() { return ToleranceTypes; });
var ToleranceTypes;
(function (ToleranceTypes) {
    ToleranceTypes[ToleranceTypes["Percentage"] = 0] = "Percentage";
})(ToleranceTypes || (ToleranceTypes = {}));


/***/ }),

/***/ "./Client/app/shared/models/assigned-section-display-view.ts":
/*!*******************************************************************!*\
  !*** ./Client/app/shared/models/assigned-section-display-view.ts ***!
  \*******************************************************************/
/*! exports provided: AssignedSectionView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AssignedSectionView", function() { return AssignedSectionView; });
var AssignedSectionView = /** @class */ (function () {
    function AssignedSectionView(section) {
        this.contractType = section.contractType;
        this.contractLabel = section.contractLabel;
        this.commodityId = section.commodityId;
        this.departmentId = section.departmentId;
        this.buyerCode = section.buyerCode;
        this.sellerCode = section.sellerCode;
        this.currency = section.currency;
        this.price = section.price;
        this.blDate = section.blDate;
        this.allocatedTo = section.allocatedTo;
        this.assignedCharterReference = section.assignedCharterReference;
        this.weightUnitId = section.weightUnitId;
        this.priceUnitId = section.priceUnitId;
        this.sectionId = section.sectionId;
        this.quantity = section.quantity;
        this.sectionAllocated = section.sectionAllocated;
        this.charterRef = section.charterRef;
        this.assignmentDate = section.assignmentDate;
        this.vessel = section.vessel;
        this.groupNumber = section.groupNumber;
        this.portOrigin = section.portOrigin;
        this.portDestination = section.portDestination;
        this.marketSector = section.marketSector;
        this.blRef = section.blRef;
        this.counterparty = section.counterparty;
        this.invoiceRef = section.invoiceRef;
        this.pricingMethodId = section.pricingMethodId;
        this.contractStatusCode = section.contractStatusCode;
        this.createdDateTime = section.createdDateTime;
        this.modifiedDateTime = section.modifiedDateTime;
        this.modifiedBy = section.modifiedBy;
        this.paymentTermCode = section.paymentTermCode;
        this.shipmentPeriod = section.shipmentPeriod;
        this.removeSectionTrafficInfo = section.removeSectionTrafficInfo;
        this.isTouched = false;
        this.originalQuantity = this.quantity;
        this.isValid = true;
        this.isValidAllocatedTo = true;
        this.invoicingStatus = section.invoicingStatus;
        this.isSaleFullyInvoiced = false;
        this.reasonForDeassignment = '';
        this.highLightRow = false;
        this.automatedChanged = false;
        this.quantityStyleChangeForQuantity = false;
        this.quantityStyleChangeForAllocatedTo = false;
        this.editableAllocatedTo = (section.allocatedTo) ? false : true;
        this.isChecked = false;
        this.contractBlDate = section.contractBlDate;
        this.allocatedDateTime = section.allocatedDateTime;
        this.amendedBy = section.amendedBy;
        this.amendedOn = section.amendedOn;
        this.arbitrationCode = section.arbitrationCode;
        this.arbitrationDescription = section.arbitrationDescription;
        this.buyerDescription = section.buyerDescription;
        this.commodity1 = section.commodity1;
        this.commodity2 = section.commodity2;
        this.commodity3 = section.commodity3;
        this.commodity4 = section.commodity4;
        this.commodity5 = section.commodity5;
        this.commodityDescription = section.commodityDescription;
        this.companyId = section.companyId;
        this.contractIssuedOn = section.contractIssuedOn;
        this.contractQuantity = section.contractQuantity;
        this.contractTermCode = section.contractTermCode;
        this.contractTermDescription = section.contractTermDescription;
        this.contractTermLocationPortCode = section.contractTermLocationPortCode;
        this.contractTermLocationDescription = section.contractTermLocationDescription;
        this.contractValue = section.contractValue;
        this.counterpartyRef = section.counterpartyRef;
        this.contractDate = section.contractDate;
        this.createdBy = section.createdBy;
        this.cropYear = section.cropYear;
        this.currencyDescription = section.currencyDescription;
        this.deliveryPeriodStart = section.deliveryPeriodStart;
        this.deliveryPeriodEnd = section.deliveryPeriodEnd;
        this.departmentCode = section.departmentCode;
        this.departmentDescription = section.departmentDescription;
        this.groupingNumber = section.groupingNumber;
        this.displayContractType = section.displayContractType;
        this.invoiceValue = section.invoiceValue;
        this.displayInvoicingStatus = section.displayInvoicingStatus;
        this.mainInvoiceReference = section.mainInvoiceReference;
        this.mainInvoiceDate = section.mainInvoiceDate;
        this.memo = section.memo;
        this.otherReference = section.otherReference;
        this.parentContractLabel = section.parentContractLabel;
        this.paymentDate = section.paymentDate;
        this.paymentTermDescription = section.paymentTermDescription;
        this.percentageInvoiced = section.percentageInvoiced;
        this.periodType = section.periodType;
        this.physicalContractCode = section.physicalContractCode;
        this.portOfOrigin = section.portOfOrigin;
        this.portOfOriginDescription = section.portOfOriginDescription;
        this.portOfDestination = section.portOfDestination;
        this.portOfDestinationDescription = section.portOfDestinationDescription;
        this.positionMonth = section.positionMonth;
        this.positionType = section.positionType;
        this.priceCode = section.priceCode;
        this.priceUnitDescription = section.priceUnitDescription;
        this.quantityCodeInvoiced = section.quantityCodeInvoiced;
        this.quantityInvoiced = section.quantityInvoiced;
        this.sellerDescription = section.sellerDescription;
        this.traderDisplayName = section.traderDisplayName;
        this.vesselName = section.vesselName;
        this.weightUnitCode = section.weightUnitCode;
        this.weightUnitDescription = section.weightUnitDescription;
        this.isnavopen = false;
        this.allocatedSectionId = section.allocatedSectionId;
        this.allocatedToSectionId = section.allocatedToSectionId;
        this.isWashout = false;
        this.principalCommodity = section.principalCommodity;
        this.part2 = section.part2;
        this.part3 = section.part3;
        this.departmentCode = section.departmentCode;
        this.departmentDescription = section.departmentDescription;
        this.WeightCode = section.WeightCode;
    }
    return AssignedSectionView;
}());



/***/ }),

/***/ "./Client/app/shared/models/cash-display-view.ts":
/*!*******************************************************!*\
  !*** ./Client/app/shared/models/cash-display-view.ts ***!
  \*******************************************************/
/*! exports provided: CashDisplayView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CashDisplayView", function() { return CashDisplayView; });
/* harmony import */ var _enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums/cash-selection-type */ "./Client/app/shared/enums/cash-selection-type.ts");
/* harmony import */ var _enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums/cash-type.enum */ "./Client/app/shared/enums/cash-type.enum.ts");
/* harmony import */ var _enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../enums/interface-status.enum */ "./Client/app/shared/enums/interface-status.enum.ts");
/* harmony import */ var _enums_posting_status_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../enums/posting-status.enum */ "./Client/app/shared/enums/posting-status.enum.ts");




var CashDisplayView = /** @class */ (function () {
    function CashDisplayView(cash) {
        if (cash) {
            this.cashId = cash.cashId;
            this.cashTypeId = cash.cashTypeId;
            this.currencyCode = cash.currencyCode;
            this.counterPartyCode = cash.counterPartyCode;
            this.nominalAccountCode = cash.nominalAccountCode;
            this.documentDate = cash.documentDate;
            this.valueDate = cash.valueDate;
            this.costTypeCode = cash.costTypeCode;
            this.costDirectionId = cash.costDirectionId;
            this.departmentId = cash.departmentId;
            this.narrative = cash.narrative;
            this.charterId = cash.charterId;
            this.status = this.getPostingStatus(cash.postingStatus);
            this.transactionDocumentId = cash.transactionDocumentId;
            this.authorizedForPosting = cash.authorizedForPosting;
            this.counterpartyDocumentReference = cash.counterpartyDocumentReference;
            this.documentReference = cash.documentReference;
            this.nominalBankAccountCode = cash.nominalBankAccountCode;
            this.ownerName = cash.ownerName;
            this.physicalDocumentId = cash.physicalDocumentId;
            this.transactionDocumentTypeId = cash.transactionDocumentTypeId;
            this.counterpartyOrNominalAccountCode = (this.costDirectionId === _enums_cash_type_enum__WEBPACK_IMPORTED_MODULE_1__["CashType"].CashPayment ?
                cash.counterPartyCode : cash.nominalAccountCode);
            this.departmentDescription = cash.departmentDescription;
            this.documentType = this.getDocumentType(this.cashTypeId);
            this.charterCode = cash.charterCode;
            this.amount = cash.cashTypeId === _enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_0__["CashSelectionType"].PaymentDifferentCurrency ||
                cash.cashTypeId === _enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_0__["CashSelectionType"].ReceiptDifferentCurrency ?
                cash.matchingAmount : cash.amount;
            this.traxStatus = this.getTraxStatus(cash.traxStatus);
            this.errorMessage = cash.errorMessage;
            this.paymentCashId = cash.paymentCashId;
        }
    }
    CashDisplayView.prototype.getDocumentType = function (value) {
        // these return values are taken from/defined in FS.
        if (value !== 0) {
            if (value === _enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_0__["CashSelectionType"].SimpleCashPayment ||
                value === _enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_0__["CashSelectionType"].SimpleCashReceipt) {
                return 'Simple Cash';
            }
            else if (value === _enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_0__["CashSelectionType"].PaymentDifferentClient) {
                return 'Diff Cli';
            }
            else if (value === _enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_0__["CashSelectionType"].PaymentFullPartialTransaction ||
                value === _enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_0__["CashSelectionType"].ReceiptFullPartialTransaction) {
                return 'Pick Tx';
            }
            else if (value === _enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_0__["CashSelectionType"].PaymentDifferentCurrency ||
                value === _enums_cash_selection_type__WEBPACK_IMPORTED_MODULE_0__["CashSelectionType"].ReceiptDifferentCurrency) {
                return 'Diff Ccy';
            }
        }
    };
    CashDisplayView.prototype.getTraxStatus = function (traxStatus) {
        switch (traxStatus) {
            case _enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_2__["InterfaceStatus"].ReadyToTransmit:
                return 'Ready To Transmit';
                break;
            case _enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_2__["InterfaceStatus"].StandBy:
                return 'Stand By';
                break;
            case _enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_2__["InterfaceStatus"].TransmitError:
                return 'Transmit Error';
                break;
            default:
                return _enums_interface_status_enum__WEBPACK_IMPORTED_MODULE_2__["InterfaceStatus"][traxStatus];
                break;
        }
    };
    CashDisplayView.prototype.getPostingStatus = function (postingStatus) {
        switch (postingStatus) {
            case _enums_posting_status_enum__WEBPACK_IMPORTED_MODULE_3__["PostingStatus"].Authorized:
                return 'Authorized';
            case _enums_posting_status_enum__WEBPACK_IMPORTED_MODULE_3__["PostingStatus"].Deleted:
                return 'Deleted';
            case _enums_posting_status_enum__WEBPACK_IMPORTED_MODULE_3__["PostingStatus"].Held:
                return 'Held';
            case _enums_posting_status_enum__WEBPACK_IMPORTED_MODULE_3__["PostingStatus"].Incomplete:
                return 'Incomplete';
            case _enums_posting_status_enum__WEBPACK_IMPORTED_MODULE_3__["PostingStatus"].MappingError:
                return 'Mapping Error';
            case _enums_posting_status_enum__WEBPACK_IMPORTED_MODULE_3__["PostingStatus"].Posted:
                return 'Posted';
        }
    };
    return CashDisplayView;
}());



/***/ }),

/***/ "./Client/app/shared/models/charter-display-view.ts":
/*!**********************************************************!*\
  !*** ./Client/app/shared/models/charter-display-view.ts ***!
  \**********************************************************/
/*! exports provided: CharterDisplayView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CharterDisplayView", function() { return CharterDisplayView; });
var CharterDisplayView = /** @class */ (function () {
    function CharterDisplayView(charter) {
        if (charter) {
            this.charterId = charter.charterId;
            this.charterCode = charter.charterCode;
            this.description = charter.description;
            this.transportType = charter.transportTypeCode;
            this.vessel = charter.vesselCode;
            this.loadingLocation = charter.loadingLocationCode;
            this.departureDate = charter.departureDate;
            this.dischargeLocation = charter.dischargeLocationCode;
            this.arrivalDate = charter.arrivalDate;
            this.creationDate = charter.creationDate;
            this.createdBy = charter.createdBy;
            this.blDate = charter.blDate;
            this.departmentId = charter.departmentId;
            this.charterManagerId = charter.charterManagerId;
            this.charterManagerSamAccountName = charter.charterManagerSamAccountName;
            this.charterStatusId = charter.charterStatusId;
        }
    }
    return CharterDisplayView;
}());



/***/ }),

/***/ "./Client/app/shared/models/missing-invoices-display-view.ts":
/*!*******************************************************************!*\
  !*** ./Client/app/shared/models/missing-invoices-display-view.ts ***!
  \*******************************************************************/
/*! exports provided: MissingInvoicesDisplayView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MissingInvoicesDisplayView", function() { return MissingInvoicesDisplayView; });
var MissingInvoicesDisplayView = /** @class */ (function () {
    function MissingInvoicesDisplayView(sectionID, contractRef, department, counterparty, vessel, blDate, period, commodity, quantity, total, price, priceDiff, lots, user, entityFilter, blDateFilter, transportFilter, contractTypeFilter) {
        this.contractRef = contractRef;
        this.department = department;
        this.counterparty = counterparty;
        this.vessel = vessel;
        this.blDate = blDate;
        this.period = period;
        this.commodity = commodity;
        this.quantity = quantity;
        this.total = total;
        this.price = price;
        this.priceDiff = priceDiff;
        this.lots = lots;
        this.user = user;
        this.entityFilter = entityFilter;
        this.blDateFilter = blDateFilter;
        this.transportFilter = transportFilter;
        this.contractTypeFilter = contractTypeFilter;
        this.sectionID = sectionID;
    }
    return MissingInvoicesDisplayView;
}());



/***/ }),

/***/ "./Client/app/shared/models/trade-partial-display-view.ts":
/*!****************************************************************!*\
  !*** ./Client/app/shared/models/trade-partial-display-view.ts ***!
  \****************************************************************/
/*! exports provided: TradePartialDisplayView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TradePartialDisplayView", function() { return TradePartialDisplayView; });
/* harmony import */ var _enums_contract_status_enum__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums/contract-status.enum */ "./Client/app/shared/enums/contract-status.enum.ts");
/* harmony import */ var _enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums/contract-type.enum */ "./Client/app/shared/enums/contract-type.enum.ts");
/* harmony import */ var _enums_pricing_method_enum__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../enums/pricing-method.enum */ "./Client/app/shared/enums/pricing-method.enum.ts");



var TradePartialDisplayView = /** @class */ (function () {
    function TradePartialDisplayView(trade) {
        if (trade) {
            this.contractLabel = trade.contractLabel;
            this.type = _enums_contract_type_enum__WEBPACK_IMPORTED_MODULE_1__["ContractTypes"][trade.type];
            this.pricingMethodId = trade.pricingMethodId;
            this.pricingMethodLabel = _enums_pricing_method_enum__WEBPACK_IMPORTED_MODULE_2__["PricingMethods"][trade.pricingMethodId];
            this.status = _enums_contract_status_enum__WEBPACK_IMPORTED_MODULE_0__["ContractStatus"][trade.status];
            this.commodityCode = trade.commodityCode;
            this.paymentTermCode = trade.paymentTermCode;
            this.departmentCode = trade.departmentCode;
            this.quantity = trade.quantity;
            this.weightCode = trade.weightCode;
            this.price = trade.price;
            this.currencyCode = trade.currencyCode;
            this.contractValue = trade.contractValue;
            this.contractDate = trade.contractDate;
            this.lastModifiedDate = trade.modifiedDateTime;
            this.lastModifiedBy = trade.modifiedBy;
            this.sectionId = trade.sectionId;
            this.allocatedTo = trade.allocatedTo;
            this.charter = trade.charterCode;
            this.parentRef = trade.parentRef;
        }
    }
    return TradePartialDisplayView;
}());



/***/ }),

/***/ "./Client/app/shared/services/execution/charter-manager-data-loader.ts":
/*!*****************************************************************************!*\
  !*** ./Client/app/shared/services/execution/charter-manager-data-loader.ts ***!
  \*****************************************************************************/
/*! exports provided: CharterManagerDataLoader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CharterManagerDataLoader", function() { return CharterManagerDataLoader; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _http_services_execution_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var CharterManagerDataLoader = /** @class */ (function () {
    function CharterManagerDataLoader(executionService) {
        this.executionService = executionService;
    }
    CharterManagerDataLoader.prototype.getData = function () {
        var list = this.executionService.getAllCharterManagers()
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["map"])(function (data) {
            return data.value;
        }));
        return list;
    };
    CharterManagerDataLoader = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [_http_services_execution_service__WEBPACK_IMPORTED_MODULE_2__["ExecutionService"]])
    ], CharterManagerDataLoader);
    return CharterManagerDataLoader;
}());



/***/ }),

/***/ "./Client/app/shared/services/execution/dtos/cash-matching.ts":
/*!********************************************************************!*\
  !*** ./Client/app/shared/services/execution/dtos/cash-matching.ts ***!
  \********************************************************************/
/*! exports provided: CashMatching */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CashMatching", function() { return CashMatching; });
var CashMatching = /** @class */ (function () {
    function CashMatching() {
    }
    return CashMatching;
}());



/***/ }),

/***/ "./Client/app/shared/services/execution/dtos/cash-record.ts":
/*!******************************************************************!*\
  !*** ./Client/app/shared/services/execution/dtos/cash-record.ts ***!
  \******************************************************************/
/*! exports provided: CashRecord */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CashRecord", function() { return CashRecord; });
var CashRecord = /** @class */ (function () {
    function CashRecord() {
        this.additionalCostDetails = [];
        this.documentMatchings = [];
    }
    return CashRecord;
}());



/***/ }),

/***/ "./Client/app/shared/services/execution/dtos/cash-setup.ts":
/*!*****************************************************************!*\
  !*** ./Client/app/shared/services/execution/dtos/cash-setup.ts ***!
  \*****************************************************************/
/*! exports provided: CashSetup */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CashSetup", function() { return CashSetup; });
var CashSetup = /** @class */ (function () {
    function CashSetup() {
    }
    return CashSetup;
}());



/***/ }),

/***/ "./Client/app/shared/services/execution/dtos/contracts-to-cost-invoice.ts":
/*!********************************************************************************!*\
  !*** ./Client/app/shared/services/execution/dtos/contracts-to-cost-invoice.ts ***!
  \********************************************************************************/
/*! exports provided: ContractsToCostInvoice */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContractsToCostInvoice", function() { return ContractsToCostInvoice; });
var ContractsToCostInvoice = /** @class */ (function () {
    function ContractsToCostInvoice() {
    }
    return ContractsToCostInvoice;
}());



/***/ }),

/***/ "./Client/app/shared/services/execution/dtos/contracts-to-invoice.ts":
/*!***************************************************************************!*\
  !*** ./Client/app/shared/services/execution/dtos/contracts-to-invoice.ts ***!
  \***************************************************************************/
/*! exports provided: ContractsToInvoice */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContractsToInvoice", function() { return ContractsToInvoice; });
var ContractsToInvoice = /** @class */ (function () {
    function ContractsToInvoice() {
    }
    return ContractsToInvoice;
}());



/***/ }),

/***/ "./Client/app/shared/services/execution/dtos/contracts-to-washout-invoice.ts":
/*!***********************************************************************************!*\
  !*** ./Client/app/shared/services/execution/dtos/contracts-to-washout-invoice.ts ***!
  \***********************************************************************************/
/*! exports provided: ContractsToWashoutInvoice */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContractsToWashoutInvoice", function() { return ContractsToWashoutInvoice; });
var ContractsToWashoutInvoice = /** @class */ (function () {
    function ContractsToWashoutInvoice() {
    }
    return ContractsToWashoutInvoice;
}());



/***/ }),

/***/ "./Client/app/shared/services/execution/dtos/invoice-for-cash.ts":
/*!***********************************************************************!*\
  !*** ./Client/app/shared/services/execution/dtos/invoice-for-cash.ts ***!
  \***********************************************************************/
/*! exports provided: InvoiceForCashMatching */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InvoiceForCashMatching", function() { return InvoiceForCashMatching; });
var InvoiceForCashMatching = /** @class */ (function () {
    function InvoiceForCashMatching() {
    }
    return InvoiceForCashMatching;
}());



/***/ }),

/***/ "./Client/app/shared/services/execution/dtos/invoice-summary-record.ts":
/*!*****************************************************************************!*\
  !*** ./Client/app/shared/services/execution/dtos/invoice-summary-record.ts ***!
  \*****************************************************************************/
/*! exports provided: InvoiceSummaryRecord */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InvoiceSummaryRecord", function() { return InvoiceSummaryRecord; });
var InvoiceSummaryRecord = /** @class */ (function () {
    function InvoiceSummaryRecord() {
    }
    return InvoiceSummaryRecord;
}());



/***/ }),

/***/ "./Client/app/shared/services/execution/dtos/tax-record.ts":
/*!*****************************************************************!*\
  !*** ./Client/app/shared/services/execution/dtos/tax-record.ts ***!
  \*****************************************************************/
/*! exports provided: TaxRecord */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaxRecord", function() { return TaxRecord; });
var TaxRecord = /** @class */ (function () {
    function TaxRecord() {
    }
    return TaxRecord;
}());



/***/ }),

/***/ "./Client/app/shared/services/list-and-search/cashList-payment-data-loader.ts":
/*!************************************************************************************!*\
  !*** ./Client/app/shared/services/list-and-search/cashList-payment-data-loader.ts ***!
  \************************************************************************************/
/*! exports provided: CashListPaymentDataLoader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CashListPaymentDataLoader", function() { return CashListPaymentDataLoader; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _http_services_execution_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _dtos_list_and_search_list_and_search_filter_dto_dto__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../dtos/list-and-search/list-and-search-filter-dto.dto */ "./Client/app/shared/dtos/list-and-search/list-and-search-filter-dto.dto.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var CashListPaymentDataLoader = /** @class */ (function () {
    function CashListPaymentDataLoader(executionService) {
        this.executionService = executionService;
    }
    CashListPaymentDataLoader.prototype.getData = function (filters, dataVersionId, offset, limit) {
        var filtersForColumns = filters.map(function (filter) {
            return new _dtos_list_and_search_list_and_search_filter_dto_dto__WEBPACK_IMPORTED_MODULE_3__["ListAndSearchFilterDto"](filter);
        });
        var request = {
            clauses: { clauses: filtersForColumns },
            offset: offset,
            limit: limit,
        };
        var list = this.executionService.searchCashPaymentList(request)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["map"])(function (data) {
            return data;
        }));
        return list;
    };
    CashListPaymentDataLoader = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [_http_services_execution_service__WEBPACK_IMPORTED_MODULE_2__["ExecutionService"]])
    ], CashListPaymentDataLoader);
    return CashListPaymentDataLoader;
}());



/***/ }),

/***/ "./Client/app/shared/services/list-and-search/cashList-receipt-data-loader.ts":
/*!************************************************************************************!*\
  !*** ./Client/app/shared/services/list-and-search/cashList-receipt-data-loader.ts ***!
  \************************************************************************************/
/*! exports provided: CashListReceiptDataLoader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CashListReceiptDataLoader", function() { return CashListReceiptDataLoader; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _http_services_execution_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
/* harmony import */ var _dtos_list_and_search_list_and_search_filter_dto_dto__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../dtos/list-and-search/list-and-search-filter-dto.dto */ "./Client/app/shared/dtos/list-and-search/list-and-search-filter-dto.dto.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var CashListReceiptDataLoader = /** @class */ (function () {
    function CashListReceiptDataLoader(executionService) {
        this.executionService = executionService;
    }
    CashListReceiptDataLoader.prototype.getData = function (filters, dataVersionId, offset, limit) {
        var filtersForColumns = filters.map(function (filter) {
            return new _dtos_list_and_search_list_and_search_filter_dto_dto__WEBPACK_IMPORTED_MODULE_3__["ListAndSearchFilterDto"](filter);
        });
        var request = {
            clauses: { clauses: filtersForColumns },
            offset: offset,
            limit: limit,
        };
        // has to replace with execution search service call
        var list = this.executionService.searchCashReceiptList(request)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["map"])(function (data) {
            return data;
        }));
        return list;
    };
    CashListReceiptDataLoader = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [_http_services_execution_service__WEBPACK_IMPORTED_MODULE_2__["ExecutionService"]])
    ], CashListReceiptDataLoader);
    return CashListReceiptDataLoader;
}());



/***/ }),

/***/ "./Client/app/shared/services/list-and-search/charter-assignmentSections-data-loader.ts":
/*!**********************************************************************************************!*\
  !*** ./Client/app/shared/services/list-and-search/charter-assignmentSections-data-loader.ts ***!
  \**********************************************************************************************/
/*! exports provided: CharterAssignmentSectionsDataLoader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CharterAssignmentSectionsDataLoader", function() { return CharterAssignmentSectionsDataLoader; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _dtos_list_and_search_list_and_search_filter_dto_dto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../dtos/list-and-search/list-and-search-filter-dto.dto */ "./Client/app/shared/dtos/list-and-search/list-and-search-filter-dto.dto.ts");
/* harmony import */ var _http_services_execution_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var CharterAssignmentSectionsDataLoader = /** @class */ (function () {
    function CharterAssignmentSectionsDataLoader(executionService) {
        this.executionService = executionService;
    }
    CharterAssignmentSectionsDataLoader.prototype.getData = function (filters, dataVersionId, offset, limit) {
        var filtersForColumns = filters.map(function (filter) {
            return new _dtos_list_and_search_list_and_search_filter_dto_dto__WEBPACK_IMPORTED_MODULE_2__["ListAndSearchFilterDto"](filter);
        });
        var request = {
            clauses: { clauses: filtersForColumns },
            offset: offset,
            limit: limit,
        };
        var list = this.executionService.searchAssignSections(request)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["map"])(function (data) {
            return data;
        }));
        return list;
    };
    CharterAssignmentSectionsDataLoader = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [_http_services_execution_service__WEBPACK_IMPORTED_MODULE_3__["ExecutionService"]])
    ], CharterAssignmentSectionsDataLoader);
    return CharterAssignmentSectionsDataLoader;
}());



/***/ }),

/***/ "./Client/app/shared/services/list-and-search/charterList-data-loader.ts":
/*!*******************************************************************************!*\
  !*** ./Client/app/shared/services/list-and-search/charterList-data-loader.ts ***!
  \*******************************************************************************/
/*! exports provided: CharterListDataLoader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CharterListDataLoader", function() { return CharterListDataLoader; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _dtos_list_and_search_list_and_search_filter_dto_dto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../dtos/list-and-search/list-and-search-filter-dto.dto */ "./Client/app/shared/dtos/list-and-search/list-and-search-filter-dto.dto.ts");
/* harmony import */ var _http_services_execution_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../http-services/execution.service */ "./Client/app/shared/services/http-services/execution.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var CharterListDataLoader = /** @class */ (function () {
    function CharterListDataLoader(executionService) {
        this.executionService = executionService;
    }
    CharterListDataLoader.prototype.getData = function (filters, dataVersionId, offset, limit) {
        var filtersForColumns = filters.map(function (filter) {
            return new _dtos_list_and_search_list_and_search_filter_dto_dto__WEBPACK_IMPORTED_MODULE_2__["ListAndSearchFilterDto"](filter);
        });
        var request = {
            clauses: { clauses: filtersForColumns },
            offset: offset,
            limit: limit,
        };
        var list = this.executionService.charterSearch(request)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["map"])(function (data) {
            return data;
        }));
        return list;
    };
    CharterListDataLoader = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [_http_services_execution_service__WEBPACK_IMPORTED_MODULE_3__["ExecutionService"]])
    ], CharterListDataLoader);
    return CharterListDataLoader;
}());



/***/ }),

/***/ "./Client/app/shared/services/list-and-search/trade-document-data-loader.ts":
/*!**********************************************************************************!*\
  !*** ./Client/app/shared/services/list-and-search/trade-document-data-loader.ts ***!
  \**********************************************************************************/
/*! exports provided: TradeDocumentDataLoader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TradeDocumentDataLoader", function() { return TradeDocumentDataLoader; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _dtos_list_and_search_list_and_search_filter_dto_dto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../dtos/list-and-search/list-and-search-filter-dto.dto */ "./Client/app/shared/dtos/list-and-search/list-and-search-filter-dto.dto.ts");
/* harmony import */ var _http_services_document_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../http-services/document.service */ "./Client/app/shared/services/http-services/document.service.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var TradeDocumentDataLoader = /** @class */ (function () {
    function TradeDocumentDataLoader(documentService, route) {
        this.documentService = documentService;
        this.route = route;
        this.recordId = Number(this.route.snapshot.paramMap.get('recordId'));
    }
    TradeDocumentDataLoader.prototype.getData = function (filters, dataVersionId, offset, limit) {
        var _this = this;
        var filtersForColumns = filters.map(function (filter) {
            return new _dtos_list_and_search_list_and_search_filter_dto_dto__WEBPACK_IMPORTED_MODULE_2__["ListAndSearchFilterDto"](filter);
        });
        var request = {
            clauses: { clauses: filtersForColumns },
            offset: offset,
            limit: limit,
            dataVersionId: dataVersionId,
        };
        var list = this.documentService.getGeneratedDocuments(request)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["map"])(function (data) {
            if (_this.recordId) {
                var result = data.value.find(function (record) { return record.recordId === _this.recordId; });
                return result;
            }
            return data.value;
        }));
        return list;
    };
    TradeDocumentDataLoader = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [_http_services_document_service__WEBPACK_IMPORTED_MODULE_3__["DocumentService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_4__["ActivatedRoute"]])
    ], TradeDocumentDataLoader);
    return TradeDocumentDataLoader;
}());



/***/ }),

/***/ "./Client/app/shared/services/masterdata/costType-data-loader.ts":
/*!***********************************************************************!*\
  !*** ./Client/app/shared/services/masterdata/costType-data-loader.ts ***!
  \***********************************************************************/
/*! exports provided: CostTypeDataLoader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CostTypeDataLoader", function() { return CostTypeDataLoader; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../http-services/masterdata.service */ "./Client/app/shared/services/http-services/masterdata.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var CostTypeDataLoader = /** @class */ (function () {
    function CostTypeDataLoader(masterDataService) {
        this.masterDataService = masterDataService;
    }
    CostTypeDataLoader.prototype.getData = function (searchTerm, pagingOptions) {
        var list = this.masterDataService.getCostTypes(searchTerm, pagingOptions)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["map"])(function (data) {
            return data.value;
        }));
        return list;
    };
    CostTypeDataLoader = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [_http_services_masterdata_service__WEBPACK_IMPORTED_MODULE_2__["MasterdataService"]])
    ], CostTypeDataLoader);
    return CostTypeDataLoader;
}());



/***/ })

}]);
//# sourceMappingURL=execution-execution-module.js.map